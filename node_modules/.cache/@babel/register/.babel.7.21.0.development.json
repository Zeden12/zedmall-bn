{"{\"assumptions\":{},\"sourceRoot\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"filename\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/server.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/node_modules/babel-plugin-add-module-exports/lib/index.js\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-runtime\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"regenerator\":true},\"externalDependencies\":[]},{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.21.0:development":{"value":{"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _dotenv = _interopRequireDefault(require(\"dotenv\"));\nvar _http = _interopRequireDefault(require(\"http\"));\nvar _index = require(\"./database/models/index\");\nvar _app = _interopRequireDefault(require(\"./app\"));\nvar _socket = require(\"./helpers/socket\");\n/* eslint-disable no-console */\n\n// eslint-disable-next-line import/named\n\n_dotenv.default.config();\nconst port = process.env.PORT || 6000;\nconst server = _http.default.createServer(_app.default);\n_socket.SocketUtil.config(server);\nserver.listen(port, () => {\n  console.log('server started,', port);\n});\n_index.sequelize.authenticate().then(() => {\n  console.log('Connection to the database has been established successfully.');\n}).catch(error => {\n  console.error('Unable to connect to the database:', error);\n});\n_app.default.emit('appStarted \\n');\nvar _default = _app.default;\nexports.default = _default;\nmodule.exports = exports.default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfZG90ZW52IiwiX2ludGVyb3BSZXF1aXJlRGVmYXVsdCIsInJlcXVpcmUiLCJfaHR0cCIsIl9pbmRleCIsIl9hcHAiLCJfc29ja2V0IiwiZW52IiwiY29uZmlnIiwicG9ydCIsInByb2Nlc3MiLCJQT1JUIiwic2VydmVyIiwiaHR0cCIsImNyZWF0ZVNlcnZlciIsImFwcCIsIlNvY2tldFV0aWwiLCJsaXN0ZW4iLCJjb25zb2xlIiwibG9nIiwic2VxdWVsaXplIiwiYXV0aGVudGljYXRlIiwidGhlbiIsImNhdGNoIiwiZXJyb3IiLCJlbWl0IiwiX2RlZmF1bHQiLCJleHBvcnRzIiwiZGVmYXVsdCIsIm1vZHVsZSJdLCJzb3VyY2VSb290IjoiL1VzZXJzL2FuZGVsYXJ3YW5kYS9EZXNrdG9wL2UtY29tbS10ZWFtLWJyb2dyYW1tZXJzLWJuL3NyYy8iLCJzb3VyY2VzIjpbInNlcnZlci5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKiBlc2xpbnQtZGlzYWJsZSBuby1jb25zb2xlICovXG5pbXBvcnQgZW52IGZyb20gJ2RvdGVudic7XG5pbXBvcnQgaHR0cCBmcm9tICdodHRwJztcbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBpbXBvcnQvbmFtZWRcbmltcG9ydCB7IHNlcXVlbGl6ZSB9IGZyb20gJy4vZGF0YWJhc2UvbW9kZWxzL2luZGV4JztcbmltcG9ydCBhcHAgZnJvbSAnLi9hcHAnO1xuaW1wb3J0IHsgU29ja2V0VXRpbCB9IGZyb20gJy4vaGVscGVycy9zb2NrZXQnO1xuXG5lbnYuY29uZmlnKCk7XG5jb25zdCBwb3J0ID0gcHJvY2Vzcy5lbnYuUE9SVCB8fCA2MDAwO1xuY29uc3Qgc2VydmVyID0gaHR0cC5jcmVhdGVTZXJ2ZXIoYXBwKTtcblNvY2tldFV0aWwuY29uZmlnKHNlcnZlcik7XG5cbnNlcnZlci5saXN0ZW4ocG9ydCwgKCkgPT4ge1xuICBjb25zb2xlLmxvZygnc2VydmVyIHN0YXJ0ZWQsJywgcG9ydCk7XG59KTtcblxuc2VxdWVsaXplLmF1dGhlbnRpY2F0ZSgpXG4gIC50aGVuKCgpID0+IHtcbiAgICBjb25zb2xlLmxvZygnQ29ubmVjdGlvbiB0byB0aGUgZGF0YWJhc2UgaGFzIGJlZW4gZXN0YWJsaXNoZWQgc3VjY2Vzc2Z1bGx5LicpO1xuICB9KVxuICAuY2F0Y2goKGVycm9yKSA9PiB7XG4gICAgY29uc29sZS5lcnJvcignVW5hYmxlIHRvIGNvbm5lY3QgdG8gdGhlIGRhdGFiYXNlOicsIGVycm9yKTtcbiAgfSk7XG5hcHAuZW1pdCgnYXBwU3RhcnRlZCBcXG4nKTtcbmV4cG9ydCBkZWZhdWx0IGFwcDtcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUNBLElBQUFBLE9BQUEsR0FBQUMsc0JBQUEsQ0FBQUMsT0FBQTtBQUNBLElBQUFDLEtBQUEsR0FBQUYsc0JBQUEsQ0FBQUMsT0FBQTtBQUVBLElBQUFFLE1BQUEsR0FBQUYsT0FBQTtBQUNBLElBQUFHLElBQUEsR0FBQUosc0JBQUEsQ0FBQUMsT0FBQTtBQUNBLElBQUFJLE9BQUEsR0FBQUosT0FBQTtBQU5BOztBQUdBOztBQUtBSyxlQUFHLENBQUNDLE1BQU0sRUFBRTtBQUNaLE1BQU1DLElBQUksR0FBR0MsT0FBTyxDQUFDSCxHQUFHLENBQUNJLElBQUksSUFBSSxJQUFJO0FBQ3JDLE1BQU1DLE1BQU0sR0FBR0MsYUFBSSxDQUFDQyxZQUFZLENBQUNDLFlBQUcsQ0FBQztBQUNyQ0Msa0JBQVUsQ0FBQ1IsTUFBTSxDQUFDSSxNQUFNLENBQUM7QUFFekJBLE1BQU0sQ0FBQ0ssTUFBTSxDQUFDUixJQUFJLEVBQUUsTUFBTTtFQUN4QlMsT0FBTyxDQUFDQyxHQUFHLENBQUMsaUJBQWlCLEVBQUVWLElBQUksQ0FBQztBQUN0QyxDQUFDLENBQUM7QUFFRlcsZ0JBQVMsQ0FBQ0MsWUFBWSxFQUFFLENBQ3JCQyxJQUFJLENBQUMsTUFBTTtFQUNWSixPQUFPLENBQUNDLEdBQUcsQ0FBQywrREFBK0QsQ0FBQztBQUM5RSxDQUFDLENBQUMsQ0FDREksS0FBSyxDQUFFQyxLQUFLLElBQUs7RUFDaEJOLE9BQU8sQ0FBQ00sS0FBSyxDQUFDLG9DQUFvQyxFQUFFQSxLQUFLLENBQUM7QUFDNUQsQ0FBQyxDQUFDO0FBQ0pULFlBQUcsQ0FBQ1UsSUFBSSxDQUFDLGVBQWUsQ0FBQztBQUFDLElBQUFDLFFBQUEsR0FDWFgsWUFBRztBQUFBWSxPQUFBLENBQUFDLE9BQUEsR0FBQUYsUUFBQTtBQUFBRyxNQUFBLENBQUFGLE9BQUEsR0FBQUEsT0FBQSxDQUFBQyxPQUFBIn0=","map":{"version":3,"names":["_dotenv","_interopRequireDefault","require","_http","_index","_app","_socket","env","config","port","process","PORT","server","http","createServer","app","SocketUtil","listen","console","log","sequelize","authenticate","then","catch","error","emit","_default","exports","default","module"],"sourceRoot":"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/","sources":["server.js"],"sourcesContent":["/* eslint-disable no-console */\nimport env from 'dotenv';\nimport http from 'http';\n// eslint-disable-next-line import/named\nimport { sequelize } from './database/models/index';\nimport app from './app';\nimport { SocketUtil } from './helpers/socket';\n\nenv.config();\nconst port = process.env.PORT || 6000;\nconst server = http.createServer(app);\nSocketUtil.config(server);\n\nserver.listen(port, () => {\n  console.log('server started,', port);\n});\n\nsequelize.authenticate()\n  .then(() => {\n    console.log('Connection to the database has been established successfully.');\n  })\n  .catch((error) => {\n    console.error('Unable to connect to the database:', error);\n  });\napp.emit('appStarted \\n');\nexport default app;\n"],"mappings":";;;;;;;AACA,IAAAA,OAAA,GAAAC,sBAAA,CAAAC,OAAA;AACA,IAAAC,KAAA,GAAAF,sBAAA,CAAAC,OAAA;AAEA,IAAAE,MAAA,GAAAF,OAAA;AACA,IAAAG,IAAA,GAAAJ,sBAAA,CAAAC,OAAA;AACA,IAAAI,OAAA,GAAAJ,OAAA;AANA;;AAGA;;AAKAK,eAAG,CAACC,MAAM,EAAE;AACZ,MAAMC,IAAI,GAAGC,OAAO,CAACH,GAAG,CAACI,IAAI,IAAI,IAAI;AACrC,MAAMC,MAAM,GAAGC,aAAI,CAACC,YAAY,CAACC,YAAG,CAAC;AACrCC,kBAAU,CAACR,MAAM,CAACI,MAAM,CAAC;AAEzBA,MAAM,CAACK,MAAM,CAACR,IAAI,EAAE,MAAM;EACxBS,OAAO,CAACC,GAAG,CAAC,iBAAiB,EAAEV,IAAI,CAAC;AACtC,CAAC,CAAC;AAEFW,gBAAS,CAACC,YAAY,EAAE,CACrBC,IAAI,CAAC,MAAM;EACVJ,OAAO,CAACC,GAAG,CAAC,+DAA+D,CAAC;AAC9E,CAAC,CAAC,CACDI,KAAK,CAAEC,KAAK,IAAK;EAChBN,OAAO,CAACM,KAAK,CAAC,oCAAoC,EAAEA,KAAK,CAAC;AAC5D,CAAC,CAAC;AACJT,YAAG,CAACU,IAAI,CAAC,eAAe,CAAC;AAAC,IAAAC,QAAA,GACXX,YAAG;AAAAY,OAAA,CAAAC,OAAA,GAAAF,QAAA;AAAAG,MAAA,CAAAF,OAAA,GAAAA,OAAA,CAAAC,OAAA"}},"mtime":1685643189470},"{\"assumptions\":{},\"sourceRoot\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/database/models/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"filename\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/database/models/index.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/node_modules/babel-plugin-add-module-exports/lib/index.js\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-runtime\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"regenerator\":true},\"externalDependencies\":[]},{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.21.0:development":{"value":{"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _fs = _interopRequireDefault(require(\"fs\"));\nvar _path = _interopRequireDefault(require(\"path\"));\nvar _sequelize = _interopRequireDefault(require(\"sequelize\"));\nvar _process = _interopRequireDefault(require(\"process\"));\nvar _config = _interopRequireDefault(require(\"../config/config\"));\nconst basename = _path.default.basename(__filename);\nconst env = _process.default.env.NODE_ENV || 'development';\nconst config = _config.default[env];\nconst db = {};\nlet sequelize;\nif (config.use_env_variable) {\n  sequelize = new _sequelize.default(_process.default.env[config.use_env_variable], config);\n} else if (config.url) {\n  sequelize = new _sequelize.default(config.url, config);\n} else {\n  sequelize = new _sequelize.default(config.database, config.username, config.password, config);\n}\n_fs.default.readdirSync(__dirname).filter(file => file.indexOf('.') !== 0 && file !== basename && file.slice(-3) === '.js' && file.indexOf('.test.js') === -1).forEach(file => {\n  // eslint-disable-next-line global-require, import/no-dynamic-require\n  const model = require(_path.default.join(__dirname, file))(sequelize, _sequelize.default.DataTypes);\n  db[model.name] = model;\n});\nObject.keys(db).forEach(modelName => {\n  if (db[modelName].associate) {\n    db[modelName].associate(db);\n  }\n});\ndb.sequelize = sequelize;\ndb.Sequelize = _sequelize.default;\nvar _default = db;\nexports.default = _default;\nmodule.exports = exports.default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfZnMiLCJfaW50ZXJvcFJlcXVpcmVEZWZhdWx0IiwicmVxdWlyZSIsIl9wYXRoIiwiX3NlcXVlbGl6ZSIsIl9wcm9jZXNzIiwiX2NvbmZpZyIsImJhc2VuYW1lIiwicGF0aCIsIl9fZmlsZW5hbWUiLCJlbnYiLCJwcm9jZXNzIiwiTk9ERV9FTlYiLCJjb25maWciLCJjb25maWdGaWxlIiwiZGIiLCJzZXF1ZWxpemUiLCJ1c2VfZW52X3ZhcmlhYmxlIiwiU2VxdWVsaXplIiwidXJsIiwiZGF0YWJhc2UiLCJ1c2VybmFtZSIsInBhc3N3b3JkIiwiZnMiLCJyZWFkZGlyU3luYyIsIl9fZGlybmFtZSIsImZpbHRlciIsImZpbGUiLCJpbmRleE9mIiwic2xpY2UiLCJmb3JFYWNoIiwibW9kZWwiLCJqb2luIiwiRGF0YVR5cGVzIiwibmFtZSIsIk9iamVjdCIsImtleXMiLCJtb2RlbE5hbWUiLCJhc3NvY2lhdGUiLCJfZGVmYXVsdCIsImV4cG9ydHMiLCJkZWZhdWx0IiwibW9kdWxlIl0sInNvdXJjZVJvb3QiOiIvVXNlcnMvYW5kZWxhcndhbmRhL0Rlc2t0b3AvZS1jb21tLXRlYW0tYnJvZ3JhbW1lcnMtYm4vc3JjL2RhdGFiYXNlL21vZGVscy8iLCJzb3VyY2VzIjpbImluZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBmcyBmcm9tICdmcyc7XG5pbXBvcnQgcGF0aCBmcm9tICdwYXRoJztcbmltcG9ydCBTZXF1ZWxpemUgZnJvbSAnc2VxdWVsaXplJztcbmltcG9ydCBwcm9jZXNzIGZyb20gJ3Byb2Nlc3MnO1xuaW1wb3J0IGNvbmZpZ0ZpbGUgZnJvbSAnLi4vY29uZmlnL2NvbmZpZyc7XG5cbmNvbnN0IGJhc2VuYW1lID0gcGF0aC5iYXNlbmFtZShfX2ZpbGVuYW1lKTtcbmNvbnN0IGVudiA9IHByb2Nlc3MuZW52Lk5PREVfRU5WIHx8ICdkZXZlbG9wbWVudCc7XG5jb25zdCBjb25maWcgPSBjb25maWdGaWxlW2Vudl07XG5jb25zdCBkYiA9IHt9O1xuXG5sZXQgc2VxdWVsaXplO1xuaWYgKGNvbmZpZy51c2VfZW52X3ZhcmlhYmxlKSB7XG4gIHNlcXVlbGl6ZSA9IG5ldyBTZXF1ZWxpemUocHJvY2Vzcy5lbnZbY29uZmlnLnVzZV9lbnZfdmFyaWFibGVdLCBjb25maWcpO1xufSBlbHNlIGlmIChjb25maWcudXJsKSB7XG4gIHNlcXVlbGl6ZSA9IG5ldyBTZXF1ZWxpemUoY29uZmlnLnVybCwgY29uZmlnKTtcbn0gZWxzZSB7XG4gIHNlcXVlbGl6ZSA9IG5ldyBTZXF1ZWxpemUoY29uZmlnLmRhdGFiYXNlLCBjb25maWcudXNlcm5hbWUsIGNvbmZpZy5wYXNzd29yZCwgY29uZmlnKTtcbn1cblxuZnNcbiAgLnJlYWRkaXJTeW5jKF9fZGlybmFtZSlcbiAgLmZpbHRlcigoZmlsZSkgPT4gKFxuICAgIGZpbGUuaW5kZXhPZignLicpICE9PSAwXG4gICAgICAmJiBmaWxlICE9PSBiYXNlbmFtZVxuICAgICAgJiYgZmlsZS5zbGljZSgtMykgPT09ICcuanMnXG4gICAgICAmJiBmaWxlLmluZGV4T2YoJy50ZXN0LmpzJykgPT09IC0xXG4gICkpXG4gIC5mb3JFYWNoKChmaWxlKSA9PiB7XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGdsb2JhbC1yZXF1aXJlLCBpbXBvcnQvbm8tZHluYW1pYy1yZXF1aXJlXG4gICAgY29uc3QgbW9kZWwgPSByZXF1aXJlKHBhdGguam9pbihfX2Rpcm5hbWUsIGZpbGUpKShzZXF1ZWxpemUsIFNlcXVlbGl6ZS5EYXRhVHlwZXMpO1xuICAgIGRiW21vZGVsLm5hbWVdID0gbW9kZWw7XG4gIH0pO1xuXG5PYmplY3Qua2V5cyhkYikuZm9yRWFjaCgobW9kZWxOYW1lKSA9PiB7XG4gIGlmIChkYlttb2RlbE5hbWVdLmFzc29jaWF0ZSkge1xuICAgIGRiW21vZGVsTmFtZV0uYXNzb2NpYXRlKGRiKTtcbiAgfVxufSk7XG5cbmRiLnNlcXVlbGl6ZSA9IHNlcXVlbGl6ZTtcbmRiLlNlcXVlbGl6ZSA9IFNlcXVlbGl6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","map":{"version":3,"names":["_fs","_interopRequireDefault","require","_path","_sequelize","_process","_config","basename","path","__filename","env","process","NODE_ENV","config","configFile","db","sequelize","use_env_variable","Sequelize","url","database","username","password","fs","readdirSync","__dirname","filter","file","indexOf","slice","forEach","model","join","DataTypes","name","Object","keys","modelName","associate","_default","exports","default","module"],"sourceRoot":"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/database/models/","sources":["index.js"],"sourcesContent":["import fs from 'fs';\nimport path from 'path';\nimport Sequelize from 'sequelize';\nimport process from 'process';\nimport configFile from '../config/config';\n\nconst basename = path.basename(__filename);\nconst env = process.env.NODE_ENV || 'development';\nconst config = configFile[env];\nconst db = {};\n\nlet sequelize;\nif (config.use_env_variable) {\n  sequelize = new Sequelize(process.env[config.use_env_variable], config);\n} else if (config.url) {\n  sequelize = new Sequelize(config.url, config);\n} else {\n  sequelize = new Sequelize(config.database, config.username, config.password, config);\n}\n\nfs\n  .readdirSync(__dirname)\n  .filter((file) => (\n    file.indexOf('.') !== 0\n      && file !== basename\n      && file.slice(-3) === '.js'\n      && file.indexOf('.test.js') === -1\n  ))\n  .forEach((file) => {\n    // eslint-disable-next-line global-require, import/no-dynamic-require\n    const model = require(path.join(__dirname, file))(sequelize, Sequelize.DataTypes);\n    db[model.name] = model;\n  });\n\nObject.keys(db).forEach((modelName) => {\n  if (db[modelName].associate) {\n    db[modelName].associate(db);\n  }\n});\n\ndb.sequelize = sequelize;\ndb.Sequelize = Sequelize;\n\nexport default db;\n"],"mappings":";;;;;;;AAAA,IAAAA,GAAA,GAAAC,sBAAA,CAAAC,OAAA;AACA,IAAAC,KAAA,GAAAF,sBAAA,CAAAC,OAAA;AACA,IAAAE,UAAA,GAAAH,sBAAA,CAAAC,OAAA;AACA,IAAAG,QAAA,GAAAJ,sBAAA,CAAAC,OAAA;AACA,IAAAI,OAAA,GAAAL,sBAAA,CAAAC,OAAA;AAEA,MAAMK,QAAQ,GAAGC,aAAI,CAACD,QAAQ,CAACE,UAAU,CAAC;AAC1C,MAAMC,GAAG,GAAGC,gBAAO,CAACD,GAAG,CAACE,QAAQ,IAAI,aAAa;AACjD,MAAMC,MAAM,GAAGC,eAAU,CAACJ,GAAG,CAAC;AAC9B,MAAMK,EAAE,GAAG,CAAC,CAAC;AAEb,IAAIC,SAAS;AACb,IAAIH,MAAM,CAACI,gBAAgB,EAAE;EAC3BD,SAAS,GAAG,IAAIE,kBAAS,CAACP,gBAAO,CAACD,GAAG,CAACG,MAAM,CAACI,gBAAgB,CAAC,EAAEJ,MAAM,CAAC;AACzE,CAAC,MAAM,IAAIA,MAAM,CAACM,GAAG,EAAE;EACrBH,SAAS,GAAG,IAAIE,kBAAS,CAACL,MAAM,CAACM,GAAG,EAAEN,MAAM,CAAC;AAC/C,CAAC,MAAM;EACLG,SAAS,GAAG,IAAIE,kBAAS,CAACL,MAAM,CAACO,QAAQ,EAAEP,MAAM,CAACQ,QAAQ,EAAER,MAAM,CAACS,QAAQ,EAAET,MAAM,CAAC;AACtF;AAEAU,WAAE,CACCC,WAAW,CAACC,SAAS,CAAC,CACtBC,MAAM,CAAEC,IAAI,IACXA,IAAI,CAACC,OAAO,CAAC,GAAG,CAAC,KAAK,CAAC,IAClBD,IAAI,KAAKpB,QAAQ,IACjBoB,IAAI,CAACE,KAAK,CAAC,CAAC,CAAC,CAAC,KAAK,KAAK,IACxBF,IAAI,CAACC,OAAO,CAAC,UAAU,CAAC,KAAK,CAAC,CACpC,CAAC,CACDE,OAAO,CAAEH,IAAI,IAAK;EACjB;EACA,MAAMI,KAAK,GAAG7B,OAAO,CAACM,aAAI,CAACwB,IAAI,CAACP,SAAS,EAAEE,IAAI,CAAC,CAAC,CAACX,SAAS,EAAEE,kBAAS,CAACe,SAAS,CAAC;EACjFlB,EAAE,CAACgB,KAAK,CAACG,IAAI,CAAC,GAAGH,KAAK;AACxB,CAAC,CAAC;AAEJI,MAAM,CAACC,IAAI,CAACrB,EAAE,CAAC,CAACe,OAAO,CAAEO,SAAS,IAAK;EACrC,IAAItB,EAAE,CAACsB,SAAS,CAAC,CAACC,SAAS,EAAE;IAC3BvB,EAAE,CAACsB,SAAS,CAAC,CAACC,SAAS,CAACvB,EAAE,CAAC;EAC7B;AACF,CAAC,CAAC;AAEFA,EAAE,CAACC,SAAS,GAAGA,SAAS;AACxBD,EAAE,CAACG,SAAS,GAAGA,kBAAS;AAAC,IAAAqB,QAAA,GAEVxB,EAAE;AAAAyB,OAAA,CAAAC,OAAA,GAAAF,QAAA;AAAAG,MAAA,CAAAF,OAAA,GAAAA,OAAA,CAAAC,OAAA"}},"mtime":1682148437927},"{\"assumptions\":{},\"sourceRoot\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/database/config/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"filename\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/database/config/config.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/node_modules/babel-plugin-add-module-exports/lib/index.js\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-runtime\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"regenerator\":true},\"externalDependencies\":[]},{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.21.0:development":{"value":{"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _dotenv = _interopRequireDefault(require(\"dotenv\"));\n_dotenv.default.config();\nvar _default = {\n  development: {\n    url: process.env.DATABASE_URL,\n    dialect: 'postgres',\n    logging: false\n  },\n  test: {\n    url: process.env.TEST_DATABASE_URL,\n    dialect: 'postgres',\n    logging: false\n  }\n};\nexports.default = _default;\nmodule.exports = exports.default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfZG90ZW52IiwiX2ludGVyb3BSZXF1aXJlRGVmYXVsdCIsInJlcXVpcmUiLCJkb3RlbnYiLCJjb25maWciLCJfZGVmYXVsdCIsImRldmVsb3BtZW50IiwidXJsIiwicHJvY2VzcyIsImVudiIsIkRBVEFCQVNFX1VSTCIsImRpYWxlY3QiLCJsb2dnaW5nIiwidGVzdCIsIlRFU1RfREFUQUJBU0VfVVJMIiwiZXhwb3J0cyIsImRlZmF1bHQiLCJtb2R1bGUiXSwic291cmNlUm9vdCI6Ii9Vc2Vycy9hbmRlbGFyd2FuZGEvRGVza3RvcC9lLWNvbW0tdGVhbS1icm9ncmFtbWVycy1ibi9zcmMvZGF0YWJhc2UvY29uZmlnLyIsInNvdXJjZXMiOlsiY29uZmlnLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBkb3RlbnYgZnJvbSAnZG90ZW52JztcblxuZG90ZW52LmNvbmZpZygpO1xuZXhwb3J0IGRlZmF1bHQge1xuICBkZXZlbG9wbWVudDoge1xuICAgIHVybDogcHJvY2Vzcy5lbnYuREFUQUJBU0VfVVJMLFxuICAgIGRpYWxlY3Q6ICdwb3N0Z3JlcycsXG4gICAgbG9nZ2luZzogZmFsc2UsXG4gIH0sXG4gIHRlc3Q6IHtcbiAgICB1cmw6IHByb2Nlc3MuZW52LlRFU1RfREFUQUJBU0VfVVJMLFxuICAgIGRpYWxlY3Q6ICdwb3N0Z3JlcycsXG4gICAgbG9nZ2luZzogZmFsc2UsXG4gIH0sXG59O1xuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQUEsSUFBQUEsT0FBQSxHQUFBQyxzQkFBQSxDQUFBQyxPQUFBO0FBRUFDLGVBQU0sQ0FBQ0MsTUFBTSxFQUFFO0FBQUMsSUFBQUMsUUFBQSxHQUNEO0VBQ2JDLFdBQVcsRUFBRTtJQUNYQyxHQUFHLEVBQUVDLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDQyxZQUFZO0lBQzdCQyxPQUFPLEVBQUUsVUFBVTtJQUNuQkMsT0FBTyxFQUFFO0VBQ1gsQ0FBQztFQUNEQyxJQUFJLEVBQUU7SUFDSk4sR0FBRyxFQUFFQyxPQUFPLENBQUNDLEdBQUcsQ0FBQ0ssaUJBQWlCO0lBQ2xDSCxPQUFPLEVBQUUsVUFBVTtJQUNuQkMsT0FBTyxFQUFFO0VBQ1g7QUFDRixDQUFDO0FBQUFHLE9BQUEsQ0FBQUMsT0FBQSxHQUFBWCxRQUFBO0FBQUFZLE1BQUEsQ0FBQUYsT0FBQSxHQUFBQSxPQUFBLENBQUFDLE9BQUEifQ==","map":{"version":3,"names":["_dotenv","_interopRequireDefault","require","dotenv","config","_default","development","url","process","env","DATABASE_URL","dialect","logging","test","TEST_DATABASE_URL","exports","default","module"],"sourceRoot":"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/database/config/","sources":["config.js"],"sourcesContent":["import dotenv from 'dotenv';\n\ndotenv.config();\nexport default {\n  development: {\n    url: process.env.DATABASE_URL,\n    dialect: 'postgres',\n    logging: false,\n  },\n  test: {\n    url: process.env.TEST_DATABASE_URL,\n    dialect: 'postgres',\n    logging: false,\n  },\n};\n"],"mappings":";;;;;;;AAAA,IAAAA,OAAA,GAAAC,sBAAA,CAAAC,OAAA;AAEAC,eAAM,CAACC,MAAM,EAAE;AAAC,IAAAC,QAAA,GACD;EACbC,WAAW,EAAE;IACXC,GAAG,EAAEC,OAAO,CAACC,GAAG,CAACC,YAAY;IAC7BC,OAAO,EAAE,UAAU;IACnBC,OAAO,EAAE;EACX,CAAC;EACDC,IAAI,EAAE;IACJN,GAAG,EAAEC,OAAO,CAACC,GAAG,CAACK,iBAAiB;IAClCH,OAAO,EAAE,UAAU;IACnBC,OAAO,EAAE;EACX;AACF,CAAC;AAAAG,OAAA,CAAAC,OAAA,GAAAX,QAAA;AAAAY,MAAA,CAAAF,OAAA,GAAAA,OAAA,CAAAC,OAAA"}},"mtime":1682148437924},"{\"assumptions\":{},\"sourceRoot\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/database/models/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"filename\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/database/models/blockedtoken.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/node_modules/babel-plugin-add-module-exports/lib/index.js\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-runtime\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"regenerator\":true},\"externalDependencies\":[]},{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.21.0:development":{"value":{"code":"\"use strict\";\n\nconst {\n  Model\n} = require('sequelize');\nmodule.exports = (sequelize, DataTypes) => {\n  // eslint-disable-next-line require-jsdoc\n  class Blockedtoken extends Model {\n    // eslint-disable-next-line valid-jsdoc\n    /**\n     * Helper method for defining associations.\n     * This method is not a part of Sequelize lifecycle.\n     * The `models/index` file will call this method automatically.\n     */\n    static associate() {\n      // define association here\n    }\n  }\n  Blockedtoken.init({\n    token: DataTypes.STRING(10000)\n  }, {\n    sequelize,\n    modelName: 'Blockedtoken'\n  });\n  return Blockedtoken;\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJNb2RlbCIsInJlcXVpcmUiLCJtb2R1bGUiLCJleHBvcnRzIiwic2VxdWVsaXplIiwiRGF0YVR5cGVzIiwiQmxvY2tlZHRva2VuIiwiYXNzb2NpYXRlIiwiaW5pdCIsInRva2VuIiwiU1RSSU5HIiwibW9kZWxOYW1lIl0sInNvdXJjZVJvb3QiOiIvVXNlcnMvYW5kZWxhcndhbmRhL0Rlc2t0b3AvZS1jb21tLXRlYW0tYnJvZ3JhbW1lcnMtYm4vc3JjL2RhdGFiYXNlL21vZGVscy8iLCJzb3VyY2VzIjpbImJsb2NrZWR0b2tlbi5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCB7XG4gIE1vZGVsXG59ID0gcmVxdWlyZSgnc2VxdWVsaXplJyk7XG5cbm1vZHVsZS5leHBvcnRzID0gKHNlcXVlbGl6ZSwgRGF0YVR5cGVzKSA9PiB7XG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSByZXF1aXJlLWpzZG9jXG4gIGNsYXNzIEJsb2NrZWR0b2tlbiBleHRlbmRzIE1vZGVsIHtcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgdmFsaWQtanNkb2NcbiAgICAvKipcbiAgICAgKiBIZWxwZXIgbWV0aG9kIGZvciBkZWZpbmluZyBhc3NvY2lhdGlvbnMuXG4gICAgICogVGhpcyBtZXRob2QgaXMgbm90IGEgcGFydCBvZiBTZXF1ZWxpemUgbGlmZWN5Y2xlLlxuICAgICAqIFRoZSBgbW9kZWxzL2luZGV4YCBmaWxlIHdpbGwgY2FsbCB0aGlzIG1ldGhvZCBhdXRvbWF0aWNhbGx5LlxuICAgICAqL1xuICAgIHN0YXRpYyBhc3NvY2lhdGUoKSB7XG4gICAgICAvLyBkZWZpbmUgYXNzb2NpYXRpb24gaGVyZVxuICAgIH1cbiAgfVxuICBCbG9ja2VkdG9rZW4uaW5pdCh7XG4gICAgdG9rZW46IERhdGFUeXBlcy5TVFJJTkcoMTAwMDApXG4gIH0sIHtcbiAgICBzZXF1ZWxpemUsXG4gICAgbW9kZWxOYW1lOiAnQmxvY2tlZHRva2VuJyxcbiAgfSk7XG4gIHJldHVybiBCbG9ja2VkdG9rZW47XG59O1xuIl0sIm1hcHBpbmdzIjoiOztBQUFBLE1BQU07RUFDSkE7QUFDRixDQUFDLEdBQUdDLE9BQU8sQ0FBQyxXQUFXLENBQUM7QUFFeEJDLE1BQU0sQ0FBQ0MsT0FBTyxHQUFHLENBQUNDLFNBQVMsRUFBRUMsU0FBUyxLQUFLO0VBQ3pDO0VBQ0EsTUFBTUMsWUFBWSxTQUFTTixLQUFLLENBQUM7SUFDL0I7SUFDQTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0lBQ0ksT0FBT08sU0FBU0EsQ0FBQSxFQUFHO01BQ2pCO0lBQUE7RUFFSjtFQUNBRCxZQUFZLENBQUNFLElBQUksQ0FBQztJQUNoQkMsS0FBSyxFQUFFSixTQUFTLENBQUNLLE1BQU0sQ0FBQyxLQUFLO0VBQy9CLENBQUMsRUFBRTtJQUNETixTQUFTO0lBQ1RPLFNBQVMsRUFBRTtFQUNiLENBQUMsQ0FBQztFQUNGLE9BQU9MLFlBQVk7QUFDckIsQ0FBQyJ9","map":{"version":3,"names":["Model","require","module","exports","sequelize","DataTypes","Blockedtoken","associate","init","token","STRING","modelName"],"sourceRoot":"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/database/models/","sources":["blockedtoken.js"],"sourcesContent":["const {\n  Model\n} = require('sequelize');\n\nmodule.exports = (sequelize, DataTypes) => {\n  // eslint-disable-next-line require-jsdoc\n  class Blockedtoken extends Model {\n    // eslint-disable-next-line valid-jsdoc\n    /**\n     * Helper method for defining associations.\n     * This method is not a part of Sequelize lifecycle.\n     * The `models/index` file will call this method automatically.\n     */\n    static associate() {\n      // define association here\n    }\n  }\n  Blockedtoken.init({\n    token: DataTypes.STRING(10000)\n  }, {\n    sequelize,\n    modelName: 'Blockedtoken',\n  });\n  return Blockedtoken;\n};\n"],"mappings":";;AAAA,MAAM;EACJA;AACF,CAAC,GAAGC,OAAO,CAAC,WAAW,CAAC;AAExBC,MAAM,CAACC,OAAO,GAAG,CAACC,SAAS,EAAEC,SAAS,KAAK;EACzC;EACA,MAAMC,YAAY,SAASN,KAAK,CAAC;IAC/B;IACA;AACJ;AACA;AACA;AACA;IACI,OAAOO,SAASA,CAAA,EAAG;MACjB;IAAA;EAEJ;EACAD,YAAY,CAACE,IAAI,CAAC;IAChBC,KAAK,EAAEJ,SAAS,CAACK,MAAM,CAAC,KAAK;EAC/B,CAAC,EAAE;IACDN,SAAS;IACTO,SAAS,EAAE;EACb,CAAC,CAAC;EACF,OAAOL,YAAY;AACrB,CAAC"}},"mtime":1685643189444},"{\"assumptions\":{},\"sourceRoot\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/database/models/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"filename\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/database/models/cart.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/node_modules/babel-plugin-add-module-exports/lib/index.js\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-runtime\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"regenerator\":true},\"externalDependencies\":[]},{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.21.0:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _sequelize = require(\"sequelize\");\n/**\n * exporting the user model and it's features.\n * @param {Object} sequelize\n * @param {Object} DataTypes\n * @returns {Object} the model for user\n */\nvar _default = (sequelize, DataTypes) => {\n  // eslint-disable-next-line require-jsdoc\n  class carts extends _sequelize.Model {\n    // eslint-disable-next-line valid-jsdoc\n    /**\n     * Helper method for defining associations.\n     * This method is not a part of Sequelize lifecycle.\n     * The `models/index` file will call this method automatically.\n     */\n    static associate(models) {\n      // define association here\n      carts.belongsTo(models.users, {\n        as: 'owner',\n        foreignKey: 'userId'\n      });\n    }\n  }\n  carts.init({\n    id: {\n      allowNull: false,\n      primaryKey: true,\n      type: DataTypes.UUID,\n      defaultValue: DataTypes.UUIDV4\n    },\n    userId: {\n      type: DataTypes.UUID,\n      allowNull: false\n    },\n    products: DataTypes.ARRAY(DataTypes.JSONB),\n    total: DataTypes.FLOAT\n  }, {\n    sequelize,\n    modelName: 'carts'\n  });\n  // eslint-disable-next-line no-undef\n  return carts;\n};\nexports.default = _default;\nmodule.exports = exports.default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfc2VxdWVsaXplIiwicmVxdWlyZSIsIl9kZWZhdWx0Iiwic2VxdWVsaXplIiwiRGF0YVR5cGVzIiwiY2FydHMiLCJNb2RlbCIsImFzc29jaWF0ZSIsIm1vZGVscyIsImJlbG9uZ3NUbyIsInVzZXJzIiwiYXMiLCJmb3JlaWduS2V5IiwiaW5pdCIsImlkIiwiYWxsb3dOdWxsIiwicHJpbWFyeUtleSIsInR5cGUiLCJVVUlEIiwiZGVmYXVsdFZhbHVlIiwiVVVJRFY0IiwidXNlcklkIiwicHJvZHVjdHMiLCJBUlJBWSIsIkpTT05CIiwidG90YWwiLCJGTE9BVCIsIm1vZGVsTmFtZSIsImV4cG9ydHMiLCJkZWZhdWx0IiwibW9kdWxlIl0sInNvdXJjZVJvb3QiOiIvVXNlcnMvYW5kZWxhcndhbmRhL0Rlc2t0b3AvZS1jb21tLXRlYW0tYnJvZ3JhbW1lcnMtYm4vc3JjL2RhdGFiYXNlL21vZGVscy8iLCJzb3VyY2VzIjpbImNhcnQuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTW9kZWwgfSBmcm9tICdzZXF1ZWxpemUnO1xuXG4vKipcbiAqIGV4cG9ydGluZyB0aGUgdXNlciBtb2RlbCBhbmQgaXQncyBmZWF0dXJlcy5cbiAqIEBwYXJhbSB7T2JqZWN0fSBzZXF1ZWxpemVcbiAqIEBwYXJhbSB7T2JqZWN0fSBEYXRhVHlwZXNcbiAqIEByZXR1cm5zIHtPYmplY3R9IHRoZSBtb2RlbCBmb3IgdXNlclxuICovXG5leHBvcnQgZGVmYXVsdCAoc2VxdWVsaXplLCBEYXRhVHlwZXMpID0+IHtcbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIHJlcXVpcmUtanNkb2NcbiAgY2xhc3MgY2FydHMgZXh0ZW5kcyBNb2RlbCB7XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIHZhbGlkLWpzZG9jXG4gICAgLyoqXG4gICAgICogSGVscGVyIG1ldGhvZCBmb3IgZGVmaW5pbmcgYXNzb2NpYXRpb25zLlxuICAgICAqIFRoaXMgbWV0aG9kIGlzIG5vdCBhIHBhcnQgb2YgU2VxdWVsaXplIGxpZmVjeWNsZS5cbiAgICAgKiBUaGUgYG1vZGVscy9pbmRleGAgZmlsZSB3aWxsIGNhbGwgdGhpcyBtZXRob2QgYXV0b21hdGljYWxseS5cbiAgICAgKi9cbiAgICBzdGF0aWMgYXNzb2NpYXRlKG1vZGVscykge1xuICAgICAgLy8gZGVmaW5lIGFzc29jaWF0aW9uIGhlcmVcbiAgICAgIGNhcnRzLmJlbG9uZ3NUbyhtb2RlbHMudXNlcnMsIHsgYXM6ICdvd25lcicsIGZvcmVpZ25LZXk6ICd1c2VySWQnIH0pO1xuICAgIH1cbiAgfVxuICBjYXJ0cy5pbml0KFxuICAgIHtcbiAgICAgIGlkOiB7XG4gICAgICAgIGFsbG93TnVsbDogZmFsc2UsXG4gICAgICAgIHByaW1hcnlLZXk6IHRydWUsXG4gICAgICAgIHR5cGU6IERhdGFUeXBlcy5VVUlELFxuICAgICAgICBkZWZhdWx0VmFsdWU6IERhdGFUeXBlcy5VVUlEVjQsXG4gICAgICB9LFxuICAgICAgdXNlcklkOiB7XG4gICAgICAgIHR5cGU6IERhdGFUeXBlcy5VVUlELFxuICAgICAgICBhbGxvd051bGw6IGZhbHNlLFxuICAgICAgfSxcbiAgICAgIHByb2R1Y3RzOiBEYXRhVHlwZXMuQVJSQVkoRGF0YVR5cGVzLkpTT05CKSxcbiAgICAgIHRvdGFsOiBEYXRhVHlwZXMuRkxPQVQsXG4gICAgfSxcbiAgICB7XG4gICAgICBzZXF1ZWxpemUsXG4gICAgICBtb2RlbE5hbWU6ICdjYXJ0cycsXG4gICAgfVxuICApO1xuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tdW5kZWZcbiAgcmV0dXJuIGNhcnRzO1xufTtcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQUEsSUFBQUEsVUFBQSxHQUFBQyxPQUFBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTEEsSUFBQUMsUUFBQSxHQU1lQSxDQUFDQyxTQUFTLEVBQUVDLFNBQVMsS0FBSztFQUN2QztFQUNBLE1BQU1DLEtBQUssU0FBU0MsZ0JBQUssQ0FBQztJQUN4QjtJQUNBO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7SUFDSSxPQUFPQyxTQUFTQSxDQUFDQyxNQUFNLEVBQUU7TUFDdkI7TUFDQUgsS0FBSyxDQUFDSSxTQUFTLENBQUNELE1BQU0sQ0FBQ0UsS0FBSyxFQUFFO1FBQUVDLEVBQUUsRUFBRSxPQUFPO1FBQUVDLFVBQVUsRUFBRTtNQUFTLENBQUMsQ0FBQztJQUN0RTtFQUNGO0VBQ0FQLEtBQUssQ0FBQ1EsSUFBSSxDQUNSO0lBQ0VDLEVBQUUsRUFBRTtNQUNGQyxTQUFTLEVBQUUsS0FBSztNQUNoQkMsVUFBVSxFQUFFLElBQUk7TUFDaEJDLElBQUksRUFBRWIsU0FBUyxDQUFDYyxJQUFJO01BQ3BCQyxZQUFZLEVBQUVmLFNBQVMsQ0FBQ2dCO0lBQzFCLENBQUM7SUFDREMsTUFBTSxFQUFFO01BQ05KLElBQUksRUFBRWIsU0FBUyxDQUFDYyxJQUFJO01BQ3BCSCxTQUFTLEVBQUU7SUFDYixDQUFDO0lBQ0RPLFFBQVEsRUFBRWxCLFNBQVMsQ0FBQ21CLEtBQUssQ0FBQ25CLFNBQVMsQ0FBQ29CLEtBQUssQ0FBQztJQUMxQ0MsS0FBSyxFQUFFckIsU0FBUyxDQUFDc0I7RUFDbkIsQ0FBQyxFQUNEO0lBQ0V2QixTQUFTO0lBQ1R3QixTQUFTLEVBQUU7RUFDYixDQUFDLENBQ0Y7RUFDRDtFQUNBLE9BQU90QixLQUFLO0FBQ2QsQ0FBQztBQUFBdUIsT0FBQSxDQUFBQyxPQUFBLEdBQUEzQixRQUFBO0FBQUE0QixNQUFBLENBQUFGLE9BQUEsR0FBQUEsT0FBQSxDQUFBQyxPQUFBIn0=","map":{"version":3,"names":["_sequelize","require","_default","sequelize","DataTypes","carts","Model","associate","models","belongsTo","users","as","foreignKey","init","id","allowNull","primaryKey","type","UUID","defaultValue","UUIDV4","userId","products","ARRAY","JSONB","total","FLOAT","modelName","exports","default","module"],"sourceRoot":"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/database/models/","sources":["cart.js"],"sourcesContent":["import { Model } from 'sequelize';\n\n/**\n * exporting the user model and it's features.\n * @param {Object} sequelize\n * @param {Object} DataTypes\n * @returns {Object} the model for user\n */\nexport default (sequelize, DataTypes) => {\n  // eslint-disable-next-line require-jsdoc\n  class carts extends Model {\n    // eslint-disable-next-line valid-jsdoc\n    /**\n     * Helper method for defining associations.\n     * This method is not a part of Sequelize lifecycle.\n     * The `models/index` file will call this method automatically.\n     */\n    static associate(models) {\n      // define association here\n      carts.belongsTo(models.users, { as: 'owner', foreignKey: 'userId' });\n    }\n  }\n  carts.init(\n    {\n      id: {\n        allowNull: false,\n        primaryKey: true,\n        type: DataTypes.UUID,\n        defaultValue: DataTypes.UUIDV4,\n      },\n      userId: {\n        type: DataTypes.UUID,\n        allowNull: false,\n      },\n      products: DataTypes.ARRAY(DataTypes.JSONB),\n      total: DataTypes.FLOAT,\n    },\n    {\n      sequelize,\n      modelName: 'carts',\n    }\n  );\n  // eslint-disable-next-line no-undef\n  return carts;\n};\n"],"mappings":";;;;;;AAAA,IAAAA,UAAA,GAAAC,OAAA;AAEA;AACA;AACA;AACA;AACA;AACA;AALA,IAAAC,QAAA,GAMeA,CAACC,SAAS,EAAEC,SAAS,KAAK;EACvC;EACA,MAAMC,KAAK,SAASC,gBAAK,CAAC;IACxB;IACA;AACJ;AACA;AACA;AACA;IACI,OAAOC,SAASA,CAACC,MAAM,EAAE;MACvB;MACAH,KAAK,CAACI,SAAS,CAACD,MAAM,CAACE,KAAK,EAAE;QAAEC,EAAE,EAAE,OAAO;QAAEC,UAAU,EAAE;MAAS,CAAC,CAAC;IACtE;EACF;EACAP,KAAK,CAACQ,IAAI,CACR;IACEC,EAAE,EAAE;MACFC,SAAS,EAAE,KAAK;MAChBC,UAAU,EAAE,IAAI;MAChBC,IAAI,EAAEb,SAAS,CAACc,IAAI;MACpBC,YAAY,EAAEf,SAAS,CAACgB;IAC1B,CAAC;IACDC,MAAM,EAAE;MACNJ,IAAI,EAAEb,SAAS,CAACc,IAAI;MACpBH,SAAS,EAAE;IACb,CAAC;IACDO,QAAQ,EAAElB,SAAS,CAACmB,KAAK,CAACnB,SAAS,CAACoB,KAAK,CAAC;IAC1CC,KAAK,EAAErB,SAAS,CAACsB;EACnB,CAAC,EACD;IACEvB,SAAS;IACTwB,SAAS,EAAE;EACb,CAAC,CACF;EACD;EACA,OAAOtB,KAAK;AACd,CAAC;AAAAuB,OAAA,CAAAC,OAAA,GAAA3B,QAAA;AAAA4B,MAAA,CAAAF,OAAA,GAAAA,OAAA,CAAAC,OAAA"}},"mtime":1682148437927},"{\"assumptions\":{},\"sourceRoot\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/database/models/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"filename\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/database/models/category.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/node_modules/babel-plugin-add-module-exports/lib/index.js\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-runtime\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"regenerator\":true},\"externalDependencies\":[]},{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.21.0:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _sequelize = require(\"sequelize\");\nvar _default = (sequelize, DataTypes) => {\n  /**\n   * class for model functions\n   */\n  class category extends _sequelize.Model {\n    // eslint-disable-next-line valid-jsdoc\n    /**\n     * Helper method for defining associations.\n     * This method is not a part of Sequelize lifecycle.\n     * The `models/index` file will call this method automatically.\n     */\n    static associate() {\n      // define association here\n    }\n  }\n  category.init({\n    id: {\n      type: DataTypes.INTEGER,\n      autoIncrement: true,\n      primaryKey: true\n    },\n    title: {\n      type: DataTypes.STRING,\n      allowNull: false\n    },\n    description: {\n      type: DataTypes.STRING(2000),\n      allowNull: false\n    }\n  }, {\n    sequelize,\n    modelName: 'category'\n  });\n  return category;\n};\nexports.default = _default;\nmodule.exports = exports.default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfc2VxdWVsaXplIiwicmVxdWlyZSIsIl9kZWZhdWx0Iiwic2VxdWVsaXplIiwiRGF0YVR5cGVzIiwiY2F0ZWdvcnkiLCJNb2RlbCIsImFzc29jaWF0ZSIsImluaXQiLCJpZCIsInR5cGUiLCJJTlRFR0VSIiwiYXV0b0luY3JlbWVudCIsInByaW1hcnlLZXkiLCJ0aXRsZSIsIlNUUklORyIsImFsbG93TnVsbCIsImRlc2NyaXB0aW9uIiwibW9kZWxOYW1lIiwiZXhwb3J0cyIsImRlZmF1bHQiLCJtb2R1bGUiXSwic291cmNlUm9vdCI6Ii9Vc2Vycy9hbmRlbGFyd2FuZGEvRGVza3RvcC9lLWNvbW0tdGVhbS1icm9ncmFtbWVycy1ibi9zcmMvZGF0YWJhc2UvbW9kZWxzLyIsInNvdXJjZXMiOlsiY2F0ZWdvcnkuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTW9kZWwgfSBmcm9tICdzZXF1ZWxpemUnO1xuXG5leHBvcnQgZGVmYXVsdCAoc2VxdWVsaXplLCBEYXRhVHlwZXMpID0+IHtcbiAgLyoqXG4gICAqIGNsYXNzIGZvciBtb2RlbCBmdW5jdGlvbnNcbiAgICovXG4gIGNsYXNzIGNhdGVnb3J5IGV4dGVuZHMgTW9kZWwge1xuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSB2YWxpZC1qc2RvY1xuICAgIC8qKlxuICAgICAqIEhlbHBlciBtZXRob2QgZm9yIGRlZmluaW5nIGFzc29jaWF0aW9ucy5cbiAgICAgKiBUaGlzIG1ldGhvZCBpcyBub3QgYSBwYXJ0IG9mIFNlcXVlbGl6ZSBsaWZlY3ljbGUuXG4gICAgICogVGhlIGBtb2RlbHMvaW5kZXhgIGZpbGUgd2lsbCBjYWxsIHRoaXMgbWV0aG9kIGF1dG9tYXRpY2FsbHkuXG4gICAgICovXG4gICAgc3RhdGljIGFzc29jaWF0ZSgpIHtcbiAgICAgIC8vIGRlZmluZSBhc3NvY2lhdGlvbiBoZXJlXG4gICAgfVxuICB9XG4gIGNhdGVnb3J5LmluaXQoXG4gICAge1xuICAgICAgaWQ6IHtcbiAgICAgICAgdHlwZTogRGF0YVR5cGVzLklOVEVHRVIsXG4gICAgICAgIGF1dG9JbmNyZW1lbnQ6IHRydWUsXG4gICAgICAgIHByaW1hcnlLZXk6IHRydWUsXG4gICAgICB9LFxuICAgICAgdGl0bGU6IHtcbiAgICAgICAgdHlwZTogRGF0YVR5cGVzLlNUUklORyxcbiAgICAgICAgYWxsb3dOdWxsOiBmYWxzZSxcbiAgICAgIH0sXG4gICAgICBkZXNjcmlwdGlvbjoge1xuICAgICAgICB0eXBlOiBEYXRhVHlwZXMuU1RSSU5HKDIwMDApLFxuICAgICAgICBhbGxvd051bGw6IGZhbHNlLFxuICAgICAgfSxcbiAgICB9LFxuICAgIHtcbiAgICAgIHNlcXVlbGl6ZSxcbiAgICAgIG1vZGVsTmFtZTogJ2NhdGVnb3J5JyxcbiAgICB9XG4gICk7XG4gIHJldHVybiBjYXRlZ29yeTtcbn07XG4iXSwibWFwcGluZ3MiOiI7Ozs7OztBQUFBLElBQUFBLFVBQUEsR0FBQUMsT0FBQTtBQUFrQyxJQUFBQyxRQUFBLEdBRW5CQSxDQUFDQyxTQUFTLEVBQUVDLFNBQVMsS0FBSztFQUN2QztBQUNGO0FBQ0E7RUFDRSxNQUFNQyxRQUFRLFNBQVNDLGdCQUFLLENBQUM7SUFDM0I7SUFDQTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0lBQ0ksT0FBT0MsU0FBU0EsQ0FBQSxFQUFHO01BQ2pCO0lBQUE7RUFFSjtFQUNBRixRQUFRLENBQUNHLElBQUksQ0FDWDtJQUNFQyxFQUFFLEVBQUU7TUFDRkMsSUFBSSxFQUFFTixTQUFTLENBQUNPLE9BQU87TUFDdkJDLGFBQWEsRUFBRSxJQUFJO01BQ25CQyxVQUFVLEVBQUU7SUFDZCxDQUFDO0lBQ0RDLEtBQUssRUFBRTtNQUNMSixJQUFJLEVBQUVOLFNBQVMsQ0FBQ1csTUFBTTtNQUN0QkMsU0FBUyxFQUFFO0lBQ2IsQ0FBQztJQUNEQyxXQUFXLEVBQUU7TUFDWFAsSUFBSSxFQUFFTixTQUFTLENBQUNXLE1BQU0sQ0FBQyxJQUFJLENBQUM7TUFDNUJDLFNBQVMsRUFBRTtJQUNiO0VBQ0YsQ0FBQyxFQUNEO0lBQ0ViLFNBQVM7SUFDVGUsU0FBUyxFQUFFO0VBQ2IsQ0FBQyxDQUNGO0VBQ0QsT0FBT2IsUUFBUTtBQUNqQixDQUFDO0FBQUFjLE9BQUEsQ0FBQUMsT0FBQSxHQUFBbEIsUUFBQTtBQUFBbUIsTUFBQSxDQUFBRixPQUFBLEdBQUFBLE9BQUEsQ0FBQUMsT0FBQSJ9","map":{"version":3,"names":["_sequelize","require","_default","sequelize","DataTypes","category","Model","associate","init","id","type","INTEGER","autoIncrement","primaryKey","title","STRING","allowNull","description","modelName","exports","default","module"],"sourceRoot":"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/database/models/","sources":["category.js"],"sourcesContent":["import { Model } from 'sequelize';\n\nexport default (sequelize, DataTypes) => {\n  /**\n   * class for model functions\n   */\n  class category extends Model {\n    // eslint-disable-next-line valid-jsdoc\n    /**\n     * Helper method for defining associations.\n     * This method is not a part of Sequelize lifecycle.\n     * The `models/index` file will call this method automatically.\n     */\n    static associate() {\n      // define association here\n    }\n  }\n  category.init(\n    {\n      id: {\n        type: DataTypes.INTEGER,\n        autoIncrement: true,\n        primaryKey: true,\n      },\n      title: {\n        type: DataTypes.STRING,\n        allowNull: false,\n      },\n      description: {\n        type: DataTypes.STRING(2000),\n        allowNull: false,\n      },\n    },\n    {\n      sequelize,\n      modelName: 'category',\n    }\n  );\n  return category;\n};\n"],"mappings":";;;;;;AAAA,IAAAA,UAAA,GAAAC,OAAA;AAAkC,IAAAC,QAAA,GAEnBA,CAACC,SAAS,EAAEC,SAAS,KAAK;EACvC;AACF;AACA;EACE,MAAMC,QAAQ,SAASC,gBAAK,CAAC;IAC3B;IACA;AACJ;AACA;AACA;AACA;IACI,OAAOC,SAASA,CAAA,EAAG;MACjB;IAAA;EAEJ;EACAF,QAAQ,CAACG,IAAI,CACX;IACEC,EAAE,EAAE;MACFC,IAAI,EAAEN,SAAS,CAACO,OAAO;MACvBC,aAAa,EAAE,IAAI;MACnBC,UAAU,EAAE;IACd,CAAC;IACDC,KAAK,EAAE;MACLJ,IAAI,EAAEN,SAAS,CAACW,MAAM;MACtBC,SAAS,EAAE;IACb,CAAC;IACDC,WAAW,EAAE;MACXP,IAAI,EAAEN,SAAS,CAACW,MAAM,CAAC,IAAI,CAAC;MAC5BC,SAAS,EAAE;IACb;EACF,CAAC,EACD;IACEb,SAAS;IACTe,SAAS,EAAE;EACb,CAAC,CACF;EACD,OAAOb,QAAQ;AACjB,CAAC;AAAAc,OAAA,CAAAC,OAAA,GAAAlB,QAAA;AAAAmB,MAAA,CAAAF,OAAA,GAAAA,OAAA,CAAAC,OAAA"}},"mtime":1682148437927},"{\"assumptions\":{},\"sourceRoot\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/database/models/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"filename\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/database/models/chat.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/node_modules/babel-plugin-add-module-exports/lib/index.js\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-runtime\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"regenerator\":true},\"externalDependencies\":[]},{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.21.0:development":{"value":{"code":"\"use strict\";\n\n/* eslint-disable require-jsdoc */\n/* eslint-disable valid-jsdoc */\nconst {\n  Model\n} = require('sequelize');\nmodule.exports = (sequelize, DataTypes) => {\n  class Chat extends Model {\n    /**\n     * Helper method for defining associations.\n     * This method is not a part of Sequelize lifecycle.\n     * The `models/index` file will call this method automatically.\n     */\n    static associate(models) {\n      models.users.hasMany(Chat, {\n        foreignKey: 'userId',\n        onDelete: 'CASCADE'\n      });\n      Chat.belongsTo(models.users, {\n        foreignKey: 'userId',\n        as: 'user'\n      });\n    }\n  }\n  Chat.init({\n    id: {\n      allowNull: false,\n      primaryKey: true,\n      type: DataTypes.UUID,\n      defaultValue: DataTypes.UUIDV4\n    },\n    room: {\n      type: DataTypes.STRING,\n      default: 'brogrammers',\n      allowNull: false\n    },\n    message: {\n      type: DataTypes.STRING(10000),\n      allowNull: false\n    }\n  }, {\n    sequelize,\n    freezeTableName: true,\n    modelName: 'Chat'\n  });\n  return Chat;\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJNb2RlbCIsInJlcXVpcmUiLCJtb2R1bGUiLCJleHBvcnRzIiwic2VxdWVsaXplIiwiRGF0YVR5cGVzIiwiQ2hhdCIsImFzc29jaWF0ZSIsIm1vZGVscyIsInVzZXJzIiwiaGFzTWFueSIsImZvcmVpZ25LZXkiLCJvbkRlbGV0ZSIsImJlbG9uZ3NUbyIsImFzIiwiaW5pdCIsImlkIiwiYWxsb3dOdWxsIiwicHJpbWFyeUtleSIsInR5cGUiLCJVVUlEIiwiZGVmYXVsdFZhbHVlIiwiVVVJRFY0Iiwicm9vbSIsIlNUUklORyIsImRlZmF1bHQiLCJtZXNzYWdlIiwiZnJlZXplVGFibGVOYW1lIiwibW9kZWxOYW1lIl0sInNvdXJjZVJvb3QiOiIvVXNlcnMvYW5kZWxhcndhbmRhL0Rlc2t0b3AvZS1jb21tLXRlYW0tYnJvZ3JhbW1lcnMtYm4vc3JjL2RhdGFiYXNlL21vZGVscy8iLCJzb3VyY2VzIjpbImNoYXQuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLyogZXNsaW50LWRpc2FibGUgcmVxdWlyZS1qc2RvYyAqL1xuLyogZXNsaW50LWRpc2FibGUgdmFsaWQtanNkb2MgKi9cbmNvbnN0IHsgTW9kZWwgfSA9IHJlcXVpcmUoJ3NlcXVlbGl6ZScpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IChzZXF1ZWxpemUsIERhdGFUeXBlcykgPT4ge1xuICBjbGFzcyBDaGF0IGV4dGVuZHMgTW9kZWwge1xuICAgIC8qKlxuICAgICAqIEhlbHBlciBtZXRob2QgZm9yIGRlZmluaW5nIGFzc29jaWF0aW9ucy5cbiAgICAgKiBUaGlzIG1ldGhvZCBpcyBub3QgYSBwYXJ0IG9mIFNlcXVlbGl6ZSBsaWZlY3ljbGUuXG4gICAgICogVGhlIGBtb2RlbHMvaW5kZXhgIGZpbGUgd2lsbCBjYWxsIHRoaXMgbWV0aG9kIGF1dG9tYXRpY2FsbHkuXG4gICAgICovXG4gICAgc3RhdGljIGFzc29jaWF0ZShtb2RlbHMpIHtcbiAgICAgIG1vZGVscy51c2Vycy5oYXNNYW55KENoYXQsIHtcbiAgICAgICAgZm9yZWlnbktleTogJ3VzZXJJZCcsXG4gICAgICAgIG9uRGVsZXRlOiAnQ0FTQ0FERScsXG4gICAgICB9KTtcbiAgICAgIENoYXQuYmVsb25nc1RvKG1vZGVscy51c2Vycywge1xuICAgICAgICBmb3JlaWduS2V5OiAndXNlcklkJyxcbiAgICAgICAgYXM6ICd1c2VyJyxcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuICBDaGF0LmluaXQoXG4gICAge1xuICAgICAgaWQ6IHtcbiAgICAgICAgYWxsb3dOdWxsOiBmYWxzZSxcbiAgICAgICAgcHJpbWFyeUtleTogdHJ1ZSxcbiAgICAgICAgdHlwZTogRGF0YVR5cGVzLlVVSUQsXG4gICAgICAgIGRlZmF1bHRWYWx1ZTogRGF0YVR5cGVzLlVVSURWNCxcbiAgICAgIH0sXG4gICAgICByb29tOiB7XG4gICAgICAgIHR5cGU6IERhdGFUeXBlcy5TVFJJTkcsXG4gICAgICAgIGRlZmF1bHQ6ICdicm9ncmFtbWVycycsXG4gICAgICAgIGFsbG93TnVsbDogZmFsc2UsXG4gICAgICB9LFxuICAgICAgbWVzc2FnZToge1xuICAgICAgICB0eXBlOiBEYXRhVHlwZXMuU1RSSU5HKDEwMDAwKSxcbiAgICAgICAgYWxsb3dOdWxsOiBmYWxzZSxcbiAgICAgIH0sXG4gICAgfSxcbiAgICB7XG4gICAgICBzZXF1ZWxpemUsXG4gICAgICBmcmVlemVUYWJsZU5hbWU6IHRydWUsXG4gICAgICBtb2RlbE5hbWU6ICdDaGF0JyxcbiAgICB9XG4gICk7XG4gIHJldHVybiBDaGF0O1xufTtcbiJdLCJtYXBwaW5ncyI6Ijs7QUFBQTtBQUNBO0FBQ0EsTUFBTTtFQUFFQTtBQUFNLENBQUMsR0FBR0MsT0FBTyxDQUFDLFdBQVcsQ0FBQztBQUV0Q0MsTUFBTSxDQUFDQyxPQUFPLEdBQUcsQ0FBQ0MsU0FBUyxFQUFFQyxTQUFTLEtBQUs7RUFDekMsTUFBTUMsSUFBSSxTQUFTTixLQUFLLENBQUM7SUFDdkI7QUFDSjtBQUNBO0FBQ0E7QUFDQTtJQUNJLE9BQU9PLFNBQVNBLENBQUNDLE1BQU0sRUFBRTtNQUN2QkEsTUFBTSxDQUFDQyxLQUFLLENBQUNDLE9BQU8sQ0FBQ0osSUFBSSxFQUFFO1FBQ3pCSyxVQUFVLEVBQUUsUUFBUTtRQUNwQkMsUUFBUSxFQUFFO01BQ1osQ0FBQyxDQUFDO01BQ0ZOLElBQUksQ0FBQ08sU0FBUyxDQUFDTCxNQUFNLENBQUNDLEtBQUssRUFBRTtRQUMzQkUsVUFBVSxFQUFFLFFBQVE7UUFDcEJHLEVBQUUsRUFBRTtNQUNOLENBQUMsQ0FBQztJQUNKO0VBQ0Y7RUFDQVIsSUFBSSxDQUFDUyxJQUFJLENBQ1A7SUFDRUMsRUFBRSxFQUFFO01BQ0ZDLFNBQVMsRUFBRSxLQUFLO01BQ2hCQyxVQUFVLEVBQUUsSUFBSTtNQUNoQkMsSUFBSSxFQUFFZCxTQUFTLENBQUNlLElBQUk7TUFDcEJDLFlBQVksRUFBRWhCLFNBQVMsQ0FBQ2lCO0lBQzFCLENBQUM7SUFDREMsSUFBSSxFQUFFO01BQ0pKLElBQUksRUFBRWQsU0FBUyxDQUFDbUIsTUFBTTtNQUN0QkMsT0FBTyxFQUFFLGFBQWE7TUFDdEJSLFNBQVMsRUFBRTtJQUNiLENBQUM7SUFDRFMsT0FBTyxFQUFFO01BQ1BQLElBQUksRUFBRWQsU0FBUyxDQUFDbUIsTUFBTSxDQUFDLEtBQUssQ0FBQztNQUM3QlAsU0FBUyxFQUFFO0lBQ2I7RUFDRixDQUFDLEVBQ0Q7SUFDRWIsU0FBUztJQUNUdUIsZUFBZSxFQUFFLElBQUk7SUFDckJDLFNBQVMsRUFBRTtFQUNiLENBQUMsQ0FDRjtFQUNELE9BQU90QixJQUFJO0FBQ2IsQ0FBQyJ9","map":{"version":3,"names":["Model","require","module","exports","sequelize","DataTypes","Chat","associate","models","users","hasMany","foreignKey","onDelete","belongsTo","as","init","id","allowNull","primaryKey","type","UUID","defaultValue","UUIDV4","room","STRING","default","message","freezeTableName","modelName"],"sourceRoot":"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/database/models/","sources":["chat.js"],"sourcesContent":["/* eslint-disable require-jsdoc */\n/* eslint-disable valid-jsdoc */\nconst { Model } = require('sequelize');\n\nmodule.exports = (sequelize, DataTypes) => {\n  class Chat extends Model {\n    /**\n     * Helper method for defining associations.\n     * This method is not a part of Sequelize lifecycle.\n     * The `models/index` file will call this method automatically.\n     */\n    static associate(models) {\n      models.users.hasMany(Chat, {\n        foreignKey: 'userId',\n        onDelete: 'CASCADE',\n      });\n      Chat.belongsTo(models.users, {\n        foreignKey: 'userId',\n        as: 'user',\n      });\n    }\n  }\n  Chat.init(\n    {\n      id: {\n        allowNull: false,\n        primaryKey: true,\n        type: DataTypes.UUID,\n        defaultValue: DataTypes.UUIDV4,\n      },\n      room: {\n        type: DataTypes.STRING,\n        default: 'brogrammers',\n        allowNull: false,\n      },\n      message: {\n        type: DataTypes.STRING(10000),\n        allowNull: false,\n      },\n    },\n    {\n      sequelize,\n      freezeTableName: true,\n      modelName: 'Chat',\n    }\n  );\n  return Chat;\n};\n"],"mappings":";;AAAA;AACA;AACA,MAAM;EAAEA;AAAM,CAAC,GAAGC,OAAO,CAAC,WAAW,CAAC;AAEtCC,MAAM,CAACC,OAAO,GAAG,CAACC,SAAS,EAAEC,SAAS,KAAK;EACzC,MAAMC,IAAI,SAASN,KAAK,CAAC;IACvB;AACJ;AACA;AACA;AACA;IACI,OAAOO,SAASA,CAACC,MAAM,EAAE;MACvBA,MAAM,CAACC,KAAK,CAACC,OAAO,CAACJ,IAAI,EAAE;QACzBK,UAAU,EAAE,QAAQ;QACpBC,QAAQ,EAAE;MACZ,CAAC,CAAC;MACFN,IAAI,CAACO,SAAS,CAACL,MAAM,CAACC,KAAK,EAAE;QAC3BE,UAAU,EAAE,QAAQ;QACpBG,EAAE,EAAE;MACN,CAAC,CAAC;IACJ;EACF;EACAR,IAAI,CAACS,IAAI,CACP;IACEC,EAAE,EAAE;MACFC,SAAS,EAAE,KAAK;MAChBC,UAAU,EAAE,IAAI;MAChBC,IAAI,EAAEd,SAAS,CAACe,IAAI;MACpBC,YAAY,EAAEhB,SAAS,CAACiB;IAC1B,CAAC;IACDC,IAAI,EAAE;MACJJ,IAAI,EAAEd,SAAS,CAACmB,MAAM;MACtBC,OAAO,EAAE,aAAa;MACtBR,SAAS,EAAE;IACb,CAAC;IACDS,OAAO,EAAE;MACPP,IAAI,EAAEd,SAAS,CAACmB,MAAM,CAAC,KAAK,CAAC;MAC7BP,SAAS,EAAE;IACb;EACF,CAAC,EACD;IACEb,SAAS;IACTuB,eAAe,EAAE,IAAI;IACrBC,SAAS,EAAE;EACb,CAAC,CACF;EACD,OAAOtB,IAAI;AACb,CAAC"}},"mtime":1682148437927},"{\"assumptions\":{},\"sourceRoot\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/database/models/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"filename\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/database/models/log.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/node_modules/babel-plugin-add-module-exports/lib/index.js\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-runtime\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"regenerator\":true},\"externalDependencies\":[]},{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.21.0:development":{"value":{"code":"\"use strict\";\n\n/* eslint-disable require-jsdoc */\n/* eslint-disable valid-jsdoc */\nconst {\n  Model\n} = require('sequelize');\nmodule.exports = (sequelize, DataTypes) => {\n  class Log extends Model {\n    /**\n     * Helper method for defining associations.\n     * This method is not a part of Sequelize lifecycle.\n     * The `models/index` file will call this method automatically.\n     */\n    static associate(models) {\n      // define association here\n      models.users.hasMany(Log, {\n        foreignKey: 'userId',\n        onDelete: 'CASCADE'\n      });\n      Log.belongsTo(models.users, {\n        foreignKey: 'userId',\n        as: 'user'\n      });\n    }\n  }\n  Log.init({\n    id: {\n      allowNull: false,\n      primaryKey: true,\n      type: DataTypes.UUID,\n      defaultValue: DataTypes.UUIDV4\n    },\n    level: DataTypes.STRING,\n    message: DataTypes.STRING,\n    userId: {\n      type: DataTypes.UUID,\n      allowNull: false\n    },\n    metadata: DataTypes.JSON\n  }, {\n    sequelize,\n    freezeTableName: true,\n    modelName: 'Log'\n  });\n  return Log;\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJNb2RlbCIsInJlcXVpcmUiLCJtb2R1bGUiLCJleHBvcnRzIiwic2VxdWVsaXplIiwiRGF0YVR5cGVzIiwiTG9nIiwiYXNzb2NpYXRlIiwibW9kZWxzIiwidXNlcnMiLCJoYXNNYW55IiwiZm9yZWlnbktleSIsIm9uRGVsZXRlIiwiYmVsb25nc1RvIiwiYXMiLCJpbml0IiwiaWQiLCJhbGxvd051bGwiLCJwcmltYXJ5S2V5IiwidHlwZSIsIlVVSUQiLCJkZWZhdWx0VmFsdWUiLCJVVUlEVjQiLCJsZXZlbCIsIlNUUklORyIsIm1lc3NhZ2UiLCJ1c2VySWQiLCJtZXRhZGF0YSIsIkpTT04iLCJmcmVlemVUYWJsZU5hbWUiLCJtb2RlbE5hbWUiXSwic291cmNlUm9vdCI6Ii9Vc2Vycy9hbmRlbGFyd2FuZGEvRGVza3RvcC9lLWNvbW0tdGVhbS1icm9ncmFtbWVycy1ibi9zcmMvZGF0YWJhc2UvbW9kZWxzLyIsInNvdXJjZXMiOlsibG9nLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qIGVzbGludC1kaXNhYmxlIHJlcXVpcmUtanNkb2MgKi9cbi8qIGVzbGludC1kaXNhYmxlIHZhbGlkLWpzZG9jICovXG5jb25zdCB7XG4gIE1vZGVsXG59ID0gcmVxdWlyZSgnc2VxdWVsaXplJyk7XG5cbm1vZHVsZS5leHBvcnRzID0gKHNlcXVlbGl6ZSwgRGF0YVR5cGVzKSA9PiB7XG4gIGNsYXNzIExvZyBleHRlbmRzIE1vZGVsIHtcbiAgICAvKipcbiAgICAgKiBIZWxwZXIgbWV0aG9kIGZvciBkZWZpbmluZyBhc3NvY2lhdGlvbnMuXG4gICAgICogVGhpcyBtZXRob2QgaXMgbm90IGEgcGFydCBvZiBTZXF1ZWxpemUgbGlmZWN5Y2xlLlxuICAgICAqIFRoZSBgbW9kZWxzL2luZGV4YCBmaWxlIHdpbGwgY2FsbCB0aGlzIG1ldGhvZCBhdXRvbWF0aWNhbGx5LlxuICAgICAqL1xuICAgIHN0YXRpYyBhc3NvY2lhdGUobW9kZWxzKSB7XG4gICAgICAvLyBkZWZpbmUgYXNzb2NpYXRpb24gaGVyZVxuICAgICAgbW9kZWxzLnVzZXJzLmhhc01hbnkoTG9nLCB7XG4gICAgICAgIGZvcmVpZ25LZXk6ICd1c2VySWQnLFxuICAgICAgICBvbkRlbGV0ZTogJ0NBU0NBREUnLFxuICAgICAgfSk7XG4gICAgICBMb2cuYmVsb25nc1RvKG1vZGVscy51c2Vycywge1xuICAgICAgICBmb3JlaWduS2V5OiAndXNlcklkJyxcbiAgICAgICAgYXM6ICd1c2VyJyxcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuICBMb2cuaW5pdCh7XG4gICAgaWQ6IHtcbiAgICAgIGFsbG93TnVsbDogZmFsc2UsXG4gICAgICBwcmltYXJ5S2V5OiB0cnVlLFxuICAgICAgdHlwZTogRGF0YVR5cGVzLlVVSUQsXG4gICAgICBkZWZhdWx0VmFsdWU6IERhdGFUeXBlcy5VVUlEVjQsXG4gICAgfSxcbiAgICBsZXZlbDogRGF0YVR5cGVzLlNUUklORyxcbiAgICBtZXNzYWdlOiBEYXRhVHlwZXMuU1RSSU5HLFxuICAgIHVzZXJJZDoge1xuICAgICAgdHlwZTogRGF0YVR5cGVzLlVVSUQsXG4gICAgICBhbGxvd051bGw6IGZhbHNlLFxuICAgIH0sXG4gICAgbWV0YWRhdGE6IERhdGFUeXBlcy5KU09OLFxuICB9LCB7XG4gICAgc2VxdWVsaXplLFxuICAgIGZyZWV6ZVRhYmxlTmFtZTogdHJ1ZSxcbiAgICBtb2RlbE5hbWU6ICdMb2cnLFxuICB9KTtcbiAgcmV0dXJuIExvZztcbn07XG4iXSwibWFwcGluZ3MiOiI7O0FBQUE7QUFDQTtBQUNBLE1BQU07RUFDSkE7QUFDRixDQUFDLEdBQUdDLE9BQU8sQ0FBQyxXQUFXLENBQUM7QUFFeEJDLE1BQU0sQ0FBQ0MsT0FBTyxHQUFHLENBQUNDLFNBQVMsRUFBRUMsU0FBUyxLQUFLO0VBQ3pDLE1BQU1DLEdBQUcsU0FBU04sS0FBSyxDQUFDO0lBQ3RCO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7SUFDSSxPQUFPTyxTQUFTQSxDQUFDQyxNQUFNLEVBQUU7TUFDdkI7TUFDQUEsTUFBTSxDQUFDQyxLQUFLLENBQUNDLE9BQU8sQ0FBQ0osR0FBRyxFQUFFO1FBQ3hCSyxVQUFVLEVBQUUsUUFBUTtRQUNwQkMsUUFBUSxFQUFFO01BQ1osQ0FBQyxDQUFDO01BQ0ZOLEdBQUcsQ0FBQ08sU0FBUyxDQUFDTCxNQUFNLENBQUNDLEtBQUssRUFBRTtRQUMxQkUsVUFBVSxFQUFFLFFBQVE7UUFDcEJHLEVBQUUsRUFBRTtNQUNOLENBQUMsQ0FBQztJQUNKO0VBQ0Y7RUFDQVIsR0FBRyxDQUFDUyxJQUFJLENBQUM7SUFDUEMsRUFBRSxFQUFFO01BQ0ZDLFNBQVMsRUFBRSxLQUFLO01BQ2hCQyxVQUFVLEVBQUUsSUFBSTtNQUNoQkMsSUFBSSxFQUFFZCxTQUFTLENBQUNlLElBQUk7TUFDcEJDLFlBQVksRUFBRWhCLFNBQVMsQ0FBQ2lCO0lBQzFCLENBQUM7SUFDREMsS0FBSyxFQUFFbEIsU0FBUyxDQUFDbUIsTUFBTTtJQUN2QkMsT0FBTyxFQUFFcEIsU0FBUyxDQUFDbUIsTUFBTTtJQUN6QkUsTUFBTSxFQUFFO01BQ05QLElBQUksRUFBRWQsU0FBUyxDQUFDZSxJQUFJO01BQ3BCSCxTQUFTLEVBQUU7SUFDYixDQUFDO0lBQ0RVLFFBQVEsRUFBRXRCLFNBQVMsQ0FBQ3VCO0VBQ3RCLENBQUMsRUFBRTtJQUNEeEIsU0FBUztJQUNUeUIsZUFBZSxFQUFFLElBQUk7SUFDckJDLFNBQVMsRUFBRTtFQUNiLENBQUMsQ0FBQztFQUNGLE9BQU94QixHQUFHO0FBQ1osQ0FBQyJ9","map":{"version":3,"names":["Model","require","module","exports","sequelize","DataTypes","Log","associate","models","users","hasMany","foreignKey","onDelete","belongsTo","as","init","id","allowNull","primaryKey","type","UUID","defaultValue","UUIDV4","level","STRING","message","userId","metadata","JSON","freezeTableName","modelName"],"sourceRoot":"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/database/models/","sources":["log.js"],"sourcesContent":["/* eslint-disable require-jsdoc */\n/* eslint-disable valid-jsdoc */\nconst {\n  Model\n} = require('sequelize');\n\nmodule.exports = (sequelize, DataTypes) => {\n  class Log extends Model {\n    /**\n     * Helper method for defining associations.\n     * This method is not a part of Sequelize lifecycle.\n     * The `models/index` file will call this method automatically.\n     */\n    static associate(models) {\n      // define association here\n      models.users.hasMany(Log, {\n        foreignKey: 'userId',\n        onDelete: 'CASCADE',\n      });\n      Log.belongsTo(models.users, {\n        foreignKey: 'userId',\n        as: 'user',\n      });\n    }\n  }\n  Log.init({\n    id: {\n      allowNull: false,\n      primaryKey: true,\n      type: DataTypes.UUID,\n      defaultValue: DataTypes.UUIDV4,\n    },\n    level: DataTypes.STRING,\n    message: DataTypes.STRING,\n    userId: {\n      type: DataTypes.UUID,\n      allowNull: false,\n    },\n    metadata: DataTypes.JSON,\n  }, {\n    sequelize,\n    freezeTableName: true,\n    modelName: 'Log',\n  });\n  return Log;\n};\n"],"mappings":";;AAAA;AACA;AACA,MAAM;EACJA;AACF,CAAC,GAAGC,OAAO,CAAC,WAAW,CAAC;AAExBC,MAAM,CAACC,OAAO,GAAG,CAACC,SAAS,EAAEC,SAAS,KAAK;EACzC,MAAMC,GAAG,SAASN,KAAK,CAAC;IACtB;AACJ;AACA;AACA;AACA;IACI,OAAOO,SAASA,CAACC,MAAM,EAAE;MACvB;MACAA,MAAM,CAACC,KAAK,CAACC,OAAO,CAACJ,GAAG,EAAE;QACxBK,UAAU,EAAE,QAAQ;QACpBC,QAAQ,EAAE;MACZ,CAAC,CAAC;MACFN,GAAG,CAACO,SAAS,CAACL,MAAM,CAACC,KAAK,EAAE;QAC1BE,UAAU,EAAE,QAAQ;QACpBG,EAAE,EAAE;MACN,CAAC,CAAC;IACJ;EACF;EACAR,GAAG,CAACS,IAAI,CAAC;IACPC,EAAE,EAAE;MACFC,SAAS,EAAE,KAAK;MAChBC,UAAU,EAAE,IAAI;MAChBC,IAAI,EAAEd,SAAS,CAACe,IAAI;MACpBC,YAAY,EAAEhB,SAAS,CAACiB;IAC1B,CAAC;IACDC,KAAK,EAAElB,SAAS,CAACmB,MAAM;IACvBC,OAAO,EAAEpB,SAAS,CAACmB,MAAM;IACzBE,MAAM,EAAE;MACNP,IAAI,EAAEd,SAAS,CAACe,IAAI;MACpBH,SAAS,EAAE;IACb,CAAC;IACDU,QAAQ,EAAEtB,SAAS,CAACuB;EACtB,CAAC,EAAE;IACDxB,SAAS;IACTyB,eAAe,EAAE,IAAI;IACrBC,SAAS,EAAE;EACb,CAAC,CAAC;EACF,OAAOxB,GAAG;AACZ,CAAC"}},"mtime":1682148437928},"{\"assumptions\":{},\"sourceRoot\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/database/models/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"filename\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/database/models/notification.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/node_modules/babel-plugin-add-module-exports/lib/index.js\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-runtime\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"regenerator\":true},\"externalDependencies\":[]},{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.21.0:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _sequelize = require(\"sequelize\");\n/**\n * exporting the user model and it's features.\n * @param {Object} sequelize\n * @param {Object} DataTypes\n * @returns {Object} the model for user\n */\nvar _default = (sequelize, DataTypes) => {\n  // eslint-disable-next-line require-jsdoc\n  class notifications extends _sequelize.Model {\n    // eslint-disable-next-line valid-jsdoc\n    /**\n     * Helper method for defining associations.\n     * This method is not a part of Sequelize lifecycle.\n     * The `models/index` file will call this method automatically.\n     */\n    static associate(models) {\n      notifications.belongsTo(models.users, {\n        as: 'receiver',\n        foreignKey: 'receiverId'\n      });\n    }\n    // define association here\n  }\n\n  notifications.init({\n    id: {\n      type: DataTypes.UUID,\n      defaultValue: DataTypes.UUIDV4,\n      allowNull: false,\n      primaryKey: true\n    },\n    isRead: {\n      type: DataTypes.BOOLEAN,\n      defaultValue: false\n    },\n    receiverId: {\n      type: DataTypes.UUID,\n      allowNull: false,\n      references: {\n        model: 'users',\n        key: 'id'\n      }\n    },\n    message: DataTypes.STRING,\n    type: DataTypes.STRING\n  }, {\n    sequelize,\n    modelName: 'notifications'\n  });\n  return notifications;\n};\nexports.default = _default;\nmodule.exports = exports.default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfc2VxdWVsaXplIiwicmVxdWlyZSIsIl9kZWZhdWx0Iiwic2VxdWVsaXplIiwiRGF0YVR5cGVzIiwibm90aWZpY2F0aW9ucyIsIk1vZGVsIiwiYXNzb2NpYXRlIiwibW9kZWxzIiwiYmVsb25nc1RvIiwidXNlcnMiLCJhcyIsImZvcmVpZ25LZXkiLCJpbml0IiwiaWQiLCJ0eXBlIiwiVVVJRCIsImRlZmF1bHRWYWx1ZSIsIlVVSURWNCIsImFsbG93TnVsbCIsInByaW1hcnlLZXkiLCJpc1JlYWQiLCJCT09MRUFOIiwicmVjZWl2ZXJJZCIsInJlZmVyZW5jZXMiLCJtb2RlbCIsImtleSIsIm1lc3NhZ2UiLCJTVFJJTkciLCJtb2RlbE5hbWUiLCJleHBvcnRzIiwiZGVmYXVsdCIsIm1vZHVsZSJdLCJzb3VyY2VSb290IjoiL1VzZXJzL2FuZGVsYXJ3YW5kYS9EZXNrdG9wL2UtY29tbS10ZWFtLWJyb2dyYW1tZXJzLWJuL3NyYy9kYXRhYmFzZS9tb2RlbHMvIiwic291cmNlcyI6WyJub3RpZmljYXRpb24uanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTW9kZWwgfSBmcm9tICdzZXF1ZWxpemUnO1xuXG4vKipcbiAqIGV4cG9ydGluZyB0aGUgdXNlciBtb2RlbCBhbmQgaXQncyBmZWF0dXJlcy5cbiAqIEBwYXJhbSB7T2JqZWN0fSBzZXF1ZWxpemVcbiAqIEBwYXJhbSB7T2JqZWN0fSBEYXRhVHlwZXNcbiAqIEByZXR1cm5zIHtPYmplY3R9IHRoZSBtb2RlbCBmb3IgdXNlclxuICovXG5leHBvcnQgZGVmYXVsdCAoc2VxdWVsaXplLCBEYXRhVHlwZXMpID0+IHtcbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIHJlcXVpcmUtanNkb2NcbiAgY2xhc3Mgbm90aWZpY2F0aW9ucyBleHRlbmRzIE1vZGVsIHtcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgdmFsaWQtanNkb2NcbiAgICAvKipcbiAgICAgKiBIZWxwZXIgbWV0aG9kIGZvciBkZWZpbmluZyBhc3NvY2lhdGlvbnMuXG4gICAgICogVGhpcyBtZXRob2QgaXMgbm90IGEgcGFydCBvZiBTZXF1ZWxpemUgbGlmZWN5Y2xlLlxuICAgICAqIFRoZSBgbW9kZWxzL2luZGV4YCBmaWxlIHdpbGwgY2FsbCB0aGlzIG1ldGhvZCBhdXRvbWF0aWNhbGx5LlxuICAgICAqL1xuICAgIHN0YXRpYyBhc3NvY2lhdGUobW9kZWxzKSB7XG4gICAgICBub3RpZmljYXRpb25zLmJlbG9uZ3NUbyhtb2RlbHMudXNlcnMsIHtcbiAgICAgICAgYXM6ICdyZWNlaXZlcicsXG4gICAgICAgIGZvcmVpZ25LZXk6ICdyZWNlaXZlcklkJyxcbiAgICAgIH0pO1xuICAgIH1cbiAgICAvLyBkZWZpbmUgYXNzb2NpYXRpb24gaGVyZVxuICB9XG4gIG5vdGlmaWNhdGlvbnMuaW5pdChcbiAgICB7XG4gICAgICBpZDoge1xuICAgICAgICB0eXBlOiBEYXRhVHlwZXMuVVVJRCxcbiAgICAgICAgZGVmYXVsdFZhbHVlOiBEYXRhVHlwZXMuVVVJRFY0LFxuICAgICAgICBhbGxvd051bGw6IGZhbHNlLFxuICAgICAgICBwcmltYXJ5S2V5OiB0cnVlLFxuICAgICAgfSxcbiAgICAgIGlzUmVhZDoge1xuICAgICAgICB0eXBlOiBEYXRhVHlwZXMuQk9PTEVBTixcbiAgICAgICAgZGVmYXVsdFZhbHVlOiBmYWxzZSxcbiAgICAgIH0sXG4gICAgICByZWNlaXZlcklkOiB7XG4gICAgICAgIHR5cGU6IERhdGFUeXBlcy5VVUlELFxuICAgICAgICBhbGxvd051bGw6IGZhbHNlLFxuICAgICAgICByZWZlcmVuY2VzOiB7XG4gICAgICAgICAgbW9kZWw6ICd1c2VycycsXG4gICAgICAgICAga2V5OiAnaWQnLFxuICAgICAgICB9LFxuICAgICAgfSxcbiAgICAgIG1lc3NhZ2U6IERhdGFUeXBlcy5TVFJJTkcsXG4gICAgICB0eXBlOiBEYXRhVHlwZXMuU1RSSU5HLFxuICAgIH0sXG4gICAge1xuICAgICAgc2VxdWVsaXplLFxuICAgICAgbW9kZWxOYW1lOiAnbm90aWZpY2F0aW9ucycsXG4gICAgfVxuICApO1xuICByZXR1cm4gbm90aWZpY2F0aW9ucztcbn07XG4iXSwibWFwcGluZ3MiOiI7Ozs7OztBQUFBLElBQUFBLFVBQUEsR0FBQUMsT0FBQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUxBLElBQUFDLFFBQUEsR0FNZUEsQ0FBQ0MsU0FBUyxFQUFFQyxTQUFTLEtBQUs7RUFDdkM7RUFDQSxNQUFNQyxhQUFhLFNBQVNDLGdCQUFLLENBQUM7SUFDaEM7SUFDQTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0lBQ0ksT0FBT0MsU0FBU0EsQ0FBQ0MsTUFBTSxFQUFFO01BQ3ZCSCxhQUFhLENBQUNJLFNBQVMsQ0FBQ0QsTUFBTSxDQUFDRSxLQUFLLEVBQUU7UUFDcENDLEVBQUUsRUFBRSxVQUFVO1FBQ2RDLFVBQVUsRUFBRTtNQUNkLENBQUMsQ0FBQztJQUNKO0lBQ0E7RUFDRjs7RUFDQVAsYUFBYSxDQUFDUSxJQUFJLENBQ2hCO0lBQ0VDLEVBQUUsRUFBRTtNQUNGQyxJQUFJLEVBQUVYLFNBQVMsQ0FBQ1ksSUFBSTtNQUNwQkMsWUFBWSxFQUFFYixTQUFTLENBQUNjLE1BQU07TUFDOUJDLFNBQVMsRUFBRSxLQUFLO01BQ2hCQyxVQUFVLEVBQUU7SUFDZCxDQUFDO0lBQ0RDLE1BQU0sRUFBRTtNQUNOTixJQUFJLEVBQUVYLFNBQVMsQ0FBQ2tCLE9BQU87TUFDdkJMLFlBQVksRUFBRTtJQUNoQixDQUFDO0lBQ0RNLFVBQVUsRUFBRTtNQUNWUixJQUFJLEVBQUVYLFNBQVMsQ0FBQ1ksSUFBSTtNQUNwQkcsU0FBUyxFQUFFLEtBQUs7TUFDaEJLLFVBQVUsRUFBRTtRQUNWQyxLQUFLLEVBQUUsT0FBTztRQUNkQyxHQUFHLEVBQUU7TUFDUDtJQUNGLENBQUM7SUFDREMsT0FBTyxFQUFFdkIsU0FBUyxDQUFDd0IsTUFBTTtJQUN6QmIsSUFBSSxFQUFFWCxTQUFTLENBQUN3QjtFQUNsQixDQUFDLEVBQ0Q7SUFDRXpCLFNBQVM7SUFDVDBCLFNBQVMsRUFBRTtFQUNiLENBQUMsQ0FDRjtFQUNELE9BQU94QixhQUFhO0FBQ3RCLENBQUM7QUFBQXlCLE9BQUEsQ0FBQUMsT0FBQSxHQUFBN0IsUUFBQTtBQUFBOEIsTUFBQSxDQUFBRixPQUFBLEdBQUFBLE9BQUEsQ0FBQUMsT0FBQSJ9","map":{"version":3,"names":["_sequelize","require","_default","sequelize","DataTypes","notifications","Model","associate","models","belongsTo","users","as","foreignKey","init","id","type","UUID","defaultValue","UUIDV4","allowNull","primaryKey","isRead","BOOLEAN","receiverId","references","model","key","message","STRING","modelName","exports","default","module"],"sourceRoot":"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/database/models/","sources":["notification.js"],"sourcesContent":["import { Model } from 'sequelize';\n\n/**\n * exporting the user model and it's features.\n * @param {Object} sequelize\n * @param {Object} DataTypes\n * @returns {Object} the model for user\n */\nexport default (sequelize, DataTypes) => {\n  // eslint-disable-next-line require-jsdoc\n  class notifications extends Model {\n    // eslint-disable-next-line valid-jsdoc\n    /**\n     * Helper method for defining associations.\n     * This method is not a part of Sequelize lifecycle.\n     * The `models/index` file will call this method automatically.\n     */\n    static associate(models) {\n      notifications.belongsTo(models.users, {\n        as: 'receiver',\n        foreignKey: 'receiverId',\n      });\n    }\n    // define association here\n  }\n  notifications.init(\n    {\n      id: {\n        type: DataTypes.UUID,\n        defaultValue: DataTypes.UUIDV4,\n        allowNull: false,\n        primaryKey: true,\n      },\n      isRead: {\n        type: DataTypes.BOOLEAN,\n        defaultValue: false,\n      },\n      receiverId: {\n        type: DataTypes.UUID,\n        allowNull: false,\n        references: {\n          model: 'users',\n          key: 'id',\n        },\n      },\n      message: DataTypes.STRING,\n      type: DataTypes.STRING,\n    },\n    {\n      sequelize,\n      modelName: 'notifications',\n    }\n  );\n  return notifications;\n};\n"],"mappings":";;;;;;AAAA,IAAAA,UAAA,GAAAC,OAAA;AAEA;AACA;AACA;AACA;AACA;AACA;AALA,IAAAC,QAAA,GAMeA,CAACC,SAAS,EAAEC,SAAS,KAAK;EACvC;EACA,MAAMC,aAAa,SAASC,gBAAK,CAAC;IAChC;IACA;AACJ;AACA;AACA;AACA;IACI,OAAOC,SAASA,CAACC,MAAM,EAAE;MACvBH,aAAa,CAACI,SAAS,CAACD,MAAM,CAACE,KAAK,EAAE;QACpCC,EAAE,EAAE,UAAU;QACdC,UAAU,EAAE;MACd,CAAC,CAAC;IACJ;IACA;EACF;;EACAP,aAAa,CAACQ,IAAI,CAChB;IACEC,EAAE,EAAE;MACFC,IAAI,EAAEX,SAAS,CAACY,IAAI;MACpBC,YAAY,EAAEb,SAAS,CAACc,MAAM;MAC9BC,SAAS,EAAE,KAAK;MAChBC,UAAU,EAAE;IACd,CAAC;IACDC,MAAM,EAAE;MACNN,IAAI,EAAEX,SAAS,CAACkB,OAAO;MACvBL,YAAY,EAAE;IAChB,CAAC;IACDM,UAAU,EAAE;MACVR,IAAI,EAAEX,SAAS,CAACY,IAAI;MACpBG,SAAS,EAAE,KAAK;MAChBK,UAAU,EAAE;QACVC,KAAK,EAAE,OAAO;QACdC,GAAG,EAAE;MACP;IACF,CAAC;IACDC,OAAO,EAAEvB,SAAS,CAACwB,MAAM;IACzBb,IAAI,EAAEX,SAAS,CAACwB;EAClB,CAAC,EACD;IACEzB,SAAS;IACT0B,SAAS,EAAE;EACb,CAAC,CACF;EACD,OAAOxB,aAAa;AACtB,CAAC;AAAAyB,OAAA,CAAAC,OAAA,GAAA7B,QAAA;AAAA8B,MAAA,CAAAF,OAAA,GAAAA,OAAA,CAAAC,OAAA"}},"mtime":1682148437928},"{\"assumptions\":{},\"sourceRoot\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/database/models/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"filename\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/database/models/order.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/node_modules/babel-plugin-add-module-exports/lib/index.js\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-runtime\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"regenerator\":true},\"externalDependencies\":[]},{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.21.0:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _sequelize = require(\"sequelize\");\nvar _default = (sequelize, DataTypes) => {\n  // eslint-disable-next-line require-jsdoc\n  class order extends _sequelize.Model {\n    // eslint-disable-next-line require-jsdoc\n    static associate(models) {\n      order.belongsToMany(models.products, {\n        as: 'products',\n        through: 'orderitem',\n        foreignKey: 'orderId',\n        onDelete: 'cascade'\n      });\n      order.belongsTo(models.users, {\n        as: 'buyer',\n        foreignKey: 'buyerId',\n        onDelete: 'cascade'\n      });\n      order.hasOne(models.payments, {\n        as: 'payment',\n        foreignKey: 'orderId'\n      });\n    }\n  }\n  order.init({\n    id: {\n      type: DataTypes.UUID,\n      defaultValue: DataTypes.UUIDV4,\n      allowNull: false,\n      primaryKey: true\n    },\n    deliveryCountry: DataTypes.STRING,\n    deliveryCity: DataTypes.STRING,\n    deliveryStreet: {\n      type: DataTypes.STRING,\n      allowNull: false\n    },\n    orderNo: {\n      type: DataTypes.FLOAT,\n      allowNull: false\n    },\n    paymentMethod: {\n      type: DataTypes.STRING,\n      allowNull: false\n    },\n    isPaid: {\n      type: DataTypes.BOOLEAN,\n      defaultValue: false\n    },\n    status: {\n      type: DataTypes.STRING,\n      enum: ['Pending', 'Processing', 'Shipped', 'Delivered'],\n      defaultValue: 'Pending'\n    },\n    statusUpdated: {\n      type: DataTypes.BOOLEAN,\n      defaultValue: false\n    },\n    expectedDeliveryDate: {\n      type: DataTypes.DATE,\n      allowNull: true\n    },\n    totalAmount: {\n      type: DataTypes.DOUBLE,\n      allowNull: false\n    },\n    buyerId: {\n      type: DataTypes.UUID,\n      allowNull: false\n    }\n  }, {\n    sequelize,\n    freezeTableName: true,\n    modelName: 'order'\n  });\n  return order;\n};\nexports.default = _default;\nmodule.exports = exports.default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfc2VxdWVsaXplIiwicmVxdWlyZSIsIl9kZWZhdWx0Iiwic2VxdWVsaXplIiwiRGF0YVR5cGVzIiwib3JkZXIiLCJNb2RlbCIsImFzc29jaWF0ZSIsIm1vZGVscyIsImJlbG9uZ3NUb01hbnkiLCJwcm9kdWN0cyIsImFzIiwidGhyb3VnaCIsImZvcmVpZ25LZXkiLCJvbkRlbGV0ZSIsImJlbG9uZ3NUbyIsInVzZXJzIiwiaGFzT25lIiwicGF5bWVudHMiLCJpbml0IiwiaWQiLCJ0eXBlIiwiVVVJRCIsImRlZmF1bHRWYWx1ZSIsIlVVSURWNCIsImFsbG93TnVsbCIsInByaW1hcnlLZXkiLCJkZWxpdmVyeUNvdW50cnkiLCJTVFJJTkciLCJkZWxpdmVyeUNpdHkiLCJkZWxpdmVyeVN0cmVldCIsIm9yZGVyTm8iLCJGTE9BVCIsInBheW1lbnRNZXRob2QiLCJpc1BhaWQiLCJCT09MRUFOIiwic3RhdHVzIiwiZW51bSIsInN0YXR1c1VwZGF0ZWQiLCJleHBlY3RlZERlbGl2ZXJ5RGF0ZSIsIkRBVEUiLCJ0b3RhbEFtb3VudCIsIkRPVUJMRSIsImJ1eWVySWQiLCJmcmVlemVUYWJsZU5hbWUiLCJtb2RlbE5hbWUiLCJleHBvcnRzIiwiZGVmYXVsdCIsIm1vZHVsZSJdLCJzb3VyY2VSb290IjoiL1VzZXJzL2FuZGVsYXJ3YW5kYS9EZXNrdG9wL2UtY29tbS10ZWFtLWJyb2dyYW1tZXJzLWJuL3NyYy9kYXRhYmFzZS9tb2RlbHMvIiwic291cmNlcyI6WyJvcmRlci5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBNb2RlbCB9IGZyb20gJ3NlcXVlbGl6ZSc7XG5cbmV4cG9ydCBkZWZhdWx0IChzZXF1ZWxpemUsIERhdGFUeXBlcykgPT4ge1xuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgcmVxdWlyZS1qc2RvY1xuICBjbGFzcyBvcmRlciBleHRlbmRzIE1vZGVsIHtcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgcmVxdWlyZS1qc2RvY1xuICAgIHN0YXRpYyBhc3NvY2lhdGUobW9kZWxzKSB7XG4gICAgICBvcmRlci5iZWxvbmdzVG9NYW55KG1vZGVscy5wcm9kdWN0cywge1xuICAgICAgICBhczogJ3Byb2R1Y3RzJyxcbiAgICAgICAgdGhyb3VnaDogJ29yZGVyaXRlbScsXG4gICAgICAgIGZvcmVpZ25LZXk6ICdvcmRlcklkJyxcbiAgICAgICAgb25EZWxldGU6ICdjYXNjYWRlJyxcbiAgICAgIH0pO1xuICAgICAgb3JkZXIuYmVsb25nc1RvKG1vZGVscy51c2Vycywge1xuICAgICAgICBhczogJ2J1eWVyJyxcbiAgICAgICAgZm9yZWlnbktleTogJ2J1eWVySWQnLFxuICAgICAgICBvbkRlbGV0ZTogJ2Nhc2NhZGUnLFxuICAgICAgfSk7XG4gICAgICBvcmRlci5oYXNPbmUobW9kZWxzLnBheW1lbnRzLCB7IGFzOiAncGF5bWVudCcsIGZvcmVpZ25LZXk6ICdvcmRlcklkJyB9KTtcbiAgICB9XG4gIH1cbiAgb3JkZXIuaW5pdChcbiAgICB7XG4gICAgICBpZDoge1xuICAgICAgICB0eXBlOiBEYXRhVHlwZXMuVVVJRCxcbiAgICAgICAgZGVmYXVsdFZhbHVlOiBEYXRhVHlwZXMuVVVJRFY0LFxuICAgICAgICBhbGxvd051bGw6IGZhbHNlLFxuICAgICAgICBwcmltYXJ5S2V5OiB0cnVlLFxuICAgICAgfSxcbiAgICAgIGRlbGl2ZXJ5Q291bnRyeTogRGF0YVR5cGVzLlNUUklORyxcbiAgICAgIGRlbGl2ZXJ5Q2l0eTogRGF0YVR5cGVzLlNUUklORyxcbiAgICAgIGRlbGl2ZXJ5U3RyZWV0OiB7XG4gICAgICAgIHR5cGU6IERhdGFUeXBlcy5TVFJJTkcsXG4gICAgICAgIGFsbG93TnVsbDogZmFsc2UsXG4gICAgICB9LFxuICAgICAgb3JkZXJObzoge1xuICAgICAgICB0eXBlOiBEYXRhVHlwZXMuRkxPQVQsXG4gICAgICAgIGFsbG93TnVsbDogZmFsc2UsXG4gICAgICB9LFxuICAgICAgcGF5bWVudE1ldGhvZDoge1xuICAgICAgICB0eXBlOiBEYXRhVHlwZXMuU1RSSU5HLFxuICAgICAgICBhbGxvd051bGw6IGZhbHNlLFxuICAgICAgfSxcbiAgICAgIGlzUGFpZDoge1xuICAgICAgICB0eXBlOiBEYXRhVHlwZXMuQk9PTEVBTixcbiAgICAgICAgZGVmYXVsdFZhbHVlOiBmYWxzZSxcbiAgICAgIH0sXG4gICAgICBzdGF0dXM6IHtcbiAgICAgICAgdHlwZTogRGF0YVR5cGVzLlNUUklORyxcbiAgICAgICAgZW51bTogWydQZW5kaW5nJywgJ1Byb2Nlc3NpbmcnLCAnU2hpcHBlZCcsICdEZWxpdmVyZWQnXSxcbiAgICAgICAgZGVmYXVsdFZhbHVlOiAnUGVuZGluZycsXG4gICAgICB9LFxuICAgICAgc3RhdHVzVXBkYXRlZDoge1xuICAgICAgICB0eXBlOiBEYXRhVHlwZXMuQk9PTEVBTixcbiAgICAgICAgZGVmYXVsdFZhbHVlOiBmYWxzZSxcbiAgICAgIH0sXG4gICAgICBleHBlY3RlZERlbGl2ZXJ5RGF0ZToge1xuICAgICAgICB0eXBlOiBEYXRhVHlwZXMuREFURSxcbiAgICAgICAgYWxsb3dOdWxsOiB0cnVlLFxuICAgICAgfSxcbiAgICAgIHRvdGFsQW1vdW50OiB7XG4gICAgICAgIHR5cGU6IERhdGFUeXBlcy5ET1VCTEUsXG4gICAgICAgIGFsbG93TnVsbDogZmFsc2UsXG4gICAgICB9LFxuICAgICAgYnV5ZXJJZDoge1xuICAgICAgICB0eXBlOiBEYXRhVHlwZXMuVVVJRCxcbiAgICAgICAgYWxsb3dOdWxsOiBmYWxzZSxcbiAgICAgIH0sXG4gICAgfSxcbiAgICB7XG4gICAgICBzZXF1ZWxpemUsXG4gICAgICBmcmVlemVUYWJsZU5hbWU6IHRydWUsXG4gICAgICBtb2RlbE5hbWU6ICdvcmRlcicsXG4gICAgfVxuICApO1xuICByZXR1cm4gb3JkZXI7XG59O1xuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7QUFBQSxJQUFBQSxVQUFBLEdBQUFDLE9BQUE7QUFBa0MsSUFBQUMsUUFBQSxHQUVuQkEsQ0FBQ0MsU0FBUyxFQUFF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","map":{"version":3,"names":["_sequelize","require","_default","sequelize","DataTypes","order","Model","associate","models","belongsToMany","products","as","through","foreignKey","onDelete","belongsTo","users","hasOne","payments","init","id","type","UUID","defaultValue","UUIDV4","allowNull","primaryKey","deliveryCountry","STRING","deliveryCity","deliveryStreet","orderNo","FLOAT","paymentMethod","isPaid","BOOLEAN","status","enum","statusUpdated","expectedDeliveryDate","DATE","totalAmount","DOUBLE","buyerId","freezeTableName","modelName","exports","default","module"],"sourceRoot":"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/database/models/","sources":["order.js"],"sourcesContent":["import { Model } from 'sequelize';\n\nexport default (sequelize, DataTypes) => {\n  // eslint-disable-next-line require-jsdoc\n  class order extends Model {\n    // eslint-disable-next-line require-jsdoc\n    static associate(models) {\n      order.belongsToMany(models.products, {\n        as: 'products',\n        through: 'orderitem',\n        foreignKey: 'orderId',\n        onDelete: 'cascade',\n      });\n      order.belongsTo(models.users, {\n        as: 'buyer',\n        foreignKey: 'buyerId',\n        onDelete: 'cascade',\n      });\n      order.hasOne(models.payments, { as: 'payment', foreignKey: 'orderId' });\n    }\n  }\n  order.init(\n    {\n      id: {\n        type: DataTypes.UUID,\n        defaultValue: DataTypes.UUIDV4,\n        allowNull: false,\n        primaryKey: true,\n      },\n      deliveryCountry: DataTypes.STRING,\n      deliveryCity: DataTypes.STRING,\n      deliveryStreet: {\n        type: DataTypes.STRING,\n        allowNull: false,\n      },\n      orderNo: {\n        type: DataTypes.FLOAT,\n        allowNull: false,\n      },\n      paymentMethod: {\n        type: DataTypes.STRING,\n        allowNull: false,\n      },\n      isPaid: {\n        type: DataTypes.BOOLEAN,\n        defaultValue: false,\n      },\n      status: {\n        type: DataTypes.STRING,\n        enum: ['Pending', 'Processing', 'Shipped', 'Delivered'],\n        defaultValue: 'Pending',\n      },\n      statusUpdated: {\n        type: DataTypes.BOOLEAN,\n        defaultValue: false,\n      },\n      expectedDeliveryDate: {\n        type: DataTypes.DATE,\n        allowNull: true,\n      },\n      totalAmount: {\n        type: DataTypes.DOUBLE,\n        allowNull: false,\n      },\n      buyerId: {\n        type: DataTypes.UUID,\n        allowNull: false,\n      },\n    },\n    {\n      sequelize,\n      freezeTableName: true,\n      modelName: 'order',\n    }\n  );\n  return order;\n};\n"],"mappings":";;;;;;AAAA,IAAAA,UAAA,GAAAC,OAAA;AAAkC,IAAAC,QAAA,GAEnBA,CAACC,SAAS,EAAEC,SAAS,KAAK;EACvC;EACA,MAAMC,KAAK,SAASC,gBAAK,CAAC;IACxB;IACA,OAAOC,SAASA,CAACC,MAAM,EAAE;MACvBH,KAAK,CAACI,aAAa,CAACD,MAAM,CAACE,QAAQ,EAAE;QACnCC,EAAE,EAAE,UAAU;QACdC,OAAO,EAAE,WAAW;QACpBC,UAAU,EAAE,SAAS;QACrBC,QAAQ,EAAE;MACZ,CAAC,CAAC;MACFT,KAAK,CAACU,SAAS,CAACP,MAAM,CAACQ,KAAK,EAAE;QAC5BL,EAAE,EAAE,OAAO;QACXE,UAAU,EAAE,SAAS;QACrBC,QAAQ,EAAE;MACZ,CAAC,CAAC;MACFT,KAAK,CAACY,MAAM,CAACT,MAAM,CAACU,QAAQ,EAAE;QAAEP,EAAE,EAAE,SAAS;QAAEE,UAAU,EAAE;MAAU,CAAC,CAAC;IACzE;EACF;EACAR,KAAK,CAACc,IAAI,CACR;IACEC,EAAE,EAAE;MACFC,IAAI,EAAEjB,SAAS,CAACkB,IAAI;MACpBC,YAAY,EAAEnB,SAAS,CAACoB,MAAM;MAC9BC,SAAS,EAAE,KAAK;MAChBC,UAAU,EAAE;IACd,CAAC;IACDC,eAAe,EAAEvB,SAAS,CAACwB,MAAM;IACjCC,YAAY,EAAEzB,SAAS,CAACwB,MAAM;IAC9BE,cAAc,EAAE;MACdT,IAAI,EAAEjB,SAAS,CAACwB,MAAM;MACtBH,SAAS,EAAE;IACb,CAAC;IACDM,OAAO,EAAE;MACPV,IAAI,EAAEjB,SAAS,CAAC4B,KAAK;MACrBP,SAAS,EAAE;IACb,CAAC;IACDQ,aAAa,EAAE;MACbZ,IAAI,EAAEjB,SAAS,CAACwB,MAAM;MACtBH,SAAS,EAAE;IACb,CAAC;IACDS,MAAM,EAAE;MACNb,IAAI,EAAEjB,SAAS,CAAC+B,OAAO;MACvBZ,YAAY,EAAE;IAChB,CAAC;IACDa,MAAM,EAAE;MACNf,IAAI,EAAEjB,SAAS,CAACwB,MAAM;MACtBS,IAAI,EAAE,CAAC,SAAS,EAAE,YAAY,EAAE,SAAS,EAAE,WAAW,CAAC;MACvDd,YAAY,EAAE;IAChB,CAAC;IACDe,aAAa,EAAE;MACbjB,IAAI,EAAEjB,SAAS,CAAC+B,OAAO;MACvBZ,YAAY,EAAE;IAChB,CAAC;IACDgB,oBAAoB,EAAE;MACpBlB,IAAI,EAAEjB,SAAS,CAACoC,IAAI;MACpBf,SAAS,EAAE;IACb,CAAC;IACDgB,WAAW,EAAE;MACXpB,IAAI,EAAEjB,SAAS,CAACsC,MAAM;MACtBjB,SAAS,EAAE;IACb,CAAC;IACDkB,OAAO,EAAE;MACPtB,IAAI,EAAEjB,SAAS,CAACkB,IAAI;MACpBG,SAAS,EAAE;IACb;EACF,CAAC,EACD;IACEtB,SAAS;IACTyC,eAAe,EAAE,IAAI;IACrBC,SAAS,EAAE;EACb,CAAC,CACF;EACD,OAAOxC,KAAK;AACd,CAAC;AAAAyC,OAAA,CAAAC,OAAA,GAAA7C,QAAA;AAAA8C,MAAA,CAAAF,OAAA,GAAAA,OAAA,CAAAC,OAAA"}},"mtime":1685643189445},"{\"assumptions\":{},\"sourceRoot\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/database/models/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"filename\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/database/models/orderitem.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/node_modules/babel-plugin-add-module-exports/lib/index.js\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-runtime\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"regenerator\":true},\"externalDependencies\":[]},{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.21.0:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _sequelize = require(\"sequelize\");\nvar _default = (sequelize, DataTypes) => {\n  /**\n   * Order Item\n   */\n  class orderitem extends _sequelize.Model {\n    // eslint-disable-next-line require-jsdoc\n    static associate(models) {\n      // define association here\n\n      orderitem.belongsTo(models.products, {\n        as: 'product',\n        foreignKey: 'productId'\n      });\n      orderitem.belongsTo(models.order, {\n        as: 'order',\n        foreignKey: 'orderId'\n      });\n    }\n  }\n  orderitem.init({\n    id: {\n      type: DataTypes.UUID,\n      defaultValue: DataTypes.UUIDV4,\n      allowNull: false,\n      primaryKey: true\n    },\n    quantity: {\n      type: DataTypes.INTEGER,\n      allowNull: false,\n      defaultValue: 1\n    },\n    productId: {\n      type: DataTypes.UUID,\n      allowNull: false\n    },\n    orderId: {\n      type: DataTypes.UUID,\n      allowNull: false\n    },\n    statusUpdated: {\n      type: DataTypes.BOOLEAN,\n      defaultValue: false\n    },\n    expectedDeliveryDate: {\n      type: DataTypes.DATE,\n      allowNull: true\n    },\n    price: {\n      type: DataTypes.DOUBLE,\n      allowNull: false\n    }\n  }, {\n    sequelize,\n    freezeTableName: true,\n    modelName: 'orderitem',\n    timestamps: false\n  });\n  return orderitem;\n};\nexports.default = _default;\nmodule.exports = exports.default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfc2VxdWVsaXplIiwicmVxdWlyZSIsIl9kZWZhdWx0Iiwic2VxdWVsaXplIiwiRGF0YVR5cGVzIiwib3JkZXJpdGVtIiwiTW9kZWwiLCJhc3NvY2lhdGUiLCJtb2RlbHMiLCJiZWxvbmdzVG8iLCJwcm9kdWN0cyIsImFzIiwiZm9yZWlnbktleSIsIm9yZGVyIiwiaW5pdCIsImlkIiwidHlwZSIsIlVVSUQiLCJkZWZhdWx0VmFsdWUiLCJVVUlEVjQiLCJhbGxvd051bGwiLCJwcmltYXJ5S2V5IiwicXVhbnRpdHkiLCJJTlRFR0VSIiwicHJvZHVjdElkIiwib3JkZXJJZCIsInN0YXR1c1VwZGF0ZWQiLCJCT09MRUFOIiwiZXhwZWN0ZWREZWxpdmVyeURhdGUiLCJEQVRFIiwicHJpY2UiLCJET1VCTEUiLCJmcmVlemVUYWJsZU5hbWUiLCJtb2RlbE5hbWUiLCJ0aW1lc3RhbXBzIiwiZXhwb3J0cyIsImRlZmF1bHQiLCJtb2R1bGUiXSwic291cmNlUm9vdCI6Ii9Vc2Vycy9hbmRlbGFyd2FuZGEvRGVza3RvcC9lLWNvbW0tdGVhbS1icm9ncmFtbWVycy1ibi9zcmMvZGF0YWJhc2UvbW9kZWxzLyIsInNvdXJjZXMiOlsib3JkZXJpdGVtLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE1vZGVsIH0gZnJvbSAnc2VxdWVsaXplJztcblxuZXhwb3J0IGRlZmF1bHQgKHNlcXVlbGl6ZSwgRGF0YVR5cGVzKSA9PiB7XG4gIC8qKlxuICAgKiBPcmRlciBJdGVtXG4gICAqL1xuICBjbGFzcyBvcmRlcml0ZW0gZXh0ZW5kcyBNb2RlbCB7XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIHJlcXVpcmUtanNkb2NcbiAgICBzdGF0aWMgYXNzb2NpYXRlKG1vZGVscykge1xuICAgICAgLy8gZGVmaW5lIGFzc29jaWF0aW9uIGhlcmVcblxuICAgICAgb3JkZXJpdGVtLmJlbG9uZ3NUbyhtb2RlbHMucHJvZHVjdHMsIHtcbiAgICAgICAgYXM6ICdwcm9kdWN0JyxcbiAgICAgICAgZm9yZWlnbktleTogJ3Byb2R1Y3RJZCcsXG4gICAgICB9KTtcbiAgICAgIG9yZGVyaXRlbS5iZWxvbmdzVG8obW9kZWxzLm9yZGVyLCB7IGFzOiAnb3JkZXInLCBmb3JlaWduS2V5OiAnb3JkZXJJZCcgfSk7XG4gICAgfVxuICB9XG4gIG9yZGVyaXRlbS5pbml0KFxuICAgIHtcbiAgICAgIGlkOiB7XG4gICAgICAgIHR5cGU6IERhdGFUeXBlcy5VVUlELFxuICAgICAgICBkZWZhdWx0VmFsdWU6IERhdGFUeXBlcy5VVUlEVjQsXG4gICAgICAgIGFsbG93TnVsbDogZmFsc2UsXG4gICAgICAgIHByaW1hcnlLZXk6IHRydWUsXG4gICAgICB9LFxuICAgICAgcXVhbnRpdHk6IHtcbiAgICAgICAgdHlwZTogRGF0YVR5cGVzLklOVEVHRVIsXG4gICAgICAgIGFsbG93TnVsbDogZmFsc2UsXG4gICAgICAgIGRlZmF1bHRWYWx1ZTogMSxcbiAgICAgIH0sXG4gICAgICBwcm9kdWN0SWQ6IHtcbiAgICAgICAgdHlwZTogRGF0YVR5cGVzLlVVSUQsXG4gICAgICAgIGFsbG93TnVsbDogZmFsc2UsXG4gICAgICB9LFxuICAgICAgb3JkZXJJZDoge1xuICAgICAgICB0eXBlOiBEYXRhVHlwZXMuVVVJRCxcbiAgICAgICAgYWxsb3dOdWxsOiBmYWxzZSxcbiAgICAgIH0sXG4gICAgICBzdGF0dXNVcGRhdGVkOiB7XG4gICAgICAgIHR5cGU6IERhdGFUeXBlcy5CT09MRUFOLFxuICAgICAgICBkZWZhdWx0VmFsdWU6IGZhbHNlLFxuICAgICAgfSxcbiAgICAgIGV4cGVjdGVkRGVsaXZlcnlEYXRlOiB7XG4gICAgICAgIHR5cGU6IERhdGFUeXBlcy5EQVRFLFxuICAgICAgICBhbGxvd051bGw6IHRydWUsXG4gICAgICB9LFxuXG4gICAgICBwcmljZToge1xuICAgICAgICB0eXBlOiBEYXRhVHlwZXMuRE9VQkxFLFxuICAgICAgICBhbGxvd051bGw6IGZhbHNlLFxuICAgICAgfSxcbiAgICB9LFxuICAgIHtcbiAgICAgIHNlcXVlbGl6ZSxcbiAgICAgIGZyZWV6ZVRhYmxlTmFtZTogdHJ1ZSxcbiAgICAgIG1vZGVsTmFtZTogJ29yZGVyaXRlbScsXG4gICAgICB0aW1lc3RhbXBzOiBmYWxzZSxcbiAgICB9XG4gICk7XG4gIHJldHVybiBvcmRlcml0ZW07XG59O1xuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7QUFBQSxJQUFBQSxVQUFBLEdBQUFDLE9BQUE7QUFBa0MsSUFBQUMsUUFBQSxHQUVuQkEsQ0FBQ0MsU0FBUyxFQUFFQyxTQUFTLEtBQUs7RUFDdkM7QUFDRjtBQUNBO0VBQ0UsTUFBTUMsU0FBUyxTQUFTQyxnQkFBSyxDQUFDO0lBQzVCO0lBQ0EsT0FBT0MsU0FBU0EsQ0FBQ0MsTUFBTSxFQUFFO01BQ3ZCOztNQUVBSCxTQUFTLENBQUNJLFNBQVMsQ0FBQ0QsTUFBTSxDQUFDRSxRQUFRLEVBQUU7UUFDbkNDLEVBQUUsRUFBRSxTQUFTO1FBQ2JDLFVBQVUsRUFBRTtNQUNkLENBQUMsQ0FBQztNQUNGUCxTQUFTLENBQUNJLFNBQVMsQ0FBQ0QsTUFBTSxDQUFDSyxLQUFLLEVBQUU7UUFBRUYsRUFBRSxFQUFFLE9BQU87UUFBRUMsVUFBVSxFQUFFO01BQVUsQ0FBQyxDQUFDO0lBQzNFO0VBQ0Y7RUFDQVAsU0FBUyxDQUFDUyxJQUFJLENBQ1o7SUFDRUMsRUFBRSxFQUFFO01BQ0ZDLElBQUksRUFBRVosU0FBUyxDQUFDYSxJQUFJO01BQ3BCQyxZQUFZLEVBQUVkLFNBQVMsQ0FBQ2UsTUFBTTtNQUM5QkMsU0FBUyxFQUFFLEtBQUs7TUFDaEJDLFVBQVUsRUFBRTtJQUNkLENBQUM7SUFDREMsUUFBUSxFQUFFO01BQ1JOLElBQUksRUFBRVosU0FBUyxDQUFDbUIsT0FBTztNQUN2QkgsU0FBUyxFQUFFLEtBQUs7TUFDaEJGLFlBQVksRUFBRTtJQUNoQixDQUFDO0lBQ0RNLFNBQVMsRUFBRTtNQUNUUixJQUFJLEVBQUVaLFNBQVMsQ0FBQ2EsSUFBSTtNQUNwQkcsU0FBUyxFQUFFO0lBQ2IsQ0FBQztJQUNESyxPQUFPLEVBQUU7TUFDUFQsSUFBSSxFQUFFWixTQUFTLENBQUNhLElBQUk7TUFDcEJHLFNBQVMsRUFBRTtJQUNiLENBQUM7SUFDRE0sYUFBYSxFQUFFO01BQ2JWLElBQUksRUFBRVosU0FBUyxDQUFDdUIsT0FBTztNQUN2QlQsWUFBWSxFQUFFO0lBQ2hCLENBQUM7SUFDRFUsb0JBQW9CLEVBQUU7TUFDcEJaLElBQUksRUFBRVosU0FBUyxDQUFDeUIsSUFBSTtNQUNwQlQsU0FBUyxFQUFFO0lBQ2IsQ0FBQztJQUVEVSxLQUFLLEVBQUU7TUFDTGQsSUFBSSxFQUFFWixTQUFTLENBQUMyQixNQUFNO01BQ3RCWCxTQUFTLEVBQUU7SUFDYjtFQUNGLENBQUMsRUFDRDtJQUNFakIsU0FBUztJQUNUNkIsZUFBZSxFQUFFLElBQUk7SUFDckJDLFNBQVMsRUFBRSxXQUFXO0lBQ3RCQyxVQUFVLEVBQUU7RUFDZCxDQUFDLENBQ0Y7RUFDRCxPQUFPN0IsU0FBUztBQUNsQixDQUFDO0FBQUE4QixPQUFBLENBQUFDLE9BQUEsR0FBQWxDLFFBQUE7QUFBQW1DLE1BQUEsQ0FBQUYsT0FBQSxHQUFBQSxPQUFBLENBQUFDLE9BQUEifQ==","map":{"version":3,"names":["_sequelize","require","_default","sequelize","DataTypes","orderitem","Model","associate","models","belongsTo","products","as","foreignKey","order","init","id","type","UUID","defaultValue","UUIDV4","allowNull","primaryKey","quantity","INTEGER","productId","orderId","statusUpdated","BOOLEAN","expectedDeliveryDate","DATE","price","DOUBLE","freezeTableName","modelName","timestamps","exports","default","module"],"sourceRoot":"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/database/models/","sources":["orderitem.js"],"sourcesContent":["import { Model } from 'sequelize';\n\nexport default (sequelize, DataTypes) => {\n  /**\n   * Order Item\n   */\n  class orderitem extends Model {\n    // eslint-disable-next-line require-jsdoc\n    static associate(models) {\n      // define association here\n\n      orderitem.belongsTo(models.products, {\n        as: 'product',\n        foreignKey: 'productId',\n      });\n      orderitem.belongsTo(models.order, { as: 'order', foreignKey: 'orderId' });\n    }\n  }\n  orderitem.init(\n    {\n      id: {\n        type: DataTypes.UUID,\n        defaultValue: DataTypes.UUIDV4,\n        allowNull: false,\n        primaryKey: true,\n      },\n      quantity: {\n        type: DataTypes.INTEGER,\n        allowNull: false,\n        defaultValue: 1,\n      },\n      productId: {\n        type: DataTypes.UUID,\n        allowNull: false,\n      },\n      orderId: {\n        type: DataTypes.UUID,\n        allowNull: false,\n      },\n      statusUpdated: {\n        type: DataTypes.BOOLEAN,\n        defaultValue: false,\n      },\n      expectedDeliveryDate: {\n        type: DataTypes.DATE,\n        allowNull: true,\n      },\n\n      price: {\n        type: DataTypes.DOUBLE,\n        allowNull: false,\n      },\n    },\n    {\n      sequelize,\n      freezeTableName: true,\n      modelName: 'orderitem',\n      timestamps: false,\n    }\n  );\n  return orderitem;\n};\n"],"mappings":";;;;;;AAAA,IAAAA,UAAA,GAAAC,OAAA;AAAkC,IAAAC,QAAA,GAEnBA,CAACC,SAAS,EAAEC,SAAS,KAAK;EACvC;AACF;AACA;EACE,MAAMC,SAAS,SAASC,gBAAK,CAAC;IAC5B;IACA,OAAOC,SAASA,CAACC,MAAM,EAAE;MACvB;;MAEAH,SAAS,CAACI,SAAS,CAACD,MAAM,CAACE,QAAQ,EAAE;QACnCC,EAAE,EAAE,SAAS;QACbC,UAAU,EAAE;MACd,CAAC,CAAC;MACFP,SAAS,CAACI,SAAS,CAACD,MAAM,CAACK,KAAK,EAAE;QAAEF,EAAE,EAAE,OAAO;QAAEC,UAAU,EAAE;MAAU,CAAC,CAAC;IAC3E;EACF;EACAP,SAAS,CAACS,IAAI,CACZ;IACEC,EAAE,EAAE;MACFC,IAAI,EAAEZ,SAAS,CAACa,IAAI;MACpBC,YAAY,EAAEd,SAAS,CAACe,MAAM;MAC9BC,SAAS,EAAE,KAAK;MAChBC,UAAU,EAAE;IACd,CAAC;IACDC,QAAQ,EAAE;MACRN,IAAI,EAAEZ,SAAS,CAACmB,OAAO;MACvBH,SAAS,EAAE,KAAK;MAChBF,YAAY,EAAE;IAChB,CAAC;IACDM,SAAS,EAAE;MACTR,IAAI,EAAEZ,SAAS,CAACa,IAAI;MACpBG,SAAS,EAAE;IACb,CAAC;IACDK,OAAO,EAAE;MACPT,IAAI,EAAEZ,SAAS,CAACa,IAAI;MACpBG,SAAS,EAAE;IACb,CAAC;IACDM,aAAa,EAAE;MACbV,IAAI,EAAEZ,SAAS,CAACuB,OAAO;MACvBT,YAAY,EAAE;IAChB,CAAC;IACDU,oBAAoB,EAAE;MACpBZ,IAAI,EAAEZ,SAAS,CAACyB,IAAI;MACpBT,SAAS,EAAE;IACb,CAAC;IAEDU,KAAK,EAAE;MACLd,IAAI,EAAEZ,SAAS,CAAC2B,MAAM;MACtBX,SAAS,EAAE;IACb;EACF,CAAC,EACD;IACEjB,SAAS;IACT6B,eAAe,EAAE,IAAI;IACrBC,SAAS,EAAE,WAAW;IACtBC,UAAU,EAAE;EACd,CAAC,CACF;EACD,OAAO7B,SAAS;AAClB,CAAC;AAAA8B,OAAA,CAAAC,OAAA,GAAAlC,QAAA;AAAAmC,MAAA,CAAAF,OAAA,GAAAA,OAAA,CAAAC,OAAA"}},"mtime":1682148437929},"{\"assumptions\":{},\"sourceRoot\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/database/models/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"filename\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/database/models/payment.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/node_modules/babel-plugin-add-module-exports/lib/index.js\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-runtime\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"regenerator\":true},\"externalDependencies\":[]},{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.21.0:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _sequelize = require(\"sequelize\");\nvar _default = (sequelize, DataTypes) => {\n  /**\n   * payment\n   */\n  class payment extends _sequelize.Model {\n    /**\n     * @param {*} models\n     * @returns {null} empty\n     */\n    static associate(models) {\n      payment.belongsTo(models.order, {\n        as: 'order',\n        foreignKey: 'orderId',\n        onDelete: 'cascade'\n      });\n    }\n  }\n  payment.init({\n    id: {\n      type: DataTypes.UUID,\n      defaultValue: DataTypes.UUIDV4,\n      allowNull: false,\n      primaryKey: true\n    },\n    amount: {\n      type: DataTypes.DOUBLE,\n      allowNull: false\n    },\n    orderId: {\n      type: DataTypes.UUID,\n      allowNull: false\n    },\n    method: DataTypes.STRING,\n    discount: {\n      type: DataTypes.DOUBLE,\n      defaultValue: 0\n    },\n    stripeId: DataTypes.STRING\n  }, {\n    sequelize,\n    modelName: 'payments'\n  });\n  return payment;\n};\nexports.default = _default;\nmodule.exports = exports.default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfc2VxdWVsaXplIiwicmVxdWlyZSIsIl9kZWZhdWx0Iiwic2VxdWVsaXplIiwiRGF0YVR5cGVzIiwicGF5bWVudCIsIk1vZGVsIiwiYXNzb2NpYXRlIiwibW9kZWxzIiwiYmVsb25nc1RvIiwib3JkZXIiLCJhcyIsImZvcmVpZ25LZXkiLCJvbkRlbGV0ZSIsImluaXQiLCJpZCIsInR5cGUiLCJVVUlEIiwiZGVmYXVsdFZhbHVlIiwiVVVJRFY0IiwiYWxsb3dOdWxsIiwicHJpbWFyeUtleSIsImFtb3VudCIsIkRPVUJMRSIsIm9yZGVySWQiLCJtZXRob2QiLCJTVFJJTkciLCJkaXNjb3VudCIsInN0cmlwZUlkIiwibW9kZWxOYW1lIiwiZXhwb3J0cyIsImRlZmF1bHQiLCJtb2R1bGUiXSwic291cmNlUm9vdCI6Ii9Vc2Vycy9hbmRlbGFyd2FuZGEvRGVza3RvcC9lLWNvbW0tdGVhbS1icm9ncmFtbWVycy1ibi9zcmMvZGF0YWJhc2UvbW9kZWxzLyIsInNvdXJjZXMiOlsicGF5bWVudC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBNb2RlbCB9IGZyb20gJ3NlcXVlbGl6ZSc7XG5cbmV4cG9ydCBkZWZhdWx0IChzZXF1ZWxpemUsIERhdGFUeXBlcykgPT4ge1xuICAvKipcbiAgICogcGF5bWVudFxuICAgKi9cbiAgY2xhc3MgcGF5bWVudCBleHRlbmRzIE1vZGVsIHtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0geyp9IG1vZGVsc1xuICAgICAqIEByZXR1cm5zIHtudWxsfSBlbXB0eVxuICAgICAqL1xuICAgIHN0YXRpYyBhc3NvY2lhdGUobW9kZWxzKSB7XG4gICAgICBwYXltZW50LmJlbG9uZ3NUbyhtb2RlbHMub3JkZXIsIHsgYXM6ICdvcmRlcicsIGZvcmVpZ25LZXk6ICdvcmRlcklkJywgb25EZWxldGU6ICdjYXNjYWRlJyB9KTtcbiAgICB9XG4gIH1cbiAgcGF5bWVudC5pbml0KHtcbiAgICBpZDoge1xuICAgICAgdHlwZTogRGF0YVR5cGVzLlVVSUQsXG4gICAgICBkZWZhdWx0VmFsdWU6IERhdGFUeXBlcy5VVUlEVjQsXG4gICAgICBhbGxvd051bGw6IGZhbHNlLFxuICAgICAgcHJpbWFyeUtleTogdHJ1ZSxcbiAgICB9LFxuICAgIGFtb3VudDoge1xuICAgICAgdHlwZTogRGF0YVR5cGVzLkRPVUJMRSxcbiAgICAgIGFsbG93TnVsbDogZmFsc2VcbiAgICB9LFxuICAgIG9yZGVySWQ6IHtcbiAgICAgIHR5cGU6IERhdGFUeXBlcy5VVUlELFxuICAgICAgYWxsb3dOdWxsOiBmYWxzZVxuICAgIH0sXG4gICAgbWV0aG9kOiBEYXRhVHlwZXMuU1RSSU5HLFxuICAgIGRpc2NvdW50OiB7XG4gICAgICB0eXBlOiBEYXRhVHlwZXMuRE9VQkxFLFxuICAgICAgZGVmYXVsdFZhbHVlOiAwXG4gICAgfSxcbiAgICBzdHJpcGVJZDogRGF0YVR5cGVzLlNUUklOR1xuICB9LCB7XG4gICAgc2VxdWVsaXplLFxuICAgIG1vZGVsTmFtZTogJ3BheW1lbnRzJyxcbiAgfSk7XG4gIHJldHVybiBwYXltZW50O1xufTtcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQUEsSUFBQUEsVUFBQSxHQUFBQyxPQUFBO0FBQWtDLElBQUFDLFFBQUEsR0FFbkJBLENBQUNDLFNBQVMsRUFBRUMsU0FBUyxLQUFLO0VBQ3ZDO0FBQ0Y7QUFDQTtFQUNFLE1BQU1DLE9BQU8sU0FBU0MsZ0JBQUssQ0FBQztJQUMxQjtBQUNKO0FBQ0E7QUFDQTtJQUNJLE9BQU9DLFNBQVNBLENBQUNDLE1BQU0sRUFBRTtNQUN2QkgsT0FBTyxDQUFDSSxTQUFTLENBQUNELE1BQU0sQ0FBQ0UsS0FBSyxFQUFFO1FBQUVDLEVBQUUsRUFBRSxPQUFPO1FBQUVDLFVBQVUsRUFBRSxTQUFTO1FBQUVDLFFBQVEsRUFBRTtNQUFVLENBQUMsQ0FBQztJQUM5RjtFQUNGO0VBQ0FSLE9BQU8sQ0FBQ1MsSUFBSSxDQUFDO0lBQ1hDLEVBQUUsRUFBRTtNQUNGQyxJQUFJLEVBQUVaLFNBQVMsQ0FBQ2EsSUFBSTtNQUNwQkMsWUFBWSxFQUFFZCxTQUFTLENBQUNlLE1BQU07TUFDOUJDLFNBQVMsRUFBRSxLQUFLO01BQ2hCQyxVQUFVLEVBQUU7SUFDZCxDQUFDO0lBQ0RDLE1BQU0sRUFBRTtNQUNOTixJQUFJLEVBQUVaLFNBQVMsQ0FBQ21CLE1BQU07TUFDdEJILFNBQVMsRUFBRTtJQUNiLENBQUM7SUFDREksT0FBTyxFQUFFO01BQ1BSLElBQUksRUFBRVosU0FBUyxDQUFDYSxJQUFJO01BQ3BCRyxTQUFTLEVBQUU7SUFDYixDQUFDO0lBQ0RLLE1BQU0sRUFBRXJCLFNBQVMsQ0FBQ3NCLE1BQU07SUFDeEJDLFFBQVEsRUFBRTtNQUNSWCxJQUFJLEVBQUVaLFNBQVMsQ0FBQ21CLE1BQU07TUFDdEJMLFlBQVksRUFBRTtJQUNoQixDQUFDO0lBQ0RVLFFBQVEsRUFBRXhCLFNBQVMsQ0FBQ3NCO0VBQ3RCLENBQUMsRUFBRTtJQUNEdkIsU0FBUztJQUNUMEIsU0FBUyxFQUFFO0VBQ2IsQ0FBQyxDQUFDO0VBQ0YsT0FBT3hCLE9BQU87QUFDaEIsQ0FBQztBQUFBeUIsT0FBQSxDQUFBQyxPQUFBLEdBQUE3QixRQUFBO0FBQUE4QixNQUFBLENBQUFGLE9BQUEsR0FBQUEsT0FBQSxDQUFBQyxPQUFBIn0=","map":{"version":3,"names":["_sequelize","require","_default","sequelize","DataTypes","payment","Model","associate","models","belongsTo","order","as","foreignKey","onDelete","init","id","type","UUID","defaultValue","UUIDV4","allowNull","primaryKey","amount","DOUBLE","orderId","method","STRING","discount","stripeId","modelName","exports","default","module"],"sourceRoot":"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/database/models/","sources":["payment.js"],"sourcesContent":["import { Model } from 'sequelize';\n\nexport default (sequelize, DataTypes) => {\n  /**\n   * payment\n   */\n  class payment extends Model {\n    /**\n     * @param {*} models\n     * @returns {null} empty\n     */\n    static associate(models) {\n      payment.belongsTo(models.order, { as: 'order', foreignKey: 'orderId', onDelete: 'cascade' });\n    }\n  }\n  payment.init({\n    id: {\n      type: DataTypes.UUID,\n      defaultValue: DataTypes.UUIDV4,\n      allowNull: false,\n      primaryKey: true,\n    },\n    amount: {\n      type: DataTypes.DOUBLE,\n      allowNull: false\n    },\n    orderId: {\n      type: DataTypes.UUID,\n      allowNull: false\n    },\n    method: DataTypes.STRING,\n    discount: {\n      type: DataTypes.DOUBLE,\n      defaultValue: 0\n    },\n    stripeId: DataTypes.STRING\n  }, {\n    sequelize,\n    modelName: 'payments',\n  });\n  return payment;\n};\n"],"mappings":";;;;;;AAAA,IAAAA,UAAA,GAAAC,OAAA;AAAkC,IAAAC,QAAA,GAEnBA,CAACC,SAAS,EAAEC,SAAS,KAAK;EACvC;AACF;AACA;EACE,MAAMC,OAAO,SAASC,gBAAK,CAAC;IAC1B;AACJ;AACA;AACA;IACI,OAAOC,SAASA,CAACC,MAAM,EAAE;MACvBH,OAAO,CAACI,SAAS,CAACD,MAAM,CAACE,KAAK,EAAE;QAAEC,EAAE,EAAE,OAAO;QAAEC,UAAU,EAAE,SAAS;QAAEC,QAAQ,EAAE;MAAU,CAAC,CAAC;IAC9F;EACF;EACAR,OAAO,CAACS,IAAI,CAAC;IACXC,EAAE,EAAE;MACFC,IAAI,EAAEZ,SAAS,CAACa,IAAI;MACpBC,YAAY,EAAEd,SAAS,CAACe,MAAM;MAC9BC,SAAS,EAAE,KAAK;MAChBC,UAAU,EAAE;IACd,CAAC;IACDC,MAAM,EAAE;MACNN,IAAI,EAAEZ,SAAS,CAACmB,MAAM;MACtBH,SAAS,EAAE;IACb,CAAC;IACDI,OAAO,EAAE;MACPR,IAAI,EAAEZ,SAAS,CAACa,IAAI;MACpBG,SAAS,EAAE;IACb,CAAC;IACDK,MAAM,EAAErB,SAAS,CAACsB,MAAM;IACxBC,QAAQ,EAAE;MACRX,IAAI,EAAEZ,SAAS,CAACmB,MAAM;MACtBL,YAAY,EAAE;IAChB,CAAC;IACDU,QAAQ,EAAExB,SAAS,CAACsB;EACtB,CAAC,EAAE;IACDvB,SAAS;IACT0B,SAAS,EAAE;EACb,CAAC,CAAC;EACF,OAAOxB,OAAO;AAChB,CAAC;AAAAyB,OAAA,CAAAC,OAAA,GAAA7B,QAAA;AAAA8B,MAAA,CAAAF,OAAA,GAAAA,OAAA,CAAAC,OAAA"}},"mtime":1682148437929},"{\"assumptions\":{},\"sourceRoot\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/database/models/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"filename\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/database/models/products.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/node_modules/babel-plugin-add-module-exports/lib/index.js\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-runtime\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"regenerator\":true},\"externalDependencies\":[]},{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.21.0:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _sequelize = require(\"sequelize\");\n/**\n * exporting the user model and it's features.\n * @param {Object} sequelize\n * @param {Object} DataTypes\n * @returns {Object} the model for user\n */\nvar _default = (sequelize, DataTypes) => {\n  // eslint-disable-next-line require-jsdoc\n  class products extends _sequelize.Model {\n    // eslint-disable-next-line valid-jsdoc\n    /**\n     * Helper method for defining associations.\n     * This method is not a part of Sequelize lifecycle.\n     * The `models/index` file will call this method automatically.\n     */\n    static associate(models) {\n      products.hasMany(models.orderitem, {\n        as: 'orderitems',\n        foreignKey: 'productId'\n      });\n      products.belongsTo(models.users, {\n        as: 'seller',\n        foreignKey: 'sellerId'\n      });\n      products.hasMany(models.reviews, {\n        as: 'reviews',\n        foreignKey: 'productId'\n      });\n    }\n  }\n  products.init({\n    id: {\n      allowNull: false,\n      primaryKey: true,\n      type: DataTypes.UUID,\n      defaultValue: DataTypes.UUIDV4\n    },\n    images: {\n      type: DataTypes.ARRAY(DataTypes.STRING)\n    },\n    name: {\n      allowNull: false,\n      type: DataTypes.STRING\n    },\n    description: {\n      type: DataTypes.STRING(2000)\n    },\n    quantity: {\n      type: DataTypes.INTEGER,\n      allowNull: false\n    },\n    sellerId: {\n      type: DataTypes.UUID,\n      allowNull: false,\n      references: {\n        model: 'users',\n        key: 'id'\n      }\n    },\n    exp_date: {\n      type: DataTypes.DATE,\n      allowNull: false\n    },\n    available: {\n      type: DataTypes.BOOLEAN,\n      defaultValue: true\n    },\n    price: {\n      type: DataTypes.DOUBLE,\n      allowNull: false,\n      defaultValue: 0\n    },\n    category: {\n      type: DataTypes.INTEGER,\n      references: {\n        model: 'categories',\n        key: 'id'\n      }\n    }\n  }, {\n    sequelize,\n    modelName: 'products'\n  });\n  return products;\n};\nexports.default = _default;\nmodule.exports = exports.default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfc2VxdWVsaXplIiwicmVxdWlyZSIsIl9kZWZhdWx0Iiwic2VxdWVsaXplIiwiRGF0YVR5cGVzIiwicHJvZHVjdHMiLCJNb2RlbCIsImFzc29jaWF0ZSIsIm1vZGVscyIsImhhc01hbnkiLCJvcmRlcml0ZW0iLCJhcyIsImZvcmVpZ25LZXkiLCJiZWxvbmdzVG8iLCJ1c2VycyIsInJldmlld3MiLCJpbml0IiwiaWQiLCJhbGxvd051bGwiLCJwcmltYXJ5S2V5IiwidHlwZSIsIlVVSUQiLCJkZWZhdWx0VmFsdWUiLCJVVUlEVjQiLCJpbWFnZXMiLCJBUlJBWSIsIlNUUklORyIsIm5hbWUiLCJkZXNjcmlwdGlvbiIsInF1YW50aXR5IiwiSU5URUdFUiIsInNlbGxlcklkIiwicmVmZXJlbmNlcyIsIm1vZGVsIiwia2V5IiwiZXhwX2RhdGUiLCJEQVRFIiwiYXZhaWxhYmxlIiwiQk9PTEVBTiIsInByaWNlIiwiRE9VQkxFIiwiY2F0ZWdvcnkiLCJtb2RlbE5hbWUiLCJleHBvcnRzIiwiZGVmYXVsdCIsIm1vZHVsZSJdLCJzb3VyY2VSb290IjoiL1VzZXJzL2FuZGVsYXJ3YW5kYS9EZXNrdG9wL2UtY29tbS10ZWFtLWJyb2dyYW1tZXJzLWJuL3NyYy9kYXRhYmFzZS9tb2RlbHMvIiwic291cmNlcyI6WyJwcm9kdWN0cy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBNb2RlbCB9IGZyb20gJ3NlcXVlbGl6ZSc7XG5cbi8qKlxuICogZXhwb3J0aW5nIHRoZSB1c2VyIG1vZGVsIGFuZCBpdCdzIGZlYXR1cmVzLlxuICogQHBhcmFtIHtPYmplY3R9IHNlcXVlbGl6ZVxuICogQHBhcmFtIHtPYmplY3R9IERhdGFUeXBlc1xuICogQHJldHVybnMge09iamVjdH0gdGhlIG1vZGVsIGZvciB1c2VyXG4gKi9cbmV4cG9ydCBkZWZhdWx0IChzZXF1ZWxpemUsIERhdGFUeXBlcykgPT4ge1xuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgcmVxdWlyZS1qc2RvY1xuICBjbGFzcyBwcm9kdWN0cyBleHRlbmRzIE1vZGVsIHtcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgdmFsaWQtanNkb2NcbiAgICAvKipcbiAgICAgKiBIZWxwZXIgbWV0aG9kIGZvciBkZWZpbmluZyBhc3NvY2lhdGlvbnMuXG4gICAgICogVGhpcyBtZXRob2QgaXMgbm90IGEgcGFydCBvZiBTZXF1ZWxpemUgbGlmZWN5Y2xlLlxuICAgICAqIFRoZSBgbW9kZWxzL2luZGV4YCBmaWxlIHdpbGwgY2FsbCB0aGlzIG1ldGhvZCBhdXRvbWF0aWNhbGx5LlxuICAgICAqL1xuICAgIHN0YXRpYyBhc3NvY2lhdGUobW9kZWxzKSB7XG4gICAgICBwcm9kdWN0cy5oYXNNYW55KG1vZGVscy5vcmRlcml0ZW0sIHtcbiAgICAgICAgYXM6ICdvcmRlcml0ZW1zJyxcbiAgICAgICAgZm9yZWlnbktleTogJ3Byb2R1Y3RJZCcsXG4gICAgICB9KTtcbiAgICAgIHByb2R1Y3RzLmJlbG9uZ3NUbyhtb2RlbHMudXNlcnMsIHtcbiAgICAgICAgYXM6ICdzZWxsZXInLFxuICAgICAgICBmb3JlaWduS2V5OiAnc2VsbGVySWQnLFxuICAgICAgfSk7XG4gICAgICBwcm9kdWN0cy5oYXNNYW55KG1vZGVscy5yZXZpZXdzLCB7XG4gICAgICAgIGFzOiAncmV2aWV3cycsXG4gICAgICAgIGZvcmVpZ25LZXk6ICdwcm9kdWN0SWQnLFxuICAgICAgfSk7XG4gICAgfVxuICB9XG4gIHByb2R1Y3RzLmluaXQoXG4gICAge1xuICAgICAgaWQ6IHtcbiAgICAgICAgYWxsb3dOdWxsOiBmYWxzZSxcbiAgICAgICAgcHJpbWFyeUtleTogdHJ1ZSxcbiAgICAgICAgdHlwZTogRGF0YVR5cGVzLlVVSUQsXG4gICAgICAgIGRlZmF1bHRWYWx1ZTogRGF0YVR5cGVzLlVVSURWNCxcbiAgICAgIH0sXG4gICAgICBpbWFnZXM6IHtcbiAgICAgICAgdHlwZTogRGF0YVR5cGVzLkFSUkFZKERhdGFUeXBlcy5TVFJJTkcpLFxuICAgICAgfSxcbiAgICAgIG5hbWU6IHtcbiAgICAgICAgYWxsb3dOdWxsOiBmYWxzZSxcbiAgICAgICAgdHlwZTogRGF0YVR5cGVzLlNUUklORyxcbiAgICAgIH0sXG4gICAgICBkZXNjcmlwdGlvbjoge1xuICAgICAgICB0eXBlOiBEYXRhVHlwZXMuU1RSSU5HKDIwMDApLFxuICAgICAgfSxcbiAgICAgIHF1YW50aXR5OiB7XG4gICAgICAgIHR5cGU6IERhdGFUeXBlcy5JTlRFR0VSLFxuICAgICAgICBhbGxvd051bGw6IGZhbHNlLFxuICAgICAgfSxcbiAgICAgIHNlbGxlcklkOiB7XG4gICAgICAgIHR5cGU6IERhdGFUeXBlcy5VVUlELFxuICAgICAgICBhbGxvd051bGw6IGZhbHNlLFxuICAgICAgICByZWZlcmVuY2VzOiB7XG4gICAgICAgICAgbW9kZWw6ICd1c2VycycsXG4gICAgICAgICAga2V5OiAnaWQnLFxuICAgICAgICB9LFxuICAgICAgfSxcbiAgICAgIGV4cF9kYXRlOiB7XG4gICAgICAgIHR5cGU6IERhdGFUeXBlcy5EQVRFLFxuICAgICAgICBhbGxvd051bGw6IGZhbHNlLFxuICAgICAgfSxcbiAgICAgIGF2YWlsYWJsZToge1xuICAgICAgICB0eXBlOiBEYXRhVHlwZXMuQk9PTEVBTixcbiAgICAgICAgZGVmYXVsdFZhbHVlOiB0cnVlLFxuICAgICAgfSxcbiAgICAgIHByaWNlOiB7XG4gICAgICAgIHR5cGU6IERhdGFUeXBlcy5ET1VCTEUsXG4gICAgICAgIGFsbG93TnVsbDogZmFsc2UsXG4gICAgICAgIGRlZmF1bHRWYWx1ZTogMCxcbiAgICAgIH0sXG4gICAgICBjYXRlZ29yeToge1xuICAgICAgICB0eXBlOiBEYXRhVHlwZXMuSU5URUdFUixcbiAgICAgICAgcmVmZXJlbmNlczoge1xuICAgICAgICAgIG1vZGVsOiAnY2F0ZWdvcmllcycsXG4gICAgICAgICAga2V5OiAnaWQnLFxuICAgICAgICB9LFxuICAgICAgfSxcbiAgICB9LFxuICAgIHtcbiAgICAgIHNlcXVlbGl6ZSxcbiAgICAgIG1vZGVsTmFtZTogJ3Byb2R1Y3RzJyxcbiAgICB9XG4gICk7XG4gIHJldHVybiBwcm9kdWN0cztcbn07XG4iXSwibWFwcGluZ3MiOiI7Ozs7OztBQUFBLElBQUFBLFVBQUEsR0FBQUMsT0FBQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUxBLElBQUFDLFFBQUEsR0FNZUEsQ0FBQ0MsU0FBUyxFQUFFQyxTQUFTLEtBQUs7RUFDdkM7RUFDQSxNQUFNQyxRQUFRLFNBQVNDLGdCQUFLLENBQUM7SUFDM0I7SUFDQTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0lBQ0ksT0FBT0MsU0FBU0EsQ0FBQ0MsTUFBTSxFQUFFO01BQ3ZCSCxRQUFRLENBQUNJLE9BQU8sQ0FBQ0QsTUFBTSxDQUFDRSxTQUFTLEVBQUU7UUFDakNDLEVBQUUsRUFBRSxZQUFZO1FBQ2hCQyxVQUFVLEVBQUU7TUFDZCxDQUFDLENBQUM7TUFDRlAsUUFBUSxDQUFDUSxTQUFTLENBQUNMLE1BQU0sQ0FBQ00sS0FBSyxFQUFFO1FBQy9CSCxFQUFFLEVBQUUsUUFBUTtRQUNaQyxVQUFVLEVBQUU7TUFDZCxDQUFDLENBQUM7TUFDRlAsUUFBUSxDQUFDSSxPQUFPLENBQUNELE1BQU0sQ0FBQ08sT0FBTyxFQUFFO1FBQy9CSixFQUFFLEVBQUUsU0FBUztRQUNiQyxVQUFVLEVBQUU7TUFDZCxDQUFDLENBQUM7SUFDSjtFQUNGO0VBQ0FQLFFBQVEsQ0FBQ1csSUFBSSxDQUNYO0lBQ0VDLEVBQUUsRUFBRTtNQUNGQyxTQUFTLEVBQUUsS0FBSztNQUNoQkMsVUFBVSxFQUFFLElBQUk7TUFDaEJDLElBQUksRUFBRWhCLFNBQVMsQ0FBQ2lCLElBQUk7TUFDcEJDLFlBQVksRUFBRWxCLFNBQVMsQ0FBQ21CO0lBQzFCLENBQUM7SUFDREMsTUFBTSxFQUFFO01BQ05KLElBQUksRUFBRWhCLFNBQVMsQ0FBQ3FCLEtBQUssQ0FBQ3JCLFNBQVMsQ0FBQ3NCLE1BQU07SUFDeEMsQ0FBQztJQUNEQyxJQUFJLEVBQUU7TUFDSlQsU0FBUyxFQUFFLEtBQUs7TUFDaEJFLElBQUksRUFBRWhCLFNBQVMsQ0FBQ3NCO0lBQ2xCLENBQUM7SUFDREUsV0FBVyxFQUFFO01BQ1hSLElBQUksRUFBRWhCLFNBQVMsQ0FBQ3NCLE1BQU0sQ0FBQyxJQUFJO0lBQzdCLENBQUM7SUFDREcsUUFBUSxFQUFFO01BQ1JULElBQUksRUFBRWhCLFNBQVMsQ0FBQzBCLE9BQU87TUFDdkJaLFNBQVMsRUFBRTtJQUNiLENBQUM7SUFDRGEsUUFBUSxFQUFFO01BQ1JYLElBQUksRUFBRWhCLFNBQVMsQ0FBQ2lCLElBQUk7TUFDcEJILFNBQVMsRUFBRSxLQUFLO01BQ2hCYyxVQUFVLEVBQUU7UUFDVkMsS0FBSyxFQUFFLE9BQU87UUFDZEMsR0FBRyxFQUFFO01BQ1A7SUFDRixDQUFDO0lBQ0RDLFFBQVEsRUFBRTtNQUNSZixJQUFJLEVBQUVoQixTQUFTLENBQUNnQyxJQUFJO01BQ3BCbEIsU0FBUyxFQUFFO0lBQ2IsQ0FBQztJQUNEbUIsU0FBUyxFQUFFO01BQ1RqQixJQUFJLEVBQUVoQixTQUFTLENBQUNrQyxPQUFPO01BQ3ZCaEIsWUFBWSxFQUFFO0lBQ2hCLENBQUM7SUFDRGlCLEtBQUssRUFBRTtNQUNMbkIsSUFBSSxFQUFFaEIsU0FBUyxDQUFDb0MsTUFBTTtNQUN0QnRCLFNBQVMsRUFBRSxLQUFLO01BQ2hCSSxZQUFZLEVBQUU7SUFDaEIsQ0FBQztJQUNEbUIsUUFBUSxFQUFFO01BQ1JyQixJQUFJLEVBQUVoQixTQUFTLENBQUMwQixPQUFPO01BQ3ZCRSxVQUFVLEVBQUU7UUFDVkMsS0FBSyxFQUFFLFlBQVk7UUFDbkJDLEdBQUcsRUFBRTtNQUNQO0lBQ0Y7RUFDRixDQUFDLEVBQ0Q7SUFDRS9CLFNBQVM7SUFDVHVDLFNBQVMsRUFBRTtFQUNiLENBQUMsQ0FDRjtFQUNELE9BQU9yQyxRQUFRO0FBQ2pCLENBQUM7QUFBQXNDLE9BQUEsQ0FBQUMsT0FBQSxHQUFBMUMsUUFBQTtBQUFBMkMsTUFBQSxDQUFBRixPQUFBLEdBQUFBLE9BQUEsQ0FBQUMsT0FBQSJ9","map":{"version":3,"names":["_sequelize","require","_default","sequelize","DataTypes","products","Model","associate","models","hasMany","orderitem","as","foreignKey","belongsTo","users","reviews","init","id","allowNull","primaryKey","type","UUID","defaultValue","UUIDV4","images","ARRAY","STRING","name","description","quantity","INTEGER","sellerId","references","model","key","exp_date","DATE","available","BOOLEAN","price","DOUBLE","category","modelName","exports","default","module"],"sourceRoot":"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/database/models/","sources":["products.js"],"sourcesContent":["import { Model } from 'sequelize';\n\n/**\n * exporting the user model and it's features.\n * @param {Object} sequelize\n * @param {Object} DataTypes\n * @returns {Object} the model for user\n */\nexport default (sequelize, DataTypes) => {\n  // eslint-disable-next-line require-jsdoc\n  class products extends Model {\n    // eslint-disable-next-line valid-jsdoc\n    /**\n     * Helper method for defining associations.\n     * This method is not a part of Sequelize lifecycle.\n     * The `models/index` file will call this method automatically.\n     */\n    static associate(models) {\n      products.hasMany(models.orderitem, {\n        as: 'orderitems',\n        foreignKey: 'productId',\n      });\n      products.belongsTo(models.users, {\n        as: 'seller',\n        foreignKey: 'sellerId',\n      });\n      products.hasMany(models.reviews, {\n        as: 'reviews',\n        foreignKey: 'productId',\n      });\n    }\n  }\n  products.init(\n    {\n      id: {\n        allowNull: false,\n        primaryKey: true,\n        type: DataTypes.UUID,\n        defaultValue: DataTypes.UUIDV4,\n      },\n      images: {\n        type: DataTypes.ARRAY(DataTypes.STRING),\n      },\n      name: {\n        allowNull: false,\n        type: DataTypes.STRING,\n      },\n      description: {\n        type: DataTypes.STRING(2000),\n      },\n      quantity: {\n        type: DataTypes.INTEGER,\n        allowNull: false,\n      },\n      sellerId: {\n        type: DataTypes.UUID,\n        allowNull: false,\n        references: {\n          model: 'users',\n          key: 'id',\n        },\n      },\n      exp_date: {\n        type: DataTypes.DATE,\n        allowNull: false,\n      },\n      available: {\n        type: DataTypes.BOOLEAN,\n        defaultValue: true,\n      },\n      price: {\n        type: DataTypes.DOUBLE,\n        allowNull: false,\n        defaultValue: 0,\n      },\n      category: {\n        type: DataTypes.INTEGER,\n        references: {\n          model: 'categories',\n          key: 'id',\n        },\n      },\n    },\n    {\n      sequelize,\n      modelName: 'products',\n    }\n  );\n  return products;\n};\n"],"mappings":";;;;;;AAAA,IAAAA,UAAA,GAAAC,OAAA;AAEA;AACA;AACA;AACA;AACA;AACA;AALA,IAAAC,QAAA,GAMeA,CAACC,SAAS,EAAEC,SAAS,KAAK;EACvC;EACA,MAAMC,QAAQ,SAASC,gBAAK,CAAC;IAC3B;IACA;AACJ;AACA;AACA;AACA;IACI,OAAOC,SAASA,CAACC,MAAM,EAAE;MACvBH,QAAQ,CAACI,OAAO,CAACD,MAAM,CAACE,SAAS,EAAE;QACjCC,EAAE,EAAE,YAAY;QAChBC,UAAU,EAAE;MACd,CAAC,CAAC;MACFP,QAAQ,CAACQ,SAAS,CAACL,MAAM,CAACM,KAAK,EAAE;QAC/BH,EAAE,EAAE,QAAQ;QACZC,UAAU,EAAE;MACd,CAAC,CAAC;MACFP,QAAQ,CAACI,OAAO,CAACD,MAAM,CAACO,OAAO,EAAE;QAC/BJ,EAAE,EAAE,SAAS;QACbC,UAAU,EAAE;MACd,CAAC,CAAC;IACJ;EACF;EACAP,QAAQ,CAACW,IAAI,CACX;IACEC,EAAE,EAAE;MACFC,SAAS,EAAE,KAAK;MAChBC,UAAU,EAAE,IAAI;MAChBC,IAAI,EAAEhB,SAAS,CAACiB,IAAI;MACpBC,YAAY,EAAElB,SAAS,CAACmB;IAC1B,CAAC;IACDC,MAAM,EAAE;MACNJ,IAAI,EAAEhB,SAAS,CAACqB,KAAK,CAACrB,SAAS,CAACsB,MAAM;IACxC,CAAC;IACDC,IAAI,EAAE;MACJT,SAAS,EAAE,KAAK;MAChBE,IAAI,EAAEhB,SAAS,CAACsB;IAClB,CAAC;IACDE,WAAW,EAAE;MACXR,IAAI,EAAEhB,SAAS,CAACsB,MAAM,CAAC,IAAI;IAC7B,CAAC;IACDG,QAAQ,EAAE;MACRT,IAAI,EAAEhB,SAAS,CAAC0B,OAAO;MACvBZ,SAAS,EAAE;IACb,CAAC;IACDa,QAAQ,EAAE;MACRX,IAAI,EAAEhB,SAAS,CAACiB,IAAI;MACpBH,SAAS,EAAE,KAAK;MAChBc,UAAU,EAAE;QACVC,KAAK,EAAE,OAAO;QACdC,GAAG,EAAE;MACP;IACF,CAAC;IACDC,QAAQ,EAAE;MACRf,IAAI,EAAEhB,SAAS,CAACgC,IAAI;MACpBlB,SAAS,EAAE;IACb,CAAC;IACDmB,SAAS,EAAE;MACTjB,IAAI,EAAEhB,SAAS,CAACkC,OAAO;MACvBhB,YAAY,EAAE;IAChB,CAAC;IACDiB,KAAK,EAAE;MACLnB,IAAI,EAAEhB,SAAS,CAACoC,MAAM;MACtBtB,SAAS,EAAE,KAAK;MAChBI,YAAY,EAAE;IAChB,CAAC;IACDmB,QAAQ,EAAE;MACRrB,IAAI,EAAEhB,SAAS,CAAC0B,OAAO;MACvBE,UAAU,EAAE;QACVC,KAAK,EAAE,YAAY;QACnBC,GAAG,EAAE;MACP;IACF;EACF,CAAC,EACD;IACE/B,SAAS;IACTuC,SAAS,EAAE;EACb,CAAC,CACF;EACD,OAAOrC,QAAQ;AACjB,CAAC;AAAAsC,OAAA,CAAAC,OAAA,GAAA1C,QAAA;AAAA2C,MAAA,CAAAF,OAAA,GAAAA,OAAA,CAAAC,OAAA"}},"mtime":1685643189445},"{\"assumptions\":{},\"sourceRoot\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/database/models/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"filename\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/database/models/reviews.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/node_modules/babel-plugin-add-module-exports/lib/index.js\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-runtime\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"regenerator\":true},\"externalDependencies\":[]},{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.21.0:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _sequelize = require(\"sequelize\");\n// const {\n//   Model\n// } = require('sequelize');\n// eslint-disable-next-line valid-jsdoc\n/**\n * Review model\n * @param {import('sequelize').Sequelize} sequelize\n * @param {import('sequelize').DataType} DataTypes\n *\n * @returns {import('sequelize').Model}\n */\nvar _default = (sequelize, DataTypes) => {\n  /**\n   * Revie Model\n   */\n  class reviews extends _sequelize.Model {\n    /**\n     * Helper method for defining associations.\n     * @param {*} models\n     * @returns {void}\n     */\n    static associate(models) {\n      reviews.belongsTo(models.products, {\n        as: 'reviews',\n        foreignKey: 'productId'\n      }, reviews.belongsTo(models.users, {\n        as: 'reviewer',\n        foreignKey: 'userId'\n      }));\n    }\n  }\n  reviews.init({\n    id: {\n      type: DataTypes.UUID,\n      defaultValue: DataTypes.UUIDV4,\n      primaryKey: true\n    },\n    productId: {\n      type: DataTypes.UUID,\n      references: {\n        model: 'products',\n        key: 'id'\n      }\n    },\n    userId: {\n      type: DataTypes.UUID,\n      references: {\n        model: 'users',\n        key: 'id'\n      }\n    },\n    feedback: DataTypes.TEXT,\n    rating: DataTypes.INTEGER\n  }, {\n    sequelize,\n    modelName: 'reviews'\n  });\n  return reviews;\n};\nexports.default = _default;\nmodule.exports = exports.default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfc2VxdWVsaXplIiwicmVxdWlyZSIsIl9kZWZhdWx0Iiwic2VxdWVsaXplIiwiRGF0YVR5cGVzIiwicmV2aWV3cyIsIk1vZGVsIiwiYXNzb2NpYXRlIiwibW9kZWxzIiwiYmVsb25nc1RvIiwicHJvZHVjdHMiLCJhcyIsImZvcmVpZ25LZXkiLCJ1c2VycyIsImluaXQiLCJpZCIsInR5cGUiLCJVVUlEIiwiZGVmYXVsdFZhbHVlIiwiVVVJRFY0IiwicHJpbWFyeUtleSIsInByb2R1Y3RJZCIsInJlZmVyZW5jZXMiLCJtb2RlbCIsImtleSIsInVzZXJJZCIsImZlZWRiYWNrIiwiVEVYVCIsInJhdGluZyIsIklOVEVHRVIiLCJtb2RlbE5hbWUiLCJleHBvcnRzIiwiZGVmYXVsdCIsIm1vZHVsZSJdLCJzb3VyY2VSb290IjoiL1VzZXJzL2FuZGVsYXJ3YW5kYS9EZXNrdG9wL2UtY29tbS10ZWFtLWJyb2dyYW1tZXJzLWJuL3NyYy9kYXRhYmFzZS9tb2RlbHMvIiwic291cmNlcyI6WyJyZXZpZXdzLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIGNvbnN0IHtcbi8vICAgTW9kZWxcbi8vIH0gPSByZXF1aXJlKCdzZXF1ZWxpemUnKTtcbmltcG9ydCB7IE1vZGVsIH0gZnJvbSAnc2VxdWVsaXplJztcblxuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIHZhbGlkLWpzZG9jXG4vKipcbiAqIFJldmlldyBtb2RlbFxuICogQHBhcmFtIHtpbXBvcnQoJ3NlcXVlbGl6ZScpLlNlcXVlbGl6ZX0gc2VxdWVsaXplXG4gKiBAcGFyYW0ge2ltcG9ydCgnc2VxdWVsaXplJykuRGF0YVR5cGV9IERhdGFUeXBlc1xuICpcbiAqIEByZXR1cm5zIHtpbXBvcnQoJ3NlcXVlbGl6ZScpLk1vZGVsfVxuICovXG5leHBvcnQgZGVmYXVsdCAoc2VxdWVsaXplLCBEYXRhVHlwZXMpID0+IHtcbiAgLyoqXG4gICAqIFJldmllIE1vZGVsXG4gICAqL1xuICBjbGFzcyByZXZpZXdzIGV4dGVuZHMgTW9kZWwge1xuICAgIC8qKlxuICAgICAqIEhlbHBlciBtZXRob2QgZm9yIGRlZmluaW5nIGFzc29jaWF0aW9ucy5cbiAgICAgKiBAcGFyYW0geyp9IG1vZGVsc1xuICAgICAqIEByZXR1cm5zIHt2b2lkfVxuICAgICAqL1xuICAgIHN0YXRpYyBhc3NvY2lhdGUobW9kZWxzKSB7XG4gICAgICByZXZpZXdzLmJlbG9uZ3NUbyhtb2RlbHMucHJvZHVjdHMsIHtcbiAgICAgICAgYXM6ICdyZXZpZXdzJyxcbiAgICAgICAgZm9yZWlnbktleTogJ3Byb2R1Y3RJZCcsXG4gICAgICB9LCByZXZpZXdzLmJlbG9uZ3NUbyhtb2RlbHMudXNlcnMsIHtcbiAgICAgICAgYXM6ICdyZXZpZXdlcicsXG4gICAgICAgIGZvcmVpZ25LZXk6ICd1c2VySWQnLFxuICAgICAgfSkpO1xuICAgIH1cbiAgfVxuICByZXZpZXdzLmluaXQoXG4gICAge1xuICAgICAgaWQ6IHtcbiAgICAgICAgdHlwZTogRGF0YVR5cGVzLlVVSUQsXG4gICAgICAgIGRlZmF1bHRWYWx1ZTogRGF0YVR5cGVzLlVVSURWNCxcbiAgICAgICAgcHJpbWFyeUtleTogdHJ1ZSxcbiAgICAgIH0sXG4gICAgICBwcm9kdWN0SWQ6IHtcbiAgICAgICAgdHlwZTogRGF0YVR5cGVzLlVVSUQsXG4gICAgICAgIHJlZmVyZW5jZXM6IHtcbiAgICAgICAgICBtb2RlbDogJ3Byb2R1Y3RzJyxcbiAgICAgICAgICBrZXk6ICdpZCcsXG4gICAgICAgIH0sXG4gICAgICB9LFxuICAgICAgdXNlcklkOiB7XG4gICAgICAgIHR5cGU6IERhdGFUeXBlcy5VVUlELFxuICAgICAgICByZWZlcmVuY2VzOiB7XG4gICAgICAgICAgbW9kZWw6ICd1c2VycycsXG4gICAgICAgICAga2V5OiAnaWQnLFxuICAgICAgICB9LFxuICAgICAgfSxcbiAgICAgIGZlZWRiYWNrOiBEYXRhVHlwZXMuVEVYVCxcbiAgICAgIHJhdGluZzogRGF0YVR5cGVzLklOVEVHRVIsXG4gICAgfSxcbiAgICB7XG4gICAgICBzZXF1ZWxpemUsXG4gICAgICBtb2RlbE5hbWU6ICdyZXZpZXdzJyxcbiAgICB9XG4gICk7XG4gIHJldHVybiByZXZpZXdzO1xufTtcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBR0EsSUFBQUEsVUFBQSxHQUFBQyxPQUFBO0FBSEE7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQU5BLElBQUFDLFFBQUEsR0FPZUEsQ0FBQ0MsU0FBUyxFQUFFQyxTQUFTLEtBQUs7RUFDdkM7QUFDRjtBQUNBO0VBQ0UsTUFBTUMsT0FBTyxTQUFTQyxnQkFBSyxDQUFDO0lBQzFCO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7SUFDSSxPQUFPQyxTQUFTQSxDQUFDQyxNQUFNLEVBQUU7TUFDdkJILE9BQU8sQ0FBQ0ksU0FBUyxDQUFDRCxNQUFNLENBQUNFLFFBQVEsRUFBRTtRQUNqQ0MsRUFBRSxFQUFFLFNBQVM7UUFDYkMsVUFBVSxFQUFFO01BQ2QsQ0FBQyxFQUFFUCxPQUFPLENBQUNJLFNBQVMsQ0FBQ0QsTUFBTSxDQUFDSyxLQUFLLEVBQUU7UUFDakNGLEVBQUUsRUFBRSxVQUFVO1FBQ2RDLFVBQVUsRUFBRTtNQUNkLENBQUMsQ0FBQyxDQUFDO0lBQ0w7RUFDRjtFQUNBUCxPQUFPLENBQUNTLElBQUksQ0FDVjtJQUNFQyxFQUFFLEVBQUU7TUFDRkMsSUFBSSxFQUFFWixTQUFTLENBQUNhLElBQUk7TUFDcEJDLFlBQVksRUFBRWQsU0FBUyxDQUFDZSxNQUFNO01BQzlCQyxVQUFVLEVBQUU7SUFDZCxDQUFDO0lBQ0RDLFNBQVMsRUFBRTtNQUNUTCxJQUFJLEVBQUVaLFNBQVMsQ0FBQ2EsSUFBSTtNQUNwQkssVUFBVSxFQUFFO1FBQ1ZDLEtBQUssRUFBRSxVQUFVO1FBQ2pCQyxHQUFHLEVBQUU7TUFDUDtJQUNGLENBQUM7SUFDREMsTUFBTSxFQUFFO01BQ05ULElBQUksRUFBRVosU0FBUyxDQUFDYSxJQUFJO01BQ3BCSyxVQUFVLEVBQUU7UUFDVkMsS0FBSyxFQUFFLE9BQU87UUFDZEMsR0FBRyxFQUFFO01BQ1A7SUFDRixDQUFDO0lBQ0RFLFFBQVEsRUFBRXRCLFNBQVMsQ0FBQ3VCLElBQUk7SUFDeEJDLE1BQU0sRUFBRXhCLFNBQVMsQ0FBQ3lCO0VBQ3BCLENBQUMsRUFDRDtJQUNFMUIsU0FBUztJQUNUMkIsU0FBUyxFQUFFO0VBQ2IsQ0FBQyxDQUNGO0VBQ0QsT0FBT3pCLE9BQU87QUFDaEIsQ0FBQztBQUFBMEIsT0FBQSxDQUFBQyxPQUFBLEdBQUE5QixRQUFBO0FBQUErQixNQUFBLENBQUFGLE9BQUEsR0FBQUEsT0FBQSxDQUFBQyxPQUFBIn0=","map":{"version":3,"names":["_sequelize","require","_default","sequelize","DataTypes","reviews","Model","associate","models","belongsTo","products","as","foreignKey","users","init","id","type","UUID","defaultValue","UUIDV4","primaryKey","productId","references","model","key","userId","feedback","TEXT","rating","INTEGER","modelName","exports","default","module"],"sourceRoot":"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/database/models/","sources":["reviews.js"],"sourcesContent":["// const {\n//   Model\n// } = require('sequelize');\nimport { Model } from 'sequelize';\n\n// eslint-disable-next-line valid-jsdoc\n/**\n * Review model\n * @param {import('sequelize').Sequelize} sequelize\n * @param {import('sequelize').DataType} DataTypes\n *\n * @returns {import('sequelize').Model}\n */\nexport default (sequelize, DataTypes) => {\n  /**\n   * Revie Model\n   */\n  class reviews extends Model {\n    /**\n     * Helper method for defining associations.\n     * @param {*} models\n     * @returns {void}\n     */\n    static associate(models) {\n      reviews.belongsTo(models.products, {\n        as: 'reviews',\n        foreignKey: 'productId',\n      }, reviews.belongsTo(models.users, {\n        as: 'reviewer',\n        foreignKey: 'userId',\n      }));\n    }\n  }\n  reviews.init(\n    {\n      id: {\n        type: DataTypes.UUID,\n        defaultValue: DataTypes.UUIDV4,\n        primaryKey: true,\n      },\n      productId: {\n        type: DataTypes.UUID,\n        references: {\n          model: 'products',\n          key: 'id',\n        },\n      },\n      userId: {\n        type: DataTypes.UUID,\n        references: {\n          model: 'users',\n          key: 'id',\n        },\n      },\n      feedback: DataTypes.TEXT,\n      rating: DataTypes.INTEGER,\n    },\n    {\n      sequelize,\n      modelName: 'reviews',\n    }\n  );\n  return reviews;\n};\n"],"mappings":";;;;;;AAGA,IAAAA,UAAA,GAAAC,OAAA;AAHA;AACA;AACA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AANA,IAAAC,QAAA,GAOeA,CAACC,SAAS,EAAEC,SAAS,KAAK;EACvC;AACF;AACA;EACE,MAAMC,OAAO,SAASC,gBAAK,CAAC;IAC1B;AACJ;AACA;AACA;AACA;IACI,OAAOC,SAASA,CAACC,MAAM,EAAE;MACvBH,OAAO,CAACI,SAAS,CAACD,MAAM,CAACE,QAAQ,EAAE;QACjCC,EAAE,EAAE,SAAS;QACbC,UAAU,EAAE;MACd,CAAC,EAAEP,OAAO,CAACI,SAAS,CAACD,MAAM,CAACK,KAAK,EAAE;QACjCF,EAAE,EAAE,UAAU;QACdC,UAAU,EAAE;MACd,CAAC,CAAC,CAAC;IACL;EACF;EACAP,OAAO,CAACS,IAAI,CACV;IACEC,EAAE,EAAE;MACFC,IAAI,EAAEZ,SAAS,CAACa,IAAI;MACpBC,YAAY,EAAEd,SAAS,CAACe,MAAM;MAC9BC,UAAU,EAAE;IACd,CAAC;IACDC,SAAS,EAAE;MACTL,IAAI,EAAEZ,SAAS,CAACa,IAAI;MACpBK,UAAU,EAAE;QACVC,KAAK,EAAE,UAAU;QACjBC,GAAG,EAAE;MACP;IACF,CAAC;IACDC,MAAM,EAAE;MACNT,IAAI,EAAEZ,SAAS,CAACa,IAAI;MACpBK,UAAU,EAAE;QACVC,KAAK,EAAE,OAAO;QACdC,GAAG,EAAE;MACP;IACF,CAAC;IACDE,QAAQ,EAAEtB,SAAS,CAACuB,IAAI;IACxBC,MAAM,EAAExB,SAAS,CAACyB;EACpB,CAAC,EACD;IACE1B,SAAS;IACT2B,SAAS,EAAE;EACb,CAAC,CACF;EACD,OAAOzB,OAAO;AAChB,CAAC;AAAA0B,OAAA,CAAAC,OAAA,GAAA9B,QAAA;AAAA+B,MAAA,CAAAF,OAAA,GAAAA,OAAA,CAAAC,OAAA"}},"mtime":1685643189445},"{\"assumptions\":{},\"sourceRoot\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/database/models/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"filename\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/database/models/subscriber.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/node_modules/babel-plugin-add-module-exports/lib/index.js\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-runtime\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"regenerator\":true},\"externalDependencies\":[]},{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.21.0:development":{"value":{"code":"\"use strict\";\n\n/* eslint-disable no-unused-vars */\n/* eslint-disable valid-jsdoc */\n/* eslint-disable require-jsdoc */\nconst {\n  Model\n} = require('sequelize');\nmodule.exports = (sequelize, DataTypes) => {\n  class Subscriber extends Model {\n    /**\n     * Helper method for defining associations.\n     * This method is not a part of Sequelize lifecycle.\n     * The `models/index` file will call this method automatically.\n     */\n    static associate(models) {\n      // define association here\n    }\n  }\n  Subscriber.init({\n    id: {\n      allowNull: false,\n      primaryKey: true,\n      type: DataTypes.UUID,\n      defaultValue: DataTypes.UUIDV4\n    },\n    verificationToken: {\n      type: DataTypes.STRING,\n      allowNull: true\n    },\n    email: DataTypes.STRING,\n    firstName: DataTypes.STRING,\n    lastName: DataTypes.STRING,\n    subscribed: DataTypes.BOOLEAN\n  }, {\n    sequelize,\n    modelName: 'Subscriber'\n  });\n  return Subscriber;\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJNb2RlbCIsInJlcXVpcmUiLCJtb2R1bGUiLCJleHBvcnRzIiwic2VxdWVsaXplIiwiRGF0YVR5cGVzIiwiU3Vic2NyaWJlciIsImFzc29jaWF0ZSIsIm1vZGVscyIsImluaXQiLCJpZCIsImFsbG93TnVsbCIsInByaW1hcnlLZXkiLCJ0eXBlIiwiVVVJRCIsImRlZmF1bHRWYWx1ZSIsIlVVSURWNCIsInZlcmlmaWNhdGlvblRva2VuIiwiU1RSSU5HIiwiZW1haWwiLCJmaXJzdE5hbWUiLCJsYXN0TmFtZSIsInN1YnNjcmliZWQiLCJCT09MRUFOIiwibW9kZWxOYW1lIl0sInNvdXJjZVJvb3QiOiIvVXNlcnMvYW5kZWxhcndhbmRhL0Rlc2t0b3AvZS1jb21tLXRlYW0tYnJvZ3JhbW1lcnMtYm4vc3JjL2RhdGFiYXNlL21vZGVscy8iLCJzb3VyY2VzIjpbInN1YnNjcmliZXIuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLyogZXNsaW50LWRpc2FibGUgbm8tdW51c2VkLXZhcnMgKi9cbi8qIGVzbGludC1kaXNhYmxlIHZhbGlkLWpzZG9jICovXG4vKiBlc2xpbnQtZGlzYWJsZSByZXF1aXJlLWpzZG9jICovXG5jb25zdCB7XG4gIE1vZGVsXG59ID0gcmVxdWlyZSgnc2VxdWVsaXplJyk7XG5cbm1vZHVsZS5leHBvcnRzID0gKHNlcXVlbGl6ZSwgRGF0YVR5cGVzKSA9PiB7XG4gIGNsYXNzIFN1YnNjcmliZXIgZXh0ZW5kcyBNb2RlbCB7XG4gICAgLyoqXG4gICAgICogSGVscGVyIG1ldGhvZCBmb3IgZGVmaW5pbmcgYXNzb2NpYXRpb25zLlxuICAgICAqIFRoaXMgbWV0aG9kIGlzIG5vdCBhIHBhcnQgb2YgU2VxdWVsaXplIGxpZmVjeWNsZS5cbiAgICAgKiBUaGUgYG1vZGVscy9pbmRleGAgZmlsZSB3aWxsIGNhbGwgdGhpcyBtZXRob2QgYXV0b21hdGljYWxseS5cbiAgICAgKi9cbiAgICBzdGF0aWMgYXNzb2NpYXRlKG1vZGVscykge1xuICAgICAgLy8gZGVmaW5lIGFzc29jaWF0aW9uIGhlcmVcbiAgICB9XG4gIH1cbiAgU3Vic2NyaWJlci5pbml0KHtcbiAgICBpZDoge1xuICAgICAgYWxsb3dOdWxsOiBmYWxzZSxcbiAgICAgIHByaW1hcnlLZXk6IHRydWUsXG4gICAgICB0eXBlOiBEYXRhVHlwZXMuVVVJRCxcbiAgICAgIGRlZmF1bHRWYWx1ZTogRGF0YVR5cGVzLlVVSURWNCxcbiAgICB9LFxuICAgIHZlcmlmaWNhdGlvblRva2VuOiB7XG4gICAgICB0eXBlOiBEYXRhVHlwZXMuU1RSSU5HLFxuICAgICAgYWxsb3dOdWxsOiB0cnVlXG4gICAgfSxcbiAgICBlbWFpbDogRGF0YVR5cGVzLlNUUklORyxcbiAgICBmaXJzdE5hbWU6IERhdGFUeXBlcy5TVFJJTkcsXG4gICAgbGFzdE5hbWU6IERhdGFUeXBlcy5TVFJJTkcsXG4gICAgc3Vic2NyaWJlZDogRGF0YVR5cGVzLkJPT0xFQU5cbiAgfSwge1xuICAgIHNlcXVlbGl6ZSxcbiAgICBtb2RlbE5hbWU6ICdTdWJzY3JpYmVyJyxcbiAgfSk7XG4gIHJldHVybiBTdWJzY3JpYmVyO1xufTtcbiJdLCJtYXBwaW5ncyI6Ijs7QUFBQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0VBQ0pBO0FBQ0YsQ0FBQyxHQUFHQyxPQUFPLENBQUMsV0FBVyxDQUFDO0FBRXhCQyxNQUFNLENBQUNDLE9BQU8sR0FBRyxDQUFDQyxTQUFTLEVBQUVDLFNBQVMsS0FBSztFQUN6QyxNQUFNQyxVQUFVLFNBQVNOLEtBQUssQ0FBQztJQUM3QjtBQUNKO0FBQ0E7QUFDQTtBQUNBO0lBQ0ksT0FBT08sU0FBU0EsQ0FBQ0MsTUFBTSxFQUFFO01BQ3ZCO0lBQUE7RUFFSjtFQUNBRixVQUFVLENBQUNHLElBQUksQ0FBQztJQUNkQyxFQUFFLEVBQUU7TUFDRkMsU0FBUyxFQUFFLEtBQUs7TUFDaEJDLFVBQVUsRUFBRSxJQUFJO01BQ2hCQyxJQUFJLEVBQUVSLFNBQVMsQ0FBQ1MsSUFBSTtNQUNwQkMsWUFBWSxFQUFFVixTQUFTLENBQUNXO0lBQzFCLENBQUM7SUFDREMsaUJBQWlCLEVBQUU7TUFDakJKLElBQUksRUFBRVIsU0FBUyxDQUFDYSxNQUFNO01BQ3RCUCxTQUFTLEVBQUU7SUFDYixDQUFDO0lBQ0RRLEtBQUssRUFBRWQsU0FBUyxDQUFDYSxNQUFNO0lBQ3ZCRSxTQUFTLEVBQUVmLFNBQVMsQ0FBQ2EsTUFBTTtJQUMzQkcsUUFBUSxFQUFFaEIsU0FBUyxDQUFDYSxNQUFNO0lBQzFCSSxVQUFVLEVBQUVqQixTQUFTLENBQUNrQjtFQUN4QixDQUFDLEVBQUU7SUFDRG5CLFNBQVM7SUFDVG9CLFNBQVMsRUFBRTtFQUNiLENBQUMsQ0FBQztFQUNGLE9BQU9sQixVQUFVO0FBQ25CLENBQUMifQ==","map":{"version":3,"names":["Model","require","module","exports","sequelize","DataTypes","Subscriber","associate","models","init","id","allowNull","primaryKey","type","UUID","defaultValue","UUIDV4","verificationToken","STRING","email","firstName","lastName","subscribed","BOOLEAN","modelName"],"sourceRoot":"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/database/models/","sources":["subscriber.js"],"sourcesContent":["/* eslint-disable no-unused-vars */\n/* eslint-disable valid-jsdoc */\n/* eslint-disable require-jsdoc */\nconst {\n  Model\n} = require('sequelize');\n\nmodule.exports = (sequelize, DataTypes) => {\n  class Subscriber extends Model {\n    /**\n     * Helper method for defining associations.\n     * This method is not a part of Sequelize lifecycle.\n     * The `models/index` file will call this method automatically.\n     */\n    static associate(models) {\n      // define association here\n    }\n  }\n  Subscriber.init({\n    id: {\n      allowNull: false,\n      primaryKey: true,\n      type: DataTypes.UUID,\n      defaultValue: DataTypes.UUIDV4,\n    },\n    verificationToken: {\n      type: DataTypes.STRING,\n      allowNull: true\n    },\n    email: DataTypes.STRING,\n    firstName: DataTypes.STRING,\n    lastName: DataTypes.STRING,\n    subscribed: DataTypes.BOOLEAN\n  }, {\n    sequelize,\n    modelName: 'Subscriber',\n  });\n  return Subscriber;\n};\n"],"mappings":";;AAAA;AACA;AACA;AACA,MAAM;EACJA;AACF,CAAC,GAAGC,OAAO,CAAC,WAAW,CAAC;AAExBC,MAAM,CAACC,OAAO,GAAG,CAACC,SAAS,EAAEC,SAAS,KAAK;EACzC,MAAMC,UAAU,SAASN,KAAK,CAAC;IAC7B;AACJ;AACA;AACA;AACA;IACI,OAAOO,SAASA,CAACC,MAAM,EAAE;MACvB;IAAA;EAEJ;EACAF,UAAU,CAACG,IAAI,CAAC;IACdC,EAAE,EAAE;MACFC,SAAS,EAAE,KAAK;MAChBC,UAAU,EAAE,IAAI;MAChBC,IAAI,EAAER,SAAS,CAACS,IAAI;MACpBC,YAAY,EAAEV,SAAS,CAACW;IAC1B,CAAC;IACDC,iBAAiB,EAAE;MACjBJ,IAAI,EAAER,SAAS,CAACa,MAAM;MACtBP,SAAS,EAAE;IACb,CAAC;IACDQ,KAAK,EAAEd,SAAS,CAACa,MAAM;IACvBE,SAAS,EAAEf,SAAS,CAACa,MAAM;IAC3BG,QAAQ,EAAEhB,SAAS,CAACa,MAAM;IAC1BI,UAAU,EAAEjB,SAAS,CAACkB;EACxB,CAAC,EAAE;IACDnB,SAAS;IACToB,SAAS,EAAE;EACb,CAAC,CAAC;EACF,OAAOlB,UAAU;AACnB,CAAC"}},"mtime":1682148437930},"{\"assumptions\":{},\"sourceRoot\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/database/models/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"filename\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/database/models/users.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/node_modules/babel-plugin-add-module-exports/lib/index.js\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-runtime\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"regenerator\":true},\"externalDependencies\":[]},{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.21.0:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _sequelize = require(\"sequelize\");\n/**\n * exporting the user model and it's features.\n * @param {Object} sequelize\n * @param {Object} DataTypes\n * @returns {Object} the model for user\n */\nvar _default = (sequelize, DataTypes) => {\n  // eslint-disable-next-line require-jsdoc\n  class users extends _sequelize.Model {\n    // eslint-disable-next-line valid-jsdoc\n    /**\n     * Helper method for defining associations.\n     * This method is not a part of Sequelize lifecycle.\n     * The `models/index` file will call this method automatically.\n     */\n    static associate(models) {\n      users.hasMany(models.notifications, {\n        as: 'notifications',\n        foreignKey: 'receiverId'\n      });\n      users.hasOne(models.carts, {\n        as: 'cart',\n        foreignKey: 'userId'\n      });\n      users.hasMany(models.order, {\n        as: 'orders',\n        foreignKey: 'buyerId'\n      });\n      users.hasMany(models.Chat, {\n        foreignKey: 'userId',\n        as: 'chats'\n      });\n      users.hasMany(models.Log, {\n        foreignKey: 'userId',\n        as: 'Log',\n        onDelete: 'CASCADE'\n      });\n      users.hasMany(models.reviews, {\n        as: 'reviews',\n        foreignKey: 'productId'\n      });\n    }\n  }\n  users.init({\n    id: {\n      allowNull: false,\n      primaryKey: true,\n      type: DataTypes.UUID,\n      defaultValue: DataTypes.UUIDV4\n    },\n    avatar: {\n      type: DataTypes.STRING(1000),\n      defaultValue: 'https://t3.ftcdn.net/jpg/01/28/56/34/360_F_128563455_bGrVZnfDCL0PxH1sU33NpOhGcCc1M7qo.jpg'\n    },\n    cover_image: {\n      type: DataTypes.STRING(1000),\n      defaultValue: 'https://cdn.conceptartempire.com/images/360/01-concept-art-video-game-item-shop.jpg'\n    },\n    username: {\n      type: DataTypes.STRING,\n      allowNull: false\n    },\n    email: {\n      type: DataTypes.STRING,\n      unique: true,\n      allowNull: false\n    },\n    password: {\n      type: DataTypes.STRING,\n      allowNull: false\n    },\n    role: {\n      type: DataTypes.STRING,\n      defaultValue: 'buyer'\n    },\n    verified: {\n      type: DataTypes.BOOLEAN,\n      defaultValue: false\n    },\n    email_token: {\n      type: DataTypes.STRING,\n      defaultValue: false\n    },\n    gender: {\n      type: DataTypes.STRING,\n      defaultValue: 'none'\n    },\n    mfa_enabled: {\n      type: DataTypes.BOOLEAN,\n      defaultValue: false\n    },\n    disabledUser: {\n      type: DataTypes.BOOLEAN,\n      defaultValue: false\n    },\n    mfa_code: {\n      type: DataTypes.INTEGER,\n      allowNull: true\n    },\n    mfa_timeout: {\n      type: DataTypes.DATE,\n      defaultValue: DataTypes.NOW\n    },\n    mustUpdatePassword: {\n      type: DataTypes.BOOLEAN,\n      defaultValue: false\n    },\n    lastTimePasswordUpdated: {\n      type: DataTypes.DATE,\n      defaultValue: Date.now()\n    }\n  }, {\n    sequelize,\n    modelName: 'users'\n  });\n  return users;\n};\nexports.default = _default;\nmodule.exports = exports.default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfc2VxdWVsaXplIiwicmVxdWlyZSIsIl9kZWZhdWx0Iiwic2VxdWVsaXplIiwiRGF0YVR5cGVzIiwidXNlcnMiLCJNb2RlbCIsImFzc29jaWF0ZSIsIm1vZGVscyIsImhhc01hbnkiLCJub3RpZmljYXRpb25zIiwiYXMiLCJmb3JlaWduS2V5IiwiaGFzT25lIiwiY2FydHMiLCJvcmRlciIsIkNoYXQiLCJMb2ciLCJvbkRlbGV0ZSIsInJldmlld3MiLCJpbml0IiwiaWQiLCJhbGxvd051bGwiLCJwcmltYXJ5S2V5IiwidHlwZSIsIlVVSUQiLCJkZWZhdWx0VmFsdWUiLCJVVUlEVjQiLCJhdmF0YXIiLCJTVFJJTkciLCJjb3Zlcl9pbWFnZSIsInVzZXJuYW1lIiwiZW1haWwiLCJ1bmlxdWUiLCJwYXNzd29yZCIsInJvbGUiLCJ2ZXJpZmllZCIsIkJPT0xFQU4iLCJlbWFpbF90b2tlbiIsImdlbmRlciIsIm1mYV9lbmFibGVkIiwiZGlzYWJsZWRVc2VyIiwibWZhX2NvZGUiLCJJTlRFR0VSIiwibWZhX3RpbWVvdXQiLCJEQVRFIiwiTk9XIiwibXVzdFVwZGF0ZVBhc3N3b3JkIiwibGFzdFRpbWVQYXNzd29yZFVwZGF0ZWQiLCJEYXRlIiwibm93IiwibW9kZWxOYW1lIiwiZXhwb3J0cyIsImRlZmF1bHQiLCJtb2R1bGUiXSwic291cmNlUm9vdCI6Ii9Vc2Vycy9hbmRlbGFyd2FuZGEvRGVza3RvcC9lLWNvbW0tdGVhbS1icm9ncmFtbWVycy1ibi9zcmMvZGF0YWJhc2UvbW9kZWxzLyIsInNvdXJjZXMiOlsidXNlcnMuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTW9kZWwgfSBmcm9tICdzZXF1ZWxpemUnO1xuXG4vKipcbiAqIGV4cG9ydGluZyB0aGUgdXNlciBtb2RlbCBhbmQgaXQncyBmZWF0dXJlcy5cbiAqIEBwYXJhbSB7T2JqZWN0fSBzZXF1ZWxpemVcbiAqIEBwYXJhbSB7T2JqZWN0fSBEYXRhVHlwZXNcbiAqIEByZXR1cm5zIHtPYmplY3R9IHRoZSBtb2RlbCBmb3IgdXNlclxuICovXG5leHBvcnQgZGVmYXVsdCAoc2VxdWVsaXplLCBEYXRhVHlwZXMpID0+IHtcbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIHJlcXVpcmUtanNkb2NcbiAgY2xhc3MgdXNlcnMgZXh0ZW5kcyBNb2RlbCB7XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIHZhbGlkLWpzZG9jXG4gICAgLyoqXG4gICAgICogSGVscGVyIG1ldGhvZCBmb3IgZGVmaW5pbmcgYXNzb2NpYXRpb25zLlxuICAgICAqIFRoaXMgbWV0aG9kIGlzIG5vdCBhIHBhcnQgb2YgU2VxdWVsaXplIGxpZmVjeWNsZS5cbiAgICAgKiBUaGUgYG1vZGVscy9pbmRleGAgZmlsZSB3aWxsIGNhbGwgdGhpcyBtZXRob2QgYXV0b21hdGljYWxseS5cbiAgICAgKi9cbiAgICBzdGF0aWMgYXNzb2NpYXRlKG1vZGVscykge1xuICAgICAgdXNlcnMuaGFzTWFueShtb2RlbHMubm90aWZpY2F0aW9ucywgeyBhczogJ25vdGlmaWNhdGlvbnMnLCBmb3JlaWduS2V5OiAncmVjZWl2ZXJJZCcgfSk7XG4gICAgICB1c2Vycy5oYXNPbmUobW9kZWxzLmNhcnRzLCB7IGFzOiAnY2FydCcsIGZvcmVpZ25LZXk6ICd1c2VySWQnIH0pO1xuICAgICAgdXNlcnMuaGFzTWFueShtb2RlbHMub3JkZXIsIHsgYXM6ICdvcmRlcnMnLCBmb3JlaWduS2V5OiAnYnV5ZXJJZCcgfSk7XG4gICAgICB1c2Vycy5oYXNNYW55KG1vZGVscy5DaGF0LCB7XG4gICAgICAgIGZvcmVpZ25LZXk6ICd1c2VySWQnLFxuICAgICAgICBhczogJ2NoYXRzJyxcbiAgICAgIH0pO1xuICAgICAgdXNlcnMuaGFzTWFueShtb2RlbHMuTG9nLCB7XG4gICAgICAgIGZvcmVpZ25LZXk6ICd1c2VySWQnLFxuICAgICAgICBhczogJ0xvZycsXG4gICAgICAgIG9uRGVsZXRlOiAnQ0FTQ0FERScsXG4gICAgICB9KTtcbiAgICAgIHVzZXJzLmhhc01hbnkobW9kZWxzLnJldmlld3MsIHtcbiAgICAgICAgYXM6ICdyZXZpZXdzJyxcbiAgICAgICAgZm9yZWlnbktleTogJ3Byb2R1Y3RJZCcsXG4gICAgICB9KTtcbiAgICB9XG4gIH1cbiAgdXNlcnMuaW5pdChcbiAgICB7XG4gICAgICBpZDoge1xuICAgICAgICBhbGxvd051bGw6IGZhbHNlLFxuICAgICAgICBwcmltYXJ5S2V5OiB0cnVlLFxuICAgICAgICB0eXBlOiBEYXRhVHlwZXMuVVVJRCxcbiAgICAgICAgZGVmYXVsdFZhbHVlOiBEYXRhVHlwZXMuVVVJRFY0LFxuICAgICAgfSxcbiAgICAgIGF2YXRhcjoge1xuICAgICAgICB0eXBlOiBEYXRhVHlwZXMuU1RSSU5HKDEwMDApLFxuICAgICAgICBkZWZhdWx0VmFsdWU6ICdodHRwczovL3QzLmZ0Y2RuLm5ldC9qcGcvMDEvMjgvNTYvMzQvMzYwX0ZfMTI4NTYzNDU1X2JHclZabmZEQ0wwUHhIMXNVMzNOcE9oR2NDYzFNN3FvLmpwZydcbiAgICAgIH0sXG4gICAgICBjb3Zlcl9pbWFnZToge1xuICAgICAgICB0eXBlOiBEYXRhVHlwZXMuU1RSSU5HKDEwMDApLFxuICAgICAgICBkZWZhdWx0VmFsdWU6ICdodHRwczovL2Nkbi5jb25jZXB0YXJ0ZW1waXJlLmNvbS9pbWFnZXMvMzYwLzAxLWNvbmNlcHQtYXJ0LXZpZGVvLWdhbWUtaXRlbS1zaG9wLmpwZydcbiAgICAgIH0sXG4gICAgICB1c2VybmFtZToge1xuICAgICAgICB0eXBlOiBEYXRhVHlwZXMuU1RSSU5HLFxuICAgICAgICBhbGxvd051bGw6IGZhbHNlLFxuICAgICAgfSxcbiAgICAgIGVtYWlsOiB7XG4gICAgICAgIHR5cGU6IERhdGFUeXBlcy5TVFJJTkcsXG4gICAgICAgIHVuaXF1ZTogdHJ1ZSxcbiAgICAgICAgYWxsb3dOdWxsOiBmYWxzZSxcbiAgICAgIH0sXG4gICAgICBwYXNzd29yZDoge1xuICAgICAgICB0eXBlOiBEYXRhVHlwZXMuU1RSSU5HLFxuICAgICAgICBhbGxvd051bGw6IGZhbHNlLFxuICAgICAgfSxcbiAgICAgIHJvbGU6IHtcbiAgICAgICAgdHlwZTogRGF0YVR5cGVzLlNUUklORyxcbiAgICAgICAgZGVmYXVsdFZhbHVlOiAnYnV5ZXInLFxuICAgICAgfSxcbiAgICAgIHZlcmlmaWVkOiB7XG4gICAgICAgIHR5cGU6IERhdGFUeXBlcy5CT09MRUFOLFxuICAgICAgICBkZWZhdWx0VmFsdWU6IGZhbHNlLFxuICAgICAgfSxcbiAgICAgIGVtYWlsX3Rva2VuOiB7XG4gICAgICAgIHR5cGU6IERhdGFUeXBlcy5TVFJJTkcsXG4gICAgICAgIGRlZmF1bHRWYWx1ZTogZmFsc2UsXG4gICAgICB9LFxuICAgICAgZ2VuZGVyOiB7XG4gICAgICAgIHR5cGU6IERhdGFUeXBlcy5TVFJJTkcsXG4gICAgICAgIGRlZmF1bHRWYWx1ZTogJ25vbmUnLFxuICAgICAgfSxcbiAgICAgIG1mYV9lbmFibGVkOiB7XG4gICAgICAgIHR5cGU6IERhdGFUeXBlcy5CT09MRUFOLFxuICAgICAgICBkZWZhdWx0VmFsdWU6IGZhbHNlLFxuICAgICAgfSxcbiAgICAgIGRpc2FibGVkVXNlcjoge1xuICAgICAgICB0eXBlOiBEYXRhVHlwZXMuQk9PTEVBTixcbiAgICAgICAgZGVmYXVsdFZhbHVlOiBmYWxzZSxcbiAgICAgIH0sXG4gICAgICBtZmFfY29kZToge1xuICAgICAgICB0eXBlOiBEYXRhVHlwZXMuSU5URUdFUixcbiAgICAgICAgYWxsb3dOdWxsOiB0cnVlLFxuICAgICAgfSxcbiAgICAgIG1mYV90aW1lb3V0OiB7XG4gICAgICAgIHR5cGU6IERhdGFUeXBlcy5EQVRFLFxuICAgICAgICBkZWZhdWx0VmFsdWU6IERhdGFUeXBlcy5OT1csXG4gICAgICB9LFxuICAgICAgbXVzdFVwZGF0ZVBhc3N3b3JkOiB7XG4gICAgICAgIHR5cGU6IERhdGFUeXBlcy5CT09MRUFOLFxuICAgICAgICBkZWZhdWx0VmFsdWU6IGZhbHNlLFxuICAgICAgfSxcbiAgICAgIGxhc3RUaW1lUGFzc3dvcmRVcGRhdGVkOiB7XG4gICAgICAgIHR5cGU6IERhdGFUeXBlcy5EQVRFLFxuICAgICAgICBkZWZhdWx0VmFsdWU6IERhdGUubm93KCksXG4gICAgICB9XG4gICAgfSxcbiAgICB7XG4gICAgICBzZXF1ZWxpemUsXG4gICAgICBtb2RlbE5hbWU6ICd1c2VycycsXG4gICAgfVxuICApO1xuICByZXR1cm4gdXNlcnM7XG59O1xuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7QUFBQSxJQUFBQSxVQUFBLEdBQUFDLE9BQUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFMQSxJQUFBQyxRQUFBLEdBTWVBLENBQUNDLFNBQVMsRUFBRUMsU0FBUyxLQUFLO0VBQ3ZDO0VBQ0EsTUFBTUMsS0FBSyxTQUFTQyxnQkFBSyxDQUFDO0lBQ3hCO0lBQ0E7QUFDSjtBQUNBO0FBQ0E7QUFDQTtJQUNJLE9BQU9DLFNBQVNBLENBQUNDLE1BQU0sRUFBRTtNQUN2QkgsS0FBSyxDQUFDSSxPQUFPLENBQUNELE1BQU0sQ0FBQ0UsYUFBYSxFQUFFO1FBQUVDLEVBQUUsRUFBRSxlQUFlO1FBQUVDLFVBQVUsRUFBRTtNQUFhLENBQUMsQ0FBQztNQUN0RlAsS0FBSyxDQUFDUSxNQUFNLENBQUNMLE1BQU0sQ0FBQ00sS0FBSyxFQUFFO1FBQUVILEVBQUUsRUFBRSxNQUFNO1FBQUVDLFVBQVUsRUFBRTtNQUFTLENBQUMsQ0FBQztNQUNoRVAsS0FBSyxDQUFDSSxPQUFPLENBQUNELE1BQU0sQ0FBQ08sS0FBSyxFQUFFO1FBQUVKLEVBQUUsRUFBRSxRQUFRO1FBQUVDLFVBQVUsRUFBRTtNQUFVLENBQUMsQ0FBQztNQUNwRVAsS0FBSyxDQUFDSSxPQUFPLENBQUNELE1BQU0sQ0FBQ1EsSUFBSSxFQUFFO1FBQ3pCSixVQUFVLEVBQUUsUUFBUTtRQUNwQkQsRUFBRSxFQUFFO01BQ04sQ0FBQyxDQUFDO01BQ0ZOLEtBQUssQ0FBQ0ksT0FBTyxDQUFDRCxNQUFNLENBQUNTLEdBQUcsRUFBRTtRQUN4QkwsVUFBVSxFQUFFLFFBQVE7UUFD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","map":{"version":3,"names":["_sequelize","require","_default","sequelize","DataTypes","users","Model","associate","models","hasMany","notifications","as","foreignKey","hasOne","carts","order","Chat","Log","onDelete","reviews","init","id","allowNull","primaryKey","type","UUID","defaultValue","UUIDV4","avatar","STRING","cover_image","username","email","unique","password","role","verified","BOOLEAN","email_token","gender","mfa_enabled","disabledUser","mfa_code","INTEGER","mfa_timeout","DATE","NOW","mustUpdatePassword","lastTimePasswordUpdated","Date","now","modelName","exports","default","module"],"sourceRoot":"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/database/models/","sources":["users.js"],"sourcesContent":["import { Model } from 'sequelize';\n\n/**\n * exporting the user model and it's features.\n * @param {Object} sequelize\n * @param {Object} DataTypes\n * @returns {Object} the model for user\n */\nexport default (sequelize, DataTypes) => {\n  // eslint-disable-next-line require-jsdoc\n  class users extends Model {\n    // eslint-disable-next-line valid-jsdoc\n    /**\n     * Helper method for defining associations.\n     * This method is not a part of Sequelize lifecycle.\n     * The `models/index` file will call this method automatically.\n     */\n    static associate(models) {\n      users.hasMany(models.notifications, { as: 'notifications', foreignKey: 'receiverId' });\n      users.hasOne(models.carts, { as: 'cart', foreignKey: 'userId' });\n      users.hasMany(models.order, { as: 'orders', foreignKey: 'buyerId' });\n      users.hasMany(models.Chat, {\n        foreignKey: 'userId',\n        as: 'chats',\n      });\n      users.hasMany(models.Log, {\n        foreignKey: 'userId',\n        as: 'Log',\n        onDelete: 'CASCADE',\n      });\n      users.hasMany(models.reviews, {\n        as: 'reviews',\n        foreignKey: 'productId',\n      });\n    }\n  }\n  users.init(\n    {\n      id: {\n        allowNull: false,\n        primaryKey: true,\n        type: DataTypes.UUID,\n        defaultValue: DataTypes.UUIDV4,\n      },\n      avatar: {\n        type: DataTypes.STRING(1000),\n        defaultValue: 'https://t3.ftcdn.net/jpg/01/28/56/34/360_F_128563455_bGrVZnfDCL0PxH1sU33NpOhGcCc1M7qo.jpg'\n      },\n      cover_image: {\n        type: DataTypes.STRING(1000),\n        defaultValue: 'https://cdn.conceptartempire.com/images/360/01-concept-art-video-game-item-shop.jpg'\n      },\n      username: {\n        type: DataTypes.STRING,\n        allowNull: false,\n      },\n      email: {\n        type: DataTypes.STRING,\n        unique: true,\n        allowNull: false,\n      },\n      password: {\n        type: DataTypes.STRING,\n        allowNull: false,\n      },\n      role: {\n        type: DataTypes.STRING,\n        defaultValue: 'buyer',\n      },\n      verified: {\n        type: DataTypes.BOOLEAN,\n        defaultValue: false,\n      },\n      email_token: {\n        type: DataTypes.STRING,\n        defaultValue: false,\n      },\n      gender: {\n        type: DataTypes.STRING,\n        defaultValue: 'none',\n      },\n      mfa_enabled: {\n        type: DataTypes.BOOLEAN,\n        defaultValue: false,\n      },\n      disabledUser: {\n        type: DataTypes.BOOLEAN,\n        defaultValue: false,\n      },\n      mfa_code: {\n        type: DataTypes.INTEGER,\n        allowNull: true,\n      },\n      mfa_timeout: {\n        type: DataTypes.DATE,\n        defaultValue: DataTypes.NOW,\n      },\n      mustUpdatePassword: {\n        type: DataTypes.BOOLEAN,\n        defaultValue: false,\n      },\n      lastTimePasswordUpdated: {\n        type: DataTypes.DATE,\n        defaultValue: Date.now(),\n      }\n    },\n    {\n      sequelize,\n      modelName: 'users',\n    }\n  );\n  return users;\n};\n"],"mappings":"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"}},"mtime":1685643189446},"{\"assumptions\":{},\"sourceRoot\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/database/models/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"filename\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/database/models/wishlist.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/node_modules/babel-plugin-add-module-exports/lib/index.js\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-runtime\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"regenerator\":true},\"externalDependencies\":[]},{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.21.0:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _sequelize = require(\"sequelize\");\n/**\n * exporting the user model and it's features.\n * @param {Object} sequelize\n * @param {Object} DataTypes\n * @returns {Object} the model for wish\n */\nvar _default = (sequelize, DataTypes) => {\n  // eslint-disable-next-line require-jsdoc\n  class wishlists extends _sequelize.Model {\n    // eslint-disable-next-line valid-jsdoc\n    /**\n     * Helper method for defining associations.\n     * This method is not a part of Sequelize lifecycle.\n     * The `models/index` file will call this method automatically.\n     */\n    static associate() {\n      // define association here\n    }\n  }\n  wishlists.init({\n    id: {\n      allowNull: false,\n      primaryKey: true,\n      type: DataTypes.UUID,\n      defaultValue: DataTypes.UUIDV4\n    },\n    userId: {\n      type: DataTypes.UUID,\n      allowNull: false,\n      references: {\n        model: 'users',\n        key: 'id'\n      }\n    },\n    productId: {\n      type: DataTypes.INTEGER,\n      references: {\n        model: 'products',\n        key: 'id'\n      }\n    }\n  }, {\n    sequelize,\n    modelName: 'wishlists'\n  });\n  return wishlists;\n};\nexports.default = _default;\nmodule.exports = exports.default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfc2VxdWVsaXplIiwicmVxdWlyZSIsIl9kZWZhdWx0Iiwic2VxdWVsaXplIiwiRGF0YVR5cGVzIiwid2lzaGxpc3RzIiwiTW9kZWwiLCJhc3NvY2lhdGUiLCJpbml0IiwiaWQiLCJhbGxvd051bGwiLCJwcmltYXJ5S2V5IiwidHlwZSIsIlVVSUQiLCJkZWZhdWx0VmFsdWUiLCJVVUlEVjQiLCJ1c2VySWQiLCJyZWZlcmVuY2VzIiwibW9kZWwiLCJrZXkiLCJwcm9kdWN0SWQiLCJJTlRFR0VSIiwibW9kZWxOYW1lIiwiZXhwb3J0cyIsImRlZmF1bHQiLCJtb2R1bGUiXSwic291cmNlUm9vdCI6Ii9Vc2Vycy9hbmRlbGFyd2FuZGEvRGVza3RvcC9lLWNvbW0tdGVhbS1icm9ncmFtbWVycy1ibi9zcmMvZGF0YWJhc2UvbW9kZWxzLyIsInNvdXJjZXMiOlsid2lzaGxpc3QuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTW9kZWwgfSBmcm9tICdzZXF1ZWxpemUnO1xuXG4vKipcbiAqIGV4cG9ydGluZyB0aGUgdXNlciBtb2RlbCBhbmQgaXQncyBmZWF0dXJlcy5cbiAqIEBwYXJhbSB7T2JqZWN0fSBzZXF1ZWxpemVcbiAqIEBwYXJhbSB7T2JqZWN0fSBEYXRhVHlwZXNcbiAqIEByZXR1cm5zIHtPYmplY3R9IHRoZSBtb2RlbCBmb3Igd2lzaFxuICovXG5leHBvcnQgZGVmYXVsdCAoc2VxdWVsaXplLCBEYXRhVHlwZXMpID0+IHtcbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIHJlcXVpcmUtanNkb2NcbiAgY2xhc3Mgd2lzaGxpc3RzIGV4dGVuZHMgTW9kZWwge1xuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSB2YWxpZC1qc2RvY1xuICAgIC8qKlxuICAgICAqIEhlbHBlciBtZXRob2QgZm9yIGRlZmluaW5nIGFzc29jaWF0aW9ucy5cbiAgICAgKiBUaGlzIG1ldGhvZCBpcyBub3QgYSBwYXJ0IG9mIFNlcXVlbGl6ZSBsaWZlY3ljbGUuXG4gICAgICogVGhlIGBtb2RlbHMvaW5kZXhgIGZpbGUgd2lsbCBjYWxsIHRoaXMgbWV0aG9kIGF1dG9tYXRpY2FsbHkuXG4gICAgICovXG4gICAgc3RhdGljIGFzc29jaWF0ZSgpIHtcbiAgICAgIC8vIGRlZmluZSBhc3NvY2lhdGlvbiBoZXJlXG4gICAgfVxuICB9XG4gIHdpc2hsaXN0cy5pbml0KHtcbiAgICBpZDoge1xuICAgICAgYWxsb3dOdWxsOiBmYWxzZSxcbiAgICAgIHByaW1hcnlLZXk6IHRydWUsXG4gICAgICB0eXBlOiBEYXRhVHlwZXMuVVVJRCxcbiAgICAgIGRlZmF1bHRWYWx1ZTogRGF0YVR5cGVzLlVVSURWNFxuICAgIH0sXG4gICAgdXNlcklkOiB7XG4gICAgICB0eXBlOiBEYXRhVHlwZXMuVVVJRCxcbiAgICAgIGFsbG93TnVsbDogZmFsc2UsXG4gICAgICByZWZlcmVuY2VzOiB7XG4gICAgICAgIG1vZGVsOiAndXNlcnMnLFxuICAgICAgICBrZXk6ICdpZCdcbiAgICAgIH1cbiAgICB9LFxuICAgIHByb2R1Y3RJZDoge1xuICAgICAgdHlwZTogRGF0YVR5cGVzLklOVEVHRVIsXG4gICAgICByZWZlcmVuY2VzOiB7XG4gICAgICAgIG1vZGVsOiAncHJvZHVjdHMnLFxuICAgICAgICBrZXk6ICdpZCdcbiAgICAgIH1cbiAgICB9LFxuICB9LCB7XG4gICAgc2VxdWVsaXplLFxuICAgIG1vZGVsTmFtZTogJ3dpc2hsaXN0cydcbiAgfSk7XG4gIHJldHVybiB3aXNobGlzdHM7XG59O1xuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7QUFBQSxJQUFBQSxVQUFBLEdBQUFDLE9BQUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFMQSxJQUFBQyxRQUFBLEdBTWVBLENBQUNDLFNBQVMsRUFBRUMsU0FBUyxLQUFLO0VBQ3ZDO0VBQ0EsTUFBTUMsU0FBUyxTQUFTQyxnQkFBSyxDQUFDO0lBQzVCO0lBQ0E7QUFDSjtBQUNBO0FBQ0E7QUFDQTtJQUNJLE9BQU9DLFNBQVNBLENBQUEsRUFBRztNQUNqQjtJQUFBO0VBRUo7RUFDQUYsU0FBUyxDQUFDRyxJQUFJLENBQUM7SUFDYkMsRUFBRSxFQUFFO01BQ0ZDLFNBQVMsRUFBRSxLQUFLO01BQ2hCQyxVQUFVLEVBQUUsSUFBSTtNQUNoQkMsSUFBSSxFQUFFUixTQUFTLENBQUNTLElBQUk7TUFDcEJDLFlBQVksRUFBRVYsU0FBUyxDQUFDVztJQUMxQixDQUFDO0lBQ0RDLE1BQU0sRUFBRTtNQUNOSixJQUFJLEVBQUVSLFNBQVMsQ0FBQ1MsSUFBSTtNQUNwQkgsU0FBUyxFQUFFLEtBQUs7TUFDaEJPLFVBQVUsRUFBRTtRQUNWQyxLQUFLLEVBQUUsT0FBTztRQUNkQyxHQUFHLEVBQUU7TUFDUDtJQUNGLENBQUM7SUFDREMsU0FBUyxFQUFFO01BQ1RSLElBQUksRUFBRVIsU0FBUyxDQUFDaUIsT0FBTztNQUN2QkosVUFBVSxFQUFFO1FBQ1ZDLEtBQUssRUFBRSxVQUFVO1FBQ2pCQyxHQUFHLEVBQUU7TUFDUDtJQUNGO0VBQ0YsQ0FBQyxFQUFFO0lBQ0RoQixTQUFTO0lBQ1RtQixTQUFTLEVBQUU7RUFDYixDQUFDLENBQUM7RUFDRixPQUFPakIsU0FBUztBQUNsQixDQUFDO0FBQUFrQixPQUFBLENBQUFDLE9BQUEsR0FBQXRCLFFBQUE7QUFBQXVCLE1BQUEsQ0FBQUYsT0FBQSxHQUFBQSxPQUFBLENBQUFDLE9BQUEifQ==","map":{"version":3,"names":["_sequelize","require","_default","sequelize","DataTypes","wishlists","Model","associate","init","id","allowNull","primaryKey","type","UUID","defaultValue","UUIDV4","userId","references","model","key","productId","INTEGER","modelName","exports","default","module"],"sourceRoot":"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/database/models/","sources":["wishlist.js"],"sourcesContent":["import { Model } from 'sequelize';\n\n/**\n * exporting the user model and it's features.\n * @param {Object} sequelize\n * @param {Object} DataTypes\n * @returns {Object} the model for wish\n */\nexport default (sequelize, DataTypes) => {\n  // eslint-disable-next-line require-jsdoc\n  class wishlists extends Model {\n    // eslint-disable-next-line valid-jsdoc\n    /**\n     * Helper method for defining associations.\n     * This method is not a part of Sequelize lifecycle.\n     * The `models/index` file will call this method automatically.\n     */\n    static associate() {\n      // define association here\n    }\n  }\n  wishlists.init({\n    id: {\n      allowNull: false,\n      primaryKey: true,\n      type: DataTypes.UUID,\n      defaultValue: DataTypes.UUIDV4\n    },\n    userId: {\n      type: DataTypes.UUID,\n      allowNull: false,\n      references: {\n        model: 'users',\n        key: 'id'\n      }\n    },\n    productId: {\n      type: DataTypes.INTEGER,\n      references: {\n        model: 'products',\n        key: 'id'\n      }\n    },\n  }, {\n    sequelize,\n    modelName: 'wishlists'\n  });\n  return wishlists;\n};\n"],"mappings":";;;;;;AAAA,IAAAA,UAAA,GAAAC,OAAA;AAEA;AACA;AACA;AACA;AACA;AACA;AALA,IAAAC,QAAA,GAMeA,CAACC,SAAS,EAAEC,SAAS,KAAK;EACvC;EACA,MAAMC,SAAS,SAASC,gBAAK,CAAC;IAC5B;IACA;AACJ;AACA;AACA;AACA;IACI,OAAOC,SAASA,CAAA,EAAG;MACjB;IAAA;EAEJ;EACAF,SAAS,CAACG,IAAI,CAAC;IACbC,EAAE,EAAE;MACFC,SAAS,EAAE,KAAK;MAChBC,UAAU,EAAE,IAAI;MAChBC,IAAI,EAAER,SAAS,CAACS,IAAI;MACpBC,YAAY,EAAEV,SAAS,CAACW;IAC1B,CAAC;IACDC,MAAM,EAAE;MACNJ,IAAI,EAAER,SAAS,CAACS,IAAI;MACpBH,SAAS,EAAE,KAAK;MAChBO,UAAU,EAAE;QACVC,KAAK,EAAE,OAAO;QACdC,GAAG,EAAE;MACP;IACF,CAAC;IACDC,SAAS,EAAE;MACTR,IAAI,EAAER,SAAS,CAACiB,OAAO;MACvBJ,UAAU,EAAE;QACVC,KAAK,EAAE,UAAU;QACjBC,GAAG,EAAE;MACP;IACF;EACF,CAAC,EAAE;IACDhB,SAAS;IACTmB,SAAS,EAAE;EACb,CAAC,CAAC;EACF,OAAOjB,SAAS;AAClB,CAAC;AAAAkB,OAAA,CAAAC,OAAA,GAAAtB,QAAA;AAAAuB,MAAA,CAAAF,OAAA,GAAAA,OAAA,CAAAC,OAAA"}},"mtime":1682148437930},"{\"assumptions\":{},\"sourceRoot\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"filename\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/app.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/node_modules/babel-plugin-add-module-exports/lib/index.js\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-runtime\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"regenerator\":true},\"externalDependencies\":[]},{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.21.0:development":{"value":{"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _express = _interopRequireDefault(require(\"express\"));\nvar _dotenv = _interopRequireDefault(require(\"dotenv\"));\nvar _cors = _interopRequireDefault(require(\"cors\"));\nvar _morgan = _interopRequireDefault(require(\"morgan\"));\nvar _swaggerUiExpress = _interopRequireDefault(require(\"swagger-ui-express\"));\nvar _passport = _interopRequireDefault(require(\"passport\"));\nvar _expressSession = _interopRequireDefault(require(\"express-session\"));\nvar _path = _interopRequireDefault(require(\"path\"));\nvar _index = _interopRequireDefault(require(\"./routes/index\"));\nvar _swagger = _interopRequireDefault(require(\"./configs/swagger\"));\nvar _passwordExpiration = _interopRequireDefault(require(\"./middlewares/passwordExpiration\"));\nvar _productExpAll = _interopRequireDefault(require(\"./middlewares/productExpAll\"));\nvar _route = _interopRequireDefault(require(\"./pgbackup/route\"));\nrequire(\"./pgbackup/backup\");\nvar _subscriber = require(\"./controllers/subscriber.controller\");\n/* eslint-disable no-unused-vars */\n/* eslint-disable import/no-named-as-default */\n/* eslint-disable import/no-extraneous-dependencies */\n\n_dotenv.default.config();\n// eslint-disable-next-line prefer-const\nlet options = {\n  validatorUrl: null,\n  oauth: {\n    clientId: process.env.CLIENT_ID,\n    clientSecret: process.env.CLIENT_SECRET,\n    appName: 'project-966788183307'\n  }\n};\nconst app = (0, _express.default)();\n_passwordExpiration.default.start();\n(0, _productExpAll.default)();\n_subscriber.SubscriberController.sendNewsletter();\napp.use(_express.default.json());\napp.use((0, _morgan.default)('dev'));\napp.use((0, _expressSession.default)({\n  secret: process.env.CAT,\n  resave: false,\n  saveUninitialized: true\n}));\napp.use(_passport.default.initialize());\napp.use(_passport.default.session());\napp.use('/public', _express.default.static('public'));\napp.use((0, _cors.default)());\napp.use(_express.default.urlencoded({\n  extended: false\n}));\napp.use('/api-docs', _swaggerUiExpress.default.serve, _swaggerUiExpress.default.setup(_swagger.default, false, options));\napp.use('/database', _route.default);\napp.use(_index.default);\napp.use((req, res) => {\n  res.status(404).json({\n    message: 'Page not found'\n  });\n});\nvar _default = app;\nexports.default = _default;\nmodule.exports = exports.default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfZXhwcmVzcyIsIl9pbnRlcm9wUmVxdWlyZURlZmF1bHQiLCJyZXF1aXJlIiwiX2RvdGVudiIsIl9jb3JzIiwiX21vcmdhbiIsIl9zd2FnZ2VyVWlFeHByZXNzIiwiX3Bhc3Nwb3J0IiwiX2V4cHJlc3NTZXNzaW9uIiwiX3BhdGgiLCJfaW5kZXgiLCJfc3dhZ2dlciIsIl9wYXNzd29yZEV4cGlyYXRpb24iLCJfcHJvZHVjdEV4cEFsbCIsIl9yb3V0ZSIsIl9zdWJzY3JpYmVyIiwiZW52IiwiY29uZmlnIiwib3B0aW9ucyIsInZhbGlkYXRvclVybCIsIm9hdXRoIiwiY2xpZW50SWQiLCJwcm9jZXNzIiwiQ0xJRU5UX0lEIiwiY2xpZW50U2VjcmV0IiwiQ0xJRU5UX1NFQ1JFVCIsImFwcE5hbWUiLCJhcHAiLCJleHByZXNzIiwiY2hlY2tQYXNzd29yZEV4cGlyYXRpb25Dcm9uSm9iIiwic3RhcnQiLCJiZWZvcmVDaGVja0V4cGlyZWRQcm9kdWN0IiwiU3Vic2NyaWJlckNvbnRyb2xsZXIiLCJzZW5kTmV3c2xldHRlciIsInVzZSIsImpzb24iLCJtb3JnYW4iLCJzZXNzaW9uIiwic2VjcmV0IiwiQ0FUIiwicmVzYXZlIiwic2F2ZVVuaW5pdGlhbGl6ZWQiLCJwYXNzcG9ydCIsImluaXRpYWxpemUiLCJzdGF0aWMiLCJjb3JzIiwidXJsZW5jb2RlZCIsImV4dGVuZGVkIiwic3dhZ2dlclVJIiwic2VydmUiLCJzZXR1cCIsInN3YWdnZXIiLCJkYlJvdXRlcyIsImFsbHJvdXRlcyIsInJlcSIsInJlcyIsInN0YXR1cyIsIm1lc3NhZ2UiLCJfZGVmYXVsdCIsImV4cG9ydHMiLCJkZWZhdWx0IiwibW9kdWxlIl0sInNvdXJjZVJvb3QiOiIvVXNlcnMvYW5kZWxhcndhbmRhL0Rlc2t0b3AvZS1jb21tLXRlYW0tYnJvZ3JhbW1lcnMtYm4vc3JjLyIsInNvdXJjZXMiOlsiYXBwLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qIGVzbGludC1kaXNhYmxlIG5vLXVudXNlZC12YXJzICovXG4vKiBlc2xpbnQtZGlzYWJsZSBpbXBvcnQvbm8tbmFtZWQtYXMtZGVmYXVsdCAqL1xuLyogZXNsaW50LWRpc2FibGUgaW1wb3J0L25vLWV4dHJhbmVvdXMtZGVwZW5kZW5jaWVzICovXG5pbXBvcnQgZXhwcmVzcyBmcm9tICdleHByZXNzJztcbmltcG9ydCBlbnYgZnJvbSAnZG90ZW52JztcbmltcG9ydCBjb3JzIGZyb20gJ2NvcnMnO1xuaW1wb3J0IG1vcmdhbiBmcm9tICdtb3JnYW4nO1xuaW1wb3J0IHN3YWdnZXJVSSBmcm9tICdzd2FnZ2VyLXVpLWV4cHJlc3MnO1xuaW1wb3J0IHBhc3Nwb3J0IGZyb20gJ3Bhc3Nwb3J0JztcbmltcG9ydCBzZXNzaW9uIGZyb20gJ2V4cHJlc3Mtc2Vzc2lvbic7XG5pbXBvcnQgcGF0aCBmcm9tICdwYXRoJztcbmltcG9ydCBhbGxyb3V0ZXMgZnJvbSAnLi9yb3V0ZXMvaW5kZXgnO1xuaW1wb3J0IHN3YWdnZXIgZnJvbSAnLi9jb25maWdzL3N3YWdnZXInO1xuaW1wb3J0IGNoZWNrUGFzc3dvcmRFeHBpcmF0aW9uQ3JvbkpvYiBmcm9tICcuL21pZGRsZXdhcmVzL3Bhc3N3b3JkRXhwaXJhdGlvbic7XG5pbXBvcnQgYmVmb3JlQ2hlY2tFeHBpcmVkUHJvZHVjdCBmcm9tICcuL21pZGRsZXdhcmVzL3Byb2R1Y3RFeHBBbGwnO1xuaW1wb3J0IGRiUm91dGVzIGZyb20gJy4vcGdiYWNrdXAvcm91dGUnO1xuaW1wb3J0ICcuL3BnYmFja3VwL2JhY2t1cCc7XG5pbXBvcnQgeyBTdWJzY3JpYmVyQ29udHJvbGxlciB9IGZyb20gJy4vY29udHJvbGxlcnMvc3Vic2NyaWJlci5jb250cm9sbGVyJztcblxuZW52LmNvbmZpZygpO1xuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIHByZWZlci1jb25zdFxubGV0IG9wdGlvbnMgPSB7XG4gIHZhbGlkYXRvclVybDogbnVsbCxcbiAgb2F1dGg6IHtcbiAgICBjbGllbnRJZDogcHJvY2Vzcy5lbnYuQ0xJRU5UX0lELFxuICAgIGNsaWVudFNlY3JldDogcHJvY2Vzcy5lbnYuQ0xJRU5UX1NFQ1JFVCxcbiAgICBhcHBOYW1lOiAncHJvamVjdC05NjY3ODgxODMzMDcnLFxuICB9LFxufTtcblxuY29uc3QgYXBwID0gZXhwcmVzcygpO1xuY2hlY2tQYXNzd29yZEV4cGlyYXRpb25Dcm9uSm9iLnN0YXJ0KCk7XG5iZWZvcmVDaGVja0V4cGlyZWRQcm9kdWN0KCk7XG5TdWJzY3JpYmVyQ29udHJvbGxlci5zZW5kTmV3c2xldHRlcigpO1xuYXBwLnVzZShleHByZXNzLmpzb24oKSk7XG5hcHAudXNlKG1vcmdhbignZGV2JykpO1xuYXBwLnVzZShcbiAgc2Vzc2lvbih7XG4gICAgc2VjcmV0OiBwcm9jZXNzLmVudi5DQVQsXG4gICAgcmVzYXZlOiBmYWxzZSxcbiAgICBzYXZlVW5pbml0aWFsaXplZDogdHJ1ZSxcbiAgfSlcbik7XG5hcHAudXNlKHBhc3Nwb3J0LmluaXRpYWxpemUoKSk7XG5hcHAudXNlKHBhc3Nwb3J0LnNlc3Npb24oKSk7XG5hcHAudXNlKCcvcHVibGljJywgZXhwcmVzcy5zdGF0aWMoJ3B1YmxpYycpKTtcbmFwcC51c2UoY29ycygpKTtcbmFwcC51c2UoZXhwcmVzcy51cmxlbmNvZGVkKHsgZXh0ZW5kZWQ6IGZhbHNlIH0pKTtcbmFwcC51c2UoJy9hcGktZG9jcycsIHN3YWdnZXJVSS5zZXJ2ZSwgc3dhZ2dlclVJLnNldHVwKHN3YWdnZXIsIGZhbHNlLCBvcHRpb25zKSk7XG5hcHAudXNlKCcvZGF0YWJhc2UnLCBkYlJvdXRlcyk7XG5hcHAudXNlKGFsbHJvdXRlcyk7XG5hcHAudXNlKChyZXEsIHJlcykgPT4ge1xuICByZXMuc3RhdHVzKDQwNCkuanNvbih7IG1lc3NhZ2U6ICdQYWdlIG5vdCBmb3VuZCcgfSk7XG59KTtcblxuZXhwb3J0IGRlZmF1bHQgYXBwO1xuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBR0EsSUFBQUEsUUFBQSxHQUFBQyxzQkFBQSxDQUFBQyxPQUFBO0FBQ0EsSUFBQUMsT0FBQSxH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","map":{"version":3,"names":["_express","_interopRequireDefault","require","_dotenv","_cors","_morgan","_swaggerUiExpress","_passport","_expressSession","_path","_index","_swagger","_passwordExpiration","_productExpAll","_route","_subscriber","env","config","options","validatorUrl","oauth","clientId","process","CLIENT_ID","clientSecret","CLIENT_SECRET","appName","app","express","checkPasswordExpirationCronJob","start","beforeCheckExpiredProduct","SubscriberController","sendNewsletter","use","json","morgan","session","secret","CAT","resave","saveUninitialized","passport","initialize","static","cors","urlencoded","extended","swaggerUI","serve","setup","swagger","dbRoutes","allroutes","req","res","status","message","_default","exports","default","module"],"sourceRoot":"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/","sources":["app.js"],"sourcesContent":["/* eslint-disable no-unused-vars */\n/* eslint-disable import/no-named-as-default */\n/* eslint-disable import/no-extraneous-dependencies */\nimport express from 'express';\nimport env from 'dotenv';\nimport cors from 'cors';\nimport morgan from 'morgan';\nimport swaggerUI from 'swagger-ui-express';\nimport passport from 'passport';\nimport session from 'express-session';\nimport path from 'path';\nimport allroutes from './routes/index';\nimport swagger from './configs/swagger';\nimport checkPasswordExpirationCronJob from './middlewares/passwordExpiration';\nimport beforeCheckExpiredProduct from './middlewares/productExpAll';\nimport dbRoutes from './pgbackup/route';\nimport './pgbackup/backup';\nimport { SubscriberController } from './controllers/subscriber.controller';\n\nenv.config();\n// eslint-disable-next-line prefer-const\nlet options = {\n  validatorUrl: null,\n  oauth: {\n    clientId: process.env.CLIENT_ID,\n    clientSecret: process.env.CLIENT_SECRET,\n    appName: 'project-966788183307',\n  },\n};\n\nconst app = express();\ncheckPasswordExpirationCronJob.start();\nbeforeCheckExpiredProduct();\nSubscriberController.sendNewsletter();\napp.use(express.json());\napp.use(morgan('dev'));\napp.use(\n  session({\n    secret: process.env.CAT,\n    resave: false,\n    saveUninitialized: true,\n  })\n);\napp.use(passport.initialize());\napp.use(passport.session());\napp.use('/public', express.static('public'));\napp.use(cors());\napp.use(express.urlencoded({ extended: false }));\napp.use('/api-docs', swaggerUI.serve, swaggerUI.setup(swagger, false, options));\napp.use('/database', dbRoutes);\napp.use(allroutes);\napp.use((req, res) => {\n  res.status(404).json({ message: 'Page not found' });\n});\n\nexport default app;\n"],"mappings":";;;;;;;AAGA,IAAAA,QAAA,GAAAC,sBAAA,CAAAC,OAAA;AACA,IAAAC,OAAA,GAAAF,sBAAA,CAAAC,OAAA;AACA,IAAAE,KAAA,GAAAH,sBAAA,CAAAC,OAAA;AACA,IAAAG,OAAA,GAAAJ,sBAAA,CAAAC,OAAA;AACA,IAAAI,iBAAA,GAAAL,sBAAA,CAAAC,OAAA;AACA,IAAAK,SAAA,GAAAN,sBAAA,CAAAC,OAAA;AACA,IAAAM,eAAA,GAAAP,sBAAA,CAAAC,OAAA;AACA,IAAAO,KAAA,GAAAR,sBAAA,CAAAC,OAAA;AACA,IAAAQ,MAAA,GAAAT,sBAAA,CAAAC,OAAA;AACA,IAAAS,QAAA,GAAAV,sBAAA,CAAAC,OAAA;AACA,IAAAU,mBAAA,GAAAX,sBAAA,CAAAC,OAAA;AACA,IAAAW,cAAA,GAAAZ,sBAAA,CAAAC,OAAA;AACA,IAAAY,MAAA,GAAAb,sBAAA,CAAAC,OAAA;AACAA,OAAA;AACA,IAAAa,WAAA,GAAAb,OAAA;AAjBA;AACA;AACA;;AAiBAc,eAAG,CAACC,MAAM,EAAE;AACZ;AACA,IAAIC,OAAO,GAAG;EACZC,YAAY,EAAE,IAAI;EAClBC,KAAK,EAAE;IACLC,QAAQ,EAAEC,OAAO,CAACN,GAAG,CAACO,SAAS;IAC/BC,YAAY,EAAEF,OAAO,CAACN,GAAG,CAACS,aAAa;IACvCC,OAAO,EAAE;EACX;AACF,CAAC;AAED,MAAMC,GAAG,GAAG,IAAAC,gBAAO,GAAE;AACrBC,2BAA8B,CAACC,KAAK,EAAE;AACtC,IAAAC,sBAAyB,GAAE;AAC3BC,gCAAoB,CAACC,cAAc,EAAE;AACrCN,GAAG,CAACO,GAAG,CAACN,gBAAO,CAACO,IAAI,EAAE,CAAC;AACvBR,GAAG,CAACO,GAAG,CAAC,IAAAE,eAAM,EAAC,KAAK,CAAC,CAAC;AACtBT,GAAG,CAACO,GAAG,CACL,IAAAG,uBAAO,EAAC;EACNC,MAAM,EAAEhB,OAAO,CAACN,GAAG,CAACuB,GAAG;EACvBC,MAAM,EAAE,KAAK;EACbC,iBAAiB,EAAE;AACrB,CAAC,CAAC,CACH;AACDd,GAAG,CAACO,GAAG,CAACQ,iBAAQ,CAACC,UAAU,EAAE,CAAC;AAC9BhB,GAAG,CAACO,GAAG,CAACQ,iBAAQ,CAACL,OAAO,EAAE,CAAC;AAC3BV,GAAG,CAACO,GAAG,CAAC,SAAS,EAAEN,gBAAO,CAACgB,MAAM,CAAC,QAAQ,CAAC,CAAC;AAC5CjB,GAAG,CAACO,GAAG,CAAC,IAAAW,aAAI,GAAE,CAAC;AACflB,GAAG,CAACO,GAAG,CAACN,gBAAO,CAACkB,UAAU,CAAC;EAAEC,QAAQ,EAAE;AAAM,CAAC,CAAC,CAAC;AAChDpB,GAAG,CAACO,GAAG,CAAC,WAAW,EAAEc,yBAAS,CAACC,KAAK,EAAED,yBAAS,CAACE,KAAK,CAACC,gBAAO,EAAE,KAAK,EAAEjC,OAAO,CAAC,CAAC;AAC/ES,GAAG,CAACO,GAAG,CAAC,WAAW,EAAEkB,cAAQ,CAAC;AAC9BzB,GAAG,CAACO,GAAG,CAACmB,cAAS,CAAC;AAClB1B,GAAG,CAACO,GAAG,CAAC,CAACoB,GAAG,EAAEC,GAAG,KAAK;EACpBA,GAAG,CAACC,MAAM,CAAC,GAAG,CAAC,CAACrB,IAAI,CAAC;IAAEsB,OAAO,EAAE;EAAiB,CAAC,CAAC;AACrD,CAAC,CAAC;AAAC,IAAAC,QAAA,GAEY/B,GAAG;AAAAgC,OAAA,CAAAC,OAAA,GAAAF,QAAA;AAAAG,MAAA,CAAAF,OAAA,GAAAA,OAAA,CAAAC,OAAA"}},"mtime":1685646470561},"{\"assumptions\":{},\"sourceRoot\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/routes/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"filename\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/routes/index.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/node_modules/babel-plugin-add-module-exports/lib/index.js\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-runtime\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"regenerator\":true},\"externalDependencies\":[]},{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.21.0:development":{"value":{"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _express = _interopRequireDefault(require(\"express\"));\nvar _controllers = _interopRequireDefault(require(\"../controllers\"));\nvar _users = _interopRequireDefault(require(\"./users\"));\nvar _products = _interopRequireDefault(require(\"./products\"));\nvar _wishlist = _interopRequireDefault(require(\"./wishlist\"));\nvar _cart = _interopRequireDefault(require(\"./cart\"));\nvar _reviews = _interopRequireDefault(require(\"./reviews.routes\"));\nvar _checkout = _interopRequireDefault(require(\"./checkout\"));\nvar _chat = _interopRequireDefault(require(\"./chat\"));\nvar _notification = _interopRequireDefault(require(\"./notification\"));\nvar _payment = _interopRequireDefault(require(\"./payment\"));\nvar _order = _interopRequireDefault(require(\"./order\"));\nvar _logs = _interopRequireDefault(require(\"./logs\"));\nvar _subscribe = _interopRequireDefault(require(\"./subscribe\"));\nconst routes = (0, _express.default)();\nroutes.get('/home', _controllers.default.welcome);\nroutes.use('/users', _users.default);\nroutes.use('/products', _products.default);\nroutes.use('/wishlist', _wishlist.default);\nroutes.use('/reviews', _reviews.default);\nroutes.use('/cart', _cart.default);\nroutes.use('/checkout', _checkout.default);\nroutes.use('/chat', _chat.default);\nroutes.use('/notification', _notification.default);\nroutes.use('/payment', _payment.default);\nroutes.use('/order', _order.default);\nroutes.use('/logs', _logs.default);\nroutes.use('/subscriber', _subscribe.default);\nroutes.get('auth/auth/google/callback', (req, res) => res.redirect('/users/redirect'));\nvar _default = routes;\nexports.default = _default;\nmodule.exports = exports.default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfZXhwcmVzcyIsIl9pbnRlcm9wUmVxdWlyZURlZmF1bHQiLCJyZXF1aXJlIiwiX2NvbnRyb2xsZXJzIiwiX3VzZXJzIiwiX3Byb2R1Y3RzIiwiX3dpc2hsaXN0IiwiX2NhcnQiLCJfcmV2aWV3cyIsIl9jaGVja291dCIsIl9jaGF0IiwiX25vdGlmaWNhdGlvbiIsIl9wYXltZW50IiwiX29yZGVyIiwiX2xvZ3MiLCJfc3Vic2NyaWJlIiwicm91dGVzIiwiZXhwcmVzcyIsImdldCIsIkhvbWVDb250cm9sbGVycyIsIndlbGNvbWUiLCJ1c2UiLCJ1c2VycyIsInByb2R1Y3RzIiwid2lzaGxpc3QiLCJyZXZpZXdzIiwiY2FydCIsImNoZWNrb3V0Um91dGVzIiwiY2hhdCIsIm5vdGlmaWNhdGlvbiIsInBheW1lbnQiLCJvcmRlclJvdXRlcyIsImxvZ3Nyb3V0ZXMiLCJzdWJyb3V0ZXMiLCJyZXEiLCJyZXMiLCJyZWRpcmVjdCIsIl9kZWZhdWx0IiwiZXhwb3J0cyIsImRlZmF1bHQiLCJtb2R1bGUiXSwic291cmNlUm9vdCI6Ii9Vc2Vycy9hbmRlbGFyd2FuZGEvRGVza3RvcC9lLWNvbW0tdGVhbS1icm9ncmFtbWVycy1ibi9zcmMvcm91dGVzLyIsInNvdXJjZXMiOlsiaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGV4cHJlc3MgZnJvbSAnZXhwcmVzcyc7XG5pbXBvcnQgSG9tZUNvbnRyb2xsZXJzIGZyb20gJy4uL2NvbnRyb2xsZXJzJztcbmltcG9ydCB1c2VycyBmcm9tICcuL3VzZXJzJztcbmltcG9ydCBwcm9kdWN0cyBmcm9tICcuL3Byb2R1Y3RzJztcbmltcG9ydCB3aXNobGlzdCBmcm9tICcuL3dpc2hsaXN0JztcbmltcG9ydCBjYXJ0IGZyb20gJy4vY2FydCc7XG5pbXBvcnQgcmV2aWV3cyBmcm9tICcuL3Jldmlld3Mucm91dGVzJztcbmltcG9ydCBjaGVja291dFJvdXRlcyBmcm9tICcuL2NoZWNrb3V0JztcbmltcG9ydCBjaGF0IGZyb20gJy4vY2hhdCc7XG5pbXBvcnQgbm90aWZpY2F0aW9uIGZyb20gJy4vbm90aWZpY2F0aW9uJztcbmltcG9ydCBwYXltZW50IGZyb20gJy4vcGF5bWVudCc7XG5pbXBvcnQgb3JkZXJSb3V0ZXMgZnJvbSAnLi9vcmRlcic7XG5pbXBvcnQgbG9nc3JvdXRlcyBmcm9tICcuL2xvZ3MnO1xuaW1wb3J0IHN1YnJvdXRlcyBmcm9tICcuL3N1YnNjcmliZSc7XG5cbmNvbnN0IHJvdXRlcyA9IGV4cHJlc3MoKTtcblxucm91dGVzLmdldCgnL2hvbWUnLCBIb21lQ29udHJvbGxlcnMud2VsY29tZSk7XG5yb3V0ZXMudXNlKCcvdXNlcnMnLCB1c2Vycyk7XG5yb3V0ZXMudXNlKCcvcHJvZHVjdHMnLCBwcm9kdWN0cyk7XG5yb3V0ZXMudXNlKCcvd2lzaGxpc3QnLCB3aXNobGlzdCk7XG5yb3V0ZXMudXNlKCcvcmV2aWV3cycsIHJldmlld3MpO1xucm91dGVzLnVzZSgnL2NhcnQnLCBjYXJ0KTtcbnJvdXRlcy51c2UoJy9jaGVja291dCcsIGNoZWNrb3V0Um91dGVzKTtcbnJvdXRlcy51c2UoJy9jaGF0JywgY2hhdCk7XG5yb3V0ZXMudXNlKCcvbm90aWZpY2F0aW9uJywgbm90aWZpY2F0aW9uKTtcbnJvdXRlcy51c2UoJy9wYXltZW50JywgcGF5bWVudCk7XG5yb3V0ZXMudXNlKCcvb3JkZXInLCBvcmRlclJvdXRlcyk7XG5yb3V0ZXMudXNlKCcvbG9ncycsIGxvZ3Nyb3V0ZXMpO1xucm91dGVzLnVzZSgnL3N1YnNjcmliZXInLCBzdWJyb3V0ZXMpO1xucm91dGVzLmdldCgnYXV0aC9hdXRoL2dvb2dsZS9jYWxsYmFjaycsIChyZXEsIHJlcykgPT4gcmVzLnJlZGlyZWN0KCcvdXNlcnMvcmVkaXJlY3QnKSk7XG5leHBvcnQgZGVmYXVsdCByb3V0ZXM7XG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBQSxJQUFBQSxRQUFBLEdBQUFDLHNCQUFBLENBQUFDLE9BQUE7QUFDQSxJQUFBQyxZQUFBLEdBQUFGLHNCQUFBLENBQUFDLE9BQUE7QUFDQSxJQUFBRSxNQUFBLEdBQUFILHNCQUFBLENBQUFDLE9BQUE7QUFDQSxJQUFBRyxTQUFBLEdBQUFKLHNCQUFBLENBQUFDLE9BQUE7QUFDQSxJQUFBSSxTQUFBLEdBQUFMLHNCQUFBLENBQUFDLE9BQUE7QUFDQSxJQUFBSyxLQUFBLEdBQUFOLHNCQUFBLENBQUFDLE9BQUE7QUFDQSxJQUFBTSxRQUFBLEdBQUFQLHNCQUFBLENBQUFDLE9BQUE7QUFDQSxJQUFBTyxTQUFBLEdBQUFSLHNCQUFBLENBQUFDLE9BQUE7QUFDQSxJQUFBUSxLQUFBLEdBQUFULHNCQUFBLENBQUFDLE9BQUE7QUFDQSxJQUFBUyxhQUFBLEdBQUFWLHNCQUFBLENBQUFDLE9BQUE7QUFDQSxJQUFBVSxRQUFBLEdBQUFYLHNCQUFBLENBQUFDLE9BQUE7QUFDQSxJQUFBVyxNQUFBLEdBQUFaLHNCQUFBLENBQUFDLE9BQUE7QUFDQSxJQUFBWSxLQUFBLEdBQUFiLHNCQUFBLENBQUFDLE9BQUE7QUFDQSxJQUFBYSxVQUFBLEdBQUFkLHNCQUFBLENBQUFDLE9BQUE7QUFFQSxNQUFNYyxNQUFNLEdBQUcsSUFBQUMsZ0JBQU8sR0FBRTtBQUV4QkQsTUFBTSxDQUFDRSxHQUFHLENBQUMsT0FBTyxFQUFFQyxvQkFBZSxDQUFDQyxPQUFPLENBQUM7QUFDNUNKLE1BQU0sQ0FBQ0ssR0FBRyxDQUFDLFFBQVEsRUFBRUMsY0FBSyxDQUFDO0FBQzNCTixNQUFNLENBQUNLLEdBQUcsQ0FBQyxXQUFXLEVBQUVFLGlCQUFRLENBQUM7QUFDakNQLE1BQU0sQ0FBQ0ssR0FBRyxDQUFDLFdBQVcsRUFBRUcsaUJBQVEsQ0FBQztBQUNqQ1IsTUFBTSxDQUFDSyxHQUFHLENBQUMsVUFBVSxFQUFFSSxnQkFBTyxDQUFDO0FBQy9CVCxNQUFNLENBQUNLLEdBQUcsQ0FBQyxPQUFPLEVBQUVLLGFBQUksQ0FBQztBQUN6QlYsTUFBTSxDQUFDSyxHQUFHLENBQUMsV0FBVyxFQUFFTSxpQkFBYyxDQUFDO0FBQ3ZDWCxNQUFNLENBQUNLLEdBQUcsQ0FBQyxPQUFPLEVBQUVPLGFBQUksQ0FBQztBQUN6QlosTUFBTSxDQUFDSyxHQUFHLENBQUMsZUFBZSxFQUFFUSxxQkFBWSxDQUFDO0FBQ3pDYixNQUFNLENBQUNLLEdBQUcsQ0FBQyxVQUFVLEVBQUVTLGdCQUFPLENBQUM7QUFDL0JkLE1BQU0sQ0FBQ0ssR0FBRyxDQUFDLFFBQVEsRUFBRVUsY0FBVyxDQUFDO0FBQ2pDZixNQUFNLENBQUNLLEdBQUcsQ0FBQyxPQUFPLEVBQUVXLGFBQVUsQ0FBQztBQUMvQmhCLE1BQU0sQ0FBQ0ssR0FBRyxDQUFDLGFBQWEsRUFBRVksa0JBQVMsQ0FBQztBQUNwQ2pCLE1BQU0sQ0FBQ0UsR0FBRyxDQUFDLDJCQUEyQixFQUFFLENBQUNnQixHQUFHLEVBQUVDLEdBQUcsS0FBS0EsR0FBRyxDQUFDQyxRQUFRLENBQUMsaUJBQWlCLENBQUMsQ0FBQztBQUFDLElBQUFDLFFBQUEsR0FDeEVyQixNQUFNO0FBQUFzQixPQUFBLENBQUFDLE9BQUEsR0FBQUYsUUFBQTtBQUFBRyxNQUFBLENBQUFGLE9BQUEsR0FBQUEsT0FBQSxDQUFBQyxPQUFBIn0=","map":{"version":3,"names":["_express","_interopRequireDefault","require","_controllers","_users","_products","_wishlist","_cart","_reviews","_checkout","_chat","_notification","_payment","_order","_logs","_subscribe","routes","express","get","HomeControllers","welcome","use","users","products","wishlist","reviews","cart","checkoutRoutes","chat","notification","payment","orderRoutes","logsroutes","subroutes","req","res","redirect","_default","exports","default","module"],"sourceRoot":"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/routes/","sources":["index.js"],"sourcesContent":["import express from 'express';\nimport HomeControllers from '../controllers';\nimport users from './users';\nimport products from './products';\nimport wishlist from './wishlist';\nimport cart from './cart';\nimport reviews from './reviews.routes';\nimport checkoutRoutes from './checkout';\nimport chat from './chat';\nimport notification from './notification';\nimport payment from './payment';\nimport orderRoutes from './order';\nimport logsroutes from './logs';\nimport subroutes from './subscribe';\n\nconst routes = express();\n\nroutes.get('/home', HomeControllers.welcome);\nroutes.use('/users', users);\nroutes.use('/products', products);\nroutes.use('/wishlist', wishlist);\nroutes.use('/reviews', reviews);\nroutes.use('/cart', cart);\nroutes.use('/checkout', checkoutRoutes);\nroutes.use('/chat', chat);\nroutes.use('/notification', notification);\nroutes.use('/payment', payment);\nroutes.use('/order', orderRoutes);\nroutes.use('/logs', logsroutes);\nroutes.use('/subscriber', subroutes);\nroutes.get('auth/auth/google/callback', (req, res) => res.redirect('/users/redirect'));\nexport default routes;\n"],"mappings":";;;;;;;AAAA,IAAAA,QAAA,GAAAC,sBAAA,CAAAC,OAAA;AACA,IAAAC,YAAA,GAAAF,sBAAA,CAAAC,OAAA;AACA,IAAAE,MAAA,GAAAH,sBAAA,CAAAC,OAAA;AACA,IAAAG,SAAA,GAAAJ,sBAAA,CAAAC,OAAA;AACA,IAAAI,SAAA,GAAAL,sBAAA,CAAAC,OAAA;AACA,IAAAK,KAAA,GAAAN,sBAAA,CAAAC,OAAA;AACA,IAAAM,QAAA,GAAAP,sBAAA,CAAAC,OAAA;AACA,IAAAO,SAAA,GAAAR,sBAAA,CAAAC,OAAA;AACA,IAAAQ,KAAA,GAAAT,sBAAA,CAAAC,OAAA;AACA,IAAAS,aAAA,GAAAV,sBAAA,CAAAC,OAAA;AACA,IAAAU,QAAA,GAAAX,sBAAA,CAAAC,OAAA;AACA,IAAAW,MAAA,GAAAZ,sBAAA,CAAAC,OAAA;AACA,IAAAY,KAAA,GAAAb,sBAAA,CAAAC,OAAA;AACA,IAAAa,UAAA,GAAAd,sBAAA,CAAAC,OAAA;AAEA,MAAMc,MAAM,GAAG,IAAAC,gBAAO,GAAE;AAExBD,MAAM,CAACE,GAAG,CAAC,OAAO,EAAEC,oBAAe,CAACC,OAAO,CAAC;AAC5CJ,MAAM,CAACK,GAAG,CAAC,QAAQ,EAAEC,cAAK,CAAC;AAC3BN,MAAM,CAACK,GAAG,CAAC,WAAW,EAAEE,iBAAQ,CAAC;AACjCP,MAAM,CAACK,GAAG,CAAC,WAAW,EAAEG,iBAAQ,CAAC;AACjCR,MAAM,CAACK,GAAG,CAAC,UAAU,EAAEI,gBAAO,CAAC;AAC/BT,MAAM,CAACK,GAAG,CAAC,OAAO,EAAEK,aAAI,CAAC;AACzBV,MAAM,CAACK,GAAG,CAAC,WAAW,EAAEM,iBAAc,CAAC;AACvCX,MAAM,CAACK,GAAG,CAAC,OAAO,EAAEO,aAAI,CAAC;AACzBZ,MAAM,CAACK,GAAG,CAAC,eAAe,EAAEQ,qBAAY,CAAC;AACzCb,MAAM,CAACK,GAAG,CAAC,UAAU,EAAES,gBAAO,CAAC;AAC/Bd,MAAM,CAACK,GAAG,CAAC,QAAQ,EAAEU,cAAW,CAAC;AACjCf,MAAM,CAACK,GAAG,CAAC,OAAO,EAAEW,aAAU,CAAC;AAC/BhB,MAAM,CAACK,GAAG,CAAC,aAAa,EAAEY,kBAAS,CAAC;AACpCjB,MAAM,CAACE,GAAG,CAAC,2BAA2B,EAAE,CAACgB,GAAG,EAAEC,GAAG,KAAKA,GAAG,CAACC,QAAQ,CAAC,iBAAiB,CAAC,CAAC;AAAC,IAAAC,QAAA,GACxErB,MAAM;AAAAsB,OAAA,CAAAC,OAAA,GAAAF,QAAA;AAAAG,MAAA,CAAAF,OAAA,GAAAA,OAAA,CAAAC,OAAA"}},"mtime":1685643189466},"{\"assumptions\":{},\"sourceRoot\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/controllers/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"filename\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/controllers/index.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/node_modules/babel-plugin-add-module-exports/lib/index.js\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-runtime\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"regenerator\":true},\"externalDependencies\":[]},{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.21.0:development":{"value":{"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _services = _interopRequireDefault(require(\"../services\"));\n// eslint-disable-next-line require-jsdoc\nclass HomeControllers {\n  // eslint-disable-next-line require-jsdoc\n  static async welcome(req, res) {\n    const message = await _services.default.home();\n    res.status(200).json(message);\n  }\n}\nexports.default = HomeControllers;\nmodule.exports = exports.default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfc2VydmljZXMiLCJfaW50ZXJvcFJlcXVpcmVEZWZhdWx0IiwicmVxdWlyZSIsIkhvbWVDb250cm9sbGVycyIsIndlbGNvbWUiLCJyZXEiLCJyZXMiLCJtZXNzYWdlIiwiSG9tZVNlcnZpY2VzIiwiaG9tZSIsInN0YXR1cyIsImpzb24iLCJleHBvcnRzIiwiZGVmYXVsdCIsIm1vZHVsZSJdLCJzb3VyY2VSb290IjoiL1VzZXJzL2FuZGVsYXJ3YW5kYS9EZXNrdG9wL2UtY29tbS10ZWFtLWJyb2dyYW1tZXJzLWJuL3NyYy9jb250cm9sbGVycy8iLCJzb3VyY2VzIjpbImluZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBIb21lU2VydmljZXMgZnJvbSAnLi4vc2VydmljZXMnO1xuXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgcmVxdWlyZS1qc2RvY1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgSG9tZUNvbnRyb2xsZXJzIHtcbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIHJlcXVpcmUtanNkb2NcbiAgc3RhdGljIGFzeW5jIHdlbGNvbWUocmVxLCByZXMpIHtcbiAgICBjb25zdCBtZXNzYWdlID0gYXdhaXQgSG9tZVNlcnZpY2VzLmhvbWUoKTtcbiAgICByZXMuc3RhdHVzKDIwMCkuanNvbihtZXNzYWdlKTtcbiAgfVxufVxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQUEsSUFBQUEsU0FBQSxHQUFBQyxzQkFBQSxDQUFBQyxPQUFBO0FBRUE7QUFDZSxNQUFNQyxlQUFlLENBQUM7RUFDbkM7RUFDQSxhQUFhQyxPQUFPQSxDQUFDQyxHQUFHLEVBQUVDLEdBQUcsRUFBRTtJQUM3QixNQUFNQyxPQUFPLEdBQUcsTUFBTUMsaUJBQVksQ0FBQ0MsSUFBSSxFQUFFO0lBQ3pDSCxHQUFHLENBQUNJLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQ0MsSUFBSSxDQUFDSixPQUFPLENBQUM7RUFDL0I7QUFDRjtBQUFDSyxPQUFBLENBQUFDLE9BQUEsR0FBQVYsZUFBQTtBQUFBVyxNQUFBLENBQUFGLE9BQUEsR0FBQUEsT0FBQSxDQUFBQyxPQUFBIn0=","map":{"version":3,"names":["_services","_interopRequireDefault","require","HomeControllers","welcome","req","res","message","HomeServices","home","status","json","exports","default","module"],"sourceRoot":"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/controllers/","sources":["index.js"],"sourcesContent":["import HomeServices from '../services';\n\n// eslint-disable-next-line require-jsdoc\nexport default class HomeControllers {\n  // eslint-disable-next-line require-jsdoc\n  static async welcome(req, res) {\n    const message = await HomeServices.home();\n    res.status(200).json(message);\n  }\n}\n"],"mappings":";;;;;;;AAAA,IAAAA,SAAA,GAAAC,sBAAA,CAAAC,OAAA;AAEA;AACe,MAAMC,eAAe,CAAC;EACnC;EACA,aAAaC,OAAOA,CAACC,GAAG,EAAEC,GAAG,EAAE;IAC7B,MAAMC,OAAO,GAAG,MAAMC,iBAAY,CAACC,IAAI,EAAE;IACzCH,GAAG,CAACI,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAACJ,OAAO,CAAC;EAC/B;AACF;AAACK,OAAA,CAAAC,OAAA,GAAAV,eAAA;AAAAW,MAAA,CAAAF,OAAA,GAAAA,OAAA,CAAAC,OAAA"}},"mtime":1682148437921},"{\"assumptions\":{},\"sourceRoot\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/services/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"filename\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/services/index.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/node_modules/babel-plugin-add-module-exports/lib/index.js\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-runtime\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"regenerator\":true},\"externalDependencies\":[]},{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.21.0:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n/**\n *\n */\nclass HomeServices {\n  // eslint-disable-next-line require-jsdoc\n  static async home() {\n    return {\n      message: 'welcome'\n    };\n  }\n}\nexports.default = HomeServices;\nmodule.exports = exports.default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJIb21lU2VydmljZXMiLCJob21lIiwibWVzc2FnZSIsImV4cG9ydHMiLCJkZWZhdWx0IiwibW9kdWxlIl0sInNvdXJjZVJvb3QiOiIvVXNlcnMvYW5kZWxhcndhbmRhL0Rlc2t0b3AvZS1jb21tLXRlYW0tYnJvZ3JhbW1lcnMtYm4vc3JjL3NlcnZpY2VzLyIsInNvdXJjZXMiOlsiaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKlxuICovXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBIb21lU2VydmljZXMge1xuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgcmVxdWlyZS1qc2RvY1xuICBzdGF0aWMgYXN5bmMgaG9tZSgpIHtcbiAgICByZXR1cm4geyBtZXNzYWdlOiAnd2VsY29tZScgfTtcbiAgfVxufVxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDZSxNQUFNQSxZQUFZLENBQUM7RUFDaEM7RUFDQSxhQUFhQyxJQUFJQSxDQUFBLEVBQUc7SUFDbEIsT0FBTztNQUFFQyxPQUFPLEVBQUU7SUFBVSxDQUFDO0VBQy9CO0FBQ0Y7QUFBQ0MsT0FBQSxDQUFBQyxPQUFBLEdBQUFKLFlBQUE7QUFBQUssTUFBQSxDQUFBRixPQUFBLEdBQUFBLE9BQUEsQ0FBQUMsT0FBQSJ9","map":{"version":3,"names":["HomeServices","home","message","exports","default","module"],"sourceRoot":"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/services/","sources":["index.js"],"sourcesContent":["/**\n *\n */\nexport default class HomeServices {\n  // eslint-disable-next-line require-jsdoc\n  static async home() {\n    return { message: 'welcome' };\n  }\n}\n"],"mappings":";;;;;;AAAA;AACA;AACA;AACe,MAAMA,YAAY,CAAC;EAChC;EACA,aAAaC,IAAIA,CAAA,EAAG;IAClB,OAAO;MAAEC,OAAO,EAAE;IAAU,CAAC;EAC/B;AACF;AAACC,OAAA,CAAAC,OAAA,GAAAJ,YAAA;AAAAK,MAAA,CAAAF,OAAA,GAAAA,OAAA,CAAAC,OAAA"}},"mtime":1682148437961},"{\"assumptions\":{},\"sourceRoot\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/routes/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"filename\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/routes/users.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/node_modules/babel-plugin-add-module-exports/lib/index.js\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-runtime\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"regenerator\":true},\"externalDependencies\":[]},{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.21.0:development":{"value":{"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _express = _interopRequireDefault(require(\"express\"));\nvar _passport = _interopRequireDefault(require(\"passport\"));\nvar _users = _interopRequireDefault(require(\"../controllers/users.controllers\"));\nvar _checkUserExist = _interopRequireWildcard(require(\"../middlewares/checkUserExist\"));\nvar _status = _interopRequireDefault(require(\"../controllers/status.controller\"));\nvar _loginValidate = _interopRequireDefault(require(\"../middlewares/loginValidate\"));\nvar _profileValidate = _interopRequireDefault(require(\"../middlewares/profileValidate\"));\nvar _mfaValidate = _interopRequireDefault(require(\"../middlewares/mfaValidate\"));\nvar _signupValidate = _interopRequireDefault(require(\"../middlewares/signupValidate\"));\nvar _Checkrole = _interopRequireDefault(require(\"../middlewares/Checkrole\"));\nvar _verifyToken = _interopRequireDefault(require(\"../middlewares/verifyToken\"));\nvar _fields = require(\"../validations/fields.validation\");\nvar _requestValidator = _interopRequireDefault(require(\"../middlewares/requestValidator\"));\nvar _disable = _interopRequireDefault(require(\"../validations/disable.validation\"));\nvar _admin = _interopRequireDefault(require(\"../controllers/admin.controller\"));\nvar _jwt = require(\"../helpers/jwt\");\nvar _oauth = require(\"../controllers/oauth.controller\");\nvar _multer = _interopRequireDefault(require(\"../configs/multer\"));\nvar _logs = require(\"../controllers/logs.controller\");\nfunction _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== \"function\") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function (nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }\nfunction _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") { return { default: obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n/* eslint-disable import/no-duplicates */\n/* eslint-disable no-else-return */\n/* eslint-disable object-shorthand */\n/* eslint-disable comma-spacing */\n\n// eslint-disable-next-line import/no-named-as-default, import/no-named-as-default-member\n\n(0, _oauth.googlePass)();\nconst routes = _express.default.Router();\nroutes.post('/signup', _signupValidate.default, _checkUserExist.default, _users.default.signup);\nroutes.get('/verify-email/:token', _users.default.verifyEmail);\nroutes.post('/reset-password', (0, _requestValidator.default)(_fields.resetPassword), _users.default.sendResetPasswordCode);\nroutes.get('/verify-reset-password/:resetToken', _users.default.verifyResetPasswordCode);\nroutes.patch('/change-password', _verifyToken.default, _users.default.changePassword);\nroutes.patch('/create-admin/:email', _verifyToken.default, (0, _Checkrole.default)(['admin']), _users.default.CreateAdmin);\nroutes.post('/verify-mfa', _mfaValidate.default, _users.default.verifyMfaCode);\nroutes.post('/enable-mfa', _verifyToken.default, _users.default.enableMfa);\nroutes.post('/disable-mfa', _verifyToken.default, _users.default.disableMfa);\nroutes.post('/login', _loginValidate.default, _users.default.login);\nroutes.get('/profile', _verifyToken.default, _users.default.getProfile);\nroutes.patch('/profile', _verifyToken.default, _profileValidate.default, _users.default.editProfile);\nroutes.patch('/role/:email', _verifyToken.default, (0, _Checkrole.default)(['admin']), _users.default.setRole);\n\n// images\nroutes.patch('/profile/avatar', _verifyToken.default, _multer.default.single('image'), _users.default.updateAvatar);\nroutes.patch('/profile/cover-image', _verifyToken.default, _multer.default.single('image'), _users.default.updateCoverImage);\n\n// Disable account\nroutes.patch('/disable/:userId', _verifyToken.default, (0, _Checkrole.default)(['admin']), (0, _requestValidator.default)(_disable.default), _users.default.disableUser);\nroutes.get('/logout', _verifyToken.default, _users.default.logout);\n// Admin Routes\nroutes.post('/createUser', _verifyToken.default, (0, _Checkrole.default)(['admin']), _admin.default.signup);\nroutes.patch('/:id', _verifyToken.default, (0, _Checkrole.default)(['admin']), _admin.default.updateUser);\nroutes.delete('/:id', _verifyToken.default, (0, _Checkrole.default)(['admin']), _admin.default.deleteUser);\nroutes.get('/all', _verifyToken.default, (0, _Checkrole.default)(['admin']), _admin.default.getAllUsers);\nroutes.get('/logs/all', _verifyToken.default, (0, _Checkrole.default)(['admin']), _logs.getAllLogs);\n\n// Google routes\nroutes.get('/redirect', (req, res) => {\n  try {\n    if (req.query.key) {\n      const user = _jwt.Jwt.verifyToken(req.query.key);\n      return res.status(200).json({\n        message: 'Thanks for logging in',\n        user: user,\n        token: req.query.key\n      });\n    } else {\n      return res.status(401).json({\n        error: 'Unauthorized'\n      });\n    }\n  } catch (error) {\n    res.status(500).json({\n      message: error.message\n    });\n  }\n});\nroutes.get('/auth/google', _passport.default.authenticate('google', {\n  scope: ['email', 'profile']\n}));\nroutes.get('/stats', _verifyToken.default, (0, _Checkrole.default)(['seller', 'admin']), _status.default.getProductsStatus);\nroutes.get('/stats/graph/:range', _verifyToken.default, (0, _Checkrole.default)(['seller', 'admin']), _status.default.getProductsStatusGraph);\nroutes.get('/auth/google/redirect', _passport.default.authenticate('google', {\n  session: false,\n  failureRedirect: '/'\n}), _checkUserExist.checkUserByEmail, _users.default.googleAuthHandler);\nvar _default = routes;\nexports.default = _default;\nmodule.exports = exports.default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfZXhwcmVzcyIsIl9pbnRlcm9wUmVxdWlyZURlZmF1bHQiLCJyZXF1aXJlIiwiX3Bhc3Nwb3J0IiwiX3VzZXJzIiwiX2NoZWNrVXNlckV4aXN0IiwiX2ludGVyb3BSZXF1aXJlV2lsZGNhcmQiLCJfc3RhdHVzIiwiX2xvZ2luVmFsaWRhdGUiLCJfcHJvZmlsZVZhbGlkYXRlIiwiX21mYVZhbGlkYXRlIiwiX3NpZ251cFZhbGlkYXRlIiwiX0NoZWNrcm9sZSIsIl92ZXJpZnlUb2tlbiIsIl9maWVsZHMiLCJfcmVxdWVzdFZhbGlkYXRvciIsIl9kaXNhYmxlIiwiX2FkbWluIiwiX2p3dCIsIl9vYXV0aCIsIl9tdWx0ZXIiLCJfbG9ncyIsIl9nZXRSZXF1aXJlV2lsZGNhcmRDYWNoZSIsIm5vZGVJbnRlcm9wIiwiV2Vha01hcCIsImNhY2hlQmFiZWxJbnRlcm9wIiwiY2FjaGVOb2RlSW50ZXJvcCIsIm9iaiIsIl9fZXNNb2R1bGUiLCJkZWZhdWx0IiwiY2FjaGUiLCJoYXMiLCJnZXQiLCJuZXdPYmoiLCJoYXNQcm9wZXJ0eURlc2NyaXB0b3IiLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImdldE93blByb3BlcnR5RGVzY3JpcHRvciIsImtleSIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwiY2FsbCIsImRlc2MiLCJzZXQiLCJnb29nbGVQYXNzIiwicm91dGVzIiwiZXhwcmVzcyIsIlJvdXRlciIsInBvc3QiLCJzaWdudXBWYXRpZGF0ZSIsImNoZWNrVXNlckV4aXN0IiwiVXNlcnMiLCJzaWdudXAiLCJ2ZXJpZnlFbWFpbCIsInJlcXVlc3RWYWxpZGF0b3IiLCJyZXNldFBhc3N3b3JkIiwic2VuZFJlc2V0UGFzc3dvcmRDb2RlIiwidmVyaWZ5UmVzZXRQYXNzd29yZENvZGUiLCJwYXRjaCIsImlzQXV0aGVudGljYXRlZCIsImNoYW5nZVBhc3N3b3JkIiwiY2hlY2tSb2xlIiwiQ3JlYXRlQWRtaW4iLCJtZmFWYWxpZGF0ZSIsInZlcmlmeU1mYUNvZGUiLCJlbmFibGVNZmEiLCJkaXNhYmxlTWZhIiwibG9naW5WYWxpZGF0ZSIsImxvZ2luIiwiZ2V0UHJvZmlsZSIsInByb2ZpbGVWYXRpZGF0ZSIsImVkaXRQcm9maWxlIiwic2V0Um9sZSIsInVwbG9hZCIsInNpbmdsZSIsInVwZGF0ZUF2YXRhciIsInVwZGF0ZUNvdmVySW1hZ2UiLCJkaXNhYmxlVXNlciIsImxvZ291dCIsIkFkbWluIiwidXBkYXRlVXNlciIsImRlbGV0ZSIsImRlbGV0ZVVzZXIiLCJnZXRBbGxVc2VycyIsImdldEFsbExvZ3MiLCJyZXEiLCJyZXMiLCJxdWVyeSIsInVzZXIiLCJKd3QiLCJ2ZXJpZnlUb2tlbiIsInN0YXR1cyIsImpzb24iLCJtZXNzYWdlIiwidG9rZW4iLCJlcnJvciIsInBhc3Nwb3J0IiwiYXV0aGVudGljYXRlIiwic2NvcGUiLCJTdGF0dXMiLCJnZXRQcm9kdWN0c1N0YXR1cyIsImdldFByb2R1Y3RzU3RhdHVzR3JhcGgiLCJzZXNzaW9uIiwiZmFpbHVyZVJlZGlyZWN0IiwiY2hlY2tVc2VyQnlFbWFpbCIsImdvb2dsZUF1dGhIYW5kbGVyIiwiX2RlZmF1bHQiLCJleHBvcnRzIiwibW9kdWxlIl0sInNvdXJjZVJvb3QiOiIvVXNlcnMvYW5kZWxhcndhbmRhL0Rlc2t0b3AvZS1jb21tLXRlYW0tYnJvZ3JhbW1lcnMtYm4vc3JjL3JvdXRlcy8iLCJzb3VyY2VzIjpbInVzZXJzLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qIGVzbGludC1kaXNhYmxlIGltcG9ydC9uby1kdXBsaWNhdGVzICovXG4vKiBlc2xpbnQtZGlzYWJsZSBuby1lbHNlLXJldHVybiAqL1xuLyogZXNsaW50LWRpc2FibGUgb2JqZWN0LXNob3J0aGFuZCAqL1xuLyogZXNsaW50LWRpc2FibGUgY29tbWEtc3BhY2luZyAqL1xuaW1wb3J0IGV4cHJlc3MgZnJvbSAnZXhwcmVzcyc7XG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgaW1wb3J0L25vLW5hbWVkLWFzLWRlZmF1bHQsIGltcG9ydC9uby1uYW1lZC1hcy1kZWZhdWx0LW1lbWJlclxuaW1wb3J0IHBhc3Nwb3J0IGZyb20gJ3Bhc3Nwb3J0JztcbmltcG9ydCBVc2VycyBmcm9tICcuLi9jb250cm9sbGVycy91c2Vycy5jb250cm9sbGVycyc7XG5pbXBvcnQgY2hlY2tVc2VyRXhpc3QsIHtcbiAgY2hlY2tVc2VyQnlFbWFpbCxcbn0gZnJvbSAnLi4vbWlkZGxld2FyZXMvY2hlY2tVc2VyRXhpc3QnO1xuaW1wb3J0IFN0YXR1cyBmcm9tICcuLi9jb250cm9sbGVycy9zdGF0dXMuY29udHJvbGxlcic7XG5pbXBvcnQgbG9naW5WYWxpZGF0ZSBmcm9tICcuLi9taWRkbGV3YXJlcy9sb2dpblZhbGlkYXRlJztcbmltcG9ydCBwcm9maWxlVmF0aWRhdGUgZnJvbSAnLi4vbWlkZGxld2FyZXMvcHJvZmlsZVZhbGlkYXRlJztcbmltcG9ydCBtZmFWYWxpZGF0ZSBmcm9tICcuLi9taWRkbGV3YXJlcy9tZmFWYWxpZGF0ZSc7XG5pbXBvcnQgc2lnbnVwVmF0aWRhdGUgZnJvbSAnLi4vbWlkZGxld2FyZXMvc2lnbnVwVmFsaWRhdGUnO1xuaW1wb3J0IGNoZWNrUm9sZSBmcm9tICcuLi9taWRkbGV3YXJlcy9DaGVja3JvbGUnO1xuaW1wb3J0IGlzQXV0aGVudGljYXRlZCBmcm9tICcuLi9taWRkbGV3YXJlcy92ZXJpZnlUb2tlbic7XG5pbXBvcnQgeyByZXNldFBhc3N3b3JkIH0gZnJvbSAnLi4vdmFsaWRhdGlvbnMvZmllbGRzLnZhbGlkYXRpb24nO1xuaW1wb3J0IHJlcXVlc3RWYWxpZGF0b3IgZnJvbSAnLi4vbWlkZGxld2FyZXMvcmVxdWVzdFZhbGlkYXRvcic7XG5pbXBvcnQgZGlzYWJsZVVzZXIgZnJvbSAnLi4vdmFsaWRhdGlvbnMvZGlzYWJsZS52YWxpZGF0aW9uJztcbmltcG9ydCBBZG1pbiBmcm9tICcuLi9jb250cm9sbGVycy9hZG1pbi5jb250cm9sbGVyJztcbmltcG9ydCB7IEp3dCB9IGZyb20gJy4uL2hlbHBlcnMvand0JztcbmltcG9ydCB7IGdvb2dsZVBhc3MgfSBmcm9tICcuLi9jb250cm9sbGVycy9vYXV0aC5jb250cm9sbGVyJztcbmltcG9ydCB1cGxvYWQgZnJvbSAnLi4vY29uZmlncy9tdWx0ZXInO1xuaW1wb3J0IHsgZ2V0QWxsTG9ncyB9IGZyb20gJy4uL2NvbnRyb2xsZXJzL2xvZ3MuY29udHJvbGxlcic7XG5cbmdvb2dsZVBhc3MoKTtcbmNvbnN0IHJvdXRlcyA9IGV4cHJlc3MuUm91dGVyKCk7XG5cbnJvdXRlcy5wb3N0KCcvc2lnbnVwJywgc2lnbnVwVmF0aWRhdGUsIGNoZWNrVXNlckV4aXN0LCBVc2Vycy5zaWdudXApO1xucm91dGVzLmdldCgnL3ZlcmlmeS1lbWFpbC86dG9rZW4nLCBVc2Vycy52ZXJpZnlFbWFpbCk7XG5yb3V0ZXMucG9zdChcbiAgJy9yZXNldC1wYXNzd29yZCcsXG4gIHJlcXVlc3RWYWxpZGF0b3IocmVzZXRQYXNzd29yZCksXG4gIFVzZXJzLnNlbmRSZXNldFBhc3N3b3JkQ29kZVxuKTtcbnJvdXRlcy5nZXQoXG4gICcvdmVyaWZ5LXJlc2V0LXBhc3N3b3JkLzpyZXNldFRva2VuJyxcbiAgVXNlcnMudmVyaWZ5UmVzZXRQYXNzd29yZENvZGVcbik7XG5yb3V0ZXMucGF0Y2goJy9jaGFuZ2UtcGFzc3dvcmQnLCBpc0F1dGhlbnRpY2F0ZWQsIFVzZXJzLmNoYW5nZVBhc3N3b3JkKTtcblxucm91dGVzLnBhdGNoKFxuICAnL2NyZWF0ZS1hZG1pbi86ZW1haWwnLFxuICBpc0F1dGhlbnRpY2F0ZWQsXG4gIGNoZWNrUm9sZShbJ2FkbWluJ10pLFxuICBVc2Vycy5DcmVhdGVBZG1pblxuKTtcbnJvdXRlcy5wb3N0KCcvdmVyaWZ5LW1mYScsIG1mYVZhbGlkYXRlLCBVc2Vycy52ZXJpZnlNZmFDb2RlKTtcbnJvdXRlcy5wb3N0KCcvZW5hYmxlLW1mYScsIGlzQXV0aGVudGljYXRlZCwgVXNlcnMuZW5hYmxlTWZhKTtcbnJvdXRlcy5wb3N0KCcvZGlzYWJsZS1tZmEnLCBpc0F1dGhlbnRpY2F0ZWQsIFVzZXJzLmRpc2FibGVNZmEpO1xucm91dGVzLnBvc3QoJy9sb2dpbicsIGxvZ2luVmFsaWRhdGUsIFVzZXJzLmxvZ2luKTtcbnJvdXRlcy5nZXQoJy9wcm9maWxlJywgaXNBdXRoZW50aWNhdGVkLCBVc2Vycy5nZXRQcm9maWxlKTtcbnJvdXRlcy5wYXRjaCgnL3Byb2ZpbGUnLCBpc0F1dGhlbnRpY2F0ZWQsIHByb2ZpbGVWYXRpZGF0ZSwgVXNlcnMuZWRpdFByb2ZpbGUpO1xucm91dGVzLnBhdGNoKFxuICAnL3JvbGUvOmVtYWlsJyxcbiAgaXNBdXRoZW50aWNhdGVkLFxuICBjaGVja1JvbGUoWydhZG1pbiddKSxcbiAgVXNlcnMuc2V0Um9sZVxuKTtcblxuLy8gaW1hZ2VzXG5yb3V0ZXMucGF0Y2goXG4gICcvcHJvZmlsZS9hdmF0YXInLFxuICBpc0F1dGhlbnRpY2F0ZWQsXG4gIHVwbG9hZC5zaW5nbGUoJ2ltYWdlJyksXG4gIFVzZXJzLnVwZGF0ZUF2YXRhclxuKTtcbnJvdXRlcy5wYXRjaChcbiAgJy9wcm9maWxlL2NvdmVyLWltYWdlJyxcbiAgaXNBdXRoZW50aWNhdGVkLFxuICB1cGxvYWQuc2luZ2xlKCdpbWFnZScpLFxuICBVc2Vycy51cGRhdGVDb3ZlckltYWdlXG4pO1xuXG4vLyBEaXNhYmxlIGFjY291bnRcbnJvdXRlcy5wYXRjaChcbiAgJy9kaXNhYmxlLzp1c2VySWQnLFxuICBpc0F1dGhlbnRpY2F0ZWQsXG4gIGNoZWNrUm9sZShbJ2FkbWluJ10pLFxuICByZXF1ZXN0VmFsaWRhdG9yKGRpc2FibGVVc2VyKSxcbiAgVXNlcnMuZGlzYWJsZVVzZXJcbik7XG5yb3V0ZXMuZ2V0KCcvbG9nb3V0JywgaXNBdXRoZW50aWNhdGVkLCBVc2Vycy5sb2dvdXQpO1xuLy8gQWRtaW4gUm91dGVzXG5yb3V0ZXMucG9zdCgnL2NyZWF0ZVVzZXInLCBpc0F1dGhlbnRpY2F0ZWQsIGNoZWNrUm9sZShbJ2FkbWluJ10pLCBBZG1pbi5zaWdudXApO1xucm91dGVzLnBhdGNoKCcvOmlkJywgaXNBdXRoZW50aWNhdGVkLCBjaGVja1JvbGUoWydhZG1pbiddKSwgQWRtaW4udXBkYXRlVXNlcik7XG5yb3V0ZXMuZGVsZXRlKCcvOmlkJywgaXNBdXRoZW50aWNhdGVkLCBjaGVja1JvbGUoWydhZG1pbiddKSwgQWRtaW4uZGVsZXRlVXNlcik7XG5yb3V0ZXMuZ2V0KCcvYWxsJywgaXNBdXRoZW50aWNhdGVkLCBjaGVja1JvbGUoWydhZG1pbiddKSwgQWRtaW4uZ2V0QWxsVXNlcnMpO1xucm91dGVzLmdldCgnL2xvZ3MvYWxsJywgaXNBdXRoZW50aWNhdGVkLCBjaGVja1JvbGUoWydhZG1pbiddKSwgZ2V0QWxsTG9ncyk7XG5cbi8vIEdvb2dsZSByb3V0ZXNcbnJvdXRlcy5nZXQoJy9yZWRpcmVjdCcsIChyZXEsIHJlcykgPT4ge1xuICB0cnkge1xuICAgIGlmIChyZXEucXVlcnkua2V5KSB7XG4gICAgICBjb25zdCB1c2VyID0gSnd0LnZlcmlmeVRva2VuKHJlcS5xdWVyeS5rZXkpO1xuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoMjAwKS5qc29uKHtcbiAgICAgICAgbWVzc2FnZTogJ1RoYW5rcyBmb3IgbG9nZ2luZyBpbicsXG4gICAgICAgIHVzZXI6IHVzZXIsXG4gICAgICAgIHRva2VuOiByZXEucXVlcnkua2V5LFxuICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMSkuanNvbih7IGVycm9yOiAnVW5hdXRob3JpemVkJyB9KTtcbiAgICB9XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgcmVzLnN0YXR1cyg1MDApLmpzb24oeyBtZXNzYWdlOiBlcnJvci5tZXNzYWdlIH0pO1xuICB9XG59KTtcbnJvdXRlcy5nZXQoXG4gICcvYXV0aC9nb29nbGUnLFxuICBwYXNzcG9ydC5hdXRoZW50aWNhdGUoJ2dvb2dsZScsIHsgc2NvcGU6IFsnZW1haWwnLCAncHJvZmlsZSddIH0pXG4pO1xucm91dGVzLmdldChcbiAgJy9zdGF0cycsXG4gIGlzQXV0aGVudGljYXRlZCxcbiAgY2hlY2tSb2xlKFsnc2VsbGVyJywgJ2FkbWluJ10pLFxuICBTdGF0dXMuZ2V0UHJvZHVjdHNTdGF0dXNcbik7XG5yb3V0ZXMuZ2V0KFxuICAnL3N0YXRzL2dyYXBoLzpyYW5nZScsXG4gIGlzQXV0aGVudGljYXRlZCxcbiAgY2hlY2tSb2xlKFsnc2VsbGVyJywgJ2FkbWluJ10pLFxuICBTdGF0dXMuZ2V0UHJvZHVjdHNTdGF0dXNHcmFwaFxuKTtcblxucm91dGVzLmdldChcbiAgJy9hdXRoL2dvb2dsZS9yZWRpcmVjdCcsXG4gIHBhc3Nwb3J0LmF1dGhlbnRpY2F0ZSgnZ29vZ2xlJywge1xuICAgIHNlc3Npb246IGZhbHNlLFxuICAgIGZhaWx1cmVSZWRpcmVjdDogJy8nLFxuICB9KSxcbiAgY2hlY2tVc2VyQnlFbWFpbCxcbiAgVXNlcnMuZ29vZ2xlQXV0aEhhbmRsZXJcbik7XG5leHBvcnQgZGVmYXVsdCByb3V0ZXM7XG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFJQSxJQUFBQSxRQUFBLEdBQUFDLHNCQUFBLENBQUFDLE9BQUE7QUFFQSxJQUFBQyxTQUFBLEdBQUFGLHNCQUFBLENBQUFDLE9BQUE7QUFDQSxJQUFBRSxNQUFBLEdBQUFILHNCQUFBLENBQUFDLE9BQUE7QUFDQSxJQUFBRyxlQUFBLEdBQUFDLHVCQUFBLENBQUFKLE9BQUE7QUFHQSxJQUFBSyxPQUFBLEdBQUFOLHNCQUFBLENBQUFDLE9BQUE7QUFDQSxJQUFBTSxjQUFBLEdBQUFQLHNCQUFBLENBQUFDLE9BQUE7QUFDQSxJQUFBTyxnQkFBQSxHQUFBUixzQkFBQSxDQUFBQyxPQUFBO0FBQ0EsSUFBQVEsWUFBQSxHQUFBVCxzQkFBQSxDQUFBQyxPQUFBO0FBQ0EsSUFBQVMsZUFBQSxHQUFBVixzQkFBQSxDQUFBQyxPQUFBO0FBQ0EsSUFBQVUsVUFBQSxHQUFBWCxzQkFBQSxDQUFBQyxPQUFBO0FBQ0EsSUFBQVcsWUFBQSxHQUFBWixzQkFBQSxDQUFBQyxPQUFBO0FBQ0EsSUFBQVksT0FBQSxHQUFBWixPQUFBO0FBQ0EsSUFBQWEsaUJB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","map":{"version":3,"names":["_express","_interopRequireDefault","require","_passport","_users","_checkUserExist","_interopRequireWildcard","_status","_loginValidate","_profileValidate","_mfaValidate","_signupValidate","_Checkrole","_verifyToken","_fields","_requestValidator","_disable","_admin","_jwt","_oauth","_multer","_logs","_getRequireWildcardCache","nodeInterop","WeakMap","cacheBabelInterop","cacheNodeInterop","obj","__esModule","default","cache","has","get","newObj","hasPropertyDescriptor","Object","defineProperty","getOwnPropertyDescriptor","key","prototype","hasOwnProperty","call","desc","set","googlePass","routes","express","Router","post","signupVatidate","checkUserExist","Users","signup","verifyEmail","requestValidator","resetPassword","sendResetPasswordCode","verifyResetPasswordCode","patch","isAuthenticated","changePassword","checkRole","CreateAdmin","mfaValidate","verifyMfaCode","enableMfa","disableMfa","loginValidate","login","getProfile","profileVatidate","editProfile","setRole","upload","single","updateAvatar","updateCoverImage","disableUser","logout","Admin","updateUser","delete","deleteUser","getAllUsers","getAllLogs","req","res","query","user","Jwt","verifyToken","status","json","message","token","error","passport","authenticate","scope","Status","getProductsStatus","getProductsStatusGraph","session","failureRedirect","checkUserByEmail","googleAuthHandler","_default","exports","module"],"sourceRoot":"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/routes/","sources":["users.js"],"sourcesContent":["/* eslint-disable import/no-duplicates */\n/* eslint-disable no-else-return */\n/* eslint-disable object-shorthand */\n/* eslint-disable comma-spacing */\nimport express from 'express';\n// eslint-disable-next-line import/no-named-as-default, import/no-named-as-default-member\nimport passport from 'passport';\nimport Users from '../controllers/users.controllers';\nimport checkUserExist, {\n  checkUserByEmail,\n} from '../middlewares/checkUserExist';\nimport Status from '../controllers/status.controller';\nimport loginValidate from '../middlewares/loginValidate';\nimport profileVatidate from '../middlewares/profileValidate';\nimport mfaValidate from '../middlewares/mfaValidate';\nimport signupVatidate from '../middlewares/signupValidate';\nimport checkRole from '../middlewares/Checkrole';\nimport isAuthenticated from '../middlewares/verifyToken';\nimport { resetPassword } from '../validations/fields.validation';\nimport requestValidator from '../middlewares/requestValidator';\nimport disableUser from '../validations/disable.validation';\nimport Admin from '../controllers/admin.controller';\nimport { Jwt } from '../helpers/jwt';\nimport { googlePass } from '../controllers/oauth.controller';\nimport upload from '../configs/multer';\nimport { getAllLogs } from '../controllers/logs.controller';\n\ngooglePass();\nconst routes = express.Router();\n\nroutes.post('/signup', signupVatidate, checkUserExist, Users.signup);\nroutes.get('/verify-email/:token', Users.verifyEmail);\nroutes.post(\n  '/reset-password',\n  requestValidator(resetPassword),\n  Users.sendResetPasswordCode\n);\nroutes.get(\n  '/verify-reset-password/:resetToken',\n  Users.verifyResetPasswordCode\n);\nroutes.patch('/change-password', isAuthenticated, Users.changePassword);\n\nroutes.patch(\n  '/create-admin/:email',\n  isAuthenticated,\n  checkRole(['admin']),\n  Users.CreateAdmin\n);\nroutes.post('/verify-mfa', mfaValidate, Users.verifyMfaCode);\nroutes.post('/enable-mfa', isAuthenticated, Users.enableMfa);\nroutes.post('/disable-mfa', isAuthenticated, Users.disableMfa);\nroutes.post('/login', loginValidate, Users.login);\nroutes.get('/profile', isAuthenticated, Users.getProfile);\nroutes.patch('/profile', isAuthenticated, profileVatidate, Users.editProfile);\nroutes.patch(\n  '/role/:email',\n  isAuthenticated,\n  checkRole(['admin']),\n  Users.setRole\n);\n\n// images\nroutes.patch(\n  '/profile/avatar',\n  isAuthenticated,\n  upload.single('image'),\n  Users.updateAvatar\n);\nroutes.patch(\n  '/profile/cover-image',\n  isAuthenticated,\n  upload.single('image'),\n  Users.updateCoverImage\n);\n\n// Disable account\nroutes.patch(\n  '/disable/:userId',\n  isAuthenticated,\n  checkRole(['admin']),\n  requestValidator(disableUser),\n  Users.disableUser\n);\nroutes.get('/logout', isAuthenticated, Users.logout);\n// Admin Routes\nroutes.post('/createUser', isAuthenticated, checkRole(['admin']), Admin.signup);\nroutes.patch('/:id', isAuthenticated, checkRole(['admin']), Admin.updateUser);\nroutes.delete('/:id', isAuthenticated, checkRole(['admin']), Admin.deleteUser);\nroutes.get('/all', isAuthenticated, checkRole(['admin']), Admin.getAllUsers);\nroutes.get('/logs/all', isAuthenticated, checkRole(['admin']), getAllLogs);\n\n// Google routes\nroutes.get('/redirect', (req, res) => {\n  try {\n    if (req.query.key) {\n      const user = Jwt.verifyToken(req.query.key);\n      return res.status(200).json({\n        message: 'Thanks for logging in',\n        user: user,\n        token: req.query.key,\n      });\n    } else {\n      return res.status(401).json({ error: 'Unauthorized' });\n    }\n  } catch (error) {\n    res.status(500).json({ message: error.message });\n  }\n});\nroutes.get(\n  '/auth/google',\n  passport.authenticate('google', { scope: ['email', 'profile'] })\n);\nroutes.get(\n  '/stats',\n  isAuthenticated,\n  checkRole(['seller', 'admin']),\n  Status.getProductsStatus\n);\nroutes.get(\n  '/stats/graph/:range',\n  isAuthenticated,\n  checkRole(['seller', 'admin']),\n  Status.getProductsStatusGraph\n);\n\nroutes.get(\n  '/auth/google/redirect',\n  passport.authenticate('google', {\n    session: false,\n    failureRedirect: '/',\n  }),\n  checkUserByEmail,\n  Users.googleAuthHandler\n);\nexport default routes;\n"],"mappings":"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"}},"mtime":1685643189469},"{\"assumptions\":{},\"sourceRoot\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/controllers/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"filename\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/controllers/users.controllers.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/node_modules/babel-plugin-add-module-exports/lib/index.js\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-runtime\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"regenerator\":true},\"externalDependencies\":[]},{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.21.0:development":{"value":{"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = exports.JWT_SECRET = void 0;\nvar _bcrypt = _interopRequireDefault(require(\"bcrypt\"));\nvar _jsonwebtoken = _interopRequireDefault(require(\"jsonwebtoken\"));\nvar _dotenv = _interopRequireDefault(require(\"dotenv\"));\nvar _user = _interopRequireDefault(require(\"../services/user.services\"));\nvar _models = _interopRequireWildcard(require(\"../database/models\"));\nvar _moment = _interopRequireDefault(require(\"moment\"));\nvar _eventEmitter = _interopRequireDefault(require(\"../helpers/eventEmitter\"));\nvar _jwt = require(\"../helpers/jwt\");\nvar _emailConfig = require(\"../helpers/emailConfig\");\nvar _mailTemplate = require(\"../helpers/mailTemplate\");\nvar _mail = require(\"../helpers/mail\");\nvar _signup = require(\"../loggers/signup.logger\");\nfunction _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== \"function\") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function (nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }\nfunction _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") { return { default: obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n/* eslint-disable no-trailing-spaces */\n/* eslint-disable indent */\n/* eslint-disable max-len */\n/* eslint-disable object-shorthand */\n/* eslint-disable camelcase */\n/* eslint-disable object-curly-newline */\n\n// eslint-disable-next-line import/no-unresolved, import/no-extraneous-dependencies\n\n// eslint-disable-next-line import/no-named-as-default, import/no-named-as-default-member\n\n// eslint-disable-next-line import/no-duplicates\n\n// eslint-disable-next-line import/order, import/no-extraneous-dependencies\n\n// eslint-disable-next-line import/named, import/no-duplicates\n\n/* eslint-disable require-jsdoc */\n\n// eslint-disable-next-line operator-linebreak\nconst JWT_SECRET = process.env.JWT_SECRET || 'secret';\nexports.JWT_SECRET = JWT_SECRET;\nconst saltRounds = Number(process.env.SALTROUNDS) || 10;\n_dotenv.default.config();\n/**\n * user model class\n */\nclass Users {\n  /**\n   * registering new user.\n   * getting user information\n   * @param {Object} req valiable\n   * @param {Object} res valiable\n   * @return {Object} res\n   */\n  static async signup(req, res) {\n    try {\n      const {\n        data\n      } = await _user.default.register(req.body);\n      const signupToken = _jsonwebtoken.default.sign({\n        email: data.email\n      }, process.env.JWT_SECRET);\n      const userToken = _jwt.Jwt.generateToken({\n        data\n      }, '1h');\n      if (userToken) {\n        data.email_token = userToken;\n      }\n      await data.save();\n      const verificationEmail = (0, _mailTemplate.verifyEmailTemplate)(userToken);\n      (0, _mail.sendEmail)((0, _emailConfig.emailConfig)({\n        email: data.email,\n        subject: 'Brogrammers email verification',\n        content: verificationEmail\n      }));\n      (0, _signup.logSignup)(req);\n      (0, _signup.logEmailSent)(data.email);\n      return res.status(201).json({\n        message: 'Check your email to verify your account',\n        user: data,\n        signupToken\n      });\n    } catch (e) {\n      (0, _signup.logError)(req, e);\n      return res.status(500).json({\n        error: e.message,\n        message: 'Failed to register a new user'\n      });\n    }\n  }\n  static async verifyEmail(req, res) {\n    try {\n      const emailToken = req.params.token;\n      Users.verifyUser(emailToken, res);\n    } catch (error) {\n      (0, _signup.logError)(req, error);\n      res.status(500).json({\n        'Error:': error\n      });\n    }\n  }\n  static async verifyUser(emailToken, res) {\n    const user = await _user.default.findByEmailToken(emailToken);\n    if (!user) {\n      return res.status(404).json({\n        message: 'User not found'\n      });\n    }\n    user.email_token = null;\n    user.verified = true;\n    await user.save();\n    (0, _signup.logVerifyEmail)(user.email);\n    res.status(200).send({\n      message: 'Your account has been verified successfully!',\n      verified: true\n    });\n  }\n  static async setRole(req, res) {\n    try {\n      const {\n        role\n      } = req.body;\n      const {\n        email\n      } = req.params;\n      await _user.default.setRole(role, email);\n      const user = await _models.users.findOne({\n        where: {\n          email\n        }\n      });\n      const newNotification = {\n        message: `you have been assigned new role which is ${role}`,\n        type: 'user role updates'\n      };\n      const newN = {\n        ...newNotification\n      };\n      newN.receiverId = user.id;\n      const receiver = {\n        username: user.username,\n        email: user.email\n      };\n      const notifyEmail = (0, _mailTemplate.notificationTemplate2)(receiver.username, newN.message, newN.type);\n      (0, _mail.sendEmail)((0, _emailConfig.emailConfig)({\n        email: receiver.email,\n        subject: 'Notification !! role updates',\n        content: notifyEmail\n      }));\n      await _models.notifications.create(newN);\n      (0, _signup.logSetRole)(req, role);\n      return res.status(200).json({\n        status: 200,\n        message: 'Role assigned to the user successfully'\n      });\n    } catch (error) {\n      (0, _signup.logError)(req, error);\n      return res.status(500).json({\n        status: 500,\n        message: error.message\n      });\n    }\n  }\n\n  /**\n   * Login a user.\n   * getting user information\n   * @param {Object} req valiable\n   * @param {Object} res valiable\n   * @return {Object} res\n   */\n  static async login(req, res) {\n    try {\n      const user = await _models.default.users.findOne({\n        where: {\n          email: req.body.email\n        }\n      });\n      if (!user) {\n        return res.status(401).json({\n          message: 'Incorrect email or password'\n        });\n      }\n      const isPasswordValid = _bcrypt.default.compareSync(req.body.password, user.password);\n      if (!isPasswordValid) {\n        return res.status(401).json({\n          message: 'Incorrect email or password'\n        });\n      }\n      if (user.verified === false) {\n        return res.status(401).json({\n          message: 'Email is not verified'\n        });\n      }\n      if (user.disabledUser === true) {\n        return res.status(401).json({\n          message: 'Your account is disabled!'\n        });\n      }\n      if (user.mfa_enabled === false) {\n        const token = _jsonwebtoken.default.sign({\n          email: req.body.email,\n          id: user.id,\n          mustUpdatePassword: user.mustUpdatePassword,\n          username: user.username\n        }, JWT_SECRET);\n        (0, _signup.logLogin)(user.email, user);\n        return res.status(200).json({\n          email: req.body.email,\n          token,\n          message: 'Login Successfully'\n        });\n      }\n\n      // eslint-disable-next-line camelcase\n      const mfa_code = await _user.default.startMfaProcess(req.body.email);\n      const mfaEmailContent = (0, _mailTemplate.mfaEmailTemplate)(mfa_code);\n      _user.default.sendMailWithNodemailer({\n        email: req.body.email,\n        subject: 'Brogrammers authentication code',\n        content: mfaEmailContent\n      });\n      (0, _signup.logLogin)(user.email, user);\n      return res.status(200).json({\n        message: 'Please check your email for authentication code'\n      });\n    } catch (error) {\n      (0, _signup.logError)(req, error);\n      res.status(500).json({\n        error: error.message,\n        message: 'Failed to login a user'\n      });\n    }\n  }\n\n  /**\n   * Login a user.\n   * getting user information\n   * @param {Object} req\n   * @param {Object} res\n   * @return {Object} res\n   */\n  static async getProfile(req, res) {\n    try {\n      const {\n        avatar,\n        mfa_enabled = false,\n        cover_image,\n        email,\n        username,\n        role,\n        gender,\n        id\n      } = req.user;\n      (0, _signup.viewProfile)(req, req.user);\n      res.status(200).json({\n        avatar,\n        cover_image,\n        mfa_enabled,\n        email,\n        username,\n        role,\n        gender,\n        id\n      });\n    } catch (error) {\n      (0, _signup.logError)(req, error);\n      res.status(500).json({\n        error: error.message,\n        message: 'server error'\n      });\n    }\n  }\n\n  /**\n   * Login a user.\n   * getting user information\n   * @param {Object} req\n   * @param {Object} res\n   * @return {Object} res\n   */\n  static async editProfile(req, res) {\n    try {\n      const {\n        error,\n        value\n      } = await _user.default.editProfile(req.body, req.user);\n      if (error) return res.status(400).json(error);\n      const {\n        avatar,\n        cover_image,\n        email,\n        username,\n        role,\n        gender\n      } = value;\n      const token = _jwt.Jwt.generateToken({\n        email\n      });\n      await _models.default.users.update({\n        email_token: token\n      }, {\n        where: {\n          email\n        }\n      });\n      (0, _signup.editProfiles)(req, value);\n      res.status(200).json({\n        avatar,\n        cover_image,\n        email,\n        username,\n        role,\n        gender,\n        token,\n        email_token: token\n      });\n    } catch (error) {\n      (0, _signup.logError)(req, error);\n      res.status(500).json({\n        error: error.message,\n        message: 'server error'\n      });\n    }\n  }\n  static async enableMfa(req, res) {\n    try {\n      await _models.default.users.update({\n        mfa_enabled: true\n      }, {\n        where: {\n          email: req.user.email\n        }\n      });\n      (0, _signup.enableMfaLog)(req);\n      return res.status(200).json({\n        message: 'Multi-factor authentication is enabled'\n      });\n    } catch (error) {\n      (0, _signup.logError)(req, error);\n      return res.status(500).json({\n        error: error.message,\n        message: 'Failed to enable Multi-factor authentication'\n      });\n    }\n  }\n  static async disableMfa(req, res) {\n    try {\n      await _models.default.users.update({\n        mfa_enabled: false\n      }, {\n        where: {\n          email: req.user.email\n        }\n      });\n      (0, _signup.disableMfaLog)(req);\n      return res.status(200).json({\n        message: 'Multi-factor authentication is disabled'\n      });\n    } catch (error) {\n      (0, _signup.logError)(req, error);\n      return res.status(500).json({\n        error: error.message,\n        message: 'Failed to disable Multi-factor authentication'\n      });\n    }\n  }\n  static async verifyMfaCode(req, res) {\n    try {\n      const [isValid, message] = await _user.default.isMfaValid(req.body.email, req.body.mfa_code);\n      if (isValid) {\n        const token = _jsonwebtoken.default.sign({\n          email: req.body.email\n        }, JWT_SECRET);\n        req.user = await _models.users.findOne({\n          where: {\n            email: req.body.email\n          }\n        });\n        (0, _signup.verifiedMfaLog)(req, token);\n        return res.status(200).json({\n          email: req.body.email,\n          token\n        });\n      }\n      return res.status(403).json({\n        message\n      });\n    } catch (error) {\n      (0, _signup.logError)(req, error);\n      return res.status(500).json({\n        error: error.message,\n        message: 'Failed to verify authentication code'\n      });\n    }\n  }\n  static async CreateAdmin(req, res) {\n    try {\n      const newAdminemail = req.params.email;\n      const Nwuser = await _models.users.findOne({\n        where: {\n          email: newAdminemail\n        }\n      });\n      if (!Nwuser) {\n        return res.status(404).json({\n          statusCode: 404,\n          message: 'you are trying to make admin user that does not exist'\n        });\n      }\n      Nwuser.role = 'admin';\n      await Nwuser.save();\n      const newNotification = {\n        message: 'you have been assigned new role which is admin',\n        type: 'user role updates'\n      };\n      const newN = {\n        ...newNotification\n      };\n      newN.receiverId = Nwuser.id;\n      const receiver = {\n        username: Nwuser.username,\n        email: Nwuser.email\n      };\n      const notifyEmail = (0, _mailTemplate.notificationTemplate2)(receiver.username, newN.message, newN.type);\n      (0, _mail.sendEmail)((0, _emailConfig.emailConfig)({\n        email: receiver.email,\n        subject: 'Notification !! ',\n        content: notifyEmail\n      }));\n      await _models.notifications.create(newN);\n      (0, _signup.createAdminLog)(req, Nwuser);\n      res.status(200).json({\n        user: Nwuser,\n        message: `user ${Nwuser.username} sucessfully made admin`\n      });\n    } catch (error) {\n      (0, _signup.logError)(req, error);\n      res.status(500).json({\n        'Error:': error\n      });\n    }\n  }\n  static async sendResetPasswordCode(req, res) {\n    try {\n      const {\n        email,\n        newPassword\n      } = req.body;\n      const user = await _models.default.users.findOne({\n        where: {\n          email\n        }\n      });\n      if (!user) {\n        return res.status(404).json({\n          message: 'User not found'\n        });\n      }\n\n      // eslint-disable-next-line camelcase\n      const resetToken = _jsonwebtoken.default.sign({\n        email,\n        newPassword\n      }, process.env.RESET_PASSWORD_SECRET, {\n        expiresIn: '1h'\n      });\n      const resetPasswordContent = (0, _mailTemplate.passwordResetEmailTemplate)(resetToken);\n      (0, _mail.sendEmail)((0, _emailConfig.emailConfig)({\n        email,\n        subject: 'Brogrammers reset password',\n        content: resetPasswordContent\n      }));\n      (0, _signup.resetPasswordLog)(req);\n      res.status(200).json({\n        message: 'Check your email for reset link'\n      });\n    } catch (error) {\n      (0, _signup.logError)(req, error);\n      res.status(500).json({\n        message: error.message\n      });\n    }\n  }\n  static async verifyResetPasswordCode(req, res) {\n    try {\n      const {\n        resetToken\n      } = req.params;\n      if (resetToken) {\n        _jsonwebtoken.default.verify(resetToken, process.env.RESET_PASSWORD_SECRET, async (err, decodedToken) => {\n          if (err) {\n            return res.redirect(`${process.env.FRONTEND}/verifyfail`);\n          }\n          const {\n            email,\n            newPassword\n          } = decodedToken;\n          const user = await _models.users.findOne({\n            where: {\n              email\n            }\n          });\n          if (!user) {\n            return res.redirect(`${process.env.FRONTEND}/verifyfail`);\n          }\n          user.verified = true;\n          user.password = _bcrypt.default.hashSync(newPassword, saltRounds);\n          await user.save();\n          (0, _signup.verifyPasswordLog)(req, user);\n          return res.redirect(`${process.env.FRONTEND}/verifypass`);\n        });\n      }\n    } catch (error) {\n      (0, _signup.logError)(req, error);\n      res.redirect(`${process.env.FRONTEND}/verifyfail`);\n    }\n  }\n  static async changePassword(req, res) {\n    try {\n      const {\n        oldPassword,\n        newPassword\n      } = req.body;\n\n      // check if the old password matches the one in the database\n      const isPasswordValid = await _bcrypt.default.compare(oldPassword, req.user.password);\n      if (!isPasswordValid) {\n        return res.status(401).json({\n          message: 'Incorrect old password'\n        });\n      }\n\n      // validate the new password\n      // eslint-disable-next-line operator-linebreak\n      const passwordRegex = /^(?=.*\\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[!@#$%^&*()_+\\-=[\\]{};':\"\\\\|,.<>/?]).{8,}$/;\n      if (!passwordRegex.test(newPassword)) {\n        return res.status(401).json({\n          message: 'New password must be at least 8 characters long and contain at least one uppercase letter, one lowercase letter, one number, and one symbol.'\n        });\n      }\n\n      // hash the new password and update the database\n      const hashedPassword = await _bcrypt.default.hash(newPassword, saltRounds);\n      req.user.password = hashedPassword;\n      req.user.lastTimePasswordUpdated = (0, _moment.default)();\n      req.user.mustUpdatePassword = false;\n      await req.user.save();\n      // Emit event to notify password update\n      _eventEmitter.default.emit('passwordUpdated', req.user);\n      (0, _signup.changePasswordLog)(req, req.user);\n      res.status(200).json({\n        message: 'Password updated successfully'\n      });\n    } catch (error) {\n      (0, _signup.logError)(req, error);\n      res.status(500).json({\n        error: error.message,\n        message: 'Failed to change password'\n      });\n    }\n  }\n  // admin Disable user due to some reasons2\n\n  static async disableUser(req, res) {\n    try {\n      const user = await _models.users.findOne({\n        where: {\n          id: req.params.userId\n        }\n      });\n      if (!user) {\n        return res.status(404).json({\n          error: 'User not found'\n        });\n      }\n      user.disabledUser = !user.disabledUser;\n      if (user.disabledUser) {\n        user.disabledReason = req.body.reason;\n        (0, _mail.sendEmail)((0, _emailConfig.emailConfig)({\n          email: user.email,\n          subject: 'Your account has been disabled',\n          // eslint-disable-next-line no-undef\n          content: (0, _mailTemplate.disableEmailTemplate)(user.username, user.disabledReason)\n        }));\n        (0, _signup.disableAccountLog)(req, user);\n      } else {\n        user.disabledReason = null;\n      }\n      await user.save();\n      const message = user.disabledUser ? 'User account disabled successfully' : 'User account enabled successfully';\n      res.status(200).json({\n        message\n      });\n    } catch (error) {\n      (0, _signup.logError)(req, error);\n      res.status(500).json({\n        message: error.message\n      });\n    }\n  }\n\n  /**\n   * Logout a user by invalidating the JWT token.\n   * @param {Object} req valiable\n   * @param {Object} res valiable\n   * @return {Object} res\n   */\n  static async logout(req, res) {\n    try {\n      await _user.default.logout(req.headers.authorization);\n      (0, _signup.logLogout)(req);\n      res.status(200).json({\n        message: 'You logged out successfully'\n      });\n    } catch (error) {\n      (0, _signup.logError)(req, error);\n      res.status(500).json({\n        message: error.message\n      });\n    }\n  }\n  static async googleAuthHandler(req, res) {\n    const {\n      value\n    } = req.user.emails[0];\n    const {\n      familyName\n    } = req.user.name;\n    const newUser = {\n      username: familyName,\n      email: value,\n      avatar: req.user.photos[0].value,\n      verified: true,\n      password: '12345'\n    };\n    const {\n      id,\n      email\n    } = await _user.default.registerGoogle(newUser);\n    const userToken = _jsonwebtoken.default.sign({\n      email: email,\n      id: id\n    }, JWT_SECRET);\n    (0, _signup.redirectGoogle)(email);\n    return res.redirect(`${process.env.FRONTEND_URL}/login?key=${userToken}&email=${email}`);\n  }\n  static async updateAvatar(req, res) {\n    try {\n      const {\n        error,\n        value\n      } = await _user.default.updateAvatar(req.user, req.file);\n      if (error) return res.status(400).json(error);\n      const {\n        avatar,\n        cover_image,\n        email,\n        username,\n        role,\n        gender\n      } = value;\n      (0, _signup.updateAvatarLog)(req, value);\n      res.status(200).json({\n        avatar,\n        cover_image,\n        email,\n        username,\n        role,\n        gender\n      });\n    } catch (error) {\n      (0, _signup.logError)(req, error);\n      res.status(500).json({\n        message: error.message\n      });\n    }\n  }\n  static async updateCoverImage(req, res) {\n    try {\n      const {\n        error,\n        value\n      } = await _user.default.updateCoverImage(req.user, req.file);\n      if (error) return res.status(400).json(error);\n      const {\n        avatar,\n        cover_image,\n        email,\n        username,\n        role,\n        gender\n      } = value;\n      (0, _signup.updateImageLog)(req, value);\n      res.status(200).json({\n        avatar,\n        cover_image,\n        email,\n        username,\n        role,\n        gender\n      });\n    } catch (error) {\n      (0, _signup.logError)(req, error);\n      res.status(500).json({\n        message: error.message\n      });\n    }\n  }\n}\nexports.default = Users;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfYmNyeXB0IiwiX2ludGVyb3BSZXF1aXJlRGVmYXVsdCIsInJlcXVpcmUiLCJfanNvbndlYnRva2VuIiwiX2RvdGVudiIsIl91c2VyIiwiX21vZGVscyIsIl9pbnRlcm9wUmVxdWlyZVdpbGRjYXJkIiwiX21vbWVudCIsIl9ldmVudEVtaXR0ZXIiLCJfand0IiwiX2VtYWlsQ29uZmlnIiwiX21haWxUZW1wbGF0ZSIsIl9tYWlsIiwiX3NpZ251cCIsIl9nZXRSZXF1aXJlV2lsZGNhcmRDYWNoZSIsIm5vZGVJbnRlcm9wIiwiV2Vha01hcCIsImNhY2hlQmFiZWxJbnRlcm9wIiwiY2FjaGVOb2RlSW50ZXJvcCIsIm9iaiIsIl9fZXNNb2R1bGUiLCJkZWZhdWx0IiwiY2FjaGUiLCJoYXMiLCJnZXQiLCJuZXdPYmoiLCJoYXNQcm9wZXJ0eURlc2NyaXB0b3IiLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImdldE93blByb3BlcnR5RGVzY3JpcHRvciIsImtleSIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwiY2FsbCIsImRlc2MiLCJzZXQiLCJKV1RfU0VDUkVUIiwicHJvY2VzcyIsImVudiIsImV4cG9ydHMiLCJzYWx0Um91bmRzIiwiTnVtYmVyIiwiU0FMVFJPVU5EUyIsImRvdGVudiIsImNvbmZpZyIsIlVzZXJzIiwic2lnbnVwIiwicmVxIiwicmVzIiwiZGF0YSIsIlVzZXIiLCJyZWdpc3RlciIsImJvZHkiLCJzaWdudXBUb2tlbiIsImp3dCIsInNpZ24iLCJlbWFpbCIsInVzZXJUb2tlbiIsIkp3dCIsImdlbmVyYXRlVG9rZW4iLCJlbWFpbF90b2tlbiIsInNhdmUiLCJ2ZXJpZmljYXRpb25FbWFpbCIsInZlcmlmeUVtYWlsVGVtcGxhdGUiLCJzZW5kRW1haWwiLCJlbWFpbENvbmZpZyIsInN1YmplY3QiLCJjb250ZW50IiwibG9nU2lnbnVwIiwibG9nRW1haWxTZW50Iiwic3RhdHVzIiwianNvbiIsIm1lc3NhZ2UiLCJ1c2VyIiwiZSIsImxvZ0Vycm9yIiwiZXJyb3IiLCJ2ZXJpZnlFbWFpbCIsImVtYWlsVG9rZW4iLCJwYXJhbXMiLCJ0b2tlbiIsInZlcmlmeVVzZXIiLCJmaW5kQnlFbWFpbFRva2VuIiwidmVyaWZpZWQiLCJsb2dWZXJpZnlFbWFpbCIsInNlbmQiLCJzZXRSb2xlIiwicm9sZSIsInVzZXJzIiwiZmluZE9uZSIsIndoZXJlIiwibmV3Tm90aWZpY2F0aW9uIiwidHlwZSIsIm5ld04iLCJyZWNlaXZlcklkIiwiaWQiLCJyZWNlaXZlciIsInVzZXJuYW1lIiwibm90aWZ5RW1haWwiLCJub3RpZmljYXRpb25UZW1wbGF0ZTIiLCJub3RpZmljYXRpb25zIiwiY3JlYXRlIiwibG9nU2V0Um9sZSIsImxvZ2luIiwiZGIiLCJpc1Bhc3N3b3JkVmFsaWQiLCJiY3J5cHQiLCJjb21wYXJlU3luYyIsInBhc3N3b3JkIiwiZGlzYWJsZWRVc2VyIiwibWZhX2VuYWJsZWQiLCJtdXN0VXBkYXRlUGFzc3dvcmQiLCJsb2dMb2dpbiIsIm1mYV9jb2RlIiwic3RhcnRNZmFQcm9jZXNzIiwibWZhRW1haWxDb250ZW50IiwibWZhRW1haWxUZW1wbGF0ZSIsInNlbmRNYWlsV2l0aE5vZGVtYWlsZXIiLCJnZXRQcm9maWxlIiwiYXZhdGFyIiwiY292ZXJfaW1hZ2UiLCJnZW5kZXIiLCJ2aWV3UHJvZmlsZSIsImVkaXRQcm9maWxlIiwidmFsdWUiLCJ1cGRhdGUiLCJlZGl0UHJvZmlsZXMiLCJlbmFibGVNZmEiLCJlbmFibGVNZmFMb2ciLCJkaXNhYmxlTWZhIiwiZGlzYWJsZU1mYUxvZyIsInZlcmlmeU1mYUNvZGUiLCJpc1ZhbGlkIiwiaXNNZmFWYWxpZCIsInZlcmlmaWVkTWZhTG9nIiwiQ3JlYXRlQWRtaW4iLCJuZXdBZG1pbmVtYWlsIiwiTnd1c2VyIiwic3RhdHVzQ29kZSIsImNyZWF0ZUFkbWluTG9nIiwic2VuZFJlc2V0UGFzc3dvcmRDb2RlIiwibmV3UGFzc3dvcmQiLCJyZXNldFRva2VuIiwiUkVTRVRfUEFTU1dPUkRfU0VDUkVUIiwiZXhwaXJlc0luIiwicmVzZXRQYXNzd29yZENvbnRlbnQiLCJwYXNzd29yZFJlc2V0RW1haWxUZW1wbGF0ZSIsInJlc2V0UGFzc3dvcmRMb2ciLCJ2ZXJpZnlSZXNldFBhc3N3b3JkQ29kZSIsInZlcmlmeSIsImVyciIsImRlY29kZWRUb2tlbiIsInJlZGlyZWN0IiwiRlJPTlRFTkQiLCJoYXNoU3luYyIsInZlcmlmeVBhc3N3b3JkTG9nIiwiY2hhbmdlUGFzc3dvcmQiLCJvbGRQYXNzd29yZCIsImNvbXBhcmUiLCJwYXNzd29yZFJlZ2V4IiwidGVzdCIsImhhc2hlZFBhc3N3b3JkIiwiaGFzaCIsImxhc3RUaW1lUGFzc3dvcmRVcGRhdGVkIiwibW9tZW50IiwiZXZlbnRFbWl0dGVyIiwiZW1pdCIsImNoYW5nZVBhc3N3b3JkTG9nIiwiZGlzYWJsZVVzZXIiLCJ1c2VySWQiLCJkaXNhYmxlZFJlYXNvbiIsInJlYXNvbiIsImRpc2FibGVFbWFpbFRlbXBsYXRlIiwiZGlzYWJsZUFjY291bnRMb2ciLCJsb2dvdXQiLCJoZWFkZXJzIiwiYXV0aG9yaXphdGlvbiIsImxvZ0xvZ291dCIsImdvb2dsZUF1dGhIYW5kbGVyIiwiZW1haWxzIiwiZmFtaWx5TmFtZSIsIm5hbWUiLCJuZXdVc2VyIiwicGhvdG9zIiwicmVnaXN0ZXJHb29nbGUiLCJyZWRpcmVjdEdvb2dsZSIsIkZST05URU5EX1VSTCIsInVwZGF0ZUF2YXRhciIsImZpbGUiLCJ1cGRhdGVBdmF0YXJMb2ciLCJ1cGRhdGVDb3ZlckltYWdlIiwidXBkYXRlSW1hZ2VMb2ciXSwic291cmNlUm9vdCI6Ii9Vc2Vycy9hbmRlbGFyd2FuZGEvRGVza3RvcC9lLWNvbW0tdGVhbS1icm9ncmFtbWVycy1ibi9zcmMvY29udHJvbGxlcnMvIiwic291cmNlcyI6WyJ1c2Vycy5jb250cm9sbGVycy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKiBlc2xpbnQtZGlzYWJsZSBuby10cmFpbGluZy1zcGFjZXMgKi9cbi8qIGVzbGludC1kaXNhYmxlIGluZGVudCAqL1xuLyogZXNsaW50LWRpc2FibGUgbWF4LWxlbiAqL1xuLyogZXNsaW50LWRpc2FibGUgb2JqZWN0LXNob3J0aGFuZCAqL1xuLyogZXNsaW50LWRpc2FibGUgY2FtZWxjYXNlICovXG4vKiBlc2xpbnQtZGlzYWJsZSBvYmplY3QtY3VybHktbmV3bGluZSAqL1xuaW1wb3J0IGJjcnlwdCBmcm9tICdiY3J5cHQnO1xuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGltcG9ydC9uby11bnJlc29sdmVkLCBpbXBvcnQvbm8tZXh0cmFuZW91cy1kZXBlbmRlbmNpZXNcbmltcG9ydCBqd3QgZnJvbSAnanNvbndlYnRva2VuJztcbmltcG9ydCBkb3RlbnYgZnJvbSAnZG90ZW52Jztcbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBpbXBvcnQvbm8tbmFtZWQtYXMtZGVmYXVsdCwgaW1wb3J0L25vLW5hbWVkLWFzLWRlZmF1bHQtbWVtYmVyXG5pbXBvcnQgVXNlciBmcm9tICcuLi9zZXJ2aWNlcy91c2VyLnNlcnZpY2VzJztcbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBpbXBvcnQvbm8tZHVwbGljYXRlc1xuaW1wb3J0IGRiIGZyb20gJy4uL2RhdGFiYXNlL21vZGVscyc7XG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgaW1wb3J0L29yZGVyLCBpbXBvcnQvbm8tZXh0cmFuZW91cy1kZXBlbmRlbmNpZXNcbmltcG9ydCBtb21lbnQgZnJvbSAnbW9tZW50JztcbmltcG9ydCBldmVudEVtaXR0ZXIgZnJvbSAnLi4vaGVscGVycy9ldmVudEVtaXR0ZXInO1xuXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgaW1wb3J0L25hbWVkLCBpbXBvcnQvbm8tZHVwbGljYXRlc1xuaW1wb3J0IHsgdXNlcnMsIG5vdGlmaWNhdGlvbnMgfSBmcm9tICcuLi9kYXRhYmFzZS9tb2RlbHMnO1xuLyogZXNsaW50LWRpc2FibGUgcmVxdWlyZS1qc2RvYyAqL1xuaW1wb3J0IHsgSnd0IH0gZnJvbSAnLi4vaGVscGVycy9qd3QnO1xuaW1wb3J0IHsgZW1haWxDb25maWcgfSBmcm9tICcuLi9oZWxwZXJzL2VtYWlsQ29uZmlnJztcbmltcG9ydCB7XG4gIHZlcmlmeUVtYWlsVGVtcGxhdGUsXG4gIG1mYUVtYWlsVGVtcGxhdGUsXG4gIHBhc3N3b3JkUmVzZXRFbWFpbFRlbXBsYXRlLFxuICBkaXNhYmxlRW1haWxUZW1wbGF0ZSxcbiAgbm90aWZpY2F0aW9uVGVtcGxhdGUyLFxufSBmcm9tICcuLi9oZWxwZXJzL21haWxUZW1wbGF0ZSc7XG5pbXBvcnQgeyBzZW5kRW1haWwgfSBmcm9tICcuLi9oZWxwZXJzL21haWwnO1xuXG5pbXBvcnQge1xuICBsb2dTaWdudXAsXG4gIHJlZGlyZWN0R29vZ2xlLFxuICB1cGRhdGVBdmF0YXJMb2csXG4gIGxvZ0Vycm9yLFxuICBsb2dTZXRSb2xlLFxuICBsb2dFbWFpbFNlbnQsXG4gIHVwZGF0ZUltYWdlTG9nLFxuICBsb2dMb2dvdXQsXG4gIGxvZ1ZlcmlmeUVtYWlsLFxuICBsb2dMb2dpbixcbiAgdmlld1Byb2ZpbGUsXG4gIGVkaXRQcm9maWxlcyxcbiAgZW5hYmxlTWZhTG9nLFxuICBkaXNhYmxlTWZhTG9nLFxuICB2ZXJpZmllZE1mYUxvZyxcbiAgY3JlYXRlQWRtaW5Mb2csXG4gIHJlc2V0UGFzc3dvcmRMb2csXG4gIHZlcmlmeVBhc3N3b3JkTG9nLFxuICBjaGFuZ2VQYXNzd29yZExvZyxcbiAgZGlzYWJsZUFjY291bnRMb2csXG59IGZyb20gJy4uL2xvZ2dlcnMvc2lnbnVwLmxvZ2dlcic7XG5cbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBvcGVyYXRvci1saW5lYnJlYWtcbmV4cG9ydCBjb25zdCBKV1RfU0VDUkVUID0gcHJvY2Vzcy5lbnYuSldUX1NFQ1JFVCB8fCAnc2VjcmV0JztcbmNvbnN0IHNhbHRSb3VuZHMgPSBOdW1iZXIocHJvY2Vzcy5lbnYuU0FMVFJPVU5EUykgfHwgMTA7XG5cbmRvdGVudi5jb25maWcoKTtcbi8qKlxuICogdXNlciBtb2RlbCBjbGFzc1xuICovXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBVc2VycyB7XG4gIC8qKlxuICAgKiByZWdpc3RlcmluZyBuZXcgdXNlci5cbiAgICogZ2V0dGluZyB1c2VyIGluZm9ybWF0aW9uXG4gICAqIEBwYXJhbSB7T2JqZWN0fSByZXEgdmFsaWFibGVcbiAgICogQHBhcmFtIHtPYmplY3R9IHJlcyB2YWxpYWJsZVxuICAgKiBAcmV0dXJuIHtPYmplY3R9IHJlc1xuICAgKi9cbiAgc3RhdGljIGFzeW5jIHNpZ251cChyZXEsIHJlcykge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCB7IGRhdGEgfSA9IGF3YWl0IFVzZXIucmVnaXN0ZXIocmVxLmJvZHkpO1xuICAgICAgY29uc3Qgc2lnbnVwVG9rZW4gPSBqd3Quc2lnbihcbiAgICAgICAgeyBlbWFpbDogZGF0YS5lbWFpbCB9LFxuICAgICAgICBwcm9jZXNzLmVudi5KV1RfU0VDUkVUXG4gICAgICApO1xuICAgICAgY29uc3QgdXNlclRva2VuID0gSnd0LmdlbmVyYXRlVG9rZW4oeyBkYXRhIH0sICcxaCcpO1xuICAgICAgaWYgKHVzZXJUb2tlbikge1xuICAgICAgICBkYXRhLmVtYWlsX3Rva2VuID0gdXNlclRva2VuO1xuICAgICAgfVxuICAgICAgYXdhaXQgZGF0YS5zYXZlKCk7XG4gICAgICBjb25zdCB2ZXJpZmljYXRpb25FbWFpbCA9IHZlcmlmeUVtYWlsVGVtcGxhdGUodXNlclRva2VuKTtcbiAgICAgIHNlbmRFbWFpbChcbiAgICAgICAgZW1haWxDb25maWcoe1xuICAgICAgICAgIGVtYWlsOiBkYXRhLmVtYWlsLFxuICAgICAgICAgIHN1YmplY3Q6ICdCcm9ncmFtbWVycyBlbWFpbCB2ZXJpZmljYXRpb24nLFxuICAgICAgICAgIGNvbnRlbnQ6IHZlcmlmaWNhdGlvbkVtYWlsLFxuICAgICAgICB9KVxuICAgICAgKTtcbiAgICAgIGxvZ1NpZ251cChyZXEpO1xuICAgICAgbG9nRW1haWxTZW50KGRhdGEuZW1haWwpO1xuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoMjAxKS5qc29uKHtcbiAgICAgICAgbWVzc2FnZTogJ0NoZWNrIHlvdXIgZW1haWwgdG8gdmVyaWZ5IHlvdXIgYWNjb3VudCcsXG4gICAgICAgIHVzZXI6IGRhdGEsXG4gICAgICAgIHNpZ251cFRva2VuLFxuICAgICAgfSk7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgbG9nRXJyb3IocmVxLCBlKTtcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDUwMCkuanNvbih7XG4gICAgICAgIGVycm9yOiBlLm1lc3NhZ2UsXG4gICAgICAgIG1lc3NhZ2U6ICdGYWlsZWQgdG8gcmVnaXN0ZXIgYSBuZXcgdXNlcicsXG4gICAgICB9KTtcbiAgICB9XG4gIH1cblxuICBzdGF0aWMgYXN5bmMgdmVyaWZ5RW1haWwocmVxLCByZXMpIHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgZW1haWxUb2tlbiA9IHJlcS5wYXJhbXMudG9rZW47XG4gICAgICBVc2Vycy52ZXJpZnlVc2VyKGVtYWlsVG9rZW4sIHJlcyk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGxvZ0Vycm9yKHJlcSwgZXJyb3IpO1xuICAgICAgcmVzLnN0YXR1cyg1MDApLmpzb24oeyAnRXJyb3I6JzogZXJyb3IgfSk7XG4gICAgfVxuICB9XG5cbiAgc3RhdGljIGFzeW5jIHZlcmlmeVVzZXIoZW1haWxUb2tlbiwgcmVzKSB7XG4gICAgY29uc3QgdXNlciA9IGF3YWl0IFVzZXIuZmluZEJ5RW1haWxUb2tlbihlbWFpbFRva2VuKTtcbiAgICBpZiAoIXVzZXIpIHtcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwNCkuanNvbih7XG4gICAgICAgIG1lc3NhZ2U6ICdVc2VyIG5vdCBmb3VuZCcsXG4gICAgICB9KTtcbiAgICB9XG4gICAgdXNlci5lbWFpbF90b2tlbiA9IG51bGw7XG4gICAgdXNlci52ZXJpZmllZCA9IHRydWU7XG4gICAgYXdhaXQgdXNlci5zYXZlKCk7XG4gICAgbG9nVmVyaWZ5RW1haWwodXNlci5lbWFpbCk7XG4gICAgcmVzLnN0YXR1cygyMDApLnNlbmQoe1xuICAgICAgbWVzc2FnZTogJ1lvdXIgYWNjb3VudCBoYXMgYmVlbiB2ZXJpZmllZCBzdWNjZXNzZnVsbHkhJyxcbiAgICAgIHZlcmlmaWVkOiB0cnVlLFxuICAgIH0pO1xuICB9XG5cbiAgc3RhdGljIGFzeW5jIHNldFJvbGUocmVxLCByZXMpIHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgeyByb2xlIH0gPSByZXEuYm9keTtcbiAgICAgIGNvbnN0IHsgZW1haWwgfSA9IHJlcS5wYXJhbXM7XG4gICAgICBhd2FpdCBVc2VyLnNldFJvbGUocm9sZSwgZW1haWwpO1xuICAgICAgY29uc3QgdXNlciA9IGF3YWl0IHVzZXJzLmZpbmRPbmUoeyB3aGVyZTogeyBlbWFpbCB9IH0pO1xuICAgICAgY29uc3QgbmV3Tm90aWZpY2F0aW9uID0ge1xuICAgICAgICBtZXNzYWdlOiBgeW91IGhhdmUgYmVlbiBhc3NpZ25lZCBuZXcgcm9sZSB3aGljaCBpcyAke3JvbGV9YCxcbiAgICAgICAgdHlwZTogJ3VzZXIgcm9sZSB1cGRhdGVzJyxcbiAgICAgIH07XG4gICAgICBjb25zdCBuZXdOID0geyAuLi5uZXdOb3RpZmljYXRpb24gfTtcbiAgICAgIG5ld04ucmVjZWl2ZXJJZCA9IHVzZXIuaWQ7XG4gICAgICBjb25zdCByZWNlaXZlciA9IHtcbiAgICAgICAgdXNlcm5hbWU6IHVzZXIudXNlcm5hbWUsXG4gICAgICAgIGVtYWlsOiB1c2VyLmVtYWlsLFxuICAgICAgfTtcbiAgICAgIGNvbnN0IG5vdGlmeUVtYWlsID0gbm90aWZpY2F0aW9uVGVtcGxhdGUyKFxuICAgICAgICByZWNlaXZlci51c2VybmFtZSxcbiAgICAgICAgbmV3Ti5tZXNzYWdlLFxuICAgICAgICBuZXdOLnR5cGVcbiAgICAgICk7XG4gICAgICBzZW5kRW1haWwoXG4gICAgICAgIGVtYWlsQ29uZmlnKHtcbiAgICAgICAgICBlbWFpbDogcmVjZWl2ZXIuZW1haWwsXG4gICAgICAgICAgc3ViamVjdDogJ05vdGlmaWNhdGlvbiAhISByb2xlIHVwZGF0ZXMnLFxuICAgICAgICAgIGNvbnRlbnQ6IG5vdGlmeUVtYWlsLFxuICAgICAgICB9KVxuICAgICAgKTtcbiAgICAgIGF3YWl0IG5vdGlmaWNhdGlvbnMuY3JlYXRlKG5ld04pO1xuICAgICAgbG9nU2V0Um9sZShyZXEsIHJvbGUpO1xuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoMjAwKS5qc29uKHtcbiAgICAgICAgc3RhdHVzOiAyMDAsXG4gICAgICAgIG1lc3NhZ2U6ICdSb2xlIGFzc2lnbmVkIHRvIHRoZSB1c2VyIHN1Y2Nlc3NmdWxseScsXG4gICAgICB9KTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgbG9nRXJyb3IocmVxLCBlcnJvcik7XG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg1MDApLmpzb24oe1xuICAgICAgICBzdGF0dXM6IDUwMCxcbiAgICAgICAgbWVzc2FnZTogZXJyb3IubWVzc2FnZSxcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBMb2dpbiBhIHVzZXIuXG4gICAqIGdldHRpbmcgdXNlciBpbmZvcm1hdGlvblxuICAgKiBAcGFyYW0ge09iamVjdH0gcmVxIHZhbGlhYmxlXG4gICAqIEBwYXJhbSB7T2JqZWN0fSByZXMgdmFsaWFibGVcbiAgICogQHJldHVybiB7T2JqZWN0fSByZXNcbiAgICovXG4gIHN0YXRpYyBhc3luYyBsb2dpbihyZXEsIHJlcykge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCB1c2VyID0gYXdhaXQgZGIudXNlcnMuZmluZE9uZSh7IHdoZXJlOiB7IGVtYWlsOiByZXEuYm9keS5lbWFpbCB9IH0pO1xuXG4gICAgICBpZiAoIXVzZXIpIHtcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAxKS5qc29uKHsgbWVzc2FnZTogJ0luY29ycmVjdCBlbWFpbCBvciBwYXNzd29yZCcgfSk7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGlzUGFzc3dvcmRWYWxpZCA9IGJjcnlwdC5jb21wYXJlU3luYyhcbiAgICAgICAgcmVxLmJvZHkucGFzc3dvcmQsXG4gICAgICAgIHVzZXIucGFzc3dvcmRcbiAgICAgICk7XG4gICAgICBpZiAoIWlzUGFzc3dvcmRWYWxpZCkge1xuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDEpLmpzb24oeyBtZXNzYWdlOiAnSW5jb3JyZWN0IGVtYWlsIG9yIHBhc3N3b3JkJyB9KTtcbiAgICAgIH1cblxuICAgICAgaWYgKHVzZXIudmVyaWZpZWQgPT09IGZhbHNlKSB7XG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMSkuanNvbih7IG1lc3NhZ2U6ICdFbWFpbCBpcyBub3QgdmVyaWZpZWQnIH0pO1xuICAgICAgfVxuICAgICAgaWYgKHVzZXIuZGlzYWJsZWRVc2VyID09PSB0cnVlKSB7XG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMSkuanNvbih7IG1lc3NhZ2U6ICdZb3VyIGFjY291bnQgaXMgZGlzYWJsZWQhJyB9KTtcbiAgICAgIH1cbiAgICAgIGlmICh1c2VyLm1mYV9lbmFibGVkID09PSBmYWxzZSkge1xuICAgICAgICBjb25zdCB0b2tlbiA9IGp3dC5zaWduKFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIGVtYWlsOiByZXEuYm9keS5lbWFpbCxcbiAgICAgICAgICAgIGlkOiB1c2VyLmlkLFxuICAgICAgICAgICAgbXVzdFVwZGF0ZVBhc3N3b3JkOiB1c2VyLm11c3RVcGRhdGVQYXNzd29yZCxcbiAgICAgICAgICAgIHVzZXJuYW1lOiB1c2VyLnVzZXJuYW1lXG4gICAgICAgICAgfSxcbiAgICAgICAgICBKV1RfU0VDUkVUXG4gICAgICAgICk7XG4gICAgICAgIGxvZ0xvZ2luKHVzZXIuZW1haWwsIHVzZXIpO1xuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cygyMDApLmpzb24oe1xuICAgICAgICAgIGVtYWlsOiByZXEuYm9keS5lbWFpbCxcbiAgICAgICAgICB0b2tlbixcbiAgICAgICAgICBtZXNzYWdlOiAnTG9naW4gU3VjY2Vzc2Z1bGx5JyxcbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBjYW1lbGNhc2VcbiAgICAgIGNvbnN0IG1mYV9jb2RlID0gYXdhaXQgVXNlci5zdGFydE1mYVByb2Nlc3MocmVxLmJvZHkuZW1haWwpO1xuICAgICAgY29uc3QgbWZhRW1haWxDb250ZW50ID0gbWZhRW1haWxUZW1wbGF0ZShtZmFfY29kZSk7XG4gICAgICBVc2VyLnNlbmRNYWlsV2l0aE5vZGVtYWlsZXIoe1xuICAgICAgICBlbWFpbDogcmVxLmJvZHkuZW1haWwsXG4gICAgICAgIHN1YmplY3Q6ICdCcm9ncmFtbWVycyBhdXRoZW50aWNhdGlvbiBjb2RlJyxcbiAgICAgICAgY29udGVudDogbWZhRW1haWxDb250ZW50LFxuICAgICAgfSk7XG4gICAgICBsb2dMb2dpbih1c2VyLmVtYWlsLCB1c2VyKTtcbiAgICAgIHJldHVybiByZXNcbiAgICAgICAgLnN0YXR1cygyMDApXG4gICAgICAgIC5qc29uKHsgbWVzc2FnZTogJ1BsZWFzZSBjaGVjayB5b3VyIGVtYWlsIGZvciBhdXRoZW50aWNhdGlvbiBjb2RlJyB9KTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgbG9nRXJyb3IocmVxLCBlcnJvcik7XG4gICAgICByZXNcbiAgICAgICAgLnN0YXR1cyg1MDApXG4gICAgICAgIC5qc29uKHsgZXJyb3I6IGVycm9yLm1lc3NhZ2UsIG1lc3NhZ2U6ICdGYWlsZWQgdG8gbG9naW4gYSB1c2VyJyB9KTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogTG9naW4gYSB1c2VyLlxuICAgKiBnZXR0aW5nIHVzZXIgaW5mb3JtYXRpb25cbiAgICogQHBhcmFtIHtPYmplY3R9IHJlcVxuICAgKiBAcGFyYW0ge09iamVjdH0gcmVzXG4gICAqIEByZXR1cm4ge09iamVjdH0gcmVzXG4gICAqL1xuICBzdGF0aWMgYXN5bmMgZ2V0UHJvZmlsZShyZXEsIHJlcykge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCB7XG4gICAgICAgIGF2YXRhcixcbiAgICAgICAgbWZhX2VuYWJsZWQgPSBmYWxzZSxcbiAgICAgICAgY292ZXJfaW1hZ2UsXG4gICAgICAgIGVtYWlsLFxuICAgICAgICB1c2VybmFtZSxcbiAgICAgICAgcm9sZSxcbiAgICAgICAgZ2VuZGVyLFxuICAgICAgICBpZFxuICAgICAgfSA9IHJlcS51c2VyO1xuICAgICAgdmlld1Byb2ZpbGUocmVxLCByZXEudXNlcik7XG4gICAgICByZXMuc3RhdHVzKDIwMCkuanNvbih7XG4gICAgICAgIGF2YXRhcixcbiAgICAgICAgY292ZXJfaW1hZ2UsXG4gICAgICAgIG1mYV9lbmFibGVkLFxuICAgICAgICBlbWFpbCxcbiAgICAgICAgdXNlcm5hbWUsXG4gICAgICAgIHJvbGUsXG4gICAgICAgIGdlbmRlcixcbiAgICAgICAgaWRcbiAgICAgIH0pO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBsb2dFcnJvcihyZXEsIGVycm9yKTtcbiAgICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgZXJyb3I6IGVycm9yLm1lc3NhZ2UsIG1lc3NhZ2U6ICdzZXJ2ZXIgZXJyb3InIH0pO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBMb2dpbiBhIHVzZXIuXG4gICAqIGdldHRpbmcgdXNlciBpbmZvcm1hdGlvblxuICAgKiBAcGFyYW0ge09iamVjdH0gcmVxXG4gICAqIEBwYXJhbSB7T2JqZWN0fSByZXNcbiAgICogQHJldHVybiB7T2JqZWN0fSByZXNcbiAgICovXG4gIHN0YXRpYyBhc3luYyBlZGl0UHJvZmlsZShyZXEsIHJlcykge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCB7IGVycm9yLCB2YWx1ZSB9ID0gYXdhaXQgVXNlci5lZGl0UHJvZmlsZShyZXEuYm9keSwgcmVxLnVzZXIpO1xuICAgICAgaWYgKGVycm9yKSByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oZXJyb3IpO1xuICAgICAgY29uc3QgeyBhdmF0YXIsIGNvdmVyX2ltYWdlLCBlbWFpbCwgdXNlcm5hbWUsIHJvbGUsIGdlbmRlciB9ID0gdmFsdWU7XG4gICAgICBjb25zdCB0b2tlbiA9IEp3dC5nZW5lcmF0ZVRva2VuKHsgZW1haWwgfSk7XG4gICAgICBhd2FpdCBkYi51c2Vycy51cGRhdGUoeyBlbWFpbF90b2tlbjogdG9rZW4gfSwgeyB3aGVyZTogeyBlbWFpbCB9IH0pO1xuICAgICAgZWRpdFByb2ZpbGVzKHJlcSwgdmFsdWUpO1xuICAgICAgcmVzLnN0YXR1cygyMDApLmpzb24oe1xuICAgICAgICBhdmF0YXIsXG4gICAgICAgIGNvdmVyX2ltYWdlLFxuICAgICAgICBlbWFpbCxcbiAgICAgICAgdXNlcm5hbWUsXG4gICAgICAgIHJvbGUsXG4gICAgICAgIGdlbmRlcixcbiAgICAgICAgdG9rZW4sXG4gICAgICAgIGVtYWlsX3Rva2VuOiB0b2tlbixcbiAgICAgIH0pO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBsb2dFcnJvcihyZXEsIGVycm9yKTtcbiAgICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgZXJyb3I6IGVycm9yLm1lc3NhZ2UsIG1lc3NhZ2U6ICdzZXJ2ZXIgZXJyb3InIH0pO1xuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyBhc3luYyBlbmFibGVNZmEocmVxLCByZXMpIHtcbiAgICB0cnkge1xuICAgICAgYXdhaXQgZGIudXNlcnMudXBkYXRlKFxuICAgICAgICB7IG1mYV9lbmFibGVkOiB0cnVlIH0sXG4gICAgICAgIHsgd2hlcmU6IHsgZW1haWw6IHJlcS51c2VyLmVtYWlsIH0gfVxuICAgICAgKTtcbiAgICAgIGVuYWJsZU1mYUxvZyhyZXEpO1xuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoMjAwKS5qc29uKHtcbiAgICAgICAgbWVzc2FnZTogJ011bHRpLWZhY3RvciBhdXRoZW50aWNhdGlvbiBpcyBlbmFibGVkJyxcbiAgICAgIH0pO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBsb2dFcnJvcihyZXEsIGVycm9yKTtcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDUwMCkuanNvbih7XG4gICAgICAgIGVycm9yOiBlcnJvci5tZXNzYWdlLFxuICAgICAgICBtZXNzYWdlOiAnRmFpbGVkIHRvIGVuYWJsZSBNdWx0aS1mYWN0b3IgYXV0aGVudGljYXRpb24nLFxuICAgICAgfSk7XG4gICAgfVxuICB9XG5cbiAgc3RhdGljIGFzeW5jIGRpc2FibGVNZmEocmVxLCByZXMpIHtcbiAgICB0cnkge1xuICAgICAgYXdhaXQgZGIudXNlcnMudXBkYXRlKFxuICAgICAgICB7IG1mYV9lbmFibGVkOiBmYWxzZSB9LFxuICAgICAgICB7IHdoZXJlOiB7IGVtYWlsOiByZXEudXNlci5lbWFpbCB9IH1cbiAgICAgICk7XG4gICAgICBkaXNhYmxlTWZhTG9nKHJlcSk7XG4gICAgICByZXR1cm4gcmVzLnN0YXR1cygyMDApLmpzb24oe1xuICAgICAgICBtZXNzYWdlOiAnTXVsdGktZmFjdG9yIGF1dGhlbnRpY2F0aW9uIGlzIGRpc2FibGVkJyxcbiAgICAgIH0pO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBsb2dFcnJvcihyZXEsIGVycm9yKTtcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDUwMCkuanNvbih7XG4gICAgICAgIGVycm9yOiBlcnJvci5tZXNzYWdlLFxuICAgICAgICBtZXNzYWdlOiAnRmFpbGVkIHRvIGRpc2FibGUgTXVsdGktZmFjdG9yIGF1dGhlbnRpY2F0aW9uJyxcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyBhc3luYyB2ZXJpZnlNZmFDb2RlKHJlcSwgcmVzKSB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IFtpc1ZhbGlkLCBtZXNzYWdlXSA9IGF3YWl0IFVzZXIuaXNNZmFWYWxpZChcbiAgICAgICAgcmVxLmJvZHkuZW1haWwsXG4gICAgICAgIHJlcS5ib2R5Lm1mYV9jb2RlXG4gICAgICApO1xuXG4gICAgICBpZiAoaXNWYWxpZCkge1xuICAgICAgICBjb25zdCB0b2tlbiA9IGp3dC5zaWduKHsgZW1haWw6IHJlcS5ib2R5LmVtYWlsIH0sIEpXVF9TRUNSRVQpO1xuICAgICAgICByZXEudXNlciA9IGF3YWl0IHVzZXJzLmZpbmRPbmUoeyB3aGVyZTogeyBlbWFpbDogcmVxLmJvZHkuZW1haWwgfSB9KTtcbiAgICAgICAgdmVyaWZpZWRNZmFMb2cocmVxLCB0b2tlbik7XG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDIwMCkuanNvbih7IGVtYWlsOiByZXEuYm9keS5lbWFpbCwgdG9rZW4gfSk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMykuanNvbih7IG1lc3NhZ2UgfSk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGxvZ0Vycm9yKHJlcSwgZXJyb3IpO1xuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNTAwKS5qc29uKHtcbiAgICAgICAgZXJyb3I6IGVycm9yLm1lc3NhZ2UsXG4gICAgICAgIG1lc3NhZ2U6ICdGYWlsZWQgdG8gdmVyaWZ5IGF1dGhlbnRpY2F0aW9uIGNvZGUnLFxuICAgICAgfSk7XG4gICAgfVxuICB9XG5cbiAgc3RhdGljIGFzeW5jIENyZWF0ZUFkbWluKHJlcSwgcmVzKSB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IG5ld0FkbWluZW1haWwgPSByZXEucGFyYW1zLmVtYWlsO1xuICAgICAgY29uc3QgTnd1c2VyID0gYXdhaXQgdXNlcnMuZmluZE9uZSh7IHdoZXJlOiB7IGVtYWlsOiBuZXdBZG1pbmVtYWlsIH0gfSk7XG4gICAgICBpZiAoIU53dXNlcikge1xuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDQpLmpzb24oe1xuICAgICAgICAgIHN0YXR1c0NvZGU6IDQwNCxcbiAgICAgICAgICBtZXNzYWdlOiAneW91IGFyZSB0cnlpbmcgdG8gbWFrZSBhZG1pbiB1c2VyIHRoYXQgZG9lcyBub3QgZXhpc3QnLFxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIE53dXNlci5yb2xlID0gJ2FkbWluJztcbiAgICAgIGF3YWl0IE53dXNlci5zYXZlKCk7XG4gICAgICBjb25zdCBuZXdOb3RpZmljYXRpb24gPSB7XG4gICAgICAgIG1lc3NhZ2U6ICd5b3UgaGF2ZSBiZWVuIGFzc2lnbmVkIG5ldyByb2xlIHdoaWNoIGlzIGFkbWluJyxcbiAgICAgICAgdHlwZTogJ3VzZXIgcm9sZSB1cGRhdGVzJyxcbiAgICAgIH07XG4gICAgICBjb25zdCBuZXdOID0geyAuLi5uZXdOb3RpZmljYXRpb24gfTtcbiAgICAgIG5ld04ucmVjZWl2ZXJJZCA9IE53dXNlci5pZDtcbiAgICAgIGNvbnN0IHJlY2VpdmVyID0ge1xuICAgICAgICB1c2VybmFtZTogTnd1c2VyLnVzZXJuYW1lLFxuICAgICAgICBlbWFpbDogTnd1c2VyLmVtYWlsLFxuICAgICAgfTtcbiAgICAgIGNvbnN0IG5vdGlmeUVtYWlsID0gbm90aWZpY2F0aW9uVGVtcGxhdGUyKFxuICAgICAgICByZWNlaXZlci51c2VybmFtZSxcbiAgICAgICAgbmV3Ti5tZXNzYWdlLFxuICAgICAgICBuZXdOLnR5cGVcbiAgICAgICk7XG4gICAgICBzZW5kRW1haWwoXG4gICAgICAgIGVtYWlsQ29uZmlnKHtcbiAgICAgICAgICBlbWFpbDogcmVjZWl2ZXIuZW1haWwsXG4gICAgICAgICAgc3ViamVjdDogJ05vdGlmaWNhdGlvbiAhISAnLFxuICAgICAgICAgIGNvbnRlbnQ6IG5vdGlmeUVtYWlsLFxuICAgICAgICB9KVxuICAgICAgKTtcbiAgICAgIGF3YWl0IG5vdGlmaWNhdGlvbnMuY3JlYXRlKG5ld04pO1xuICAgICAgY3JlYXRlQWRtaW5Mb2cocmVxLCBOd3VzZXIpO1xuICAgICAgcmVzLnN0YXR1cygyMDApLmpzb24oe1xuICAgICAgICB1c2VyOiBOd3VzZXIsXG4gICAgICAgIG1lc3NhZ2U6IGB1c2VyICR7Tnd1c2VyLnVzZXJuYW1lfSBzdWNlc3NmdWxseSBtYWRlIGFkbWluYCxcbiAgICAgIH0pO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBsb2dFcnJvcihyZXEsIGVycm9yKTtcbiAgICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgJ0Vycm9yOic6IGVycm9yIH0pO1xuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyBhc3luYyBzZW5kUmVzZXRQYXNzd29yZENvZGUocmVxLCByZXMpIHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgeyBlbWFpbCwgbmV3UGFzc3dvcmQgfSA9IHJlcS5ib2R5O1xuXG4gICAgICBjb25zdCB1c2VyID0gYXdhaXQgZGIudXNlcnMuZmluZE9uZSh7IHdoZXJlOiB7IGVtYWlsIH0gfSk7XG4gICAgICBpZiAoIXVzZXIpIHtcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA0KS5qc29uKHsgbWVzc2FnZTogJ1VzZXIgbm90IGZvdW5kJyB9KTtcbiAgICAgIH1cblxuICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGNhbWVsY2FzZVxuICAgICAgY29uc3QgcmVzZXRUb2tlbiA9IGp3dC5zaWduKFxuICAgICAgICB7IGVtYWlsLCBuZXdQYXNzd29yZCB9LFxuICAgICAgICBwcm9jZXNzLmVudi5SRVNFVF9QQVNTV09SRF9TRUNSRVQsXG4gICAgICAgIHsgZXhwaXJlc0luOiAnMWgnIH1cbiAgICAgICk7XG4gICAgICBjb25zdCByZXNldFBhc3N3b3JkQ29udGVudCA9IHBhc3N3b3JkUmVzZXRFbWFpbFRlbXBsYXRlKHJlc2V0VG9rZW4pO1xuICAgICAgc2VuZEVtYWlsKFxuICAgICAgICBlbWFpbENvbmZpZyh7XG4gICAgICAgICAgZW1haWwsXG4gICAgICAgICAgc3ViamVjdDogJ0Jyb2dyYW1tZXJzIHJlc2V0IHBhc3N3b3JkJyxcbiAgICAgICAgICBjb250ZW50OiByZXNldFBhc3N3b3JkQ29udGVudCxcbiAgICAgICAgfSlcbiAgICAgICk7XG4gICAgICByZXNldFBhc3N3b3JkTG9nKHJlcSk7XG4gICAgICByZXMuc3RhdHVzKDIwMCkuanNvbih7IG1lc3NhZ2U6ICdDaGVjayB5b3VyIGVtYWlsIGZvciByZXNldCBsaW5rJyB9KTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgbG9nRXJyb3IocmVxLCBlcnJvcik7XG4gICAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7IG1lc3NhZ2U6IGVycm9yLm1lc3NhZ2UgfSk7XG4gICAgfVxuICB9XG5cbiAgc3RhdGljIGFzeW5jIHZlcmlmeVJlc2V0UGFzc3dvcmRDb2RlKHJlcSwgcmVzKSB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHsgcmVzZXRUb2tlbiB9ID0gcmVxLnBhcmFtcztcbiAgXG4gICAgICBpZiAocmVzZXRUb2tlbikge1xuICAgICAgICBqd3QudmVyaWZ5KFxuICAgICAgICAgIHJlc2V0VG9rZW4sXG4gICAgICAgICAgcHJvY2Vzcy5lbnYuUkVTRVRfUEFTU1dPUkRfU0VDUkVULFxuICAgICAgICAgIGFzeW5jIChlcnIsIGRlY29kZWRUb2tlbikgPT4ge1xuICAgICAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgICAgICByZXR1cm4gcmVzLnJlZGlyZWN0KGAke3Byb2Nlc3MuZW52LkZST05URU5EfS92ZXJpZnlmYWlsYCk7XG4gICAgICAgICAgICB9XG4gIFxuICAgICAgICAgICAgY29uc3QgeyBlbWFpbCwgbmV3UGFzc3dvcmQgfSA9IGRlY29kZWRUb2tlbjtcbiAgICAgICAgICAgIGNvbnN0IHVzZXIgPSBhd2FpdCB1c2Vycy5maW5kT25lKHsgd2hlcmU6IHsgZW1haWwgfSB9KTtcbiAgICAgICAgICAgIGlmICghdXNlcikge1xuICAgICAgICAgICAgICByZXR1cm4gcmVzLnJlZGlyZWN0KGAke3Byb2Nlc3MuZW52LkZST05URU5EfS92ZXJpZnlmYWlsYCk7XG4gICAgICAgICAgICB9XG4gIFxuICAgICAgICAgICAgdXNlci52ZXJpZmllZCA9IHRydWU7XG4gICAgICAgICAgICB1c2VyLnBhc3N3b3JkID0gYmNyeXB0Lmhhc2hTeW5jKG5ld1Bhc3N3b3JkLCBzYWx0Um91bmRzKTtcbiAgICAgICAgICAgIGF3YWl0IHVzZXIuc2F2ZSgpO1xuICAgICAgICAgICAgdmVyaWZ5UGFzc3dvcmRMb2cocmVxLCB1c2VyKTtcbiAgICAgICAgICAgIHJldHVybiByZXMucmVkaXJlY3QoYCR7cHJvY2Vzcy5lbnYuRlJPTlRFTkR9L3ZlcmlmeXBhc3NgKTtcbiAgICAgICAgICB9XG4gICAgICAgICk7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGxvZ0Vycm9yKHJlcSwgZXJyb3IpO1xuICAgICAgcmVzLnJlZGlyZWN0KGAke3Byb2Nlc3MuZW52LkZST05URU5EfS92ZXJpZnlmYWlsYCk7XG4gICAgfVxuICB9XG5cbiAgc3RhdGljIGFzeW5jIGNoYW5nZVBhc3N3b3JkKHJlcSwgcmVzKSB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHsgb2xkUGFzc3dvcmQsIG5ld1Bhc3N3b3JkIH0gPSByZXEuYm9keTtcblxuICAgICAgLy8gY2hlY2sgaWYgdGhlIG9sZCBwYXNzd29yZCBtYXRjaGVzIHRoZSBvbmUgaW4gdGhlIGRhdGFiYXNlXG4gICAgICBjb25zdCBpc1Bhc3N3b3JkVmFsaWQgPSBhd2FpdCBiY3J5cHQuY29tcGFyZShcbiAgICAgICAgb2xkUGFzc3dvcmQsXG4gICAgICAgIHJlcS51c2VyLnBhc3N3b3JkXG4gICAgICApO1xuICAgICAgaWYgKCFpc1Bhc3N3b3JkVmFsaWQpIHtcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAxKS5qc29uKHsgbWVzc2FnZTogJ0luY29ycmVjdCBvbGQgcGFzc3dvcmQnIH0pO1xuICAgICAgfVxuXG4gICAgICAvLyB2YWxpZGF0ZSB0aGUgbmV3IHBhc3N3b3JkXG4gICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgb3BlcmF0b3ItbGluZWJyZWFrXG4gICAgICBjb25zdCBwYXNzd29yZFJlZ2V4ID1cbiAgICAgICAgL14oPz0uKlxcZCkoPz0uKlthLXpdKSg/PS4qW0EtWl0pKD89LipbIUAjJCVeJiooKV8rXFwtPVtcXF17fTsnOlwiXFxcXHwsLjw+Lz9dKS57OCx9JC87XG4gICAgICBpZiAoIXBhc3N3b3JkUmVnZXgudGVzdChuZXdQYXNzd29yZCkpIHtcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAxKS5qc29uKHtcbiAgICAgICAgICBtZXNzYWdlOlxuICAgICAgICAgICAgJ05ldyBwYXNzd29yZCBtdXN0IGJlIGF0IGxlYXN0IDggY2hhcmFjdGVycyBsb25nIGFuZCBjb250YWluIGF0IGxlYXN0IG9uZSB1cHBlcmNhc2UgbGV0dGVyLCBvbmUgbG93ZXJjYXNlIGxldHRlciwgb25lIG51bWJlciwgYW5kIG9uZSBzeW1ib2wuJyxcbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIC8vIGhhc2ggdGhlIG5ldyBwYXNzd29yZCBhbmQgdXBkYXRlIHRoZSBkYXRhYmFzZVxuICAgICAgY29uc3QgaGFzaGVkUGFzc3dvcmQgPSBhd2FpdCBiY3J5cHQuaGFzaChuZXdQYXNzd29yZCwgc2FsdFJvdW5kcyk7XG4gICAgICByZXEudXNlci5wYXNzd29yZCA9IGhhc2hlZFBhc3N3b3JkO1xuICAgICAgcmVxLnVzZXIubGFzdFRpbWVQYXNzd29yZFVwZGF0ZWQgPSBtb21lbnQoKTtcbiAgICAgIHJlcS51c2VyLm11c3RVcGRhdGVQYXNzd29yZCA9IGZhbHNlO1xuICAgICAgYXdhaXQgcmVxLnVzZXIuc2F2ZSgpO1xuICAgICAgLy8gRW1pdCBldmVudCB0byBub3RpZnkgcGFzc3dvcmQgdXBkYXRlXG4gICAgICBldmVudEVtaXR0ZXIuZW1pdCgncGFzc3dvcmRVcGRhdGVkJywgcmVxLnVzZXIpO1xuICAgICAgY2hhbmdlUGFzc3dvcmRMb2cocmVxLCByZXEudXNlcik7XG4gICAgICByZXMuc3RhdHVzKDIwMCkuanNvbih7IG1lc3NhZ2U6ICdQYXNzd29yZCB1cGRhdGVkIHN1Y2Nlc3NmdWxseScgfSk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGxvZ0Vycm9yKHJlcSwgZXJyb3IpO1xuICAgICAgcmVzXG4gICAgICAgIC5zdGF0dXMoNTAwKVxuICAgICAgICAuanNvbih7IGVycm9yOiBlcnJvci5tZXNzYWdlLCBtZXNzYWdlOiAnRmFpbGVkIHRvIGNoYW5nZSBwYXNzd29yZCcgfSk7XG4gICAgfVxuICB9XG4gIC8vIGFkbWluIERpc2FibGUgdXNlciBkdWUgdG8gc29tZSByZWFzb25zMlxuXG4gIHN0YXRpYyBhc3luYyBkaXNhYmxlVXNlcihyZXEsIHJlcykge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCB1c2VyID0gYXdhaXQgdXNlcnMuZmluZE9uZSh7IHdoZXJlOiB7IGlkOiByZXEucGFyYW1zLnVzZXJJZCB9IH0pO1xuICBcbiAgICAgIGlmICghdXNlcikge1xuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDQpLmpzb24oeyBlcnJvcjogJ1VzZXIgbm90IGZvdW5kJyB9KTtcbiAgICAgIH1cbiAgXG4gICAgICB1c2VyLmRpc2FibGVkVXNlciA9ICF1c2VyLmRpc2FibGVkVXNlcjtcbiAgXG4gICAgICBpZiAodXNlci5kaXNhYmxlZFVzZXIpIHtcbiAgICAgICAgdXNlci5kaXNhYmxlZFJlYXNvbiA9IHJlcS5ib2R5LnJlYXNvbjtcbiBcbiAgICAgICAgc2VuZEVtYWlsKFxuICAgICAgICAgIGVtYWlsQ29uZmlnKHtcbiAgICAgICAgICAgIGVtYWlsOiB1c2VyLmVtYWlsLFxuICAgICAgICAgICAgc3ViamVjdDogJ1lvdXIgYWNjb3VudCBoYXMgYmVlbiBkaXNhYmxlZCcsXG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tdW5kZWZcbiAgICAgICAgICAgIGNvbnRlbnQ6IGRpc2FibGVFbWFpbFRlbXBsYXRlKHVzZXIudXNlcm5hbWUsIHVzZXIuZGlzYWJsZWRSZWFzb24pLFxuICAgICAgICAgIH0pXG4gICAgICAgICk7XG4gICAgICAgIGRpc2FibGVBY2NvdW50TG9nKHJlcSwgdXNlcik7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB1c2VyLmRpc2FibGVkUmVhc29uID0gbnVsbDtcbiAgICAgIH1cbiAgICAgICAgYXdhaXQgdXNlci5zYXZlKCk7XG5cbiAgICAgIGNvbnN0IG1lc3NhZ2UgPSB1c2VyLmRpc2FibGVkVXNlciA/ICdVc2VyIGFjY291bnQgZGlzYWJsZWQgc3VjY2Vzc2Z1bGx5JyA6ICdVc2VyIGFjY291bnQgZW5hYmxlZCBzdWNjZXNzZnVsbHknO1xuICAgICAgcmVzLnN0YXR1cygyMDApLmpzb24oeyBtZXNzYWdlIH0pO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBsb2dFcnJvcihyZXEsIGVycm9yKTtcbiAgICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgbWVzc2FnZTogZXJyb3IubWVzc2FnZSB9KTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogTG9nb3V0IGEgdXNlciBieSBpbnZhbGlkYXRpbmcgdGhlIEpXVCB0b2tlbi5cbiAgICogQHBhcmFtIHtPYmplY3R9IHJlcSB2YWxpYWJsZVxuICAgKiBAcGFyYW0ge09iamVjdH0gcmVzIHZhbGlhYmxlXG4gICAqIEByZXR1cm4ge09iamVjdH0gcmVzXG4gICAqL1xuICBzdGF0aWMgYXN5bmMgbG9nb3V0KHJlcSwgcmVzKSB7XG4gICAgdHJ5IHtcbiAgICAgIGF3YWl0IFVzZXIubG9nb3V0KHJlcS5oZWFkZXJzLmF1dGhvcml6YXRpb24pO1xuICAgICAgbG9nTG9nb3V0KHJlcSk7XG4gICAgICByZXMuc3RhdHVzKDIwMCkuanNvbih7IG1lc3NhZ2U6ICdZb3UgbG9nZ2VkIG91dCBzdWNjZXNzZnVsbHknIH0pO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBsb2dFcnJvcihyZXEsIGVycm9yKTtcbiAgICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgbWVzc2FnZTogZXJyb3IubWVzc2FnZSB9KTtcbiAgICB9XG4gIH1cblxuICBzdGF0aWMgYXN5bmMgZ29vZ2xlQXV0aEhhbmRsZXIocmVxLCByZXMpIHtcbiAgICBjb25zdCB7IHZhbHVlIH0gPSByZXEudXNlci5lbWFpbHNbMF07XG4gICAgY29uc3QgeyBmYW1pbHlOYW1lIH0gPSByZXEudXNlci5uYW1lO1xuICAgIGNvbnN0IG5ld1VzZXIgPSB7XG4gICAgICB1c2VybmFtZTogZmFtaWx5TmFtZSxcbiAgICAgIGVtYWlsOiB2YWx1ZSxcbiAgICAgIGF2YXRhcjogcmVxLnVzZXIucGhvdG9zWzBdLnZhbHVlLFxuICAgICAgdmVyaWZpZWQ6IHRydWUsXG4gICAgICBwYXNzd29yZDogJzEyMzQ1JyxcbiAgICB9O1xuICAgIGNvbnN0IHsgaWQsIGVtYWlsIH0gPSBhd2FpdCBVc2VyLnJlZ2lzdGVyR29vZ2xlKG5ld1VzZXIpO1xuICAgIGNvbnN0IHVzZXJUb2tlbiA9IGp3dC5zaWduKHsgZW1haWw6IGVtYWlsLCBpZDogaWQgfSwgSldUX1NFQ1JFVCk7XG4gICAgcmVkaXJlY3RHb29nbGUoZW1haWwpO1xuICAgIHJldHVybiByZXMucmVkaXJlY3QoXG4gICAgICBgJHtwcm9jZXNzLmVudi5GUk9OVEVORF9VUkx9L2xvZ2luP2tleT0ke3VzZXJUb2tlbn0mZW1haWw9JHtlbWFpbH1gXG4gICAgKTtcbiAgfVxuXG4gIHN0YXRpYyBhc3luYyB1cGRhdGVBdmF0YXIocmVxLCByZXMpIHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgeyBlcnJvciwgdmFsdWUgfSA9IGF3YWl0IFVzZXIudXBkYXRlQXZhdGFyKHJlcS51c2VyLCByZXEuZmlsZSk7XG4gICAgICBpZiAoZXJyb3IpIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbihlcnJvcik7XG4gICAgICBjb25zdCB7IGF2YXRhciwgY292ZXJfaW1hZ2UsIGVtYWlsLCB1c2VybmFtZSwgcm9sZSwgZ2VuZGVyIH0gPSB2YWx1ZTtcbiAgICAgIHVwZGF0ZUF2YXRhckxvZyhyZXEsIHZhbHVlKTtcbiAgICAgIHJlcy5zdGF0dXMoMjAwKS5qc29uKHtcbiAgICAgICAgYXZhdGFyLFxuICAgICAgICBjb3Zlcl9pbWFnZSxcbiAgICAgICAgZW1haWwsXG4gICAgICAgIHVzZXJuYW1lLFxuICAgICAgICByb2xlLFxuICAgICAgICBnZW5kZXIsXG4gICAgICB9KTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgbG9nRXJyb3IocmVxLCBlcnJvcik7XG4gICAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7IG1lc3NhZ2U6IGVycm9yLm1lc3NhZ2UgfSk7XG4gICAgfVxuICB9XG5cbiAgc3RhdGljIGFzeW5jIHVwZGF0ZUNvdmVySW1hZ2UocmVxLCByZXMpIHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgeyBlcnJvciwgdmFsdWUgfSA9IGF3YWl0IFVzZXIudXBkYXRlQ292ZXJJbWFnZShyZXEudXNlciwgcmVxLmZpbGUpO1xuICAgICAgaWYgKGVycm9yKSByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oZXJyb3IpO1xuICAgICAgY29uc3QgeyBhdmF0YXIsIGNvdmVyX2ltYWdlLCBlbWFpbCwgdXNlcm5hbWUsIHJvbGUsIGdlbmRlciB9ID0gdmFsdWU7XG4gICAgICB1cGRhdGVJbWFnZUxvZyhyZXEsIHZhbHVlKTtcbiAgICAgIHJlcy5zdGF0dXMoMjAwKS5qc29uKHtcbiAgICAgICAgYXZhdGFyLFxuICAgICAgICBjb3Zlcl9pbWFnZSxcbiAgICAgICAgZW1haWwsXG4gICAgICAgIHVzZXJuYW1lLFxuICAgICAgICByb2xlLFxuICAgICAgICBnZW5kZXIsXG4gICAgICB9KTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgbG9nRXJyb3IocmVxLCBlcnJvcik7XG4gICAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7IG1lc3NhZ2U6IGVycm9yLm1lc3NhZ2UgfSk7XG4gICAgfVxuICB9XG59XG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFNQSxJQUFBQSxPQUFBLEdBQUFDLHNCQUFBLENBQUFDLE9BQUE7QUFFQSxJQUFBQyxhQUFBLEdBQUFGLHNCQUFBLENBQUFDLE9BQUE7QUFDQSxJQUFBRSxPQUFBLEdBQUFILHNCQUFBLENBQUFDLE9BQUE7QUFFQSxJQUFBRyxLQUFBLEdBQUFKLHNCQUFBLENBQUFDLE9BQUE7QUFFQSxJQUFBSSxPQUFBLEdBQUFDLHVCQUFBLENB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","map":{"version":3,"names":["_bcrypt","_interopRequireDefault","require","_jsonwebtoken","_dotenv","_user","_models","_interopRequireWildcard","_moment","_eventEmitter","_jwt","_emailConfig","_mailTemplate","_mail","_signup","_getRequireWildcardCache","nodeInterop","WeakMap","cacheBabelInterop","cacheNodeInterop","obj","__esModule","default","cache","has","get","newObj","hasPropertyDescriptor","Object","defineProperty","getOwnPropertyDescriptor","key","prototype","hasOwnProperty","call","desc","set","JWT_SECRET","process","env","exports","saltRounds","Number","SALTROUNDS","dotenv","config","Users","signup","req","res","data","User","register","body","signupToken","jwt","sign","email","userToken","Jwt","generateToken","email_token","save","verificationEmail","verifyEmailTemplate","sendEmail","emailConfig","subject","content","logSignup","logEmailSent","status","json","message","user","e","logError","error","verifyEmail","emailToken","params","token","verifyUser","findByEmailToken","verified","logVerifyEmail","send","setRole","role","users","findOne","where","newNotification","type","newN","receiverId","id","receiver","username","notifyEmail","notificationTemplate2","notifications","create","logSetRole","login","db","isPasswordValid","bcrypt","compareSync","password","disabledUser","mfa_enabled","mustUpdatePassword","logLogin","mfa_code","startMfaProcess","mfaEmailContent","mfaEmailTemplate","sendMailWithNodemailer","getProfile","avatar","cover_image","gender","viewProfile","editProfile","value","update","editProfiles","enableMfa","enableMfaLog","disableMfa","disableMfaLog","verifyMfaCode","isValid","isMfaValid","verifiedMfaLog","CreateAdmin","newAdminemail","Nwuser","statusCode","createAdminLog","sendResetPasswordCode","newPassword","resetToken","RESET_PASSWORD_SECRET","expiresIn","resetPasswordContent","passwordResetEmailTemplate","resetPasswordLog","verifyResetPasswordCode","verify","err","decodedToken","redirect","FRONTEND","hashSync","verifyPasswordLog","changePassword","oldPassword","compare","passwordRegex","test","hashedPassword","hash","lastTimePasswordUpdated","moment","eventEmitter","emit","changePasswordLog","disableUser","userId","disabledReason","reason","disableEmailTemplate","disableAccountLog","logout","headers","authorization","logLogout","googleAuthHandler","emails","familyName","name","newUser","photos","registerGoogle","redirectGoogle","FRONTEND_URL","updateAvatar","file","updateAvatarLog","updateCoverImage","updateImageLog"],"sourceRoot":"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/controllers/","sources":["users.controllers.js"],"sourcesContent":["/* eslint-disable no-trailing-spaces */\n/* eslint-disable indent */\n/* eslint-disable max-len */\n/* eslint-disable object-shorthand */\n/* eslint-disable camelcase */\n/* eslint-disable object-curly-newline */\nimport bcrypt from 'bcrypt';\n// eslint-disable-next-line import/no-unresolved, import/no-extraneous-dependencies\nimport jwt from 'jsonwebtoken';\nimport dotenv from 'dotenv';\n// eslint-disable-next-line import/no-named-as-default, import/no-named-as-default-member\nimport User from '../services/user.services';\n// eslint-disable-next-line import/no-duplicates\nimport db from '../database/models';\n// eslint-disable-next-line import/order, import/no-extraneous-dependencies\nimport moment from 'moment';\nimport eventEmitter from '../helpers/eventEmitter';\n\n// eslint-disable-next-line import/named, import/no-duplicates\nimport { users, notifications } from '../database/models';\n/* eslint-disable require-jsdoc */\nimport { Jwt } from '../helpers/jwt';\nimport { emailConfig } from '../helpers/emailConfig';\nimport {\n  verifyEmailTemplate,\n  mfaEmailTemplate,\n  passwordResetEmailTemplate,\n  disableEmailTemplate,\n  notificationTemplate2,\n} from '../helpers/mailTemplate';\nimport { sendEmail } from '../helpers/mail';\n\nimport {\n  logSignup,\n  redirectGoogle,\n  updateAvatarLog,\n  logError,\n  logSetRole,\n  logEmailSent,\n  updateImageLog,\n  logLogout,\n  logVerifyEmail,\n  logLogin,\n  viewProfile,\n  editProfiles,\n  enableMfaLog,\n  disableMfaLog,\n  verifiedMfaLog,\n  createAdminLog,\n  resetPasswordLog,\n  verifyPasswordLog,\n  changePasswordLog,\n  disableAccountLog,\n} from '../loggers/signup.logger';\n\n// eslint-disable-next-line operator-linebreak\nexport const JWT_SECRET = process.env.JWT_SECRET || 'secret';\nconst saltRounds = Number(process.env.SALTROUNDS) || 10;\n\ndotenv.config();\n/**\n * user model class\n */\nexport default class Users {\n  /**\n   * registering new user.\n   * getting user information\n   * @param {Object} req valiable\n   * @param {Object} res valiable\n   * @return {Object} res\n   */\n  static async signup(req, res) {\n    try {\n      const { data } = await User.register(req.body);\n      const signupToken = jwt.sign(\n        { email: data.email },\n        process.env.JWT_SECRET\n      );\n      const userToken = Jwt.generateToken({ data }, '1h');\n      if (userToken) {\n        data.email_token = userToken;\n      }\n      await data.save();\n      const verificationEmail = verifyEmailTemplate(userToken);\n      sendEmail(\n        emailConfig({\n          email: data.email,\n          subject: 'Brogrammers email verification',\n          content: verificationEmail,\n        })\n      );\n      logSignup(req);\n      logEmailSent(data.email);\n      return res.status(201).json({\n        message: 'Check your email to verify your account',\n        user: data,\n        signupToken,\n      });\n    } catch (e) {\n      logError(req, e);\n      return res.status(500).json({\n        error: e.message,\n        message: 'Failed to register a new user',\n      });\n    }\n  }\n\n  static async verifyEmail(req, res) {\n    try {\n      const emailToken = req.params.token;\n      Users.verifyUser(emailToken, res);\n    } catch (error) {\n      logError(req, error);\n      res.status(500).json({ 'Error:': error });\n    }\n  }\n\n  static async verifyUser(emailToken, res) {\n    const user = await User.findByEmailToken(emailToken);\n    if (!user) {\n      return res.status(404).json({\n        message: 'User not found',\n      });\n    }\n    user.email_token = null;\n    user.verified = true;\n    await user.save();\n    logVerifyEmail(user.email);\n    res.status(200).send({\n      message: 'Your account has been verified successfully!',\n      verified: true,\n    });\n  }\n\n  static async setRole(req, res) {\n    try {\n      const { role } = req.body;\n      const { email } = req.params;\n      await User.setRole(role, email);\n      const user = await users.findOne({ where: { email } });\n      const newNotification = {\n        message: `you have been assigned new role which is ${role}`,\n        type: 'user role updates',\n      };\n      const newN = { ...newNotification };\n      newN.receiverId = user.id;\n      const receiver = {\n        username: user.username,\n        email: user.email,\n      };\n      const notifyEmail = notificationTemplate2(\n        receiver.username,\n        newN.message,\n        newN.type\n      );\n      sendEmail(\n        emailConfig({\n          email: receiver.email,\n          subject: 'Notification !! role updates',\n          content: notifyEmail,\n        })\n      );\n      await notifications.create(newN);\n      logSetRole(req, role);\n      return res.status(200).json({\n        status: 200,\n        message: 'Role assigned to the user successfully',\n      });\n    } catch (error) {\n      logError(req, error);\n      return res.status(500).json({\n        status: 500,\n        message: error.message,\n      });\n    }\n  }\n\n  /**\n   * Login a user.\n   * getting user information\n   * @param {Object} req valiable\n   * @param {Object} res valiable\n   * @return {Object} res\n   */\n  static async login(req, res) {\n    try {\n      const user = await db.users.findOne({ where: { email: req.body.email } });\n\n      if (!user) {\n        return res.status(401).json({ message: 'Incorrect email or password' });\n      }\n\n      const isPasswordValid = bcrypt.compareSync(\n        req.body.password,\n        user.password\n      );\n      if (!isPasswordValid) {\n        return res.status(401).json({ message: 'Incorrect email or password' });\n      }\n\n      if (user.verified === false) {\n        return res.status(401).json({ message: 'Email is not verified' });\n      }\n      if (user.disabledUser === true) {\n        return res.status(401).json({ message: 'Your account is disabled!' });\n      }\n      if (user.mfa_enabled === false) {\n        const token = jwt.sign(\n          {\n            email: req.body.email,\n            id: user.id,\n            mustUpdatePassword: user.mustUpdatePassword,\n            username: user.username\n          },\n          JWT_SECRET\n        );\n        logLogin(user.email, user);\n        return res.status(200).json({\n          email: req.body.email,\n          token,\n          message: 'Login Successfully',\n        });\n      }\n\n      // eslint-disable-next-line camelcase\n      const mfa_code = await User.startMfaProcess(req.body.email);\n      const mfaEmailContent = mfaEmailTemplate(mfa_code);\n      User.sendMailWithNodemailer({\n        email: req.body.email,\n        subject: 'Brogrammers authentication code',\n        content: mfaEmailContent,\n      });\n      logLogin(user.email, user);\n      return res\n        .status(200)\n        .json({ message: 'Please check your email for authentication code' });\n    } catch (error) {\n      logError(req, error);\n      res\n        .status(500)\n        .json({ error: error.message, message: 'Failed to login a user' });\n    }\n  }\n\n  /**\n   * Login a user.\n   * getting user information\n   * @param {Object} req\n   * @param {Object} res\n   * @return {Object} res\n   */\n  static async getProfile(req, res) {\n    try {\n      const {\n        avatar,\n        mfa_enabled = false,\n        cover_image,\n        email,\n        username,\n        role,\n        gender,\n        id\n      } = req.user;\n      viewProfile(req, req.user);\n      res.status(200).json({\n        avatar,\n        cover_image,\n        mfa_enabled,\n        email,\n        username,\n        role,\n        gender,\n        id\n      });\n    } catch (error) {\n      logError(req, error);\n      res.status(500).json({ error: error.message, message: 'server error' });\n    }\n  }\n\n  /**\n   * Login a user.\n   * getting user information\n   * @param {Object} req\n   * @param {Object} res\n   * @return {Object} res\n   */\n  static async editProfile(req, res) {\n    try {\n      const { error, value } = await User.editProfile(req.body, req.user);\n      if (error) return res.status(400).json(error);\n      const { avatar, cover_image, email, username, role, gender } = value;\n      const token = Jwt.generateToken({ email });\n      await db.users.update({ email_token: token }, { where: { email } });\n      editProfiles(req, value);\n      res.status(200).json({\n        avatar,\n        cover_image,\n        email,\n        username,\n        role,\n        gender,\n        token,\n        email_token: token,\n      });\n    } catch (error) {\n      logError(req, error);\n      res.status(500).json({ error: error.message, message: 'server error' });\n    }\n  }\n\n  static async enableMfa(req, res) {\n    try {\n      await db.users.update(\n        { mfa_enabled: true },\n        { where: { email: req.user.email } }\n      );\n      enableMfaLog(req);\n      return res.status(200).json({\n        message: 'Multi-factor authentication is enabled',\n      });\n    } catch (error) {\n      logError(req, error);\n      return res.status(500).json({\n        error: error.message,\n        message: 'Failed to enable Multi-factor authentication',\n      });\n    }\n  }\n\n  static async disableMfa(req, res) {\n    try {\n      await db.users.update(\n        { mfa_enabled: false },\n        { where: { email: req.user.email } }\n      );\n      disableMfaLog(req);\n      return res.status(200).json({\n        message: 'Multi-factor authentication is disabled',\n      });\n    } catch (error) {\n      logError(req, error);\n      return res.status(500).json({\n        error: error.message,\n        message: 'Failed to disable Multi-factor authentication',\n      });\n    }\n  }\n\n  static async verifyMfaCode(req, res) {\n    try {\n      const [isValid, message] = await User.isMfaValid(\n        req.body.email,\n        req.body.mfa_code\n      );\n\n      if (isValid) {\n        const token = jwt.sign({ email: req.body.email }, JWT_SECRET);\n        req.user = await users.findOne({ where: { email: req.body.email } });\n        verifiedMfaLog(req, token);\n        return res.status(200).json({ email: req.body.email, token });\n      }\n\n      return res.status(403).json({ message });\n    } catch (error) {\n      logError(req, error);\n      return res.status(500).json({\n        error: error.message,\n        message: 'Failed to verify authentication code',\n      });\n    }\n  }\n\n  static async CreateAdmin(req, res) {\n    try {\n      const newAdminemail = req.params.email;\n      const Nwuser = await users.findOne({ where: { email: newAdminemail } });\n      if (!Nwuser) {\n        return res.status(404).json({\n          statusCode: 404,\n          message: 'you are trying to make admin user that does not exist',\n        });\n      }\n      Nwuser.role = 'admin';\n      await Nwuser.save();\n      const newNotification = {\n        message: 'you have been assigned new role which is admin',\n        type: 'user role updates',\n      };\n      const newN = { ...newNotification };\n      newN.receiverId = Nwuser.id;\n      const receiver = {\n        username: Nwuser.username,\n        email: Nwuser.email,\n      };\n      const notifyEmail = notificationTemplate2(\n        receiver.username,\n        newN.message,\n        newN.type\n      );\n      sendEmail(\n        emailConfig({\n          email: receiver.email,\n          subject: 'Notification !! ',\n          content: notifyEmail,\n        })\n      );\n      await notifications.create(newN);\n      createAdminLog(req, Nwuser);\n      res.status(200).json({\n        user: Nwuser,\n        message: `user ${Nwuser.username} sucessfully made admin`,\n      });\n    } catch (error) {\n      logError(req, error);\n      res.status(500).json({ 'Error:': error });\n    }\n  }\n\n  static async sendResetPasswordCode(req, res) {\n    try {\n      const { email, newPassword } = req.body;\n\n      const user = await db.users.findOne({ where: { email } });\n      if (!user) {\n        return res.status(404).json({ message: 'User not found' });\n      }\n\n      // eslint-disable-next-line camelcase\n      const resetToken = jwt.sign(\n        { email, newPassword },\n        process.env.RESET_PASSWORD_SECRET,\n        { expiresIn: '1h' }\n      );\n      const resetPasswordContent = passwordResetEmailTemplate(resetToken);\n      sendEmail(\n        emailConfig({\n          email,\n          subject: 'Brogrammers reset password',\n          content: resetPasswordContent,\n        })\n      );\n      resetPasswordLog(req);\n      res.status(200).json({ message: 'Check your email for reset link' });\n    } catch (error) {\n      logError(req, error);\n      res.status(500).json({ message: error.message });\n    }\n  }\n\n  static async verifyResetPasswordCode(req, res) {\n    try {\n      const { resetToken } = req.params;\n  \n      if (resetToken) {\n        jwt.verify(\n          resetToken,\n          process.env.RESET_PASSWORD_SECRET,\n          async (err, decodedToken) => {\n            if (err) {\n              return res.redirect(`${process.env.FRONTEND}/verifyfail`);\n            }\n  \n            const { email, newPassword } = decodedToken;\n            const user = await users.findOne({ where: { email } });\n            if (!user) {\n              return res.redirect(`${process.env.FRONTEND}/verifyfail`);\n            }\n  \n            user.verified = true;\n            user.password = bcrypt.hashSync(newPassword, saltRounds);\n            await user.save();\n            verifyPasswordLog(req, user);\n            return res.redirect(`${process.env.FRONTEND}/verifypass`);\n          }\n        );\n      }\n    } catch (error) {\n      logError(req, error);\n      res.redirect(`${process.env.FRONTEND}/verifyfail`);\n    }\n  }\n\n  static async changePassword(req, res) {\n    try {\n      const { oldPassword, newPassword } = req.body;\n\n      // check if the old password matches the one in the database\n      const isPasswordValid = await bcrypt.compare(\n        oldPassword,\n        req.user.password\n      );\n      if (!isPasswordValid) {\n        return res.status(401).json({ message: 'Incorrect old password' });\n      }\n\n      // validate the new password\n      // eslint-disable-next-line operator-linebreak\n      const passwordRegex =\n        /^(?=.*\\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[!@#$%^&*()_+\\-=[\\]{};':\"\\\\|,.<>/?]).{8,}$/;\n      if (!passwordRegex.test(newPassword)) {\n        return res.status(401).json({\n          message:\n            'New password must be at least 8 characters long and contain at least one uppercase letter, one lowercase letter, one number, and one symbol.',\n        });\n      }\n\n      // hash the new password and update the database\n      const hashedPassword = await bcrypt.hash(newPassword, saltRounds);\n      req.user.password = hashedPassword;\n      req.user.lastTimePasswordUpdated = moment();\n      req.user.mustUpdatePassword = false;\n      await req.user.save();\n      // Emit event to notify password update\n      eventEmitter.emit('passwordUpdated', req.user);\n      changePasswordLog(req, req.user);\n      res.status(200).json({ message: 'Password updated successfully' });\n    } catch (error) {\n      logError(req, error);\n      res\n        .status(500)\n        .json({ error: error.message, message: 'Failed to change password' });\n    }\n  }\n  // admin Disable user due to some reasons2\n\n  static async disableUser(req, res) {\n    try {\n      const user = await users.findOne({ where: { id: req.params.userId } });\n  \n      if (!user) {\n        return res.status(404).json({ error: 'User not found' });\n      }\n  \n      user.disabledUser = !user.disabledUser;\n  \n      if (user.disabledUser) {\n        user.disabledReason = req.body.reason;\n \n        sendEmail(\n          emailConfig({\n            email: user.email,\n            subject: 'Your account has been disabled',\n            // eslint-disable-next-line no-undef\n            content: disableEmailTemplate(user.username, user.disabledReason),\n          })\n        );\n        disableAccountLog(req, user);\n      } else {\n        user.disabledReason = null;\n      }\n        await user.save();\n\n      const message = user.disabledUser ? 'User account disabled successfully' : 'User account enabled successfully';\n      res.status(200).json({ message });\n    } catch (error) {\n      logError(req, error);\n      res.status(500).json({ message: error.message });\n    }\n  }\n\n  /**\n   * Logout a user by invalidating the JWT token.\n   * @param {Object} req valiable\n   * @param {Object} res valiable\n   * @return {Object} res\n   */\n  static async logout(req, res) {\n    try {\n      await User.logout(req.headers.authorization);\n      logLogout(req);\n      res.status(200).json({ message: 'You logged out successfully' });\n    } catch (error) {\n      logError(req, error);\n      res.status(500).json({ message: error.message });\n    }\n  }\n\n  static async googleAuthHandler(req, res) {\n    const { value } = req.user.emails[0];\n    const { familyName } = req.user.name;\n    const newUser = {\n      username: familyName,\n      email: value,\n      avatar: req.user.photos[0].value,\n      verified: true,\n      password: '12345',\n    };\n    const { id, email } = await User.registerGoogle(newUser);\n    const userToken = jwt.sign({ email: email, id: id }, JWT_SECRET);\n    redirectGoogle(email);\n    return res.redirect(\n      `${process.env.FRONTEND_URL}/login?key=${userToken}&email=${email}`\n    );\n  }\n\n  static async updateAvatar(req, res) {\n    try {\n      const { error, value } = await User.updateAvatar(req.user, req.file);\n      if (error) return res.status(400).json(error);\n      const { avatar, cover_image, email, username, role, gender } = value;\n      updateAvatarLog(req, value);\n      res.status(200).json({\n        avatar,\n        cover_image,\n        email,\n        username,\n        role,\n        gender,\n      });\n    } catch (error) {\n      logError(req, error);\n      res.status(500).json({ message: error.message });\n    }\n  }\n\n  static async updateCoverImage(req, res) {\n    try {\n      const { error, value } = await User.updateCoverImage(req.user, req.file);\n      if (error) return res.status(400).json(error);\n      const { avatar, cover_image, email, username, role, gender } = value;\n      updateImageLog(req, value);\n      res.status(200).json({\n        avatar,\n        cover_image,\n        email,\n        username,\n        role,\n        gender,\n      });\n    } catch (error) {\n      logError(req, error);\n      res.status(500).json({ message: error.message });\n    }\n  }\n}\n"],"mappings":"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"}},"mtime":1685643189440},"{\"assumptions\":{},\"sourceRoot\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/services/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"filename\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/services/user.services.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/node_modules/babel-plugin-add-module-exports/lib/index.js\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-runtime\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"regenerator\":true},\"externalDependencies\":[]},{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.21.0:development":{"value":{"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _bcrypt = _interopRequireDefault(require(\"bcrypt\"));\nvar _nodemailer = _interopRequireDefault(require(\"nodemailer\"));\nvar _models = require(\"../database/models\");\nvar _cloud = _interopRequireDefault(require(\"../helpers/cloud.upload\"));\n/* eslint-disable object-curly-newline */\n/* eslint-disable camelcase */\n/* eslint-disable no-unused-vars */\n/* eslint-disable object-shorthand */\n/* eslint-disable require-jsdoc */\n\n// eslint-disable-next-line import/no-extraneous-dependencies, import/no-unresolved\n\n// eslint-disable-next-line import/named\n\nconst saltRounds = Number(process.env.SALTROUNDS) || 10;\n\n/**\n * class for all user services\n */\nclass User {\n  /**\n   * function to register user\n   * @param {Object} data the information for user to be created\n   * @returns {data} for the created user\n   */\n  static async register(data) {\n    data.password = await _bcrypt.default.hash(data.password, saltRounds);\n    const {\n      username,\n      email,\n      password,\n      gender,\n      email_verified\n    } = data;\n    const user = await _models.users.create({\n      username,\n      email,\n      password,\n      gender,\n      email_verified\n    });\n    return {\n      data: user\n    };\n  }\n  static async registerGoogle(data) {\n    // eslint-disable-next-line no-return-await\n    return await _models.users.create(data);\n  }\n  static async startMfaProcess(email) {\n    const user = await _models.users.findOne({\n      where: {\n        email\n      }\n    });\n    user.mfa_code = Math.floor(Math.random() * 100000 + 10000);\n    const timeout = (process.env.MFA_MINS || 3) * 60 * 1000;\n    user.mfa_timeout = new Date(Date.now() + timeout);\n    await user.save();\n    return user.mfa_code;\n  }\n  static async isMfaValid(email, mfa_code) {\n    const user = await _models.users.findOne({\n      where: {\n        email\n      }\n    });\n    if (user.mfa_code !== mfa_code) {\n      return [false, 'Invalid authentication code'];\n    }\n    if (user.mfa_timeout < new Date()) {\n      return [false, 'Authentication code expired'];\n    }\n\n    // Force mfa code to expire after usage\n    user.mfa_timeout = new Date(Date.now() - 10 * 60 * 1000);\n    await user.save();\n    return [true];\n  }\n  static async findByEmailToken(emailToken) {\n    const user = await _models.users.findOne({\n      where: {\n        email_token: emailToken\n      }\n    });\n    return user;\n  }\n  static async updateUser(fields, id) {\n    // eslint-disable-next-line no-return-await\n    return await _models.users.update({\n      ...fields\n    }, {\n      where: {\n        id: id\n      }\n    });\n  }\n  static async editProfile(data, user) {\n    const {\n      email\n    } = data;\n    if (email && email !== null && email !== user.email) {\n      const exist = await _models.users.findOne({\n        where: {\n          email\n        }\n      });\n      if (exist && exist !== null) return {\n        error: 'email exists'\n      };\n    }\n    const {\n      avatar,\n      cover_image,\n      role,\n      password,\n      id,\n      verified,\n      // unchangeble fields in here\n      ...fields // changeble fields\n    } = data;\n    await this.updateUser(data, user.id);\n    const newUsers = {\n      ...user.dataValues,\n      ...data\n    };\n    return {\n      value: newUsers\n    };\n  }\n  static async sendMailWithNodemailer({\n    email,\n    subject,\n    content\n  }) {\n    const transporter = _nodemailer.default.createTransport({\n      service: 'gmail',\n      auth: {\n        user: process.env.APP_EMAIL,\n        pass: process.env.APP_EMAIL_PASSWORD\n      }\n    });\n    const mailOptions = {\n      from: process.env.APP_EMAIL,\n      to: email,\n      subject,\n      html: content\n    };\n    transporter.sendMail(mailOptions, (err, info) => {\n      if (err) return err;\n    });\n  }\n  static async setRole(role, email) {\n    await _models.users.update({\n      role\n    }, {\n      where: {\n        email\n      }\n    });\n  }\n  static async findById(id) {\n    const user = await _models.users.findOne({\n      where: {\n        id: `${id}`\n      }\n    });\n    return user;\n  }\n  static async logout(data) {\n    const token = data.split(' ')[1];\n    await _models.Blockedtoken.create({\n      token\n    });\n  }\n  static async getAllUsers() {\n    const allUsers = await _models.users.findAll();\n    return allUsers;\n  }\n  static async registerAdmin(data) {\n    data.password = await _bcrypt.default.hash(data.password, saltRounds);\n    const {\n      username,\n      email,\n      password,\n      gender,\n      email_verified,\n      role\n    } = data;\n    const user = await _models.users.create({\n      username,\n      email,\n      password,\n      gender,\n      email_verified,\n      role\n    });\n    return {\n      data: user\n    };\n  }\n  static async updateAvatar(user, image) {\n    const result = await _cloud.default.single(image);\n    const avatar = result.url;\n    await this.updateUser({\n      avatar\n    }, user.id);\n    const newUser = {\n      ...user.dataValues,\n      avatar\n    };\n    return {\n      value: newUser\n    };\n  }\n  static async updateCoverImage(user, image) {\n    const result = await _cloud.default.single(image);\n    const cover_image = result.url;\n    await this.updateUser({\n      cover_image\n    }, user.id);\n    const newUser = {\n      ...user.dataValues,\n      cover_image\n    };\n    return {\n      value: newUser\n    };\n  }\n}\nexports.default = User;\nmodule.exports = exports.default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfYmNyeXB0IiwiX2ludGVyb3BSZXF1aXJlRGVmYXVsdCIsInJlcXVpcmUiLCJfbm9kZW1haWxlciIsIl9tb2RlbHMiLCJfY2xvdWQiLCJzYWx0Um91bmRzIiwiTnVtYmVyIiwicHJvY2VzcyIsImVudiIsIlNBTFRST1VORFMiLCJVc2VyIiwicmVnaXN0ZXIiLCJkYXRhIiwicGFzc3dvcmQiLCJiY3J5cHQiLCJoYXNoIiwidXNlcm5hbWUiLCJlbWFpbCIsImdlbmRlciIsImVtYWlsX3ZlcmlmaWVkIiwidXNlciIsInVzZXJzIiwiY3JlYXRlIiwicmVnaXN0ZXJHb29nbGUiLCJzdGFydE1mYVByb2Nlc3MiLCJmaW5kT25lIiwid2hlcmUiLCJtZmFfY29kZSIsIk1hdGgiLCJmbG9vciIsInJhbmRvbSIsInRpbWVvdXQiLCJNRkFfTUlOUyIsIm1mYV90aW1lb3V0IiwiRGF0ZSIsIm5vdyIsInNhdmUiLCJpc01mYVZhbGlkIiwiZmluZEJ5RW1haWxUb2tlbiIsImVtYWlsVG9rZW4iLCJlbWFpbF90b2tlbiIsInVwZGF0ZVVzZXIiLCJmaWVsZHMiLCJpZCIsInVwZGF0ZSIsImVkaXRQcm9maWxlIiwiZXhpc3QiLCJlcnJvciIsImF2YXRhciIsImNvdmVyX2ltYWdlIiwicm9sZSIsInZlcmlmaWVkIiwibmV3VXNlcnMiLCJkYXRhVmFsdWVzIiwidmFsdWUiLCJzZW5kTWFpbFdpdGhOb2RlbWFpbGVyIiwic3ViamVjdCIsImNvbnRlbnQiLCJ0cmFuc3BvcnRlciIsIm5vZGVtYWlsZXIiLCJjcmVhdGVUcmFuc3BvcnQiLCJzZXJ2aWNlIiwiYXV0aCIsIkFQUF9FTUFJTCIsInBhc3MiLCJBUFBfRU1BSUxfUEFTU1dPUkQiLCJtYWlsT3B0aW9ucyIsImZyb20iLCJ0byIsImh0bWwiLCJzZW5kTWFpbCIsImVyciIsImluZm8iLCJzZXRSb2xlIiwiZmluZEJ5SWQiLCJsb2dvdXQiLCJ0b2tlbiIsInNwbGl0IiwiQmxvY2tlZHRva2VuIiwiZ2V0QWxsVXNlcnMiLCJhbGxVc2VycyIsImZpbmRBbGwiLCJyZWdpc3RlckFkbWluIiwidXBkYXRlQXZhdGFyIiwiaW1hZ2UiLCJyZXN1bHQiLCJDbG91ZFVwbG9hZCIsInNpbmdsZSIsInVybCIsIm5ld1VzZXIiLCJ1cGRhdGVDb3ZlckltYWdlIiwiZXhwb3J0cyIsImRlZmF1bHQiLCJtb2R1bGUiXSwic291cmNlUm9vdCI6Ii9Vc2Vycy9hbmRlbGFyd2FuZGEvRGVza3RvcC9lLWNvbW0tdGVhbS1icm9ncmFtbWVycy1ibi9zcmMvc2VydmljZXMvIiwic291cmNlcyI6WyJ1c2VyLnNlcnZpY2VzLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qIGVzbGludC1kaXNhYmxlIG9iamVjdC1jdXJseS1uZXdsaW5lICovXG4vKiBlc2xpbnQtZGlzYWJsZSBjYW1lbGNhc2UgKi9cbi8qIGVzbGludC1kaXNhYmxlIG5vLXVudXNlZC12YXJzICovXG4vKiBlc2xpbnQtZGlzYWJsZSBvYmplY3Qtc2hvcnRoYW5kICovXG4vKiBlc2xpbnQtZGlzYWJsZSByZXF1aXJlLWpzZG9jICovXG5pbXBvcnQgYmNyeXB0IGZyb20gJ2JjcnlwdCc7XG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgaW1wb3J0L25vLWV4dHJhbmVvdXMtZGVwZW5kZW5jaWVzLCBpbXBvcnQvbm8tdW5yZXNvbHZlZFxuaW1wb3J0IG5vZGVtYWlsZXIgZnJvbSAnbm9kZW1haWxlcic7XG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgaW1wb3J0L25hbWVkXG5pbXBvcnQgeyB1c2VycywgQmxvY2tlZHRva2VuIH0gZnJvbSAnLi4vZGF0YWJhc2UvbW9kZWxzJztcbmltcG9ydCBDbG91ZFVwbG9hZCBmcm9tICcuLi9oZWxwZXJzL2Nsb3VkLnVwbG9hZCc7XG5cbmNvbnN0IHNhbHRSb3VuZHMgPSBOdW1iZXIocHJvY2Vzcy5lbnYuU0FMVFJPVU5EUykgfHwgMTA7XG5cbi8qKlxuICogY2xhc3MgZm9yIGFsbCB1c2VyIHNlcnZpY2VzXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFVzZXIge1xuICAvKipcbiAgICogZnVuY3Rpb24gdG8gcmVnaXN0ZXIgdXNlclxuICAgKiBAcGFyYW0ge09iamVjdH0gZGF0YSB0aGUgaW5mb3JtYXRpb24gZm9yIHVzZXIgdG8gYmUgY3JlYXRlZFxuICAgKiBAcmV0dXJucyB7ZGF0YX0gZm9yIHRoZSBjcmVhdGVkIHVzZXJcbiAgICovXG4gIHN0YXRpYyBhc3luYyByZWdpc3RlcihkYXRhKSB7XG4gICAgZGF0YS5wYXNzd29yZCA9IGF3YWl0IGJjcnlwdC5oYXNoKGRhdGEucGFzc3dvcmQsIHNhbHRSb3VuZHMpO1xuXG4gICAgY29uc3QgeyB1c2VybmFtZSwgZW1haWwsIHBhc3N3b3JkLCBnZW5kZXIsIGVtYWlsX3ZlcmlmaWVkIH0gPSBkYXRhO1xuICAgIGNvbnN0IHVzZXIgPSBhd2FpdCB1c2Vycy5jcmVhdGUoe1xuICAgICAgdXNlcm5hbWUsXG4gICAgICBlbWFpbCxcbiAgICAgIHBhc3N3b3JkLFxuICAgICAgZ2VuZGVyLFxuICAgICAgZW1haWxfdmVyaWZpZWQsXG4gICAgfSk7XG5cbiAgICByZXR1cm4geyBkYXRhOiB1c2VyIH07XG4gIH1cblxuICBzdGF0aWMgYXN5bmMgcmVnaXN0ZXJHb29nbGUoZGF0YSkge1xuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1yZXR1cm4tYXdhaXRcbiAgICByZXR1cm4gYXdhaXQgdXNlcnMuY3JlYXRlKGRhdGEpO1xuICB9XG5cbiAgc3RhdGljIGFzeW5jIHN0YXJ0TWZhUHJvY2VzcyhlbWFpbCkge1xuICAgIGNvbnN0IHVzZXIgPSBhd2FpdCB1c2Vycy5maW5kT25lKHsgd2hlcmU6IHsgZW1haWwgfSB9KTtcbiAgICB1c2VyLm1mYV9jb2RlID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMTAwMDAwICsgMTAwMDApO1xuICAgIGNvbnN0IHRpbWVvdXQgPSAocHJvY2Vzcy5lbnYuTUZBX01JTlMgfHwgMykgKiA2MCAqIDEwMDA7XG4gICAgdXNlci5tZmFfdGltZW91dCA9IG5ldyBEYXRlKERhdGUubm93KCkgKyB0aW1lb3V0KTtcbiAgICBhd2FpdCB1c2VyLnNhdmUoKTtcbiAgICByZXR1cm4gdXNlci5tZmFfY29kZTtcbiAgfVxuXG4gIHN0YXRpYyBhc3luYyBpc01mYVZhbGlkKGVtYWlsLCBtZmFfY29kZSkge1xuICAgIGNvbnN0IHVzZXIgPSBhd2FpdCB1c2Vycy5maW5kT25lKHsgd2hlcmU6IHsgZW1haWwgfSB9KTtcbiAgICBpZiAodXNlci5tZmFfY29kZSAhPT0gbWZhX2NvZGUpIHtcbiAgICAgIHJldHVybiBbZmFsc2UsICdJbnZhbGlkIGF1dGhlbnRpY2F0aW9uIGNvZGUnXTtcbiAgICB9XG4gICAgaWYgKHVzZXIubWZhX3RpbWVvdXQgPCBuZXcgRGF0ZSgpKSB7XG4gICAgICByZXR1cm4gW2ZhbHNlLCAnQXV0aGVudGljYXRpb24gY29kZSBleHBpcmVkJ107XG4gICAgfVxuXG4gICAgLy8gRm9yY2UgbWZhIGNvZGUgdG8gZXhwaXJlIGFmdGVyIHVzYWdlXG4gICAgdXNlci5tZmFfdGltZW91dCA9IG5ldyBEYXRlKERhdGUubm93KCkgLSAxMCAqIDYwICogMTAwMCk7XG4gICAgYXdhaXQgdXNlci5zYXZlKCk7XG4gICAgcmV0dXJuIFt0cnVlXTtcbiAgfVxuXG4gIHN0YXRpYyBhc3luYyBmaW5kQnlFbWFpbFRva2VuKGVtYWlsVG9rZW4pIHtcbiAgICBjb25zdCB1c2VyID0gYXdhaXQgdXNlcnMuZmluZE9uZSh7IHdoZXJlOiB7IGVtYWlsX3Rva2VuOiBlbWFpbFRva2VuIH0gfSk7XG4gICAgcmV0dXJuIHVzZXI7XG4gIH1cblxuICBzdGF0aWMgYXN5bmMgdXBkYXRlVXNlcihmaWVsZHMsIGlkKSB7XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXJldHVybi1hd2FpdFxuICAgIHJldHVybiBhd2FpdCB1c2Vycy51cGRhdGUoeyAuLi5maWVsZHMgfSwgeyB3aGVyZTogeyBpZDogaWQgfSB9KTtcbiAgfVxuXG4gIHN0YXRpYyBhc3luYyBlZGl0UHJvZmlsZShkYXRhLCB1c2VyKSB7XG4gICAgY29uc3QgeyBlbWFpbCB9ID0gZGF0YTtcbiAgICBpZiAoZW1haWwgJiYgZW1haWwgIT09IG51bGwgJiYgZW1haWwgIT09IHVzZXIuZW1haWwpIHtcbiAgICAgIGNvbnN0IGV4aXN0ID0gYXdhaXQgdXNlcnMuZmluZE9uZSh7IHdoZXJlOiB7IGVtYWlsIH0gfSk7XG4gICAgICBpZiAoZXhpc3QgJiYgZXhpc3QgIT09IG51bGwpIHJldHVybiB7IGVycm9yOiAnZW1haWwgZXhpc3RzJyB9O1xuICAgIH1cbiAgICBjb25zdCB7XG4gICAgICBhdmF0YXIsXG4gICAgICBjb3Zlcl9pbWFnZSxcbiAgICAgIHJvbGUsXG4gICAgICBwYXNzd29yZCxcbiAgICAgIGlkLFxuICAgICAgdmVyaWZpZWQsIC8vIHVuY2hhbmdlYmxlIGZpZWxkcyBpbiBoZXJlXG4gICAgICAuLi5maWVsZHMgLy8gY2hhbmdlYmxlIGZpZWxkc1xuICAgIH0gPSBkYXRhO1xuXG4gICAgYXdhaXQgdGhpcy51cGRhdGVVc2VyKGRhdGEsIHVzZXIuaWQpO1xuICAgIGNvbnN0IG5ld1VzZXJzID0geyAuLi51c2VyLmRhdGFWYWx1ZXMsIC4uLmRhdGEgfTtcbiAgICByZXR1cm4geyB2YWx1ZTogbmV3VXNlcnMgfTtcbiAgfVxuXG4gIHN0YXRpYyBhc3luYyBzZW5kTWFpbFdpdGhOb2RlbWFpbGVyKHsgZW1haWwsIHN1YmplY3QsIGNvbnRlbnQgfSkge1xuICAgIGNvbnN0IHRyYW5zcG9ydGVyID0gbm9kZW1haWxlci5jcmVhdGVUcmFuc3BvcnQoe1xuICAgICAgc2VydmljZTogJ2dtYWlsJyxcbiAgICAgIGF1dGg6IHtcbiAgICAgICAgdXNlcjogcHJvY2Vzcy5lbnYuQVBQX0VNQUlMLFxuICAgICAgICBwYXNzOiBwcm9jZXNzLmVudi5BUFBfRU1BSUxfUEFTU1dPUkQsXG4gICAgICB9LFxuICAgIH0pO1xuXG4gICAgY29uc3QgbWFpbE9wdGlvbnMgPSB7XG4gICAgICBmcm9tOiBwcm9jZXNzLmVudi5BUFBfRU1BSUwsXG4gICAgICB0bzogZW1haWwsXG4gICAgICBzdWJqZWN0LFxuICAgICAgaHRtbDogY29udGVudCxcbiAgICB9O1xuXG4gICAgdHJhbnNwb3J0ZXIuc2VuZE1haWwobWFpbE9wdGlvbnMsIChlcnIsIGluZm8pID0+IHtcbiAgICAgIGlmIChlcnIpIHJldHVybiBlcnI7XG4gICAgfSk7XG4gIH1cblxuICBzdGF0aWMgYXN5bmMgc2V0Um9sZShyb2xlLCBlbWFpbCkge1xuICAgIGF3YWl0IHVzZXJzLnVwZGF0ZSh7IHJvbGUgfSwgeyB3aGVyZTogeyBlbWFpbCB9IH0pO1xuICB9XG5cbiAgc3RhdGljIGFzeW5jIGZpbmRCeUlkKGlkKSB7XG4gICAgY29uc3QgdXNlciA9IGF3YWl0IHVzZXJzLmZpbmRPbmUoeyB3aGVyZTogeyBpZDogYCR7aWR9YCB9IH0pO1xuICAgIHJldHVybiB1c2VyO1xuICB9XG5cbiAgc3RhdGljIGFzeW5jIGxvZ291dChkYXRhKSB7XG4gICAgY29uc3QgdG9rZW4gPSBkYXRhLnNwbGl0KCcgJylbMV07XG4gICAgYXdhaXQgQmxvY2tlZHRva2VuLmNyZWF0ZSh7IHRva2VuIH0pO1xuICB9XG5cbiAgc3RhdGljIGFzeW5jIGdldEFsbFVzZXJzKCkge1xuICAgIGNvbnN0IGFsbFVzZXJzID0gYXdhaXQgdXNlcnMuZmluZEFsbCgpO1xuICAgIHJldHVybiBhbGxVc2VycztcbiAgfVxuXG4gIHN0YXRpYyBhc3luYyByZWdpc3RlckFkbWluKGRhdGEpIHtcbiAgICBkYXRhLnBhc3N3b3JkID0gYXdhaXQgYmNyeXB0Lmhhc2goZGF0YS5wYXNzd29yZCwgc2FsdFJvdW5kcyk7XG5cbiAgICBjb25zdCB7IHVzZXJuYW1lLCBlbWFpbCwgcGFzc3dvcmQsIGdlbmRlciwgZW1haWxfdmVyaWZpZWQsIHJvbGUgfSA9IGRhdGE7XG4gICAgY29uc3QgdXNlciA9IGF3YWl0IHVzZXJzLmNyZWF0ZSh7XG4gICAgICB1c2VybmFtZSxcbiAgICAgIGVtYWlsLFxuICAgICAgcGFzc3dvcmQsXG4gICAgICBnZW5kZXIsXG4gICAgICBlbWFpbF92ZXJpZmllZCxcbiAgICAgIHJvbGVcbiAgICB9KTtcbiAgICByZXR1cm4geyBkYXRhOiB1c2VyIH07XG4gIH1cblxuICBzdGF0aWMgYXN5bmMgdXBkYXRlQXZhdGFyKHVzZXIsIGltYWdlKSB7XG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgQ2xvdWRVcGxvYWQuc2luZ2xlKGltYWdlKTtcbiAgICBjb25zdCBhdmF0YXIgPSByZXN1bHQudXJsO1xuXG4gICAgYXdhaXQgdGhpcy51cGRhdGVVc2VyKHsgYXZhdGFyIH0sIHVzZXIuaWQpO1xuICAgIGNvbnN0IG5ld1VzZXIgPSB7IC4uLnVzZXIuZGF0YVZhbHVlcywgYXZhdGFyIH07XG5cbiAgICByZXR1cm4geyB2YWx1ZTogbmV3VXNlciB9O1xuICB9XG5cbiAgc3RhdGljIGFzeW5jIHVwZGF0ZUNvdmVySW1hZ2UodXNlciwgaW1hZ2UpIHtcbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBDbG91ZFVwbG9hZC5zaW5nbGUoaW1hZ2UpO1xuICAgIGNvbnN0IGNvdmVyX2ltYWdlID0gcmVzdWx0LnVybDtcblxuICAgIGF3YWl0IHRoaXMudXBkYXRlVXNlcih7IGNvdmVyX2ltYWdlIH0sIHVzZXIuaWQpO1xuICAgIGNvbnN0IG5ld1VzZXIgPSB7IC4uLnVzZXIuZGF0YVZhbHVlcywgY292ZXJfaW1hZ2UgfTtcblxuICAgIHJldHVybiB7IHZhbHVlOiBuZXdVc2VyIH07XG4gIH1cbn1cbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUtBLElBQUFBLE9BQUEsR0FBQUMsc0JBQUEsQ0FBQUMsT0FBQTtBQUVBLElBQUFDLFdBQUEsR0FBQUYsc0JBQUEsQ0FBQUMsT0FBQTtBQUVBLElBQUFFLE9BQUEsR0FBQUYsT0FBQTtBQUNBLElBQUFHLE1BQUEsR0FBQUosc0JBQUEsQ0FBQUMsT0FBQTtBQVZBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBSUEsTUFBTUksVUFBVSxHQUFHQyxNQUFNLENBQUNDLE9B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","map":{"version":3,"names":["_bcrypt","_interopRequireDefault","require","_nodemailer","_models","_cloud","saltRounds","Number","process","env","SALTROUNDS","User","register","data","password","bcrypt","hash","username","email","gender","email_verified","user","users","create","registerGoogle","startMfaProcess","findOne","where","mfa_code","Math","floor","random","timeout","MFA_MINS","mfa_timeout","Date","now","save","isMfaValid","findByEmailToken","emailToken","email_token","updateUser","fields","id","update","editProfile","exist","error","avatar","cover_image","role","verified","newUsers","dataValues","value","sendMailWithNodemailer","subject","content","transporter","nodemailer","createTransport","service","auth","APP_EMAIL","pass","APP_EMAIL_PASSWORD","mailOptions","from","to","html","sendMail","err","info","setRole","findById","logout","token","split","Blockedtoken","getAllUsers","allUsers","findAll","registerAdmin","updateAvatar","image","result","CloudUpload","single","url","newUser","updateCoverImage","exports","default","module"],"sourceRoot":"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/services/","sources":["user.services.js"],"sourcesContent":["/* eslint-disable object-curly-newline */\n/* eslint-disable camelcase */\n/* eslint-disable no-unused-vars */\n/* eslint-disable object-shorthand */\n/* eslint-disable require-jsdoc */\nimport bcrypt from 'bcrypt';\n// eslint-disable-next-line import/no-extraneous-dependencies, import/no-unresolved\nimport nodemailer from 'nodemailer';\n// eslint-disable-next-line import/named\nimport { users, Blockedtoken } from '../database/models';\nimport CloudUpload from '../helpers/cloud.upload';\n\nconst saltRounds = Number(process.env.SALTROUNDS) || 10;\n\n/**\n * class for all user services\n */\nexport default class User {\n  /**\n   * function to register user\n   * @param {Object} data the information for user to be created\n   * @returns {data} for the created user\n   */\n  static async register(data) {\n    data.password = await bcrypt.hash(data.password, saltRounds);\n\n    const { username, email, password, gender, email_verified } = data;\n    const user = await users.create({\n      username,\n      email,\n      password,\n      gender,\n      email_verified,\n    });\n\n    return { data: user };\n  }\n\n  static async registerGoogle(data) {\n    // eslint-disable-next-line no-return-await\n    return await users.create(data);\n  }\n\n  static async startMfaProcess(email) {\n    const user = await users.findOne({ where: { email } });\n    user.mfa_code = Math.floor(Math.random() * 100000 + 10000);\n    const timeout = (process.env.MFA_MINS || 3) * 60 * 1000;\n    user.mfa_timeout = new Date(Date.now() + timeout);\n    await user.save();\n    return user.mfa_code;\n  }\n\n  static async isMfaValid(email, mfa_code) {\n    const user = await users.findOne({ where: { email } });\n    if (user.mfa_code !== mfa_code) {\n      return [false, 'Invalid authentication code'];\n    }\n    if (user.mfa_timeout < new Date()) {\n      return [false, 'Authentication code expired'];\n    }\n\n    // Force mfa code to expire after usage\n    user.mfa_timeout = new Date(Date.now() - 10 * 60 * 1000);\n    await user.save();\n    return [true];\n  }\n\n  static async findByEmailToken(emailToken) {\n    const user = await users.findOne({ where: { email_token: emailToken } });\n    return user;\n  }\n\n  static async updateUser(fields, id) {\n    // eslint-disable-next-line no-return-await\n    return await users.update({ ...fields }, { where: { id: id } });\n  }\n\n  static async editProfile(data, user) {\n    const { email } = data;\n    if (email && email !== null && email !== user.email) {\n      const exist = await users.findOne({ where: { email } });\n      if (exist && exist !== null) return { error: 'email exists' };\n    }\n    const {\n      avatar,\n      cover_image,\n      role,\n      password,\n      id,\n      verified, // unchangeble fields in here\n      ...fields // changeble fields\n    } = data;\n\n    await this.updateUser(data, user.id);\n    const newUsers = { ...user.dataValues, ...data };\n    return { value: newUsers };\n  }\n\n  static async sendMailWithNodemailer({ email, subject, content }) {\n    const transporter = nodemailer.createTransport({\n      service: 'gmail',\n      auth: {\n        user: process.env.APP_EMAIL,\n        pass: process.env.APP_EMAIL_PASSWORD,\n      },\n    });\n\n    const mailOptions = {\n      from: process.env.APP_EMAIL,\n      to: email,\n      subject,\n      html: content,\n    };\n\n    transporter.sendMail(mailOptions, (err, info) => {\n      if (err) return err;\n    });\n  }\n\n  static async setRole(role, email) {\n    await users.update({ role }, { where: { email } });\n  }\n\n  static async findById(id) {\n    const user = await users.findOne({ where: { id: `${id}` } });\n    return user;\n  }\n\n  static async logout(data) {\n    const token = data.split(' ')[1];\n    await Blockedtoken.create({ token });\n  }\n\n  static async getAllUsers() {\n    const allUsers = await users.findAll();\n    return allUsers;\n  }\n\n  static async registerAdmin(data) {\n    data.password = await bcrypt.hash(data.password, saltRounds);\n\n    const { username, email, password, gender, email_verified, role } = data;\n    const user = await users.create({\n      username,\n      email,\n      password,\n      gender,\n      email_verified,\n      role\n    });\n    return { data: user };\n  }\n\n  static async updateAvatar(user, image) {\n    const result = await CloudUpload.single(image);\n    const avatar = result.url;\n\n    await this.updateUser({ avatar }, user.id);\n    const newUser = { ...user.dataValues, avatar };\n\n    return { value: newUser };\n  }\n\n  static async updateCoverImage(user, image) {\n    const result = await CloudUpload.single(image);\n    const cover_image = result.url;\n\n    await this.updateUser({ cover_image }, user.id);\n    const newUser = { ...user.dataValues, cover_image };\n\n    return { value: newUser };\n  }\n}\n"],"mappings":"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"}},"mtime":1682148437963},"{\"assumptions\":{},\"sourceRoot\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/helpers/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"filename\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/helpers/cloud.upload.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/node_modules/babel-plugin-add-module-exports/lib/index.js\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-runtime\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"regenerator\":true},\"externalDependencies\":[]},{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.21.0:development":{"value":{"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _cloudinary = _interopRequireDefault(require(\"../configs/cloudinary\"));\n/**\n * upload class\n */\nclass CloudUpload {\n  /**\n   * @param {Object} file\n   * @returns {result} return the urls\n   */\n  static async single(file) {\n    const result = await _cloudinary.default.uploader.upload(file.path);\n    return result;\n  }\n\n  /**\n   * @param {Object} files\n   * @param {Function} callback\n   * @returns {result} return the urls\n   */\n  static async multi(files) {\n    const results = [];\n    // eslint-disable-next-line no-restricted-syntax\n    for (const file of files) {\n      // eslint-disable-next-line no-await-in-loop\n      const newPath = await this.single(file);\n      results.push(newPath);\n    }\n    return results;\n  }\n}\nexports.default = CloudUpload;\nmodule.exports = exports.default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfY2xvdWRpbmFyeSIsIl9pbnRlcm9wUmVxdWlyZURlZmF1bHQiLCJyZXF1aXJlIiwiQ2xvdWRVcGxvYWQiLCJzaW5nbGUiLCJmaWxlIiwicmVzdWx0IiwiY2xvdWRpbmFyeSIsInVwbG9hZGVyIiwidXBsb2FkIiwicGF0aCIsIm11bHRpIiwiZmlsZXMiLCJyZXN1bHRzIiwibmV3UGF0aCIsInB1c2giLCJleHBvcnRzIiwiZGVmYXVsdCIsIm1vZHVsZSJdLCJzb3VyY2VSb290IjoiL1VzZXJzL2FuZGVsYXJ3YW5kYS9EZXNrdG9wL2UtY29tbS10ZWFtLWJyb2dyYW1tZXJzLWJuL3NyYy9oZWxwZXJzLyIsInNvdXJjZXMiOlsiY2xvdWQudXBsb2FkLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBjbG91ZGluYXJ5IGZyb20gJy4uL2NvbmZpZ3MvY2xvdWRpbmFyeSc7XG5cbi8qKlxuICogdXBsb2FkIGNsYXNzXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIENsb3VkVXBsb2FkIHtcbiAgLyoqXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBmaWxlXG4gICAqIEByZXR1cm5zIHtyZXN1bHR9IHJldHVybiB0aGUgdXJsc1xuICAgKi9cbiAgc3RhdGljIGFzeW5jIHNpbmdsZShmaWxlKSB7XG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgY2xvdWRpbmFyeS51cGxvYWRlci51cGxvYWQoZmlsZS5wYXRoKTtcbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBmaWxlc1xuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYWxsYmFja1xuICAgKiBAcmV0dXJucyB7cmVzdWx0fSByZXR1cm4gdGhlIHVybHNcbiAgICovXG4gIHN0YXRpYyBhc3luYyBtdWx0aShmaWxlcykge1xuICAgIGNvbnN0IHJlc3VsdHMgPSBbXTtcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcmVzdHJpY3RlZC1zeW50YXhcbiAgICBmb3IgKGNvbnN0IGZpbGUgb2YgZmlsZXMpIHtcbiAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1hd2FpdC1pbi1sb29wXG4gICAgICBjb25zdCBuZXdQYXRoID0gYXdhaXQgdGhpcy5zaW5nbGUoZmlsZSk7XG4gICAgICByZXN1bHRzLnB1c2gobmV3UGF0aCk7XG4gICAgfVxuICAgIHJldHVybiByZXN1bHRzO1xuICB9XG59XG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBQSxJQUFBQSxXQUFBLEdBQUFDLHNCQUFBLENBQUFDLE9BQUE7QUFFQTtBQUNBO0FBQ0E7QUFDZSxNQUFNQyxXQUFXLENBQUM7RUFDL0I7QUFDRjtBQUNBO0FBQ0E7RUFDRSxhQUFhQyxNQUFNQSxDQUFDQyxJQUFJLEVBQUU7SUFDeEIsTUFBTUMsTUFBTSxHQUFHLE1BQU1DLG1CQUFVLENBQUNDLFFBQVEsQ0FBQ0MsTUFBTSxDQUFDSixJQUFJLENBQUNLLElBQUksQ0FBQztJQUMxRCxPQUFPSixNQUFNO0VBQ2Y7O0VBRUE7QUFDRjtBQUNBO0FBQ0E7QUFDQTtFQUNFLGFBQWFLLEtBQUtBLENBQUNDLEtBQUssRUFBRTtJQUN4QixNQUFNQyxPQUFPLEdBQUcsRUFBRTtJQUNsQjtJQUNBLEtBQUssTUFBTVIsSUFBSSxJQUFJTyxLQUFLLEVBQUU7TUFDeEI7TUFDQSxNQUFNRSxPQUFPLEdBQUcsTUFBTSxJQUFJLENBQUNWLE1BQU0sQ0FBQ0MsSUFBSSxDQUFDO01BQ3ZDUSxPQUFPLENBQUNFLElBQUksQ0FBQ0QsT0FBTyxDQUFDO0lBQ3ZCO0lBQ0EsT0FBT0QsT0FBTztFQUNoQjtBQUNGO0FBQUNHLE9BQUEsQ0FBQUMsT0FBQSxHQUFBZCxXQUFBO0FBQUFlLE1BQUEsQ0FBQUYsT0FBQSxHQUFBQSxPQUFBLENBQUFDLE9BQUEifQ==","map":{"version":3,"names":["_cloudinary","_interopRequireDefault","require","CloudUpload","single","file","result","cloudinary","uploader","upload","path","multi","files","results","newPath","push","exports","default","module"],"sourceRoot":"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/helpers/","sources":["cloud.upload.js"],"sourcesContent":["import cloudinary from '../configs/cloudinary';\n\n/**\n * upload class\n */\nexport default class CloudUpload {\n  /**\n   * @param {Object} file\n   * @returns {result} return the urls\n   */\n  static async single(file) {\n    const result = await cloudinary.uploader.upload(file.path);\n    return result;\n  }\n\n  /**\n   * @param {Object} files\n   * @param {Function} callback\n   * @returns {result} return the urls\n   */\n  static async multi(files) {\n    const results = [];\n    // eslint-disable-next-line no-restricted-syntax\n    for (const file of files) {\n      // eslint-disable-next-line no-await-in-loop\n      const newPath = await this.single(file);\n      results.push(newPath);\n    }\n    return results;\n  }\n}\n"],"mappings":";;;;;;;AAAA,IAAAA,WAAA,GAAAC,sBAAA,CAAAC,OAAA;AAEA;AACA;AACA;AACe,MAAMC,WAAW,CAAC;EAC/B;AACF;AACA;AACA;EACE,aAAaC,MAAMA,CAACC,IAAI,EAAE;IACxB,MAAMC,MAAM,GAAG,MAAMC,mBAAU,CAACC,QAAQ,CAACC,MAAM,CAACJ,IAAI,CAACK,IAAI,CAAC;IAC1D,OAAOJ,MAAM;EACf;;EAEA;AACF;AACA;AACA;AACA;EACE,aAAaK,KAAKA,CAACC,KAAK,EAAE;IACxB,MAAMC,OAAO,GAAG,EAAE;IAClB;IACA,KAAK,MAAMR,IAAI,IAAIO,KAAK,EAAE;MACxB;MACA,MAAME,OAAO,GAAG,MAAM,IAAI,CAACV,MAAM,CAACC,IAAI,CAAC;MACvCQ,OAAO,CAACE,IAAI,CAACD,OAAO,CAAC;IACvB;IACA,OAAOD,OAAO;EAChB;AACF;AAACG,OAAA,CAAAC,OAAA,GAAAd,WAAA;AAAAe,MAAA,CAAAF,OAAA,GAAAA,OAAA,CAAAC,OAAA"}},"mtime":1682148437939},"{\"assumptions\":{},\"sourceRoot\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/configs/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"filename\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/configs/cloudinary.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/node_modules/babel-plugin-add-module-exports/lib/index.js\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-runtime\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"regenerator\":true},\"externalDependencies\":[]},{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.21.0:development":{"value":{"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _cloudinary = _interopRequireDefault(require(\"cloudinary\"));\n// eslint-disable-next-line import/no-extraneous-dependencies\n\n_cloudinary.default.config({\n  cloud_name: process.env.CLOUDINARY_CLOUD_NAME,\n  api_key: process.env.CLOUDINARY_API_KEY,\n  api_secret: process.env.CLOUDINARY_API_SECRET\n});\nvar _default = _cloudinary.default;\nexports.default = _default;\nmodule.exports = exports.default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfY2xvdWRpbmFyeSIsIl9pbnRlcm9wUmVxdWlyZURlZmF1bHQiLCJyZXF1aXJlIiwiY2xvdWRpbmFyeSIsImNvbmZpZyIsImNsb3VkX25hbWUiLCJwcm9jZXNzIiwiZW52IiwiQ0xPVURJTkFSWV9DTE9VRF9OQU1FIiwiYXBpX2tleSIsIkNMT1VESU5BUllfQVBJX0tFWSIsImFwaV9zZWNyZXQiLCJDTE9VRElOQVJZX0FQSV9TRUNSRVQiLCJfZGVmYXVsdCIsImV4cG9ydHMiLCJkZWZhdWx0IiwibW9kdWxlIl0sInNvdXJjZVJvb3QiOiIvVXNlcnMvYW5kZWxhcndhbmRhL0Rlc2t0b3AvZS1jb21tLXRlYW0tYnJvZ3JhbW1lcnMtYm4vc3JjL2NvbmZpZ3MvIiwic291cmNlcyI6WyJjbG91ZGluYXJ5LmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBpbXBvcnQvbm8tZXh0cmFuZW91cy1kZXBlbmRlbmNpZXNcbmltcG9ydCBjbG91ZGluYXJ5IGZyb20gJ2Nsb3VkaW5hcnknO1xuXG5jbG91ZGluYXJ5LmNvbmZpZyh7XG4gIGNsb3VkX25hbWU6IHByb2Nlc3MuZW52LkNMT1VESU5BUllfQ0xPVURfTkFNRSxcbiAgYXBpX2tleTogcHJvY2Vzcy5lbnYuQ0xPVURJTkFSWV9BUElfS0VZLFxuICBhcGlfc2VjcmV0OiBwcm9jZXNzLmVudi5DTE9VRElOQVJZX0FQSV9TRUNSRVQsXG59KTtcblxuZXhwb3J0IGRlZmF1bHQgY2xvdWRpbmFyeTtcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUNBLElBQUFBLFdBQUEsR0FBQUMsc0JBQUEsQ0FBQUMsT0FBQTtBQURBOztBQUdBQyxtQkFBVSxDQUFDQyxNQUFNLENBQUM7RUFDaEJDLFVBQVUsRUFBRUMsT0FBTyxDQUFDQyxHQUFHLENBQUNDLHFCQUFxQjtFQUM3Q0MsT0FBTyxFQUFFSCxPQUFPLENBQUNDLEdBQUcsQ0FBQ0csa0JBQWtCO0VBQ3ZDQyxVQUFVLEVBQUVMLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDSztBQUMxQixDQUFDLENBQUM7QUFBQyxJQUFBQyxRQUFBLEdBRVlWLG1CQUFVO0FBQUFXLE9BQUEsQ0FBQUMsT0FBQSxHQUFBRixRQUFBO0FBQUFHLE1BQUEsQ0FBQUYsT0FBQSxHQUFBQSxPQUFBLENBQUFDLE9BQUEifQ==","map":{"version":3,"names":["_cloudinary","_interopRequireDefault","require","cloudinary","config","cloud_name","process","env","CLOUDINARY_CLOUD_NAME","api_key","CLOUDINARY_API_KEY","api_secret","CLOUDINARY_API_SECRET","_default","exports","default","module"],"sourceRoot":"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/configs/","sources":["cloudinary.js"],"sourcesContent":["// eslint-disable-next-line import/no-extraneous-dependencies\nimport cloudinary from 'cloudinary';\n\ncloudinary.config({\n  cloud_name: process.env.CLOUDINARY_CLOUD_NAME,\n  api_key: process.env.CLOUDINARY_API_KEY,\n  api_secret: process.env.CLOUDINARY_API_SECRET,\n});\n\nexport default cloudinary;\n"],"mappings":";;;;;;;AACA,IAAAA,WAAA,GAAAC,sBAAA,CAAAC,OAAA;AADA;;AAGAC,mBAAU,CAACC,MAAM,CAAC;EAChBC,UAAU,EAAEC,OAAO,CAACC,GAAG,CAACC,qBAAqB;EAC7CC,OAAO,EAAEH,OAAO,CAACC,GAAG,CAACG,kBAAkB;EACvCC,UAAU,EAAEL,OAAO,CAACC,GAAG,CAACK;AAC1B,CAAC,CAAC;AAAC,IAAAC,QAAA,GAEYV,mBAAU;AAAAW,OAAA,CAAAC,OAAA,GAAAF,QAAA;AAAAG,MAAA,CAAAF,OAAA,GAAAA,OAAA,CAAAC,OAAA"}},"mtime":1682148437920},"{\"assumptions\":{},\"sourceRoot\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/helpers/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"filename\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/helpers/eventEmitter.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/node_modules/babel-plugin-add-module-exports/lib/index.js\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-runtime\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"regenerator\":true},\"externalDependencies\":[]},{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.21.0:development":{"value":{"code":"\"use strict\";\n\nconst EventEmitter = require('events');\nconst eventEmitter = new EventEmitter();\n\n// eslint-disable-next-line no-unused-vars\neventEmitter.on('passwordUpdated', userId => {});\nmodule.exports = eventEmitter;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJFdmVudEVtaXR0ZXIiLCJyZXF1aXJlIiwiZXZlbnRFbWl0dGVyIiwib24iLCJ1c2VySWQiLCJtb2R1bGUiLCJleHBvcnRzIl0sInNvdXJjZVJvb3QiOiIvVXNlcnMvYW5kZWxhcndhbmRhL0Rlc2t0b3AvZS1jb21tLXRlYW0tYnJvZ3JhbW1lcnMtYm4vc3JjL2hlbHBlcnMvIiwic291cmNlcyI6WyJldmVudEVtaXR0ZXIuanMiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgRXZlbnRFbWl0dGVyID0gcmVxdWlyZSgnZXZlbnRzJyk7XG5cbmNvbnN0IGV2ZW50RW1pdHRlciA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcblxuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXVudXNlZC12YXJzXG5ldmVudEVtaXR0ZXIub24oJ3Bhc3N3b3JkVXBkYXRlZCcsICh1c2VySWQpID0+IHtcbn0pO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGV2ZW50RW1pdHRlcjtcbiJdLCJtYXBwaW5ncyI6Ijs7QUFBQSxNQUFNQSxZQUFZLEdBQUdDLE9BQU8sQ0FBQyxRQUFRLENBQUM7QUFFdEMsTUFBTUMsWUFBWSxHQUFHLElBQUlGLFlBQVksRUFBRTs7QUFFdkM7QUFDQUUsWUFBWSxDQUFDQyxFQUFFLENBQUMsaUJBQWlCLEVBQUdDLE1BQU0sSUFBSyxDQUMvQyxDQUFDLENBQUM7QUFFRkMsTUFBTSxDQUFDQyxPQUFPLEdBQUdKLFlBQVkifQ==","map":{"version":3,"names":["EventEmitter","require","eventEmitter","on","userId","module","exports"],"sourceRoot":"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/helpers/","sources":["eventEmitter.js"],"sourcesContent":["const EventEmitter = require('events');\n\nconst eventEmitter = new EventEmitter();\n\n// eslint-disable-next-line no-unused-vars\neventEmitter.on('passwordUpdated', (userId) => {\n});\n\nmodule.exports = eventEmitter;\n"],"mappings":";;AAAA,MAAMA,YAAY,GAAGC,OAAO,CAAC,QAAQ,CAAC;AAEtC,MAAMC,YAAY,GAAG,IAAIF,YAAY,EAAE;;AAEvC;AACAE,YAAY,CAACC,EAAE,CAAC,iBAAiB,EAAGC,MAAM,IAAK,CAC/C,CAAC,CAAC;AAEFC,MAAM,CAACC,OAAO,GAAGJ,YAAY"}},"mtime":1685643189453},"{\"assumptions\":{},\"sourceRoot\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/helpers/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"filename\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/helpers/jwt.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/node_modules/babel-plugin-add-module-exports/lib/index.js\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-runtime\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"regenerator\":true},\"externalDependencies\":[]},{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.21.0:development":{"value":{"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Jwt = void 0;\nvar _jsonwebtoken = _interopRequireDefault(require(\"jsonwebtoken\"));\nvar _dotenv = _interopRequireDefault(require(\"dotenv\"));\n/* eslint-disable require-jsdoc */\n/* eslint-disable import/prefer-default-export */\n// eslint-disable-next-line import/no-extraneous-dependencies\n\n_dotenv.default.config();\nclass Jwt {\n  static generateToken(data, exp = '1y') {\n    return _jsonwebtoken.default.sign(data, process.env.JWT_SECRET, {\n      expiresIn: exp\n    });\n  }\n  static verifyToken(token) {\n    return _jsonwebtoken.default.verify(token, process.env.JWT_SECRET, (err, decoded) => {\n      if (err) {\n        return {\n          error: err\n        };\n      }\n      return {\n        value: decoded\n      };\n    });\n  }\n}\nexports.Jwt = Jwt;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfanNvbndlYnRva2VuIiwiX2ludGVyb3BSZXF1aXJlRGVmYXVsdCIsInJlcXVpcmUiLCJfZG90ZW52IiwiZG90ZW52IiwiY29uZmlnIiwiSnd0IiwiZ2VuZXJhdGVUb2tlbiIsImRhdGEiLCJleHAiLCJKV1QiLCJzaWduIiwicHJvY2VzcyIsImVudiIsIkpXVF9TRUNSRVQiLCJleHBpcmVzSW4iLCJ2ZXJpZnlUb2tlbiIsInRva2VuIiwidmVyaWZ5IiwiZXJyIiwiZGVjb2RlZCIsImVycm9yIiwidmFsdWUiLCJleHBvcnRzIl0sInNvdXJjZVJvb3QiOiIvVXNlcnMvYW5kZWxhcndhbmRhL0Rlc2t0b3AvZS1jb21tLXRlYW0tYnJvZ3JhbW1lcnMtYm4vc3JjL2hlbHBlcnMvIiwic291cmNlcyI6WyJqd3QuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLyogZXNsaW50LWRpc2FibGUgcmVxdWlyZS1qc2RvYyAqL1xuLyogZXNsaW50LWRpc2FibGUgaW1wb3J0L3ByZWZlci1kZWZhdWx0LWV4cG9ydCAqL1xuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGltcG9ydC9uby1leHRyYW5lb3VzLWRlcGVuZGVuY2llc1xuaW1wb3J0IEpXVCBmcm9tICdqc29ud2VidG9rZW4nO1xuaW1wb3J0IGRvdGVudiBmcm9tICdkb3RlbnYnO1xuXG5kb3RlbnYuY29uZmlnKCk7XG5cbmV4cG9ydCBjbGFzcyBKd3Qge1xuICBzdGF0aWMgZ2VuZXJhdGVUb2tlbihkYXRhLCBleHAgPSAnMXknKSB7XG4gICAgcmV0dXJuIEpXVC5zaWduKGRhdGEsIHByb2Nlc3MuZW52LkpXVF9TRUNSRVQsIHsgZXhwaXJlc0luOiBleHAgfSk7XG4gIH1cblxuICBzdGF0aWMgdmVyaWZ5VG9rZW4odG9rZW4pIHtcbiAgICByZXR1cm4gSldULnZlcmlmeSh0b2tlbiwgcHJvY2Vzcy5lbnYuSldUX1NFQ1JFVCwgKGVyciwgZGVjb2RlZCkgPT4ge1xuICAgICAgaWYgKGVycikge1xuICAgICAgICByZXR1cm4geyBlcnJvcjogZXJyIH07XG4gICAgICB9XG4gICAgICByZXR1cm4geyB2YWx1ZTogZGVjb2RlZCB9O1xuICAgIH0pO1xuICB9XG59XG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFHQSxJQUFBQSxhQUFBLEdBQUFDLHNCQUFBLENBQUFDLE9BQUE7QUFDQSxJQUFBQyxPQUFBLEdBQUFGLHNCQUFBLENBQUFDLE9BQUE7QUFKQTtBQUNBO0FBQ0E7O0FBSUFFLGVBQU0sQ0FBQ0MsTUFBTSxFQUFFO0FBRVIsTUFBTUMsR0FBRyxDQUFDO0VBQ2YsT0FBT0MsYUFBYUEsQ0FBQ0MsSUFBSSxFQUFFQyxHQUFHLEdBQUcsSUFBSSxFQUFFO0lBQ3JDLE9BQU9DLHFCQUFHLENBQUNDLElBQUksQ0FBQ0gsSUFBSSxFQUFFSSxPQUFPLENBQUNDLEdBQUcsQ0FBQ0MsVUFBVSxFQUFFO01BQUVDLFNBQVMsRUFBRU47SUFBSSxDQUFDLENBQUM7RUFDbkU7RUFFQSxPQUFPTyxXQUFXQSxDQUFDQyxLQUFLLEVBQUU7SUFDeEIsT0FBT1AscUJBQUcsQ0FBQ1EsTUFBTSxDQUFDRCxLQUFLLEVBQUVMLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDQyxVQUFVLEVBQUUsQ0FBQ0ssR0FBRyxFQUFFQyxPQUFPLEtBQUs7TUFDakUsSUFBSUQsR0FBRyxFQUFFO1FBQ1AsT0FBTztVQUFFRSxLQUFLLEVBQUVGO1FBQUksQ0FBQztNQUN2QjtNQUNBLE9BQU87UUFBRUcsS0FBSyxFQUFFRjtNQUFRLENBQUM7SUFDM0IsQ0FBQyxDQUFDO0VBQ0o7QUFDRjtBQUFDRyxPQUFBLENBQUFqQixHQUFBLEdBQUFBLEdBQUEifQ==","map":{"version":3,"names":["_jsonwebtoken","_interopRequireDefault","require","_dotenv","dotenv","config","Jwt","generateToken","data","exp","JWT","sign","process","env","JWT_SECRET","expiresIn","verifyToken","token","verify","err","decoded","error","value","exports"],"sourceRoot":"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/helpers/","sources":["jwt.js"],"sourcesContent":["/* eslint-disable require-jsdoc */\n/* eslint-disable import/prefer-default-export */\n// eslint-disable-next-line import/no-extraneous-dependencies\nimport JWT from 'jsonwebtoken';\nimport dotenv from 'dotenv';\n\ndotenv.config();\n\nexport class Jwt {\n  static generateToken(data, exp = '1y') {\n    return JWT.sign(data, process.env.JWT_SECRET, { expiresIn: exp });\n  }\n\n  static verifyToken(token) {\n    return JWT.verify(token, process.env.JWT_SECRET, (err, decoded) => {\n      if (err) {\n        return { error: err };\n      }\n      return { value: decoded };\n    });\n  }\n}\n"],"mappings":";;;;;;;AAGA,IAAAA,aAAA,GAAAC,sBAAA,CAAAC,OAAA;AACA,IAAAC,OAAA,GAAAF,sBAAA,CAAAC,OAAA;AAJA;AACA;AACA;;AAIAE,eAAM,CAACC,MAAM,EAAE;AAER,MAAMC,GAAG,CAAC;EACf,OAAOC,aAAaA,CAACC,IAAI,EAAEC,GAAG,GAAG,IAAI,EAAE;IACrC,OAAOC,qBAAG,CAACC,IAAI,CAACH,IAAI,EAAEI,OAAO,CAACC,GAAG,CAACC,UAAU,EAAE;MAAEC,SAAS,EAAEN;IAAI,CAAC,CAAC;EACnE;EAEA,OAAOO,WAAWA,CAACC,KAAK,EAAE;IACxB,OAAOP,qBAAG,CAACQ,MAAM,CAACD,KAAK,EAAEL,OAAO,CAACC,GAAG,CAACC,UAAU,EAAE,CAACK,GAAG,EAAEC,OAAO,KAAK;MACjE,IAAID,GAAG,EAAE;QACP,OAAO;UAAEE,KAAK,EAAEF;QAAI,CAAC;MACvB;MACA,OAAO;QAAEG,KAAK,EAAEF;MAAQ,CAAC;IAC3B,CAAC,CAAC;EACJ;AACF;AAACG,OAAA,CAAAjB,GAAA,GAAAA,GAAA"}},"mtime":1682148437940},"{\"assumptions\":{},\"sourceRoot\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/helpers/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"filename\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/helpers/emailConfig.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/node_modules/babel-plugin-add-module-exports/lib/index.js\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-runtime\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"regenerator\":true},\"externalDependencies\":[]},{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.21.0:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.emailConfig = emailConfig;\n/* eslint-disable require-jsdoc */\n// eslint-disable-next-line import/prefer-default-export\nfunction emailConfig({\n  email,\n  subject,\n  content\n} = {}) {\n  return {\n    from: process.env.APP_EMAIL,\n    to: `${email}`,\n    subject: `${subject}`,\n    html: `${content}`\n  };\n}\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJlbWFpbENvbmZpZyIsImVtYWlsIiwic3ViamVjdCIsImNvbnRlbnQiLCJmcm9tIiwicHJvY2VzcyIsImVudiIsIkFQUF9FTUFJTCIsInRvIiwiaHRtbCJdLCJzb3VyY2VSb290IjoiL1VzZXJzL2FuZGVsYXJ3YW5kYS9EZXNrdG9wL2UtY29tbS10ZWFtLWJyb2dyYW1tZXJzLWJuL3NyYy9oZWxwZXJzLyIsInNvdXJjZXMiOlsiZW1haWxDb25maWcuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLyogZXNsaW50LWRpc2FibGUgcmVxdWlyZS1qc2RvYyAqL1xuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGltcG9ydC9wcmVmZXItZGVmYXVsdC1leHBvcnRcbmV4cG9ydCBmdW5jdGlvbiBlbWFpbENvbmZpZyh7IGVtYWlsLCBzdWJqZWN0LCBjb250ZW50IH0gPSB7fSkge1xuICByZXR1cm4ge1xuICAgIGZyb206IHByb2Nlc3MuZW52LkFQUF9FTUFJTCxcbiAgICB0bzogYCR7ZW1haWx9YCxcbiAgICBzdWJqZWN0OiBgJHtzdWJqZWN0fWAsXG4gICAgaHRtbDogYCR7Y29udGVudH1gLFxuICB9O1xufVxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7QUFBQTtBQUNBO0FBQ08sU0FBU0EsV0FBV0EsQ0FBQztFQUFFQyxLQUFLO0VBQUVDLE9BQU87RUFBRUM7QUFBUSxDQUFDLEdBQUcsQ0FBQyxDQUFDLEVBQUU7RUFDNUQsT0FBTztJQUNMQyxJQUFJLEVBQUVDLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDQyxTQUFTO0lBQzNCQyxFQUFFLEVBQUcsR0FBRVAsS0FBTSxFQUFDO0lBQ2RDLE9BQU8sRUFBRyxHQUFFQSxPQUFRLEVBQUM7SUFDckJPLElBQUksRUFBRyxHQUFFTixPQUFRO0VBQ25CLENBQUM7QUFDSCJ9","map":{"version":3,"names":["emailConfig","email","subject","content","from","process","env","APP_EMAIL","to","html"],"sourceRoot":"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/helpers/","sources":["emailConfig.js"],"sourcesContent":["/* eslint-disable require-jsdoc */\n// eslint-disable-next-line import/prefer-default-export\nexport function emailConfig({ email, subject, content } = {}) {\n  return {\n    from: process.env.APP_EMAIL,\n    to: `${email}`,\n    subject: `${subject}`,\n    html: `${content}`,\n  };\n}\n"],"mappings":";;;;;;AAAA;AACA;AACO,SAASA,WAAWA,CAAC;EAAEC,KAAK;EAAEC,OAAO;EAAEC;AAAQ,CAAC,GAAG,CAAC,CAAC,EAAE;EAC5D,OAAO;IACLC,IAAI,EAAEC,OAAO,CAACC,GAAG,CAACC,SAAS;IAC3BC,EAAE,EAAG,GAAEP,KAAM,EAAC;IACdC,OAAO,EAAG,GAAEA,OAAQ,EAAC;IACrBO,IAAI,EAAG,GAAEN,OAAQ;EACnB,CAAC;AACH"}},"mtime":1682148437940},"{\"assumptions\":{},\"sourceRoot\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/helpers/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"filename\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/helpers/mailTemplate.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/node_modules/babel-plugin-add-module-exports/lib/index.js\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-runtime\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"regenerator\":true},\"externalDependencies\":[]},{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.21.0:development":{"value":{"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.verifyEmailTemplate = exports.verifyEmailSubscriberTemplate = exports.thankYouSubscriberTemplate = exports.paymentEmail = exports.paymentComplete = exports.passwordResetEmailTemplate = exports.notificationTemplate2 = exports.notificationTemplate = exports.newsletterTemplate = exports.mfaEmailTemplate = exports.expiredPasswordTemplate = exports.expireProductWarning = exports.expireProduct = exports.disableEmailTemplate = exports.changePasswordTemplate = void 0;\nvar _moment = _interopRequireDefault(require(\"moment\"));\n/* eslint-disable camelcase */\n/* eslint-disable arrow-body-style */\n/* eslint-disable arrow-spacing */\n\n// eslint-disable-next-line import/prefer-default-export\nconst verifyEmailTemplate = userToken => {\n  return `\n    <div style=\"background-color: #f2f2f2; padding: 20px;\">\n      <h1 style=\"color: #004d99; text-align: center;\">Welcome to Brogrammers e-commerce!</h1>\n      <p style=\"color: #000; font-size: 16px;\">Please click below to activate your account:</p>\n      <a href=\"${process.env.VERIFY_URL}/${userToken}\" style=\"display: block; text-align: center; padding: 10px 20px; background-color: #004d99; color: #fff; text-decoration: none; border-radius: 5px; margin-top: 20px;\">Verify Your Email</a>\n      <p style=\"color: #000; font-size: 14px;\">Thank you for choosing Brogrammers e-commerce.</p>\n    </div>\n    `;\n};\nexports.verifyEmailTemplate = verifyEmailTemplate;\nconst verifyEmailSubscriberTemplate = (userToken, token) => {\n  return `\n  <div style=\"background-color: #f2f2f2; padding: 20px;\">\n    <h1 style=\"color: #004d99; text-align: center;\">Thank you for subscribing to Brogrammers e-commerce newsletter!</h1>\n    <p style=\"color: #000; font-size: 16px;\">Please click below to confirm your subscription:</p>\n   <a href=\"${process.env.SWAGGER_SERVER}/subscriber/verify/${userToken}?r=${token}\" style=\"display: block; text-align: center; padding: 10px 20px; background-color: #004d99; color: #fff; text-decoration: none; border-radius: 5px; margin-top: 20px;\">Confirm Subscription</a>\n   <p style=\"color: #000; font-size: 14px;\">You will now receive our latest updates and promotions.</p>\n  </div>\n    `;\n};\nexports.verifyEmailSubscriberTemplate = verifyEmailSubscriberTemplate;\nconst thankYouSubscriberTemplate = (username, subscriberId) => {\n  return `\n    <div style=\"background-color: #f2f2f2; padding: 20px;\">\n      <h1 style=\"color: #004d99; text-align: center;\">Thank you ${username} for subscribing to Brogrammers e-commerce newsletter!</h1>\n      <p style=\"color: #000; font-size: 16px;\">You will now receive our latest updates and promotions.</p>\n      <p style=\"color: #000; font-size: 14px;\">If you would like to unsubscribe from our newsletter, please click <a href=\"${process.env.UNSUBSCRIBE_URL}/${subscriberId}\" style=\"color: #004d99; text-decoration: underline;\">here</a>.</p>\n    </div>\n  `;\n};\nexports.thankYouSubscriberTemplate = thankYouSubscriberTemplate;\nconst changePasswordTemplate = (user, passwordExpirationTime) => {\n  return `\n    <div style=\"background-color: #f2f2f2; padding: 20px;\">\n      <h1 style=\"color: #004d99; text-align: center;\">Welcome to Brogrammers e-commerce dear!</h1>\n      <p style=\"color: #000; font-size: 16px;\">Dear ${user.username},\\n\\nYour password will expire in less than ${passwordExpirationTime} minutes.. Please use the following link to change your password:</p>\n      <a href=\"${process.env.FRONTEND_URL}/change-password\" style=\"display: block; text-align: center; padding: 10px 20px; background-color: #004d99; color: #fff; text-decoration: none; border-radius: 5px; margin-top: 20px;\">Change Password</a>\n</div>`;\n};\nexports.changePasswordTemplate = changePasswordTemplate;\nconst expiredPasswordTemplate = user => {\n  return `\n    <div style=\"background-color: #f2f2f2; padding: 20px;\">\n    <h1 style=\"color: #004d99; text-align: center;\">Brogrammers e-commerce Password Expired Notification</h1>\n      <p style=\"color: #000; font-size: 16px;\">Dear ${user.username},</p>\n      <p style=\"color: #000; font-size: 16px;\">Your password for Brogrammers e-commerce has expired. Please change your password immediately to ensure the security of your account.</p>\n      <a href=\"${process.env.FRONTEND_URL}/change-password\" style=\"display: block; text-align: center; padding: 10px 20px; background-color: #004d99; color: #fff; text-decoration: none; border-radius: 5px; margin-top: 20px;\">Change Password</a>\n    </div>`;\n};\nexports.expiredPasswordTemplate = expiredPasswordTemplate;\nconst passwordResetEmailTemplate = resetToken => {\n  return `\n    <div style=\"background-color: #f2f2f2; padding: 20px;\">\n      <h1 style=\"color: #004d99; text-align: center;\">Brogrammers e-commerce!</h1>\n      <p style=\"color: #000; font-size: 16px;\">Please click below to reset you password</p>\n      <a target=\"_blank\" href=\"${process.env.PASSWORD_RESET_URL}/${resetToken}\" style=\"display: block; text-align: center; font-size:18px; padding: 10px 20px; background-color: #004d99; color: #fff; text-decoration: none; border-radius: 5px; margin-top: 20px;\"> Click to reset your password</a>\n      <p style=\"color: #000; font-size: 14px;\">Thank you for choosing Brogrammers e-commerce.</p>\n    </div>\n    `;\n};\nexports.passwordResetEmailTemplate = passwordResetEmailTemplate;\nconst mfaEmailTemplate = mfa_code => {\n  return `\n  <div style=\"background-color: #f2f2f2; padding: 20px;\">\n      <h1 style=\"color: #004d99; text-align: center;\">Please use the following code to login.</h1>\n      <p style=\"color: #000; font-size: 16px;\">CODE: ${mfa_code}</p>\n      \n      <p style=\"color: #000; font-size: 14px;\">Thank you for choosing Brogrammers e-commerce.</p>\n    </div>\n  `;\n};\nexports.mfaEmailTemplate = mfaEmailTemplate;\nconst disableEmailTemplate = (username, disabledReason) => {\n  return `\n  <div style=\"background-color: #f2f2f2; padding: 20px;\">\n      <h1 style=\"color: #004d99; text-align: center;\">Dear ${username},<br/></h1>\n      <p style=\"color: #000; font-size: 16px;\">Your account has been disabled due to the following reason(s):<br/><br/>\n      ${disabledReason}<br/><br/>Please contact the support team if you have any questions.<br/><br/><br/>Best regards, <br/><br/>The support team,</p>\n\n      <p style=\"color: #000; font-size: 14px;\">Thank you for choosing Brogrammers e-commerce.</p>\n    </div>\n  `;\n};\nexports.disableEmailTemplate = disableEmailTemplate;\nconst expireProduct = (user, product) => {\n  return `\n  <div style=\"width:100%; font-family: sans-serif, system-ui;\">\n    <h1 style=\"text-align:center;background-color: #222;color: #fff;padding: 1.5rem;\">\n      ⚠️ Important: ${product.name} has Expired\n    </h1>\n    <div style=\"padding: 0 1rem;\">\n    <p>Dear ${user.username},</p>\n      <p>\n        I hope this email finds you well. We are writing to notify you that one of the products you \n        have listed on our market is had expired. We take the quality and safety of our products \n        very seriously, and it is important to us that our customers receive products that are fresh and effective.\n      </p>\n      <p>\n        Please take necessary actions to ensure that the product is either removed from the market \n        or the expiry date is updated. We understand that mistakes can happen, and we appreciate \n        your cooperation in resolving this issue.\n      </p>\n      <div style=\"display: flex; align-items: center;\">\n        <img src=\"${product.images[0]}\" style=\"width: 30%\"/>\n        <div style=\"padding-left: 1rem;\">\n          <p>name: <b>${product.name}</b></p>\n          <p>price: <b>US$${product.price}</b></p>\n          <p>quantity: <b>${product.quantity}</b></p>\n          <p>expires: <b>${product.exp_date}</b></p>\n        </div>\n      </div>\n      <p>\n        If you need any assistance in this matter or have any questions, please do not hesitate to \n        contact us. We look forward to continuing to work with you and providing our customers with \n        high-quality products.\n      </p>\n      <p>Best regards,</p>\n    </div>\n  </div>\n  `;\n};\nexports.expireProduct = expireProduct;\nconst expireProductWarning = (user, product) => {\n  return `\n    <div style=\"width:100%; font-family: sans-serif, system-ui;\">\n      <h1 style=\"text-align:center;background-color: #222;color: #fff;padding: 1.5rem;\">\n        ⚠️ Reminder: Expiry Date of ${product.name} is Approaching\n      </h1>\n      <div style=\"padding: 0 1rem;\">\n      <p>Dear ${user.username},</p>\n        <p>\n          I hope this email finds you well. We are writing to notify you that one of the products you \n          have listed on our market is about to expire. We take the quality and safety of our products \n          very seriously, and it is important to us that our customers receive products that are fresh and effective.\n        </p>\n        <p>\n          Please take necessary actions to ensure that the product is either removed from the market \n          or the expiry date is updated. We understand that mistakes can happen, and we appreciate \n          your cooperation in resolving this issue.\n        </p>\n        <div style=\"display: flex; align-items: center;\">\n          <img src=\"${product.images[0]}\" style=\"width: 30%\"/>\n          <div style=\"padding-left: 1rem;\">\n            <p>name: <b>${product.name}</b></p>\n            <p>price: <b>US$${product.price}</b></p>\n            <p>quantity: <b>${product.quantity}</b></p>\n            <p>expires: <b>${(0, _moment.default)(product.exp_date).fromNow()}</b></p>\n          </div>\n        </div>\n        <p>\n          If you need any assistance in this matter or have any questions, please do not hesitate to \n          contact us. We look forward to continuing to work with you and providing our customers with \n          high-quality products.\n        </p>\n        <p>Best regards,</p>\n      </div>\n    </div>\n  `;\n};\nexports.expireProductWarning = expireProductWarning;\nconst paymentComplete = (user, products) => {\n  return `\n    <div style=\"width:100%; font-family: sans-serif, system-ui;\">\n      <h1 style=\"text-align:center;background-color: #222;color: #fff;padding: 1.5rem;\">\n      ${user.username}, Thank you for purchasing our products!\n      </h1>\n      <div style=\"padding: 0 1rem;\">\n      <p>Dear ${user.username},</p>\n        <p>\n          I wanted to take a moment to thank you for choosing our product. We hope you're enjoying it \n          and finding it useful. Your support means a lot to us as a small business, and we're so \n          grateful for your purchase.\n        </p>\n        ${products.map(product => `\n          <div style=\"display: flex; align-items: center;\">\n            <img src=\"${product.images[0]}\" style=\"max-width: 30%;height: 7rem;object-fit: cover;\"/>\n            <div style=\"padding-left: 1rem;\">\n              <p>name: <b>${product.name}</b></p>\n              <p>price: <b>US$${product.price}</b></p>\n              <p>quantity: <b>${product.orderitem.quantity}</b></p>\n            </div>\n          </div>\n        `)}\n        <p>\n          If you have any questions or feedback, please don't hesitate to reach out. We're always \n          looking for ways to improve our products and make them even more valuable for our customers.\n        </p>\n        <p>Best regards,</p>\n      </div>\n    </div>\n  `;\n};\nexports.paymentComplete = paymentComplete;\nconst paymentEmail = (user, products, url) => {\n  return `\n    <div style=\"width:100%; font-family: sans-serif, system-ui;\">\n      <h1 style=\"text-align:center;background-color: #222;color: #fff;padding: 1.5rem;\">\n      ${user.username}, Thanks for your interest in our products!\n      </h1>\n      <div style=\"padding: 0 1rem;\">\n      <p>Dear ${user.username},</p>\n        <p>\n          Thank you for reaching out to us about our products. We're excited to hear that you're \n          interested in purchasing one, and we're happy to provide you with any information you \n          need to help you make a decision.\n        </p>\n        <p>\n          <a href=\"${url}\">\n            <button style=\"color:#222;background-color:#fa0; padding: 1.5rem 3rem;border: none;border-radius: 5px;\">Pay here</button>\n          </a>\n        </p>\n        ${products.map(product => `\n          <div style=\"display: flex; align-items: center;\">\n            <img src=\"${product.images[0]}\" style=\"max-width: 30%;height: 7rem;object-fit: cover;\"/>\n            <div style=\"padding-left: 1rem;\">\n              <p>name: <b>${product.name}</b></p>\n              <p>price: <b>US$${product.price}</b></p>\n              <p>quantity: <b>${product.orderitem.quantity}</b></p>\n            </div>\n          </div>\n        `)}\n        <p>\n          If you have any questions about our product or would like more information, please feel free \n          to ask. We're happy to provide you with additional details or specifications to help you make \n          an informed decision.\n        </p>\n        <p>\n          <a href=\"${url}\">\n            <button style=\"color:#222;background-color:#fa0; padding: 1.5rem 3rem;border: none;border-radius: 5px;\">Pay here</button>\n          </a>\n        </p>\n        <p>\n          Thank you again for considering our product. We look forward to hearing back from you soon!\n        </p>\n        <p>Best regards,</p>\n      </div>\n    </div>\n  `;\n};\nexports.paymentEmail = paymentEmail;\nconst notificationTemplate = (username, message, type, url) => {\n  return `  <div style=\"width:100%;hight:50%; background-color:#f2f2f2; font-family: sans-serif, system-ui;color:black;\">\n  <div style=\"width:100%; font-family: sans-serif, system-ui;\">\n    <h1 style=\"text-align:center;background-color: #f2f2f2;color: ;padding: 1.5rem;\">\n      ${type}\n    </h1>\n    <div style=\"padding: 0 1rem;\">\n    <h3>Dear ${username},</h3>\n      <p>\n        I hope this email finds you well, email if for follow up about your showed interest in before, as we promissed to notify you whenever there is a a message that may seem interesting to you according to your recorded interests \n        <p> I wanted to notify you that <b> ${message}</b></p>   \n      </p>\n      <div style=\"text-align:center;\">\n       <a href=${url} style=\"display: block; text-align: center; padding: 10px 20px; background-color: #004d99; color: #fff; text-decoration: none; border-radius: 5px; margin-top: 20px;\">Check this out </a> </button>,\n    </div>\n    <p>Best regards, from <b>Brogrammers </b></p>\n    </div>\n  </div><div>`;\n};\nexports.notificationTemplate = notificationTemplate;\nconst notificationTemplate2 = (username, message, type) => {\n  return ` <div style=\"width:100%;hight:50%; background-color:#f2f2f2; font-family: sans-serif, system-ui;\">\n  <div style=\"width:100%; font-family: sans-serif, system-ui;\">\n    <h1 style=\"text-align:center;background-color: #f2f2f2;color: ;padding: 1.5rem;\">\n      ${type}\n    </h1>\n    <div style=\"padding: 0 1rem;\">\n    <h3>Dear ${username},</h3>\n      <p>\n        I hope this email finds you well, email if for follow up about your showed interest in before, as we promissed to notify you whenever there is a a message that may seem interesting to you according to your recorded interests \n        <p> I wanted to notify you that <b> ${message}</b></p>   \n      </p>\n      <div style=\"text-align:center;\">\n       <a href=\"/users/login\" style=\"display: block; text-align: center; padding: 10px 20px; background-color: #004d99; color: #fff; text-decoration: none; border-radius: 5px; margin-top: 20px;\">Login to check </a> </button>,\n    </div>\n    <p>Best regards, from <b>Brogrammers </b></p>\n    </div>\n  </div><div>`;\n};\nexports.notificationTemplate2 = notificationTemplate2;\nconst newsletterTemplate = (username, newsletter, subscriberId, header, content) => {\n  return `\n  <div style=\"max-width: 600px; margin: 0 auto; background-color: #fff; padding: 20px; box-shadow: 0px 0px 20px rgba(0,0,0,0.1);\">\n    <h1 style=\"color: #004d99; font-size: 28px; margin-top: 20px;\">${header}</h1>\n    <div style=\"color: #000; font-size: 16px; line-height: 1.5; margin-top: 20px;\">Hello ${username},<br><br>${content}</div>\n    <h2 style=\"color: #004d99; font-size: 24px; margin-top: 20px;\">${newsletter.name}</h2>\n    <img src=\"${newsletter.images[0]}\" alt=\"${newsletter.name}\" style=\"max-width: 100%; height: auto; margin-top: 20px;\">\n    <div style=\"color: #000; font-size: 16px; line-height: 1.5; margin-top: 20px;\">${newsletter.description}</div>\n    <div style=\"color: #000; font-size: 16px; line-height: 1.5; margin-top: 20px;\">Price: ${newsletter.price}</div>\n    <a href=\"${newsletter.images[0]}\" target=\"_blank\" style=\"display: inline-block; padding: 10px 20px; background-color: #004d99; color: #fff; text-decoration: none; border-radius: 5px; margin-top: 20px;\">View newsletter</a>\n    <div style=\"color: #000; font-size: 16px; line-height: 1.5; margin-top: 20px;\">Thank you ${username} for being a loyal subscriber to our newsletter! Stay tuned for more updates.</div>\n    <div style=\"color: #000; font-size: 14px; margin-top: 20px;\">If you would like to unsubscribe from our newsletter, please click <a href=\"${process.env.UNSUBSCRIBE_URL}/${subscriberId}\" style=\"color: #004d99; text-decoration: underline;\">here</a>.</div>\n </div>`;\n};\nexports.newsletterTemplate = newsletterTemplate;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfbW9tZW50IiwiX2ludGVyb3BSZXF1aXJlRGVmYXVsdCIsInJlcXVpcmUiLCJ2ZXJpZnlFbWFpbFRlbXBsYXRlIiwidXNlclRva2VuIiwicHJvY2VzcyIsImVudiIsIlZFUklGWV9VUkwiLCJleHBvcnRzIiwidmVyaWZ5RW1haWxTdWJzY3JpYmVyVGVtcGxhdGUiLCJ0b2tlbiIsIlNXQUdHRVJfU0VSVkVSIiwidGhhbmtZb3VTdWJzY3JpYmVyVGVtcGxhdGUiLCJ1c2VybmFtZSIsInN1YnNjcmliZXJJZCIsIlVOU1VCU0NSSUJFX1VSTCIsImNoYW5nZVBhc3N3b3JkVGVtcGxhdGUiLCJ1c2VyIiwicGFzc3dvcmRFeHBpcmF0aW9uVGltZSIsIkZST05URU5EX1VSTCIsImV4cGlyZWRQYXNzd29yZFRlbXBsYXRlIiwicGFzc3dvcmRSZXNldEVtYWlsVGVtcGxhdGUiLCJyZXNldFRva2VuIiwiUEFTU1dPUkRfUkVTRVRfVVJMIiwibWZhRW1haWxUZW1wbGF0ZSIsIm1mYV9jb2RlIiwiZGlzYWJsZUVtYWlsVGVtcGxhdGUiLCJkaXNhYmxlZFJlYXNvbiIsImV4cGlyZVByb2R1Y3QiLCJwcm9kdWN0IiwibmFtZSIsImltYWdlcyIsInByaWNlIiwicXVhbnRpdHkiLCJleHBfZGF0ZSIsImV4cGlyZVByb2R1Y3RXYXJuaW5nIiwibW9tZW50IiwiZnJvbU5vdyIsInBheW1lbnRDb21wbGV0ZSIsInByb2R1Y3RzIiwibWFwIiwib3JkZXJpdGVtIiwicGF5bWVudEVtYWlsIiwidXJsIiwibm90aWZpY2F0aW9uVGVtcGxhdGUiLCJtZXNzYWdlIiwidHlwZSIsIm5vdGlmaWNhdGlvblRlbXBsYXRlMiIsIm5ld3NsZXR0ZXJUZW1wbGF0ZSIsIm5ld3NsZXR0ZXIiLCJoZWFkZXIiLCJjb250ZW50IiwiZGVzY3JpcHRpb24iXSwic291cmNlUm9vdCI6Ii9Vc2Vycy9hbmRlbGFyd2FuZGEvRGVza3RvcC9lLWNvbW0tdGVhbS1icm9ncmFtbWVycy1ibi9zcmMvaGVscGVycy8iLCJzb3VyY2VzIjpbIm1haWxUZW1wbGF0ZS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKiBlc2xpbnQtZGlzYWJsZSBjYW1lbGNhc2UgKi9cbi8qIGVzbGludC1kaXNhYmxlIGFycm93LWJvZHktc3R5bGUgKi9cbi8qIGVzbGludC1kaXNhYmxlIGFycm93LXNwYWNpbmcgKi9cbmltcG9ydCBtb21lbnQgZnJvbSAnbW9tZW50JztcblxuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGltcG9ydC9wcmVmZXItZGVmYXVsdC1leHBvcnRcbmV4cG9ydCBjb25zdCB2ZXJpZnlFbWFpbFRlbXBsYXRlID0gKHVzZXJUb2tlbikgPT4ge1xuICByZXR1cm4gYFxuICAgIDxkaXYgc3R5bGU9XCJiYWNrZ3JvdW5kLWNvbG9yOiAjZjJmMmYyOyBwYWRkaW5nOiAyMHB4O1wiPlxuICAgICAgPGgxIHN0eWxlPVwiY29sb3I6ICMwMDRkOTk7IHRleHQtYWxpZ246IGNlbnRlcjtcIj5XZWxjb21lIHRvIEJyb2dyYW1tZXJzIGUtY29tbWVyY2UhPC9oMT5cbiAgICAgIDxwIHN0eWxlPVwiY29sb3I6ICMwMDA7IGZvbnQtc2l6ZTogMTZweDtcIj5QbGVhc2UgY2xpY2sgYmVsb3cgdG8gYWN0aXZhdGUgeW91ciBhY2NvdW50OjwvcD5cbiAgICAgIDxhIGhyZWY9XCIke3Byb2Nlc3MuZW52LlZFUklGWV9VUkx9LyR7dXNlclRva2VufVwiIHN0eWxlPVwiZGlzcGxheTogYmxvY2s7IHRleHQtYWxpZ246IGNlbnRlcjsgcGFkZGluZzogMTBweCAyMHB4OyBiYWNrZ3JvdW5kLWNvbG9yOiAjMDA0ZDk5OyBjb2xvcjogI2ZmZjsgdGV4dC1kZWNvcmF0aW9uOiBub25lOyBib3JkZXItcmFkaXVzOiA1cHg7IG1hcmdpbi10b3A6IDIwcHg7XCI+VmVyaWZ5IFlvdXIgRW1haWw8L2E+XG4gICAgICA8cCBzdHlsZT1cImNvbG9yOiAjMDAwOyBmb250LXNpemU6IDE0cHg7XCI+VGhhbmsgeW91IGZvciBjaG9vc2luZyBCcm9ncmFtbWVycyBlLWNvbW1lcmNlLjwvcD5cbiAgICA8L2Rpdj5cbiAgICBgO1xufTtcbmV4cG9ydCBjb25zdCB2ZXJpZnlFbWFpbFN1YnNjcmliZXJUZW1wbGF0ZSA9ICh1c2VyVG9rZW4sIHRva2VuKSA9PiB7XG4gIHJldHVybiBgXG4gIDxkaXYgc3R5bGU9XCJiYWNrZ3JvdW5kLWNvbG9yOiAjZjJmMmYyOyBwYWRkaW5nOiAyMHB4O1wiPlxuICAgIDxoMSBzdHlsZT1cImNvbG9yOiAjMDA0ZDk5OyB0ZXh0LWFsaWduOiBjZW50ZXI7XCI+VGhhbmsgeW91IGZvciBzdWJzY3JpYmluZyB0byBCcm9ncmFtbWVycyBlLWNvbW1lcmNlIG5ld3NsZXR0ZXIhPC9oMT5cbiAgICA8cCBzdHlsZT1cImNvbG9yOiAjMDAwOyBmb250LXNpemU6IDE2cHg7XCI+UGxlYXNlIGNsaWNrIGJlbG93IHRvIGNvbmZpcm0geW91ciBzdWJzY3JpcHRpb246PC9wPlxuICAgPGEgaHJlZj1cIiR7cHJvY2Vzcy5lbnYuU1dBR0dFUl9TRVJWRVJ9L3N1YnNjcmliZXIvdmVyaWZ5LyR7dXNlclRva2VufT9yPSR7dG9rZW59XCIgc3R5bGU9XCJkaXNwbGF5OiBibG9jazsgdGV4dC1hbGlnbjogY2VudGVyOyBwYWRkaW5nOiAxMHB4IDIwcHg7IGJhY2tncm91bmQtY29sb3I6ICMwMDRkOTk7IGNvbG9yOiAjZmZmOyB0ZXh0LWRlY29yYXRpb246IG5vbmU7IGJvcmRlci1yYWRpdXM6IDVweDsgbWFyZ2luLXRvcDogMjBweDtcIj5Db25maXJtIFN1YnNjcmlwdGlvbjwvYT5cbiAgIDxwIHN0eWxlPVwiY29sb3I6ICMwMDA7IGZvbnQtc2l6ZTogMTRweDtcIj5Zb3Ugd2lsbCBub3cgcmVjZWl2ZSBvdXIgbGF0ZXN0IHVwZGF0ZXMgYW5kIHByb21vdGlvbnMuPC9wPlxuICA8L2Rpdj5cbiAgICBgO1xufTtcbmV4cG9ydCBjb25zdCB0aGFua1lvdVN1YnNjcmliZXJUZW1wbGF0ZSA9ICh1c2VybmFtZSwgc3Vic2NyaWJlcklkKSA9PiB7XG4gIHJldHVybiBgXG4gICAgPGRpdiBzdHlsZT1cImJhY2tncm91bmQtY29sb3I6ICNmMmYyZjI7IHBhZGRpbmc6IDIwcHg7XCI+XG4gICAgICA8aDEgc3R5bGU9XCJjb2xvcjogIzAwNGQ5OTsgdGV4dC1hbGlnbjogY2VudGVyO1wiPlRoYW5rIHlvdSAke3VzZXJuYW1lfSBmb3Igc3Vic2NyaWJpbmcgdG8gQnJvZ3JhbW1lcnMgZS1jb21tZXJjZSBuZXdzbGV0dGVyITwvaDE+XG4gICAgICA8cCBzdHlsZT1cImNvbG9yOiAjMDAwOyBmb250LXNpemU6IDE2cHg7XCI+WW91IHdpbGwgbm93IHJlY2VpdmUgb3VyIGxhdGVzdCB1cGRhdGVzIGFuZCBwcm9tb3Rpb25zLjwvcD5cbiAgICAgIDxwIHN0eWxlPVwiY29sb3I6ICMwMDA7IGZvbnQtc2l6ZTogMTRweDtcIj5JZiB5b3Ugd291bGQgbGlrZSB0byB1bnN1YnNjcmliZSBmcm9tIG91ciBuZXdzbGV0dGVyLCBwbGVhc2UgY2xpY2sgPGEgaHJlZj1cIiR7cHJvY2Vzcy5lbnYuVU5TVUJTQ1JJQkVfVVJMfS8ke3N1YnNjcmliZXJJZH1cIiBzdHlsZT1cImNvbG9yOiAjMDA0ZDk5OyB0ZXh0LWRlY29yYXRpb246IHVuZGVybGluZTtcIj5oZXJlPC9hPi48L3A+XG4gICAgPC9kaXY+XG4gIGA7XG59O1xuZXhwb3J0IGNvbnN0IGNoYW5nZVBhc3N3b3JkVGVtcGxhdGUgPSAodXNlciwgcGFzc3dvcmRFeHBpcmF0aW9uVGltZSkgPT4ge1xuICByZXR1cm4gYFxuICAgIDxkaXYgc3R5bGU9XCJiYWNrZ3JvdW5kLWNvbG9yOiAjZjJmMmYyOyBwYWRkaW5nOiAyMHB4O1wiPlxuICAgICAgPGgxIHN0eWxlPVwiY29sb3I6ICMwMDRkOTk7IHRleHQtYWxpZ246IGNlbnRlcjtcIj5XZWxjb21lIHRvIEJyb2dyYW1tZXJzIGUtY29tbWVyY2UgZGVhciE8L2gxPlxuICAgICAgPHAgc3R5bGU9XCJjb2xvcjogIzAwMDsgZm9udC1zaXplOiAxNnB4O1wiPkRlYXIgJHt1c2VyLnVzZXJuYW1lfSxcXG5cXG5Zb3VyIHBhc3N3b3JkIHdpbGwgZXhwaXJlIGluIGxlc3MgdGhhbiAke3Bhc3N3b3JkRXhwaXJhdGlvblRpbWV9IG1pbnV0ZXMuLiBQbGVhc2UgdXNlIHRoZSBmb2xsb3dpbmcgbGluayB0byBjaGFuZ2UgeW91ciBwYXNzd29yZDo8L3A+XG4gICAgICA8YSBocmVmPVwiJHtwcm9jZXNzLmVudi5GUk9OVEVORF9VUkx9L2NoYW5nZS1wYXNzd29yZFwiIHN0eWxlPVwiZGlzcGxheTogYmxvY2s7IHRleHQtYWxpZ246IGNlbnRlcjsgcGFkZGluZzogMTBweCAyMHB4OyBiYWNrZ3JvdW5kLWNvbG9yOiAjMDA0ZDk5OyBjb2xvcjogI2ZmZjsgdGV4dC1kZWNvcmF0aW9uOiBub25lOyBib3JkZXItcmFkaXVzOiA1cHg7IG1hcmdpbi10b3A6IDIwcHg7XCI+Q2hhbmdlIFBhc3N3b3JkPC9hPlxuPC9kaXY+YDtcbn07XG5leHBvcnQgY29uc3QgZXhwaXJlZFBhc3N3b3JkVGVtcGxhdGUgPSAodXNlcikgPT4ge1xuICByZXR1cm4gYFxuICAgIDxkaXYgc3R5bGU9XCJiYWNrZ3JvdW5kLWNvbG9yOiAjZjJmMmYyOyBwYWRkaW5nOiAyMHB4O1wiPlxuICAgIDxoMSBzdHlsZT1cImNvbG9yOiAjMDA0ZDk5OyB0ZXh0LWFsaWduOiBjZW50ZXI7XCI+QnJvZ3JhbW1lcnMgZS1jb21tZXJjZSBQYXNzd29yZCBFeHBpcmVkIE5vdGlmaWNhdGlvbjwvaDE+XG4gICAgICA8cCBzdHlsZT1cImNvbG9yOiAjMDAwOyBmb250LXNpemU6IDE2cHg7XCI+RGVhciAke3VzZXIudXNlcm5hbWV9LDwvcD5cbiAgICAgIDxwIHN0eWxlPVwiY29sb3I6ICMwMDA7IGZvbnQtc2l6ZTogMTZweDtcIj5Zb3VyIHBhc3N3b3JkIGZvciBCcm9ncmFtbWVycyBlLWNvbW1lcmNlIGhhcyBleHBpcmVkLiBQbGVhc2UgY2hhbmdlIHlvdXIgcGFzc3dvcmQgaW1tZWRpYXRlbHkgdG8gZW5zdXJlIHRoZSBzZWN1cml0eSBvZiB5b3VyIGFjY291bnQuPC9wPlxuICAgICAgPGEgaHJlZj1cIiR7cHJvY2Vzcy5lbnYuRlJPTlRFTkRfVVJMfS9jaGFuZ2UtcGFzc3dvcmRcIiBzdHlsZT1cImRpc3BsYXk6IGJsb2NrOyB0ZXh0LWFsaWduOiBjZW50ZXI7IHBhZGRpbmc6IDEwcHggMjBweDsgYmFja2dyb3VuZC1jb2xvcjogIzAwNGQ5OTsgY29sb3I6ICNmZmY7IHRleHQtZGVjb3JhdGlvbjogbm9uZTsgYm9yZGVyLXJhZGl1czogNXB4OyBtYXJnaW4tdG9wOiAyMHB4O1wiPkNoYW5nZSBQYXNzd29yZDwvYT5cbiAgICA8L2Rpdj5gO1xufTtcblxuZXhwb3J0IGNvbnN0IHBhc3N3b3JkUmVzZXRFbWFpbFRlbXBsYXRlID0gKHJlc2V0VG9rZW4pID0+IHtcbiAgcmV0dXJuIGBcbiAgICA8ZGl2IHN0eWxlPVwiYmFja2dyb3VuZC1jb2xvcjogI2YyZjJmMjsgcGFkZGluZzogMjBweDtcIj5cbiAgICAgIDxoMSBzdHlsZT1cImNvbG9yOiAjMDA0ZDk5OyB0ZXh0LWFsaWduOiBjZW50ZXI7XCI+QnJvZ3JhbW1lcnMgZS1jb21tZXJjZSE8L2gxPlxuICAgICAgPHAgc3R5bGU9XCJjb2xvcjogIzAwMDsgZm9udC1zaXplOiAxNnB4O1wiPlBsZWFzZSBjbGljayBiZWxvdyB0byByZXNldCB5b3UgcGFzc3dvcmQ8L3A+XG4gICAgICA8YSB0YXJnZXQ9XCJfYmxhbmtcIiBocmVmPVwiJHtwcm9jZXNzLmVudi5QQVNTV09SRF9SRVNFVF9VUkx9LyR7cmVzZXRUb2tlbn1cIiBzdHlsZT1cImRpc3BsYXk6IGJsb2NrOyB0ZXh0LWFsaWduOiBjZW50ZXI7IGZvbnQtc2l6ZToxOHB4OyBwYWRkaW5nOiAxMHB4IDIwcHg7IGJhY2tncm91bmQtY29sb3I6ICMwMDRkOTk7IGNvbG9yOiAjZmZmOyB0ZXh0LWRlY29yYXRpb246IG5vbmU7IGJvcmRlci1yYWRpdXM6IDVweDsgbWFyZ2luLXRvcDogMjBweDtcIj4gQ2xpY2sgdG8gcmVzZXQgeW91ciBwYXNzd29yZDwvYT5cbiAgICAgIDxwIHN0eWxlPVwiY29sb3I6ICMwMDA7IGZvbnQtc2l6ZTogMTRweDtcIj5UaGFuayB5b3UgZm9yIGNob29zaW5nIEJyb2dyYW1tZXJzIGUtY29tbWVyY2UuPC9wPlxuICAgIDwvZGl2PlxuICAgIGA7XG59O1xuZXhwb3J0IGNvbnN0IG1mYUVtYWlsVGVtcGxhdGUgPSAobWZhX2NvZGUpID0+IHtcbiAgcmV0dXJuIGBcbiAgPGRpdiBzdHlsZT1cImJhY2tncm91bmQtY29sb3I6ICNmMmYyZjI7IHBhZGRpbmc6IDIwcHg7XCI+XG4gICAgICA8aDEgc3R5bGU9XCJjb2xvcjogIzAwNGQ5OTsgdGV4dC1hbGlnbjogY2VudGVyO1wiPlBsZWFzZSB1c2UgdGhlIGZvbGxvd2luZyBjb2RlIHRvIGxvZ2luLjwvaDE+XG4gICAgICA8cCBzdHlsZT1cImNvbG9yOiAjMDAwOyBmb250LXNpemU6IDE2cHg7XCI+Q09ERTogJHttZmFfY29kZX08L3A+XG4gICAgICBcbiAgICAgIDxwIHN0eWxlPVwiY29sb3I6ICMwMDA7IGZvbnQtc2l6ZTogMTRweDtcIj5UaGFuayB5b3UgZm9yIGNob29zaW5nIEJyb2dyYW1tZXJzIGUtY29tbWVyY2UuPC9wPlxuICAgIDwvZGl2PlxuICBgO1xufTtcbmV4cG9ydCBjb25zdCBkaXNhYmxlRW1haWxUZW1wbGF0ZSA9ICh1c2VybmFtZSwgZGlzYWJsZWRSZWFzb24pID0+IHtcbiAgcmV0dXJuIGBcbiAgPGRpdiBzdHlsZT1cImJhY2tncm91bmQtY29sb3I6ICNmMmYyZjI7IHBhZGRpbmc6IDIwcHg7XCI+XG4gICAgICA8aDEgc3R5bGU9XCJjb2xvcjogIzAwNGQ5OTsgdGV4dC1hbGlnbjogY2VudGVyO1wiPkRlYXIgJHt1c2VybmFtZX0sPGJyLz48L2gxPlxuICAgICAgPHAgc3R5bGU9XCJjb2xvcjogIzAwMDsgZm9udC1zaXplOiAxNnB4O1wiPllvdXIgYWNjb3VudCBoYXMgYmVlbiBkaXNhYmxlZCBkdWUgdG8gdGhlIGZvbGxvd2luZyByZWFzb24ocyk6PGJyLz48YnIvPlxuICAgICAgJHtkaXNhYmxlZFJlYXNvbn08YnIvPjxici8+UGxlYXNlIGNvbnRhY3QgdGhlIHN1cHBvcnQgdGVhbSBpZiB5b3UgaGF2ZSBhbnkgcXVlc3Rpb25zLjxici8+PGJyLz48YnIvPkJlc3QgcmVnYXJkcywgPGJyLz48YnIvPlRoZSBzdXBwb3J0IHRlYW0sPC9wPlxuXG4gICAgICA8cCBzdHlsZT1cImNvbG9yOiAjMDAwOyBmb250LXNpemU6IDE0cHg7XCI+VGhhbmsgeW91IGZvciBjaG9vc2luZyBCcm9ncmFtbWVycyBlLWNvbW1lcmNlLjwvcD5cbiAgICA8L2Rpdj5cbiAgYDtcbn07XG5cbmV4cG9ydCBjb25zdCBleHBpcmVQcm9kdWN0ID0gKHVzZXIsIHByb2R1Y3QpID0+IHtcbiAgcmV0dXJuIChgXG4gIDxkaXYgc3R5bGU9XCJ3aWR0aDoxMDAlOyBmb250LWZhbWlseTogc2Fucy1zZXJpZiwgc3lzdGVtLXVpO1wiPlxuICAgIDxoMSBzdHlsZT1cInRleHQtYWxpZ246Y2VudGVyO2JhY2tncm91bmQtY29sb3I6ICMyMjI7Y29sb3I6ICNmZmY7cGFkZGluZzogMS41cmVtO1wiPlxuICAgICAg4pqg77iPIEltcG9ydGFudDogJHtwcm9kdWN0Lm5hbWV9IGhhcyBFeHBpcmVkXG4gICAgPC9oMT5cbiAgICA8ZGl2IHN0eWxlPVwicGFkZGluZzogMCAxcmVtO1wiPlxuICAgIDxwPkRlYXIgJHt1c2VyLnVzZXJuYW1lfSw8L3A+XG4gICAgICA8cD5cbiAgICAgICAgSSBob3BlIHRoaXMgZW1haWwgZmluZHMgeW91IHdlbGwuIFdlIGFyZSB3cml0aW5nIHRvIG5vdGlmeSB5b3UgdGhhdCBvbmUgb2YgdGhlIHByb2R1Y3RzIHlvdSBcbiAgICAgICAgaGF2ZSBsaXN0ZWQgb24gb3VyIG1hcmtldCBpcyBoYWQgZXhwaXJlZC4gV2UgdGFrZSB0aGUgcXVhbGl0eSBhbmQgc2FmZXR5IG9mIG91ciBwcm9kdWN0cyBcbiAgICAgICAgdmVyeSBzZXJpb3VzbHksIGFuZCBpdCBpcyBpbXBvcnRhbnQgdG8gdXMgdGhhdCBvdXIgY3VzdG9tZXJzIHJlY2VpdmUgcHJvZHVjdHMgdGhhdCBhcmUgZnJlc2ggYW5kIGVmZmVjdGl2ZS5cbiAgICAgIDwvcD5cbiAgICAgIDxwPlxuICAgICAgICBQbGVhc2UgdGFrZSBuZWNlc3NhcnkgYWN0aW9ucyB0byBlbnN1cmUgdGhhdCB0aGUgcHJvZHVjdCBpcyBlaXRoZXIgcmVtb3ZlZCBmcm9tIHRoZSBtYXJrZXQgXG4gICAgICAgIG9yIHRoZSBleHBpcnkgZGF0ZSBpcyB1cGRhdGVkLiBXZSB1bmRlcnN0YW5kIHRoYXQgbWlzdGFrZXMgY2FuIGhhcHBlbiwgYW5kIHdlIGFwcHJlY2lhdGUgXG4gICAgICAgIHlvdXIgY29vcGVyYXRpb24gaW4gcmVzb2x2aW5nIHRoaXMgaXNzdWUuXG4gICAgICA8L3A+XG4gICAgICA8ZGl2IHN0eWxlPVwiZGlzcGxheTogZmxleDsgYWxpZ24taXRlbXM6IGNlbnRlcjtcIj5cbiAgICAgICAgPGltZyBzcmM9XCIke3Byb2R1Y3QuaW1hZ2VzWzBdfVwiIHN0eWxlPVwid2lkdGg6IDMwJVwiLz5cbiAgICAgICAgPGRpdiBzdHlsZT1cInBhZGRpbmctbGVmdDogMXJlbTtcIj5cbiAgICAgICAgICA8cD5uYW1lOiA8Yj4ke3Byb2R1Y3QubmFtZX08L2I+PC9wPlxuICAgICAgICAgIDxwPnByaWNlOiA8Yj5VUyQke3Byb2R1Y3QucHJpY2V9PC9iPjwvcD5cbiAgICAgICAgICA8cD5xdWFudGl0eTogPGI+JHtwcm9kdWN0LnF1YW50aXR5fTwvYj48L3A+XG4gICAgICAgICAgPHA+ZXhwaXJlczogPGI+JHtwcm9kdWN0LmV4cF9kYXRlfTwvYj48L3A+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9kaXY+XG4gICAgICA8cD5cbiAgICAgICAgSWYgeW91IG5lZWQgYW55IGFzc2lzdGFuY2UgaW4gdGhpcyBtYXR0ZXIgb3IgaGF2ZSBhbnkgcXVlc3Rpb25zLCBwbGVhc2UgZG8gbm90IGhlc2l0YXRlIHRvIFxuICAgICAgICBjb250YWN0IHVzLiBXZSBsb29rIGZvcndhcmQgdG8gY29udGludWluZyB0byB3b3JrIHdpdGggeW91IGFuZCBwcm92aWRpbmcgb3VyIGN1c3RvbWVycyB3aXRoIFxuICAgICAgICBoaWdoLXF1YWxpdHkgcHJvZHVjdHMuXG4gICAgICA8L3A+XG4gICAgICA8cD5CZXN0IHJlZ2FyZHMsPC9wPlxuICAgIDwvZGl2PlxuICA8L2Rpdj5cbiAgYCk7XG59O1xuXG5leHBvcnQgY29uc3QgZXhwaXJlUHJvZHVjdFdhcm5pbmcgPSAodXNlciwgcHJvZHVjdCkgPT4ge1xuICByZXR1cm4gKGBcbiAgICA8ZGl2IHN0eWxlPVwid2lkdGg6MTAwJTsgZm9udC1mYW1pbHk6IHNhbnMtc2VyaWYsIHN5c3RlbS11aTtcIj5cbiAgICAgIDxoMSBzdHlsZT1cInRleHQtYWxpZ246Y2VudGVyO2JhY2tncm91bmQtY29sb3I6ICMyMjI7Y29sb3I6ICNmZmY7cGFkZGluZzogMS41cmVtO1wiPlxuICAgICAgICDimqDvuI8gUmVtaW5kZXI6IEV4cGlyeSBEYXRlIG9mICR7cHJvZHVjdC5uYW1lfSBpcyBBcHByb2FjaGluZ1xuICAgICAgPC9oMT5cbiAgICAgIDxkaXYgc3R5bGU9XCJwYWRkaW5nOiAwIDFyZW07XCI+XG4gICAgICA8cD5EZWFyICR7dXNlci51c2VybmFtZX0sPC9wPlxuICAgICAgICA8cD5cbiAgICAgICAgICBJIGhvcGUgdGhpcyBlbWFpbCBmaW5kcyB5b3Ugd2VsbC4gV2UgYXJlIHdyaXRpbmcgdG8gbm90aWZ5IHlvdSB0aGF0IG9uZSBvZiB0aGUgcHJvZHVjdHMgeW91IFxuICAgICAgICAgIGhhdmUgbGlzdGVkIG9uIG91ciBtYXJrZXQgaXMgYWJvdXQgdG8gZXhwaXJlLiBXZSB0YWtlIHRoZSBxdWFsaXR5IGFuZCBzYWZldHkgb2Ygb3VyIHByb2R1Y3RzIFxuICAgICAgICAgIHZlcnkgc2VyaW91c2x5LCBhbmQgaXQgaXMgaW1wb3J0YW50IHRvIHVzIHRoYXQgb3VyIGN1c3RvbWVycyByZWNlaXZlIHByb2R1Y3RzIHRoYXQgYXJlIGZyZXNoIGFuZCBlZmZlY3RpdmUuXG4gICAgICAgIDwvcD5cbiAgICAgICAgPHA+XG4gICAgICAgICAgUGxlYXNlIHRha2UgbmVjZXNzYXJ5IGFjdGlvbnMgdG8gZW5zdXJlIHRoYXQgdGhlIHByb2R1Y3QgaXMgZWl0aGVyIHJlbW92ZWQgZnJvbSB0aGUgbWFya2V0IFxuICAgICAgICAgIG9yIHRoZSBleHBpcnkgZGF0ZSBpcyB1cGRhdGVkLiBXZSB1bmRlcnN0YW5kIHRoYXQgbWlzdGFrZXMgY2FuIGhhcHBlbiwgYW5kIHdlIGFwcHJlY2lhdGUgXG4gICAgICAgICAgeW91ciBjb29wZXJhdGlvbiBpbiByZXNvbHZpbmcgdGhpcyBpc3N1ZS5cbiAgICAgICAgPC9wPlxuICAgICAgICA8ZGl2IHN0eWxlPVwiZGlzcGxheTogZmxleDsgYWxpZ24taXRlbXM6IGNlbnRlcjtcIj5cbiAgICAgICAgICA8aW1nIHNyYz1cIiR7cHJvZHVjdC5pbWFnZXNbMF19XCIgc3R5bGU9XCJ3aWR0aDogMzAlXCIvPlxuICAgICAgICAgIDxkaXYgc3R5bGU9XCJwYWRkaW5nLWxlZnQ6IDFyZW07XCI+XG4gICAgICAgICAgICA8cD5uYW1lOiA8Yj4ke3Byb2R1Y3QubmFtZX08L2I+PC9wPlxuICAgICAgICAgICAgPHA+cHJpY2U6IDxiPlVTJCR7cHJvZHVjdC5wcmljZX08L2I+PC9wPlxuICAgICAgICAgICAgPHA+cXVhbnRpdHk6IDxiPiR7cHJvZHVjdC5xdWFudGl0eX08L2I+PC9wPlxuICAgICAgICAgICAgPHA+ZXhwaXJlczogPGI+JHttb21lbnQocHJvZHVjdC5leHBfZGF0ZSkuZnJvbU5vdygpfTwvYj48L3A+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgICAgICA8cD5cbiAgICAgICAgICBJZiB5b3UgbmVlZCBhbnkgYXNzaXN0YW5jZSBpbiB0aGlzIG1hdHRlciBvciBoYXZlIGFueSBxdWVzdGlvbnMsIHBsZWFzZSBkbyBub3QgaGVzaXRhdGUgdG8gXG4gICAgICAgICAgY29udGFjdCB1cy4gV2UgbG9vayBmb3J3YXJkIHRvIGNvbnRpbnVpbmcgdG8gd29yayB3aXRoIHlvdSBhbmQgcHJvdmlkaW5nIG91ciBjdXN0b21lcnMgd2l0aCBcbiAgICAgICAgICBoaWdoLXF1YWxpdHkgcHJvZHVjdHMuXG4gICAgICAgIDwvcD5cbiAgICAgICAgPHA+QmVzdCByZWdhcmRzLDwvcD5cbiAgICAgIDwvZGl2PlxuICAgIDwvZGl2PlxuICBgKTtcbn07XG5cbmV4cG9ydCBjb25zdCBwYXltZW50Q29tcGxldGUgPSAodXNlciwgcHJvZHVjdHMpID0+IHtcbiAgcmV0dXJuIChgXG4gICAgPGRpdiBzdHlsZT1cIndpZHRoOjEwMCU7IGZvbnQtZmFtaWx5OiBzYW5zLXNlcmlmLCBzeXN0ZW0tdWk7XCI+XG4gICAgICA8aDEgc3R5bGU9XCJ0ZXh0LWFsaWduOmNlbnRlcjtiYWNrZ3JvdW5kLWNvbG9yOiAjMjIyO2NvbG9yOiAjZmZmO3BhZGRpbmc6IDEuNXJlbTtcIj5cbiAgICAgICR7dXNlci51c2VybmFtZX0sIFRoYW5rIHlvdSBmb3IgcHVyY2hhc2luZyBvdXIgcHJvZHVjdHMhXG4gICAgICA8L2gxPlxuICAgICAgPGRpdiBzdHlsZT1cInBhZGRpbmc6IDAgMXJlbTtcIj5cbiAgICAgIDxwPkRlYXIgJHt1c2VyLnVzZXJuYW1lfSw8L3A+XG4gICAgICAgIDxwPlxuICAgICAgICAgIEkgd2FudGVkIHRvIHRha2UgYSBtb21lbnQgdG8gdGhhbmsgeW91IGZvciBjaG9vc2luZyBvdXIgcHJvZHVjdC4gV2UgaG9wZSB5b3UncmUgZW5qb3lpbmcgaXQgXG4gICAgICAgICAgYW5kIGZpbmRpbmcgaXQgdXNlZnVsLiBZb3VyIHN1cHBvcnQgbWVhbnMgYSBsb3QgdG8gdXMgYXMgYSBzbWFsbCBidXNpbmVzcywgYW5kIHdlJ3JlIHNvIFxuICAgICAgICAgIGdyYXRlZnVsIGZvciB5b3VyIHB1cmNoYXNlLlxuICAgICAgICA8L3A+XG4gICAgICAgICR7cHJvZHVjdHMubWFwKChwcm9kdWN0KSA9PiAoYFxuICAgICAgICAgIDxkaXYgc3R5bGU9XCJkaXNwbGF5OiBmbGV4OyBhbGlnbi1pdGVtczogY2VudGVyO1wiPlxuICAgICAgICAgICAgPGltZyBzcmM9XCIke3Byb2R1Y3QuaW1hZ2VzWzBdfVwiIHN0eWxlPVwibWF4LXdpZHRoOiAzMCU7aGVpZ2h0OiA3cmVtO29iamVjdC1maXQ6IGNvdmVyO1wiLz5cbiAgICAgICAgICAgIDxkaXYgc3R5bGU9XCJwYWRkaW5nLWxlZnQ6IDFyZW07XCI+XG4gICAgICAgICAgICAgIDxwPm5hbWU6IDxiPiR7cHJvZHVjdC5uYW1lfTwvYj48L3A+XG4gICAgICAgICAgICAgIDxwPnByaWNlOiA8Yj5VUyQke3Byb2R1Y3QucHJpY2V9PC9iPjwvcD5cbiAgICAgICAgICAgICAgPHA+cXVhbnRpdHk6IDxiPiR7cHJvZHVjdC5vcmRlcml0ZW0ucXVhbnRpdHl9PC9iPjwvcD5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICBgKSl9XG4gICAgICAgIDxwPlxuICAgICAgICAgIElmIHlvdSBoYXZlIGFueSBxdWVzdGlvbnMgb3IgZmVlZGJhY2ssIHBsZWFzZSBkb24ndCBoZXNpdGF0ZSB0byByZWFjaCBvdXQuIFdlJ3JlIGFsd2F5cyBcbiAgICAgICAgICBsb29raW5nIGZvciB3YXlzIHRvIGltcHJvdmUgb3VyIHByb2R1Y3RzIGFuZCBtYWtlIHRoZW0gZXZlbiBtb3JlIHZhbHVhYmxlIGZvciBvdXIgY3VzdG9tZXJzLlxuICAgICAgICA8L3A+XG4gICAgICAgIDxwPkJlc3QgcmVnYXJkcyw8L3A+XG4gICAgICA8L2Rpdj5cbiAgICA8L2Rpdj5cbiAgYCk7XG59O1xuXG5leHBvcnQgY29uc3QgcGF5bWVudEVtYWlsID0gKHVzZXIsIHByb2R1Y3RzLCB1cmwpID0+IHtcbiAgcmV0dXJuIChgXG4gICAgPGRpdiBzdHlsZT1cIndpZHRoOjEwMCU7IGZvbnQtZmFtaWx5OiBzYW5zLXNlcmlmLCBzeXN0ZW0tdWk7XCI+XG4gICAgICA8aDEgc3R5bGU9XCJ0ZXh0LWFsaWduOmNlbnRlcjtiYWNrZ3JvdW5kLWNvbG9yOiAjMjIyO2NvbG9yOiAjZmZmO3BhZGRpbmc6IDEuNXJlbTtcIj5cbiAgICAgICR7dXNlci51c2VybmFtZX0sIFRoYW5rcyBmb3IgeW91ciBpbnRlcmVzdCBpbiBvdXIgcHJvZHVjdHMhXG4gICAgICA8L2gxPlxuICAgICAgPGRpdiBzdHlsZT1cInBhZGRpbmc6IDAgMXJlbTtcIj5cbiAgICAgIDxwPkRlYXIgJHt1c2VyLnVzZXJuYW1lfSw8L3A+XG4gICAgICAgIDxwPlxuICAgICAgICAgIFRoYW5rIHlvdSBmb3IgcmVhY2hpbmcgb3V0IHRvIHVzIGFib3V0IG91ciBwcm9kdWN0cy4gV2UncmUgZXhjaXRlZCB0byBoZWFyIHRoYXQgeW91J3JlIFxuICAgICAgICAgIGludGVyZXN0ZWQgaW4gcHVyY2hhc2luZyBvbmUsIGFuZCB3ZSdyZSBoYXBweSB0byBwcm92aWRlIHlvdSB3aXRoIGFueSBpbmZvcm1hdGlvbiB5b3UgXG4gICAgICAgICAgbmVlZCB0byBoZWxwIHlvdSBtYWtlIGEgZGVjaXNpb24uXG4gICAgICAgIDwvcD5cbiAgICAgICAgPHA+XG4gICAgICAgICAgPGEgaHJlZj1cIiR7dXJsfVwiPlxuICAgICAgICAgICAgPGJ1dHRvbiBzdHlsZT1cImNvbG9yOiMyMjI7YmFja2dyb3VuZC1jb2xvcjojZmEwOyBwYWRkaW5nOiAxLjVyZW0gM3JlbTtib3JkZXI6IG5vbmU7Ym9yZGVyLXJhZGl1czogNXB4O1wiPlBheSBoZXJlPC9idXR0b24+XG4gICAgICAgICAgPC9hPlxuICAgICAgICA8L3A+XG4gICAgICAgICR7cHJvZHVjdHMubWFwKChwcm9kdWN0KSA9PiAoYFxuICAgICAgICAgIDxkaXYgc3R5bGU9XCJkaXNwbGF5OiBmbGV4OyBhbGlnbi1pdGVtczogY2VudGVyO1wiPlxuICAgICAgICAgICAgPGltZyBzcmM9XCIke3Byb2R1Y3QuaW1hZ2VzWzBdfVwiIHN0eWxlPVwibWF4LXdpZHRoOiAzMCU7aGVpZ2h0OiA3cmVtO29iamVjdC1maXQ6IGNvdmVyO1wiLz5cbiAgICAgICAgICAgIDxkaXYgc3R5bGU9XCJwYWRkaW5nLWxlZnQ6IDFyZW07XCI+XG4gICAgICAgICAgICAgIDxwPm5hbWU6IDxiPiR7cHJvZHVjdC5uYW1lfTwvYj48L3A+XG4gICAgICAgICAgICAgIDxwPnByaWNlOiA8Yj5VUyQke3Byb2R1Y3QucHJpY2V9PC9iPjwvcD5cbiAgICAgICAgICAgICAgPHA+cXVhbnRpdHk6IDxiPiR7cHJvZHVjdC5vcmRlcml0ZW0ucXVhbnRpdHl9PC9iPjwvcD5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICBgKSl9XG4gICAgICAgIDxwPlxuICAgICAgICAgIElmIHlvdSBoYXZlIGFueSBxdWVzdGlvbnMgYWJvdXQgb3VyIHByb2R1Y3Qgb3Igd291bGQgbGlrZSBtb3JlIGluZm9ybWF0aW9uLCBwbGVhc2UgZmVlbCBmcmVlIFxuICAgICAgICAgIHRvIGFzay4gV2UncmUgaGFwcHkgdG8gcHJvdmlkZSB5b3Ugd2l0aCBhZGRpdGlvbmFsIGRldGFpbHMgb3Igc3BlY2lmaWNhdGlvbnMgdG8gaGVscCB5b3UgbWFrZSBcbiAgICAgICAgICBhbiBpbmZvcm1lZCBkZWNpc2lvbi5cbiAgICAgICAgPC9wPlxuICAgICAgICA8cD5cbiAgICAgICAgICA8YSBocmVmPVwiJHt1cmx9XCI+XG4gICAgICAgICAgICA8YnV0dG9uIHN0eWxlPVwiY29sb3I6IzIyMjtiYWNrZ3JvdW5kLWNvbG9yOiNmYTA7IHBhZGRpbmc6IDEuNXJlbSAzcmVtO2JvcmRlcjogbm9uZTtib3JkZXItcmFkaXVzOiA1cHg7XCI+UGF5IGhlcmU8L2J1dHRvbj5cbiAgICAgICAgICA8L2E+XG4gICAgICAgIDwvcD5cbiAgICAgICAgPHA+XG4gICAgICAgICAgVGhhbmsgeW91IGFnYWluIGZvciBjb25zaWRlcmluZyBvdXIgcHJvZHVjdC4gV2UgbG9vayBmb3J3YXJkIHRvIGhlYXJpbmcgYmFjayBmcm9tIHlvdSBzb29uIVxuICAgICAgICA8L3A+XG4gICAgICAgIDxwPkJlc3QgcmVnYXJkcyw8L3A+XG4gICAgICA8L2Rpdj5cbiAgICA8L2Rpdj5cbiAgYCk7XG59O1xuZXhwb3J0IGNvbnN0IG5vdGlmaWNhdGlvblRlbXBsYXRlID0gKHVzZXJuYW1lLCBtZXNzYWdlLCB0eXBlLCB1cmwpPT57XG4gIHJldHVybiBgICA8ZGl2IHN0eWxlPVwid2lkdGg6MTAwJTtoaWdodDo1MCU7IGJhY2tncm91bmQtY29sb3I6I2YyZjJmMjsgZm9udC1mYW1pbHk6IHNhbnMtc2VyaWYsIHN5c3RlbS11aTtjb2xvcjpibGFjaztcIj5cbiAgPGRpdiBzdHlsZT1cIndpZHRoOjEwMCU7IGZvbnQtZmFtaWx5OiBzYW5zLXNlcmlmLCBzeXN0ZW0tdWk7XCI+XG4gICAgPGgxIHN0eWxlPVwidGV4dC1hbGlnbjpjZW50ZXI7YmFja2dyb3VuZC1jb2xvcjogI2YyZjJmMjtjb2xvcjogO3BhZGRpbmc6IDEuNXJlbTtcIj5cbiAgICAgICR7dHlwZX1cbiAgICA8L2gxPlxuICAgIDxkaXYgc3R5bGU9XCJwYWRkaW5nOiAwIDFyZW07XCI+XG4gICAgPGgzPkRlYXIgJHt1c2VybmFtZX0sPC9oMz5cbiAgICAgIDxwPlxuICAgICAgICBJIGhvcGUgdGhpcyBlbWFpbCBmaW5kcyB5b3Ugd2VsbCwgZW1haWwgaWYgZm9yIGZvbGxvdyB1cCBhYm91dCB5b3VyIHNob3dlZCBpbnRlcmVzdCBpbiBiZWZvcmUsIGFzIHdlIHByb21pc3NlZCB0byBub3RpZnkgeW91IHdoZW5ldmVyIHRoZXJlIGlzIGEgYSBtZXNzYWdlIHRoYXQgbWF5IHNlZW0gaW50ZXJlc3RpbmcgdG8geW91IGFjY29yZGluZyB0byB5b3VyIHJlY29yZGVkIGludGVyZXN0cyBcbiAgICAgICAgPHA+IEkgd2FudGVkIHRvIG5vdGlmeSB5b3UgdGhhdCA8Yj4gJHttZXNzYWdlfTwvYj48L3A+ICAgXG4gICAgICA8L3A+XG4gICAgICA8ZGl2IHN0eWxlPVwidGV4dC1hbGlnbjpjZW50ZXI7XCI+XG4gICAgICAgPGEgaHJlZj0ke3VybH0gc3R5bGU9XCJkaXNwbGF5OiBibG9jazsgdGV4dC1hbGlnbjogY2VudGVyOyBwYWRkaW5nOiAxMHB4IDIwcHg7IGJhY2tncm91bmQtY29sb3I6ICMwMDRkOTk7IGNvbG9yOiAjZmZmOyB0ZXh0LWRlY29yYXRpb246IG5vbmU7IGJvcmRlci1yYWRpdXM6IDVweDsgbWFyZ2luLXRvcDogMjBweDtcIj5DaGVjayB0aGlzIG91dCA8L2E+IDwvYnV0dG9uPixcbiAgICA8L2Rpdj5cbiAgICA8cD5CZXN0IHJlZ2FyZHMsIGZyb20gPGI+QnJvZ3JhbW1lcnMgPC9iPjwvcD5cbiAgICA8L2Rpdj5cbiAgPC9kaXY+PGRpdj5gO1xufTtcblxuZXhwb3J0IGNvbnN0IG5vdGlmaWNhdGlvblRlbXBsYXRlMiA9ICh1c2VybmFtZSwgbWVzc2FnZSwgdHlwZSk9PntcbiAgcmV0dXJuIGAgPGRpdiBzdHlsZT1cIndpZHRoOjEwMCU7aGlnaHQ6NTAlOyBiYWNrZ3JvdW5kLWNvbG9yOiNmMmYyZjI7IGZvbnQtZmFtaWx5OiBzYW5zLXNlcmlmLCBzeXN0ZW0tdWk7XCI+XG4gIDxkaXYgc3R5bGU9XCJ3aWR0aDoxMDAlOyBmb250LWZhbWlseTogc2Fucy1zZXJpZiwgc3lzdGVtLXVpO1wiPlxuICAgIDxoMSBzdHlsZT1cInRleHQtYWxpZ246Y2VudGVyO2JhY2tncm91bmQtY29sb3I6ICNmMmYyZjI7Y29sb3I6IDtwYWRkaW5nOiAxLjVyZW07XCI+XG4gICAgICAke3R5cGV9XG4gICAgPC9oMT5cbiAgICA8ZGl2IHN0eWxlPVwicGFkZGluZzogMCAxcmVtO1wiPlxuICAgIDxoMz5EZWFyICR7dXNlcm5hbWV9LDwvaDM+XG4gICAgICA8cD5cbiAgICAgICAgSSBob3BlIHRoaXMgZW1haWwgZmluZHMgeW91IHdlbGwsIGVtYWlsIGlmIGZvciBmb2xsb3cgdXAgYWJvdXQgeW91ciBzaG93ZWQgaW50ZXJlc3QgaW4gYmVmb3JlLCBhcyB3ZSBwcm9taXNzZWQgdG8gbm90aWZ5IHlvdSB3aGVuZXZlciB0aGVyZSBpcyBhIGEgbWVzc2FnZSB0aGF0IG1heSBzZWVtIGludGVyZXN0aW5nIHRvIHlvdSBhY2NvcmRpbmcgdG8geW91ciByZWNvcmRlZCBpbnRlcmVzdHMgXG4gICAgICAgIDxwPiBJIHdhbnRlZCB0byBub3RpZnkgeW91IHRoYXQgPGI+ICR7bWVzc2FnZX08L2I+PC9wPiAgIFxuICAgICAgPC9wPlxuICAgICAgPGRpdiBzdHlsZT1cInRleHQtYWxpZ246Y2VudGVyO1wiPlxuICAgICAgIDxhIGhyZWY9XCIvdXNlcnMvbG9naW5cIiBzdHlsZT1cImRpc3BsYXk6IGJsb2NrOyB0ZXh0LWFsaWduOiBjZW50ZXI7IHBhZGRpbmc6IDEwcHggMjBweDsgYmFja2dyb3VuZC1jb2xvcjogIzAwNGQ5OTsgY29sb3I6ICNmZmY7IHRleHQtZGVjb3JhdGlvbjogbm9uZTsgYm9yZGVyLXJhZGl1czogNXB4OyBtYXJnaW4tdG9wOiAyMHB4O1wiPkxvZ2luIHRvIGNoZWNrIDwvYT4gPC9idXR0b24+LFxuICAgIDwvZGl2PlxuICAgIDxwPkJlc3QgcmVnYXJkcywgZnJvbSA8Yj5Ccm9ncmFtbWVycyA8L2I+PC9wPlxuICAgIDwvZGl2PlxuICA8L2Rpdj48ZGl2PmA7XG59O1xuZXhwb3J0IGNvbnN0IG5ld3NsZXR0ZXJUZW1wbGF0ZSA9ICh1c2VybmFtZSwgbmV3c2xldHRlciwgc3Vic2NyaWJlcklkLCBoZWFkZXIsIGNvbnRlbnQpID0+IHtcbiAgcmV0dXJuIGBcbiAgPGRpdiBzdHlsZT1cIm1heC13aWR0aDogNjAwcHg7IG1hcmdpbjogMCBhdXRvOyBiYWNrZ3JvdW5kLWNvbG9yOiAjZmZmOyBwYWRkaW5nOiAyMHB4OyBib3gtc2hhZG93OiAwcHggMHB4IDIwcHggcmdiYSgwLDAsMCwwLjEpO1wiPlxuICAgIDxoMSBzdHlsZT1cImNvbG9yOiAjMDA0ZDk5OyBmb250LXNpemU6IDI4cHg7IG1hcmdpbi10b3A6IDIwcHg7XCI+JHtoZWFkZXJ9PC9oMT5cbiAgICA8ZGl2IHN0eWxlPVwiY29sb3I6ICMwMDA7IGZvbnQtc2l6ZTogMTZweDsgbGluZS1oZWlnaHQ6IDEuNTsgbWFyZ2luLXRvcDogMjBweDtcIj5IZWxsbyAke3VzZXJuYW1lfSw8YnI+PGJyPiR7Y29udGVudH08L2Rpdj5cbiAgICA8aDIgc3R5bGU9XCJjb2xvcjogIzAwNGQ5OTsgZm9udC1zaXplOiAyNHB4OyBtYXJnaW4tdG9wOiAyMHB4O1wiPiR7bmV3c2xldHRlci5uYW1lfTwvaDI+XG4gICAgPGltZyBzcmM9XCIke25ld3NsZXR0ZXIuaW1hZ2VzWzBdfVwiIGFsdD1cIiR7bmV3c2xldHRlci5uYW1lfVwiIHN0eWxlPVwibWF4LXdpZHRoOiAxMDAlOyBoZWlnaHQ6IGF1dG87IG1hcmdpbi10b3A6IDIwcHg7XCI+XG4gICAgPGRpdiBzdHlsZT1cImNvbG9yOiAjMDAwOyBmb250LXNpemU6IDE2cHg7IGxpbmUtaGVpZ2h0OiAxLjU7IG1hcmdpbi10b3A6IDIwcHg7XCI+JHtuZXdzbGV0dGVyLmRlc2NyaXB0aW9ufTwvZGl2PlxuICAgIDxkaXYgc3R5bGU9XCJjb2xvcjogIzAwMDsgZm9udC1zaXplOiAxNnB4OyBsaW5lLWhlaWdodDogMS41OyBtYXJnaW4tdG9wOiAyMHB4O1wiPlByaWNlOiAke25ld3NsZXR0ZXIucHJpY2V9PC9kaXY+XG4gICAgPGEgaHJlZj1cIiR7bmV3c2xldHRlci5pbWFnZXNbMF19XCIgdGFyZ2V0PVwiX2JsYW5rXCIgc3R5bGU9XCJkaXNwbGF5OiBpbmxpbmUtYmxvY2s7IHBhZGRpbmc6IDEwcHggMjBweDsgYmFja2dyb3VuZC1jb2xvcjogIzAwNGQ5OTsgY29sb3I6ICNmZmY7IHRleHQtZGVjb3JhdGlvbjogbm9uZTsgYm9yZGVyLXJhZGl1czogNXB4OyBtYXJnaW4tdG9wOiAyMHB4O1wiPlZpZXcgbmV3c2xldHRlcjwvYT5cbiAgICA8ZGl2IHN0eWxlPVwiY29sb3I6ICMwMDA7IGZvbnQtc2l6ZTogMTZweDsgbGluZS1oZWlnaHQ6IDEuNTsgbWFyZ2luLXRvcDogMjBweDtcIj5UaGFuayB5b3UgJHt1c2VybmFtZX0gZm9yIGJlaW5nIGEgbG95YWwgc3Vic2NyaWJlciB0byBvdXIgbmV3c2xldHRlciEgU3RheSB0dW5lZCBmb3IgbW9yZSB1cGRhdGVzLjwvZGl2PlxuICAgIDxkaXYgc3R5bGU9XCJjb2xvcjogIzAwMDsgZm9udC1zaXplOiAxNHB4OyBtYXJnaW4tdG9wOiAyMHB4O1wiPklmIHlvdSB3b3VsZCBsaWtlIHRvIHVuc3Vic2NyaWJlIGZyb20gb3VyIG5ld3NsZXR0ZXIsIHBsZWFzZSBjbGljayA8YSBocmVmPVwiJHtwcm9jZXNzLmVudi5VTlNVQlNDUklCRV9VUkx9LyR7c3Vic2NyaWJlcklkfVwiIHN0eWxlPVwiY29sb3I6ICMwMDRkOTk7IHRleHQtZGVjb3JhdGlvbjogdW5kZXJsaW5lO1wiPmhlcmU8L2E+LjwvZGl2PlxuIDwvZGl2PmA7XG59O1xuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBR0EsSUFBQUEsT0FBQSxHQUFBQyxzQkFBQSxDQUFBQyxPQUFBO0FBSEE7QUFDQTtBQUNBOztBQUdBO0FBQ08sTUFBTUMsbUJBQW1CLEdBQUlDLFNBQVMsSUFBSztFQUNoRCxPQUFRO0FBQ1Y7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCQyxPQUFPLENBQUNDLEdBQUcsQ0FBQ0MsVUFBVyxJQUFHSCxTQUFVO0FBQ3JEO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsQ0FBQztBQUFDSSxPQUFBLENBQUFMLG1CQUFBLEdBQUFBLG1CQUFBO0FBQ0ssTUFBTU0sNkJBQTZCLEdBQUdBLENBQUNMLFNBQVMsRUFBRU0sS0FBSyxLQUFLO0VBQ2pFLE9BQVE7QUFDVjtBQUNBO0FBQ0E7QUFDQSxjQUFjTCxPQUFPLENBQUNDLEdBQUcsQ0FBQ0ssY0FBZSxzQkFBcUJQLFNBQVUsTUFBS00sS0FBTTtBQUNuRjtBQUNBO0FBQ0EsS0FBSztBQUNMLENBQUM7QUFBQ0YsT0FBQSxDQUFBQyw2QkFBQSxHQUFBQSw2QkFBQTtBQUNLLE1BQU1HLDBCQUEwQixHQUFHQSxDQUFDQyxRQUFRLEVBQUVDLFlBQVksS0FBSztFQUNwRSxPQUFRO0FBQ1Y7QUFDQSxrRUFBa0VELFFBQVM7QUFDM0U7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","map":{"version":3,"names":["_moment","_interopRequireDefault","require","verifyEmailTemplate","userToken","process","env","VERIFY_URL","exports","verifyEmailSubscriberTemplate","token","SWAGGER_SERVER","thankYouSubscriberTemplate","username","subscriberId","UNSUBSCRIBE_URL","changePasswordTemplate","user","passwordExpirationTime","FRONTEND_URL","expiredPasswordTemplate","passwordResetEmailTemplate","resetToken","PASSWORD_RESET_URL","mfaEmailTemplate","mfa_code","disableEmailTemplate","disabledReason","expireProduct","product","name","images","price","quantity","exp_date","expireProductWarning","moment","fromNow","paymentComplete","products","map","orderitem","paymentEmail","url","notificationTemplate","message","type","notificationTemplate2","newsletterTemplate","newsletter","header","content","description"],"sourceRoot":"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/helpers/","sources":["mailTemplate.js"],"sourcesContent":["/* eslint-disable camelcase */\n/* eslint-disable arrow-body-style */\n/* eslint-disable arrow-spacing */\nimport moment from 'moment';\n\n// eslint-disable-next-line import/prefer-default-export\nexport const verifyEmailTemplate = (userToken) => {\n  return `\n    <div style=\"background-color: #f2f2f2; padding: 20px;\">\n      <h1 style=\"color: #004d99; text-align: center;\">Welcome to Brogrammers e-commerce!</h1>\n      <p style=\"color: #000; font-size: 16px;\">Please click below to activate your account:</p>\n      <a href=\"${process.env.VERIFY_URL}/${userToken}\" style=\"display: block; text-align: center; padding: 10px 20px; background-color: #004d99; color: #fff; text-decoration: none; border-radius: 5px; margin-top: 20px;\">Verify Your Email</a>\n      <p style=\"color: #000; font-size: 14px;\">Thank you for choosing Brogrammers e-commerce.</p>\n    </div>\n    `;\n};\nexport const verifyEmailSubscriberTemplate = (userToken, token) => {\n  return `\n  <div style=\"background-color: #f2f2f2; padding: 20px;\">\n    <h1 style=\"color: #004d99; text-align: center;\">Thank you for subscribing to Brogrammers e-commerce newsletter!</h1>\n    <p style=\"color: #000; font-size: 16px;\">Please click below to confirm your subscription:</p>\n   <a href=\"${process.env.SWAGGER_SERVER}/subscriber/verify/${userToken}?r=${token}\" style=\"display: block; text-align: center; padding: 10px 20px; background-color: #004d99; color: #fff; text-decoration: none; border-radius: 5px; margin-top: 20px;\">Confirm Subscription</a>\n   <p style=\"color: #000; font-size: 14px;\">You will now receive our latest updates and promotions.</p>\n  </div>\n    `;\n};\nexport const thankYouSubscriberTemplate = (username, subscriberId) => {\n  return `\n    <div style=\"background-color: #f2f2f2; padding: 20px;\">\n      <h1 style=\"color: #004d99; text-align: center;\">Thank you ${username} for subscribing to Brogrammers e-commerce newsletter!</h1>\n      <p style=\"color: #000; font-size: 16px;\">You will now receive our latest updates and promotions.</p>\n      <p style=\"color: #000; font-size: 14px;\">If you would like to unsubscribe from our newsletter, please click <a href=\"${process.env.UNSUBSCRIBE_URL}/${subscriberId}\" style=\"color: #004d99; text-decoration: underline;\">here</a>.</p>\n    </div>\n  `;\n};\nexport const changePasswordTemplate = (user, passwordExpirationTime) => {\n  return `\n    <div style=\"background-color: #f2f2f2; padding: 20px;\">\n      <h1 style=\"color: #004d99; text-align: center;\">Welcome to Brogrammers e-commerce dear!</h1>\n      <p style=\"color: #000; font-size: 16px;\">Dear ${user.username},\\n\\nYour password will expire in less than ${passwordExpirationTime} minutes.. Please use the following link to change your password:</p>\n      <a href=\"${process.env.FRONTEND_URL}/change-password\" style=\"display: block; text-align: center; padding: 10px 20px; background-color: #004d99; color: #fff; text-decoration: none; border-radius: 5px; margin-top: 20px;\">Change Password</a>\n</div>`;\n};\nexport const expiredPasswordTemplate = (user) => {\n  return `\n    <div style=\"background-color: #f2f2f2; padding: 20px;\">\n    <h1 style=\"color: #004d99; text-align: center;\">Brogrammers e-commerce Password Expired Notification</h1>\n      <p style=\"color: #000; font-size: 16px;\">Dear ${user.username},</p>\n      <p style=\"color: #000; font-size: 16px;\">Your password for Brogrammers e-commerce has expired. Please change your password immediately to ensure the security of your account.</p>\n      <a href=\"${process.env.FRONTEND_URL}/change-password\" style=\"display: block; text-align: center; padding: 10px 20px; background-color: #004d99; color: #fff; text-decoration: none; border-radius: 5px; margin-top: 20px;\">Change Password</a>\n    </div>`;\n};\n\nexport const passwordResetEmailTemplate = (resetToken) => {\n  return `\n    <div style=\"background-color: #f2f2f2; padding: 20px;\">\n      <h1 style=\"color: #004d99; text-align: center;\">Brogrammers e-commerce!</h1>\n      <p style=\"color: #000; font-size: 16px;\">Please click below to reset you password</p>\n      <a target=\"_blank\" href=\"${process.env.PASSWORD_RESET_URL}/${resetToken}\" style=\"display: block; text-align: center; font-size:18px; padding: 10px 20px; background-color: #004d99; color: #fff; text-decoration: none; border-radius: 5px; margin-top: 20px;\"> Click to reset your password</a>\n      <p style=\"color: #000; font-size: 14px;\">Thank you for choosing Brogrammers e-commerce.</p>\n    </div>\n    `;\n};\nexport const mfaEmailTemplate = (mfa_code) => {\n  return `\n  <div style=\"background-color: #f2f2f2; padding: 20px;\">\n      <h1 style=\"color: #004d99; text-align: center;\">Please use the following code to login.</h1>\n      <p style=\"color: #000; font-size: 16px;\">CODE: ${mfa_code}</p>\n      \n      <p style=\"color: #000; font-size: 14px;\">Thank you for choosing Brogrammers e-commerce.</p>\n    </div>\n  `;\n};\nexport const disableEmailTemplate = (username, disabledReason) => {\n  return `\n  <div style=\"background-color: #f2f2f2; padding: 20px;\">\n      <h1 style=\"color: #004d99; text-align: center;\">Dear ${username},<br/></h1>\n      <p style=\"color: #000; font-size: 16px;\">Your account has been disabled due to the following reason(s):<br/><br/>\n      ${disabledReason}<br/><br/>Please contact the support team if you have any questions.<br/><br/><br/>Best regards, <br/><br/>The support team,</p>\n\n      <p style=\"color: #000; font-size: 14px;\">Thank you for choosing Brogrammers e-commerce.</p>\n    </div>\n  `;\n};\n\nexport const expireProduct = (user, product) => {\n  return (`\n  <div style=\"width:100%; font-family: sans-serif, system-ui;\">\n    <h1 style=\"text-align:center;background-color: #222;color: #fff;padding: 1.5rem;\">\n      ⚠️ Important: ${product.name} has Expired\n    </h1>\n    <div style=\"padding: 0 1rem;\">\n    <p>Dear ${user.username},</p>\n      <p>\n        I hope this email finds you well. We are writing to notify you that one of the products you \n        have listed on our market is had expired. We take the quality and safety of our products \n        very seriously, and it is important to us that our customers receive products that are fresh and effective.\n      </p>\n      <p>\n        Please take necessary actions to ensure that the product is either removed from the market \n        or the expiry date is updated. We understand that mistakes can happen, and we appreciate \n        your cooperation in resolving this issue.\n      </p>\n      <div style=\"display: flex; align-items: center;\">\n        <img src=\"${product.images[0]}\" style=\"width: 30%\"/>\n        <div style=\"padding-left: 1rem;\">\n          <p>name: <b>${product.name}</b></p>\n          <p>price: <b>US$${product.price}</b></p>\n          <p>quantity: <b>${product.quantity}</b></p>\n          <p>expires: <b>${product.exp_date}</b></p>\n        </div>\n      </div>\n      <p>\n        If you need any assistance in this matter or have any questions, please do not hesitate to \n        contact us. We look forward to continuing to work with you and providing our customers with \n        high-quality products.\n      </p>\n      <p>Best regards,</p>\n    </div>\n  </div>\n  `);\n};\n\nexport const expireProductWarning = (user, product) => {\n  return (`\n    <div style=\"width:100%; font-family: sans-serif, system-ui;\">\n      <h1 style=\"text-align:center;background-color: #222;color: #fff;padding: 1.5rem;\">\n        ⚠️ Reminder: Expiry Date of ${product.name} is Approaching\n      </h1>\n      <div style=\"padding: 0 1rem;\">\n      <p>Dear ${user.username},</p>\n        <p>\n          I hope this email finds you well. We are writing to notify you that one of the products you \n          have listed on our market is about to expire. We take the quality and safety of our products \n          very seriously, and it is important to us that our customers receive products that are fresh and effective.\n        </p>\n        <p>\n          Please take necessary actions to ensure that the product is either removed from the market \n          or the expiry date is updated. We understand that mistakes can happen, and we appreciate \n          your cooperation in resolving this issue.\n        </p>\n        <div style=\"display: flex; align-items: center;\">\n          <img src=\"${product.images[0]}\" style=\"width: 30%\"/>\n          <div style=\"padding-left: 1rem;\">\n            <p>name: <b>${product.name}</b></p>\n            <p>price: <b>US$${product.price}</b></p>\n            <p>quantity: <b>${product.quantity}</b></p>\n            <p>expires: <b>${moment(product.exp_date).fromNow()}</b></p>\n          </div>\n        </div>\n        <p>\n          If you need any assistance in this matter or have any questions, please do not hesitate to \n          contact us. We look forward to continuing to work with you and providing our customers with \n          high-quality products.\n        </p>\n        <p>Best regards,</p>\n      </div>\n    </div>\n  `);\n};\n\nexport const paymentComplete = (user, products) => {\n  return (`\n    <div style=\"width:100%; font-family: sans-serif, system-ui;\">\n      <h1 style=\"text-align:center;background-color: #222;color: #fff;padding: 1.5rem;\">\n      ${user.username}, Thank you for purchasing our products!\n      </h1>\n      <div style=\"padding: 0 1rem;\">\n      <p>Dear ${user.username},</p>\n        <p>\n          I wanted to take a moment to thank you for choosing our product. We hope you're enjoying it \n          and finding it useful. Your support means a lot to us as a small business, and we're so \n          grateful for your purchase.\n        </p>\n        ${products.map((product) => (`\n          <div style=\"display: flex; align-items: center;\">\n            <img src=\"${product.images[0]}\" style=\"max-width: 30%;height: 7rem;object-fit: cover;\"/>\n            <div style=\"padding-left: 1rem;\">\n              <p>name: <b>${product.name}</b></p>\n              <p>price: <b>US$${product.price}</b></p>\n              <p>quantity: <b>${product.orderitem.quantity}</b></p>\n            </div>\n          </div>\n        `))}\n        <p>\n          If you have any questions or feedback, please don't hesitate to reach out. We're always \n          looking for ways to improve our products and make them even more valuable for our customers.\n        </p>\n        <p>Best regards,</p>\n      </div>\n    </div>\n  `);\n};\n\nexport const paymentEmail = (user, products, url) => {\n  return (`\n    <div style=\"width:100%; font-family: sans-serif, system-ui;\">\n      <h1 style=\"text-align:center;background-color: #222;color: #fff;padding: 1.5rem;\">\n      ${user.username}, Thanks for your interest in our products!\n      </h1>\n      <div style=\"padding: 0 1rem;\">\n      <p>Dear ${user.username},</p>\n        <p>\n          Thank you for reaching out to us about our products. We're excited to hear that you're \n          interested in purchasing one, and we're happy to provide you with any information you \n          need to help you make a decision.\n        </p>\n        <p>\n          <a href=\"${url}\">\n            <button style=\"color:#222;background-color:#fa0; padding: 1.5rem 3rem;border: none;border-radius: 5px;\">Pay here</button>\n          </a>\n        </p>\n        ${products.map((product) => (`\n          <div style=\"display: flex; align-items: center;\">\n            <img src=\"${product.images[0]}\" style=\"max-width: 30%;height: 7rem;object-fit: cover;\"/>\n            <div style=\"padding-left: 1rem;\">\n              <p>name: <b>${product.name}</b></p>\n              <p>price: <b>US$${product.price}</b></p>\n              <p>quantity: <b>${product.orderitem.quantity}</b></p>\n            </div>\n          </div>\n        `))}\n        <p>\n          If you have any questions about our product or would like more information, please feel free \n          to ask. We're happy to provide you with additional details or specifications to help you make \n          an informed decision.\n        </p>\n        <p>\n          <a href=\"${url}\">\n            <button style=\"color:#222;background-color:#fa0; padding: 1.5rem 3rem;border: none;border-radius: 5px;\">Pay here</button>\n          </a>\n        </p>\n        <p>\n          Thank you again for considering our product. We look forward to hearing back from you soon!\n        </p>\n        <p>Best regards,</p>\n      </div>\n    </div>\n  `);\n};\nexport const notificationTemplate = (username, message, type, url)=>{\n  return `  <div style=\"width:100%;hight:50%; background-color:#f2f2f2; font-family: sans-serif, system-ui;color:black;\">\n  <div style=\"width:100%; font-family: sans-serif, system-ui;\">\n    <h1 style=\"text-align:center;background-color: #f2f2f2;color: ;padding: 1.5rem;\">\n      ${type}\n    </h1>\n    <div style=\"padding: 0 1rem;\">\n    <h3>Dear ${username},</h3>\n      <p>\n        I hope this email finds you well, email if for follow up about your showed interest in before, as we promissed to notify you whenever there is a a message that may seem interesting to you according to your recorded interests \n        <p> I wanted to notify you that <b> ${message}</b></p>   \n      </p>\n      <div style=\"text-align:center;\">\n       <a href=${url} style=\"display: block; text-align: center; padding: 10px 20px; background-color: #004d99; color: #fff; text-decoration: none; border-radius: 5px; margin-top: 20px;\">Check this out </a> </button>,\n    </div>\n    <p>Best regards, from <b>Brogrammers </b></p>\n    </div>\n  </div><div>`;\n};\n\nexport const notificationTemplate2 = (username, message, type)=>{\n  return ` <div style=\"width:100%;hight:50%; background-color:#f2f2f2; font-family: sans-serif, system-ui;\">\n  <div style=\"width:100%; font-family: sans-serif, system-ui;\">\n    <h1 style=\"text-align:center;background-color: #f2f2f2;color: ;padding: 1.5rem;\">\n      ${type}\n    </h1>\n    <div style=\"padding: 0 1rem;\">\n    <h3>Dear ${username},</h3>\n      <p>\n        I hope this email finds you well, email if for follow up about your showed interest in before, as we promissed to notify you whenever there is a a message that may seem interesting to you according to your recorded interests \n        <p> I wanted to notify you that <b> ${message}</b></p>   \n      </p>\n      <div style=\"text-align:center;\">\n       <a href=\"/users/login\" style=\"display: block; text-align: center; padding: 10px 20px; background-color: #004d99; color: #fff; text-decoration: none; border-radius: 5px; margin-top: 20px;\">Login to check </a> </button>,\n    </div>\n    <p>Best regards, from <b>Brogrammers </b></p>\n    </div>\n  </div><div>`;\n};\nexport const newsletterTemplate = (username, newsletter, subscriberId, header, content) => {\n  return `\n  <div style=\"max-width: 600px; margin: 0 auto; background-color: #fff; padding: 20px; box-shadow: 0px 0px 20px rgba(0,0,0,0.1);\">\n    <h1 style=\"color: #004d99; font-size: 28px; margin-top: 20px;\">${header}</h1>\n    <div style=\"color: #000; font-size: 16px; line-height: 1.5; margin-top: 20px;\">Hello ${username},<br><br>${content}</div>\n    <h2 style=\"color: #004d99; font-size: 24px; margin-top: 20px;\">${newsletter.name}</h2>\n    <img src=\"${newsletter.images[0]}\" alt=\"${newsletter.name}\" style=\"max-width: 100%; height: auto; margin-top: 20px;\">\n    <div style=\"color: #000; font-size: 16px; line-height: 1.5; margin-top: 20px;\">${newsletter.description}</div>\n    <div style=\"color: #000; font-size: 16px; line-height: 1.5; margin-top: 20px;\">Price: ${newsletter.price}</div>\n    <a href=\"${newsletter.images[0]}\" target=\"_blank\" style=\"display: inline-block; padding: 10px 20px; background-color: #004d99; color: #fff; text-decoration: none; border-radius: 5px; margin-top: 20px;\">View newsletter</a>\n    <div style=\"color: #000; font-size: 16px; line-height: 1.5; margin-top: 20px;\">Thank you ${username} for being a loyal subscriber to our newsletter! Stay tuned for more updates.</div>\n    <div style=\"color: #000; font-size: 14px; margin-top: 20px;\">If you would like to unsubscribe from our newsletter, please click <a href=\"${process.env.UNSUBSCRIBE_URL}/${subscriberId}\" style=\"color: #004d99; text-decoration: underline;\">here</a>.</div>\n </div>`;\n};\n"],"mappings":"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"}},"mtime":1685643189455},"{\"assumptions\":{},\"sourceRoot\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/helpers/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"filename\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/helpers/mail.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/node_modules/babel-plugin-add-module-exports/lib/index.js\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-runtime\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"regenerator\":true},\"externalDependencies\":[]},{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.21.0:development":{"value":{"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.sendEmail = void 0;\nvar _user = _interopRequireDefault(require(\"../services/user.services\"));\n/* eslint-disable import/prefer-default-export */\n/* eslint-disable require-jsdoc */\n// eslint-disable-next-line import/no-extraneous-dependencies, import/no-named-as-default-member\n\nconst sendEmail = mailConfigurations => {\n  const msg = {\n    to: mailConfigurations.to,\n    from: mailConfigurations.from,\n    subject: mailConfigurations.subject,\n    html: mailConfigurations.html\n  };\n  if (process.env.NODE_ENV !== 'test') {\n    _user.default.sendMailWithNodemailer({\n      email: msg.to,\n      subject: msg.subject,\n      content: msg.html\n    });\n  }\n  return true;\n};\nexports.sendEmail = sendEmail;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfdXNlciIsIl9pbnRlcm9wUmVxdWlyZURlZmF1bHQiLCJyZXF1aXJlIiwic2VuZEVtYWlsIiwibWFpbENvbmZpZ3VyYXRpb25zIiwibXNnIiwidG8iLCJmcm9tIiwic3ViamVjdCIsImh0bWwiLCJwcm9jZXNzIiwiZW52IiwiTk9ERV9FTlYiLCJVc2VyIiwic2VuZE1haWxXaXRoTm9kZW1haWxlciIsImVtYWlsIiwiY29udGVudCIsImV4cG9ydHMiXSwic291cmNlUm9vdCI6Ii9Vc2Vycy9hbmRlbGFyd2FuZGEvRGVza3RvcC9lLWNvbW0tdGVhbS1icm9ncmFtbWVycy1ibi9zcmMvaGVscGVycy8iLCJzb3VyY2VzIjpbIm1haWwuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLyogZXNsaW50LWRpc2FibGUgaW1wb3J0L3ByZWZlci1kZWZhdWx0LWV4cG9ydCAqL1xuLyogZXNsaW50LWRpc2FibGUgcmVxdWlyZS1qc2RvYyAqL1xuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGltcG9ydC9uby1leHRyYW5lb3VzLWRlcGVuZGVuY2llcywgaW1wb3J0L25vLW5hbWVkLWFzLWRlZmF1bHQtbWVtYmVyXG5pbXBvcnQgVXNlciBmcm9tICcuLi9zZXJ2aWNlcy91c2VyLnNlcnZpY2VzJztcblxuZXhwb3J0IGNvbnN0IHNlbmRFbWFpbCA9IChtYWlsQ29uZmlndXJhdGlvbnMpID0+IHtcbiAgY29uc3QgbXNnID0ge1xuICAgIHRvOiBtYWlsQ29uZmlndXJhdGlvbnMudG8sXG4gICAgZnJvbTogbWFpbENvbmZpZ3VyYXRpb25zLmZyb20sXG4gICAgc3ViamVjdDogbWFpbENvbmZpZ3VyYXRpb25zLnN1YmplY3QsXG4gICAgaHRtbDogbWFpbENvbmZpZ3VyYXRpb25zLmh0bWwsXG4gIH07XG4gIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Rlc3QnKSB7XG4gICAgVXNlci5zZW5kTWFpbFdpdGhOb2RlbWFpbGVyKHtcbiAgICAgIGVtYWlsOiBtc2cudG8sXG4gICAgICBzdWJqZWN0OiBtc2cuc3ViamVjdCxcbiAgICAgIGNvbnRlbnQ6IG1zZy5odG1sLFxuICAgIH0pO1xuICB9XG4gIHJldHVybiB0cnVlO1xufTtcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUdBLElBQUFBLEtBQUEsR0FBQUMsc0JBQUEsQ0FBQUMsT0FBQTtBQUhBO0FBQ0E7QUFDQTs7QUFHTyxNQUFNQyxTQUFTLEdBQUlDLGtCQUFrQixJQUFLO0VBQy9DLE1BQU1DLEdBQUcsR0FBRztJQUNWQyxFQUFFLEVBQUVGLGtCQUFrQixDQUFDRSxFQUFFO0lBQ3pCQyxJQUFJLEVBQUVILGtCQUFrQixDQUFDRyxJQUFJO0lBQzdCQyxPQUFPLEVBQUVKLGtCQUFrQixDQUFDSSxPQUFPO0lBQ25DQyxJQUFJLEVBQUVMLGtCQUFrQixDQUFDSztFQUMzQixDQUFDO0VBQ0QsSUFBSUMsT0FBTyxDQUFDQyxHQUFHLENBQUNDLFFBQVEsS0FBSyxNQUFNLEVBQUU7SUFDbkNDLGFBQUksQ0FBQ0Msc0JBQXNCLENBQUM7TUFDMUJDLEtBQUssRUFBRVYsR0FBRyxDQUFDQyxFQUFFO01BQ2JFLE9BQU8sRUFBRUgsR0FBRyxDQUFDRyxPQUFPO01BQ3BCUSxPQUFPLEVBQUVYLEdBQUcsQ0FBQ0k7SUFDZixDQUFDLENBQUM7RUFDSjtFQUNBLE9BQU8sSUFBSTtBQUNiLENBQUM7QUFBQ1EsT0FBQSxDQUFBZCxTQUFBLEdBQUFBLFNBQUEifQ==","map":{"version":3,"names":["_user","_interopRequireDefault","require","sendEmail","mailConfigurations","msg","to","from","subject","html","process","env","NODE_ENV","User","sendMailWithNodemailer","email","content","exports"],"sourceRoot":"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/helpers/","sources":["mail.js"],"sourcesContent":["/* eslint-disable import/prefer-default-export */\n/* eslint-disable require-jsdoc */\n// eslint-disable-next-line import/no-extraneous-dependencies, import/no-named-as-default-member\nimport User from '../services/user.services';\n\nexport const sendEmail = (mailConfigurations) => {\n  const msg = {\n    to: mailConfigurations.to,\n    from: mailConfigurations.from,\n    subject: mailConfigurations.subject,\n    html: mailConfigurations.html,\n  };\n  if (process.env.NODE_ENV !== 'test') {\n    User.sendMailWithNodemailer({\n      email: msg.to,\n      subject: msg.subject,\n      content: msg.html,\n    });\n  }\n  return true;\n};\n"],"mappings":";;;;;;;AAGA,IAAAA,KAAA,GAAAC,sBAAA,CAAAC,OAAA;AAHA;AACA;AACA;;AAGO,MAAMC,SAAS,GAAIC,kBAAkB,IAAK;EAC/C,MAAMC,GAAG,GAAG;IACVC,EAAE,EAAEF,kBAAkB,CAACE,EAAE;IACzBC,IAAI,EAAEH,kBAAkB,CAACG,IAAI;IAC7BC,OAAO,EAAEJ,kBAAkB,CAACI,OAAO;IACnCC,IAAI,EAAEL,kBAAkB,CAACK;EAC3B,CAAC;EACD,IAAIC,OAAO,CAACC,GAAG,CAACC,QAAQ,KAAK,MAAM,EAAE;IACnCC,aAAI,CAACC,sBAAsB,CAAC;MAC1BC,KAAK,EAAEV,GAAG,CAACC,EAAE;MACbE,OAAO,EAAEH,GAAG,CAACG,OAAO;MACpBQ,OAAO,EAAEX,GAAG,CAACI;IACf,CAAC,CAAC;EACJ;EACA,OAAO,IAAI;AACb,CAAC;AAACQ,OAAA,CAAAd,SAAA,GAAAA,SAAA"}},"mtime":1682148437940},"{\"assumptions\":{},\"sourceRoot\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/loggers/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"filename\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/loggers/signup.logger.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/node_modules/babel-plugin-add-module-exports/lib/index.js\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-runtime\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"regenerator\":true},\"externalDependencies\":[]},{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.21.0:development":{"value":{"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.viewProfile = exports.verifyPasswordLog = exports.verifiedMfaLog = exports.updateImageLog = exports.updateAvatarLog = exports.resetPasswordLog = exports.redirectGoogleError = exports.redirectGoogle = exports.logVerifyEmail = exports.logSignupError = exports.logSignup = exports.logSetRole = exports.logLogoutError = exports.logLogout = exports.logLoginError = exports.logLogin = exports.logError = exports.logEmailSent = exports.enableMfaLog = exports.editProfiles = exports.disableMfaLog = exports.disableAccountLog = exports.createAdminLog = exports.changePasswordLog = exports.PasswordLog = void 0;\nvar _logger = _interopRequireDefault(require(\"../configs/logger\"));\nvar _models = require(\"../database/models\");\n/* eslint-disable import/named */\n\nconst logSignup = async req => {\n  const {\n    ...data\n  } = req.body;\n  _logger.default.info(`New user signed up: ${data.email}`);\n};\nexports.logSignup = logSignup;\nconst logSignupError = async (req, error) => {\n  const {\n    ...data\n  } = req.body;\n  const logData = {\n    level: 'error',\n    message: `Failed to sign up new user: ${error.message}`,\n    userId: data.id,\n    metadata: {\n      signupRequest: data\n    }\n  };\n  await _models.Log.create(logData);\n  _logger.default.error(`Failed to sign up new user: ${error.message}`);\n};\nexports.logSignupError = logSignupError;\nconst logLogin = async (email, user) => {\n  const logData = {\n    level: 'info',\n    message: `User ${email} logged in`,\n    userId: user.id,\n    metadata: {\n      loginRequest: email\n    }\n  };\n  await _models.Log.create(logData);\n  _logger.default.info(`User ${email} logged in`);\n};\nexports.logLogin = logLogin;\nconst logLoginError = async (req, error) => {\n  _logger.default.error(`user ${req.body.email} Failed to login :${error.message}`);\n};\nexports.logLoginError = logLoginError;\nconst logEmailSent = async email => {\n  _logger.default.info(`Verification email sent to: ${email}`);\n};\nexports.logEmailSent = logEmailSent;\nconst logVerifyEmail = async email => {\n  _logger.default.info(`User ${email} verified email`);\n};\nexports.logVerifyEmail = logVerifyEmail;\nconst logLogout = async req => {\n  const logData = {\n    level: 'info',\n    message: `User ${req.user.email} logged out`,\n    userId: req.user.id,\n    metadata: {\n      logoutRequest: {}\n    }\n  };\n  await _models.Log.create(logData);\n  _logger.default.info(`User ${req.user.email} logged out`);\n};\nexports.logLogout = logLogout;\nconst logLogoutError = async (req, error) => {\n  const logData = {\n    level: 'info',\n    message: error.message,\n    userId: req.user.id,\n    metadata: {\n      logoutRequest: {}\n    }\n  };\n  await _models.Log.create(logData);\n  _logger.default.info(`User ${req.user.email} failed to logged out:${error.message}`);\n};\nexports.logLogoutError = logLogoutError;\nconst logSetRole = async (req, role) => {\n  const logData = {\n    level: 'info',\n    message: `User ${req.user.email} set a new role ${role} to ${req.params.email}`,\n    userId: req.user.id,\n    metadata: {\n      Request: role\n    }\n  };\n  await _models.Log.create(logData);\n  _logger.default.info(`User ${req.user.email} set a new role ${role} to ${req.params.email}`);\n};\nexports.logSetRole = logSetRole;\nconst logError = async (req, error) => {\n  _logger.default.info(`User ${req.body.email} encountered an issue :${error.message}`);\n};\nexports.logError = logError;\nconst viewProfile = async (req, profile) => {\n  const logData = {\n    level: 'info',\n    message: `User ${req.user.email} viewed his  profile`,\n    userId: req.user.id,\n    metadata: {\n      profile\n    }\n  };\n  await _models.Log.create(logData);\n  _logger.default.info(`User ${req.user.email} viewed his  profile`);\n};\nexports.viewProfile = viewProfile;\nconst editProfiles = async (req, profile) => {\n  const logData = {\n    level: 'info',\n    message: `User ${req.user.email} edited his  profile`,\n    userId: req.user.id,\n    metadata: {\n      profile\n    }\n  };\n  await _models.Log.create(logData);\n  _logger.default.info(`User ${req.user.email} edited his  profile`);\n};\nexports.editProfiles = editProfiles;\nconst enableMfaLog = async req => {\n  const logData = {\n    level: 'info',\n    message: `User ${req.user.email} enabled mfa`,\n    userId: req.user.id,\n    metadata: {\n      data: req.body\n    }\n  };\n  await _models.Log.create(logData);\n  _logger.default.info(`User ${req.user.email} enabled mfa`);\n};\nexports.enableMfaLog = enableMfaLog;\nconst disableMfaLog = async req => {\n  const logData = {\n    level: 'info',\n    message: `User ${req.user.email} disabled mfa`,\n    userId: req.user.id,\n    metadata: {\n      data: req.body\n    }\n  };\n  await _models.Log.create(logData);\n  _logger.default.info(`User ${req.user.email} disabled mfa`);\n};\nexports.disableMfaLog = disableMfaLog;\nconst verifiedMfaLog = async (req, token) => {\n  const logData = {\n    level: 'info',\n    message: `User ${req.user.email} verified mfa code`,\n    userId: req.user.id,\n    metadata: {\n      data: token\n    }\n  };\n  await _models.Log.create(logData);\n  _logger.default.info(`User ${req.user.email} verified mfa code`);\n};\nexports.verifiedMfaLog = verifiedMfaLog;\nconst createAdminLog = async (req, user) => {\n  const logData = {\n    level: 'info',\n    message: `User ${req.user.email} created an admin ${user.email}`,\n    userId: req.user.id,\n    metadata: {\n      data: user\n    }\n  };\n  await _models.Log.create(logData);\n  _logger.default.info(`User ${req.user.email}created an admin ${user.email}`);\n};\nexports.createAdminLog = createAdminLog;\nconst PasswordLog = async (req, user) => {\n  const logData = {\n    level: 'info',\n    message: `User ${req.user.email} received password reset link`,\n    userId: req.user.id,\n    metadata: {\n      data: user\n    }\n  };\n  await _models.Log.create(logData);\n  _logger.default.info(`User ${req.user.email} received password reset link`);\n};\nexports.PasswordLog = PasswordLog;\nconst verifyPasswordLog = async (req, user) => {\n  const logData = {\n    level: 'info',\n    message: `User ${user.email} Password reset successful`,\n    userId: user.id,\n    metadata: {\n      data: user\n    }\n  };\n  await _models.Log.create(logData);\n  _logger.default.info(`User ${user.email} Password reset successful`);\n};\nexports.verifyPasswordLog = verifyPasswordLog;\nconst changePasswordLog = async (req, user) => {\n  const logData = {\n    level: 'info',\n    message: `User ${req.user.email} changed password successful`,\n    userId: req.user.id,\n    metadata: {\n      data: user\n    }\n  };\n  await _models.Log.create(logData);\n  _logger.default.info(`User ${req.user.email} changed password successful`);\n};\nexports.changePasswordLog = changePasswordLog;\nconst disableAccountLog = async (req, user) => {\n  const logData = {\n    level: 'info',\n    message: `User ${req.user.email} disabled account ${req.params.userId} successful`,\n    userId: req.user.id,\n    metadata: {\n      data: user\n    }\n  };\n  await _models.Log.create(logData);\n  _logger.default.info(`User ${req.user.email} disabled account ${req.params.userId} successful`);\n};\nexports.disableAccountLog = disableAccountLog;\nconst redirectGoogle = async email => {\n  _logger.default.info(`User ${email} redirected to Google`);\n};\nexports.redirectGoogle = redirectGoogle;\nconst redirectGoogleError = async error => {\n  _logger.default.error(`User not redirected to Google due to ${error} `);\n};\nexports.redirectGoogleError = redirectGoogleError;\nconst resetPasswordLog = async req => {\n  _logger.default.error(`User ${req.body.email} resetted password `);\n};\nexports.resetPasswordLog = resetPasswordLog;\nconst updateAvatarLog = async (req, user) => {\n  const logData = {\n    level: 'info',\n    message: `User ${req.user.email} updated his account avatar successful`,\n    userId: req.user.id,\n    metadata: {\n      data: user\n    }\n  };\n  await _models.Log.create(logData);\n};\nexports.updateAvatarLog = updateAvatarLog;\nconst updateImageLog = async (req, user) => {\n  const logData = {\n    level: 'info',\n    message: `User ${req.user.email} updated his account cover image successfully`,\n    userId: req.user.id,\n    metadata: {\n      data: user\n    }\n  };\n  await _models.Log.create(logData);\n};\nexports.updateImageLog = updateImageLog;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfbG9nZ2VyIiwiX2ludGVyb3BSZXF1aXJlRGVmYXVsdCIsInJlcXVpcmUiLCJfbW9kZWxzIiwibG9nU2lnbnVwIiwicmVxIiwiZGF0YSIsImJvZHkiLCJsb2dnZXIiLCJpbmZvIiwiZW1haWwiLCJleHBvcnRzIiwibG9nU2lnbnVwRXJyb3IiLCJlcnJvciIsImxvZ0RhdGEiLCJsZXZlbCIsIm1lc3NhZ2UiLCJ1c2VySWQiLCJpZCIsIm1ldGFkYXRhIiwic2lnbnVwUmVxdWVzdCIsIkxvZyIsImNyZWF0ZSIsImxvZ0xvZ2luIiwidXNlciIsImxvZ2luUmVxdWVzdCIsImxvZ0xvZ2luRXJyb3IiLCJsb2dFbWFpbFNlbnQiLCJsb2dWZXJpZnlFbWFpbCIsImxvZ0xvZ291dCIsImxvZ291dFJlcXVlc3QiLCJsb2dMb2dvdXRFcnJvciIsImxvZ1NldFJvbGUiLCJyb2xlIiwicGFyYW1zIiwiUmVxdWVzdCIsImxvZ0Vycm9yIiwidmlld1Byb2ZpbGUiLCJwcm9maWxlIiwiZWRpdFByb2ZpbGVzIiwiZW5hYmxlTWZhTG9nIiwiZGlzYWJsZU1mYUxvZyIsInZlcmlmaWVkTWZhTG9nIiwidG9rZW4iLCJjcmVhdGVBZG1pbkxvZyIsIlBhc3N3b3JkTG9nIiwidmVyaWZ5UGFzc3dvcmRMb2ciLCJjaGFuZ2VQYXNzd29yZExvZyIsImRpc2FibGVBY2NvdW50TG9nIiwicmVkaXJlY3RHb29nbGUiLCJyZWRpcmVjdEdvb2dsZUVycm9yIiwicmVzZXRQYXNzd29yZExvZyIsInVwZGF0ZUF2YXRhckxvZyIsInVwZGF0ZUltYWdlTG9nIl0sInNvdXJjZVJvb3QiOiIvVXNlcnMvYW5kZWxhcndhbmRhL0Rlc2t0b3AvZS1jb21tLXRlYW0tYnJvZ3JhbW1lcnMtYm4vc3JjL2xvZ2dlcnMvIiwic291cmNlcyI6WyJzaWdudXAubG9nZ2VyLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qIGVzbGludC1kaXNhYmxlIGltcG9ydC9uYW1lZCAqL1xuXG5pbXBvcnQgbG9nZ2VyIGZyb20gJy4uL2NvbmZpZ3MvbG9nZ2VyJztcbmltcG9ydCB7IExvZyB9IGZyb20gJy4uL2RhdGFiYXNlL21vZGVscyc7XG5cbmV4cG9ydCBjb25zdCBsb2dTaWdudXAgPSBhc3luYyAocmVxKSA9PiB7XG4gIGNvbnN0IHsgLi4uZGF0YSB9ID0gcmVxLmJvZHk7XG4gIGxvZ2dlci5pbmZvKGBOZXcgdXNlciBzaWduZWQgdXA6ICR7ZGF0YS5lbWFpbH1gKTtcbn07XG5cbmV4cG9ydCBjb25zdCBsb2dTaWdudXBFcnJvciA9IGFzeW5jIChyZXEsIGVycm9yKSA9PiB7XG4gIGNvbnN0IHsgLi4uZGF0YSB9ID0gcmVxLmJvZHk7XG4gIGNvbnN0IGxvZ0RhdGEgPSB7XG4gICAgbGV2ZWw6ICdlcnJvcicsXG4gICAgbWVzc2FnZTogYEZhaWxlZCB0byBzaWduIHVwIG5ldyB1c2VyOiAke2Vycm9yLm1lc3NhZ2V9YCxcbiAgICB1c2VySWQ6IGRhdGEuaWQsXG4gICAgbWV0YWRhdGE6IHsgc2lnbnVwUmVxdWVzdDogZGF0YSB9LFxuICB9O1xuICBhd2FpdCBMb2cuY3JlYXRlKGxvZ0RhdGEpO1xuICBsb2dnZXIuZXJyb3IoYEZhaWxlZCB0byBzaWduIHVwIG5ldyB1c2VyOiAke2Vycm9yLm1lc3NhZ2V9YCk7XG59O1xuXG5leHBvcnQgY29uc3QgbG9nTG9naW4gPSBhc3luYyAoZW1haWwsIHVzZXIpID0+IHtcbiAgY29uc3QgbG9nRGF0YSA9IHtcbiAgICBsZXZlbDogJ2luZm8nLFxuICAgIG1lc3NhZ2U6IGBVc2VyICR7ZW1haWx9IGxvZ2dlZCBpbmAsXG4gICAgdXNlcklkOiB1c2VyLmlkLFxuICAgIG1ldGFkYXRhOiB7IGxvZ2luUmVxdWVzdDogZW1haWwgfSxcbiAgfTtcbiAgYXdhaXQgTG9nLmNyZWF0ZShsb2dEYXRhKTtcbiAgbG9nZ2VyLmluZm8oYFVzZXIgJHtlbWFpbH0gbG9nZ2VkIGluYCk7XG59O1xuXG5leHBvcnQgY29uc3QgbG9nTG9naW5FcnJvciA9IGFzeW5jIChyZXEsIGVycm9yKSA9PiB7XG4gIGxvZ2dlci5lcnJvcihgdXNlciAke3JlcS5ib2R5LmVtYWlsfSBGYWlsZWQgdG8gbG9naW4gOiR7ZXJyb3IubWVzc2FnZX1gKTtcbn07XG5cbmV4cG9ydCBjb25zdCBsb2dFbWFpbFNlbnQgPSBhc3luYyAoZW1haWwpID0+IHtcbiAgbG9nZ2VyLmluZm8oYFZlcmlmaWNhdGlvbiBlbWFpbCBzZW50IHRvOiAke2VtYWlsfWApO1xufTtcbmV4cG9ydCBjb25zdCBsb2dWZXJpZnlFbWFpbCA9IGFzeW5jIChlbWFpbCkgPT4ge1xuICBsb2dnZXIuaW5mbyhgVXNlciAke2VtYWlsfSB2ZXJpZmllZCBlbWFpbGApO1xufTtcbmV4cG9ydCBjb25zdCBsb2dMb2dvdXQgPSBhc3luYyAocmVxKSA9PiB7XG4gIGNvbnN0IGxvZ0RhdGEgPSB7XG4gICAgbGV2ZWw6ICdpbmZvJyxcbiAgICBtZXNzYWdlOiBgVXNlciAke3JlcS51c2VyLmVtYWlsfSBsb2dnZWQgb3V0YCxcbiAgICB1c2VySWQ6IHJlcS51c2VyLmlkLFxuICAgIG1ldGFkYXRhOiB7IGxvZ291dFJlcXVlc3Q6IHt9IH0sXG4gIH07XG4gIGF3YWl0IExvZy5jcmVhdGUobG9nRGF0YSk7XG4gIGxvZ2dlci5pbmZvKGBVc2VyICR7cmVxLnVzZXIuZW1haWx9IGxvZ2dlZCBvdXRgKTtcbn07XG5leHBvcnQgY29uc3QgbG9nTG9nb3V0RXJyb3IgPSBhc3luYyAocmVxLCBlcnJvcikgPT4ge1xuICBjb25zdCBsb2dEYXRhID0ge1xuICAgIGxldmVsOiAnaW5mbycsXG4gICAgbWVzc2FnZTogZXJyb3IubWVzc2FnZSxcbiAgICB1c2VySWQ6IHJlcS51c2VyLmlkLFxuICAgIG1ldGFkYXRhOiB7IGxvZ291dFJlcXVlc3Q6IHt9IH0sXG4gIH07XG4gIGF3YWl0IExvZy5jcmVhdGUobG9nRGF0YSk7XG4gIGxvZ2dlci5pbmZvKGBVc2VyICR7cmVxLnVzZXIuZW1haWx9IGZhaWxlZCB0byBsb2dnZWQgb3V0OiR7ZXJyb3IubWVzc2FnZX1gKTtcbn07XG5leHBvcnQgY29uc3QgbG9nU2V0Um9sZSA9IGFzeW5jIChyZXEsIHJvbGUpID0+IHtcbiAgY29uc3QgbG9nRGF0YSA9IHtcbiAgICBsZXZlbDogJ2luZm8nLFxuICAgIG1lc3NhZ2U6IGBVc2VyICR7cmVxLnVzZXIuZW1haWx9IHNldCBhIG5ldyByb2xlICR7cm9sZX0gdG8gJHtyZXEucGFyYW1zLmVtYWlsfWAsXG4gICAgdXNlcklkOiByZXEudXNlci5pZCxcbiAgICBtZXRhZGF0YTogeyBSZXF1ZXN0OiByb2xlIH0sXG4gIH07XG4gIGF3YWl0IExvZy5jcmVhdGUobG9nRGF0YSk7XG4gIGxvZ2dlci5pbmZvKGBVc2VyICR7cmVxLnVzZXIuZW1haWx9IHNldCBhIG5ldyByb2xlICR7cm9sZX0gdG8gJHtyZXEucGFyYW1zLmVtYWlsfWApO1xufTtcbmV4cG9ydCBjb25zdCBsb2dFcnJvciA9IGFzeW5jIChyZXEsIGVycm9yKSA9PiB7XG4gIGxvZ2dlci5pbmZvKGBVc2VyICR7cmVxLmJvZHkuZW1haWx9IGVuY291bnRlcmVkIGFuIGlzc3VlIDoke2Vycm9yLm1lc3NhZ2V9YCk7XG59O1xuZXhwb3J0IGNvbnN0IHZpZXdQcm9maWxlID0gYXN5bmMgKHJlcSwgcHJvZmlsZSkgPT4ge1xuICBjb25zdCBsb2dEYXRhID0ge1xuICAgIGxldmVsOiAnaW5mbycsXG4gICAgbWVzc2FnZTogYFVzZXIgJHtyZXEudXNlci5lbWFpbH0gdmlld2VkIGhpcyAgcHJvZmlsZWAsXG4gICAgdXNlcklkOiByZXEudXNlci5pZCxcbiAgICBtZXRhZGF0YTogeyBwcm9maWxlIH0sXG4gIH07XG4gIGF3YWl0IExvZy5jcmVhdGUobG9nRGF0YSk7XG4gIGxvZ2dlci5pbmZvKGBVc2VyICR7cmVxLnVzZXIuZW1haWx9IHZpZXdlZCBoaXMgIHByb2ZpbGVgKTtcbn07XG5leHBvcnQgY29uc3QgZWRpdFByb2ZpbGVzID0gYXN5bmMgKHJlcSwgcHJvZmlsZSkgPT4ge1xuICBjb25zdCBsb2dEYXRhID0ge1xuICAgIGxldmVsOiAnaW5mbycsXG4gICAgbWVzc2FnZTogYFVzZXIgJHtyZXEudXNlci5lbWFpbH0gZWRpdGVkIGhpcyAgcHJvZmlsZWAsXG4gICAgdXNlcklkOiByZXEudXNlci5pZCxcbiAgICBtZXRhZGF0YTogeyBwcm9maWxlIH0sXG4gIH07XG4gIGF3YWl0IExvZy5jcmVhdGUobG9nRGF0YSk7XG4gIGxvZ2dlci5pbmZvKGBVc2VyICR7cmVxLnVzZXIuZW1haWx9IGVkaXRlZCBoaXMgIHByb2ZpbGVgKTtcbn07XG5leHBvcnQgY29uc3QgZW5hYmxlTWZhTG9nID0gYXN5bmMgKHJlcSkgPT4ge1xuICBjb25zdCBsb2dEYXRhID0ge1xuICAgIGxldmVsOiAnaW5mbycsXG4gICAgbWVzc2FnZTogYFVzZXIgJHtyZXEudXNlci5lbWFpbH0gZW5hYmxlZCBtZmFgLFxuICAgIHVzZXJJZDogcmVxLnVzZXIuaWQsXG4gICAgbWV0YWRhdGE6IHsgZGF0YTogcmVxLmJvZHkgfSxcbiAgfTtcbiAgYXdhaXQgTG9nLmNyZWF0ZShsb2dEYXRhKTtcbiAgbG9nZ2VyLmluZm8oYFVzZXIgJHtyZXEudXNlci5lbWFpbH0gZW5hYmxlZCBtZmFgKTtcbn07XG5leHBvcnQgY29uc3QgZGlzYWJsZU1mYUxvZyA9IGFzeW5jIChyZXEpID0+IHtcbiAgY29uc3QgbG9nRGF0YSA9IHtcbiAgICBsZXZlbDogJ2luZm8nLFxuICAgIG1lc3NhZ2U6IGBVc2VyICR7cmVxLnVzZXIuZW1haWx9IGRpc2FibGVkIG1mYWAsXG4gICAgdXNlcklkOiByZXEudXNlci5pZCxcbiAgICBtZXRhZGF0YTogeyBkYXRhOiByZXEuYm9keSB9LFxuICB9O1xuICBhd2FpdCBMb2cuY3JlYXRlKGxvZ0RhdGEpO1xuICBsb2dnZXIuaW5mbyhgVXNlciAke3JlcS51c2VyLmVtYWlsfSBkaXNhYmxlZCBtZmFgKTtcbn07XG5leHBvcnQgY29uc3QgdmVyaWZpZWRNZmFMb2cgPSBhc3luYyAocmVxLCB0b2tlbikgPT4ge1xuICBjb25zdCBsb2dEYXRhID0ge1xuICAgIGxldmVsOiAnaW5mbycsXG4gICAgbWVzc2FnZTogYFVzZXIgJHtyZXEudXNlci5lbWFpbH0gdmVyaWZpZWQgbWZhIGNvZGVgLFxuICAgIHVzZXJJZDogcmVxLnVzZXIuaWQsXG4gICAgbWV0YWRhdGE6IHsgZGF0YTogdG9rZW4gfSxcbiAgfTtcbiAgYXdhaXQgTG9nLmNyZWF0ZShsb2dEYXRhKTtcbiAgbG9nZ2VyLmluZm8oYFVzZXIgJHtyZXEudXNlci5lbWFpbH0gdmVyaWZpZWQgbWZhIGNvZGVgKTtcbn07XG5leHBvcnQgY29uc3QgY3JlYXRlQWRtaW5Mb2cgPSBhc3luYyAocmVxLCB1c2VyKSA9PiB7XG4gIGNvbnN0IGxvZ0RhdGEgPSB7XG4gICAgbGV2ZWw6ICdpbmZvJyxcbiAgICBtZXNzYWdlOiBgVXNlciAke3JlcS51c2VyLmVtYWlsfSBjcmVhdGVkIGFuIGFkbWluICR7dXNlci5lbWFpbH1gLFxuICAgIHVzZXJJZDogcmVxLnVzZXIuaWQsXG4gICAgbWV0YWRhdGE6IHsgZGF0YTogdXNlciB9LFxuICB9O1xuICBhd2FpdCBMb2cuY3JlYXRlKGxvZ0RhdGEpO1xuICBsb2dnZXIuaW5mbyhgVXNlciAke3JlcS51c2VyLmVtYWlsfWNyZWF0ZWQgYW4gYWRtaW4gJHt1c2VyLmVtYWlsfWApO1xufTtcbmV4cG9ydCBjb25zdCBQYXNzd29yZExvZyA9IGFzeW5jIChyZXEsIHVzZXIpID0+IHtcbiAgY29uc3QgbG9nRGF0YSA9IHtcbiAgICBsZXZlbDogJ2luZm8nLFxuICAgIG1lc3NhZ2U6IGBVc2VyICR7cmVxLnVzZXIuZW1haWx9IHJlY2VpdmVkIHBhc3N3b3JkIHJlc2V0IGxpbmtgLFxuICAgIHVzZXJJZDogcmVxLnVzZXIuaWQsXG4gICAgbWV0YWRhdGE6IHsgZGF0YTogdXNlciB9LFxuICB9O1xuICBhd2FpdCBMb2cuY3JlYXRlKGxvZ0RhdGEpO1xuICBsb2dnZXIuaW5mbyhgVXNlciAke3JlcS51c2VyLmVtYWlsfSByZWNlaXZlZCBwYXNzd29yZCByZXNldCBsaW5rYCk7XG59O1xuZXhwb3J0IGNvbnN0IHZlcmlmeVBhc3N3b3JkTG9nID0gYXN5bmMgKHJlcSwgdXNlcikgPT4ge1xuICBjb25zdCBsb2dEYXRhID0ge1xuICAgIGxldmVsOiAnaW5mbycsXG4gICAgbWVzc2FnZTogYFVzZXIgJHt1c2VyLmVtYWlsfSBQYXNzd29yZCByZXNldCBzdWNjZXNzZnVsYCxcbiAgICB1c2VySWQ6IHVzZXIuaWQsXG4gICAgbWV0YWRhdGE6IHsgZGF0YTogdXNlciB9LFxuICB9O1xuICBhd2FpdCBMb2cuY3JlYXRlKGxvZ0RhdGEpO1xuICBsb2dnZXIuaW5mbyhgVXNlciAke3VzZXIuZW1haWx9IFBhc3N3b3JkIHJlc2V0IHN1Y2Nlc3NmdWxgKTtcbn07XG5cbmV4cG9ydCBjb25zdCBjaGFuZ2VQYXNzd29yZExvZyA9IGFzeW5jIChyZXEsIHVzZXIpID0+IHtcbiAgY29uc3QgbG9nRGF0YSA9IHtcbiAgICBsZXZlbDogJ2luZm8nLFxuICAgIG1lc3NhZ2U6IGBVc2VyICR7cmVxLnVzZXIuZW1haWx9IGNoYW5nZWQgcGFzc3dvcmQgc3VjY2Vzc2Z1bGAsXG4gICAgdXNlcklkOiByZXEudXNlci5pZCxcbiAgICBtZXRhZGF0YTogeyBkYXRhOiB1c2VyIH0sXG4gIH07XG4gIGF3YWl0IExvZy5jcmVhdGUobG9nRGF0YSk7XG4gIGxvZ2dlci5pbmZvKGBVc2VyICR7cmVxLnVzZXIuZW1haWx9IGNoYW5nZWQgcGFzc3dvcmQgc3VjY2Vzc2Z1bGApO1xufTtcbmV4cG9ydCBjb25zdCBkaXNhYmxlQWNjb3VudExvZyA9IGFzeW5jIChyZXEsIHVzZXIpID0+IHtcbiAgY29uc3QgbG9nRGF0YSA9IHtcbiAgICBsZXZlbDogJ2luZm8nLFxuICAgIG1lc3NhZ2U6IGBVc2VyICR7cmVxLnVzZXIuZW1haWx9IGRpc2FibGVkIGFjY291bnQgJHtyZXEucGFyYW1zLnVzZXJJZH0gc3VjY2Vzc2Z1bGAsXG4gICAgdXNlcklkOiByZXEudXNlci5pZCxcbiAgICBtZXRhZGF0YTogeyBkYXRhOiB1c2VyIH0sXG4gIH07XG4gIGF3YWl0IExvZy5jcmVhdGUobG9nRGF0YSk7XG4gIGxvZ2dlci5pbmZvKGBVc2VyICR7cmVxLnVzZXIuZW1haWx9IGRpc2FibGVkIGFjY291bnQgJHtyZXEucGFyYW1zLnVzZXJJZH0gc3VjY2Vzc2Z1bGApO1xufTtcbmV4cG9ydCBjb25zdCByZWRpcmVjdEdvb2dsZSA9IGFzeW5jIChlbWFpbCkgPT4ge1xuICBsb2dnZXIuaW5mbyhgVXNlciAke2VtYWlsfSByZWRpcmVjdGVkIHRvIEdvb2dsZWApO1xufTtcbmV4cG9ydCBjb25zdCByZWRpcmVjdEdvb2dsZUVycm9yID0gYXN5bmMgKGVycm9yKSA9PiB7XG4gIGxvZ2dlci5lcnJvcihgVXNlciBub3QgcmVkaXJlY3RlZCB0byBHb29nbGUgZHVlIHRvICR7ZXJyb3J9IGApO1xufTtcbmV4cG9ydCBjb25zdCByZXNldFBhc3N3b3JkTG9nID0gYXN5bmMgKHJlcSkgPT4ge1xuICBsb2dnZXIuZXJyb3IoYFVzZXIgJHtyZXEuYm9keS5lbWFpbH0gcmVzZXR0ZWQgcGFzc3dvcmQgYCk7XG59O1xuZXhwb3J0IGNvbnN0IHVwZGF0ZUF2YXRhckxvZyA9IGFzeW5jIChyZXEsIHVzZXIpID0+IHtcbiAgY29uc3QgbG9nRGF0YSA9IHtcbiAgICBsZXZlbDogJ2luZm8nLFxuICAgIG1lc3NhZ2U6IGBVc2VyICR7cmVxLnVzZXIuZW1haWx9IHVwZGF0ZWQgaGlzIGFjY291bnQgYXZhdGFyIHN1Y2Nlc3NmdWxgLFxuICAgIHVzZXJJZDogcmVxLnVzZXIuaWQsXG4gICAgbWV0YWRhdGE6IHsgZGF0YTogdXNlciB9LFxuICB9O1xuICBhd2FpdCBMb2cuY3JlYXRlKGxvZ0RhdGEpO1xufTtcbmV4cG9ydCBjb25zdCB1cGRhdGVJbWFnZUxvZyA9IGFzeW5jIChyZXEsIHVzZXIpID0+IHtcbiAgY29uc3QgbG9nRGF0YSA9IHtcbiAgICBsZXZlbDogJ2luZm8nLFxuICAgIG1lc3NhZ2U6IGBVc2VyICR7cmVxLnVzZXIuZW1haWx9IHVwZGF0ZWQgaGlzIGFjY291bnQgY292ZXIgaW1hZ2Ugc3VjY2Vzc2Z1bGx5YCxcbiAgICB1c2VySWQ6IHJlcS51c2VyLmlkLFxuICAgIG1ldGFkYXRhOiB7IGRhdGE6IHVzZXIgfSxcbiAgfTtcbiAgYXdhaXQgTG9nLmNyZWF0ZShsb2dEYXRhKTtcbn07XG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFFQSxJQUFBQSxPQUFBLEdBQUFDLHNCQUFBLENBQUFDLE9BQUE7QUFDQSxJQUFBQyxPQUFBLEdBQUFELE9BQUE7QUFIQTs7QUFLTyxNQUFNRSxTQUFTLEdBQUcsTUFBT0MsR0FBRyxJQUFLO0VBQ3RDLE1BQU07SUFBRSxHQUFHQztFQUFLLENBQUMsR0FBR0QsR0FBRyxDQUFDRSxJQUFJO0VBQzVCQyxlQUFNLENBQUNDLElBQUksQ0FBRSx1QkFBc0JILElBQUksQ0FBQ0ksS0FBTSxFQUFDLENBQUM7QUFDbEQsQ0FBQztBQUFDQyxPQUFBLENBQUFQLFNBQUEsR0FBQUEsU0FBQTtBQUVLLE1BQU1RLGNBQWMsR0FBRyxNQUFBQSxDQUFPUCxHQUFHLEVBQUVRLEtBQUssS0FBSztFQUNsRCxNQUFNO0lBQUUsR0FBR1A7RUFBSyxDQUFDLEdBQUdELEdBQUcsQ0FBQ0UsSUFBSTtFQUM1QixNQUFNTyxPQUFPLEdBQUc7SUFDZEMsS0FBSyxFQUFFLE9BQU87SUFDZEMsT0FBTyxFQUFHLCtCQUE4QkgsS0FBSyxDQUFDRyxPQUFRLEVBQUM7SUFDdkRDLE1BQU0sRUFBRVgsSUFBSSxDQUFDWSxFQUFFO0lBQ2ZDLFFBQVEsRUFBRTtNQUFFQyxhQUFhLEVBQUVkO0lBQUs7RUFDbEMsQ0FBQztFQUNELE1BQU1lLFdBQUcsQ0FBQ0MsTUFBTSxDQUFDUixPQUFPLENBQUM7RUFDekJOLGVBQU0sQ0FBQ0ssS0FBSyxDQUFFLCtCQUE4QkEsS0FBSyxDQUFDRyxPQUFRLEVBQUMsQ0FBQztBQUM5RCxDQUFDO0FBQUNMLE9BQUEsQ0FBQUMsY0FBQSxHQUFBQSxjQUFBO0FBRUssTUFBTVcsUUFBUSxHQUFHLE1BQUFBLENBQU9iLEtBQUssRUFBRWMsSUFBSSxLQUFLO0VBQzdDLE1BQU1WLE9BQU8sR0FBRztJQUNk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","map":{"version":3,"names":["_logger","_interopRequireDefault","require","_models","logSignup","req","data","body","logger","info","email","exports","logSignupError","error","logData","level","message","userId","id","metadata","signupRequest","Log","create","logLogin","user","loginRequest","logLoginError","logEmailSent","logVerifyEmail","logLogout","logoutRequest","logLogoutError","logSetRole","role","params","Request","logError","viewProfile","profile","editProfiles","enableMfaLog","disableMfaLog","verifiedMfaLog","token","createAdminLog","PasswordLog","verifyPasswordLog","changePasswordLog","disableAccountLog","redirectGoogle","redirectGoogleError","resetPasswordLog","updateAvatarLog","updateImageLog"],"sourceRoot":"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/loggers/","sources":["signup.logger.js"],"sourcesContent":["/* eslint-disable import/named */\n\nimport logger from '../configs/logger';\nimport { Log } from '../database/models';\n\nexport const logSignup = async (req) => {\n  const { ...data } = req.body;\n  logger.info(`New user signed up: ${data.email}`);\n};\n\nexport const logSignupError = async (req, error) => {\n  const { ...data } = req.body;\n  const logData = {\n    level: 'error',\n    message: `Failed to sign up new user: ${error.message}`,\n    userId: data.id,\n    metadata: { signupRequest: data },\n  };\n  await Log.create(logData);\n  logger.error(`Failed to sign up new user: ${error.message}`);\n};\n\nexport const logLogin = async (email, user) => {\n  const logData = {\n    level: 'info',\n    message: `User ${email} logged in`,\n    userId: user.id,\n    metadata: { loginRequest: email },\n  };\n  await Log.create(logData);\n  logger.info(`User ${email} logged in`);\n};\n\nexport const logLoginError = async (req, error) => {\n  logger.error(`user ${req.body.email} Failed to login :${error.message}`);\n};\n\nexport const logEmailSent = async (email) => {\n  logger.info(`Verification email sent to: ${email}`);\n};\nexport const logVerifyEmail = async (email) => {\n  logger.info(`User ${email} verified email`);\n};\nexport const logLogout = async (req) => {\n  const logData = {\n    level: 'info',\n    message: `User ${req.user.email} logged out`,\n    userId: req.user.id,\n    metadata: { logoutRequest: {} },\n  };\n  await Log.create(logData);\n  logger.info(`User ${req.user.email} logged out`);\n};\nexport const logLogoutError = async (req, error) => {\n  const logData = {\n    level: 'info',\n    message: error.message,\n    userId: req.user.id,\n    metadata: { logoutRequest: {} },\n  };\n  await Log.create(logData);\n  logger.info(`User ${req.user.email} failed to logged out:${error.message}`);\n};\nexport const logSetRole = async (req, role) => {\n  const logData = {\n    level: 'info',\n    message: `User ${req.user.email} set a new role ${role} to ${req.params.email}`,\n    userId: req.user.id,\n    metadata: { Request: role },\n  };\n  await Log.create(logData);\n  logger.info(`User ${req.user.email} set a new role ${role} to ${req.params.email}`);\n};\nexport const logError = async (req, error) => {\n  logger.info(`User ${req.body.email} encountered an issue :${error.message}`);\n};\nexport const viewProfile = async (req, profile) => {\n  const logData = {\n    level: 'info',\n    message: `User ${req.user.email} viewed his  profile`,\n    userId: req.user.id,\n    metadata: { profile },\n  };\n  await Log.create(logData);\n  logger.info(`User ${req.user.email} viewed his  profile`);\n};\nexport const editProfiles = async (req, profile) => {\n  const logData = {\n    level: 'info',\n    message: `User ${req.user.email} edited his  profile`,\n    userId: req.user.id,\n    metadata: { profile },\n  };\n  await Log.create(logData);\n  logger.info(`User ${req.user.email} edited his  profile`);\n};\nexport const enableMfaLog = async (req) => {\n  const logData = {\n    level: 'info',\n    message: `User ${req.user.email} enabled mfa`,\n    userId: req.user.id,\n    metadata: { data: req.body },\n  };\n  await Log.create(logData);\n  logger.info(`User ${req.user.email} enabled mfa`);\n};\nexport const disableMfaLog = async (req) => {\n  const logData = {\n    level: 'info',\n    message: `User ${req.user.email} disabled mfa`,\n    userId: req.user.id,\n    metadata: { data: req.body },\n  };\n  await Log.create(logData);\n  logger.info(`User ${req.user.email} disabled mfa`);\n};\nexport const verifiedMfaLog = async (req, token) => {\n  const logData = {\n    level: 'info',\n    message: `User ${req.user.email} verified mfa code`,\n    userId: req.user.id,\n    metadata: { data: token },\n  };\n  await Log.create(logData);\n  logger.info(`User ${req.user.email} verified mfa code`);\n};\nexport const createAdminLog = async (req, user) => {\n  const logData = {\n    level: 'info',\n    message: `User ${req.user.email} created an admin ${user.email}`,\n    userId: req.user.id,\n    metadata: { data: user },\n  };\n  await Log.create(logData);\n  logger.info(`User ${req.user.email}created an admin ${user.email}`);\n};\nexport const PasswordLog = async (req, user) => {\n  const logData = {\n    level: 'info',\n    message: `User ${req.user.email} received password reset link`,\n    userId: req.user.id,\n    metadata: { data: user },\n  };\n  await Log.create(logData);\n  logger.info(`User ${req.user.email} received password reset link`);\n};\nexport const verifyPasswordLog = async (req, user) => {\n  const logData = {\n    level: 'info',\n    message: `User ${user.email} Password reset successful`,\n    userId: user.id,\n    metadata: { data: user },\n  };\n  await Log.create(logData);\n  logger.info(`User ${user.email} Password reset successful`);\n};\n\nexport const changePasswordLog = async (req, user) => {\n  const logData = {\n    level: 'info',\n    message: `User ${req.user.email} changed password successful`,\n    userId: req.user.id,\n    metadata: { data: user },\n  };\n  await Log.create(logData);\n  logger.info(`User ${req.user.email} changed password successful`);\n};\nexport const disableAccountLog = async (req, user) => {\n  const logData = {\n    level: 'info',\n    message: `User ${req.user.email} disabled account ${req.params.userId} successful`,\n    userId: req.user.id,\n    metadata: { data: user },\n  };\n  await Log.create(logData);\n  logger.info(`User ${req.user.email} disabled account ${req.params.userId} successful`);\n};\nexport const redirectGoogle = async (email) => {\n  logger.info(`User ${email} redirected to Google`);\n};\nexport const redirectGoogleError = async (error) => {\n  logger.error(`User not redirected to Google due to ${error} `);\n};\nexport const resetPasswordLog = async (req) => {\n  logger.error(`User ${req.body.email} resetted password `);\n};\nexport const updateAvatarLog = async (req, user) => {\n  const logData = {\n    level: 'info',\n    message: `User ${req.user.email} updated his account avatar successful`,\n    userId: req.user.id,\n    metadata: { data: user },\n  };\n  await Log.create(logData);\n};\nexport const updateImageLog = async (req, user) => {\n  const logData = {\n    level: 'info',\n    message: `User ${req.user.email} updated his account cover image successfully`,\n    userId: req.user.id,\n    metadata: { data: user },\n  };\n  await Log.create(logData);\n};\n"],"mappings":"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"}},"mtime":1685643189458},"{\"assumptions\":{},\"sourceRoot\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/configs/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"filename\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/configs/logger.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/node_modules/babel-plugin-add-module-exports/lib/index.js\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-runtime\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"regenerator\":true},\"externalDependencies\":[]},{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.21.0:development":{"value":{"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _winston = require(\"winston\");\nvar _colors = _interopRequireDefault(require(\"colors\"));\n/* eslint-disable import/no-extraneous-dependencies */\n/* eslint-disable no-unused-vars */\n\nconst logger = (0, _winston.createLogger)({\n  level: 'info',\n  format: _winston.format.combine(_winston.format.timestamp(), _winston.format.colorize(), _winston.format.printf(info => `[${info.timestamp}] ${info.level}: ${info.message}`)),\n  transports: [new _winston.transports.Console({\n    format: _winston.format.combine(_winston.format.colorize(), _winston.format.printf(info => `[${info.timestamp}] ${info.level}: ${info.message}`))\n  })]\n});\nvar _default = logger;\nexports.default = _default;\nmodule.exports = exports.default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfd2luc3RvbiIsInJlcXVpcmUiLCJfY29sb3JzIiwiX2ludGVyb3BSZXF1aXJlRGVmYXVsdCIsImxvZ2dlciIsImNyZWF0ZUxvZ2dlciIsImxldmVsIiwiZm9ybWF0IiwiY29tYmluZSIsInRpbWVzdGFtcCIsImNvbG9yaXplIiwicHJpbnRmIiwiaW5mbyIsIm1lc3NhZ2UiLCJ0cmFuc3BvcnRzIiwiQ29uc29sZSIsIl9kZWZhdWx0IiwiZXhwb3J0cyIsImRlZmF1bHQiLCJtb2R1bGUiXSwic291cmNlUm9vdCI6Ii9Vc2Vycy9hbmRlbGFyd2FuZGEvRGVza3RvcC9lLWNvbW0tdGVhbS1icm9ncmFtbWVycy1ibi9zcmMvY29uZmlncy8iLCJzb3VyY2VzIjpbImxvZ2dlci5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKiBlc2xpbnQtZGlzYWJsZSBpbXBvcnQvbm8tZXh0cmFuZW91cy1kZXBlbmRlbmNpZXMgKi9cbi8qIGVzbGludC1kaXNhYmxlIG5vLXVudXNlZC12YXJzICovXG5pbXBvcnQgeyBjcmVhdGVMb2dnZXIsIGZvcm1hdCwgdHJhbnNwb3J0cyB9IGZyb20gJ3dpbnN0b24nO1xuaW1wb3J0IGNvbG9ycyBmcm9tICdjb2xvcnMnO1xuXG5jb25zdCBsb2dnZXIgPSBjcmVhdGVMb2dnZXIoe1xuICBsZXZlbDogJ2luZm8nLFxuICBmb3JtYXQ6IGZvcm1hdC5jb21iaW5lKFxuICAgIGZvcm1hdC50aW1lc3RhbXAoKSxcbiAgICBmb3JtYXQuY29sb3JpemUoKSxcbiAgICBmb3JtYXQucHJpbnRmKChpbmZvKSA9PiBgWyR7aW5mby50aW1lc3RhbXB9XSAke2luZm8ubGV2ZWx9OiAke2luZm8ubWVzc2FnZX1gKVxuICApLFxuICB0cmFuc3BvcnRzOiBbXG4gICAgbmV3IHRyYW5zcG9ydHMuQ29uc29sZSh7XG4gICAgICBmb3JtYXQ6IGZvcm1hdC5jb21iaW5lKFxuICAgICAgICBmb3JtYXQuY29sb3JpemUoKSxcbiAgICAgICAgZm9ybWF0LnByaW50ZigoaW5mbykgPT4gYFske2luZm8udGltZXN0YW1wfV0gJHtpbmZvLmxldmVsfTogJHtpbmZvLm1lc3NhZ2V9YClcbiAgICAgIClcbiAgICB9KVxuICBdXG59KTtcblxuZXhwb3J0IGRlZmF1bHQgbG9nZ2VyO1xuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBRUEsSUFBQUEsUUFBQSxHQUFBQyxPQUFBO0FBQ0EsSUFBQUMsT0FBQSxHQUFBQyxzQkFBQSxDQUFBRixPQUFBO0FBSEE7QUFDQTs7QUFJQSxNQUFNRyxNQUFNLEdBQUcsSUFBQUMscUJBQVksRUFBQztFQUMxQkMsS0FBSyxFQUFFLE1BQU07RUFDYkMsTUFBTSxFQUFFQSxlQUFNLENBQUNDLE9BQU8sQ0FDcEJELGVBQU0sQ0FBQ0UsU0FBUyxFQUFFLEVBQ2xCRixlQUFNLENBQUNHLFFBQVEsRUFBRSxFQUNqQkgsZUFBTSxDQUFDSSxNQUFNLENBQUVDLElBQUksSUFBTSxJQUFHQSxJQUFJLENBQUNILFNBQVUsS0FBSUcsSUFBSSxDQUFDTixLQUFNLEtBQUlNLElBQUksQ0FBQ0MsT0FBUSxFQUFDLENBQUMsQ0FDOUU7RUFDREMsVUFBVSxFQUFFLENBQ1YsSUFBSUEsbUJBQVUsQ0FBQ0MsT0FBTyxDQUFDO0lBQ3JCUixNQUFNLEVBQUVBLGVBQU0sQ0FBQ0MsT0FBTyxDQUNwQkQsZUFBTSxDQUFDRyxRQUFRLEVBQUUsRUFDakJILGVBQU0sQ0FBQ0ksTUFBTSxDQUFFQyxJQUFJLElBQU0sSUFBR0EsSUFBSSxDQUFDSCxTQUFVLEtBQUlHLElBQUksQ0FBQ04sS0FBTSxLQUFJTSxJQUFJLENBQUNDLE9BQVEsRUFBQyxDQUFDO0VBRWpGLENBQUMsQ0FBQztBQUVOLENBQUMsQ0FBQztBQUFDLElBQUFHLFFBQUEsR0FFWVosTUFBTTtBQUFBYSxPQUFBLENBQUFDLE9BQUEsR0FBQUYsUUFBQTtBQUFBRyxNQUFBLENBQUFGLE9BQUEsR0FBQUEsT0FBQSxDQUFBQyxPQUFBIn0=","map":{"version":3,"names":["_winston","require","_colors","_interopRequireDefault","logger","createLogger","level","format","combine","timestamp","colorize","printf","info","message","transports","Console","_default","exports","default","module"],"sourceRoot":"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/configs/","sources":["logger.js"],"sourcesContent":["/* eslint-disable import/no-extraneous-dependencies */\n/* eslint-disable no-unused-vars */\nimport { createLogger, format, transports } from 'winston';\nimport colors from 'colors';\n\nconst logger = createLogger({\n  level: 'info',\n  format: format.combine(\n    format.timestamp(),\n    format.colorize(),\n    format.printf((info) => `[${info.timestamp}] ${info.level}: ${info.message}`)\n  ),\n  transports: [\n    new transports.Console({\n      format: format.combine(\n        format.colorize(),\n        format.printf((info) => `[${info.timestamp}] ${info.level}: ${info.message}`)\n      )\n    })\n  ]\n});\n\nexport default logger;\n"],"mappings":";;;;;;;AAEA,IAAAA,QAAA,GAAAC,OAAA;AACA,IAAAC,OAAA,GAAAC,sBAAA,CAAAF,OAAA;AAHA;AACA;;AAIA,MAAMG,MAAM,GAAG,IAAAC,qBAAY,EAAC;EAC1BC,KAAK,EAAE,MAAM;EACbC,MAAM,EAAEA,eAAM,CAACC,OAAO,CACpBD,eAAM,CAACE,SAAS,EAAE,EAClBF,eAAM,CAACG,QAAQ,EAAE,EACjBH,eAAM,CAACI,MAAM,CAAEC,IAAI,IAAM,IAAGA,IAAI,CAACH,SAAU,KAAIG,IAAI,CAACN,KAAM,KAAIM,IAAI,CAACC,OAAQ,EAAC,CAAC,CAC9E;EACDC,UAAU,EAAE,CACV,IAAIA,mBAAU,CAACC,OAAO,CAAC;IACrBR,MAAM,EAAEA,eAAM,CAACC,OAAO,CACpBD,eAAM,CAACG,QAAQ,EAAE,EACjBH,eAAM,CAACI,MAAM,CAAEC,IAAI,IAAM,IAAGA,IAAI,CAACH,SAAU,KAAIG,IAAI,CAACN,KAAM,KAAIM,IAAI,CAACC,OAAQ,EAAC,CAAC;EAEjF,CAAC,CAAC;AAEN,CAAC,CAAC;AAAC,IAAAG,QAAA,GAEYZ,MAAM;AAAAa,OAAA,CAAAC,OAAA,GAAAF,QAAA;AAAAG,MAAA,CAAAF,OAAA,GAAAA,OAAA,CAAAC,OAAA"}},"mtime":1685643189434},"{\"assumptions\":{},\"sourceRoot\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/middlewares/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"filename\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/middlewares/checkUserExist.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/node_modules/babel-plugin-add-module-exports/lib/index.js\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-runtime\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"regenerator\":true},\"externalDependencies\":[]},{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.21.0:development":{"value":{"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = exports.checkUserByEmail = exports.checkSubscriberExist = void 0;\nvar _jsonwebtoken = _interopRequireDefault(require(\"jsonwebtoken\"));\nvar _users = require(\"../controllers/users.controllers\");\nvar _models = require(\"../database/models\");\n/* eslint-disable import/named */\n\nconst checkUserExist = async (req, res, next) => {\n  try {\n    const user = await _models.users.findOne({\n      where: {\n        email: req.body.email || 'undefined'\n      }\n    });\n    if (user && user !== null) return res.status(400).json({\n      message: 'email exists'\n    });\n    next();\n  } catch (e) {\n    return res.status(500).json(e);\n  }\n};\nconst checkSubscriberExist = async (req, res, next) => {\n  try {\n    const user = await _models.Subscriber.findOne({\n      where: {\n        email: req.body.email || 'undefined'\n      }\n    });\n    if (user && user !== null) return res.status(400).json({\n      message: 'You already subscribed with that email'\n    });\n    next();\n  } catch (e) {\n    return res.status(500).json(e);\n  }\n};\nexports.checkSubscriberExist = checkSubscriberExist;\nconst checkUserByEmail = async (req, res, next) => {\n  const user = await _models.users.findOne({\n    where: {\n      email: req.user.emails[0].value\n    }\n  });\n  if (user && typeof req.user.photos !== 'undefined') {\n    const {\n      id,\n      email\n    } = user;\n    const userToken = _jsonwebtoken.default.sign({\n      email,\n      id\n    }, _users.JWT_SECRET);\n    return res.redirect(`${process.env.FRONTEND_URL}/login?key=${userToken}&email=${email}`);\n  }\n  next();\n};\nexports.checkUserByEmail = checkUserByEmail;\nvar _default = checkUserExist;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfanNvbndlYnRva2VuIiwiX2ludGVyb3BSZXF1aXJlRGVmYXVsdCIsInJlcXVpcmUiLCJfdXNlcnMiLCJfbW9kZWxzIiwiY2hlY2tVc2VyRXhpc3QiLCJyZXEiLCJyZXMiLCJuZXh0IiwidXNlciIsInVzZXJzIiwiZmluZE9uZSIsIndoZXJlIiwiZW1haWwiLCJib2R5Iiwic3RhdHVzIiwianNvbiIsIm1lc3NhZ2UiLCJlIiwiY2hlY2tTdWJzY3JpYmVyRXhpc3QiLCJTdWJzY3JpYmVyIiwiZXhwb3J0cyIsImNoZWNrVXNlckJ5RW1haWwiLCJlbWFpbHMiLCJ2YWx1ZSIsInBob3RvcyIsImlkIiwidXNlclRva2VuIiwiand0Iiwic2lnbiIsIkpXVF9TRUNSRVQiLCJyZWRpcmVjdCIsInByb2Nlc3MiLCJlbnYiLCJGUk9OVEVORF9VUkwiLCJfZGVmYXVsdCIsImRlZmF1bHQiXSwic291cmNlUm9vdCI6Ii9Vc2Vycy9hbmRlbGFyd2FuZGEvRGVza3RvcC9lLWNvbW0tdGVhbS1icm9ncmFtbWVycy1ibi9zcmMvbWlkZGxld2FyZXMvIiwic291cmNlcyI6WyJjaGVja1VzZXJFeGlzdC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKiBlc2xpbnQtZGlzYWJsZSBpbXBvcnQvbmFtZWQgKi9cbmltcG9ydCBqd3QgZnJvbSAnanNvbndlYnRva2VuJztcbmltcG9ydCB7IEpXVF9TRUNSRVQgfSBmcm9tICcuLi9jb250cm9sbGVycy91c2Vycy5jb250cm9sbGVycyc7XG5pbXBvcnQgeyB1c2VycywgU3Vic2NyaWJlciB9IGZyb20gJy4uL2RhdGFiYXNlL21vZGVscyc7XG5cbmNvbnN0IGNoZWNrVXNlckV4aXN0ID0gYXN5bmMgKHJlcSwgcmVzLCBuZXh0KSA9PiB7XG4gIHRyeSB7XG4gICAgY29uc3QgdXNlciA9IGF3YWl0IHVzZXJzLmZpbmRPbmUoeyB3aGVyZTogeyBlbWFpbDogcmVxLmJvZHkuZW1haWwgfHwgJ3VuZGVmaW5lZCcgfSB9KTtcbiAgICBpZiAodXNlciAmJiB1c2VyICE9PSBudWxsKSByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBtZXNzYWdlOiAnZW1haWwgZXhpc3RzJyB9KTtcblxuICAgIG5leHQoKTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIHJldHVybiByZXMuc3RhdHVzKDUwMCkuanNvbihlKTtcbiAgfVxufTtcblxuZXhwb3J0IGNvbnN0IGNoZWNrU3Vic2NyaWJlckV4aXN0ID0gYXN5bmMgKHJlcSwgcmVzLCBuZXh0KSA9PiB7XG4gIHRyeSB7XG4gICAgY29uc3QgdXNlciA9IGF3YWl0IFN1YnNjcmliZXIuZmluZE9uZSh7IHdoZXJlOiB7IGVtYWlsOiByZXEuYm9keS5lbWFpbCB8fCAndW5kZWZpbmVkJyB9IH0pO1xuICAgIGlmICh1c2VyICYmIHVzZXIgIT09IG51bGwpIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IG1lc3NhZ2U6ICdZb3UgYWxyZWFkeSBzdWJzY3JpYmVkIHdpdGggdGhhdCBlbWFpbCcgfSk7XG4gICAgbmV4dCgpO1xuICB9IGNhdGNoIChlKSB7XG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoNTAwKS5qc29uKGUpO1xuICB9XG59O1xuXG5leHBvcnQgY29uc3QgY2hlY2tVc2VyQnlFbWFpbCA9IGFzeW5jIChyZXEsIHJlcywgbmV4dCkgPT4ge1xuICBjb25zdCB1c2VyID0gYXdhaXQgdXNlcnMuZmluZE9uZSh7XG4gICAgd2hlcmU6IHsgZW1haWw6IHJlcS51c2VyLmVtYWlsc1swXS52YWx1ZSB9LFxuICB9KTtcbiAgaWYgKHVzZXIgJiYgdHlwZW9mIHJlcS51c2VyLnBob3RvcyAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICBjb25zdCB7IGlkLCBlbWFpbCB9ID0gdXNlcjtcbiAgICBjb25zdCB1c2VyVG9rZW4gPSBqd3Quc2lnbih7IGVtYWlsLCBpZCB9LCBKV1RfU0VDUkVUKTtcbiAgICByZXR1cm4gcmVzLnJlZGlyZWN0KFxuICAgICAgYCR7cHJvY2Vzcy5lbnYuRlJPTlRFTkRfVVJMfS9sb2dpbj9rZXk9JHt1c2VyVG9rZW59JmVtYWlsPSR7ZW1haWx9YFxuICAgICk7XG4gIH1cbiAgbmV4dCgpO1xufTtcblxuZXhwb3J0IGRlZmF1bHQgY2hlY2tVc2VyRXhpc3Q7XG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFDQSxJQUFBQSxhQUFBLEdBQUFDLHNCQUFBLENBQUFDLE9BQUE7QUFDQSxJQUFBQyxNQUFBLEdBQUFELE9BQUE7QUFDQSxJQUFBRSxPQUFBLEdBQUFGLE9BQUE7QUFIQTs7QUFLQSxNQUFNRyxjQUFjLEdBQUcsTUFBQUEsQ0FBT0MsR0FBRyxFQUFFQyxHQUFHLEVBQUVDLElBQUksS0FBSztFQUMvQyxJQUFJO0lBQ0YsTUFBTUMsSUFBSSxHQUFHLE1BQU1DLGFBQUssQ0FBQ0MsT0FBTyxDQUFDO01BQUVDLEtBQUssRUFBRTtRQUFFQyxLQUFLLEVBQUVQLEdBQUcsQ0FBQ1EsSUFBSSxDQUFDRCxLQUFLLElBQUk7TUFBWTtJQUFFLENBQUMsQ0FBQztJQUNyRixJQUFJSixJQUFJLElBQUlBLElBQUksS0FBSyxJQUFJLEVBQUUsT0FBT0YsR0FBRyxDQUFDUSxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUNDLElBQUksQ0FBQztNQUFFQyxPQUFPLEVBQUU7SUFBZSxDQUFDLENBQUM7SUFFbkZULElBQUksRUFBRTtFQUNSLENBQUMsQ0FBQyxPQUFPVSxDQUFDLEVBQUU7SUFDVixPQUFPWCxHQUFHLENBQUNRLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQ0MsSUFBSSxDQUFDRSxDQUFDLENBQUM7RUFDaEM7QUFDRixDQUFDO0FBRU0sTUFBTUMsb0JBQW9CLEdBQUcsTUFBQUEsQ0FBT2IsR0FBRyxFQUFFQyxHQUFHLEVBQUVDLElBQUksS0FBSztFQUM1RCxJQUFJO0lBQ0YsTUFBTUMsSUFBSSxHQUFHLE1BQU1XLGtCQUFVLENBQUNULE9BQU8sQ0FBQztNQUFFQyxLQUFLLEVBQUU7UUFBRUMsS0FBSyxFQUFFUCxHQUFHLENBQUNRLElBQUksQ0FBQ0QsS0FBSyxJQUFJO01BQVk7SUFBRSxDQUFDLENBQUM7SUFDMUYsSUFBSUosSUFBSSxJQUFJQSxJQUFJLEtBQUssSUFBSSxFQUFFLE9BQU9GLEdBQUcsQ0FBQ1EsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDQyxJQUFJLENBQUM7TUFBRUMsT0FBTyxFQUFFO0lBQXlDLENBQUMsQ0FBQztJQUM3R1QsSUFBSSxFQUFFO0VBQ1IsQ0FBQyxDQUFDLE9BQU9VLENBQUMsRUFBRTtJQUNWLE9BQU9YLEdBQUcsQ0FBQ1EsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDQyxJQUFJLENBQUNFLENBQUMsQ0FBQztFQUNoQztBQUNGLENBQUM7QUFBQ0csT0FBQSxDQUFBRixvQkFBQSxHQUFBQSxvQkFBQTtBQUVLLE1BQU1HLGdCQUFnQixHQUFHLE1BQUFBLENBQU9oQixHQUFHLEVBQUVDLEdBQUcsRUFBRUMsSUFBSSxLQUFLO0VBQ3hELE1BQU1DLElBQUksR0FBRyxNQUFNQyxhQUFLLENBQUNDLE9BQU8sQ0FBQztJQUMvQkMsS0FBSyxFQUFFO01BQUVDLEtBQUssRUFBRVAsR0FBRyxDQUFDRyxJQUFJLENBQUNjLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQ0M7SUFBTTtFQUMzQyxDQUFDLENBQUM7RUFDRixJQUFJZixJQUFJLElBQUksT0FBT0gsR0FBRyxDQUFDRyxJQUFJLENBQUNnQixNQUFNLEtBQUssV0FBVyxFQUFFO0lBQ2xELE1BQU07TUFBRUMsRUFBRTtNQUFFYjtJQUFNLENBQUMsR0FBR0osSUFBSTtJQUMxQixNQUFNa0IsU0FBUyxHQUFHQyxxQkFBRyxDQUFDQyxJQUFJLENBQUM7TUFBRWhCLEtBQUs7TUFBRWE7SUFBRyxDQUFDLEVBQUVJLGlCQUFVLENBQUM7SUFDckQsT0FBT3ZCLEdBQUcsQ0FBQ3dCLFFBQVEsQ0FDaEIsR0FBRUMsT0FBTyxDQUFDQyxHQUFHLENBQUNDLFlBQWEsY0FBYVAsU0FBVSxVQUFTZCxLQUFNLEVBQUMsQ0FDcEU7RUFDSDtFQUNBTCxJQUFJLEVBQUU7QUFDUixDQUFDO0FBQUNhLE9BQUEsQ0FBQUMsZ0JBQUEsR0FBQUEsZ0JBQUE7QUFBQSxJQUFBYSxRQUFBLEdBRWE5QixjQUFjO0FBQUFnQixPQUFBLENBQUFlLE9BQUEsR0FBQUQsUUFBQSJ9","map":{"version":3,"names":["_jsonwebtoken","_interopRequireDefault","require","_users","_models","checkUserExist","req","res","next","user","users","findOne","where","email","body","status","json","message","e","checkSubscriberExist","Subscriber","exports","checkUserByEmail","emails","value","photos","id","userToken","jwt","sign","JWT_SECRET","redirect","process","env","FRONTEND_URL","_default","default"],"sourceRoot":"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/middlewares/","sources":["checkUserExist.js"],"sourcesContent":["/* eslint-disable import/named */\nimport jwt from 'jsonwebtoken';\nimport { JWT_SECRET } from '../controllers/users.controllers';\nimport { users, Subscriber } from '../database/models';\n\nconst checkUserExist = async (req, res, next) => {\n  try {\n    const user = await users.findOne({ where: { email: req.body.email || 'undefined' } });\n    if (user && user !== null) return res.status(400).json({ message: 'email exists' });\n\n    next();\n  } catch (e) {\n    return res.status(500).json(e);\n  }\n};\n\nexport const checkSubscriberExist = async (req, res, next) => {\n  try {\n    const user = await Subscriber.findOne({ where: { email: req.body.email || 'undefined' } });\n    if (user && user !== null) return res.status(400).json({ message: 'You already subscribed with that email' });\n    next();\n  } catch (e) {\n    return res.status(500).json(e);\n  }\n};\n\nexport const checkUserByEmail = async (req, res, next) => {\n  const user = await users.findOne({\n    where: { email: req.user.emails[0].value },\n  });\n  if (user && typeof req.user.photos !== 'undefined') {\n    const { id, email } = user;\n    const userToken = jwt.sign({ email, id }, JWT_SECRET);\n    return res.redirect(\n      `${process.env.FRONTEND_URL}/login?key=${userToken}&email=${email}`\n    );\n  }\n  next();\n};\n\nexport default checkUserExist;\n"],"mappings":";;;;;;;AACA,IAAAA,aAAA,GAAAC,sBAAA,CAAAC,OAAA;AACA,IAAAC,MAAA,GAAAD,OAAA;AACA,IAAAE,OAAA,GAAAF,OAAA;AAHA;;AAKA,MAAMG,cAAc,GAAG,MAAAA,CAAOC,GAAG,EAAEC,GAAG,EAAEC,IAAI,KAAK;EAC/C,IAAI;IACF,MAAMC,IAAI,GAAG,MAAMC,aAAK,CAACC,OAAO,CAAC;MAAEC,KAAK,EAAE;QAAEC,KAAK,EAAEP,GAAG,CAACQ,IAAI,CAACD,KAAK,IAAI;MAAY;IAAE,CAAC,CAAC;IACrF,IAAIJ,IAAI,IAAIA,IAAI,KAAK,IAAI,EAAE,OAAOF,GAAG,CAACQ,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;MAAEC,OAAO,EAAE;IAAe,CAAC,CAAC;IAEnFT,IAAI,EAAE;EACR,CAAC,CAAC,OAAOU,CAAC,EAAE;IACV,OAAOX,GAAG,CAACQ,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAACE,CAAC,CAAC;EAChC;AACF,CAAC;AAEM,MAAMC,oBAAoB,GAAG,MAAAA,CAAOb,GAAG,EAAEC,GAAG,EAAEC,IAAI,KAAK;EAC5D,IAAI;IACF,MAAMC,IAAI,GAAG,MAAMW,kBAAU,CAACT,OAAO,CAAC;MAAEC,KAAK,EAAE;QAAEC,KAAK,EAAEP,GAAG,CAACQ,IAAI,CAACD,KAAK,IAAI;MAAY;IAAE,CAAC,CAAC;IAC1F,IAAIJ,IAAI,IAAIA,IAAI,KAAK,IAAI,EAAE,OAAOF,GAAG,CAACQ,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;MAAEC,OAAO,EAAE;IAAyC,CAAC,CAAC;IAC7GT,IAAI,EAAE;EACR,CAAC,CAAC,OAAOU,CAAC,EAAE;IACV,OAAOX,GAAG,CAACQ,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAACE,CAAC,CAAC;EAChC;AACF,CAAC;AAACG,OAAA,CAAAF,oBAAA,GAAAA,oBAAA;AAEK,MAAMG,gBAAgB,GAAG,MAAAA,CAAOhB,GAAG,EAAEC,GAAG,EAAEC,IAAI,KAAK;EACxD,MAAMC,IAAI,GAAG,MAAMC,aAAK,CAACC,OAAO,CAAC;IAC/BC,KAAK,EAAE;MAAEC,KAAK,EAAEP,GAAG,CAACG,IAAI,CAACc,MAAM,CAAC,CAAC,CAAC,CAACC;IAAM;EAC3C,CAAC,CAAC;EACF,IAAIf,IAAI,IAAI,OAAOH,GAAG,CAACG,IAAI,CAACgB,MAAM,KAAK,WAAW,EAAE;IAClD,MAAM;MAAEC,EAAE;MAAEb;IAAM,CAAC,GAAGJ,IAAI;IAC1B,MAAMkB,SAAS,GAAGC,qBAAG,CAACC,IAAI,CAAC;MAAEhB,KAAK;MAAEa;IAAG,CAAC,EAAEI,iBAAU,CAAC;IACrD,OAAOvB,GAAG,CAACwB,QAAQ,CAChB,GAAEC,OAAO,CAACC,GAAG,CAACC,YAAa,cAAaP,SAAU,UAASd,KAAM,EAAC,CACpE;EACH;EACAL,IAAI,EAAE;AACR,CAAC;AAACa,OAAA,CAAAC,gBAAA,GAAAA,gBAAA;AAAA,IAAAa,QAAA,GAEa9B,cAAc;AAAAgB,OAAA,CAAAe,OAAA,GAAAD,QAAA"}},"mtime":1685643189459},"{\"assumptions\":{},\"sourceRoot\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/controllers/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"filename\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/controllers/status.controller.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/node_modules/babel-plugin-add-module-exports/lib/index.js\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-runtime\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"regenerator\":true},\"externalDependencies\":[]},{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.21.0:development":{"value":{"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _sequelize = require(\"sequelize\");\nvar _moment = _interopRequireDefault(require(\"moment\"));\nvar _models = require(\"../database/models\");\nvar _status = require(\"../loggers/status.logger\");\n// eslint-disable-next-line import/named\n\n/**\n * status\n */\nclass Status {\n  /**\n  * @param {object} req\n     * @param {object} res\n     * @returns {res} getting user status\n  */\n  static async getProductsStatus(req, res) {\n    try {\n      let end;\n      let start;\n      if (!req.query.end) end = new Date();else {\n        end = new Date(req.query.end);\n        end.setHours(23);\n        end.setMinutes(59);\n      }\n      if (!req.query.start) {\n        start = new Date(end);\n        start.setHours(start.getHours() - 2);\n      } else start = new Date(req.query.start);\n      const allPayments = await _models.payments.findAll({\n        where: {\n          createdAt: {\n            [_sequelize.Op.between]: [start, end]\n          }\n        },\n        include: {\n          model: _models.order,\n          as: 'order',\n          include: {\n            model: _models.products,\n            as: 'products'\n          }\n        }\n      });\n      const allProducts = [];\n      const product = allPayments.map(payment => payment.order.products).flat(1).filter(p => p.sellerId === req.user.id);\n      product.forEach(p => {\n        if (allProducts.some(pro => p.id === pro.id)) {\n          const index = allProducts.findIndex(object => object.id === p.id);\n          allProducts[index].orderitem.quantity += p.orderitem.quantity;\n        } else {\n          allProducts.push(p);\n        }\n      });\n      const output = allProducts.map(p => ({\n        id: p.id,\n        images: p.images,\n        name: p.name,\n        description: p.description,\n        quantity: p.quantity,\n        exp_date: p.exp_date,\n        price: p.price,\n        createdAt: p.createdAt,\n        soldQuantity: p.orderitem.quantity,\n        soldAmount: p.orderitem.quantity * p.price\n      })).sort((a, b) => Number(b.soldAmount) - Number(a.soldAmount));\n      const revenue = output.reduce((out, current) => ({\n        total: out.total + current.soldAmount,\n        items: out.items + current.soldQuantity\n      }), {\n        total: 0,\n        items: 0\n      });\n      (0, _status.viewAllStats)(req);\n      return res.status(200).json({\n        products: output,\n        revenue\n      });\n    } catch (error) {\n      (0, _status.ItemError)(req, error);\n      return res.status(500).json({\n        error: 'Server error.'\n      });\n    }\n  }\n\n  /**\n  * @param {object} req\n   * @param {object} res\n   * @returns {res} getting user status with graph\n  */\n  static async getProductsStatusGraph(req, res) {\n    try {\n      const {\n        range\n      } = req.params;\n      let end;\n      let start;\n      if (range === 'year') {\n        end = new Date();\n        end.setDate('1');\n        end.setHours('00');\n        end.setMinutes('00');\n        end.setMonth(end.getMonth() + 1);\n        start = new Date(end);\n        start.setFullYear(start.getFullYear() - 1);\n      } else if (range === 'month') {\n        end = new Date();\n        end.setHours('00');\n        end.setMinutes('00');\n        end.setDate(end.getDate() + 1);\n        start = new Date(end);\n        start.setMonth(start.getMonth() - 1);\n      } else if (range === 'week') {\n        end = new Date();\n        end.setHours('00');\n        end.setMinutes('00');\n        end.setDate(end.getDate() + 1);\n        start = new Date(end);\n        start.setDate(start.getDate() - 7);\n      } else {\n        end = new Date();\n        end.setMinutes('00');\n        end.setHours(end.getHours() + 1);\n        start = new Date(end);\n        start.setDate(start.getDate() - 1);\n      }\n      const allPayments = await _models.payments.findAll({\n        where: {\n          createdAt: {\n            [_sequelize.Op.between]: [start, end]\n          }\n        },\n        include: {\n          model: _models.order,\n          as: 'order',\n          include: {\n            model: _models.products,\n            as: 'products'\n          }\n        },\n        order: [['createdAt', 'ASC']]\n      });\n      let group = [];\n      if (range === 'year') {\n        // eslint-disable-next-line no-restricted-syntax\n        for (const payment of allPayments) {\n          const date = new Date(payment.createdAt);\n          if (!group[date.getMonth()]) {\n            group[date.getMonth()] = {\n              name: (0, _moment.default)(date).format('MMMM'),\n              values: []\n            };\n          }\n          group[date.getMonth()].values.push(payment);\n        }\n        // eslint-disable-next-line no-plusplus\n        for (let i = 0; i < 12; i++) {\n          if (!group[i] || group[i] === null) {\n            group[i] = {\n              name: (0, _moment.default)().month(i).format('MMMM'),\n              values: []\n            };\n          }\n        }\n        let months = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11];\n        months = months.concat(...months.splice(0, end.getMonth()));\n        group = months.map(index => group[index]);\n      } else if (range === 'month') {\n        // eslint-disable-next-line no-restricted-syntax\n        for (const payment of allPayments) {\n          const date = new Date(payment.createdAt);\n          if (!group[date.getDate()]) {\n            group[date.getDate()] = {\n              name: (0, _moment.default)(date).format('DD'),\n              values: []\n            };\n          }\n          group[date.getDate()].values.push(payment);\n        }\n        // eslint-disable-next-line no-plusplus\n        for (let i = 0; i < 30; i++) {\n          if (!group[i] || group[i] === null) {\n            group[i] = {\n              name: (0, _moment.default)().date(i).format('DD'),\n              values: []\n            };\n          }\n        }\n        let dates = Array.from({\n          length: 30\n        }, (value, index) => index);\n        dates = dates.concat(...dates.splice(0, end.getDate()));\n        group = dates.map(index => group[index]);\n      } else if (range === 'week') {\n        // eslint-disable-next-line no-restricted-syntax\n        for (const payment of allPayments) {\n          const date = new Date(payment.createdAt);\n          if (!group[date.getDay()]) {\n            group[date.getDay()] = {\n              name: (0, _moment.default)(date).format('dddd'),\n              values: []\n            };\n          }\n          group[date.getDay()].values.push(payment);\n        }\n        // eslint-disable-next-line no-plusplus\n        for (let i = 0; i < 7; i++) {\n          if (!group[i] || group[i] === null) {\n            group[i] = {\n              name: (0, _moment.default)().day(i).format('dddd'),\n              values: []\n            };\n          }\n        }\n        let days = [0, 1, 2, 3, 4, 5, 6];\n        days = days.concat(...days.splice(0, end.getDay()));\n        group = days.map(index => group[index]);\n      } else {\n        // eslint-disable-next-line no-restricted-syntax\n        for (const payment of allPayments) {\n          const date = new Date(payment.createdAt);\n          if (!group[date.getHours()]) {\n            group[date.getHours()] = {\n              name: (0, _moment.default)(date).format('HH'),\n              values: []\n            };\n          }\n          group[date.getHours()].values.push(payment);\n        }\n        // eslint-disable-next-line no-plusplus\n        for (let i = 0; i < 24; i++) {\n          if (!group[i] || group[i] === null) {\n            group[i] = {\n              name: (0, _moment.default)().hour(i).format('HH'),\n              values: []\n            };\n          }\n        }\n        let hours = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23];\n        hours = hours.concat(...hours.splice(0, end.getHours()));\n        group = hours.map(index => group[index]);\n      }\n      group.forEach(month => {\n        if (month.values) {\n          month.values = month.values.map(payment => payment.order.products).flat(1).filter(p => p.sellerId === req.user.id);\n          const allProducts = [];\n          month.values.forEach(p => {\n            if (allProducts.some(pro => p.id === pro.id)) {\n              const index = allProducts.findIndex(object => object.id === p.id);\n              allProducts[index].orderitem.quantity += p.orderitem.quantity;\n            } else {\n              allProducts.push(p);\n            }\n          });\n          month.values = allProducts.map(p => ({\n            id: p.id,\n            images: p.images,\n            name: p.name,\n            description: p.description,\n            quantity: p.quantity,\n            exp_date: p.exp_date,\n            price: p.price,\n            createdAt: p.createdAt,\n            soldQuantity: p.orderitem.quantity,\n            soldAmount: p.orderitem.quantity * p.price\n          })).sort((a, b) => Number(b.soldAmount) - Number(a.soldAmount));\n          const revenue = month.values.reduce((out, current) => ({\n            total: out.total + current.soldAmount,\n            items: out.items + current.soldQuantity\n          }), {\n            total: 0,\n            items: 0\n          });\n          month.totalAmount = revenue.total;\n          month.items = revenue.items;\n        }\n      });\n      (0, _status.viewAllStatsGraph)(req);\n      return res.json(group);\n    } catch (error) {\n      (0, _status.ItemError)(req, error);\n      return res.status(500).json({\n        error: error.message\n      });\n    }\n  }\n}\nexports.default = Status;\nmodule.exports = exports.default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfc2VxdWVsaXplIiwicmVxdWlyZSIsIl9tb21lbnQiLCJfaW50ZXJvcFJlcXVpcmVEZWZhdWx0IiwiX21vZGVscyIsIl9zdGF0dXMiLCJTdGF0dXMiLCJnZXRQcm9kdWN0c1N0YXR1cyIsInJlcSIsInJlcyIsImVuZCIsInN0YXJ0IiwicXVlcnkiLCJEYXRlIiwic2V0SG91cnMiLCJzZXRNaW51dGVzIiwiZ2V0SG91cnMiLCJhbGxQYXltZW50cyIsInBheW1lbnRzIiwiZmluZEFsbCIsIndoZXJlIiwiY3JlYXRlZEF0IiwiT3AiLCJiZXR3ZWVuIiwiaW5jbHVkZSIsIm1vZGVsIiwib3JkZXIiLCJhcyIsInByb2R1Y3RzIiwiYWxsUHJvZHVjdHMiLCJwcm9kdWN0IiwibWFwIiwicGF5bWVudCIsImZsYXQiLCJmaWx0ZXIiLCJwIiwic2VsbGVySWQiLCJ1c2VyIiwiaWQiLCJmb3JFYWNoIiwic29tZSIsInBybyIsImluZGV4IiwiZmluZEluZGV4Iiwib2JqZWN0Iiwib3JkZXJpdGVtIiwicXVhbnRpdHkiLCJwdXNoIiwib3V0cHV0IiwiaW1hZ2VzIiwibmFtZSIsImRlc2NyaXB0aW9uIiwiZXhwX2RhdGUiLCJwcmljZSIsInNvbGRRdWFudGl0eSIsInNvbGRBbW91bnQiLCJzb3J0IiwiYSIsImIiLCJOdW1iZXIiLCJyZXZlbnVlIiwicmVkdWNlIiwib3V0IiwiY3VycmVudCIsInRvdGFsIiwiaXRlbXMiLCJ2aWV3QWxsU3RhdHMiLCJzdGF0dXMiLCJqc29uIiwiZXJyb3IiLCJJdGVtRXJyb3IiLCJnZXRQcm9kdWN0c1N0YXR1c0dyYXBoIiwicmFuZ2UiLCJwYXJhbXMiLCJzZXREYXRlIiwic2V0TW9udGgiLCJnZXRNb250aCIsInNldEZ1bGxZZWFyIiwiZ2V0RnVsbFllYXIiLCJnZXREYXRlIiwiZ3JvdXAiLCJkYXRlIiwibW9tZW50IiwiZm9ybWF0IiwidmFsdWVzIiwiaSIsIm1vbnRoIiwibW9udGhzIiwiY29uY2F0Iiwic3BsaWNlIiwiZGF0ZXMiLCJBcnJheSIsImZyb20iLCJsZW5ndGgiLCJ2YWx1ZSIsImdldERheSIsImRheSIsImRheXMiLCJob3VyIiwiaG91cnMiLCJ0b3RhbEFtb3VudCIsInZpZXdBbGxTdGF0c0dyYXBoIiwibWVzc2FnZSIsImV4cG9ydHMiLCJkZWZhdWx0IiwibW9kdWxlIl0sInNvdXJjZVJvb3QiOiIvVXNlcnMvYW5kZWxhcndhbmRhL0Rlc2t0b3AvZS1jb21tLXRlYW0tYnJvZ3JhbW1lcnMtYm4vc3JjL2NvbnRyb2xsZXJzLyIsInNvdXJjZXMiOlsic3RhdHVzLmNvbnRyb2xsZXIuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgT3AgfSBmcm9tICdzZXF1ZWxpemUnO1xuaW1wb3J0IG1vbWVudCBmcm9tICdtb21lbnQnO1xuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGltcG9ydC9uYW1lZFxuaW1wb3J0IHsgcHJvZHVjdHMsIG9yZGVyLCBwYXltZW50cyB9IGZyb20gJy4uL2RhdGFiYXNlL21vZGVscyc7XG5pbXBvcnQgeyBJdGVtRXJyb3IsIHZpZXdBbGxTdGF0c0dyYXBoLCB2aWV3QWxsU3RhdHMgfSBmcm9tICcuLi9sb2dnZXJzL3N0YXR1cy5sb2dnZXInO1xuXG4vKipcbiAqIHN0YXR1c1xuICovXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBTdGF0dXMge1xuICAvKipcbiAgKiBAcGFyYW0ge29iamVjdH0gcmVxXG4gICAgICogQHBhcmFtIHtvYmplY3R9IHJlc1xuICAgICAqIEByZXR1cm5zIHtyZXN9IGdldHRpbmcgdXNlciBzdGF0dXNcbiAgKi9cbiAgc3RhdGljIGFzeW5jIGdldFByb2R1Y3RzU3RhdHVzKHJlcSwgcmVzKSB7XG4gICAgdHJ5IHtcbiAgICAgIGxldCBlbmQ7XG4gICAgICBsZXQgc3RhcnQ7XG4gICAgICBpZiAoIXJlcS5xdWVyeS5lbmQpIGVuZCA9IG5ldyBEYXRlKCk7XG4gICAgICBlbHNlIHtcbiAgICAgICAgZW5kID0gbmV3IERhdGUocmVxLnF1ZXJ5LmVuZCk7XG4gICAgICAgIGVuZC5zZXRIb3VycygyMyk7XG4gICAgICAgIGVuZC5zZXRNaW51dGVzKDU5KTtcbiAgICAgIH1cblxuICAgICAgaWYgKCFyZXEucXVlcnkuc3RhcnQpIHtcbiAgICAgICAgc3RhcnQgPSBuZXcgRGF0ZShlbmQpO1xuICAgICAgICBzdGFydC5zZXRIb3VycyhzdGFydC5nZXRIb3VycygpIC0gMik7XG4gICAgICB9IGVsc2Ugc3RhcnQgPSBuZXcgRGF0ZShyZXEucXVlcnkuc3RhcnQpO1xuICAgICAgY29uc3QgYWxsUGF5bWVudHMgPSBhd2FpdCBwYXltZW50cy5maW5kQWxsKHtcbiAgICAgICAgd2hlcmU6IHtcbiAgICAgICAgICBjcmVhdGVkQXQ6IHtcbiAgICAgICAgICAgIFtPcC5iZXR3ZWVuXTogW3N0YXJ0LCBlbmRdXG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBpbmNsdWRlOiB7XG4gICAgICAgICAgbW9kZWw6IG9yZGVyLFxuICAgICAgICAgIGFzOiAnb3JkZXInLFxuICAgICAgICAgIGluY2x1ZGU6IHsgbW9kZWw6IHByb2R1Y3RzLCBhczogJ3Byb2R1Y3RzJywgfVxuICAgICAgICB9LFxuICAgICAgfSk7XG4gICAgICBjb25zdCBhbGxQcm9kdWN0cyA9IFtdO1xuICAgICAgY29uc3QgcHJvZHVjdCA9IGFsbFBheW1lbnRzXG4gICAgICAgIC5tYXAoKHBheW1lbnQpID0+IChwYXltZW50Lm9yZGVyLnByb2R1Y3RzKSlcbiAgICAgICAgLmZsYXQoMSlcbiAgICAgICAgLmZpbHRlcigocCkgPT4gKHAuc2VsbGVySWQgPT09IHJlcS51c2VyLmlkKSk7XG4gICAgICBwcm9kdWN0LmZvckVhY2goKHApID0+IHtcbiAgICAgICAgaWYgKGFsbFByb2R1Y3RzLnNvbWUoKHBybykgPT4gKHAuaWQgPT09IHByby5pZCkpKSB7XG4gICAgICAgICAgY29uc3QgaW5kZXggPSBhbGxQcm9kdWN0cy5maW5kSW5kZXgoKG9iamVjdCkgPT4gb2JqZWN0LmlkID09PSBwLmlkKTtcbiAgICAgICAgICBhbGxQcm9kdWN0c1tpbmRleF0ub3JkZXJpdGVtLnF1YW50aXR5ICs9IHAub3JkZXJpdGVtLnF1YW50aXR5O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGFsbFByb2R1Y3RzLnB1c2gocCk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgY29uc3Qgb3V0cHV0ID0gYWxsUHJvZHVjdHMubWFwKChwKSA9PiAoe1xuICAgICAgICBpZDogcC5pZCxcbiAgICAgICAgaW1hZ2VzOiBwLmltYWdlcyxcbiAgICAgICAgbmFtZTogcC5uYW1lLFxuICAgICAgICBkZXNjcmlwdGlvbjogcC5kZXNjcmlwdGlvbixcbiAgICAgICAgcXVhbnRpdHk6IHAucXVhbnRpdHksXG4gICAgICAgIGV4cF9kYXRlOiBwLmV4cF9kYXRlLFxuICAgICAgICBwcmljZTogcC5wcmljZSxcbiAgICAgICAgY3JlYXRlZEF0OiBwLmNyZWF0ZWRBdCxcbiAgICAgICAgc29sZFF1YW50aXR5OiBwLm9yZGVyaXRlbS5xdWFudGl0eSxcbiAgICAgICAgc29sZEFtb3VudDogcC5vcmRlcml0ZW0ucXVhbnRpdHkgKiBwLnByaWNlLFxuICAgICAgfSkpLnNvcnQoKGEsIGIpID0+IChOdW1iZXIoYi5zb2xkQW1vdW50KSAtIE51bWJlcihhLnNvbGRBbW91bnQpKSk7XG4gICAgICBjb25zdCByZXZlbnVlID0gb3V0cHV0LnJlZHVjZSgob3V0LCBjdXJyZW50KSA9PiAoe1xuICAgICAgICB0b3RhbDogb3V0LnRvdGFsICsgY3VycmVudC5zb2xkQW1vdW50LFxuICAgICAgICBpdGVtczogb3V0Lml0ZW1zICsgY3VycmVudC5zb2xkUXVhbnRpdHlcbiAgICAgIH0pLCB7IHRvdGFsOiAwLCBpdGVtczogMCB9KTtcbiAgICAgIHZpZXdBbGxTdGF0cyhyZXEpO1xuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoMjAwKS5qc29uKHsgcHJvZHVjdHM6IG91dHB1dCwgcmV2ZW51ZSB9KTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgSXRlbUVycm9yKHJlcSwgZXJyb3IpO1xuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgZXJyb3I6ICdTZXJ2ZXIgZXJyb3IuJyB9KTtcbiAgICB9XG4gIH1cblxuICAvKipcbiogQHBhcmFtIHtvYmplY3R9IHJlcVxuICAgKiBAcGFyYW0ge29iamVjdH0gcmVzXG4gICAqIEByZXR1cm5zIHtyZXN9IGdldHRpbmcgdXNlciBzdGF0dXMgd2l0aCBncmFwaFxuKi9cbiAgc3RhdGljIGFzeW5jIGdldFByb2R1Y3RzU3RhdHVzR3JhcGgocmVxLCByZXMpIHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgeyByYW5nZSB9ID0gcmVxLnBhcmFtcztcbiAgICAgIGxldCBlbmQ7XG4gICAgICBsZXQgc3RhcnQ7XG4gICAgICBpZiAocmFuZ2UgPT09ICd5ZWFyJykge1xuICAgICAgICBlbmQgPSBuZXcgRGF0ZSgpO1xuICAgICAgICBlbmQuc2V0RGF0ZSgnMScpO1xuICAgICAgICBlbmQuc2V0SG91cnMoJzAwJyk7XG4gICAgICAgIGVuZC5zZXRNaW51dGVzKCcwMCcpO1xuICAgICAgICBlbmQuc2V0TW9udGgoZW5kLmdldE1vbnRoKCkgKyAxKTtcbiAgICAgICAgc3RhcnQgPSBuZXcgRGF0ZShlbmQpO1xuICAgICAgICBzdGFydC5zZXRGdWxsWWVhcihzdGFydC5nZXRGdWxsWWVhcigpIC0gMSk7XG4gICAgICB9IGVsc2UgaWYgKHJhbmdlID09PSAnbW9udGgnKSB7XG4gICAgICAgIGVuZCA9IG5ldyBEYXRlKCk7XG4gICAgICAgIGVuZC5zZXRIb3VycygnMDAnKTtcbiAgICAgICAgZW5kLnNldE1pbnV0ZXMoJzAwJyk7XG4gICAgICAgIGVuZC5zZXREYXRlKGVuZC5nZXREYXRlKCkgKyAxKTtcbiAgICAgICAgc3RhcnQgPSBuZXcgRGF0ZShlbmQpO1xuICAgICAgICBzdGFydC5zZXRNb250aChzdGFydC5nZXRNb250aCgpIC0gMSk7XG4gICAgICB9IGVsc2UgaWYgKHJhbmdlID09PSAnd2VlaycpIHtcbiAgICAgICAgZW5kID0gbmV3IERhdGUoKTtcbiAgICAgICAgZW5kLnNldEhvdXJzKCcwMCcpO1xuICAgICAgICBlbmQuc2V0TWludXRlcygnMDAnKTtcbiAgICAgICAgZW5kLnNldERhdGUoZW5kLmdldERhdGUoKSArIDEpO1xuICAgICAgICBzdGFydCA9IG5ldyBEYXRlKGVuZCk7XG4gICAgICAgIHN0YXJ0LnNldERhdGUoc3RhcnQuZ2V0RGF0ZSgpIC0gNyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBlbmQgPSBuZXcgRGF0ZSgpO1xuICAgICAgICBlbmQuc2V0TWludXRlcygnMDAnKTtcbiAgICAgICAgZW5kLnNldEhvdXJzKGVuZC5nZXRIb3VycygpICsgMSk7XG4gICAgICAgIHN0YXJ0ID0gbmV3IERhdGUoZW5kKTtcbiAgICAgICAgc3RhcnQuc2V0RGF0ZShzdGFydC5nZXREYXRlKCkgLSAxKTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IGFsbFBheW1lbnRzID0gYXdhaXQgcGF5bWVudHMuZmluZEFsbCh7XG4gICAgICAgIHdoZXJlOiB7XG4gICAgICAgICAgY3JlYXRlZEF0OiB7XG4gICAgICAgICAgICBbT3AuYmV0d2Vlbl06IFtzdGFydCwgZW5kXVxuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgaW5jbHVkZToge1xuICAgICAgICAgIG1vZGVsOiBvcmRlcixcbiAgICAgICAgICBhczogJ29yZGVyJyxcbiAgICAgICAgICBpbmNsdWRlOiB7IG1vZGVsOiBwcm9kdWN0cywgYXM6ICdwcm9kdWN0cycsIH1cbiAgICAgICAgfSxcbiAgICAgICAgb3JkZXI6IFtbJ2NyZWF0ZWRBdCcsICdBU0MnXV1cbiAgICAgIH0pO1xuICAgICAgbGV0IGdyb3VwID0gW107XG4gICAgICBpZiAocmFuZ2UgPT09ICd5ZWFyJykge1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcmVzdHJpY3RlZC1zeW50YXhcbiAgICAgICAgZm9yIChjb25zdCBwYXltZW50IG9mIGFsbFBheW1lbnRzKSB7XG4gICAgICAgICAgY29uc3QgZGF0ZSA9IG5ldyBEYXRlKHBheW1lbnQuY3JlYXRlZEF0KTtcbiAgICAgICAgICBpZiAoIWdyb3VwW2RhdGUuZ2V0TW9udGgoKV0pIHtcbiAgICAgICAgICAgIGdyb3VwW2RhdGUuZ2V0TW9udGgoKV0gPSB7XG4gICAgICAgICAgICAgIG5hbWU6IG1vbWVudChkYXRlKS5mb3JtYXQoJ01NTU0nKSxcbiAgICAgICAgICAgICAgdmFsdWVzOiBbXVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICB9XG4gICAgICAgICAgZ3JvdXBbZGF0ZS5nZXRNb250aCgpXS52YWx1ZXMucHVzaChwYXltZW50KTtcbiAgICAgICAgfVxuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcGx1c3BsdXNcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCAxMjsgaSsrKSB7XG4gICAgICAgICAgaWYgKCFncm91cFtpXSB8fCBncm91cFtpXSA9PT0gbnVsbCkge1xuICAgICAgICAgICAgZ3JvdXBbaV0gPSB7XG4gICAgICAgICAgICAgIG5hbWU6IG1vbWVudCgpLm1vbnRoKGkpLmZvcm1hdCgnTU1NTScpLFxuICAgICAgICAgICAgICB2YWx1ZXM6IFtdXG4gICAgICAgICAgICB9O1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBsZXQgbW9udGhzID0gWzAsIDEsIDIsIDMsIDQsIDUsIDYsIDcsIDgsIDksIDEwLCAxMV07XG4gICAgICAgIG1vbnRocyA9IG1vbnRocy5jb25jYXQoLi4ubW9udGhzLnNwbGljZSgwLCBlbmQuZ2V0TW9udGgoKSkpO1xuXG4gICAgICAgIGdyb3VwID0gbW9udGhzLm1hcCgoaW5kZXgpID0+IGdyb3VwW2luZGV4XSk7XG4gICAgICB9IGVsc2UgaWYgKHJhbmdlID09PSAnbW9udGgnKSB7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1yZXN0cmljdGVkLXN5bnRheFxuICAgICAgICBmb3IgKGNvbnN0IHBheW1lbnQgb2YgYWxsUGF5bWVudHMpIHtcbiAgICAgICAgICBjb25zdCBkYXRlID0gbmV3IERhdGUocGF5bWVudC5jcmVhdGVkQXQpO1xuICAgICAgICAgIGlmICghZ3JvdXBbZGF0ZS5nZXREYXRlKCldKSB7XG4gICAgICAgICAgICBncm91cFtkYXRlLmdldERhdGUoKV0gPSB7XG4gICAgICAgICAgICAgIG5hbWU6IG1vbWVudChkYXRlKS5mb3JtYXQoJ0REJyksXG4gICAgICAgICAgICAgIHZhbHVlczogW11cbiAgICAgICAgICAgIH07XG4gICAgICAgICAgfVxuICAgICAgICAgIGdyb3VwW2RhdGUuZ2V0RGF0ZSgpXS52YWx1ZXMucHVzaChwYXltZW50KTtcbiAgICAgICAgfVxuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcGx1c3BsdXNcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCAzMDsgaSsrKSB7XG4gICAgICAgICAgaWYgKCFncm91cFtpXSB8fCBncm91cFtpXSA9PT0gbnVsbCkge1xuICAgICAgICAgICAgZ3JvdXBbaV0gPSB7XG4gICAgICAgICAgICAgIG5hbWU6IG1vbWVudCgpLmRhdGUoaSkuZm9ybWF0KCdERCcpLFxuICAgICAgICAgICAgICB2YWx1ZXM6IFtdXG4gICAgICAgICAgICB9O1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBsZXQgZGF0ZXMgPSBBcnJheS5mcm9tKHsgbGVuZ3RoOiAzMCB9LCAodmFsdWUsIGluZGV4KSA9PiBpbmRleCk7XG4gICAgICAgIGRhdGVzID0gZGF0ZXMuY29uY2F0KC4uLmRhdGVzLnNwbGljZSgwLCBlbmQuZ2V0RGF0ZSgpKSk7XG4gICAgICAgIGdyb3VwID0gZGF0ZXMubWFwKChpbmRleCkgPT4gZ3JvdXBbaW5kZXhdKTtcbiAgICAgIH0gZWxzZSBpZiAocmFuZ2UgPT09ICd3ZWVrJykge1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcmVzdHJpY3RlZC1zeW50YXhcbiAgICAgICAgZm9yIChjb25zdCBwYXltZW50IG9mIGFsbFBheW1lbnRzKSB7XG4gICAgICAgICAgY29uc3QgZGF0ZSA9IG5ldyBEYXRlKHBheW1lbnQuY3JlYXRlZEF0KTtcbiAgICAgICAgICBpZiAoIWdyb3VwW2RhdGUuZ2V0RGF5KCldKSB7XG4gICAgICAgICAgICBncm91cFtkYXRlLmdldERheSgpXSA9IHtcbiAgICAgICAgICAgICAgbmFtZTogbW9tZW50KGRhdGUpLmZvcm1hdCgnZGRkZCcpLFxuICAgICAgICAgICAgICB2YWx1ZXM6IFtdXG4gICAgICAgICAgICB9O1xuICAgICAgICAgIH1cbiAgICAgICAgICBncm91cFtkYXRlLmdldERheSgpXS52YWx1ZXMucHVzaChwYXltZW50KTtcbiAgICAgICAgfVxuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcGx1c3BsdXNcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCA3OyBpKyspIHtcbiAgICAgICAgICBpZiAoIWdyb3VwW2ldIHx8IGdyb3VwW2ldID09PSBudWxsKSB7XG4gICAgICAgICAgICBncm91cFtpXSA9IHtcbiAgICAgICAgICAgICAgbmFtZTogbW9tZW50KCkuZGF5KGkpLmZvcm1hdCgnZGRkZCcpLFxuICAgICAgICAgICAgICB2YWx1ZXM6IFtdXG4gICAgICAgICAgICB9O1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBsZXQgZGF5cyA9IFtcbiAgICAgICAgICAwLCAxLCAyLCAzLCA0LCA1LCA2XG4gICAgICAgIF07XG4gICAgICAgIGRheXMgPSBkYXlzLmNvbmNhdCguLi5kYXlzLnNwbGljZSgwLCBlbmQuZ2V0RGF5KCkpKTtcbiAgICAgICAgZ3JvdXAgPSBkYXlzLm1hcCgoaW5kZXgpID0+IGdyb3VwW2luZGV4XSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcmVzdHJpY3RlZC1zeW50YXhcbiAgICAgICAgZm9yIChjb25zdCBwYXltZW50IG9mIGFsbFBheW1lbnRzKSB7XG4gICAgICAgICAgY29uc3QgZGF0ZSA9IG5ldyBEYXRlKHBheW1lbnQuY3JlYXRlZEF0KTtcbiAgICAgICAgICBpZiAoIWdyb3VwW2RhdGUuZ2V0SG91cnMoKV0pIHtcbiAgICAgICAgICAgIGdyb3VwW2RhdGUuZ2V0SG91cnMoKV0gPSB7XG4gICAgICAgICAgICAgIG5hbWU6IG1vbWVudChkYXRlKS5mb3JtYXQoJ0hIJyksXG4gICAgICAgICAgICAgIHZhbHVlczogW11cbiAgICAgICAgICAgIH07XG4gICAgICAgICAgfVxuICAgICAgICAgIGdyb3VwW2RhdGUuZ2V0SG91cnMoKV0udmFsdWVzLnB1c2gocGF5bWVudCk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXBsdXNwbHVzXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgMjQ7IGkrKykge1xuICAgICAgICAgIGlmICghZ3JvdXBbaV0gfHwgZ3JvdXBbaV0gPT09IG51bGwpIHtcbiAgICAgICAgICAgIGdyb3VwW2ldID0ge1xuICAgICAgICAgICAgICBuYW1lOiBtb21lbnQoKS5ob3VyKGkpLmZvcm1hdCgnSEgnKSxcbiAgICAgICAgICAgICAgdmFsdWVzOiBbXVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgbGV0IGhvdXJzID0gW1xuICAgICAgICAgIDAsIDEsIDIsIDMsIDQsIDUsIDYsIDcsIDgsIDksIDEwLCAxMSwgMTIsIDEzLCAxNCwgMTUsIDE2LCAxNywgMTgsIDE5LCAyMCwgMjEsIDIyLCAyM1xuICAgICAgICBdO1xuICAgICAgICBob3VycyA9IGhvdXJzLmNvbmNhdCguLi5ob3Vycy5zcGxpY2UoMCwgZW5kLmdldEhvdXJzKCkpKTtcbiAgICAgICAgZ3JvdXAgPSBob3Vycy5tYXAoKGluZGV4KSA9PiBncm91cFtpbmRleF0pO1xuICAgICAgfVxuICAgICAgZ3JvdXAuZm9yRWFjaCgobW9udGgpID0+IHtcbiAgICAgICAgaWYgKG1vbnRoLnZhbHVlcykge1xuICAgICAgICAgIG1vbnRoLnZhbHVlcyA9IG1vbnRoLnZhbHVlcy5tYXAoKHBheW1lbnQpID0+IChwYXltZW50Lm9yZGVyLnByb2R1Y3RzKSlcbiAgICAgICAgICAgIC5mbGF0KDEpXG4gICAgICAgICAgICAuZmlsdGVyKChwKSA9PiAocC5zZWxsZXJJZCA9PT0gcmVxLnVzZXIuaWQpKTtcbiAgICAgICAgICBjb25zdCBhbGxQcm9kdWN0cyA9IFtdO1xuICAgICAgICAgIG1vbnRoLnZhbHVlcy5mb3JFYWNoKChwKSA9PiB7XG4gICAgICAgICAgICBpZiAoYWxsUHJvZHVjdHMuc29tZSgocHJvKSA9PiAocC5pZCA9PT0gcHJvLmlkKSkpIHtcbiAgICAgICAgICAgICAgY29uc3QgaW5kZXggPSBhbGxQcm9kdWN0cy5maW5kSW5kZXgoKG9iamVjdCkgPT4gb2JqZWN0LmlkID09PSBwLmlkKTtcbiAgICAgICAgICAgICAgYWxsUHJvZHVjdHNbaW5kZXhdLm9yZGVyaXRlbS5xdWFudGl0eSArPSBwLm9yZGVyaXRlbS5xdWFudGl0eTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIGFsbFByb2R1Y3RzLnB1c2gocCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgbW9udGgudmFsdWVzID0gYWxsUHJvZHVjdHMubWFwKChwKSA9PiAoe1xuICAgICAgICAgICAgaWQ6IHAuaWQsXG4gICAgICAgICAgICBpbWFnZXM6IHAuaW1hZ2VzLFxuICAgICAgICAgICAgbmFtZTogcC5uYW1lLFxuICAgICAgICAgICAgZGVzY3JpcHRpb246IHAuZGVzY3JpcHRpb24sXG4gICAgICAgICAgICBxdWFudGl0eTogcC5xdWFudGl0eSxcbiAgICAgICAgICAgIGV4cF9kYXRlOiBwLmV4cF9kYXRlLFxuICAgICAgICAgICAgcHJpY2U6IHAucHJpY2UsXG4gICAgICAgICAgICBjcmVhdGVkQXQ6IHAuY3JlYXRlZEF0LFxuICAgICAgICAgICAgc29sZFF1YW50aXR5OiBwLm9yZGVyaXRlbS5xdWFudGl0eSxcbiAgICAgICAgICAgIHNvbGRBbW91bnQ6IHAub3JkZXJpdGVtLnF1YW50aXR5ICogcC5wcmljZSxcbiAgICAgICAgICB9KSkuc29ydCgoYSwgYikgPT4gKE51bWJlcihiLnNvbGRBbW91bnQpIC0gTnVtYmVyKGEuc29sZEFtb3VudCkpKTtcbiAgICAgICAgICBjb25zdCByZXZlbnVlID0gbW9udGgudmFsdWVzLnJlZHVjZSgob3V0LCBjdXJyZW50KSA9PiAoe1xuICAgICAgICAgICAgdG90YWw6IG91dC50b3RhbCArIGN1cnJlbnQuc29sZEFtb3VudCxcbiAgICAgICAgICAgIGl0ZW1zOiBvdXQuaXRlbXMgKyBjdXJyZW50LnNvbGRRdWFudGl0eVxuICAgICAgICAgIH0pLCB7IHRvdGFsOiAwLCBpdGVtczogMCB9KTtcbiAgICAgICAgICBtb250aC50b3RhbEFtb3VudCA9IHJldmVudWUudG90YWw7XG4gICAgICAgICAgbW9udGguaXRlbXMgPSByZXZlbnVlLml0ZW1zO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIHZpZXdBbGxTdGF0c0dyYXBoKHJlcSk7XG4gICAgICByZXR1cm4gcmVzLmpzb24oZ3JvdXApO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBJdGVtRXJyb3IocmVxLCBlcnJvcik7XG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg1MDApLmpzb24oeyBlcnJvcjogZXJyb3IubWVzc2FnZSB9KTtcbiAgICB9XG4gIH1cbn1cbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBLElBQUFBLFVBQUEsR0FBQUMsT0FBQTtBQUNBLElBQUFDLE9BQUEsR0FBQUMsc0JBQUEsQ0FBQUYsT0FBQTtBQUVBLElBQUFHLE9BQUEsR0FBQUgsT0FBQTtBQUNBLElBQUFJLE9BQUEsR0FBQUosT0FBQTtBQUZBOztBQUlBO0FBQ0E7QUFDQTtBQUNlLE1BQU1LLE1BQU0sQ0FBQztFQUMxQjtBQUNG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","map":{"version":3,"names":["_sequelize","require","_moment","_interopRequireDefault","_models","_status","Status","getProductsStatus","req","res","end","start","query","Date","setHours","setMinutes","getHours","allPayments","payments","findAll","where","createdAt","Op","between","include","model","order","as","products","allProducts","product","map","payment","flat","filter","p","sellerId","user","id","forEach","some","pro","index","findIndex","object","orderitem","quantity","push","output","images","name","description","exp_date","price","soldQuantity","soldAmount","sort","a","b","Number","revenue","reduce","out","current","total","items","viewAllStats","status","json","error","ItemError","getProductsStatusGraph","range","params","setDate","setMonth","getMonth","setFullYear","getFullYear","getDate","group","date","moment","format","values","i","month","months","concat","splice","dates","Array","from","length","value","getDay","day","days","hour","hours","totalAmount","viewAllStatsGraph","message","exports","default","module"],"sourceRoot":"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/controllers/","sources":["status.controller.js"],"sourcesContent":["import { Op } from 'sequelize';\nimport moment from 'moment';\n// eslint-disable-next-line import/named\nimport { products, order, payments } from '../database/models';\nimport { ItemError, viewAllStatsGraph, viewAllStats } from '../loggers/status.logger';\n\n/**\n * status\n */\nexport default class Status {\n  /**\n  * @param {object} req\n     * @param {object} res\n     * @returns {res} getting user status\n  */\n  static async getProductsStatus(req, res) {\n    try {\n      let end;\n      let start;\n      if (!req.query.end) end = new Date();\n      else {\n        end = new Date(req.query.end);\n        end.setHours(23);\n        end.setMinutes(59);\n      }\n\n      if (!req.query.start) {\n        start = new Date(end);\n        start.setHours(start.getHours() - 2);\n      } else start = new Date(req.query.start);\n      const allPayments = await payments.findAll({\n        where: {\n          createdAt: {\n            [Op.between]: [start, end]\n          }\n        },\n        include: {\n          model: order,\n          as: 'order',\n          include: { model: products, as: 'products', }\n        },\n      });\n      const allProducts = [];\n      const product = allPayments\n        .map((payment) => (payment.order.products))\n        .flat(1)\n        .filter((p) => (p.sellerId === req.user.id));\n      product.forEach((p) => {\n        if (allProducts.some((pro) => (p.id === pro.id))) {\n          const index = allProducts.findIndex((object) => object.id === p.id);\n          allProducts[index].orderitem.quantity += p.orderitem.quantity;\n        } else {\n          allProducts.push(p);\n        }\n      });\n      const output = allProducts.map((p) => ({\n        id: p.id,\n        images: p.images,\n        name: p.name,\n        description: p.description,\n        quantity: p.quantity,\n        exp_date: p.exp_date,\n        price: p.price,\n        createdAt: p.createdAt,\n        soldQuantity: p.orderitem.quantity,\n        soldAmount: p.orderitem.quantity * p.price,\n      })).sort((a, b) => (Number(b.soldAmount) - Number(a.soldAmount)));\n      const revenue = output.reduce((out, current) => ({\n        total: out.total + current.soldAmount,\n        items: out.items + current.soldQuantity\n      }), { total: 0, items: 0 });\n      viewAllStats(req);\n      return res.status(200).json({ products: output, revenue });\n    } catch (error) {\n      ItemError(req, error);\n      return res.status(500).json({ error: 'Server error.' });\n    }\n  }\n\n  /**\n* @param {object} req\n   * @param {object} res\n   * @returns {res} getting user status with graph\n*/\n  static async getProductsStatusGraph(req, res) {\n    try {\n      const { range } = req.params;\n      let end;\n      let start;\n      if (range === 'year') {\n        end = new Date();\n        end.setDate('1');\n        end.setHours('00');\n        end.setMinutes('00');\n        end.setMonth(end.getMonth() + 1);\n        start = new Date(end);\n        start.setFullYear(start.getFullYear() - 1);\n      } else if (range === 'month') {\n        end = new Date();\n        end.setHours('00');\n        end.setMinutes('00');\n        end.setDate(end.getDate() + 1);\n        start = new Date(end);\n        start.setMonth(start.getMonth() - 1);\n      } else if (range === 'week') {\n        end = new Date();\n        end.setHours('00');\n        end.setMinutes('00');\n        end.setDate(end.getDate() + 1);\n        start = new Date(end);\n        start.setDate(start.getDate() - 7);\n      } else {\n        end = new Date();\n        end.setMinutes('00');\n        end.setHours(end.getHours() + 1);\n        start = new Date(end);\n        start.setDate(start.getDate() - 1);\n      }\n      const allPayments = await payments.findAll({\n        where: {\n          createdAt: {\n            [Op.between]: [start, end]\n          }\n        },\n        include: {\n          model: order,\n          as: 'order',\n          include: { model: products, as: 'products', }\n        },\n        order: [['createdAt', 'ASC']]\n      });\n      let group = [];\n      if (range === 'year') {\n        // eslint-disable-next-line no-restricted-syntax\n        for (const payment of allPayments) {\n          const date = new Date(payment.createdAt);\n          if (!group[date.getMonth()]) {\n            group[date.getMonth()] = {\n              name: moment(date).format('MMMM'),\n              values: []\n            };\n          }\n          group[date.getMonth()].values.push(payment);\n        }\n        // eslint-disable-next-line no-plusplus\n        for (let i = 0; i < 12; i++) {\n          if (!group[i] || group[i] === null) {\n            group[i] = {\n              name: moment().month(i).format('MMMM'),\n              values: []\n            };\n          }\n        }\n        let months = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11];\n        months = months.concat(...months.splice(0, end.getMonth()));\n\n        group = months.map((index) => group[index]);\n      } else if (range === 'month') {\n        // eslint-disable-next-line no-restricted-syntax\n        for (const payment of allPayments) {\n          const date = new Date(payment.createdAt);\n          if (!group[date.getDate()]) {\n            group[date.getDate()] = {\n              name: moment(date).format('DD'),\n              values: []\n            };\n          }\n          group[date.getDate()].values.push(payment);\n        }\n        // eslint-disable-next-line no-plusplus\n        for (let i = 0; i < 30; i++) {\n          if (!group[i] || group[i] === null) {\n            group[i] = {\n              name: moment().date(i).format('DD'),\n              values: []\n            };\n          }\n        }\n        let dates = Array.from({ length: 30 }, (value, index) => index);\n        dates = dates.concat(...dates.splice(0, end.getDate()));\n        group = dates.map((index) => group[index]);\n      } else if (range === 'week') {\n        // eslint-disable-next-line no-restricted-syntax\n        for (const payment of allPayments) {\n          const date = new Date(payment.createdAt);\n          if (!group[date.getDay()]) {\n            group[date.getDay()] = {\n              name: moment(date).format('dddd'),\n              values: []\n            };\n          }\n          group[date.getDay()].values.push(payment);\n        }\n        // eslint-disable-next-line no-plusplus\n        for (let i = 0; i < 7; i++) {\n          if (!group[i] || group[i] === null) {\n            group[i] = {\n              name: moment().day(i).format('dddd'),\n              values: []\n            };\n          }\n        }\n        let days = [\n          0, 1, 2, 3, 4, 5, 6\n        ];\n        days = days.concat(...days.splice(0, end.getDay()));\n        group = days.map((index) => group[index]);\n      } else {\n        // eslint-disable-next-line no-restricted-syntax\n        for (const payment of allPayments) {\n          const date = new Date(payment.createdAt);\n          if (!group[date.getHours()]) {\n            group[date.getHours()] = {\n              name: moment(date).format('HH'),\n              values: []\n            };\n          }\n          group[date.getHours()].values.push(payment);\n        }\n        // eslint-disable-next-line no-plusplus\n        for (let i = 0; i < 24; i++) {\n          if (!group[i] || group[i] === null) {\n            group[i] = {\n              name: moment().hour(i).format('HH'),\n              values: []\n            };\n          }\n        }\n        let hours = [\n          0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23\n        ];\n        hours = hours.concat(...hours.splice(0, end.getHours()));\n        group = hours.map((index) => group[index]);\n      }\n      group.forEach((month) => {\n        if (month.values) {\n          month.values = month.values.map((payment) => (payment.order.products))\n            .flat(1)\n            .filter((p) => (p.sellerId === req.user.id));\n          const allProducts = [];\n          month.values.forEach((p) => {\n            if (allProducts.some((pro) => (p.id === pro.id))) {\n              const index = allProducts.findIndex((object) => object.id === p.id);\n              allProducts[index].orderitem.quantity += p.orderitem.quantity;\n            } else {\n              allProducts.push(p);\n            }\n          });\n          month.values = allProducts.map((p) => ({\n            id: p.id,\n            images: p.images,\n            name: p.name,\n            description: p.description,\n            quantity: p.quantity,\n            exp_date: p.exp_date,\n            price: p.price,\n            createdAt: p.createdAt,\n            soldQuantity: p.orderitem.quantity,\n            soldAmount: p.orderitem.quantity * p.price,\n          })).sort((a, b) => (Number(b.soldAmount) - Number(a.soldAmount)));\n          const revenue = month.values.reduce((out, current) => ({\n            total: out.total + current.soldAmount,\n            items: out.items + current.soldQuantity\n          }), { total: 0, items: 0 });\n          month.totalAmount = revenue.total;\n          month.items = revenue.items;\n        }\n      });\n      viewAllStatsGraph(req);\n      return res.json(group);\n    } catch (error) {\n      ItemError(req, error);\n      return res.status(500).json({ error: error.message });\n    }\n  }\n}\n"],"mappings":"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"}},"mtime":1682148437923},"{\"assumptions\":{},\"sourceRoot\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/loggers/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"filename\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/loggers/status.logger.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/node_modules/babel-plugin-add-module-exports/lib/index.js\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-runtime\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"regenerator\":true},\"externalDependencies\":[]},{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.21.0:development":{"value":{"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.viewAllStatsGraph = exports.viewAllStats = exports.ItemError = void 0;\nvar _logger = _interopRequireDefault(require(\"../configs/logger\"));\nvar _models = require(\"../database/models\");\n/* eslint-disable import/named */\n\nconst ItemError = async (req, error) => {\n  const logData = {\n    level: 'error',\n    message: error.message,\n    userId: req.user.id,\n    metadata: {\n      ItemRequest: req.body\n    }\n  };\n  await _models.Log.create(logData);\n  _logger.default.error(`seller ${req.user.email} encountered an error:${error.message}`);\n};\nexports.ItemError = ItemError;\nconst viewAllStats = async req => {\n  const logData = {\n    level: 'info',\n    message: `seller ${req.user.email} viewed his products statistics`,\n    userId: req.user.id,\n    metadata: {}\n  };\n  await _models.Log.create(logData);\n  _logger.default.info(`seller ${req.user.email} viewed his products statistics`);\n};\nexports.viewAllStats = viewAllStats;\nconst viewAllStatsGraph = async req => {\n  const logData = {\n    level: 'info',\n    message: `seller ${req.user.email} viewed his products statistics graph`,\n    userId: req.user.id,\n    metadata: {}\n  };\n  await _models.Log.create(logData);\n  _logger.default.info(`seller ${req.user.email} viewed his products statistics graph`);\n};\nexports.viewAllStatsGraph = viewAllStatsGraph;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfbG9nZ2VyIiwiX2ludGVyb3BSZXF1aXJlRGVmYXVsdCIsInJlcXVpcmUiLCJfbW9kZWxzIiwiSXRlbUVycm9yIiwicmVxIiwiZXJyb3IiLCJsb2dEYXRhIiwibGV2ZWwiLCJtZXNzYWdlIiwidXNlcklkIiwidXNlciIsImlkIiwibWV0YWRhdGEiLCJJdGVtUmVxdWVzdCIsImJvZHkiLCJMb2ciLCJjcmVhdGUiLCJsb2dnZXIiLCJlbWFpbCIsImV4cG9ydHMiLCJ2aWV3QWxsU3RhdHMiLCJpbmZvIiwidmlld0FsbFN0YXRzR3JhcGgiXSwic291cmNlUm9vdCI6Ii9Vc2Vycy9hbmRlbGFyd2FuZGEvRGVza3RvcC9lLWNvbW0tdGVhbS1icm9ncmFtbWVycy1ibi9zcmMvbG9nZ2Vycy8iLCJzb3VyY2VzIjpbInN0YXR1cy5sb2dnZXIuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLyogZXNsaW50LWRpc2FibGUgaW1wb3J0L25hbWVkICovXG5cbmltcG9ydCBsb2dnZXIgZnJvbSAnLi4vY29uZmlncy9sb2dnZXInO1xuaW1wb3J0IHsgTG9nIH0gZnJvbSAnLi4vZGF0YWJhc2UvbW9kZWxzJztcblxuZXhwb3J0IGNvbnN0IEl0ZW1FcnJvciA9IGFzeW5jIChyZXEsIGVycm9yKSA9PiB7XG4gIGNvbnN0IGxvZ0RhdGEgPSB7XG4gICAgbGV2ZWw6ICdlcnJvcicsXG4gICAgbWVzc2FnZTogZXJyb3IubWVzc2FnZSxcbiAgICB1c2VySWQ6IHJlcS51c2VyLmlkLFxuICAgIG1ldGFkYXRhOiB7IEl0ZW1SZXF1ZXN0OiByZXEuYm9keSB9LFxuICB9O1xuICBhd2FpdCBMb2cuY3JlYXRlKGxvZ0RhdGEpO1xuICBsb2dnZXIuZXJyb3IoYHNlbGxlciAke3JlcS51c2VyLmVtYWlsfSBlbmNvdW50ZXJlZCBhbiBlcnJvcjoke2Vycm9yLm1lc3NhZ2V9YCk7XG59O1xuXG5leHBvcnQgY29uc3Qgdmlld0FsbFN0YXRzID0gYXN5bmMgKHJlcSkgPT4ge1xuICBjb25zdCBsb2dEYXRhID0ge1xuICAgIGxldmVsOiAnaW5mbycsXG4gICAgbWVzc2FnZTogYHNlbGxlciAke3JlcS51c2VyLmVtYWlsfSB2aWV3ZWQgaGlzIHByb2R1Y3RzIHN0YXRpc3RpY3NgLFxuICAgIHVzZXJJZDogcmVxLnVzZXIuaWQsXG4gICAgbWV0YWRhdGE6IHsgfSxcbiAgfTtcbiAgYXdhaXQgTG9nLmNyZWF0ZShsb2dEYXRhKTtcbiAgbG9nZ2VyLmluZm8oYHNlbGxlciAke3JlcS51c2VyLmVtYWlsfSB2aWV3ZWQgaGlzIHByb2R1Y3RzIHN0YXRpc3RpY3NgKTtcbn07XG5leHBvcnQgY29uc3Qgdmlld0FsbFN0YXRzR3JhcGggPSBhc3luYyAocmVxKSA9PiB7XG4gIGNvbnN0IGxvZ0RhdGEgPSB7XG4gICAgbGV2ZWw6ICdpbmZvJyxcbiAgICBtZXNzYWdlOiBgc2VsbGVyICR7cmVxLnVzZXIuZW1haWx9IHZpZXdlZCBoaXMgcHJvZHVjdHMgc3RhdGlzdGljcyBncmFwaGAsXG4gICAgdXNlcklkOiByZXEudXNlci5pZCxcbiAgICBtZXRhZGF0YTogeyB9LFxuICB9O1xuICBhd2FpdCBMb2cuY3JlYXRlKGxvZ0RhdGEpO1xuICBsb2dnZXIuaW5mbyhgc2VsbGVyICR7cmVxLnVzZXIuZW1haWx9IHZpZXdlZCBoaXMgcHJvZHVjdHMgc3RhdGlzdGljcyBncmFwaGApO1xufTtcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUVBLElBQUFBLE9BQUEsR0FBQUMsc0JBQUEsQ0FBQUMsT0FBQTtBQUNBLElBQUFDLE9BQUEsR0FBQUQsT0FBQTtBQUhBOztBQUtPLE1BQU1FLFNBQVMsR0FBRyxNQUFBQSxDQUFPQyxHQUFHLEVBQUVDLEtBQUssS0FBSztFQUM3QyxNQUFNQyxPQUFPLEdBQUc7SUFDZEMsS0FBSyxFQUFFLE9BQU87SUFDZEMsT0FBTyxFQUFFSCxLQUFLLENBQUNHLE9BQU87SUFDdEJDLE1BQU0sRUFBRUwsR0FBRyxDQUFDTSxJQUFJLENBQUNDLEVBQUU7SUFDbkJDLFFBQVEsRUFBRTtNQUFFQyxXQUFXLEVBQUVULEdBQUcsQ0FBQ1U7SUFBSztFQUNwQyxDQUFDO0VBQ0QsTUFBTUMsV0FBRyxDQUFDQyxNQUFNLENBQUNWLE9BQU8sQ0FBQztFQUN6QlcsZUFBTSxDQUFDWixLQUFLLENBQUUsVUFBU0QsR0FBRyxDQUFDTSxJQUFJLENBQUNRLEtBQU0seUJBQXdCYixLQUFLLENBQUNHLE9BQVEsRUFBQyxDQUFDO0FBQ2hGLENBQUM7QUFBQ1csT0FBQSxDQUFBaEIsU0FBQSxHQUFBQSxTQUFBO0FBRUssTUFBTWlCLFlBQVksR0FBRyxNQUFPaEIsR0FBRyxJQUFLO0VBQ3pDLE1BQU1FLE9BQU8sR0FBRztJQUNkQyxLQUFLLEVBQUUsTUFBTTtJQUNiQyxPQUFPLEVBQUcsVUFBU0osR0FBRyxDQUFDTSxJQUFJLENBQUNRLEtBQU0saUNBQWdDO0lBQ2xFVCxNQUFNLEVBQUVMLEdBQUcsQ0FBQ00sSUFBSSxDQUFDQyxFQUFFO0lBQ25CQyxRQUFRLEVBQUUsQ0FBRTtFQUNkLENBQUM7RUFDRCxNQUFNRyxXQUFHLENBQUNDLE1BQU0sQ0FBQ1YsT0FBTyxDQUFDO0VBQ3pCVyxlQUFNLENBQUNJLElBQUksQ0FBRSxVQUFTakIsR0FBRyxDQUFDTSxJQUFJLENBQUNRLEtBQU0saUNBQWdDLENBQUM7QUFDeEUsQ0FBQztBQUFDQyxPQUFBLENBQUFDLFlBQUEsR0FBQUEsWUFBQTtBQUNLLE1BQU1FLGlCQUFpQixHQUFHLE1BQU9sQixHQUFHLElBQUs7RUFDOUMsTUFBTUUsT0FBTyxHQUFHO0lBQ2RDLEtBQUssRUFBRSxNQUFNO0lBQ2JDLE9BQU8sRUFBRyxVQUFTSixHQUFHLENBQUNNLElBQUksQ0FBQ1EsS0FBTSx1Q0FBc0M7SUFDeEVULE1BQU0sRUFBRUwsR0FBRyxDQUFDTSxJQUFJLENBQUNDLEVBQUU7SUFDbkJDLFFBQVEsRUFBRSxDQUFFO0VBQ2QsQ0FBQztFQUNELE1BQU1HLFdBQUcsQ0FBQ0MsTUFBTSxDQUFDVixPQUFPLENBQUM7RUFDekJXLGVBQU0sQ0FBQ0ksSUFBSSxDQUFFLFVBQVNqQixHQUFHLENBQUNNLElBQUksQ0FBQ1EsS0FBTSx1Q0FBc0MsQ0FBQztBQUM5RSxDQUFDO0FBQUNDLE9BQUEsQ0FBQUcsaUJBQUEsR0FBQUEsaUJBQUEifQ==","map":{"version":3,"names":["_logger","_interopRequireDefault","require","_models","ItemError","req","error","logData","level","message","userId","user","id","metadata","ItemRequest","body","Log","create","logger","email","exports","viewAllStats","info","viewAllStatsGraph"],"sourceRoot":"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/loggers/","sources":["status.logger.js"],"sourcesContent":["/* eslint-disable import/named */\n\nimport logger from '../configs/logger';\nimport { Log } from '../database/models';\n\nexport const ItemError = async (req, error) => {\n  const logData = {\n    level: 'error',\n    message: error.message,\n    userId: req.user.id,\n    metadata: { ItemRequest: req.body },\n  };\n  await Log.create(logData);\n  logger.error(`seller ${req.user.email} encountered an error:${error.message}`);\n};\n\nexport const viewAllStats = async (req) => {\n  const logData = {\n    level: 'info',\n    message: `seller ${req.user.email} viewed his products statistics`,\n    userId: req.user.id,\n    metadata: { },\n  };\n  await Log.create(logData);\n  logger.info(`seller ${req.user.email} viewed his products statistics`);\n};\nexport const viewAllStatsGraph = async (req) => {\n  const logData = {\n    level: 'info',\n    message: `seller ${req.user.email} viewed his products statistics graph`,\n    userId: req.user.id,\n    metadata: { },\n  };\n  await Log.create(logData);\n  logger.info(`seller ${req.user.email} viewed his products statistics graph`);\n};\n"],"mappings":";;;;;;;AAEA,IAAAA,OAAA,GAAAC,sBAAA,CAAAC,OAAA;AACA,IAAAC,OAAA,GAAAD,OAAA;AAHA;;AAKO,MAAME,SAAS,GAAG,MAAAA,CAAOC,GAAG,EAAEC,KAAK,KAAK;EAC7C,MAAMC,OAAO,GAAG;IACdC,KAAK,EAAE,OAAO;IACdC,OAAO,EAAEH,KAAK,CAACG,OAAO;IACtBC,MAAM,EAAEL,GAAG,CAACM,IAAI,CAACC,EAAE;IACnBC,QAAQ,EAAE;MAAEC,WAAW,EAAET,GAAG,CAACU;IAAK;EACpC,CAAC;EACD,MAAMC,WAAG,CAACC,MAAM,CAACV,OAAO,CAAC;EACzBW,eAAM,CAACZ,KAAK,CAAE,UAASD,GAAG,CAACM,IAAI,CAACQ,KAAM,yBAAwBb,KAAK,CAACG,OAAQ,EAAC,CAAC;AAChF,CAAC;AAACW,OAAA,CAAAhB,SAAA,GAAAA,SAAA;AAEK,MAAMiB,YAAY,GAAG,MAAOhB,GAAG,IAAK;EACzC,MAAME,OAAO,GAAG;IACdC,KAAK,EAAE,MAAM;IACbC,OAAO,EAAG,UAASJ,GAAG,CAACM,IAAI,CAACQ,KAAM,iCAAgC;IAClET,MAAM,EAAEL,GAAG,CAACM,IAAI,CAACC,EAAE;IACnBC,QAAQ,EAAE,CAAE;EACd,CAAC;EACD,MAAMG,WAAG,CAACC,MAAM,CAACV,OAAO,CAAC;EACzBW,eAAM,CAACI,IAAI,CAAE,UAASjB,GAAG,CAACM,IAAI,CAACQ,KAAM,iCAAgC,CAAC;AACxE,CAAC;AAACC,OAAA,CAAAC,YAAA,GAAAA,YAAA;AACK,MAAME,iBAAiB,GAAG,MAAOlB,GAAG,IAAK;EAC9C,MAAME,OAAO,GAAG;IACdC,KAAK,EAAE,MAAM;IACbC,OAAO,EAAG,UAASJ,GAAG,CAACM,IAAI,CAACQ,KAAM,uCAAsC;IACxET,MAAM,EAAEL,GAAG,CAACM,IAAI,CAACC,EAAE;IACnBC,QAAQ,EAAE,CAAE;EACd,CAAC;EACD,MAAMG,WAAG,CAACC,MAAM,CAACV,OAAO,CAAC;EACzBW,eAAM,CAACI,IAAI,CAAE,UAASjB,GAAG,CAACM,IAAI,CAACQ,KAAM,uCAAsC,CAAC;AAC9E,CAAC;AAACC,OAAA,CAAAG,iBAAA,GAAAA,iBAAA"}},"mtime":1682148437943},"{\"assumptions\":{},\"sourceRoot\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/middlewares/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"filename\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/middlewares/loginValidate.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/node_modules/babel-plugin-add-module-exports/lib/index.js\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-runtime\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"regenerator\":true},\"externalDependencies\":[]},{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.21.0:development":{"value":{"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = loginValidate;\nvar _login = _interopRequireDefault(require(\"../validations/login.validation\"));\n/**\n * validation function\n * @param {Object} req\n * @param {Object} res\n * @param {Object} next next to other function\n * @returns {Object} response if error\n */\nasync function loginValidate(req, res, next) {\n  const {\n    body\n  } = req;\n  const {\n    error\n  } = (0, _login.default)(body);\n  if (error) {\n    return res.status(400).json({\n      message: error.message\n    });\n  }\n  next();\n}\nmodule.exports = exports.default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfbG9naW4iLCJfaW50ZXJvcFJlcXVpcmVEZWZhdWx0IiwicmVxdWlyZSIsImxvZ2luVmFsaWRhdGUiLCJyZXEiLCJyZXMiLCJuZXh0IiwiYm9keSIsImVycm9yIiwibG9naW5WYWxpZGF0aW9uIiwic3RhdHVzIiwianNvbiIsIm1lc3NhZ2UiLCJtb2R1bGUiLCJleHBvcnRzIiwiZGVmYXVsdCJdLCJzb3VyY2VSb290IjoiL1VzZXJzL2FuZGVsYXJ3YW5kYS9EZXNrdG9wL2UtY29tbS10ZWFtLWJyb2dyYW1tZXJzLWJuL3NyYy9taWRkbGV3YXJlcy8iLCJzb3VyY2VzIjpbImxvZ2luVmFsaWRhdGUuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGxvZ2luVmFsaWRhdGlvbiBmcm9tICcuLi92YWxpZGF0aW9ucy9sb2dpbi52YWxpZGF0aW9uJztcblxuLyoqXG4gKiB2YWxpZGF0aW9uIGZ1bmN0aW9uXG4gKiBAcGFyYW0ge09iamVjdH0gcmVxXG4gKiBAcGFyYW0ge09iamVjdH0gcmVzXG4gKiBAcGFyYW0ge09iamVjdH0gbmV4dCBuZXh0IHRvIG90aGVyIGZ1bmN0aW9uXG4gKiBAcmV0dXJucyB7T2JqZWN0fSByZXNwb25zZSBpZiBlcnJvclxuICovXG5leHBvcnQgZGVmYXVsdCBhc3luYyBmdW5jdGlvbiBsb2dpblZhbGlkYXRlKHJlcSwgcmVzLCBuZXh0KSB7XG4gIGNvbnN0IHsgYm9keSB9ID0gcmVxO1xuICBjb25zdCB7IGVycm9yIH0gPSBsb2dpblZhbGlkYXRpb24oYm9keSk7XG4gIGlmIChlcnJvcikge1xuICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IG1lc3NhZ2U6IGVycm9yLm1lc3NhZ2UgfSk7XG4gIH1cbiAgbmV4dCgpO1xufVxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQUEsSUFBQUEsTUFBQSxHQUFBQyxzQkFBQSxDQUFBQyxPQUFBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDZSxlQUFlQyxhQUFhQSxDQUFDQyxHQUFHLEVBQUVDLEdBQUcsRUFBRUMsSUFBSSxFQUFFO0VBQzFELE1BQU07SUFBRUM7RUFBSyxDQUFDLEdBQUdILEdBQUc7RUFDcEIsTUFBTTtJQUFFSTtFQUFNLENBQUMsR0FBRyxJQUFBQyxjQUFlLEVBQUNGLElBQUksQ0FBQztFQUN2QyxJQUFJQyxLQUFLLEVBQUU7SUFDVCxPQUFPSCxHQUFHLENBQUNLLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQ0MsSUFBSSxDQUFDO01BQUVDLE9BQU8sRUFBRUosS0FBSyxDQUFDSTtJQUFRLENBQUMsQ0FBQztFQUN6RDtFQUNBTixJQUFJLEVBQUU7QUFDUjtBQUFDTyxNQUFBLENBQUFDLE9BQUEsR0FBQUEsT0FBQSxDQUFBQyxPQUFBIn0=","map":{"version":3,"names":["_login","_interopRequireDefault","require","loginValidate","req","res","next","body","error","loginValidation","status","json","message","module","exports","default"],"sourceRoot":"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/middlewares/","sources":["loginValidate.js"],"sourcesContent":["import loginValidation from '../validations/login.validation';\n\n/**\n * validation function\n * @param {Object} req\n * @param {Object} res\n * @param {Object} next next to other function\n * @returns {Object} response if error\n */\nexport default async function loginValidate(req, res, next) {\n  const { body } = req;\n  const { error } = loginValidation(body);\n  if (error) {\n    return res.status(400).json({ message: error.message });\n  }\n  next();\n}\n"],"mappings":";;;;;;;AAAA,IAAAA,MAAA,GAAAC,sBAAA,CAAAC,OAAA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACe,eAAeC,aAAaA,CAACC,GAAG,EAAEC,GAAG,EAAEC,IAAI,EAAE;EAC1D,MAAM;IAAEC;EAAK,CAAC,GAAGH,GAAG;EACpB,MAAM;IAAEI;EAAM,CAAC,GAAG,IAAAC,cAAe,EAACF,IAAI,CAAC;EACvC,IAAIC,KAAK,EAAE;IACT,OAAOH,GAAG,CAACK,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;MAAEC,OAAO,EAAEJ,KAAK,CAACI;IAAQ,CAAC,CAAC;EACzD;EACAN,IAAI,EAAE;AACR;AAACO,MAAA,CAAAC,OAAA,GAAAA,OAAA,CAAAC,OAAA"}},"mtime":1682148437946},"{\"assumptions\":{},\"sourceRoot\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/validations/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"filename\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/validations/login.validation.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/node_modules/babel-plugin-add-module-exports/lib/index.js\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-runtime\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"regenerator\":true},\"externalDependencies\":[]},{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.21.0:development":{"value":{"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = loginValidation;\nvar _joi = _interopRequireDefault(require(\"joi\"));\n/**\n * validating user info\n * @param {Object} data data to be validated\n * @returns {Schema} output for validation\n */\nfunction loginValidation(data) {\n  const Schema = _joi.default.object({\n    email: _joi.default.string().email().required().label('email'),\n    password: _joi.default.string().required().label('password')\n  });\n  return Schema.validate(data, {\n    abortEarly: false\n  });\n}\nmodule.exports = exports.default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfam9pIiwiX2ludGVyb3BSZXF1aXJlRGVmYXVsdCIsInJlcXVpcmUiLCJsb2dpblZhbGlkYXRpb24iLCJkYXRhIiwiU2NoZW1hIiwiam9pIiwib2JqZWN0IiwiZW1haWwiLCJzdHJpbmciLCJyZXF1aXJlZCIsImxhYmVsIiwicGFzc3dvcmQiLCJ2YWxpZGF0ZSIsImFib3J0RWFybHkiLCJtb2R1bGUiLCJleHBvcnRzIiwiZGVmYXVsdCJdLCJzb3VyY2VSb290IjoiL1VzZXJzL2FuZGVsYXJ3YW5kYS9EZXNrdG9wL2UtY29tbS10ZWFtLWJyb2dyYW1tZXJzLWJuL3NyYy92YWxpZGF0aW9ucy8iLCJzb3VyY2VzIjpbImxvZ2luLnZhbGlkYXRpb24uanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGpvaSBmcm9tICdqb2knO1xuXG4vKipcbiAqIHZhbGlkYXRpbmcgdXNlciBpbmZvXG4gKiBAcGFyYW0ge09iamVjdH0gZGF0YSBkYXRhIHRvIGJlIHZhbGlkYXRlZFxuICogQHJldHVybnMge1NjaGVtYX0gb3V0cHV0IGZvciB2YWxpZGF0aW9uXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGxvZ2luVmFsaWRhdGlvbihkYXRhKSB7XG4gIGNvbnN0IFNjaGVtYSA9IGpvaS5vYmplY3Qoe1xuICAgIGVtYWlsOiBqb2kuc3RyaW5nKCkuZW1haWwoKS5yZXF1aXJlZCgpLmxhYmVsKCdlbWFpbCcpLFxuICAgIHBhc3N3b3JkOiBqb2kuc3RyaW5nKCkucmVxdWlyZWQoKS5sYWJlbCgncGFzc3dvcmQnKSxcbiAgfSk7XG5cbiAgcmV0dXJuIFNjaGVtYS52YWxpZGF0ZShkYXRhLCB7XG4gICAgYWJvcnRFYXJseTogZmFsc2UsXG4gIH0pO1xufVxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQUEsSUFBQUEsSUFBQSxHQUFBQyxzQkFBQSxDQUFBQyxPQUFBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNlLFNBQVNDLGVBQWVBLENBQUNDLElBQUksRUFBRTtFQUM1QyxNQUFNQyxNQUFNLEdBQUdDLFlBQUcsQ0FBQ0MsTUFBTSxDQUFDO0lBQ3hCQyxLQUFLLEVBQUVGLFlBQUcsQ0FBQ0csTUFBTSxFQUFFLENBQUNELEtBQUssRUFBRSxDQUFDRSxRQUFRLEVBQUUsQ0FBQ0MsS0FBSyxDQUFDLE9BQU8sQ0FBQztJQUNyREMsUUFBUSxFQUFFTixZQUFHLENBQUNHLE1BQU0sRUFBRSxDQUFDQyxRQUFRLEVBQUUsQ0FBQ0MsS0FBSyxDQUFDLFVBQVU7RUFDcEQsQ0FBQyxDQUFDO0VBRUYsT0FBT04sTUFBTSxDQUFDUSxRQUFRLENBQUNULElBQUksRUFBRTtJQUMzQlUsVUFBVSxFQUFFO0VBQ2QsQ0FBQyxDQUFDO0FBQ0o7QUFBQ0MsTUFBQSxDQUFBQyxPQUFBLEdBQUFBLE9BQUEsQ0FBQUMsT0FBQSJ9","map":{"version":3,"names":["_joi","_interopRequireDefault","require","loginValidation","data","Schema","joi","object","email","string","required","label","password","validate","abortEarly","module","exports","default"],"sourceRoot":"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/validations/","sources":["login.validation.js"],"sourcesContent":["import joi from 'joi';\n\n/**\n * validating user info\n * @param {Object} data data to be validated\n * @returns {Schema} output for validation\n */\nexport default function loginValidation(data) {\n  const Schema = joi.object({\n    email: joi.string().email().required().label('email'),\n    password: joi.string().required().label('password'),\n  });\n\n  return Schema.validate(data, {\n    abortEarly: false,\n  });\n}\n"],"mappings":";;;;;;;AAAA,IAAAA,IAAA,GAAAC,sBAAA,CAAAC,OAAA;AAEA;AACA;AACA;AACA;AACA;AACe,SAASC,eAAeA,CAACC,IAAI,EAAE;EAC5C,MAAMC,MAAM,GAAGC,YAAG,CAACC,MAAM,CAAC;IACxBC,KAAK,EAAEF,YAAG,CAACG,MAAM,EAAE,CAACD,KAAK,EAAE,CAACE,QAAQ,EAAE,CAACC,KAAK,CAAC,OAAO,CAAC;IACrDC,QAAQ,EAAEN,YAAG,CAACG,MAAM,EAAE,CAACC,QAAQ,EAAE,CAACC,KAAK,CAAC,UAAU;EACpD,CAAC,CAAC;EAEF,OAAON,MAAM,CAACQ,QAAQ,CAACT,IAAI,EAAE;IAC3BU,UAAU,EAAE;EACd,CAAC,CAAC;AACJ;AAACC,MAAA,CAAAC,OAAA,GAAAA,OAAA,CAAAC,OAAA"}},"mtime":1682148437966},"{\"assumptions\":{},\"sourceRoot\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/middlewares/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"filename\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/middlewares/profileValidate.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/node_modules/babel-plugin-add-module-exports/lib/index.js\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-runtime\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"regenerator\":true},\"externalDependencies\":[]},{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.21.0:development":{"value":{"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = profileVatidate;\nvar _profile = _interopRequireDefault(require(\"../validations/profile.validate\"));\n/**\n * validation function\n * @param {Object} req\n * @param {Object} res\n * @param {Object} next next to other function\n * @returns {Object} response if error\n */\nasync function profileVatidate(req, res, next) {\n  const {\n    body\n  } = req;\n  const {\n    error\n  } = await (0, _profile.default)(body);\n  if (error) {\n    return res.status(400).json({\n      message: error.message\n    });\n  }\n  next();\n}\nmodule.exports = exports.default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfcHJvZmlsZSIsIl9pbnRlcm9wUmVxdWlyZURlZmF1bHQiLCJyZXF1aXJlIiwicHJvZmlsZVZhdGlkYXRlIiwicmVxIiwicmVzIiwibmV4dCIsImJvZHkiLCJlcnJvciIsInByb2ZpbGVWYWxpZGF0aW9uIiwic3RhdHVzIiwianNvbiIsIm1lc3NhZ2UiLCJtb2R1bGUiLCJleHBvcnRzIiwiZGVmYXVsdCJdLCJzb3VyY2VSb290IjoiL1VzZXJzL2FuZGVsYXJ3YW5kYS9EZXNrdG9wL2UtY29tbS10ZWFtLWJyb2dyYW1tZXJzLWJuL3NyYy9taWRkbGV3YXJlcy8iLCJzb3VyY2VzIjpbInByb2ZpbGVWYWxpZGF0ZS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgcHJvZmlsZVZhbGlkYXRpb24gZnJvbSAnLi4vdmFsaWRhdGlvbnMvcHJvZmlsZS52YWxpZGF0ZSc7XG5cbi8qKlxuICogdmFsaWRhdGlvbiBmdW5jdGlvblxuICogQHBhcmFtIHtPYmplY3R9IHJlcVxuICogQHBhcmFtIHtPYmplY3R9IHJlc1xuICogQHBhcmFtIHtPYmplY3R9IG5leHQgbmV4dCB0byBvdGhlciBmdW5jdGlvblxuICogQHJldHVybnMge09iamVjdH0gcmVzcG9uc2UgaWYgZXJyb3JcbiAqL1xuZXhwb3J0IGRlZmF1bHQgYXN5bmMgZnVuY3Rpb24gcHJvZmlsZVZhdGlkYXRlKHJlcSwgcmVzLCBuZXh0KSB7XG4gIGNvbnN0IHsgYm9keSB9ID0gcmVxO1xuICBjb25zdCB7IGVycm9yIH0gPSBhd2FpdCBwcm9maWxlVmFsaWRhdGlvbihib2R5KTtcbiAgaWYgKGVycm9yKSB7XG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgbWVzc2FnZTogZXJyb3IubWVzc2FnZSB9KTtcbiAgfVxuICBuZXh0KCk7XG59XG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBQSxJQUFBQSxRQUFBLEdBQUFDLHNCQUFBLENBQUFDLE9BQUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNlLGVBQWVDLGVBQWVBLENBQUNDLEdBQUcsRUFBRUMsR0FBRyxFQUFFQyxJQUFJLEVBQUU7RUFDNUQsTUFBTTtJQUFFQztFQUFLLENBQUMsR0FBR0gsR0FBRztFQUNwQixNQUFNO0lBQUVJO0VBQU0sQ0FBQyxHQUFHLE1BQU0sSUFBQUMsZ0JBQWlCLEVBQUNGLElBQUksQ0FBQztFQUMvQyxJQUFJQyxLQUFLLEVBQUU7SUFDVCxPQUFPSCxHQUFHLENBQUNLLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQ0MsSUFBSSxDQUFDO01BQUVDLE9BQU8sRUFBRUosS0FBSyxDQUFDSTtJQUFRLENBQUMsQ0FBQztFQUN6RDtFQUNBTixJQUFJLEVBQUU7QUFDUjtBQUFDTyxNQUFBLENBQUFDLE9BQUEsR0FBQUEsT0FBQSxDQUFBQyxPQUFBIn0=","map":{"version":3,"names":["_profile","_interopRequireDefault","require","profileVatidate","req","res","next","body","error","profileValidation","status","json","message","module","exports","default"],"sourceRoot":"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/middlewares/","sources":["profileValidate.js"],"sourcesContent":["import profileValidation from '../validations/profile.validate';\n\n/**\n * validation function\n * @param {Object} req\n * @param {Object} res\n * @param {Object} next next to other function\n * @returns {Object} response if error\n */\nexport default async function profileVatidate(req, res, next) {\n  const { body } = req;\n  const { error } = await profileValidation(body);\n  if (error) {\n    return res.status(400).json({ message: error.message });\n  }\n  next();\n}\n"],"mappings":";;;;;;;AAAA,IAAAA,QAAA,GAAAC,sBAAA,CAAAC,OAAA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACe,eAAeC,eAAeA,CAACC,GAAG,EAAEC,GAAG,EAAEC,IAAI,EAAE;EAC5D,MAAM;IAAEC;EAAK,CAAC,GAAGH,GAAG;EACpB,MAAM;IAAEI;EAAM,CAAC,GAAG,MAAM,IAAAC,gBAAiB,EAACF,IAAI,CAAC;EAC/C,IAAIC,KAAK,EAAE;IACT,OAAOH,GAAG,CAACK,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;MAAEC,OAAO,EAAEJ,KAAK,CAACI;IAAQ,CAAC,CAAC;EACzD;EACAN,IAAI,EAAE;AACR;AAACO,MAAA,CAAAC,OAAA,GAAAA,OAAA,CAAAC,OAAA"}},"mtime":1682148437952},"{\"assumptions\":{},\"sourceRoot\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/validations/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"filename\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/validations/profile.validate.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/node_modules/babel-plugin-add-module-exports/lib/index.js\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-runtime\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"regenerator\":true},\"externalDependencies\":[]},{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.21.0:development":{"value":{"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = ProfileValidation;\nvar _joi = _interopRequireDefault(require(\"joi\"));\nvar _joiPassword = require(\"joi-password\");\nconst joiPassword = _joi.default.extend(_joiPassword.joiPasswordExtendCore);\n\n/**\n * validating user info\n * @param {Object} data data to be validated\n * @returns {Schema} output for validation\n */\nasync function ProfileValidation(data) {\n  const Schema = _joi.default.object({\n    username: _joi.default.string().min(3).label('username'),\n    email: _joi.default.string().email().label('email'),\n    password: joiPassword.string().min(8).minOfLowercase(1).minOfUppercase(1).minOfNumeric(1).minOfSpecialCharacters(1).label('password'),\n    gender: _joi.default.string().lowercase().valid('male', 'female', 'both', 'none').label('gender')\n  });\n\n  // eslint-disable-next-line no-return-await\n  return await Schema.validate(data, {\n    abortEarly: false\n  });\n}\nmodule.exports = exports.default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfam9pIiwiX2ludGVyb3BSZXF1aXJlRGVmYXVsdCIsInJlcXVpcmUiLCJfam9pUGFzc3dvcmQiLCJqb2lQYXNzd29yZCIsImpvaSIsImV4dGVuZCIsImpvaVBhc3N3b3JkRXh0ZW5kQ29yZSIsIlByb2ZpbGVWYWxpZGF0aW9uIiwiZGF0YSIsIlNjaGVtYSIsIm9iamVjdCIsInVzZXJuYW1lIiwic3RyaW5nIiwibWluIiwibGFiZWwiLCJlbWFpbCIsInBhc3N3b3JkIiwibWluT2ZMb3dlcmNhc2UiLCJtaW5PZlVwcGVyY2FzZSIsIm1pbk9mTnVtZXJpYyIsIm1pbk9mU3BlY2lhbENoYXJhY3RlcnMiLCJnZW5kZXIiLCJsb3dlcmNhc2UiLCJ2YWxpZCIsInZhbGlkYXRlIiwiYWJvcnRFYXJseSIsIm1vZHVsZSIsImV4cG9ydHMiLCJkZWZhdWx0Il0sInNvdXJjZVJvb3QiOiIvVXNlcnMvYW5kZWxhcndhbmRhL0Rlc2t0b3AvZS1jb21tLXRlYW0tYnJvZ3JhbW1lcnMtYm4vc3JjL3ZhbGlkYXRpb25zLyIsInNvdXJjZXMiOlsicHJvZmlsZS52YWxpZGF0ZS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgam9pIGZyb20gJ2pvaSc7XG5pbXBvcnQgeyBqb2lQYXNzd29yZEV4dGVuZENvcmUgfSBmcm9tICdqb2ktcGFzc3dvcmQnO1xuXG5jb25zdCBqb2lQYXNzd29yZCA9IGpvaS5leHRlbmQoam9pUGFzc3dvcmRFeHRlbmRDb3JlKTtcblxuLyoqXG4gKiB2YWxpZGF0aW5nIHVzZXIgaW5mb1xuICogQHBhcmFtIHtPYmplY3R9IGRhdGEgZGF0YSB0byBiZSB2YWxpZGF0ZWRcbiAqIEByZXR1cm5zIHtTY2hlbWF9IG91dHB1dCBmb3IgdmFsaWRhdGlvblxuICovXG5leHBvcnQgZGVmYXVsdCBhc3luYyBmdW5jdGlvbiBQcm9maWxlVmFsaWRhdGlvbihkYXRhKSB7XG4gIGNvbnN0IFNjaGVtYSA9IGpvaS5vYmplY3Qoe1xuICAgIHVzZXJuYW1lOiBqb2kuc3RyaW5nKCkubWluKDMpLmxhYmVsKCd1c2VybmFtZScpLFxuICAgIGVtYWlsOiBqb2kuc3RyaW5nKCkuZW1haWwoKS5sYWJlbCgnZW1haWwnKSxcbiAgICBwYXNzd29yZDogam9pUGFzc3dvcmRcbiAgICAgIC5zdHJpbmcoKVxuICAgICAgLm1pbig4KVxuICAgICAgLm1pbk9mTG93ZXJjYXNlKDEpXG4gICAgICAubWluT2ZVcHBlcmNhc2UoMSlcbiAgICAgIC5taW5PZk51bWVyaWMoMSlcbiAgICAgIC5taW5PZlNwZWNpYWxDaGFyYWN0ZXJzKDEpXG4gICAgICAubGFiZWwoJ3Bhc3N3b3JkJyksXG4gICAgZ2VuZGVyOiBqb2lcbiAgICAgIC5zdHJpbmcoKVxuICAgICAgLmxvd2VyY2FzZSgpXG4gICAgICAudmFsaWQoXG4gICAgICAgICdtYWxlJyxcbiAgICAgICAgJ2ZlbWFsZScsXG4gICAgICAgICdib3RoJyxcbiAgICAgICAgJ25vbmUnXG4gICAgICApXG4gICAgICAubGFiZWwoJ2dlbmRlcicpXG4gIH0pO1xuXG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1yZXR1cm4tYXdhaXRcbiAgcmV0dXJuIGF3YWl0IFNjaGVtYS52YWxpZGF0ZShkYXRhLCB7XG4gICAgYWJvcnRFYXJseTogZmFsc2VcbiAgfSk7XG59XG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBQSxJQUFBQSxJQUFBLEdBQUFDLHNCQUFBLENBQUFDLE9BQUE7QUFDQSxJQUFBQyxZQUFBLEdBQUFELE9BQUE7QUFFQSxNQUFNRSxXQUFXLEdBQUdDLFlBQUcsQ0FBQ0MsTUFBTSxDQUFDQyxrQ0FBcUIsQ0FBQzs7QUFFckQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNlLGVBQWVDLGlCQUFpQkEsQ0FBQ0MsSUFBSSxFQUFFO0VBQ3BELE1BQU1DLE1BQU0sR0FBR0wsWUFBRyxDQUFDTSxNQUFNLENBQUM7SUFDeEJDLFFBQVEsRUFBRVAsWUFBRyxDQUFDUSxNQUFNLEVBQUUsQ0FBQ0MsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDQyxLQUFLLENBQUMsVUFBVSxDQUFDO0lBQy9DQyxLQUFLLEVBQUVYLFlBQUcsQ0FBQ1EsTUFBTSxFQUFFLENBQUNHLEtBQUssRUFBRSxDQUFDRCxLQUFLLENBQUMsT0FBTyxDQUFDO0lBQzFDRSxRQUFRLEVBQUViLFdBQVcsQ0FDbEJTLE1BQU0sRUFBRSxDQUNSQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQ05JLGNBQWMsQ0FBQyxDQUFDLENBQUMsQ0FDakJDLGNBQWMsQ0FBQyxDQUFDLENBQUMsQ0FDakJDLFlBQVksQ0FBQyxDQUFDLENBQUMsQ0FDZkMsc0JBQXNCLENBQUMsQ0FBQyxDQUFDLENBQ3pCTixLQUFLLENBQUMsVUFBVSxDQUFDO0lBQ3BCTyxNQUFNLEVBQUVqQixZQUFHLENBQ1JRLE1BQU0sRUFBRSxDQUNSVSxTQUFTLEVBQUUsQ0FDWEMsS0FBSyxDQUNKLE1BQU0sRUFDTixRQUFRLEVBQ1IsTUFBTSxFQUNOLE1BQU0sQ0FDUCxDQUNBVCxLQUFLLENBQUMsUUFBUTtFQUNuQixDQUFDLENBQUM7O0VBRUY7RUFDQSxPQUFPLE1BQU1MLE1BQU0sQ0FBQ2UsUUFBUSxDQUFDaEIsSUFBSSxFQUFFO0lBQ2pDaUIsVUFBVSxFQUFFO0VBQ2QsQ0FBQyxDQUFDO0FBQ0o7QUFBQ0MsTUFBQSxDQUFBQyxPQUFBLEdBQUFBLE9BQUEsQ0FBQUMsT0FBQSJ9","map":{"version":3,"names":["_joi","_interopRequireDefault","require","_joiPassword","joiPassword","joi","extend","joiPasswordExtendCore","ProfileValidation","data","Schema","object","username","string","min","label","email","password","minOfLowercase","minOfUppercase","minOfNumeric","minOfSpecialCharacters","gender","lowercase","valid","validate","abortEarly","module","exports","default"],"sourceRoot":"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/validations/","sources":["profile.validate.js"],"sourcesContent":["import joi from 'joi';\nimport { joiPasswordExtendCore } from 'joi-password';\n\nconst joiPassword = joi.extend(joiPasswordExtendCore);\n\n/**\n * validating user info\n * @param {Object} data data to be validated\n * @returns {Schema} output for validation\n */\nexport default async function ProfileValidation(data) {\n  const Schema = joi.object({\n    username: joi.string().min(3).label('username'),\n    email: joi.string().email().label('email'),\n    password: joiPassword\n      .string()\n      .min(8)\n      .minOfLowercase(1)\n      .minOfUppercase(1)\n      .minOfNumeric(1)\n      .minOfSpecialCharacters(1)\n      .label('password'),\n    gender: joi\n      .string()\n      .lowercase()\n      .valid(\n        'male',\n        'female',\n        'both',\n        'none'\n      )\n      .label('gender')\n  });\n\n  // eslint-disable-next-line no-return-await\n  return await Schema.validate(data, {\n    abortEarly: false\n  });\n}\n"],"mappings":";;;;;;;AAAA,IAAAA,IAAA,GAAAC,sBAAA,CAAAC,OAAA;AACA,IAAAC,YAAA,GAAAD,OAAA;AAEA,MAAME,WAAW,GAAGC,YAAG,CAACC,MAAM,CAACC,kCAAqB,CAAC;;AAErD;AACA;AACA;AACA;AACA;AACe,eAAeC,iBAAiBA,CAACC,IAAI,EAAE;EACpD,MAAMC,MAAM,GAAGL,YAAG,CAACM,MAAM,CAAC;IACxBC,QAAQ,EAAEP,YAAG,CAACQ,MAAM,EAAE,CAACC,GAAG,CAAC,CAAC,CAAC,CAACC,KAAK,CAAC,UAAU,CAAC;IAC/CC,KAAK,EAAEX,YAAG,CAACQ,MAAM,EAAE,CAACG,KAAK,EAAE,CAACD,KAAK,CAAC,OAAO,CAAC;IAC1CE,QAAQ,EAAEb,WAAW,CAClBS,MAAM,EAAE,CACRC,GAAG,CAAC,CAAC,CAAC,CACNI,cAAc,CAAC,CAAC,CAAC,CACjBC,cAAc,CAAC,CAAC,CAAC,CACjBC,YAAY,CAAC,CAAC,CAAC,CACfC,sBAAsB,CAAC,CAAC,CAAC,CACzBN,KAAK,CAAC,UAAU,CAAC;IACpBO,MAAM,EAAEjB,YAAG,CACRQ,MAAM,EAAE,CACRU,SAAS,EAAE,CACXC,KAAK,CACJ,MAAM,EACN,QAAQ,EACR,MAAM,EACN,MAAM,CACP,CACAT,KAAK,CAAC,QAAQ;EACnB,CAAC,CAAC;;EAEF;EACA,OAAO,MAAML,MAAM,CAACe,QAAQ,CAAChB,IAAI,EAAE;IACjCiB,UAAU,EAAE;EACd,CAAC,CAAC;AACJ;AAACC,MAAA,CAAAC,OAAA,GAAAA,OAAA,CAAAC,OAAA"}},"mtime":1682148437967},"{\"assumptions\":{},\"sourceRoot\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/middlewares/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"filename\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/middlewares/mfaValidate.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/node_modules/babel-plugin-add-module-exports/lib/index.js\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-runtime\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"regenerator\":true},\"externalDependencies\":[]},{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.21.0:development":{"value":{"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = mfaValidate;\nvar _mfaValidation = _interopRequireDefault(require(\"../validations/mfaValidation\"));\n/**\n * validation function\n * @param {Object} req\n * @param {Object} res\n * @param {Object} next next to other function\n * @returns {Object} response if error\n */\nasync function mfaValidate(req, res, next) {\n  const {\n    body\n  } = req;\n  const {\n    error\n  } = (0, _mfaValidation.default)(body);\n  if (error) {\n    return res.status(400).json({\n      message: error.message\n    });\n  }\n  next();\n}\nmodule.exports = exports.default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfbWZhVmFsaWRhdGlvbiIsIl9pbnRlcm9wUmVxdWlyZURlZmF1bHQiLCJyZXF1aXJlIiwibWZhVmFsaWRhdGUiLCJyZXEiLCJyZXMiLCJuZXh0IiwiYm9keSIsImVycm9yIiwibWZhVmFsaWRhdGlvbiIsInN0YXR1cyIsImpzb24iLCJtZXNzYWdlIiwibW9kdWxlIiwiZXhwb3J0cyIsImRlZmF1bHQiXSwic291cmNlUm9vdCI6Ii9Vc2Vycy9hbmRlbGFyd2FuZGEvRGVza3RvcC9lLWNvbW0tdGVhbS1icm9ncmFtbWVycy1ibi9zcmMvbWlkZGxld2FyZXMvIiwic291cmNlcyI6WyJtZmFWYWxpZGF0ZS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgbWZhVmFsaWRhdGlvbiBmcm9tICcuLi92YWxpZGF0aW9ucy9tZmFWYWxpZGF0aW9uJztcblxuLyoqXG4gKiB2YWxpZGF0aW9uIGZ1bmN0aW9uXG4gKiBAcGFyYW0ge09iamVjdH0gcmVxXG4gKiBAcGFyYW0ge09iamVjdH0gcmVzXG4gKiBAcGFyYW0ge09iamVjdH0gbmV4dCBuZXh0IHRvIG90aGVyIGZ1bmN0aW9uXG4gKiBAcmV0dXJucyB7T2JqZWN0fSByZXNwb25zZSBpZiBlcnJvclxuICovXG5leHBvcnQgZGVmYXVsdCBhc3luYyBmdW5jdGlvbiBtZmFWYWxpZGF0ZShyZXEsIHJlcywgbmV4dCkge1xuICBjb25zdCB7IGJvZHkgfSA9IHJlcTtcbiAgY29uc3QgeyBlcnJvciB9ID0gbWZhVmFsaWRhdGlvbihib2R5KTtcbiAgaWYgKGVycm9yKSB7XG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgbWVzc2FnZTogZXJyb3IubWVzc2FnZSB9KTtcbiAgfVxuICBuZXh0KCk7XG59XG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBQSxJQUFBQSxjQUFBLEdBQUFDLHNCQUFBLENBQUFDLE9BQUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNlLGVBQWVDLFdBQVdBLENBQUNDLEdBQUcsRUFBRUMsR0FBRyxFQUFFQyxJQUFJLEVBQUU7RUFDeEQsTUFBTTtJQUFFQztFQUFLLENBQUMsR0FBR0gsR0FBRztFQUNwQixNQUFNO0lBQUVJO0VBQU0sQ0FBQyxHQUFHLElBQUFDLHNCQUFhLEVBQUNGLElBQUksQ0FBQztFQUNyQyxJQUFJQyxLQUFLLEVBQUU7SUFDVCxPQUFPSCxHQUFHLENBQUNLLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQ0MsSUFBSSxDQUFDO01BQUVDLE9BQU8sRUFBRUosS0FBSyxDQUFDSTtJQUFRLENBQUMsQ0FBQztFQUN6RDtFQUNBTixJQUFJLEVBQUU7QUFDUjtBQUFDTyxNQUFBLENBQUFDLE9BQUEsR0FBQUEsT0FBQSxDQUFBQyxPQUFBIn0=","map":{"version":3,"names":["_mfaValidation","_interopRequireDefault","require","mfaValidate","req","res","next","body","error","mfaValidation","status","json","message","module","exports","default"],"sourceRoot":"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/middlewares/","sources":["mfaValidate.js"],"sourcesContent":["import mfaValidation from '../validations/mfaValidation';\n\n/**\n * validation function\n * @param {Object} req\n * @param {Object} res\n * @param {Object} next next to other function\n * @returns {Object} response if error\n */\nexport default async function mfaValidate(req, res, next) {\n  const { body } = req;\n  const { error } = mfaValidation(body);\n  if (error) {\n    return res.status(400).json({ message: error.message });\n  }\n  next();\n}\n"],"mappings":";;;;;;;AAAA,IAAAA,cAAA,GAAAC,sBAAA,CAAAC,OAAA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACe,eAAeC,WAAWA,CAACC,GAAG,EAAEC,GAAG,EAAEC,IAAI,EAAE;EACxD,MAAM;IAAEC;EAAK,CAAC,GAAGH,GAAG;EACpB,MAAM;IAAEI;EAAM,CAAC,GAAG,IAAAC,sBAAa,EAACF,IAAI,CAAC;EACrC,IAAIC,KAAK,EAAE;IACT,OAAOH,GAAG,CAACK,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;MAAEC,OAAO,EAAEJ,KAAK,CAACI;IAAQ,CAAC,CAAC;EACzD;EACAN,IAAI,EAAE;AACR;AAACO,MAAA,CAAAC,OAAA,GAAAA,OAAA,CAAAC,OAAA"}},"mtime":1682148437946},"{\"assumptions\":{},\"sourceRoot\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/validations/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"filename\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/validations/mfaValidation.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/node_modules/babel-plugin-add-module-exports/lib/index.js\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-runtime\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"regenerator\":true},\"externalDependencies\":[]},{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.21.0:development":{"value":{"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = mfaValidation;\nvar _joi = _interopRequireDefault(require(\"joi\"));\n/**\n * validating user info\n * @param {Object} data data to be validated\n * @returns {Schema} output for validation\n */\nfunction mfaValidation(data) {\n  const Schema = _joi.default.object({\n    email: _joi.default.string().email().required().label('email'),\n    mfa_code: _joi.default.number().required().label('mfa_code')\n  });\n  return Schema.validate(data, {\n    abortEarly: false\n  });\n}\nmodule.exports = exports.default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfam9pIiwiX2ludGVyb3BSZXF1aXJlRGVmYXVsdCIsInJlcXVpcmUiLCJtZmFWYWxpZGF0aW9uIiwiZGF0YSIsIlNjaGVtYSIsImpvaSIsIm9iamVjdCIsImVtYWlsIiwic3RyaW5nIiwicmVxdWlyZWQiLCJsYWJlbCIsIm1mYV9jb2RlIiwibnVtYmVyIiwidmFsaWRhdGUiLCJhYm9ydEVhcmx5IiwibW9kdWxlIiwiZXhwb3J0cyIsImRlZmF1bHQiXSwic291cmNlUm9vdCI6Ii9Vc2Vycy9hbmRlbGFyd2FuZGEvRGVza3RvcC9lLWNvbW0tdGVhbS1icm9ncmFtbWVycy1ibi9zcmMvdmFsaWRhdGlvbnMvIiwic291cmNlcyI6WyJtZmFWYWxpZGF0aW9uLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBqb2kgZnJvbSAnam9pJztcblxuLyoqXG4gKiB2YWxpZGF0aW5nIHVzZXIgaW5mb1xuICogQHBhcmFtIHtPYmplY3R9IGRhdGEgZGF0YSB0byBiZSB2YWxpZGF0ZWRcbiAqIEByZXR1cm5zIHtTY2hlbWF9IG91dHB1dCBmb3IgdmFsaWRhdGlvblxuICovXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBtZmFWYWxpZGF0aW9uKGRhdGEpIHtcbiAgY29uc3QgU2NoZW1hID0gam9pLm9iamVjdCh7XG4gICAgZW1haWw6IGpvaS5zdHJpbmcoKS5lbWFpbCgpLnJlcXVpcmVkKCkubGFiZWwoJ2VtYWlsJyksXG4gICAgbWZhX2NvZGU6IGpvaS5udW1iZXIoKS5yZXF1aXJlZCgpLmxhYmVsKCdtZmFfY29kZScpLFxuICB9KTtcblxuICByZXR1cm4gU2NoZW1hLnZhbGlkYXRlKGRhdGEsIHtcbiAgICBhYm9ydEVhcmx5OiBmYWxzZSxcbiAgfSk7XG59XG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBQSxJQUFBQSxJQUFBLEdBQUFDLHNCQUFBLENBQUFDLE9BQUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ2UsU0FBU0MsYUFBYUEsQ0FBQ0MsSUFBSSxFQUFFO0VBQzFDLE1BQU1DLE1BQU0sR0FBR0MsWUFBRyxDQUFDQyxNQUFNLENBQUM7SUFDeEJDLEtBQUssRUFBRUYsWUFBRyxDQUFDRyxNQUFNLEVBQUUsQ0FBQ0QsS0FBSyxFQUFFLENBQUNFLFFBQVEsRUFBRSxDQUFDQyxLQUFLLENBQUMsT0FBTyxDQUFDO0lBQ3JEQyxRQUFRLEVBQUVOLFlBQUcsQ0FBQ08sTUFBTSxFQUFFLENBQUNILFFBQVEsRUFBRSxDQUFDQyxLQUFLLENBQUMsVUFBVTtFQUNwRCxDQUFDLENBQUM7RUFFRixPQUFPTixNQUFNLENBQUNTLFFBQVEsQ0FBQ1YsSUFBSSxFQUFFO0lBQzNCVyxVQUFVLEVBQUU7RUFDZCxDQUFDLENBQUM7QUFDSjtBQUFDQyxNQUFBLENBQUFDLE9BQUEsR0FBQUEsT0FBQSxDQUFBQyxPQUFBIn0=","map":{"version":3,"names":["_joi","_interopRequireDefault","require","mfaValidation","data","Schema","joi","object","email","string","required","label","mfa_code","number","validate","abortEarly","module","exports","default"],"sourceRoot":"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/validations/","sources":["mfaValidation.js"],"sourcesContent":["import joi from 'joi';\n\n/**\n * validating user info\n * @param {Object} data data to be validated\n * @returns {Schema} output for validation\n */\nexport default function mfaValidation(data) {\n  const Schema = joi.object({\n    email: joi.string().email().required().label('email'),\n    mfa_code: joi.number().required().label('mfa_code'),\n  });\n\n  return Schema.validate(data, {\n    abortEarly: false,\n  });\n}\n"],"mappings":";;;;;;;AAAA,IAAAA,IAAA,GAAAC,sBAAA,CAAAC,OAAA;AAEA;AACA;AACA;AACA;AACA;AACe,SAASC,aAAaA,CAACC,IAAI,EAAE;EAC1C,MAAMC,MAAM,GAAGC,YAAG,CAACC,MAAM,CAAC;IACxBC,KAAK,EAAEF,YAAG,CAACG,MAAM,EAAE,CAACD,KAAK,EAAE,CAACE,QAAQ,EAAE,CAACC,KAAK,CAAC,OAAO,CAAC;IACrDC,QAAQ,EAAEN,YAAG,CAACO,MAAM,EAAE,CAACH,QAAQ,EAAE,CAACC,KAAK,CAAC,UAAU;EACpD,CAAC,CAAC;EAEF,OAAON,MAAM,CAACS,QAAQ,CAACV,IAAI,EAAE;IAC3BW,UAAU,EAAE;EACd,CAAC,CAAC;AACJ;AAACC,MAAA,CAAAC,OAAA,GAAAA,OAAA,CAAAC,OAAA"}},"mtime":1682148437966},"{\"assumptions\":{},\"sourceRoot\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/middlewares/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"filename\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/middlewares/signupValidate.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/node_modules/babel-plugin-add-module-exports/lib/index.js\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-runtime\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"regenerator\":true},\"externalDependencies\":[]},{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.21.0:development":{"value":{"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = signupVatidate;\nvar _signup = _interopRequireDefault(require(\"../validations/signup.validation\"));\n/**\n * validation function\n * @param {Object} req\n * @param {Object} res\n * @param {Object} next next to other function\n * @returns {Object} response if error\n */\nasync function signupVatidate(req, res, next) {\n  const {\n    body\n  } = req;\n  const {\n    error\n  } = await (0, _signup.default)(body);\n  if (error) {\n    return res.status(400).json({\n      message: error.message\n    });\n  }\n  next();\n}\nmodule.exports = exports.default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfc2lnbnVwIiwiX2ludGVyb3BSZXF1aXJlRGVmYXVsdCIsInJlcXVpcmUiLCJzaWdudXBWYXRpZGF0ZSIsInJlcSIsInJlcyIsIm5leHQiLCJib2R5IiwiZXJyb3IiLCJTaWdudXBWYWxpZGF0aW9uIiwic3RhdHVzIiwianNvbiIsIm1lc3NhZ2UiLCJtb2R1bGUiLCJleHBvcnRzIiwiZGVmYXVsdCJdLCJzb3VyY2VSb290IjoiL1VzZXJzL2FuZGVsYXJ3YW5kYS9EZXNrdG9wL2UtY29tbS10ZWFtLWJyb2dyYW1tZXJzLWJuL3NyYy9taWRkbGV3YXJlcy8iLCJzb3VyY2VzIjpbInNpZ251cFZhbGlkYXRlLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBTaWdudXBWYWxpZGF0aW9uIGZyb20gJy4uL3ZhbGlkYXRpb25zL3NpZ251cC52YWxpZGF0aW9uJztcblxuLyoqXG4gKiB2YWxpZGF0aW9uIGZ1bmN0aW9uXG4gKiBAcGFyYW0ge09iamVjdH0gcmVxXG4gKiBAcGFyYW0ge09iamVjdH0gcmVzXG4gKiBAcGFyYW0ge09iamVjdH0gbmV4dCBuZXh0IHRvIG90aGVyIGZ1bmN0aW9uXG4gKiBAcmV0dXJucyB7T2JqZWN0fSByZXNwb25zZSBpZiBlcnJvclxuICovXG5leHBvcnQgZGVmYXVsdCBhc3luYyBmdW5jdGlvbiBzaWdudXBWYXRpZGF0ZShyZXEsIHJlcywgbmV4dCkge1xuICBjb25zdCB7IGJvZHkgfSA9IHJlcTtcbiAgY29uc3QgeyBlcnJvciB9ID0gYXdhaXQgU2lnbnVwVmFsaWRhdGlvbihib2R5KTtcbiAgaWYgKGVycm9yKSB7XG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgbWVzc2FnZTogZXJyb3IubWVzc2FnZSB9KTtcbiAgfVxuICBuZXh0KCk7XG59XG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBQSxJQUFBQSxPQUFBLEdBQUFDLHNCQUFBLENBQUFDLE9BQUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNlLGVBQWVDLGNBQWNBLENBQUNDLEdBQUcsRUFBRUMsR0FBRyxFQUFFQyxJQUFJLEVBQUU7RUFDM0QsTUFBTTtJQUFFQztFQUFLLENBQUMsR0FBR0gsR0FBRztFQUNwQixNQUFNO0lBQUVJO0VBQU0sQ0FBQyxHQUFHLE1BQU0sSUFBQUMsZUFBZ0IsRUFBQ0YsSUFBSSxDQUFDO0VBQzlDLElBQUlDLEtBQUssRUFBRTtJQUNULE9BQU9ILEdBQUcsQ0FBQ0ssTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDQyxJQUFJLENBQUM7TUFBRUMsT0FBTyxFQUFFSixLQUFLLENBQUNJO0lBQVEsQ0FBQyxDQUFDO0VBQ3pEO0VBQ0FOLElBQUksRUFBRTtBQUNSO0FBQUNPLE1BQUEsQ0FBQUMsT0FBQSxHQUFBQSxPQUFBLENBQUFDLE9BQUEifQ==","map":{"version":3,"names":["_signup","_interopRequireDefault","require","signupVatidate","req","res","next","body","error","SignupValidation","status","json","message","module","exports","default"],"sourceRoot":"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/middlewares/","sources":["signupValidate.js"],"sourcesContent":["import SignupValidation from '../validations/signup.validation';\n\n/**\n * validation function\n * @param {Object} req\n * @param {Object} res\n * @param {Object} next next to other function\n * @returns {Object} response if error\n */\nexport default async function signupVatidate(req, res, next) {\n  const { body } = req;\n  const { error } = await SignupValidation(body);\n  if (error) {\n    return res.status(400).json({ message: error.message });\n  }\n  next();\n}\n"],"mappings":";;;;;;;AAAA,IAAAA,OAAA,GAAAC,sBAAA,CAAAC,OAAA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACe,eAAeC,cAAcA,CAACC,GAAG,EAAEC,GAAG,EAAEC,IAAI,EAAE;EAC3D,MAAM;IAAEC;EAAK,CAAC,GAAGH,GAAG;EACpB,MAAM;IAAEI;EAAM,CAAC,GAAG,MAAM,IAAAC,eAAgB,EAACF,IAAI,CAAC;EAC9C,IAAIC,KAAK,EAAE;IACT,OAAOH,GAAG,CAACK,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;MAAEC,OAAO,EAAEJ,KAAK,CAACI;IAAQ,CAAC,CAAC;EACzD;EACAN,IAAI,EAAE;AACR;AAACO,MAAA,CAAAC,OAAA,GAAAA,OAAA,CAAAC,OAAA"}},"mtime":1682148437953},"{\"assumptions\":{},\"sourceRoot\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/validations/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"filename\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/validations/signup.validation.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/node_modules/babel-plugin-add-module-exports/lib/index.js\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-runtime\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"regenerator\":true},\"externalDependencies\":[]},{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.21.0:development":{"value":{"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = SignupValidation;\nvar _joi = _interopRequireDefault(require(\"joi\"));\nvar _joiPassword = require(\"joi-password\");\nconst joiPassword = _joi.default.extend(_joiPassword.joiPasswordExtendCore);\n\n/**\n * validating user info\n * @param {Object} data data to be validated\n * @returns {Schema} output for validation\n */\nasync function SignupValidation(data) {\n  const Schema = _joi.default.object({\n    username: _joi.default.string().min(3).required().label('username'),\n    email: _joi.default.string().email().required().label('email'),\n    password: joiPassword.string().min(8).minOfLowercase(1).minOfUppercase(1).minOfNumeric(1).minOfSpecialCharacters(1).required().label('password'),\n    gender: _joi.default.string().lowercase().valid('male', 'female', 'both', 'none').label('gender')\n  });\n\n  // eslint-disable-next-line no-return-await\n  return await Schema.validate(data, {\n    abortEarly: false\n  });\n}\nmodule.exports = exports.default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfam9pIiwiX2ludGVyb3BSZXF1aXJlRGVmYXVsdCIsInJlcXVpcmUiLCJfam9pUGFzc3dvcmQiLCJqb2lQYXNzd29yZCIsImpvaSIsImV4dGVuZCIsImpvaVBhc3N3b3JkRXh0ZW5kQ29yZSIsIlNpZ251cFZhbGlkYXRpb24iLCJkYXRhIiwiU2NoZW1hIiwib2JqZWN0IiwidXNlcm5hbWUiLCJzdHJpbmciLCJtaW4iLCJyZXF1aXJlZCIsImxhYmVsIiwiZW1haWwiLCJwYXNzd29yZCIsIm1pbk9mTG93ZXJjYXNlIiwibWluT2ZVcHBlcmNhc2UiLCJtaW5PZk51bWVyaWMiLCJtaW5PZlNwZWNpYWxDaGFyYWN0ZXJzIiwiZ2VuZGVyIiwibG93ZXJjYXNlIiwidmFsaWQiLCJ2YWxpZGF0ZSIsImFib3J0RWFybHkiLCJtb2R1bGUiLCJleHBvcnRzIiwiZGVmYXVsdCJdLCJzb3VyY2VSb290IjoiL1VzZXJzL2FuZGVsYXJ3YW5kYS9EZXNrdG9wL2UtY29tbS10ZWFtLWJyb2dyYW1tZXJzLWJuL3NyYy92YWxpZGF0aW9ucy8iLCJzb3VyY2VzIjpbInNpZ251cC52YWxpZGF0aW9uLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBqb2kgZnJvbSAnam9pJztcbmltcG9ydCB7IGpvaVBhc3N3b3JkRXh0ZW5kQ29yZSB9IGZyb20gJ2pvaS1wYXNzd29yZCc7XG5cbmNvbnN0IGpvaVBhc3N3b3JkID0gam9pLmV4dGVuZChqb2lQYXNzd29yZEV4dGVuZENvcmUpO1xuXG4vKipcbiAqIHZhbGlkYXRpbmcgdXNlciBpbmZvXG4gKiBAcGFyYW0ge09iamVjdH0gZGF0YSBkYXRhIHRvIGJlIHZhbGlkYXRlZFxuICogQHJldHVybnMge1NjaGVtYX0gb3V0cHV0IGZvciB2YWxpZGF0aW9uXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGFzeW5jIGZ1bmN0aW9uIFNpZ251cFZhbGlkYXRpb24oZGF0YSkge1xuICBjb25zdCBTY2hlbWEgPSBqb2kub2JqZWN0KHtcbiAgICB1c2VybmFtZTogam9pLnN0cmluZygpLm1pbigzKS5yZXF1aXJlZCgpLmxhYmVsKCd1c2VybmFtZScpLFxuICAgIGVtYWlsOiBqb2kuc3RyaW5nKCkuZW1haWwoKS5yZXF1aXJlZCgpLmxhYmVsKCdlbWFpbCcpLFxuICAgIHBhc3N3b3JkOiBqb2lQYXNzd29yZFxuICAgICAgLnN0cmluZygpXG4gICAgICAubWluKDgpXG4gICAgICAubWluT2ZMb3dlcmNhc2UoMSlcbiAgICAgIC5taW5PZlVwcGVyY2FzZSgxKVxuICAgICAgLm1pbk9mTnVtZXJpYygxKVxuICAgICAgLm1pbk9mU3BlY2lhbENoYXJhY3RlcnMoMSlcbiAgICAgIC5yZXF1aXJlZCgpXG4gICAgICAubGFiZWwoJ3Bhc3N3b3JkJyksXG4gICAgZ2VuZGVyOiBqb2lcbiAgICAgIC5zdHJpbmcoKVxuICAgICAgLmxvd2VyY2FzZSgpXG4gICAgICAudmFsaWQoXG4gICAgICAgICdtYWxlJyxcbiAgICAgICAgJ2ZlbWFsZScsXG4gICAgICAgICdib3RoJyxcbiAgICAgICAgJ25vbmUnXG4gICAgICApXG4gICAgICAubGFiZWwoJ2dlbmRlcicpXG4gIH0pO1xuXG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1yZXR1cm4tYXdhaXRcbiAgcmV0dXJuIGF3YWl0IFNjaGVtYS52YWxpZGF0ZShkYXRhLCB7XG4gICAgYWJvcnRFYXJseTogZmFsc2VcbiAgfSk7XG59XG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBQSxJQUFBQSxJQUFBLEdBQUFDLHNCQUFBLENBQUFDLE9BQUE7QUFDQSxJQUFBQyxZQUFBLEdBQUFELE9BQUE7QUFFQSxNQUFNRSxXQUFXLEdBQUdDLFlBQUcsQ0FBQ0MsTUFBTSxDQUFDQyxrQ0FBcUIsQ0FBQzs7QUFFckQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNlLGVBQWVDLGdCQUFnQkEsQ0FBQ0MsSUFBSSxFQUFFO0VBQ25ELE1BQU1DLE1BQU0sR0FBR0wsWUFBRyxDQUFDTSxNQUFNLENBQUM7SUFDeEJDLFFBQVEsRUFBRVAsWUFBRyxDQUFDUSxNQUFNLEVBQUUsQ0FBQ0MsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDQyxRQUFRLEVBQUUsQ0FBQ0MsS0FBSyxDQUFDLFVBQVUsQ0FBQztJQUMxREMsS0FBSyxFQUFFWixZQUFHLENBQUNRLE1BQU0sRUFBRSxDQUFDSSxLQUFLLEVBQUUsQ0FBQ0YsUUFBUSxFQUFFLENBQUNDLEtBQUssQ0FBQyxPQUFPLENBQUM7SUFDckRFLFFBQVEsRUFBRWQsV0FBVyxDQUNsQlMsTUFBTSxFQUFFLENBQ1JDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FDTkssY0FBYyxDQUFDLENBQUMsQ0FBQyxDQUNqQkMsY0FBYyxDQUFDLENBQUMsQ0FBQyxDQUNqQkMsWUFBWSxDQUFDLENBQUMsQ0FBQyxDQUNmQyxzQkFBc0IsQ0FBQyxDQUFDLENBQUMsQ0FDekJQLFFBQVEsRUFBRSxDQUNWQyxLQUFLLENBQUMsVUFBVSxDQUFDO0lBQ3BCTyxNQUFNLEVBQUVsQixZQUFHLENBQ1JRLE1BQU0sRUFBRSxDQUNSVyxTQUFTLEVBQUUsQ0FDWEMsS0FBSyxDQUNKLE1BQU0sRUFDTixRQUFRLEVBQ1IsTUFBTSxFQUNOLE1BQU0sQ0FDUCxDQUNBVCxLQUFLLENBQUMsUUFBUTtFQUNuQixDQUFDLENBQUM7O0VBRUY7RUFDQSxPQUFPLE1BQU1OLE1BQU0sQ0FBQ2dCLFFBQVEsQ0FBQ2pCLElBQUksRUFBRTtJQUNqQ2tCLFVBQVUsRUFBRTtFQUNkLENBQUMsQ0FBQztBQUNKO0FBQUNDLE1BQUEsQ0FBQUMsT0FBQSxHQUFBQSxPQUFBLENBQUFDLE9BQUEifQ==","map":{"version":3,"names":["_joi","_interopRequireDefault","require","_joiPassword","joiPassword","joi","extend","joiPasswordExtendCore","SignupValidation","data","Schema","object","username","string","min","required","label","email","password","minOfLowercase","minOfUppercase","minOfNumeric","minOfSpecialCharacters","gender","lowercase","valid","validate","abortEarly","module","exports","default"],"sourceRoot":"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/validations/","sources":["signup.validation.js"],"sourcesContent":["import joi from 'joi';\nimport { joiPasswordExtendCore } from 'joi-password';\n\nconst joiPassword = joi.extend(joiPasswordExtendCore);\n\n/**\n * validating user info\n * @param {Object} data data to be validated\n * @returns {Schema} output for validation\n */\nexport default async function SignupValidation(data) {\n  const Schema = joi.object({\n    username: joi.string().min(3).required().label('username'),\n    email: joi.string().email().required().label('email'),\n    password: joiPassword\n      .string()\n      .min(8)\n      .minOfLowercase(1)\n      .minOfUppercase(1)\n      .minOfNumeric(1)\n      .minOfSpecialCharacters(1)\n      .required()\n      .label('password'),\n    gender: joi\n      .string()\n      .lowercase()\n      .valid(\n        'male',\n        'female',\n        'both',\n        'none'\n      )\n      .label('gender')\n  });\n\n  // eslint-disable-next-line no-return-await\n  return await Schema.validate(data, {\n    abortEarly: false\n  });\n}\n"],"mappings":";;;;;;;AAAA,IAAAA,IAAA,GAAAC,sBAAA,CAAAC,OAAA;AACA,IAAAC,YAAA,GAAAD,OAAA;AAEA,MAAME,WAAW,GAAGC,YAAG,CAACC,MAAM,CAACC,kCAAqB,CAAC;;AAErD;AACA;AACA;AACA;AACA;AACe,eAAeC,gBAAgBA,CAACC,IAAI,EAAE;EACnD,MAAMC,MAAM,GAAGL,YAAG,CAACM,MAAM,CAAC;IACxBC,QAAQ,EAAEP,YAAG,CAACQ,MAAM,EAAE,CAACC,GAAG,CAAC,CAAC,CAAC,CAACC,QAAQ,EAAE,CAACC,KAAK,CAAC,UAAU,CAAC;IAC1DC,KAAK,EAAEZ,YAAG,CAACQ,MAAM,EAAE,CAACI,KAAK,EAAE,CAACF,QAAQ,EAAE,CAACC,KAAK,CAAC,OAAO,CAAC;IACrDE,QAAQ,EAAEd,WAAW,CAClBS,MAAM,EAAE,CACRC,GAAG,CAAC,CAAC,CAAC,CACNK,cAAc,CAAC,CAAC,CAAC,CACjBC,cAAc,CAAC,CAAC,CAAC,CACjBC,YAAY,CAAC,CAAC,CAAC,CACfC,sBAAsB,CAAC,CAAC,CAAC,CACzBP,QAAQ,EAAE,CACVC,KAAK,CAAC,UAAU,CAAC;IACpBO,MAAM,EAAElB,YAAG,CACRQ,MAAM,EAAE,CACRW,SAAS,EAAE,CACXC,KAAK,CACJ,MAAM,EACN,QAAQ,EACR,MAAM,EACN,MAAM,CACP,CACAT,KAAK,CAAC,QAAQ;EACnB,CAAC,CAAC;;EAEF;EACA,OAAO,MAAMN,MAAM,CAACgB,QAAQ,CAACjB,IAAI,EAAE;IACjCkB,UAAU,EAAE;EACd,CAAC,CAAC;AACJ;AAACC,MAAA,CAAAC,OAAA,GAAAA,OAAA,CAAAC,OAAA"}},"mtime":1682148437968},"{\"assumptions\":{},\"sourceRoot\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/middlewares/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"filename\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/middlewares/Checkrole.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/node_modules/babel-plugin-add-module-exports/lib/index.js\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-runtime\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"regenerator\":true},\"externalDependencies\":[]},{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.21.0:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nconst checkRole = roles => (req, res, next) => {\n  try {\n    if (roles.includes(req.user.role)) {\n      next();\n    } else {\n      return res.status(401).json({\n        status: 401,\n        message: `You are not a ${roles.join()}`\n      });\n    }\n  } catch (error) {\n    return res.status(500).json({\n      status: 500,\n      message: 'Server error'\n    });\n  }\n};\nvar _default = checkRole;\nexports.default = _default;\nmodule.exports = exports.default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJjaGVja1JvbGUiLCJyb2xlcyIsInJlcSIsInJlcyIsIm5leHQiLCJpbmNsdWRlcyIsInVzZXIiLCJyb2xlIiwic3RhdHVzIiwianNvbiIsIm1lc3NhZ2UiLCJqb2luIiwiZXJyb3IiLCJfZGVmYXVsdCIsImV4cG9ydHMiLCJkZWZhdWx0IiwibW9kdWxlIl0sInNvdXJjZVJvb3QiOiIvVXNlcnMvYW5kZWxhcndhbmRhL0Rlc2t0b3AvZS1jb21tLXRlYW0tYnJvZ3JhbW1lcnMtYm4vc3JjL21pZGRsZXdhcmVzLyIsInNvdXJjZXMiOlsiQ2hlY2tyb2xlLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IGNoZWNrUm9sZSA9IChyb2xlcykgPT4gKHJlcSwgcmVzLCBuZXh0KSA9PiB7XG4gIHRyeSB7XG4gICAgaWYgKHJvbGVzLmluY2x1ZGVzKHJlcS51c2VyLnJvbGUpKSB7XG4gICAgICBuZXh0KCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMSkuanNvbih7XG4gICAgICAgIHN0YXR1czogNDAxLFxuICAgICAgICBtZXNzYWdlOiBgWW91IGFyZSBub3QgYSAke3JvbGVzLmpvaW4oKX1gLFxuICAgICAgfSk7XG4gICAgfVxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIHJldHVybiByZXMuc3RhdHVzKDUwMCkuanNvbih7IHN0YXR1czogNTAwLCBtZXNzYWdlOiAnU2VydmVyIGVycm9yJyB9KTtcbiAgfVxufTtcblxuZXhwb3J0IGRlZmF1bHQgY2hlY2tSb2xlO1xuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7QUFBQSxNQUFNQSxTQUFTLEdBQUlDLEtBQUssSUFBSyxDQUFDQyxHQUFHLEVBQUVDLEdBQUcsRUFBRUMsSUFBSSxLQUFLO0VBQy9DLElBQUk7SUFDRixJQUFJSCxLQUFLLENBQUNJLFFBQVEsQ0FBQ0gsR0FBRyxDQUFDSSxJQUFJLENBQUNDLElBQUksQ0FBQyxFQUFFO01BQ2pDSCxJQUFJLEVBQUU7SUFDUixDQUFDLE1BQU07TUFDTCxPQUFPRCxHQUFHLENBQUNLLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQ0MsSUFBSSxDQUFDO1FBQzFCRCxNQUFNLEVBQUUsR0FBRztRQUNYRSxPQUFPLEVBQUcsaUJBQWdCVCxLQUFLLENBQUNVLElBQUksRUFBRztNQUN6QyxDQUFDLENBQUM7SUFDSjtFQUNGLENBQUMsQ0FBQyxPQUFPQyxLQUFLLEVBQUU7SUFDZCxPQUFPVCxHQUFHLENBQUNLLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQ0MsSUFBSSxDQUFDO01BQUVELE1BQU0sRUFBRSxHQUFHO01BQUVFLE9BQU8sRUFBRTtJQUFlLENBQUMsQ0FBQztFQUN2RTtBQUNGLENBQUM7QUFBQyxJQUFBRyxRQUFBLEdBRWFiLFNBQVM7QUFBQWMsT0FBQSxDQUFBQyxPQUFBLEdBQUFGLFFBQUE7QUFBQUcsTUFBQSxDQUFBRixPQUFBLEdBQUFBLE9BQUEsQ0FBQUMsT0FBQSJ9","map":{"version":3,"names":["checkRole","roles","req","res","next","includes","user","role","status","json","message","join","error","_default","exports","default","module"],"sourceRoot":"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/middlewares/","sources":["Checkrole.js"],"sourcesContent":["const checkRole = (roles) => (req, res, next) => {\n  try {\n    if (roles.includes(req.user.role)) {\n      next();\n    } else {\n      return res.status(401).json({\n        status: 401,\n        message: `You are not a ${roles.join()}`,\n      });\n    }\n  } catch (error) {\n    return res.status(500).json({ status: 500, message: 'Server error' });\n  }\n};\n\nexport default checkRole;\n"],"mappings":";;;;;;AAAA,MAAMA,SAAS,GAAIC,KAAK,IAAK,CAACC,GAAG,EAAEC,GAAG,EAAEC,IAAI,KAAK;EAC/C,IAAI;IACF,IAAIH,KAAK,CAACI,QAAQ,CAACH,GAAG,CAACI,IAAI,CAACC,IAAI,CAAC,EAAE;MACjCH,IAAI,EAAE;IACR,CAAC,MAAM;MACL,OAAOD,GAAG,CAACK,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;QAC1BD,MAAM,EAAE,GAAG;QACXE,OAAO,EAAG,iBAAgBT,KAAK,CAACU,IAAI,EAAG;MACzC,CAAC,CAAC;IACJ;EACF,CAAC,CAAC,OAAOC,KAAK,EAAE;IACd,OAAOT,GAAG,CAACK,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;MAAED,MAAM,EAAE,GAAG;MAAEE,OAAO,EAAE;IAAe,CAAC,CAAC;EACvE;AACF,CAAC;AAAC,IAAAG,QAAA,GAEab,SAAS;AAAAc,OAAA,CAAAC,OAAA,GAAAF,QAAA;AAAAG,MAAA,CAAAF,OAAA,GAAAA,OAAA,CAAAC,OAAA"}},"mtime":1682148437944},"{\"assumptions\":{},\"sourceRoot\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/middlewares/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"filename\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/middlewares/verifyToken.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/node_modules/babel-plugin-add-module-exports/lib/index.js\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-runtime\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"regenerator\":true},\"externalDependencies\":[]},{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.21.0:development":{"value":{"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _jsonwebtoken = _interopRequireDefault(require(\"jsonwebtoken\"));\nvar _dotenv = _interopRequireDefault(require(\"dotenv\"));\nvar _models = require(\"../database/models\");\n// eslint-disable-next-line import/no-unresolved, import/no-extraneous-dependencies\n\n// eslint-disable-next-line import/named\n\n_dotenv.default.config();\n/**\n *\n * @param {object} req\n * @param {object} res\n * @param {object} next next to other function\n * @returns {object} response if error\n */\nasync function isAuthenticated(req, res, next) {\n  try {\n    const {\n      authorization\n    } = req.headers;\n    if (!authorization) {\n      return res.status(401).json({\n        statusCode: 401,\n        message: 'Please Login'\n      });\n    }\n    const token = authorization.split(' ')[1];\n    const blokentoken = await _models.Blockedtoken.findOne({\n      where: {\n        token\n      }\n    });\n    if (blokentoken) {\n      return res.status(401).json({\n        statusCode: 401,\n        message: 'OOps access denied please login again'\n      });\n    }\n    if (token) {\n      _jsonwebtoken.default.verify(token, process.env.JWT_SECRET, async (err, decodedToken) => {\n        if (err) {\n          res.locals.user = null;\n          return res.status(401).json('Please login');\n        }\n        {\n          const {\n            email\n          } = decodedToken;\n          const user = await _models.users.findOne({\n            where: {\n              email: email || ''\n            }\n          });\n          if (!user) {\n            return res.status(401).json('You are not Authorized');\n          }\n          req.user = user;\n          next();\n        }\n      });\n    } else {\n      req.user = null;\n      return res.status(401).json({\n        statusCode: 401,\n        message: 'Please Login'\n      });\n    }\n  } catch (err) {\n    res.status(500).json(err);\n  }\n}\nvar _default = isAuthenticated;\nexports.default = _default;\nmodule.exports = exports.default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfanNvbndlYnRva2VuIiwiX2ludGVyb3BSZXF1aXJlRGVmYXVsdCIsInJlcXVpcmUiLCJfZG90ZW52IiwiX21vZGVscyIsImRvdGVudiIsImNvbmZpZyIsImlzQXV0aGVudGljYXRlZCIsInJlcSIsInJlcyIsIm5leHQiLCJhdXRob3JpemF0aW9uIiwiaGVhZGVycyIsInN0YXR1cyIsImpzb24iLCJzdGF0dXNDb2RlIiwibWVzc2FnZSIsInRva2VuIiwic3BsaXQiLCJibG9rZW50b2tlbiIsIkJsb2NrZWR0b2tlbiIsImZpbmRPbmUiLCJ3aGVyZSIsImp3dCIsInZlcmlmeSIsInByb2Nlc3MiLCJlbnYiLCJKV1RfU0VDUkVUIiwiZXJyIiwiZGVjb2RlZFRva2VuIiwibG9jYWxzIiwidXNlciIsImVtYWlsIiwidXNlcnMiLCJfZGVmYXVsdCIsImV4cG9ydHMiLCJkZWZhdWx0IiwibW9kdWxlIl0sInNvdXJjZVJvb3QiOiIvVXNlcnMvYW5kZWxhcndhbmRhL0Rlc2t0b3AvZS1jb21tLXRlYW0tYnJvZ3JhbW1lcnMtYm4vc3JjL21pZGRsZXdhcmVzLyIsInNvdXJjZXMiOlsidmVyaWZ5VG9rZW4uanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGltcG9ydC9uby11bnJlc29sdmVkLCBpbXBvcnQvbm8tZXh0cmFuZW91cy1kZXBlbmRlbmNpZXNcbmltcG9ydCBqd3QgZnJvbSAnanNvbndlYnRva2VuJztcbmltcG9ydCBkb3RlbnYgZnJvbSAnZG90ZW52Jztcbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBpbXBvcnQvbmFtZWRcbmltcG9ydCB7IHVzZXJzLCBCbG9ja2VkdG9rZW4gfSBmcm9tICcuLi9kYXRhYmFzZS9tb2RlbHMnO1xuXG5kb3RlbnYuY29uZmlnKCk7XG4vKipcbiAqXG4gKiBAcGFyYW0ge29iamVjdH0gcmVxXG4gKiBAcGFyYW0ge29iamVjdH0gcmVzXG4gKiBAcGFyYW0ge29iamVjdH0gbmV4dCBuZXh0IHRvIG90aGVyIGZ1bmN0aW9uXG4gKiBAcmV0dXJucyB7b2JqZWN0fSByZXNwb25zZSBpZiBlcnJvclxuICovXG5hc3luYyBmdW5jdGlvbiBpc0F1dGhlbnRpY2F0ZWQocmVxLCByZXMsIG5leHQpIHtcbiAgdHJ5IHtcbiAgICBjb25zdCB7IGF1dGhvcml6YXRpb24gfSA9IHJlcS5oZWFkZXJzO1xuICAgIGlmICghYXV0aG9yaXphdGlvbikge1xuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAxKS5qc29uKHsgc3RhdHVzQ29kZTogNDAxLCBtZXNzYWdlOiAnUGxlYXNlIExvZ2luJyB9KTtcbiAgICB9XG4gICAgY29uc3QgdG9rZW4gPSBhdXRob3JpemF0aW9uLnNwbGl0KCcgJylbMV07XG4gICAgY29uc3QgYmxva2VudG9rZW4gPSBhd2FpdCBCbG9ja2VkdG9rZW4uZmluZE9uZSh7IHdoZXJlOiB7IHRva2VuIH0gfSk7XG4gICAgaWYgKGJsb2tlbnRva2VuKSB7XG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDEpLmpzb24oeyBzdGF0dXNDb2RlOiA0MDEsIG1lc3NhZ2U6ICdPT3BzIGFjY2VzcyBkZW5pZWQgcGxlYXNlIGxvZ2luIGFnYWluJyB9KTtcbiAgICB9XG4gICAgaWYgKHRva2VuKSB7XG4gICAgICBqd3QudmVyaWZ5KHRva2VuLCBwcm9jZXNzLmVudi5KV1RfU0VDUkVULCBhc3luYyAoZXJyLCBkZWNvZGVkVG9rZW4pID0+IHtcbiAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgIHJlcy5sb2NhbHMudXNlciA9IG51bGw7XG4gICAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAxKS5qc29uKCdQbGVhc2UgbG9naW4nKTtcbiAgICAgICAgfVxuICAgICAgICB7XG4gICAgICAgICAgY29uc3QgeyBlbWFpbCB9ID0gZGVjb2RlZFRva2VuO1xuICAgICAgICAgIGNvbnN0IHVzZXIgPSBhd2FpdCB1c2Vycy5maW5kT25lKHsgd2hlcmU6IHsgZW1haWw6IGVtYWlsIHx8ICcnIH0gfSk7XG4gICAgICAgICAgaWYgKCF1c2VyKSB7XG4gICAgICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDEpLmpzb24oJ1lvdSBhcmUgbm90IEF1dGhvcml6ZWQnKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmVxLnVzZXIgPSB1c2VyO1xuICAgICAgICAgIG5leHQoKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJlcS51c2VyID0gbnVsbDtcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMSkuanNvbih7IHN0YXR1c0NvZGU6IDQwMSwgbWVzc2FnZTogJ1BsZWFzZSBMb2dpbicgfSk7XG4gICAgfVxuICB9IGNhdGNoIChlcnIpIHtcbiAgICByZXMuc3RhdHVzKDUwMCkuanNvbihlcnIpO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IGlzQXV0aGVudGljYXRlZDtcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUNBLElBQUFBLGFBQUEsR0FBQUMsc0JBQUEsQ0FBQUMsT0FBQTtBQUNBLElBQUFDLE9BQUEsR0FBQUYsc0JBQUEsQ0FBQUMsT0FBQTtBQUVBLElBQUFFLE9BQUEsR0FBQUYsT0FBQTtBQUpBOztBQUdBOztBQUdBRyxlQUFNLENBQUNDLE1BQU0sRUFBRTtBQUNmO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZUMsZUFBZUEsQ0FBQ0MsR0FBRyxFQUFFQyxHQUFHLEVBQUVDLElBQUksRUFBRTtFQUM3QyxJQUFJO0lBQ0YsTUFBTTtNQUFFQztJQUFjLENBQUMsR0FBR0gsR0FBRyxDQUFDSSxPQUFPO0lBQ3JDLElBQUksQ0FBQ0QsYUFBYSxFQUFFO01BQ2xCLE9BQU9GLEdBQUcsQ0FBQ0ksTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDQyxJQUFJLENBQUM7UUFBRUMsVUFBVSxFQUFFLEdBQUc7UUFBRUMsT0FBTyxFQUFFO01BQWUsQ0FBQyxDQUFDO0lBQzNFO0lBQ0EsTUFBTUMsS0FBSyxHQUFHTixhQUFhLENBQUNPLEtBQUssQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUM7SUFDekMsTUFBTUMsV0FBVyxHQUFHLE1BQU1DLG9CQUFZLENBQUNDLE9BQU8sQ0FBQztNQUFFQyxLQUFLLEVBQUU7UUFBRUw7TUFBTTtJQUFFLENBQUMsQ0FBQztJQUNwRSxJQUFJRSxXQUFXLEVBQUU7TUFDZixPQUFPVixHQUFHLENBQUNJLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQ0MsSUFBSSxDQUFDO1FBQUVDLFVBQVUsRUFBRSxHQUFHO1FBQUVDLE9BQU8sRUFBRTtNQUF3QyxDQUFDLENBQUM7SUFDcEc7SUFDQSxJQUFJQyxLQUFLLEVBQUU7TUFDVE0scUJBQUcsQ0FBQ0MsTUFBTSxDQUFDUCxLQUFLLEVBQUVRLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDQyxVQUFVLEVBQUUsT0FBT0MsR0FBRyxFQUFFQyxZQUFZLEtBQUs7UUFDckUsSUFBSUQsR0FBRyxFQUFFO1VBQ1BuQixHQUFHLENBQUNxQixNQUFNLENBQUNDLElBQUksR0FBRyxJQUFJO1VBQ3RCLE9BQU90QixHQUFHLENBQUNJLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQ0MsSUFBSSxDQUFDLGNBQWMsQ0FBQztRQUM3QztRQUNBO1VBQ0UsTUFBTTtZQUFFa0I7VUFBTSxDQUFDLEdBQUdILFlBQVk7VUFDOUIsTUFBTUUsSUFBSSxHQUFHLE1BQU1FLGFBQUssQ0FBQ1osT0FBTyxDQUFDO1lBQUVDLEtBQUssRUFBRTtjQUFFVSxLQUFLLEVBQUVBLEtBQUssSUFBSTtZQUFHO1VBQUUsQ0FBQyxDQUFDO1VBQ25FLElBQUksQ0FBQ0QsSUFBSSxFQUFFO1lBQ1QsT0FBT3RCLEdBQUcsQ0FBQ0ksTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDQyxJQUFJLENBQUMsd0JBQXdCLENBQUM7VUFDdkQ7VUFDQU4sR0FBRyxDQUFDdUIsSUFBSSxHQUFHQSxJQUFJO1VBQ2ZyQixJQUFJLEVBQUU7UUFDUjtNQUNGLENBQUMsQ0FBQztJQUNKLENBQUMsTUFBTTtNQUNMRixHQUFHLENBQUN1QixJQUFJLEdBQUcsSUFBSTtNQUNmLE9BQU90QixHQUFHLENBQUNJLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQ0MsSUFBSSxDQUFDO1FBQUVDLFVBQVUsRUFBRSxHQUFHO1FBQUVDLE9BQU8sRUFBRTtNQUFlLENBQUMsQ0FBQztJQUMzRTtFQUNGLENBQUMsQ0FBQyxPQUFPWSxHQUFHLEVBQUU7SUFDWm5CLEdBQUcsQ0FBQ0ksTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDQyxJQUFJLENBQUNjLEdBQUcsQ0FBQztFQUMzQjtBQUNGO0FBQUMsSUFBQU0sUUFBQSxHQUVjM0IsZUFBZTtBQUFBNEIsT0FBQSxDQUFBQyxPQUFBLEdBQUFGLFFBQUE7QUFBQUcsTUFBQSxDQUFBRixPQUFBLEdBQUFBLE9BQUEsQ0FBQUMsT0FBQSJ9","map":{"version":3,"names":["_jsonwebtoken","_interopRequireDefault","require","_dotenv","_models","dotenv","config","isAuthenticated","req","res","next","authorization","headers","status","json","statusCode","message","token","split","blokentoken","Blockedtoken","findOne","where","jwt","verify","process","env","JWT_SECRET","err","decodedToken","locals","user","email","users","_default","exports","default","module"],"sourceRoot":"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/middlewares/","sources":["verifyToken.js"],"sourcesContent":["// eslint-disable-next-line import/no-unresolved, import/no-extraneous-dependencies\nimport jwt from 'jsonwebtoken';\nimport dotenv from 'dotenv';\n// eslint-disable-next-line import/named\nimport { users, Blockedtoken } from '../database/models';\n\ndotenv.config();\n/**\n *\n * @param {object} req\n * @param {object} res\n * @param {object} next next to other function\n * @returns {object} response if error\n */\nasync function isAuthenticated(req, res, next) {\n  try {\n    const { authorization } = req.headers;\n    if (!authorization) {\n      return res.status(401).json({ statusCode: 401, message: 'Please Login' });\n    }\n    const token = authorization.split(' ')[1];\n    const blokentoken = await Blockedtoken.findOne({ where: { token } });\n    if (blokentoken) {\n      return res.status(401).json({ statusCode: 401, message: 'OOps access denied please login again' });\n    }\n    if (token) {\n      jwt.verify(token, process.env.JWT_SECRET, async (err, decodedToken) => {\n        if (err) {\n          res.locals.user = null;\n          return res.status(401).json('Please login');\n        }\n        {\n          const { email } = decodedToken;\n          const user = await users.findOne({ where: { email: email || '' } });\n          if (!user) {\n            return res.status(401).json('You are not Authorized');\n          }\n          req.user = user;\n          next();\n        }\n      });\n    } else {\n      req.user = null;\n      return res.status(401).json({ statusCode: 401, message: 'Please Login' });\n    }\n  } catch (err) {\n    res.status(500).json(err);\n  }\n}\n\nexport default isAuthenticated;\n"],"mappings":";;;;;;;AACA,IAAAA,aAAA,GAAAC,sBAAA,CAAAC,OAAA;AACA,IAAAC,OAAA,GAAAF,sBAAA,CAAAC,OAAA;AAEA,IAAAE,OAAA,GAAAF,OAAA;AAJA;;AAGA;;AAGAG,eAAM,CAACC,MAAM,EAAE;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAeC,eAAeA,CAACC,GAAG,EAAEC,GAAG,EAAEC,IAAI,EAAE;EAC7C,IAAI;IACF,MAAM;MAAEC;IAAc,CAAC,GAAGH,GAAG,CAACI,OAAO;IACrC,IAAI,CAACD,aAAa,EAAE;MAClB,OAAOF,GAAG,CAACI,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;QAAEC,UAAU,EAAE,GAAG;QAAEC,OAAO,EAAE;MAAe,CAAC,CAAC;IAC3E;IACA,MAAMC,KAAK,GAAGN,aAAa,CAACO,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;IACzC,MAAMC,WAAW,GAAG,MAAMC,oBAAY,CAACC,OAAO,CAAC;MAAEC,KAAK,EAAE;QAAEL;MAAM;IAAE,CAAC,CAAC;IACpE,IAAIE,WAAW,EAAE;MACf,OAAOV,GAAG,CAACI,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;QAAEC,UAAU,EAAE,GAAG;QAAEC,OAAO,EAAE;MAAwC,CAAC,CAAC;IACpG;IACA,IAAIC,KAAK,EAAE;MACTM,qBAAG,CAACC,MAAM,CAACP,KAAK,EAAEQ,OAAO,CAACC,GAAG,CAACC,UAAU,EAAE,OAAOC,GAAG,EAAEC,YAAY,KAAK;QACrE,IAAID,GAAG,EAAE;UACPnB,GAAG,CAACqB,MAAM,CAACC,IAAI,GAAG,IAAI;UACtB,OAAOtB,GAAG,CAACI,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC,cAAc,CAAC;QAC7C;QACA;UACE,MAAM;YAAEkB;UAAM,CAAC,GAAGH,YAAY;UAC9B,MAAME,IAAI,GAAG,MAAME,aAAK,CAACZ,OAAO,CAAC;YAAEC,KAAK,EAAE;cAAEU,KAAK,EAAEA,KAAK,IAAI;YAAG;UAAE,CAAC,CAAC;UACnE,IAAI,CAACD,IAAI,EAAE;YACT,OAAOtB,GAAG,CAACI,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC,wBAAwB,CAAC;UACvD;UACAN,GAAG,CAACuB,IAAI,GAAGA,IAAI;UACfrB,IAAI,EAAE;QACR;MACF,CAAC,CAAC;IACJ,CAAC,MAAM;MACLF,GAAG,CAACuB,IAAI,GAAG,IAAI;MACf,OAAOtB,GAAG,CAACI,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;QAAEC,UAAU,EAAE,GAAG;QAAEC,OAAO,EAAE;MAAe,CAAC,CAAC;IAC3E;EACF,CAAC,CAAC,OAAOY,GAAG,EAAE;IACZnB,GAAG,CAACI,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAACc,GAAG,CAAC;EAC3B;AACF;AAAC,IAAAM,QAAA,GAEc3B,eAAe;AAAA4B,OAAA,CAAAC,OAAA,GAAAF,QAAA;AAAAG,MAAA,CAAAF,OAAA,GAAAA,OAAA,CAAAC,OAAA"}},"mtime":1682148437954},"{\"assumptions\":{},\"sourceRoot\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/validations/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"filename\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/validations/fields.validation.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/node_modules/babel-plugin-add-module-exports/lib/index.js\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-runtime\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"regenerator\":true},\"externalDependencies\":[]},{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.21.0:development":{"value":{"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.hasEmail = hasEmail;\nexports.resetPassword = resetPassword;\nvar _joi = _interopRequireDefault(require(\"joi\"));\nvar _joiPassword = require(\"joi-password\");\nconst joiPassword = _joi.default.extend(_joiPassword.joiPasswordExtendCore);\n/**\n * Validate email\n * @param {*} data data\n * @returns {Object} result\n */\nfunction hasEmail(data) {\n  const schema = _joi.default.object({\n    email: _joi.default.string().email().required().label('email')\n  });\n  return schema.validate(data, {\n    abortEarly: false\n  });\n}\n\n/**\n * Check for new password\n * @param {*} data data\n * @returns {Object} result\n */\nfunction resetPassword(data) {\n  const schema = _joi.default.object({\n    email: _joi.default.string().email().required().label('email'),\n    newPassword: joiPassword.string().min(8).minOfLowercase(1).minOfUppercase(1).minOfNumeric(1).minOfSpecialCharacters(1).required().label('password')\n  });\n  return schema.validate(data, {\n    abortEarly: false\n  });\n}\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfam9pIiwiX2ludGVyb3BSZXF1aXJlRGVmYXVsdCIsInJlcXVpcmUiLCJfam9pUGFzc3dvcmQiLCJqb2lQYXNzd29yZCIsIkpvaSIsImV4dGVuZCIsImpvaVBhc3N3b3JkRXh0ZW5kQ29yZSIsImhhc0VtYWlsIiwiZGF0YSIsInNjaGVtYSIsIm9iamVjdCIsImVtYWlsIiwic3RyaW5nIiwicmVxdWlyZWQiLCJsYWJlbCIsInZhbGlkYXRlIiwiYWJvcnRFYXJseSIsInJlc2V0UGFzc3dvcmQiLCJuZXdQYXNzd29yZCIsIm1pbiIsIm1pbk9mTG93ZXJjYXNlIiwibWluT2ZVcHBlcmNhc2UiLCJtaW5PZk51bWVyaWMiLCJtaW5PZlNwZWNpYWxDaGFyYWN0ZXJzIl0sInNvdXJjZVJvb3QiOiIvVXNlcnMvYW5kZWxhcndhbmRhL0Rlc2t0b3AvZS1jb21tLXRlYW0tYnJvZ3JhbW1lcnMtYm4vc3JjL3ZhbGlkYXRpb25zLyIsInNvdXJjZXMiOlsiZmllbGRzLnZhbGlkYXRpb24uanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IEpvaSBmcm9tICdqb2knO1xuXG5pbXBvcnQgeyBqb2lQYXNzd29yZEV4dGVuZENvcmUgfSBmcm9tICdqb2ktcGFzc3dvcmQnO1xuXG5jb25zdCBqb2lQYXNzd29yZCA9IEpvaS5leHRlbmQoam9pUGFzc3dvcmRFeHRlbmRDb3JlKTtcbi8qKlxuICogVmFsaWRhdGUgZW1haWxcbiAqIEBwYXJhbSB7Kn0gZGF0YSBkYXRhXG4gKiBAcmV0dXJucyB7T2JqZWN0fSByZXN1bHRcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGhhc0VtYWlsKGRhdGEpIHtcbiAgY29uc3Qgc2NoZW1hID0gSm9pLm9iamVjdCh7XG4gICAgZW1haWw6IEpvaS5zdHJpbmcoKS5lbWFpbCgpLnJlcXVpcmVkKCkubGFiZWwoJ2VtYWlsJyksXG4gIH0pO1xuICByZXR1cm4gc2NoZW1hLnZhbGlkYXRlKGRhdGEsIHsgYWJvcnRFYXJseTogZmFsc2UgfSk7XG59XG5cbi8qKlxuICogQ2hlY2sgZm9yIG5ldyBwYXNzd29yZFxuICogQHBhcmFtIHsqfSBkYXRhIGRhdGFcbiAqIEByZXR1cm5zIHtPYmplY3R9IHJlc3VsdFxuICovXG5leHBvcnQgZnVuY3Rpb24gcmVzZXRQYXNzd29yZChkYXRhKSB7XG4gIGNvbnN0IHNjaGVtYSA9IEpvaS5vYmplY3Qoe1xuICAgIGVtYWlsOiBKb2kuc3RyaW5nKCkuZW1haWwoKS5yZXF1aXJlZCgpLmxhYmVsKCdlbWFpbCcpLFxuICAgIG5ld1Bhc3N3b3JkOiBqb2lQYXNzd29yZFxuICAgICAgLnN0cmluZygpXG4gICAgICAubWluKDgpXG4gICAgICAubWluT2ZMb3dlcmNhc2UoMSlcbiAgICAgIC5taW5PZlVwcGVyY2FzZSgxKVxuICAgICAgLm1pbk9mTnVtZXJpYygxKVxuICAgICAgLm1pbk9mU3BlY2lhbENoYXJhY3RlcnMoMSlcbiAgICAgIC5yZXF1aXJlZCgpXG4gICAgICAubGFiZWwoJ3Bhc3N3b3JkJyksXG4gIH0pO1xuICByZXR1cm4gc2NoZW1hLnZhbGlkYXRlKGRhdGEsIHsgYWJvcnRFYXJseTogZmFsc2UgfSk7XG59XG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQUEsSUFBQUEsSUFBQSxHQUFBQyxzQkFBQSxDQUFBQyxPQUFBO0FBRUEsSUFBQUMsWUFBQSxHQUFBRCxPQUFBO0FBRUEsTUFBTUUsV0FBVyxHQUFHQyxZQUFHLENBQUNDLE1BQU0sQ0FBQ0Msa0NBQXFCLENBQUM7QUFDckQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPLFNBQVNDLFFBQVFBLENBQUNDLElBQUksRUFBRTtFQUM3QixNQUFNQyxNQUFNLEdBQUdMLFlBQUcsQ0FBQ00sTUFBTSxDQUFDO0lBQ3hCQyxLQUFLLEVBQUVQLFlBQUcsQ0FBQ1EsTUFBTSxFQUFFLENBQUNELEtBQUssRUFBRSxDQUFDRSxRQUFRLEVBQUUsQ0FBQ0MsS0FBSyxDQUFDLE9BQU87RUFDdEQsQ0FBQyxDQUFDO0VBQ0YsT0FBT0wsTUFBTSxDQUFDTSxRQUFRLENBQUNQLElBQUksRUFBRTtJQUFFUSxVQUFVLEVBQUU7RUFBTSxDQUFDLENBQUM7QUFDckQ7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPLFNBQVNDLGFBQWFBLENBQUNULElBQUksRUFBRTtFQUNsQyxNQUFNQyxNQUFNLEdBQUdMLFlBQUcsQ0FBQ00sTUFBTSxDQUFDO0lBQ3hCQyxLQUFLLEVBQUVQLFlBQUcsQ0FBQ1EsTUFBTSxFQUFFLENBQUNELEtBQUssRUFBRSxDQUFDRSxRQUFRLEVBQUUsQ0FBQ0MsS0FBSyxDQUFDLE9BQU8sQ0FBQztJQUNyREksV0FBVyxFQUFFZixXQUFXLENBQ3JCUyxNQUFNLEVBQUUsQ0FDUk8sR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUNOQyxjQUFjLENBQUMsQ0FBQyxDQUFDLENBQ2pCQyxjQUFjLENBQUMsQ0FBQyxDQUFDLENBQ2pCQyxZQUFZLENBQUMsQ0FBQyxDQUFDLENBQ2ZDLHNCQUFzQixDQUFDLENBQUMsQ0FBQyxDQUN6QlYsUUFBUSxFQUFFLENBQ1ZDLEtBQUssQ0FBQyxVQUFVO0VBQ3JCLENBQUMsQ0FBQztFQUNGLE9BQU9MLE1BQU0sQ0FBQ00sUUFBUSxDQUFDUCxJQUFJLEVBQUU7SUFBRVEsVUFBVSxFQUFFO0VBQU0sQ0FBQyxDQUFDO0FBQ3JEIn0=","map":{"version":3,"names":["_joi","_interopRequireDefault","require","_joiPassword","joiPassword","Joi","extend","joiPasswordExtendCore","hasEmail","data","schema","object","email","string","required","label","validate","abortEarly","resetPassword","newPassword","min","minOfLowercase","minOfUppercase","minOfNumeric","minOfSpecialCharacters"],"sourceRoot":"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/validations/","sources":["fields.validation.js"],"sourcesContent":["import Joi from 'joi';\n\nimport { joiPasswordExtendCore } from 'joi-password';\n\nconst joiPassword = Joi.extend(joiPasswordExtendCore);\n/**\n * Validate email\n * @param {*} data data\n * @returns {Object} result\n */\nexport function hasEmail(data) {\n  const schema = Joi.object({\n    email: Joi.string().email().required().label('email'),\n  });\n  return schema.validate(data, { abortEarly: false });\n}\n\n/**\n * Check for new password\n * @param {*} data data\n * @returns {Object} result\n */\nexport function resetPassword(data) {\n  const schema = Joi.object({\n    email: Joi.string().email().required().label('email'),\n    newPassword: joiPassword\n      .string()\n      .min(8)\n      .minOfLowercase(1)\n      .minOfUppercase(1)\n      .minOfNumeric(1)\n      .minOfSpecialCharacters(1)\n      .required()\n      .label('password'),\n  });\n  return schema.validate(data, { abortEarly: false });\n}\n"],"mappings":";;;;;;;;AAAA,IAAAA,IAAA,GAAAC,sBAAA,CAAAC,OAAA;AAEA,IAAAC,YAAA,GAAAD,OAAA;AAEA,MAAME,WAAW,GAAGC,YAAG,CAACC,MAAM,CAACC,kCAAqB,CAAC;AACrD;AACA;AACA;AACA;AACA;AACO,SAASC,QAAQA,CAACC,IAAI,EAAE;EAC7B,MAAMC,MAAM,GAAGL,YAAG,CAACM,MAAM,CAAC;IACxBC,KAAK,EAAEP,YAAG,CAACQ,MAAM,EAAE,CAACD,KAAK,EAAE,CAACE,QAAQ,EAAE,CAACC,KAAK,CAAC,OAAO;EACtD,CAAC,CAAC;EACF,OAAOL,MAAM,CAACM,QAAQ,CAACP,IAAI,EAAE;IAAEQ,UAAU,EAAE;EAAM,CAAC,CAAC;AACrD;;AAEA;AACA;AACA;AACA;AACA;AACO,SAASC,aAAaA,CAACT,IAAI,EAAE;EAClC,MAAMC,MAAM,GAAGL,YAAG,CAACM,MAAM,CAAC;IACxBC,KAAK,EAAEP,YAAG,CAACQ,MAAM,EAAE,CAACD,KAAK,EAAE,CAACE,QAAQ,EAAE,CAACC,KAAK,CAAC,OAAO,CAAC;IACrDI,WAAW,EAAEf,WAAW,CACrBS,MAAM,EAAE,CACRO,GAAG,CAAC,CAAC,CAAC,CACNC,cAAc,CAAC,CAAC,CAAC,CACjBC,cAAc,CAAC,CAAC,CAAC,CACjBC,YAAY,CAAC,CAAC,CAAC,CACfC,sBAAsB,CAAC,CAAC,CAAC,CACzBV,QAAQ,EAAE,CACVC,KAAK,CAAC,UAAU;EACrB,CAAC,CAAC;EACF,OAAOL,MAAM,CAACM,QAAQ,CAACP,IAAI,EAAE;IAAEQ,UAAU,EAAE;EAAM,CAAC,CAAC;AACrD"}},"mtime":1682148437966},"{\"assumptions\":{},\"sourceRoot\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/middlewares/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"filename\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/middlewares/requestValidator.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/node_modules/babel-plugin-add-module-exports/lib/index.js\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-runtime\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"regenerator\":true},\"externalDependencies\":[]},{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.21.0:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = _default;\n/**\n * validation function\n * @param {Function} validator\n * @returns {Function} middleware\n */\nfunction _default(validator) {\n  return (req, res, next) => {\n    try {\n      const {\n        body\n      } = req;\n      const {\n        error\n      } = validator(body, {\n        abortEarly: false\n      });\n      if (error) {\n        return res.status(400).json({\n          message: error.message\n        });\n      }\n      next();\n    } catch (error) {\n      res.status(500).json({\n        message: 'Validation failed',\n        error: error.message\n      });\n    }\n  };\n}\nmodule.exports = exports.default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfZGVmYXVsdCIsInZhbGlkYXRvciIsInJlcSIsInJlcyIsIm5leHQiLCJib2R5IiwiZXJyb3IiLCJhYm9ydEVhcmx5Iiwic3RhdHVzIiwianNvbiIsIm1lc3NhZ2UiLCJtb2R1bGUiLCJleHBvcnRzIiwiZGVmYXVsdCJdLCJzb3VyY2VSb290IjoiL1VzZXJzL2FuZGVsYXJ3YW5kYS9EZXNrdG9wL2UtY29tbS10ZWFtLWJyb2dyYW1tZXJzLWJuL3NyYy9taWRkbGV3YXJlcy8iLCJzb3VyY2VzIjpbInJlcXVlc3RWYWxpZGF0b3IuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiB2YWxpZGF0aW9uIGZ1bmN0aW9uXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSB2YWxpZGF0b3JcbiAqIEByZXR1cm5zIHtGdW5jdGlvbn0gbWlkZGxld2FyZVxuICovXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiAodmFsaWRhdG9yKSB7XG4gIHJldHVybiAocmVxLCByZXMsIG5leHQpID0+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgeyBib2R5IH0gPSByZXE7XG5cbiAgICAgIGNvbnN0IHsgZXJyb3IgfSA9IHZhbGlkYXRvcihib2R5LCB7IGFib3J0RWFybHk6IGZhbHNlIH0pO1xuICAgICAgaWYgKGVycm9yKSB7XG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IG1lc3NhZ2U6IGVycm9yLm1lc3NhZ2UgfSk7XG4gICAgICB9XG4gICAgICBuZXh0KCk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIHJlc1xuICAgICAgICAuc3RhdHVzKDUwMClcbiAgICAgICAgLmpzb24oeyBtZXNzYWdlOiAnVmFsaWRhdGlvbiBmYWlsZWQnLCBlcnJvcjogZXJyb3IubWVzc2FnZSB9KTtcbiAgICB9XG4gIH07XG59XG4iXSwibWFwcGluZ3MiOiI7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDZSxTQUFBQSxTQUFVQyxTQUFTLEVBQUU7RUFDbEMsT0FBTyxDQUFDQyxHQUFHLEVBQUVDLEdBQUcsRUFBRUMsSUFBSSxLQUFLO0lBQ3pCLElBQUk7TUFDRixNQUFNO1FBQUVDO01BQUssQ0FBQyxHQUFHSCxHQUFHO01BRXBCLE1BQU07UUFBRUk7TUFBTSxDQUFDLEdBQUdMLFNBQVMsQ0FBQ0ksSUFBSSxFQUFFO1FBQUVFLFVBQVUsRUFBRTtNQUFNLENBQUMsQ0FBQztNQUN4RCxJQUFJRCxLQUFLLEVBQUU7UUFDVCxPQUFPSCxHQUFHLENBQUNLLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQ0MsSUFBSSxDQUFDO1VBQUVDLE9BQU8sRUFBRUosS0FBSyxDQUFDSTtRQUFRLENBQUMsQ0FBQztNQUN6RDtNQUNBTixJQUFJLEVBQUU7SUFDUixDQUFDLENBQUMsT0FBT0UsS0FBSyxFQUFFO01BQ2RILEdBQUcsQ0FDQUssTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUNYQyxJQUFJLENBQUM7UUFBRUMsT0FBTyxFQUFFLG1CQUFtQjtRQUFFSixLQUFLLEVBQUVBLEtBQUssQ0FBQ0k7TUFBUSxDQUFDLENBQUM7SUFDakU7RUFDRixDQUFDO0FBQ0g7QUFBQ0MsTUFBQSxDQUFBQyxPQUFBLEdBQUFBLE9BQUEsQ0FBQUMsT0FBQSJ9","map":{"version":3,"names":["_default","validator","req","res","next","body","error","abortEarly","status","json","message","module","exports","default"],"sourceRoot":"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/middlewares/","sources":["requestValidator.js"],"sourcesContent":["/**\n * validation function\n * @param {Function} validator\n * @returns {Function} middleware\n */\nexport default function (validator) {\n  return (req, res, next) => {\n    try {\n      const { body } = req;\n\n      const { error } = validator(body, { abortEarly: false });\n      if (error) {\n        return res.status(400).json({ message: error.message });\n      }\n      next();\n    } catch (error) {\n      res\n        .status(500)\n        .json({ message: 'Validation failed', error: error.message });\n    }\n  };\n}\n"],"mappings":";;;;;;AAAA;AACA;AACA;AACA;AACA;AACe,SAAAA,SAAUC,SAAS,EAAE;EAClC,OAAO,CAACC,GAAG,EAAEC,GAAG,EAAEC,IAAI,KAAK;IACzB,IAAI;MACF,MAAM;QAAEC;MAAK,CAAC,GAAGH,GAAG;MAEpB,MAAM;QAAEI;MAAM,CAAC,GAAGL,SAAS,CAACI,IAAI,EAAE;QAAEE,UAAU,EAAE;MAAM,CAAC,CAAC;MACxD,IAAID,KAAK,EAAE;QACT,OAAOH,GAAG,CAACK,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;UAAEC,OAAO,EAAEJ,KAAK,CAACI;QAAQ,CAAC,CAAC;MACzD;MACAN,IAAI,EAAE;IACR,CAAC,CAAC,OAAOE,KAAK,EAAE;MACdH,GAAG,CACAK,MAAM,CAAC,GAAG,CAAC,CACXC,IAAI,CAAC;QAAEC,OAAO,EAAE,mBAAmB;QAAEJ,KAAK,EAAEA,KAAK,CAACI;MAAQ,CAAC,CAAC;IACjE;EACF,CAAC;AACH;AAACC,MAAA,CAAAC,OAAA,GAAAA,OAAA,CAAAC,OAAA"}},"mtime":1682148437952},"{\"assumptions\":{},\"sourceRoot\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/validations/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"filename\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/validations/disable.validation.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/node_modules/babel-plugin-add-module-exports/lib/index.js\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-runtime\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"regenerator\":true},\"externalDependencies\":[]},{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.21.0:development":{"value":{"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = disableUser;\nvar _joi = _interopRequireDefault(require(\"joi\"));\n/**\n * Check for new password\n * @param {*} data data\n * @returns {Object} result\n */\nfunction disableUser(data) {\n  const schema = _joi.default.object({\n    reason: _joi.default.string().min(5).required()\n  });\n  return schema.validate(data, {\n    abortEarly: false\n  });\n}\nmodule.exports = exports.default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfam9pIiwiX2ludGVyb3BSZXF1aXJlRGVmYXVsdCIsInJlcXVpcmUiLCJkaXNhYmxlVXNlciIsImRhdGEiLCJzY2hlbWEiLCJKb2kiLCJvYmplY3QiLCJyZWFzb24iLCJzdHJpbmciLCJtaW4iLCJyZXF1aXJlZCIsInZhbGlkYXRlIiwiYWJvcnRFYXJseSIsIm1vZHVsZSIsImV4cG9ydHMiLCJkZWZhdWx0Il0sInNvdXJjZVJvb3QiOiIvVXNlcnMvYW5kZWxhcndhbmRhL0Rlc2t0b3AvZS1jb21tLXRlYW0tYnJvZ3JhbW1lcnMtYm4vc3JjL3ZhbGlkYXRpb25zLyIsInNvdXJjZXMiOlsiZGlzYWJsZS52YWxpZGF0aW9uLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBKb2kgZnJvbSAnam9pJztcblxuLyoqXG4gKiBDaGVjayBmb3IgbmV3IHBhc3N3b3JkXG4gKiBAcGFyYW0geyp9IGRhdGEgZGF0YVxuICogQHJldHVybnMge09iamVjdH0gcmVzdWx0XG4gKi9cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGRpc2FibGVVc2VyKGRhdGEpIHtcbiAgY29uc3Qgc2NoZW1hID0gSm9pLm9iamVjdCh7XG4gICAgcmVhc29uOiBKb2kuc3RyaW5nKCkubWluKDUpLnJlcXVpcmVkKCksXG4gIH0pO1xuICByZXR1cm4gc2NoZW1hLnZhbGlkYXRlKGRhdGEsIHsgYWJvcnRFYXJseTogZmFsc2UgfSk7XG59XG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBQSxJQUFBQSxJQUFBLEdBQUFDLHNCQUFBLENBQUFDLE9BQUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ2UsU0FBU0MsV0FBV0EsQ0FBQ0MsSUFBSSxFQUFFO0VBQ3hDLE1BQU1DLE1BQU0sR0FBR0MsWUFBRyxDQUFDQyxNQUFNLENBQUM7SUFDeEJDLE1BQU0sRUFBRUYsWUFBRyxDQUFDRyxNQUFNLEVBQUUsQ0FBQ0MsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDQyxRQUFRO0VBQ3RDLENBQUMsQ0FBQztFQUNGLE9BQU9OLE1BQU0sQ0FBQ08sUUFBUSxDQUFDUixJQUFJLEVBQUU7SUFBRVMsVUFBVSxFQUFFO0VBQU0sQ0FBQyxDQUFDO0FBQ3JEO0FBQUNDLE1BQUEsQ0FBQUMsT0FBQSxHQUFBQSxPQUFBLENBQUFDLE9BQUEifQ==","map":{"version":3,"names":["_joi","_interopRequireDefault","require","disableUser","data","schema","Joi","object","reason","string","min","required","validate","abortEarly","module","exports","default"],"sourceRoot":"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/validations/","sources":["disable.validation.js"],"sourcesContent":["import Joi from 'joi';\n\n/**\n * Check for new password\n * @param {*} data data\n * @returns {Object} result\n */\nexport default function disableUser(data) {\n  const schema = Joi.object({\n    reason: Joi.string().min(5).required(),\n  });\n  return schema.validate(data, { abortEarly: false });\n}\n"],"mappings":";;;;;;;AAAA,IAAAA,IAAA,GAAAC,sBAAA,CAAAC,OAAA;AAEA;AACA;AACA;AACA;AACA;AACe,SAASC,WAAWA,CAACC,IAAI,EAAE;EACxC,MAAMC,MAAM,GAAGC,YAAG,CAACC,MAAM,CAAC;IACxBC,MAAM,EAAEF,YAAG,CAACG,MAAM,EAAE,CAACC,GAAG,CAAC,CAAC,CAAC,CAACC,QAAQ;EACtC,CAAC,CAAC;EACF,OAAON,MAAM,CAACO,QAAQ,CAACR,IAAI,EAAE;IAAES,UAAU,EAAE;EAAM,CAAC,CAAC;AACrD;AAACC,MAAA,CAAAC,OAAA,GAAAA,OAAA,CAAAC,OAAA"}},"mtime":1682148437964},"{\"assumptions\":{},\"sourceRoot\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/controllers/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"filename\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/controllers/admin.controller.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/node_modules/babel-plugin-add-module-exports/lib/index.js\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-runtime\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"regenerator\":true},\"externalDependencies\":[]},{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.21.0:development":{"value":{"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _bcrypt = _interopRequireDefault(require(\"bcrypt\"));\nvar _user = _interopRequireDefault(require(\"../services/user.services\"));\nvar _models = require(\"../database/models\");\nvar _jwt = require(\"../helpers/jwt\");\nvar _emailConfig = require(\"../helpers/emailConfig\");\nvar _mailTemplate = require(\"../helpers/mailTemplate\");\nvar _mail = require(\"../helpers/mail\");\nvar _paginating = _interopRequireDefault(require(\"../middlewares/paginating\"));\nvar _Admin = require(\"../loggers/Admin.logger\");\n/* eslint-disable require-jsdoc */\n/* eslint-disable no-console */\n/* eslint-disable camelcase */\n/* eslint-disable no-undef */\n\n// eslint-disable-next-line import/named\n\nconst saltRounds = Number(process.env.SALTROUNDS) || 10;\nclass Admin {\n  static async updateUser(req, res) {\n    try {\n      const {\n        id\n      } = req.params;\n      const user = await _user.default.findById(id);\n      if (!user) {\n        return res.status(404).json({\n          error: 'User not found'\n        });\n      }\n      const {\n        email,\n        password,\n        gender,\n        role,\n        verified,\n        username\n      } = req.body;\n      if (email) user.email = email;\n      if (username) user.username = username;\n      if (password) user.password = await _bcrypt.default.hash(password, saltRounds);\n      if (gender) user.gender = gender;\n      if (role) user.role = role;\n      if (verified) user.verified = verified;\n      await user.save();\n      await (0, _Admin.updateUser)(req, user);\n      return res.json({\n        data: user\n      });\n    } catch (error) {\n      (0, _Admin.UserError)(req, error);\n      return res.status(500).json({\n        error: error.message\n      });\n    }\n  }\n  static async deleteUser(req, res) {\n    try {\n      const {\n        id\n      } = req.params;\n      const user = await _user.default.findById(id);\n      if (!user) {\n        return res.status(404).json({\n          error: 'User not found'\n        });\n      }\n      await user.destroy();\n      await (0, _Admin.deleteUser)(req, user);\n      return res.status(200).json({\n        message: 'User deleted successfully'\n      });\n    } catch (err) {\n      (0, _Admin.UserError)(req, err);\n      return res.status(500).json({\n        error: err.message\n      });\n    }\n  }\n  static async signup(req, res) {\n    try {\n      const {\n        email\n      } = req.body;\n      // eslint-disable-next-line object-shorthand\n      const user = await _models.users.findOne({\n        where: {\n          email: email\n        }\n      });\n      if (user) {\n        return res.status(400).json({\n          message: 'Email already registered'\n        });\n      }\n      const {\n        data\n      } = await _user.default.registerAdmin(req.body);\n      const userToken = _jwt.Jwt.generateToken({\n        data\n      }, '1h');\n      if (userToken) {\n        data.email_token = userToken;\n      }\n      await data.save();\n      const verificationEmail = (0, _mailTemplate.verifyEmailTemplate)(userToken);\n      (0, _mail.sendEmail)((0, _emailConfig.emailConfig)({\n        email: data.email,\n        subject: 'Brogrammers email verification',\n        content: verificationEmail\n      }));\n      (0, _Admin.createUser)(req, data);\n      return res.status(201).json({\n        message: 'Check your email to verify your account',\n        user: data\n      });\n    } catch (e) {\n      (0, _Admin.UserError)(req, e);\n      return res.status(500).json({\n        error: e.message,\n        message: 'Failed to register a new user'\n      });\n    }\n  }\n  static async getAllUsers(req, res) {\n    try {\n      (0, _paginating.default)(_models.users)(req, res, () => res.status(200).json(res.paginatedResults));\n      (0, _Admin.viewAllUsers)(req, res.paginatedResults);\n    } catch (error) {\n      (0, _Admin.UserError)(req, error);\n      return res.status(500).json({\n        error: error.message\n      });\n    }\n  }\n}\nexports.default = Admin;\nmodule.exports = exports.default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfYmNyeXB0IiwiX2ludGVyb3BSZXF1aXJlRGVmYXVsdCIsInJlcXVpcmUiLCJfdXNlciIsIl9tb2RlbHMiLCJfand0IiwiX2VtYWlsQ29uZmlnIiwiX21haWxUZW1wbGF0ZSIsIl9tYWlsIiwiX3BhZ2luYXRpbmciLCJfQWRtaW4iLCJzYWx0Um91bmRzIiwiTnVtYmVyIiwicHJvY2VzcyIsImVudiIsIlNBTFRST1VORFMiLCJBZG1pbiIsInVwZGF0ZVVzZXIiLCJyZXEiLCJyZXMiLCJpZCIsInBhcmFtcyIsInVzZXIiLCJVc2VyIiwiZmluZEJ5SWQiLCJzdGF0dXMiLCJqc29uIiwiZXJyb3IiLCJlbWFpbCIsInBhc3N3b3JkIiwiZ2VuZGVyIiwicm9sZSIsInZlcmlmaWVkIiwidXNlcm5hbWUiLCJib2R5IiwiYmNyeXB0IiwiaGFzaCIsInNhdmUiLCJkYXRhIiwiVXNlckVycm9yIiwibWVzc2FnZSIsImRlbGV0ZVVzZXIiLCJkZXN0cm95IiwiZXJyIiwic2lnbnVwIiwidXNlcnMiLCJmaW5kT25lIiwid2hlcmUiLCJyZWdpc3RlckFkbWluIiwidXNlclRva2VuIiwiSnd0IiwiZ2VuZXJhdGVUb2tlbiIsImVtYWlsX3Rva2VuIiwidmVyaWZpY2F0aW9uRW1haWwiLCJ2ZXJpZnlFbWFpbFRlbXBsYXRlIiwic2VuZEVtYWlsIiwiZW1haWxDb25maWciLCJzdWJqZWN0IiwiY29udGVudCIsImNyZWF0ZVVzZXIiLCJlIiwiZ2V0QWxsVXNlcnMiLCJwYWdpbmF0ZWRSZXN1bHRzIiwidmlld0FsbFVzZXJzIiwiZXhwb3J0cyIsImRlZmF1bHQiLCJtb2R1bGUiXSwic291cmNlUm9vdCI6Ii9Vc2Vycy9hbmRlbGFyd2FuZGEvRGVza3RvcC9lLWNvbW0tdGVhbS1icm9ncmFtbWVycy1ibi9zcmMvY29udHJvbGxlcnMvIiwic291cmNlcyI6WyJhZG1pbi5jb250cm9sbGVyLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qIGVzbGludC1kaXNhYmxlIHJlcXVpcmUtanNkb2MgKi9cbi8qIGVzbGludC1kaXNhYmxlIG5vLWNvbnNvbGUgKi9cbi8qIGVzbGludC1kaXNhYmxlIGNhbWVsY2FzZSAqL1xuLyogZXNsaW50LWRpc2FibGUgbm8tdW5kZWYgKi9cbmltcG9ydCBiY3J5cHQgZnJvbSAnYmNyeXB0JztcbmltcG9ydCBVc2VyIGZyb20gJy4uL3NlcnZpY2VzL3VzZXIuc2VydmljZXMnO1xuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGltcG9ydC9uYW1lZFxuaW1wb3J0IHsgdXNlcnMgfSBmcm9tICcuLi9kYXRhYmFzZS9tb2RlbHMnO1xuaW1wb3J0IHsgSnd0IH0gZnJvbSAnLi4vaGVscGVycy9qd3QnO1xuaW1wb3J0IHsgZW1haWxDb25maWcgfSBmcm9tICcuLi9oZWxwZXJzL2VtYWlsQ29uZmlnJztcbmltcG9ydCB7IHZlcmlmeUVtYWlsVGVtcGxhdGUgfSBmcm9tICcuLi9oZWxwZXJzL21haWxUZW1wbGF0ZSc7XG5pbXBvcnQgeyBzZW5kRW1haWwgfSBmcm9tICcuLi9oZWxwZXJzL21haWwnO1xuaW1wb3J0IHBhZ2luYXRlZFJlc3VsdHMgZnJvbSAnLi4vbWlkZGxld2FyZXMvcGFnaW5hdGluZyc7XG5pbXBvcnQge1xuICB1cGRhdGVVc2VyLFxuICBkZWxldGVVc2VyLFxuICBjcmVhdGVVc2VyLFxuICBVc2VyRXJyb3IsXG4gIHZpZXdBbGxVc2Vycyxcbn0gZnJvbSAnLi4vbG9nZ2Vycy9BZG1pbi5sb2dnZXInO1xuXG5jb25zdCBzYWx0Um91bmRzID0gTnVtYmVyKHByb2Nlc3MuZW52LlNBTFRST1VORFMpIHx8IDEwO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBBZG1pbiB7XG4gIHN0YXRpYyBhc3luYyB1cGRhdGVVc2VyKHJlcSwgcmVzKSB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHsgaWQgfSA9IHJlcS5wYXJhbXM7XG4gICAgICBjb25zdCB1c2VyID0gYXdhaXQgVXNlci5maW5kQnlJZChpZCk7XG4gICAgICBpZiAoIXVzZXIpIHtcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA0KS5qc29uKHsgZXJyb3I6ICdVc2VyIG5vdCBmb3VuZCcgfSk7XG4gICAgICB9XG4gICAgICBjb25zdCB7XG4gICAgICAgIGVtYWlsLCBwYXNzd29yZCwgZ2VuZGVyLCByb2xlLCB2ZXJpZmllZCwgdXNlcm5hbWVcbiAgICAgIH0gPSByZXEuYm9keTtcblxuICAgICAgaWYgKGVtYWlsKSB1c2VyLmVtYWlsID0gZW1haWw7XG4gICAgICBpZiAodXNlcm5hbWUpIHVzZXIudXNlcm5hbWUgPSB1c2VybmFtZTtcbiAgICAgIGlmIChwYXNzd29yZCkgdXNlci5wYXNzd29yZCA9IGF3YWl0IGJjcnlwdC5oYXNoKHBhc3N3b3JkLCBzYWx0Um91bmRzKTtcbiAgICAgIGlmIChnZW5kZXIpIHVzZXIuZ2VuZGVyID0gZ2VuZGVyO1xuICAgICAgaWYgKHJvbGUpIHVzZXIucm9sZSA9IHJvbGU7XG4gICAgICBpZiAodmVyaWZpZWQpIHVzZXIudmVyaWZpZWQgPSB2ZXJpZmllZDtcbiAgICAgIGF3YWl0IHVzZXIuc2F2ZSgpO1xuICAgICAgYXdhaXQgdXBkYXRlVXNlcihyZXEsIHVzZXIpO1xuICAgICAgcmV0dXJuIHJlcy5qc29uKHsgZGF0YTogdXNlciB9KTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgVXNlckVycm9yKHJlcSwgZXJyb3IpO1xuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgZXJyb3I6IGVycm9yLm1lc3NhZ2UgfSk7XG4gICAgfVxuICB9XG5cbiAgc3RhdGljIGFzeW5jIGRlbGV0ZVVzZXIocmVxLCByZXMpIHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgeyBpZCB9ID0gcmVxLnBhcmFtcztcbiAgICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBVc2VyLmZpbmRCeUlkKGlkKTtcbiAgICAgIGlmICghdXNlcikge1xuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDQpLmpzb24oeyBlcnJvcjogJ1VzZXIgbm90IGZvdW5kJyB9KTtcbiAgICAgIH1cbiAgICAgIGF3YWl0IHVzZXIuZGVzdHJveSgpO1xuICAgICAgYXdhaXQgZGVsZXRlVXNlcihyZXEsIHVzZXIpO1xuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoMjAwKS5qc29uKHsgbWVzc2FnZTogJ1VzZXIgZGVsZXRlZCBzdWNjZXNzZnVsbHknIH0pO1xuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgVXNlckVycm9yKHJlcSwgZXJyKTtcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDUwMCkuanNvbih7IGVycm9yOiBlcnIubWVzc2FnZSB9KTtcbiAgICB9XG4gIH1cblxuICBzdGF0aWMgYXN5bmMgc2lnbnVwKHJlcSwgcmVzKSB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHsgZW1haWwgfSA9IHJlcS5ib2R5O1xuICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG9iamVjdC1zaG9ydGhhbmRcbiAgICAgIGNvbnN0IHVzZXIgPSBhd2FpdCB1c2Vycy5maW5kT25lKHsgd2hlcmU6IHsgZW1haWw6IGVtYWlsIH0gfSk7XG4gICAgICBpZiAodXNlcikge1xuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBtZXNzYWdlOiAnRW1haWwgYWxyZWFkeSByZWdpc3RlcmVkJyB9KTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IHsgZGF0YSB9ID0gYXdhaXQgVXNlci5yZWdpc3RlckFkbWluKHJlcS5ib2R5KTtcbiAgICAgIGNvbnN0IHVzZXJUb2tlbiA9IEp3dC5nZW5lcmF0ZVRva2VuKHsgZGF0YSB9LCAnMWgnKTtcbiAgICAgIGlmICh1c2VyVG9rZW4pIHtcbiAgICAgICAgZGF0YS5lbWFpbF90b2tlbiA9IHVzZXJUb2tlbjtcbiAgICAgIH1cbiAgICAgIGF3YWl0IGRhdGEuc2F2ZSgpO1xuICAgICAgY29uc3QgdmVyaWZpY2F0aW9uRW1haWwgPSB2ZXJpZnlFbWFpbFRlbXBsYXRlKHVzZXJUb2tlbik7XG4gICAgICBzZW5kRW1haWwoXG4gICAgICAgIGVtYWlsQ29uZmlnKHtcbiAgICAgICAgICBlbWFpbDogZGF0YS5lbWFpbCxcbiAgICAgICAgICBzdWJqZWN0OiAnQnJvZ3JhbW1lcnMgZW1haWwgdmVyaWZpY2F0aW9uJyxcbiAgICAgICAgICBjb250ZW50OiB2ZXJpZmljYXRpb25FbWFpbCxcbiAgICAgICAgfSlcbiAgICAgICk7XG4gICAgICBjcmVhdGVVc2VyKHJlcSwgZGF0YSk7XG4gICAgICByZXR1cm4gcmVzLnN0YXR1cygyMDEpLmpzb24oe1xuICAgICAgICBtZXNzYWdlOiAnQ2hlY2sgeW91ciBlbWFpbCB0byB2ZXJpZnkgeW91ciBhY2NvdW50JyxcbiAgICAgICAgdXNlcjogZGF0YSxcbiAgICAgIH0pO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIFVzZXJFcnJvcihyZXEsIGUpO1xuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNTAwKS5qc29uKHtcbiAgICAgICAgZXJyb3I6IGUubWVzc2FnZSxcbiAgICAgICAgbWVzc2FnZTogJ0ZhaWxlZCB0byByZWdpc3RlciBhIG5ldyB1c2VyJyxcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyBhc3luYyBnZXRBbGxVc2VycyhyZXEsIHJlcykge1xuICAgIHRyeSB7XG4gICAgICBwYWdpbmF0ZWRSZXN1bHRzKHVzZXJzKShyZXEsIHJlcywgKCkgPT4gcmVzLnN0YXR1cygyMDApLmpzb24ocmVzLnBhZ2luYXRlZFJlc3VsdHMpKTtcbiAgICAgIHZpZXdBbGxVc2VycyhyZXEsIHJlcy5wYWdpbmF0ZWRSZXN1bHRzKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgVXNlckVycm9yKHJlcSwgZXJyb3IpO1xuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgZXJyb3I6IGVycm9yLm1lc3NhZ2UgfSk7XG4gICAgfVxuICB9XG59XG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFJQSxJQUFBQSxPQUFBLEdBQUFDLHNCQUFBLENBQUFDLE9BQUE7QUFDQSxJQUFBQyxLQUFBLEdBQUFGLHNC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","map":{"version":3,"names":["_bcrypt","_interopRequireDefault","require","_user","_models","_jwt","_emailConfig","_mailTemplate","_mail","_paginating","_Admin","saltRounds","Number","process","env","SALTROUNDS","Admin","updateUser","req","res","id","params","user","User","findById","status","json","error","email","password","gender","role","verified","username","body","bcrypt","hash","save","data","UserError","message","deleteUser","destroy","err","signup","users","findOne","where","registerAdmin","userToken","Jwt","generateToken","email_token","verificationEmail","verifyEmailTemplate","sendEmail","emailConfig","subject","content","createUser","e","getAllUsers","paginatedResults","viewAllUsers","exports","default","module"],"sourceRoot":"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/controllers/","sources":["admin.controller.js"],"sourcesContent":["/* eslint-disable require-jsdoc */\n/* eslint-disable no-console */\n/* eslint-disable camelcase */\n/* eslint-disable no-undef */\nimport bcrypt from 'bcrypt';\nimport User from '../services/user.services';\n// eslint-disable-next-line import/named\nimport { users } from '../database/models';\nimport { Jwt } from '../helpers/jwt';\nimport { emailConfig } from '../helpers/emailConfig';\nimport { verifyEmailTemplate } from '../helpers/mailTemplate';\nimport { sendEmail } from '../helpers/mail';\nimport paginatedResults from '../middlewares/paginating';\nimport {\n  updateUser,\n  deleteUser,\n  createUser,\n  UserError,\n  viewAllUsers,\n} from '../loggers/Admin.logger';\n\nconst saltRounds = Number(process.env.SALTROUNDS) || 10;\n\nexport default class Admin {\n  static async updateUser(req, res) {\n    try {\n      const { id } = req.params;\n      const user = await User.findById(id);\n      if (!user) {\n        return res.status(404).json({ error: 'User not found' });\n      }\n      const {\n        email, password, gender, role, verified, username\n      } = req.body;\n\n      if (email) user.email = email;\n      if (username) user.username = username;\n      if (password) user.password = await bcrypt.hash(password, saltRounds);\n      if (gender) user.gender = gender;\n      if (role) user.role = role;\n      if (verified) user.verified = verified;\n      await user.save();\n      await updateUser(req, user);\n      return res.json({ data: user });\n    } catch (error) {\n      UserError(req, error);\n      return res.status(500).json({ error: error.message });\n    }\n  }\n\n  static async deleteUser(req, res) {\n    try {\n      const { id } = req.params;\n      const user = await User.findById(id);\n      if (!user) {\n        return res.status(404).json({ error: 'User not found' });\n      }\n      await user.destroy();\n      await deleteUser(req, user);\n      return res.status(200).json({ message: 'User deleted successfully' });\n    } catch (err) {\n      UserError(req, err);\n      return res.status(500).json({ error: err.message });\n    }\n  }\n\n  static async signup(req, res) {\n    try {\n      const { email } = req.body;\n      // eslint-disable-next-line object-shorthand\n      const user = await users.findOne({ where: { email: email } });\n      if (user) {\n        return res.status(400).json({ message: 'Email already registered' });\n      }\n      const { data } = await User.registerAdmin(req.body);\n      const userToken = Jwt.generateToken({ data }, '1h');\n      if (userToken) {\n        data.email_token = userToken;\n      }\n      await data.save();\n      const verificationEmail = verifyEmailTemplate(userToken);\n      sendEmail(\n        emailConfig({\n          email: data.email,\n          subject: 'Brogrammers email verification',\n          content: verificationEmail,\n        })\n      );\n      createUser(req, data);\n      return res.status(201).json({\n        message: 'Check your email to verify your account',\n        user: data,\n      });\n    } catch (e) {\n      UserError(req, e);\n      return res.status(500).json({\n        error: e.message,\n        message: 'Failed to register a new user',\n      });\n    }\n  }\n\n  static async getAllUsers(req, res) {\n    try {\n      paginatedResults(users)(req, res, () => res.status(200).json(res.paginatedResults));\n      viewAllUsers(req, res.paginatedResults);\n    } catch (error) {\n      UserError(req, error);\n      return res.status(500).json({ error: error.message });\n    }\n  }\n}\n"],"mappings":"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"}},"mtime":1685643189434},"{\"assumptions\":{},\"sourceRoot\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/middlewares/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"filename\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/middlewares/paginating.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/node_modules/babel-plugin-add-module-exports/lib/index.js\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-runtime\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"regenerator\":true},\"externalDependencies\":[]},{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.21.0:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = paginatedResults;\n/* eslint-disable require-jsdoc */\nfunction paginatedResults(model) {\n  return async (req, res, next) => {\n    const totalCount = await model.count();\n    // eslint-disable-next-line radix\n    const page = parseInt(req.query.page) || 1;\n    // eslint-disable-next-line radix\n    const limit = parseInt(req.query.limit) || totalCount;\n    const startIndex = (page - 1) * limit;\n    const endIndex = page * limit;\n    const results = {};\n    try {\n      if (endIndex < totalCount) {\n        results.next = {\n          page: page + 1,\n          limit\n        };\n      }\n      if (startIndex > 0) {\n        results.previous = {\n          page: page - 1,\n          limit\n        };\n      }\n      results.totalCount = totalCount;\n      results.totalPages = Math.ceil(totalCount / limit);\n      results.results = await model.findAll({\n        limit,\n        offset: startIndex\n      });\n      res.paginatedResults = results;\n      next();\n    } catch (e) {\n      res.status(500).json({\n        message: e.message\n      });\n    }\n  };\n}\nmodule.exports = exports.default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJwYWdpbmF0ZWRSZXN1bHRzIiwibW9kZWwiLCJyZXEiLCJyZXMiLCJuZXh0IiwidG90YWxDb3VudCIsImNvdW50IiwicGFnZSIsInBhcnNlSW50IiwicXVlcnkiLCJsaW1pdCIsInN0YXJ0SW5kZXgiLCJlbmRJbmRleCIsInJlc3VsdHMiLCJwcmV2aW91cyIsInRvdGFsUGFnZXMiLCJNYXRoIiwiY2VpbCIsImZpbmRBbGwiLCJvZmZzZXQiLCJlIiwic3RhdHVzIiwianNvbiIsIm1lc3NhZ2UiLCJtb2R1bGUiLCJleHBvcnRzIiwiZGVmYXVsdCJdLCJzb3VyY2VSb290IjoiL1VzZXJzL2FuZGVsYXJ3YW5kYS9EZXNrdG9wL2UtY29tbS10ZWFtLWJyb2dyYW1tZXJzLWJuL3NyYy9taWRkbGV3YXJlcy8iLCJzb3VyY2VzIjpbInBhZ2luYXRpbmcuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLyogZXNsaW50LWRpc2FibGUgcmVxdWlyZS1qc2RvYyAqL1xuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gcGFnaW5hdGVkUmVzdWx0cyhtb2RlbCkge1xuICByZXR1cm4gYXN5bmMgKHJlcSwgcmVzLCBuZXh0KSA9PiB7XG4gICAgY29uc3QgdG90YWxDb3VudCA9IGF3YWl0IG1vZGVsLmNvdW50KCk7XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIHJhZGl4XG4gICAgY29uc3QgcGFnZSA9IHBhcnNlSW50KHJlcS5xdWVyeS5wYWdlKSB8fCAxO1xuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSByYWRpeFxuICAgIGNvbnN0IGxpbWl0ID0gcGFyc2VJbnQocmVxLnF1ZXJ5LmxpbWl0KSB8fCB0b3RhbENvdW50O1xuICAgIGNvbnN0IHN0YXJ0SW5kZXggPSAocGFnZSAtIDEpICogbGltaXQ7XG4gICAgY29uc3QgZW5kSW5kZXggPSBwYWdlICogbGltaXQ7XG5cbiAgICBjb25zdCByZXN1bHRzID0ge307XG5cbiAgICB0cnkge1xuICAgICAgaWYgKGVuZEluZGV4IDwgdG90YWxDb3VudCkge1xuICAgICAgICByZXN1bHRzLm5leHQgPSB7XG4gICAgICAgICAgcGFnZTogcGFnZSArIDEsXG4gICAgICAgICAgbGltaXQsXG4gICAgICAgIH07XG4gICAgICB9XG5cbiAgICAgIGlmIChzdGFydEluZGV4ID4gMCkge1xuICAgICAgICByZXN1bHRzLnByZXZpb3VzID0ge1xuICAgICAgICAgIHBhZ2U6IHBhZ2UgLSAxLFxuICAgICAgICAgIGxpbWl0LFxuICAgICAgICB9O1xuICAgICAgfVxuICAgICAgcmVzdWx0cy50b3RhbENvdW50ID0gdG90YWxDb3VudDtcbiAgICAgIHJlc3VsdHMudG90YWxQYWdlcyA9IE1hdGguY2VpbCh0b3RhbENvdW50IC8gbGltaXQpO1xuICAgICAgcmVzdWx0cy5yZXN1bHRzID0gYXdhaXQgbW9kZWwuZmluZEFsbCh7XG4gICAgICAgIGxpbWl0LFxuICAgICAgICBvZmZzZXQ6IHN0YXJ0SW5kZXhcbiAgICAgIH0pO1xuICAgICAgcmVzLnBhZ2luYXRlZFJlc3VsdHMgPSByZXN1bHRzO1xuICAgICAgbmV4dCgpO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgbWVzc2FnZTogZS5tZXNzYWdlIH0pO1xuICAgIH1cbiAgfTtcbn1cbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQUE7QUFDZSxTQUFTQSxnQkFBZ0JBLENBQUNDLEtBQUssRUFBRTtFQUM5QyxPQUFPLE9BQU9DLEdBQUcsRUFBRUMsR0FBRyxFQUFFQyxJQUFJLEtBQUs7SUFDL0IsTUFBTUMsVUFBVSxHQUFHLE1BQU1KLEtBQUssQ0FBQ0ssS0FBSyxFQUFFO0lBQ3RDO0lBQ0EsTUFBTUMsSUFBSSxHQUFHQyxRQUFRLENBQUNOLEdBQUcsQ0FBQ08sS0FBSyxDQUFDRixJQUFJLENBQUMsSUFBSSxDQUFDO0lBQzFDO0lBQ0EsTUFBTUcsS0FBSyxHQUFHRixRQUFRLENBQUNOLEdBQUcsQ0FBQ08sS0FBSyxDQUFDQyxLQUFLLENBQUMsSUFBSUwsVUFBVTtJQUNyRCxNQUFNTSxVQUFVLEdBQUcsQ0FBQ0osSUFBSSxHQUFHLENBQUMsSUFBSUcsS0FBSztJQUNyQyxNQUFNRSxRQUFRLEdBQUdMLElBQUksR0FBR0csS0FBSztJQUU3QixNQUFNRyxPQUFPLEdBQUcsQ0FBQyxDQUFDO0lBRWxCLElBQUk7TUFDRixJQUFJRCxRQUFRLEdBQUdQLFVBQVUsRUFBRTtRQUN6QlEsT0FBTyxDQUFDVCxJQUFJLEdBQUc7VUFDYkcsSUFBSSxFQUFFQSxJQUFJLEdBQUcsQ0FBQztVQUNkRztRQUNGLENBQUM7TUFDSDtNQUVBLElBQUlDLFVBQVUsR0FBRyxDQUFDLEVBQUU7UUFDbEJFLE9BQU8sQ0FBQ0MsUUFBUSxHQUFHO1VBQ2pCUCxJQUFJLEVBQUVBLElBQUksR0FBRyxDQUFDO1VBQ2RHO1FBQ0YsQ0FBQztNQUNIO01BQ0FHLE9BQU8sQ0FBQ1IsVUFBVSxHQUFHQSxVQUFVO01BQy9CUSxPQUFPLENBQUNFLFVBQVUsR0FBR0MsSUFBSSxDQUFDQyxJQUFJLENBQUNaLFVBQVUsR0FBR0ssS0FBSyxDQUFDO01BQ2xERyxPQUFPLENBQUNBLE9BQU8sR0FBRyxNQUFNWixLQUFLLENBQUNpQixPQUFPLENBQUM7UUFDcENSLEtBQUs7UUFDTFMsTUFBTSxFQUFFUjtNQUNWLENBQUMsQ0FBQztNQUNGUixHQUFHLENBQUNILGdCQUFnQixHQUFHYSxPQUFPO01BQzlCVCxJQUFJLEVBQUU7SUFDUixDQUFDLENBQUMsT0FBT2dCLENBQUMsRUFBRTtNQUNWakIsR0FBRyxDQUFDa0IsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDQyxJQUFJLENBQUM7UUFBRUMsT0FBTyxFQUFFSCxDQUFDLENBQUNHO01BQVEsQ0FBQyxDQUFDO0lBQzlDO0VBQ0YsQ0FBQztBQUNIO0FBQUNDLE1BQUEsQ0FBQUMsT0FBQSxHQUFBQSxPQUFBLENBQUFDLE9BQUEifQ==","map":{"version":3,"names":["paginatedResults","model","req","res","next","totalCount","count","page","parseInt","query","limit","startIndex","endIndex","results","previous","totalPages","Math","ceil","findAll","offset","e","status","json","message","module","exports","default"],"sourceRoot":"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/middlewares/","sources":["paginating.js"],"sourcesContent":["/* eslint-disable require-jsdoc */\nexport default function paginatedResults(model) {\n  return async (req, res, next) => {\n    const totalCount = await model.count();\n    // eslint-disable-next-line radix\n    const page = parseInt(req.query.page) || 1;\n    // eslint-disable-next-line radix\n    const limit = parseInt(req.query.limit) || totalCount;\n    const startIndex = (page - 1) * limit;\n    const endIndex = page * limit;\n\n    const results = {};\n\n    try {\n      if (endIndex < totalCount) {\n        results.next = {\n          page: page + 1,\n          limit,\n        };\n      }\n\n      if (startIndex > 0) {\n        results.previous = {\n          page: page - 1,\n          limit,\n        };\n      }\n      results.totalCount = totalCount;\n      results.totalPages = Math.ceil(totalCount / limit);\n      results.results = await model.findAll({\n        limit,\n        offset: startIndex\n      });\n      res.paginatedResults = results;\n      next();\n    } catch (e) {\n      res.status(500).json({ message: e.message });\n    }\n  };\n}\n"],"mappings":";;;;;;AAAA;AACe,SAASA,gBAAgBA,CAACC,KAAK,EAAE;EAC9C,OAAO,OAAOC,GAAG,EAAEC,GAAG,EAAEC,IAAI,KAAK;IAC/B,MAAMC,UAAU,GAAG,MAAMJ,KAAK,CAACK,KAAK,EAAE;IACtC;IACA,MAAMC,IAAI,GAAGC,QAAQ,CAACN,GAAG,CAACO,KAAK,CAACF,IAAI,CAAC,IAAI,CAAC;IAC1C;IACA,MAAMG,KAAK,GAAGF,QAAQ,CAACN,GAAG,CAACO,KAAK,CAACC,KAAK,CAAC,IAAIL,UAAU;IACrD,MAAMM,UAAU,GAAG,CAACJ,IAAI,GAAG,CAAC,IAAIG,KAAK;IACrC,MAAME,QAAQ,GAAGL,IAAI,GAAGG,KAAK;IAE7B,MAAMG,OAAO,GAAG,CAAC,CAAC;IAElB,IAAI;MACF,IAAID,QAAQ,GAAGP,UAAU,EAAE;QACzBQ,OAAO,CAACT,IAAI,GAAG;UACbG,IAAI,EAAEA,IAAI,GAAG,CAAC;UACdG;QACF,CAAC;MACH;MAEA,IAAIC,UAAU,GAAG,CAAC,EAAE;QAClBE,OAAO,CAACC,QAAQ,GAAG;UACjBP,IAAI,EAAEA,IAAI,GAAG,CAAC;UACdG;QACF,CAAC;MACH;MACAG,OAAO,CAACR,UAAU,GAAGA,UAAU;MAC/BQ,OAAO,CAACE,UAAU,GAAGC,IAAI,CAACC,IAAI,CAACZ,UAAU,GAAGK,KAAK,CAAC;MAClDG,OAAO,CAACA,OAAO,GAAG,MAAMZ,KAAK,CAACiB,OAAO,CAAC;QACpCR,KAAK;QACLS,MAAM,EAAER;MACV,CAAC,CAAC;MACFR,GAAG,CAACH,gBAAgB,GAAGa,OAAO;MAC9BT,IAAI,EAAE;IACR,CAAC,CAAC,OAAOgB,CAAC,EAAE;MACVjB,GAAG,CAACkB,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;QAAEC,OAAO,EAAEH,CAAC,CAACG;MAAQ,CAAC,CAAC;IAC9C;EACF,CAAC;AACH;AAACC,MAAA,CAAAC,OAAA,GAAAA,OAAA,CAAAC,OAAA"}},"mtime":1685643189463},"{\"assumptions\":{},\"sourceRoot\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/loggers/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"filename\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/loggers/Admin.logger.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/node_modules/babel-plugin-add-module-exports/lib/index.js\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-runtime\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"regenerator\":true},\"externalDependencies\":[]},{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.21.0:development":{"value":{"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.viewAllUsers = exports.updateUserError = exports.updateUser = exports.getAllSubscribersLog = exports.deleteUserError = exports.deleteUser = exports.deleteSubscriberLog = exports.createUser = exports.UserError = void 0;\nvar _logger = _interopRequireDefault(require(\"../configs/logger\"));\nvar _models = require(\"../database/models\");\n/* eslint-disable import/named */\n\nconst updateUser = async (req, user) => {\n  const logData = {\n    level: 'info',\n    message: `User ${req.user.email} updated user ${req.params.id}`,\n    userId: req.user.id,\n    metadata: {\n      updatedUser: user\n    }\n  };\n  await _models.Log.create(logData);\n  _logger.default.info(`User ${req.user.email} updated user ${req.params.id}`);\n};\nexports.updateUser = updateUser;\nconst updateUserError = async (req, error) => {\n  const logData = {\n    level: 'error',\n    message: error.message,\n    userId: req.user.id,\n    metadata: {\n      error\n    }\n  };\n  await _models.Log.create(logData);\n};\nexports.updateUserError = updateUserError;\nconst deleteUser = async (req, user) => {\n  const logData = {\n    level: 'info',\n    message: `User ${req.user.email} deleted user ${req.params.id}`,\n    userId: req.user.id,\n    metadata: {\n      deletedUser: user\n    }\n  };\n  await _models.Log.create(logData);\n  _logger.default.info(`User ${req.user.email} deleted user ${req.params.id}`);\n};\nexports.deleteUser = deleteUser;\nconst deleteSubscriberLog = async (req, user) => {\n  const logData = {\n    level: 'info',\n    message: `User ${req.user.email} deleted a subscriber ${req.params.id}`,\n    userId: req.user.id,\n    metadata: {\n      deletedSubscriber: user\n    }\n  };\n  await _models.Log.create(logData);\n  _logger.default.info(`User ${req.user.email} deleted a subscriber ${req.params.id}`);\n};\nexports.deleteSubscriberLog = deleteSubscriberLog;\nconst getAllSubscribersLog = async (req, user) => {\n  const logData = {\n    level: 'info',\n    message: `User ${req.user.email} retrieved all subscribers of newsletter`,\n    userId: req.user.id,\n    metadata: {\n      deletedSubscriber: user\n    }\n  };\n  await _models.Log.create(logData);\n  _logger.default.info(`User ${req.user.email} retrieved all subscribers of newsletter`);\n};\nexports.getAllSubscribersLog = getAllSubscribersLog;\nconst deleteUserError = async (req, error) => {\n  const logData = {\n    level: 'error',\n    message: error.message,\n    userId: req.user.id,\n    metadata: {\n      error\n    }\n  };\n  await _models.Log.create(logData);\n};\nexports.deleteUserError = deleteUserError;\nconst createUser = async (req, data) => {\n  const logData = {\n    level: 'info',\n    message: `User ${req.user.email} signed up a new user ${data.id}`,\n    userId: req.user.id,\n    metadata: {\n      newUser: data\n    }\n  };\n  await _models.Log.create(logData);\n  _logger.default.info(`User ${req.user.email} signed up a new user ${data.id}`);\n};\nexports.createUser = createUser;\nconst UserError = async (req, error) => {\n  const logData = {\n    level: 'error',\n    message: error.message,\n    userId: req.user.id,\n    metadata: {\n      error\n    }\n  };\n  await _models.Log.create(logData);\n};\nexports.UserError = UserError;\nconst viewAllUsers = async (req, data) => {\n  const logData = {\n    level: 'info',\n    message: `User ${req.user.email} viewed all users`,\n    userId: req.user.id,\n    metadata: {\n      data\n    }\n  };\n  await _models.Log.create(logData);\n  _logger.default.info(`User ${req.user.email} viewed all users`);\n};\nexports.viewAllUsers = viewAllUsers;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfbG9nZ2VyIiwiX2ludGVyb3BSZXF1aXJlRGVmYXVsdCIsInJlcXVpcmUiLCJfbW9kZWxzIiwidXBkYXRlVXNlciIsInJlcSIsInVzZXIiLCJsb2dEYXRhIiwibGV2ZWwiLCJtZXNzYWdlIiwiZW1haWwiLCJwYXJhbXMiLCJpZCIsInVzZXJJZCIsIm1ldGFkYXRhIiwidXBkYXRlZFVzZXIiLCJMb2ciLCJjcmVhdGUiLCJsb2dnZXIiLCJpbmZvIiwiZXhwb3J0cyIsInVwZGF0ZVVzZXJFcnJvciIsImVycm9yIiwiZGVsZXRlVXNlciIsImRlbGV0ZWRVc2VyIiwiZGVsZXRlU3Vic2NyaWJlckxvZyIsImRlbGV0ZWRTdWJzY3JpYmVyIiwiZ2V0QWxsU3Vic2NyaWJlcnNMb2ciLCJkZWxldGVVc2VyRXJyb3IiLCJjcmVhdGVVc2VyIiwiZGF0YSIsIm5ld1VzZXIiLCJVc2VyRXJyb3IiLCJ2aWV3QWxsVXNlcnMiXSwic291cmNlUm9vdCI6Ii9Vc2Vycy9hbmRlbGFyd2FuZGEvRGVza3RvcC9lLWNvbW0tdGVhbS1icm9ncmFtbWVycy1ibi9zcmMvbG9nZ2Vycy8iLCJzb3VyY2VzIjpbIkFkbWluLmxvZ2dlci5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKiBlc2xpbnQtZGlzYWJsZSBpbXBvcnQvbmFtZWQgKi9cblxuaW1wb3J0IGxvZ2dlciBmcm9tICcuLi9jb25maWdzL2xvZ2dlcic7XG5pbXBvcnQgeyBMb2cgfSBmcm9tICcuLi9kYXRhYmFzZS9tb2RlbHMnO1xuXG5leHBvcnQgY29uc3QgdXBkYXRlVXNlciA9IGFzeW5jIChyZXEsIHVzZXIpID0+IHtcbiAgY29uc3QgbG9nRGF0YSA9IHtcbiAgICBsZXZlbDogJ2luZm8nLFxuICAgIG1lc3NhZ2U6IGBVc2VyICR7cmVxLnVzZXIuZW1haWx9IHVwZGF0ZWQgdXNlciAke3JlcS5wYXJhbXMuaWR9YCxcbiAgICB1c2VySWQ6IHJlcS51c2VyLmlkLFxuICAgIG1ldGFkYXRhOiB7IHVwZGF0ZWRVc2VyOiB1c2VyIH0sXG4gIH07XG4gIGF3YWl0IExvZy5jcmVhdGUobG9nRGF0YSk7XG4gIGxvZ2dlci5pbmZvKGBVc2VyICR7cmVxLnVzZXIuZW1haWx9IHVwZGF0ZWQgdXNlciAke3JlcS5wYXJhbXMuaWR9YCk7XG59O1xuZXhwb3J0IGNvbnN0IHVwZGF0ZVVzZXJFcnJvciA9IGFzeW5jIChyZXEsIGVycm9yKSA9PiB7XG4gIGNvbnN0IGxvZ0RhdGEgPSB7XG4gICAgbGV2ZWw6ICdlcnJvcicsXG4gICAgbWVzc2FnZTogZXJyb3IubWVzc2FnZSxcbiAgICB1c2VySWQ6IHJlcS51c2VyLmlkLFxuICAgIG1ldGFkYXRhOiB7IGVycm9yIH0sXG4gIH07XG4gIGF3YWl0IExvZy5jcmVhdGUobG9nRGF0YSk7XG59O1xuZXhwb3J0IGNvbnN0IGRlbGV0ZVVzZXIgPSBhc3luYyAocmVxLCB1c2VyKSA9PiB7XG4gIGNvbnN0IGxvZ0RhdGEgPSB7XG4gICAgbGV2ZWw6ICdpbmZvJyxcbiAgICBtZXNzYWdlOiBgVXNlciAke3JlcS51c2VyLmVtYWlsfSBkZWxldGVkIHVzZXIgJHtyZXEucGFyYW1zLmlkfWAsXG4gICAgdXNlcklkOiByZXEudXNlci5pZCxcbiAgICBtZXRhZGF0YTogeyBkZWxldGVkVXNlcjogdXNlciB9LFxuICB9O1xuICBhd2FpdCBMb2cuY3JlYXRlKGxvZ0RhdGEpO1xuICBsb2dnZXIuaW5mbyhgVXNlciAke3JlcS51c2VyLmVtYWlsfSBkZWxldGVkIHVzZXIgJHtyZXEucGFyYW1zLmlkfWApO1xufTtcbmV4cG9ydCBjb25zdCBkZWxldGVTdWJzY3JpYmVyTG9nID0gYXN5bmMgKHJlcSwgdXNlcikgPT4ge1xuICBjb25zdCBsb2dEYXRhID0ge1xuICAgIGxldmVsOiAnaW5mbycsXG4gICAgbWVzc2FnZTogYFVzZXIgJHtyZXEudXNlci5lbWFpbH0gZGVsZXRlZCBhIHN1YnNjcmliZXIgJHtyZXEucGFyYW1zLmlkfWAsXG4gICAgdXNlcklkOiByZXEudXNlci5pZCxcbiAgICBtZXRhZGF0YTogeyBkZWxldGVkU3Vic2NyaWJlcjogdXNlciB9LFxuICB9O1xuICBhd2FpdCBMb2cuY3JlYXRlKGxvZ0RhdGEpO1xuICBsb2dnZXIuaW5mbyhgVXNlciAke3JlcS51c2VyLmVtYWlsfSBkZWxldGVkIGEgc3Vic2NyaWJlciAke3JlcS5wYXJhbXMuaWR9YCk7XG59O1xuZXhwb3J0IGNvbnN0IGdldEFsbFN1YnNjcmliZXJzTG9nID0gYXN5bmMgKHJlcSwgdXNlcikgPT4ge1xuICBjb25zdCBsb2dEYXRhID0ge1xuICAgIGxldmVsOiAnaW5mbycsXG4gICAgbWVzc2FnZTogYFVzZXIgJHtyZXEudXNlci5lbWFpbH0gcmV0cmlldmVkIGFsbCBzdWJzY3JpYmVycyBvZiBuZXdzbGV0dGVyYCxcbiAgICB1c2VySWQ6IHJlcS51c2VyLmlkLFxuICAgIG1ldGFkYXRhOiB7IGRlbGV0ZWRTdWJzY3JpYmVyOiB1c2VyIH0sXG4gIH07XG4gIGF3YWl0IExvZy5jcmVhdGUobG9nRGF0YSk7XG4gIGxvZ2dlci5pbmZvKGBVc2VyICR7cmVxLnVzZXIuZW1haWx9IHJldHJpZXZlZCBhbGwgc3Vic2NyaWJlcnMgb2YgbmV3c2xldHRlcmApO1xufTtcbmV4cG9ydCBjb25zdCBkZWxldGVVc2VyRXJyb3IgPSBhc3luYyAocmVxLCBlcnJvcikgPT4ge1xuICBjb25zdCBsb2dEYXRhID0ge1xuICAgIGxldmVsOiAnZXJyb3InLFxuICAgIG1lc3NhZ2U6IGVycm9yLm1lc3NhZ2UsXG4gICAgdXNlcklkOiByZXEudXNlci5pZCxcbiAgICBtZXRhZGF0YTogeyBlcnJvciB9LFxuICB9O1xuICBhd2FpdCBMb2cuY3JlYXRlKGxvZ0RhdGEpO1xufTtcbmV4cG9ydCBjb25zdCBjcmVhdGVVc2VyID0gYXN5bmMgKHJlcSwgZGF0YSkgPT4ge1xuICBjb25zdCBsb2dEYXRhID0ge1xuICAgIGxldmVsOiAnaW5mbycsXG4gICAgbWVzc2FnZTogYFVzZXIgJHtyZXEudXNlci5lbWFpbH0gc2lnbmVkIHVwIGEgbmV3IHVzZXIgJHtkYXRhLmlkfWAsXG4gICAgdXNlcklkOiByZXEudXNlci5pZCxcbiAgICBtZXRhZGF0YTogeyBuZXdVc2VyOiBkYXRhIH1cbiAgfTtcbiAgYXdhaXQgTG9nLmNyZWF0ZShsb2dEYXRhKTtcbiAgbG9nZ2VyLmluZm8oYFVzZXIgJHtyZXEudXNlci5lbWFpbH0gc2lnbmVkIHVwIGEgbmV3IHVzZXIgJHtkYXRhLmlkfWApO1xufTtcbmV4cG9ydCBjb25zdCBVc2VyRXJyb3IgPSBhc3luYyAocmVxLCBlcnJvcikgPT4ge1xuICBjb25zdCBsb2dEYXRhID0ge1xuICAgIGxldmVsOiAnZXJyb3InLFxuICAgIG1lc3NhZ2U6IGVycm9yLm1lc3NhZ2UsXG4gICAgdXNlcklkOiByZXEudXNlci5pZCxcbiAgICBtZXRhZGF0YTogeyBlcnJvciB9LFxuICB9O1xuICBhd2FpdCBMb2cuY3JlYXRlKGxvZ0RhdGEpO1xufTtcbmV4cG9ydCBjb25zdCB2aWV3QWxsVXNlcnMgPSBhc3luYyAocmVxLCBkYXRhKSA9PiB7XG4gIGNvbnN0IGxvZ0RhdGEgPSB7XG4gICAgbGV2ZWw6ICdpbmZvJyxcbiAgICBtZXNzYWdlOiBgVXNlciAke3JlcS51c2VyLmVtYWlsfSB2aWV3ZWQgYWxsIHVzZXJzYCxcbiAgICB1c2VySWQ6IHJlcS51c2VyLmlkLFxuICAgIG1ldGFkYXRhOiB7IGRhdGEgfSxcbiAgfTtcbiAgYXdhaXQgTG9nLmNyZWF0ZShsb2dEYXRhKTtcbiAgbG9nZ2VyLmluZm8oYFVzZXIgJHtyZXEudXNlci5lbWFpbH0gdmlld2VkIGFsbCB1c2Vyc2ApO1xufTtcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUVBLElBQUFBLE9BQUEsR0FBQUMsc0JBQUEsQ0FBQUMsT0FBQTtBQUNBLElBQUFDLE9BQUEsR0FBQUQsT0FBQTtBQUhBOztBQUtPLE1BQU1FLFVBQVUsR0FBRyxNQUFBQSxDQUFPQyxHQUFHLEVBQUVDLElBQUksS0FBSztFQUM3QyxNQUFNQyxPQUFPLEdBQUc7SUFDZEMsS0FBSyxFQUFFLE1BQU07SUFDYkMsT0FBTyxFQUFHLFFBQU9KLEdBQUcsQ0FB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","map":{"version":3,"names":["_logger","_interopRequireDefault","require","_models","updateUser","req","user","logData","level","message","email","params","id","userId","metadata","updatedUser","Log","create","logger","info","exports","updateUserError","error","deleteUser","deletedUser","deleteSubscriberLog","deletedSubscriber","getAllSubscribersLog","deleteUserError","createUser","data","newUser","UserError","viewAllUsers"],"sourceRoot":"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/loggers/","sources":["Admin.logger.js"],"sourcesContent":["/* eslint-disable import/named */\n\nimport logger from '../configs/logger';\nimport { Log } from '../database/models';\n\nexport const updateUser = async (req, user) => {\n  const logData = {\n    level: 'info',\n    message: `User ${req.user.email} updated user ${req.params.id}`,\n    userId: req.user.id,\n    metadata: { updatedUser: user },\n  };\n  await Log.create(logData);\n  logger.info(`User ${req.user.email} updated user ${req.params.id}`);\n};\nexport const updateUserError = async (req, error) => {\n  const logData = {\n    level: 'error',\n    message: error.message,\n    userId: req.user.id,\n    metadata: { error },\n  };\n  await Log.create(logData);\n};\nexport const deleteUser = async (req, user) => {\n  const logData = {\n    level: 'info',\n    message: `User ${req.user.email} deleted user ${req.params.id}`,\n    userId: req.user.id,\n    metadata: { deletedUser: user },\n  };\n  await Log.create(logData);\n  logger.info(`User ${req.user.email} deleted user ${req.params.id}`);\n};\nexport const deleteSubscriberLog = async (req, user) => {\n  const logData = {\n    level: 'info',\n    message: `User ${req.user.email} deleted a subscriber ${req.params.id}`,\n    userId: req.user.id,\n    metadata: { deletedSubscriber: user },\n  };\n  await Log.create(logData);\n  logger.info(`User ${req.user.email} deleted a subscriber ${req.params.id}`);\n};\nexport const getAllSubscribersLog = async (req, user) => {\n  const logData = {\n    level: 'info',\n    message: `User ${req.user.email} retrieved all subscribers of newsletter`,\n    userId: req.user.id,\n    metadata: { deletedSubscriber: user },\n  };\n  await Log.create(logData);\n  logger.info(`User ${req.user.email} retrieved all subscribers of newsletter`);\n};\nexport const deleteUserError = async (req, error) => {\n  const logData = {\n    level: 'error',\n    message: error.message,\n    userId: req.user.id,\n    metadata: { error },\n  };\n  await Log.create(logData);\n};\nexport const createUser = async (req, data) => {\n  const logData = {\n    level: 'info',\n    message: `User ${req.user.email} signed up a new user ${data.id}`,\n    userId: req.user.id,\n    metadata: { newUser: data }\n  };\n  await Log.create(logData);\n  logger.info(`User ${req.user.email} signed up a new user ${data.id}`);\n};\nexport const UserError = async (req, error) => {\n  const logData = {\n    level: 'error',\n    message: error.message,\n    userId: req.user.id,\n    metadata: { error },\n  };\n  await Log.create(logData);\n};\nexport const viewAllUsers = async (req, data) => {\n  const logData = {\n    level: 'info',\n    message: `User ${req.user.email} viewed all users`,\n    userId: req.user.id,\n    metadata: { data },\n  };\n  await Log.create(logData);\n  logger.info(`User ${req.user.email} viewed all users`);\n};\n"],"mappings":"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"}},"mtime":1682148437942},"{\"assumptions\":{},\"sourceRoot\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/controllers/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"filename\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/controllers/oauth.controller.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/node_modules/babel-plugin-add-module-exports/lib/index.js\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-runtime\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"regenerator\":true},\"externalDependencies\":[]},{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.21.0:development":{"value":{"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.googlePass = void 0;\nvar _passport = _interopRequireDefault(require(\"passport\"));\nvar _passportGoogleOauth = require(\"passport-google-oauth20\");\n/* eslint-disable import/no-extraneous-dependencies */\n/* eslint-disable import/prefer-default-export */\n/* eslint-disable arrow-body-style */\n/* eslint-disable import/no-unresolved */\n\nconst googlePass = () => {\n  _passport.default.use(new _passportGoogleOauth.Strategy({\n    clientID: process.env.CLIENT_ID,\n    clientSecret: process.env.CLIENT_SECRET,\n    callbackURL: process.env.CALLBACK_URL,\n    scope: ['profile', 'email'],\n    passReqToCallback: true\n  }, (request, accessToken, refreshToken, profile, done) => {\n    return done(null, profile);\n  }));\n  _passport.default.serializeUser((user, done) => {\n    done(null, user);\n  });\n  _passport.default.deserializeUser((user, done) => {\n    done(null, user);\n  });\n};\nexports.googlePass = googlePass;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfcGFzc3BvcnQiLCJfaW50ZXJvcFJlcXVpcmVEZWZhdWx0IiwicmVxdWlyZSIsIl9wYXNzcG9ydEdvb2dsZU9hdXRoIiwiZ29vZ2xlUGFzcyIsInBhc3Nwb3J0IiwidXNlIiwiR29vZ2xlU3RyYXRlZ3kiLCJjbGllbnRJRCIsInByb2Nlc3MiLCJlbnYiLCJDTElFTlRfSUQiLCJjbGllbnRTZWNyZXQiLCJDTElFTlRfU0VDUkVUIiwiY2FsbGJhY2tVUkwiLCJDQUxMQkFDS19VUkwiLCJzY29wZSIsInBhc3NSZXFUb0NhbGxiYWNrIiwicmVxdWVzdCIsImFjY2Vzc1Rva2VuIiwicmVmcmVzaFRva2VuIiwicHJvZmlsZSIsImRvbmUiLCJzZXJpYWxpemVVc2VyIiwidXNlciIsImRlc2VyaWFsaXplVXNlciIsImV4cG9ydHMiXSwic291cmNlUm9vdCI6Ii9Vc2Vycy9hbmRlbGFyd2FuZGEvRGVza3RvcC9lLWNvbW0tdGVhbS1icm9ncmFtbWVycy1ibi9zcmMvY29udHJvbGxlcnMvIiwic291cmNlcyI6WyJvYXV0aC5jb250cm9sbGVyLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qIGVzbGludC1kaXNhYmxlIGltcG9ydC9uby1leHRyYW5lb3VzLWRlcGVuZGVuY2llcyAqL1xuLyogZXNsaW50LWRpc2FibGUgaW1wb3J0L3ByZWZlci1kZWZhdWx0LWV4cG9ydCAqL1xuLyogZXNsaW50LWRpc2FibGUgYXJyb3ctYm9keS1zdHlsZSAqL1xuLyogZXNsaW50LWRpc2FibGUgaW1wb3J0L25vLXVucmVzb2x2ZWQgKi9cbmltcG9ydCBwYXNzcG9ydCBmcm9tICdwYXNzcG9ydCc7XG5pbXBvcnQgeyBTdHJhdGVneSBhcyBHb29nbGVTdHJhdGVneSB9IGZyb20gJ3Bhc3Nwb3J0LWdvb2dsZS1vYXV0aDIwJztcblxuZXhwb3J0IGNvbnN0IGdvb2dsZVBhc3MgPSAoKSA9PiB7XG4gIHBhc3Nwb3J0LnVzZShcbiAgICBuZXcgR29vZ2xlU3RyYXRlZ3koXG4gICAgICB7XG4gICAgICAgIGNsaWVudElEOiBwcm9jZXNzLmVudi5DTElFTlRfSUQsXG4gICAgICAgIGNsaWVudFNlY3JldDogcHJvY2Vzcy5lbnYuQ0xJRU5UX1NFQ1JFVCxcbiAgICAgICAgY2FsbGJhY2tVUkw6IHByb2Nlc3MuZW52LkNBTExCQUNLX1VSTCxcbiAgICAgICAgc2NvcGU6IFsncHJvZmlsZScsICdlbWFpbCddLFxuICAgICAgICBwYXNzUmVxVG9DYWxsYmFjazogdHJ1ZSxcbiAgICAgIH0sXG4gICAgICAocmVxdWVzdCwgYWNjZXNzVG9rZW4sIHJlZnJlc2hUb2tlbiwgcHJvZmlsZSwgZG9uZSkgPT4ge1xuICAgICAgICByZXR1cm4gZG9uZShudWxsLCBwcm9maWxlKTtcbiAgICAgIH1cbiAgICApXG4gICk7XG4gIHBhc3Nwb3J0LnNlcmlhbGl6ZVVzZXIoKHVzZXIsIGRvbmUpID0+IHtcbiAgICBkb25lKG51bGwsIHVzZXIpO1xuICB9KTtcbiAgcGFzc3BvcnQuZGVzZXJpYWxpemVVc2VyKCh1c2VyLCBkb25lKSA9PiB7XG4gICAgZG9uZShudWxsLCB1c2VyKTtcbiAgfSk7XG59O1xuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBSUEsSUFBQUEsU0FBQSxHQUFBQyxzQkFBQSxDQUFBQyxPQUFBO0FBQ0EsSUFBQUMsb0JBQUEsR0FBQUQsT0FBQTtBQUxBO0FBQ0E7QUFDQTtBQUNBOztBQUlPLE1BQU1FLFVBQVUsR0FBR0EsQ0FBQSxLQUFNO0VBQzlCQyxpQkFBUSxDQUFDQyxHQUFHLENBQ1YsSUFBSUMsNkJBQWMsQ0FDaEI7SUFDRUMsUUFBUSxFQUFFQyxPQUFPLENBQUNDLEdBQUcsQ0FBQ0MsU0FBUztJQUMvQkMsWUFBWSxFQUFFSCxPQUFPLENBQUNDLEdBQUcsQ0FBQ0csYUFBYTtJQUN2Q0MsV0FBVyxFQUFFTCxPQUFPLENBQUNDLEdBQUcsQ0FBQ0ssWUFBWTtJQUNyQ0MsS0FBSyxFQUFFLENBQUMsU0FBUyxFQUFFLE9BQU8sQ0FBQztJQUMzQkMsaUJBQWlCLEVBQUU7RUFDckIsQ0FBQyxFQUNELENBQUNDLE9BQU8sRUFBRUMsV0FBVyxFQUFFQyxZQUFZLEVBQUVDLE9BQU8sRUFBRUMsSUFBSSxLQUFLO0lBQ3JELE9BQU9BLElBQUksQ0FBQyxJQUFJLEVBQUVELE9BQU8sQ0FBQztFQUM1QixDQUFDLENBQ0YsQ0FDRjtFQUNEaEIsaUJBQVEsQ0FBQ2tCLGFBQWEsQ0FBQyxDQUFDQyxJQUFJLEVBQUVGLElBQUksS0FBSztJQUNyQ0EsSUFBSSxDQUFDLElBQUksRUFBRUUsSUFBSSxDQUFDO0VBQ2xCLENBQUMsQ0FBQztFQUNGbkIsaUJBQVEsQ0FBQ29CLGVBQWUsQ0FBQyxDQUFDRCxJQUFJLEVBQUVGLElBQUksS0FBSztJQUN2Q0EsSUFBSSxDQUFDLElBQUksRUFBRUUsSUFBSSxDQUFDO0VBQ2xCLENBQUMsQ0FBQztBQUNKLENBQUM7QUFBQ0UsT0FBQSxDQUFBdEIsVUFBQSxHQUFBQSxVQUFBIn0=","map":{"version":3,"names":["_passport","_interopRequireDefault","require","_passportGoogleOauth","googlePass","passport","use","GoogleStrategy","clientID","process","env","CLIENT_ID","clientSecret","CLIENT_SECRET","callbackURL","CALLBACK_URL","scope","passReqToCallback","request","accessToken","refreshToken","profile","done","serializeUser","user","deserializeUser","exports"],"sourceRoot":"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/controllers/","sources":["oauth.controller.js"],"sourcesContent":["/* eslint-disable import/no-extraneous-dependencies */\n/* eslint-disable import/prefer-default-export */\n/* eslint-disable arrow-body-style */\n/* eslint-disable import/no-unresolved */\nimport passport from 'passport';\nimport { Strategy as GoogleStrategy } from 'passport-google-oauth20';\n\nexport const googlePass = () => {\n  passport.use(\n    new GoogleStrategy(\n      {\n        clientID: process.env.CLIENT_ID,\n        clientSecret: process.env.CLIENT_SECRET,\n        callbackURL: process.env.CALLBACK_URL,\n        scope: ['profile', 'email'],\n        passReqToCallback: true,\n      },\n      (request, accessToken, refreshToken, profile, done) => {\n        return done(null, profile);\n      }\n    )\n  );\n  passport.serializeUser((user, done) => {\n    done(null, user);\n  });\n  passport.deserializeUser((user, done) => {\n    done(null, user);\n  });\n};\n"],"mappings":";;;;;;;AAIA,IAAAA,SAAA,GAAAC,sBAAA,CAAAC,OAAA;AACA,IAAAC,oBAAA,GAAAD,OAAA;AALA;AACA;AACA;AACA;;AAIO,MAAME,UAAU,GAAGA,CAAA,KAAM;EAC9BC,iBAAQ,CAACC,GAAG,CACV,IAAIC,6BAAc,CAChB;IACEC,QAAQ,EAAEC,OAAO,CAACC,GAAG,CAACC,SAAS;IAC/BC,YAAY,EAAEH,OAAO,CAACC,GAAG,CAACG,aAAa;IACvCC,WAAW,EAAEL,OAAO,CAACC,GAAG,CAACK,YAAY;IACrCC,KAAK,EAAE,CAAC,SAAS,EAAE,OAAO,CAAC;IAC3BC,iBAAiB,EAAE;EACrB,CAAC,EACD,CAACC,OAAO,EAAEC,WAAW,EAAEC,YAAY,EAAEC,OAAO,EAAEC,IAAI,KAAK;IACrD,OAAOA,IAAI,CAAC,IAAI,EAAED,OAAO,CAAC;EAC5B,CAAC,CACF,CACF;EACDhB,iBAAQ,CAACkB,aAAa,CAAC,CAACC,IAAI,EAAEF,IAAI,KAAK;IACrCA,IAAI,CAAC,IAAI,EAAEE,IAAI,CAAC;EAClB,CAAC,CAAC;EACFnB,iBAAQ,CAACoB,eAAe,CAAC,CAACD,IAAI,EAAEF,IAAI,KAAK;IACvCA,IAAI,CAAC,IAAI,EAAEE,IAAI,CAAC;EAClB,CAAC,CAAC;AACJ,CAAC;AAACE,OAAA,CAAAtB,UAAA,GAAAA,UAAA"}},"mtime":1682148437922},"{\"assumptions\":{},\"sourceRoot\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/configs/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"filename\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/configs/multer.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/node_modules/babel-plugin-add-module-exports/lib/index.js\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-runtime\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"regenerator\":true},\"externalDependencies\":[]},{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.21.0:development":{"value":{"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _multer = _interopRequireDefault(require(\"multer\"));\nvar _path = _interopRequireDefault(require(\"path\"));\n// eslint-disable-next-line import/no-unresolved, import/no-extraneous-dependencies\nvar _default = (0, _multer.default)({\n  storage: _multer.default.diskStorage({}),\n  fileFilter: (req, file, next) => {\n    const ext = _path.default.extname(file.originalname);\n    const supported = ['.png', '.jpg', '.jpeg', '.webp'];\n    if (!supported.includes(ext)) {\n      next(new Error(`file type not supported\\ntry ${supported} are supported`), false);\n    }\n    next(null, true);\n  }\n});\nexports.default = _default;\nmodule.exports = exports.default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfbXVsdGVyIiwiX2ludGVyb3BSZXF1aXJlRGVmYXVsdCIsInJlcXVpcmUiLCJfcGF0aCIsIl9kZWZhdWx0IiwibXVsdGVyIiwic3RvcmFnZSIsImRpc2tTdG9yYWdlIiwiZmlsZUZpbHRlciIsInJlcSIsImZpbGUiLCJuZXh0IiwiZXh0IiwicGF0aCIsImV4dG5hbWUiLCJvcmlnaW5hbG5hbWUiLCJzdXBwb3J0ZWQiLCJpbmNsdWRlcyIsIkVycm9yIiwiZXhwb3J0cyIsImRlZmF1bHQiLCJtb2R1bGUiXSwic291cmNlUm9vdCI6Ii9Vc2Vycy9hbmRlbGFyd2FuZGEvRGVza3RvcC9lLWNvbW0tdGVhbS1icm9ncmFtbWVycy1ibi9zcmMvY29uZmlncy8iLCJzb3VyY2VzIjpbIm11bHRlci5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgaW1wb3J0L25vLXVucmVzb2x2ZWQsIGltcG9ydC9uby1leHRyYW5lb3VzLWRlcGVuZGVuY2llc1xuaW1wb3J0IG11bHRlciBmcm9tICdtdWx0ZXInO1xuaW1wb3J0IHBhdGggZnJvbSAncGF0aCc7XG5cbmV4cG9ydCBkZWZhdWx0IG11bHRlcih7XG4gIHN0b3JhZ2U6IG11bHRlci5kaXNrU3RvcmFnZSh7fSksXG4gIGZpbGVGaWx0ZXI6IChyZXEsIGZpbGUsIG5leHQpID0+IHtcbiAgICBjb25zdCBleHQgPSBwYXRoLmV4dG5hbWUoZmlsZS5vcmlnaW5hbG5hbWUpO1xuICAgIGNvbnN0IHN1cHBvcnRlZCA9IFsnLnBuZycsICcuanBnJywgJy5qcGVnJywgJy53ZWJwJ107XG4gICAgaWYgKCFzdXBwb3J0ZWQuaW5jbHVkZXMoZXh0KSkge1xuICAgICAgbmV4dChuZXcgRXJyb3IoYGZpbGUgdHlwZSBub3Qgc3VwcG9ydGVkXFxudHJ5ICR7c3VwcG9ydGVkfSBhcmUgc3VwcG9ydGVkYCksIGZhbHNlKTtcbiAgICB9XG4gICAgbmV4dChudWxsLCB0cnVlKTtcbiAgfVxufSk7XG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFDQSxJQUFBQSxPQUFBLEdBQUFDLHNCQUFBLENBQUFDLE9BQUE7QUFDQSxJQUFBQyxLQUFBLEdBQUFGLHNCQUFBLENBQUFDLE9BQUE7QUFGQTtBQUFBLElBQUFFLFFBQUEsR0FJZSxJQUFBQyxlQUFNLEVBQUM7RUFDcEJDLE9BQU8sRUFBRUQsZUFBTSxDQUFDRSxXQUFXLENBQUMsQ0FBQyxDQUFDLENBQUM7RUFDL0JDLFVBQVUsRUFBRUEsQ0FBQ0MsR0FBRyxFQUFFQyxJQUFJLEVBQUVDLElBQUksS0FBSztJQUMvQixNQUFNQyxHQUFHLEdBQUdDLGFBQUksQ0FBQ0MsT0FBTyxDQUFDSixJQUFJLENBQUNLLFlBQVksQ0FBQztJQUMzQyxNQUFNQyxTQUFTLEdBQUcsQ0FBQyxNQUFNLEVBQUUsTUFBTSxFQUFFLE9BQU8sRUFBRSxPQUFPLENBQUM7SUFDcEQsSUFBSSxDQUFDQSxTQUFTLENBQUNDLFFBQVEsQ0FBQ0wsR0FBRyxDQUFDLEVBQUU7TUFDNUJELElBQUksQ0FBQyxJQUFJTyxLQUFLLENBQUUsZ0NBQStCRixTQUFVLGdCQUFlLENBQUMsRUFBRSxLQUFLLENBQUM7SUFDbkY7SUFDQUwsSUFBSSxDQUFDLElBQUksRUFBRSxJQUFJLENBQUM7RUFDbEI7QUFDRixDQUFDLENBQUM7QUFBQVEsT0FBQSxDQUFBQyxPQUFBLEdBQUFoQixRQUFBO0FBQUFpQixNQUFBLENBQUFGLE9BQUEsR0FBQUEsT0FBQSxDQUFBQyxPQUFBIn0=","map":{"version":3,"names":["_multer","_interopRequireDefault","require","_path","_default","multer","storage","diskStorage","fileFilter","req","file","next","ext","path","extname","originalname","supported","includes","Error","exports","default","module"],"sourceRoot":"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/configs/","sources":["multer.js"],"sourcesContent":["// eslint-disable-next-line import/no-unresolved, import/no-extraneous-dependencies\nimport multer from 'multer';\nimport path from 'path';\n\nexport default multer({\n  storage: multer.diskStorage({}),\n  fileFilter: (req, file, next) => {\n    const ext = path.extname(file.originalname);\n    const supported = ['.png', '.jpg', '.jpeg', '.webp'];\n    if (!supported.includes(ext)) {\n      next(new Error(`file type not supported\\ntry ${supported} are supported`), false);\n    }\n    next(null, true);\n  }\n});\n"],"mappings":";;;;;;;AACA,IAAAA,OAAA,GAAAC,sBAAA,CAAAC,OAAA;AACA,IAAAC,KAAA,GAAAF,sBAAA,CAAAC,OAAA;AAFA;AAAA,IAAAE,QAAA,GAIe,IAAAC,eAAM,EAAC;EACpBC,OAAO,EAAED,eAAM,CAACE,WAAW,CAAC,CAAC,CAAC,CAAC;EAC/BC,UAAU,EAAEA,CAACC,GAAG,EAAEC,IAAI,EAAEC,IAAI,KAAK;IAC/B,MAAMC,GAAG,GAAGC,aAAI,CAACC,OAAO,CAACJ,IAAI,CAACK,YAAY,CAAC;IAC3C,MAAMC,SAAS,GAAG,CAAC,MAAM,EAAE,MAAM,EAAE,OAAO,EAAE,OAAO,CAAC;IACpD,IAAI,CAACA,SAAS,CAACC,QAAQ,CAACL,GAAG,CAAC,EAAE;MAC5BD,IAAI,CAAC,IAAIO,KAAK,CAAE,gCAA+BF,SAAU,gBAAe,CAAC,EAAE,KAAK,CAAC;IACnF;IACAL,IAAI,CAAC,IAAI,EAAE,IAAI,CAAC;EAClB;AACF,CAAC,CAAC;AAAAQ,OAAA,CAAAC,OAAA,GAAAhB,QAAA;AAAAiB,MAAA,CAAAF,OAAA,GAAAA,OAAA,CAAAC,OAAA"}},"mtime":1682148437920},"{\"assumptions\":{},\"sourceRoot\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/controllers/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"filename\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/controllers/logs.controller.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/node_modules/babel-plugin-add-module-exports/lib/index.js\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-runtime\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"regenerator\":true},\"externalDependencies\":[]},{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.21.0:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getUserLogs = exports.getLogById = exports.getAllLogs = void 0;\nvar _models = require(\"../database/models\");\n/* eslint-disable radix */\n/* eslint-disable import/named */\n\nconst getLogById = async (req, res) => {\n  try {\n    const {\n      id\n    } = req.params;\n    const log = await _models.Log.findByPk(id, {\n      include: 'user',\n      attributes: {\n        exclude: ['metadata']\n      }\n    });\n    if (!log) {\n      return res.status(404).json({\n        message: 'Log not found'\n      });\n    }\n    res.json(log);\n  } catch (error) {\n    res.status(500).json({\n      message: error.message\n    });\n  }\n};\nexports.getLogById = getLogById;\nconst getAllLogs = async (req, res) => {\n  try {\n    const totalCount = await _models.Log.count();\n    // eslint-disable-next-line radix\n    const page = parseInt(req.query.page) || 1;\n    // eslint-disable-next-line radix\n    const limit = parseInt(req.query.limit) || totalCount;\n    const startIndex = (page - 1) * limit;\n    const endIndex = page * limit;\n    const results = {};\n    if (endIndex < totalCount) {\n      results.next = {\n        page: page + 1,\n        limit\n      };\n    }\n    if (startIndex > 0) {\n      results.previous = {\n        page: page - 1,\n        limit\n      };\n    }\n    // eslint-disable-next-line no-use-before-define\n    results.results = await _models.Log.findAll({\n      limit,\n      include: 'user',\n      attributes: {\n        exclude: ['metadata']\n      },\n      offset: startIndex\n    });\n    const allLogs = results;\n    res.status(200).json(allLogs);\n  } catch (error) {\n    res.status(500).json({\n      message: error.message\n    });\n  }\n};\nexports.getAllLogs = getAllLogs;\nconst getUserLogs = async (req, res) => {\n  try {\n    const totalCount = await _models.Log.count({\n      where: {\n        userId: req.user.id\n      }\n    });\n    const page = parseInt(req.query.page) || 1;\n    const limit = parseInt(req.query.limit) || totalCount;\n    const startIndex = (page - 1) * limit;\n    const endIndex = page * limit;\n    const results = {};\n    if (endIndex < totalCount) {\n      results.next = {\n        page: page + 1,\n        limit\n      };\n    }\n    if (startIndex > 0) {\n      results.previous = {\n        page: page - 1,\n        limit\n      };\n    }\n    // eslint-disable-next-line no-use-before-define\n    results.results = await _models.Log.findAll({\n      where: {\n        userId: req.user.id\n      },\n      limit,\n      include: 'user',\n      attributes: {\n        exclude: ['metadata']\n      },\n      offset: startIndex\n    });\n    const allLogs = results;\n    res.status(200).json(allLogs);\n  } catch (error) {\n    res.status(500).json({\n      message: error.message\n    });\n  }\n};\nexports.getUserLogs = getUserLogs;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfbW9kZWxzIiwicmVxdWlyZSIsImdldExvZ0J5SWQiLCJyZXEiLCJyZXMiLCJpZCIsInBhcmFtcyIsImxvZyIsIkxvZyIsImZpbmRCeVBrIiwiaW5jbHVkZSIsImF0dHJpYnV0ZXMiLCJleGNsdWRlIiwic3RhdHVzIiwianNvbiIsIm1lc3NhZ2UiLCJlcnJvciIsImV4cG9ydHMiLCJnZXRBbGxMb2dzIiwidG90YWxDb3VudCIsImNvdW50IiwicGFnZSIsInBhcnNlSW50IiwicXVlcnkiLCJsaW1pdCIsInN0YXJ0SW5kZXgiLCJlbmRJbmRleCIsInJlc3VsdHMiLCJuZXh0IiwicHJldmlvdXMiLCJmaW5kQWxsIiwib2Zmc2V0IiwiYWxsTG9ncyIsImdldFVzZXJMb2dzIiwid2hlcmUiLCJ1c2VySWQiLCJ1c2VyIl0sInNvdXJjZVJvb3QiOiIvVXNlcnMvYW5kZWxhcndhbmRhL0Rlc2t0b3AvZS1jb21tLXRlYW0tYnJvZ3JhbW1lcnMtYm4vc3JjL2NvbnRyb2xsZXJzLyIsInNvdXJjZXMiOlsibG9ncy5jb250cm9sbGVyLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qIGVzbGludC1kaXNhYmxlIHJhZGl4ICovXG4vKiBlc2xpbnQtZGlzYWJsZSBpbXBvcnQvbmFtZWQgKi9cbmltcG9ydCB7IExvZyB9IGZyb20gJy4uL2RhdGFiYXNlL21vZGVscyc7XG5cbmV4cG9ydCBjb25zdCBnZXRMb2dCeUlkID0gYXN5bmMgKHJlcSwgcmVzKSA9PiB7XG4gIHRyeSB7XG4gICAgY29uc3QgeyBpZCB9ID0gcmVxLnBhcmFtcztcblxuICAgIGNvbnN0IGxvZyA9IGF3YWl0IExvZy5maW5kQnlQayhpZCwge1xuICAgICAgaW5jbHVkZTogJ3VzZXInLFxuICAgICAgYXR0cmlidXRlczogeyBleGNsdWRlOiBbJ21ldGFkYXRhJ10gfSxcbiAgICB9KTtcblxuICAgIGlmICghbG9nKSB7XG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDQpLmpzb24oeyBtZXNzYWdlOiAnTG9nIG5vdCBmb3VuZCcgfSk7XG4gICAgfVxuICAgIHJlcy5qc29uKGxvZyk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgcmVzLnN0YXR1cyg1MDApLmpzb24oeyBtZXNzYWdlOiBlcnJvci5tZXNzYWdlIH0pO1xuICB9XG59O1xuXG5leHBvcnQgY29uc3QgZ2V0QWxsTG9ncyA9IGFzeW5jIChyZXEsIHJlcykgPT4ge1xuICB0cnkge1xuICAgIGNvbnN0IHRvdGFsQ291bnQgPSBhd2FpdCBMb2cuY291bnQoKTtcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgcmFkaXhcbiAgICBjb25zdCBwYWdlID0gcGFyc2VJbnQocmVxLnF1ZXJ5LnBhZ2UpIHx8IDE7XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIHJhZGl4XG4gICAgY29uc3QgbGltaXQgPSBwYXJzZUludChyZXEucXVlcnkubGltaXQpIHx8IHRvdGFsQ291bnQ7XG4gICAgY29uc3Qgc3RhcnRJbmRleCA9IChwYWdlIC0gMSkgKiBsaW1pdDtcbiAgICBjb25zdCBlbmRJbmRleCA9IHBhZ2UgKiBsaW1pdDtcbiAgICBjb25zdCByZXN1bHRzID0ge307XG4gICAgaWYgKGVuZEluZGV4IDwgdG90YWxDb3VudCkge1xuICAgICAgcmVzdWx0cy5uZXh0ID0ge1xuICAgICAgICBwYWdlOiBwYWdlICsgMSxcbiAgICAgICAgbGltaXQsXG4gICAgICB9O1xuICAgIH1cbiAgICBpZiAoc3RhcnRJbmRleCA+IDApIHtcbiAgICAgIHJlc3VsdHMucHJldmlvdXMgPSB7XG4gICAgICAgIHBhZ2U6IHBhZ2UgLSAxLFxuICAgICAgICBsaW1pdCxcbiAgICAgIH07XG4gICAgfVxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby11c2UtYmVmb3JlLWRlZmluZVxuICAgIHJlc3VsdHMucmVzdWx0cyA9IGF3YWl0IExvZy5maW5kQWxsKHtcbiAgICAgIGxpbWl0LFxuICAgICAgaW5jbHVkZTogJ3VzZXInLFxuICAgICAgYXR0cmlidXRlczogeyBleGNsdWRlOiBbJ21ldGFkYXRhJ10gfSxcbiAgICAgIG9mZnNldDogc3RhcnRJbmRleCxcbiAgICB9KTtcbiAgICBjb25zdCBhbGxMb2dzID0gcmVzdWx0cztcbiAgICByZXMuc3RhdHVzKDIwMCkuanNvbihhbGxMb2dzKTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7IG1lc3NhZ2U6IGVycm9yLm1lc3NhZ2UgfSk7XG4gIH1cbn07XG5leHBvcnQgY29uc3QgZ2V0VXNlckxvZ3MgPSBhc3luYyAocmVxLCByZXMpID0+IHtcbiAgdHJ5IHtcbiAgICBjb25zdCB0b3RhbENvdW50ID0gYXdhaXQgTG9nLmNvdW50KHsgd2hlcmU6IHsgdXNlcklkOiByZXEudXNlci5pZCB9IH0pO1xuICAgIGNvbnN0IHBhZ2UgPSBwYXJzZUludChyZXEucXVlcnkucGFnZSkgfHwgMTtcbiAgICBjb25zdCBsaW1pdCA9IHBhcnNlSW50KHJlcS5xdWVyeS5saW1pdCkgfHwgdG90YWxDb3VudDtcbiAgICBjb25zdCBzdGFydEluZGV4ID0gKHBhZ2UgLSAxKSAqIGxpbWl0O1xuICAgIGNvbnN0IGVuZEluZGV4ID0gcGFnZSAqIGxpbWl0O1xuICAgIGNvbnN0IHJlc3VsdHMgPSB7fTtcbiAgICBpZiAoZW5kSW5kZXggPCB0b3RhbENvdW50KSB7XG4gICAgICByZXN1bHRzLm5leHQgPSB7XG4gICAgICAgIHBhZ2U6IHBhZ2UgKyAxLFxuICAgICAgICBsaW1pdCxcbiAgICAgIH07XG4gICAgfVxuICAgIGlmIChzdGFydEluZGV4ID4gMCkge1xuICAgICAgcmVzdWx0cy5wcmV2aW91cyA9IHtcbiAgICAgICAgcGFnZTogcGFnZSAtIDEsXG4gICAgICAgIGxpbWl0LFxuICAgICAgfTtcbiAgICB9XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXVzZS1iZWZvcmUtZGVmaW5lXG4gICAgcmVzdWx0cy5yZXN1bHRzID0gYXdhaXQgTG9nLmZpbmRBbGwoe1xuICAgICAgd2hlcmU6IHsgdXNlcklkOiByZXEudXNlci5pZCB9LFxuICAgICAgbGltaXQsXG4gICAgICBpbmNsdWRlOiAndXNlcicsXG4gICAgICBhdHRyaWJ1dGVzOiB7IGV4Y2x1ZGU6IFsnbWV0YWRhdGEnXSB9LFxuICAgICAgb2Zmc2V0OiBzdGFydEluZGV4LFxuICAgIH0pO1xuICAgIGNvbnN0IGFsbExvZ3MgPSByZXN1bHRzO1xuICAgIHJlcy5zdGF0dXMoMjAwKS5qc29uKGFsbExvZ3MpO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgbWVzc2FnZTogZXJyb3IubWVzc2FnZSB9KTtcbiAgfVxufTtcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBRUEsSUFBQUEsT0FBQSxHQUFBQyxPQUFBO0FBRkE7QUFDQTs7QUFHTyxNQUFNQyxVQUFVLEdBQUcsTUFBQUEsQ0FBT0MsR0FBRyxFQUFFQyxHQUFHLEtBQUs7RUFDNUMsSUFBSTtJQUNGLE1BQU07TUFBRUM7SUFBRyxDQUFDLEdBQUdGLEdBQUcsQ0FBQ0csTUFBTTtJQUV6QixNQUFNQyxHQUFHLEdBQUcsTUFBTUMsV0FBRyxDQUFDQyxRQUFRLENBQUNKLEVBQUUsRUFBRTtNQUNqQ0ssT0FBTyxFQUFFLE1BQU07TUFDZkMsVUFBVSxFQUFFO1FBQUVDLE9BQU8sRUFBRSxDQUFDLFVBQVU7TUFBRTtJQUN0QyxDQUFDLENBQUM7SUFFRixJQUFJLENBQUNMLEdBQUcsRUFBRTtNQUNSLE9BQU9ILEdBQUcsQ0FBQ1MsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDQyxJQUFJLENBQUM7UUFBRUMsT0FBTyxFQUFFO01BQWdCLENBQUMsQ0FBQztJQUMzRDtJQUNBWCxHQUFHLENBQUNVLElBQUksQ0FBQ1AsR0FBRyxDQUFDO0VBQ2YsQ0FBQyxDQUFDLE9BQU9TLEtBQUssRUFBRTtJQUNkWixHQUFHLENBQUNTLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQ0MsSUFBSSxDQUFDO01BQUVDLE9BQU8sRUFBRUMsS0FBSyxDQUFDRDtJQUFRLENB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","map":{"version":3,"names":["_models","require","getLogById","req","res","id","params","log","Log","findByPk","include","attributes","exclude","status","json","message","error","exports","getAllLogs","totalCount","count","page","parseInt","query","limit","startIndex","endIndex","results","next","previous","findAll","offset","allLogs","getUserLogs","where","userId","user"],"sourceRoot":"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/controllers/","sources":["logs.controller.js"],"sourcesContent":["/* eslint-disable radix */\n/* eslint-disable import/named */\nimport { Log } from '../database/models';\n\nexport const getLogById = async (req, res) => {\n  try {\n    const { id } = req.params;\n\n    const log = await Log.findByPk(id, {\n      include: 'user',\n      attributes: { exclude: ['metadata'] },\n    });\n\n    if (!log) {\n      return res.status(404).json({ message: 'Log not found' });\n    }\n    res.json(log);\n  } catch (error) {\n    res.status(500).json({ message: error.message });\n  }\n};\n\nexport const getAllLogs = async (req, res) => {\n  try {\n    const totalCount = await Log.count();\n    // eslint-disable-next-line radix\n    const page = parseInt(req.query.page) || 1;\n    // eslint-disable-next-line radix\n    const limit = parseInt(req.query.limit) || totalCount;\n    const startIndex = (page - 1) * limit;\n    const endIndex = page * limit;\n    const results = {};\n    if (endIndex < totalCount) {\n      results.next = {\n        page: page + 1,\n        limit,\n      };\n    }\n    if (startIndex > 0) {\n      results.previous = {\n        page: page - 1,\n        limit,\n      };\n    }\n    // eslint-disable-next-line no-use-before-define\n    results.results = await Log.findAll({\n      limit,\n      include: 'user',\n      attributes: { exclude: ['metadata'] },\n      offset: startIndex,\n    });\n    const allLogs = results;\n    res.status(200).json(allLogs);\n  } catch (error) {\n    res.status(500).json({ message: error.message });\n  }\n};\nexport const getUserLogs = async (req, res) => {\n  try {\n    const totalCount = await Log.count({ where: { userId: req.user.id } });\n    const page = parseInt(req.query.page) || 1;\n    const limit = parseInt(req.query.limit) || totalCount;\n    const startIndex = (page - 1) * limit;\n    const endIndex = page * limit;\n    const results = {};\n    if (endIndex < totalCount) {\n      results.next = {\n        page: page + 1,\n        limit,\n      };\n    }\n    if (startIndex > 0) {\n      results.previous = {\n        page: page - 1,\n        limit,\n      };\n    }\n    // eslint-disable-next-line no-use-before-define\n    results.results = await Log.findAll({\n      where: { userId: req.user.id },\n      limit,\n      include: 'user',\n      attributes: { exclude: ['metadata'] },\n      offset: startIndex,\n    });\n    const allLogs = results;\n    res.status(200).json(allLogs);\n  } catch (error) {\n    res.status(500).json({ message: error.message });\n  }\n};\n"],"mappings":"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"}},"mtime":1685643189436},"{\"assumptions\":{},\"sourceRoot\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/routes/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"filename\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/routes/products.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/node_modules/babel-plugin-add-module-exports/lib/index.js\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-runtime\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"regenerator\":true},\"externalDependencies\":[]},{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.21.0:development":{"value":{"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _express = _interopRequireDefault(require(\"express\"));\nvar _products = _interopRequireDefault(require(\"../controllers/products.controllers\"));\nvar _Checkrole = _interopRequireDefault(require(\"../middlewares/Checkrole\"));\nvar _verifyToken = _interopRequireDefault(require(\"../middlewares/verifyToken\"));\nvar _multer = _interopRequireDefault(require(\"../configs/multer\"));\nvar _productValidate = _interopRequireDefault(require(\"../middlewares/productValidate\"));\nvar _editProductValidate = _interopRequireDefault(require(\"../middlewares/editProductValidate\"));\nvar _isowner = _interopRequireDefault(require(\"../middlewares/isowner\"));\nvar _isProductAvailable = _interopRequireDefault(require(\"../middlewares/isProductAvailable\"));\nvar _catchError = _interopRequireDefault(require(\"../middlewares/catchError\"));\nconst routes = _express.default.Router();\nroutes.get('/categories', _products.default.getCategories);\nroutes.post('/', _verifyToken.default, (0, _Checkrole.default)(['seller', 'admin']), _multer.default.array('images'), _productValidate.default, _products.default.postProduct);\nroutes.patch('/:id', _verifyToken.default, (0, _Checkrole.default)(['seller', 'admin']), _isowner.default, _multer.default.array('images'), _editProductValidate.default, _products.default.editProduct);\nroutes.get('/', _products.default.getProducts);\nroutes.get('/collection', _verifyToken.default, (0, _Checkrole.default)(['seller', 'admin']), _products.default.sellergetProduct);\nroutes.delete('/delete/:id', _verifyToken.default, (0, _Checkrole.default)(['seller', 'admin']), _isowner.default, _products.default.deleteProduct);\nroutes.get('/:id', _isProductAvailable.default, _products.default.getProduct);\nroutes.patch('/:id/available', _verifyToken.default, (0, _Checkrole.default)(['seller', 'admin']), _isowner.default, _products.default.toggleAvailable);\nroutes.get('/buyer/:id', _verifyToken.default, (0, _Checkrole.default)(['buyer', 'admin']), _products.default.getProductById);\nroutes.get('/seller/:id', _verifyToken.default, (0, _Checkrole.default)(['seller', 'admin']), _products.default.getProductByIdAndSeller);\nroutes.get('/:id/reviews', (0, _catchError.default)(_products.default.getProductReviews));\nroutes.get('/search/query', _products.default.searchProduct);\nvar _default = routes;\nexports.default = _default;\nmodule.exports = exports.default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfZXhwcmVzcyIsIl9pbnRlcm9wUmVxdWlyZURlZmF1bHQiLCJyZXF1aXJlIiwiX3Byb2R1Y3RzIiwiX0NoZWNrcm9sZSIsIl92ZXJpZnlUb2tlbiIsIl9tdWx0ZXIiLCJfcHJvZHVjdFZhbGlkYXRlIiwiX2VkaXRQcm9kdWN0VmFsaWRhdGUiLCJfaXNvd25lciIsIl9pc1Byb2R1Y3RBdmFpbGFibGUiLCJfY2F0Y2hFcnJvciIsInJvdXRlcyIsImV4cHJlc3MiLCJSb3V0ZXIiLCJnZXQiLCJQcm9kdWN0cyIsImdldENhdGVnb3JpZXMiLCJwb3N0IiwiaXNBdXRoZW50aWNhdGVkIiwiY2hlY2tSb2xlIiwidXBsb2FkIiwiYXJyYXkiLCJwcm9kdWN0VmF0aWRhdGUiLCJwb3N0UHJvZHVjdCIsInBhdGNoIiwiaXNPd25lciIsImVkaXRQcm9kdWN0VmF0aWRhdGUiLCJlZGl0UHJvZHVjdCIsImdldFByb2R1Y3RzIiwic2VsbGVyZ2V0UHJvZHVjdCIsImRlbGV0ZSIsImRlbGV0ZVByb2R1Y3QiLCJpc0F2YWlsYWJsZSIsImdldFByb2R1Y3QiLCJ0b2dnbGVBdmFpbGFibGUiLCJnZXRQcm9kdWN0QnlJZCIsImdldFByb2R1Y3RCeUlkQW5kU2VsbGVyIiwiY2F0Y2hFcnJvciIsImdldFByb2R1Y3RSZXZpZXdzIiwic2VhcmNoUHJvZHVjdCIsIl9kZWZhdWx0IiwiZXhwb3J0cyIsImRlZmF1bHQiLCJtb2R1bGUiXSwic291cmNlUm9vdCI6Ii9Vc2Vycy9hbmRlbGFyd2FuZGEvRGVza3RvcC9lLWNvbW0tdGVhbS1icm9ncmFtbWVycy1ibi9zcmMvcm91dGVzLyIsInNvdXJjZXMiOlsicHJvZHVjdHMuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGV4cHJlc3MgZnJvbSAnZXhwcmVzcyc7XG5pbXBvcnQgUHJvZHVjdHMgZnJvbSAnLi4vY29udHJvbGxlcnMvcHJvZHVjdHMuY29udHJvbGxlcnMnO1xuaW1wb3J0IGNoZWNrUm9sZSBmcm9tICcuLi9taWRkbGV3YXJlcy9DaGVja3JvbGUnO1xuaW1wb3J0IGlzQXV0aGVudGljYXRlZCBmcm9tICcuLi9taWRkbGV3YXJlcy92ZXJpZnlUb2tlbic7XG5pbXBvcnQgdXBsb2FkIGZyb20gJy4uL2NvbmZpZ3MvbXVsdGVyJztcbmltcG9ydCBwcm9kdWN0VmF0aWRhdGUgZnJvbSAnLi4vbWlkZGxld2FyZXMvcHJvZHVjdFZhbGlkYXRlJztcbmltcG9ydCBlZGl0UHJvZHVjdFZhdGlkYXRlIGZyb20gJy4uL21pZGRsZXdhcmVzL2VkaXRQcm9kdWN0VmFsaWRhdGUnO1xuaW1wb3J0IGlzT3duZXIgZnJvbSAnLi4vbWlkZGxld2FyZXMvaXNvd25lcic7XG5pbXBvcnQgaXNBdmFpbGFibGUgZnJvbSAnLi4vbWlkZGxld2FyZXMvaXNQcm9kdWN0QXZhaWxhYmxlJztcbmltcG9ydCBjYXRjaEVycm9yIGZyb20gJy4uL21pZGRsZXdhcmVzL2NhdGNoRXJyb3InO1xuXG5jb25zdCByb3V0ZXMgPSBleHByZXNzLlJvdXRlcigpO1xuXG5yb3V0ZXMuZ2V0KCcvY2F0ZWdvcmllcycsIFByb2R1Y3RzLmdldENhdGVnb3JpZXMpO1xucm91dGVzLnBvc3QoXG4gICcvJyxcbiAgaXNBdXRoZW50aWNhdGVkLFxuICBjaGVja1JvbGUoWydzZWxsZXInLCAnYWRtaW4nXSksXG4gIHVwbG9hZC5hcnJheSgnaW1hZ2VzJyksXG4gIHByb2R1Y3RWYXRpZGF0ZSxcbiAgUHJvZHVjdHMucG9zdFByb2R1Y3Rcbik7XG5yb3V0ZXMucGF0Y2goXG4gICcvOmlkJyxcbiAgaXNBdXRoZW50aWNhdGVkLFxuICBjaGVja1JvbGUoWydzZWxsZXInLCAnYWRtaW4nXSksXG4gIGlzT3duZXIsXG4gIHVwbG9hZC5hcnJheSgnaW1hZ2VzJyksXG4gIGVkaXRQcm9kdWN0VmF0aWRhdGUsXG4gIFByb2R1Y3RzLmVkaXRQcm9kdWN0XG4pO1xucm91dGVzLmdldCgnLycsIFByb2R1Y3RzLmdldFByb2R1Y3RzKTtcbnJvdXRlcy5nZXQoXG4gICcvY29sbGVjdGlvbicsXG4gIGlzQXV0aGVudGljYXRlZCxcbiAgY2hlY2tSb2xlKFsnc2VsbGVyJywgJ2FkbWluJ10pLFxuICBQcm9kdWN0cy5zZWxsZXJnZXRQcm9kdWN0XG4pO1xucm91dGVzLmRlbGV0ZShcbiAgJy9kZWxldGUvOmlkJyxcbiAgaXNBdXRoZW50aWNhdGVkLFxuICBjaGVja1JvbGUoWydzZWxsZXInLCAnYWRtaW4nXSksXG4gIGlzT3duZXIsXG4gIFByb2R1Y3RzLmRlbGV0ZVByb2R1Y3Rcbik7XG5yb3V0ZXMuZ2V0KCcvOmlkJywgaXNBdmFpbGFibGUsIFByb2R1Y3RzLmdldFByb2R1Y3QpO1xucm91dGVzLnBhdGNoKFxuICAnLzppZC9hdmFpbGFibGUnLFxuICBpc0F1dGhlbnRpY2F0ZWQsXG4gIGNoZWNrUm9sZShbJ3NlbGxlcicsICdhZG1pbiddKSxcbiAgaXNPd25lcixcbiAgUHJvZHVjdHMudG9nZ2xlQXZhaWxhYmxlXG4pO1xuXG5yb3V0ZXMuZ2V0KFxuICAnL2J1eWVyLzppZCcsXG4gIGlzQXV0aGVudGljYXRlZCxcbiAgY2hlY2tSb2xlKFsnYnV5ZXInLCAnYWRtaW4nXSksXG4gIFByb2R1Y3RzLmdldFByb2R1Y3RCeUlkXG4pO1xucm91dGVzLmdldChcbiAgJy9zZWxsZXIvOmlkJyxcbiAgaXNBdXRoZW50aWNhdGVkLFxuICBjaGVja1JvbGUoWydzZWxsZXInLCAnYWRtaW4nXSksXG4gIFByb2R1Y3RzLmdldFByb2R1Y3RCeUlkQW5kU2VsbGVyXG4pO1xucm91dGVzLmdldCgnLzppZC9yZXZpZXdzJywgY2F0Y2hFcnJvcihQcm9kdWN0cy5nZXRQcm9kdWN0UmV2aWV3cykpO1xuXG5yb3V0ZXMuZ2V0KCcvc2VhcmNoL3F1ZXJ5JywgUHJvZHVjdHMuc2VhcmNoUHJvZHVjdCk7XG5leHBvcnQgZGVmYXVsdCByb3V0ZXM7XG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBQSxJQUFBQSxRQUFBLEdBQUFDLHNCQUFBLENBQUFDLE9BQUE7QUFDQSxJQUFBQyxTQUFBLEdBQUFGLHNCQUFBLENBQUFDLE9BQUE7QUFD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","map":{"version":3,"names":["_express","_interopRequireDefault","require","_products","_Checkrole","_verifyToken","_multer","_productValidate","_editProductValidate","_isowner","_isProductAvailable","_catchError","routes","express","Router","get","Products","getCategories","post","isAuthenticated","checkRole","upload","array","productVatidate","postProduct","patch","isOwner","editProductVatidate","editProduct","getProducts","sellergetProduct","delete","deleteProduct","isAvailable","getProduct","toggleAvailable","getProductById","getProductByIdAndSeller","catchError","getProductReviews","searchProduct","_default","exports","default","module"],"sourceRoot":"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/routes/","sources":["products.js"],"sourcesContent":["import express from 'express';\nimport Products from '../controllers/products.controllers';\nimport checkRole from '../middlewares/Checkrole';\nimport isAuthenticated from '../middlewares/verifyToken';\nimport upload from '../configs/multer';\nimport productVatidate from '../middlewares/productValidate';\nimport editProductVatidate from '../middlewares/editProductValidate';\nimport isOwner from '../middlewares/isowner';\nimport isAvailable from '../middlewares/isProductAvailable';\nimport catchError from '../middlewares/catchError';\n\nconst routes = express.Router();\n\nroutes.get('/categories', Products.getCategories);\nroutes.post(\n  '/',\n  isAuthenticated,\n  checkRole(['seller', 'admin']),\n  upload.array('images'),\n  productVatidate,\n  Products.postProduct\n);\nroutes.patch(\n  '/:id',\n  isAuthenticated,\n  checkRole(['seller', 'admin']),\n  isOwner,\n  upload.array('images'),\n  editProductVatidate,\n  Products.editProduct\n);\nroutes.get('/', Products.getProducts);\nroutes.get(\n  '/collection',\n  isAuthenticated,\n  checkRole(['seller', 'admin']),\n  Products.sellergetProduct\n);\nroutes.delete(\n  '/delete/:id',\n  isAuthenticated,\n  checkRole(['seller', 'admin']),\n  isOwner,\n  Products.deleteProduct\n);\nroutes.get('/:id', isAvailable, Products.getProduct);\nroutes.patch(\n  '/:id/available',\n  isAuthenticated,\n  checkRole(['seller', 'admin']),\n  isOwner,\n  Products.toggleAvailable\n);\n\nroutes.get(\n  '/buyer/:id',\n  isAuthenticated,\n  checkRole(['buyer', 'admin']),\n  Products.getProductById\n);\nroutes.get(\n  '/seller/:id',\n  isAuthenticated,\n  checkRole(['seller', 'admin']),\n  Products.getProductByIdAndSeller\n);\nroutes.get('/:id/reviews', catchError(Products.getProductReviews));\n\nroutes.get('/search/query', Products.searchProduct);\nexport default routes;\n"],"mappings":";;;;;;;AAAA,IAAAA,QAAA,GAAAC,sBAAA,CAAAC,OAAA;AACA,IAAAC,SAAA,GAAAF,sBAAA,CAAAC,OAAA;AACA,IAAAE,UAAA,GAAAH,sBAAA,CAAAC,OAAA;AACA,IAAAG,YAAA,GAAAJ,sBAAA,CAAAC,OAAA;AACA,IAAAI,OAAA,GAAAL,sBAAA,CAAAC,OAAA;AACA,IAAAK,gBAAA,GAAAN,sBAAA,CAAAC,OAAA;AACA,IAAAM,oBAAA,GAAAP,sBAAA,CAAAC,OAAA;AACA,IAAAO,QAAA,GAAAR,sBAAA,CAAAC,OAAA;AACA,IAAAQ,mBAAA,GAAAT,sBAAA,CAAAC,OAAA;AACA,IAAAS,WAAA,GAAAV,sBAAA,CAAAC,OAAA;AAEA,MAAMU,MAAM,GAAGC,gBAAO,CAACC,MAAM,EAAE;AAE/BF,MAAM,CAACG,GAAG,CAAC,aAAa,EAAEC,iBAAQ,CAACC,aAAa,CAAC;AACjDL,MAAM,CAACM,IAAI,CACT,GAAG,EACHC,oBAAe,EACf,IAAAC,kBAAS,EAAC,CAAC,QAAQ,EAAE,OAAO,CAAC,CAAC,EAC9BC,eAAM,CAACC,KAAK,CAAC,QAAQ,CAAC,EACtBC,wBAAe,EACfP,iBAAQ,CAACQ,WAAW,CACrB;AACDZ,MAAM,CAACa,KAAK,CACV,MAAM,EACNN,oBAAe,EACf,IAAAC,kBAAS,EAAC,CAAC,QAAQ,EAAE,OAAO,CAAC,CAAC,EAC9BM,gBAAO,EACPL,eAAM,CAACC,KAAK,CAAC,QAAQ,CAAC,EACtBK,4BAAmB,EACnBX,iBAAQ,CAACY,WAAW,CACrB;AACDhB,MAAM,CAACG,GAAG,CAAC,GAAG,EAAEC,iBAAQ,CAACa,WAAW,CAAC;AACrCjB,MAAM,CAACG,GAAG,CACR,aAAa,EACbI,oBAAe,EACf,IAAAC,kBAAS,EAAC,CAAC,QAAQ,EAAE,OAAO,CAAC,CAAC,EAC9BJ,iBAAQ,CAACc,gBAAgB,CAC1B;AACDlB,MAAM,CAACmB,MAAM,CACX,aAAa,EACbZ,oBAAe,EACf,IAAAC,kBAAS,EAAC,CAAC,QAAQ,EAAE,OAAO,CAAC,CAAC,EAC9BM,gBAAO,EACPV,iBAAQ,CAACgB,aAAa,CACvB;AACDpB,MAAM,CAACG,GAAG,CAAC,MAAM,EAAEkB,2BAAW,EAAEjB,iBAAQ,CAACkB,UAAU,CAAC;AACpDtB,MAAM,CAACa,KAAK,CACV,gBAAgB,EAChBN,oBAAe,EACf,IAAAC,kBAAS,EAAC,CAAC,QAAQ,EAAE,OAAO,CAAC,CAAC,EAC9BM,gBAAO,EACPV,iBAAQ,CAACmB,eAAe,CACzB;AAEDvB,MAAM,CAACG,GAAG,CACR,YAAY,EACZI,oBAAe,EACf,IAAAC,kBAAS,EAAC,CAAC,OAAO,EAAE,OAAO,CAAC,CAAC,EAC7BJ,iBAAQ,CAACoB,cAAc,CACxB;AACDxB,MAAM,CAACG,GAAG,CACR,aAAa,EACbI,oBAAe,EACf,IAAAC,kBAAS,EAAC,CAAC,QAAQ,EAAE,OAAO,CAAC,CAAC,EAC9BJ,iBAAQ,CAACqB,uBAAuB,CACjC;AACDzB,MAAM,CAACG,GAAG,CAAC,cAAc,EAAE,IAAAuB,mBAAU,EAACtB,iBAAQ,CAACuB,iBAAiB,CAAC,CAAC;AAElE3B,MAAM,CAACG,GAAG,CAAC,eAAe,EAAEC,iBAAQ,CAACwB,aAAa,CAAC;AAAC,IAAAC,QAAA,GACrC7B,MAAM;AAAA8B,OAAA,CAAAC,OAAA,GAAAF,QAAA;AAAAG,MAAA,CAAAF,OAAA,GAAAA,OAAA,CAAAC,OAAA"}},"mtime":1685643189467},"{\"assumptions\":{},\"sourceRoot\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/controllers/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"filename\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/controllers/products.controllers.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/node_modules/babel-plugin-add-module-exports/lib/index.js\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-runtime\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"regenerator\":true},\"externalDependencies\":[]},{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.21.0:development":{"value":{"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _dotenv = _interopRequireDefault(require(\"dotenv\"));\nvar _product = _interopRequireDefault(require(\"../services/product.services\"));\nvar _models = require(\"../database/models\");\nvar _mail = require(\"../helpers/mail\");\nvar _emailConfig = require(\"../helpers/emailConfig\");\nvar _mailTemplate = require(\"../helpers/mailTemplate\");\nvar _product2 = require(\"../loggers/product.logger\");\n/* eslint-disable import/named */\n/* eslint-disable max-len */\n/* eslint-disable prefer-destructuring */\n/* eslint-disable require-jsdoc */\n// eslint-disable-next-line import/no-named-as-default, import/no-named-as-default-member\n\n// eslint-disable-next-line import/named\n\n_dotenv.default.config();\nconst validUUID = /^[a-fA-F0-9]{8}-[a-fA-F0-9]{4}-[4][a-fA-F0-9]{3}-[a-fA-F0-9]{4}-[a-fA-F0-9]{12}$/;\n\n/**\n * the product controller class\n */\nclass Products {\n  /**\n   * @param {Object} req\n   * @param {Object} res\n   * @returns {res} response\n   */\n  static async postProduct(req, res) {\n    try {\n      const {\n        error,\n        value\n      } = await _product.default.addProduct(req.body, req.files, req.user);\n      if (error) return res.status(400).json({\n        message: 'bad request',\n        error\n      });\n      const admins = await _models.users.findAll({\n        where: {\n          role: 'admin'\n        }\n      });\n      const newNotification = {\n        message: `new product created by ${req.user.username}`,\n        type: 'New product'\n      };\n      const allNotifications = admins.map(admin => {\n        const newN = {\n          ...newNotification\n        };\n        newN.receiverId = admin.id;\n        const receiver = {\n          username: admin.username,\n          email: admin.email\n        };\n        return {\n          newN,\n          receiver\n        };\n      });\n      allNotifications.forEach(async notification => {\n        const {\n          receiver,\n          newN\n        } = notification;\n        const notifyEmail = (0, _mailTemplate.notificationTemplate)(receiver.username, newN.message, newN.type, `${process.env.SWAGGER_SERVER}/products/${value.id}`);\n        (0, _mail.sendEmail)((0, _emailConfig.emailConfig)({\n          email: receiver.email,\n          subject: 'Notification !! new product',\n          content: notifyEmail\n        }));\n        await _models.notifications.create(newN);\n      });\n      (0, _product2.createProduct)(req, value);\n      return res.status(201).json({\n        message: 'product created',\n        product: value\n      });\n    } catch (error) {\n      (0, _product2.productError)(req, error);\n      return res.status(500).json({\n        message: 'server error',\n        error\n      });\n    }\n  }\n\n  /**\n   * @param {Object} req\n   * @param {Object} res\n   * @returns {res} response\n   */\n  static async getProductReviews(req, res) {\n    try {\n      const productId = req.params.id;\n      const totalCount = await _models.reviews.count({\n        where: {\n          productId\n        }\n      });\n      const page = Number(req.query.page) || 1;\n      const limit = Number(req.query.limit) || totalCount;\n      const startIndex = (page - 1) * limit;\n      const endIndex = page * limit;\n      const results = {};\n      if (endIndex < totalCount) {\n        results.next = {\n          page: page + 1,\n          limit\n        };\n      }\n      if (startIndex > 0) {\n        results.previous = {\n          page: page - 1,\n          limit\n        };\n      }\n      results.totalCount = totalCount;\n      results.totalPages = Math.ceil(totalCount / limit);\n      results.results = await _models.reviews.findAll({\n        where: {\n          productId\n        },\n        limit,\n        include: [{\n          model: _models.users,\n          as: 'reviewer',\n          attributes: ['username', 'email', 'avatar']\n        }],\n        offset: startIndex\n      });\n      const productReviews = await _models.reviews.findAll({\n        where: {\n          productId\n        }\n      });\n      const AvRate = productReviews.reduce((sum, review) => sum + review.rating, 0) / productReviews.length;\n      const ratingCounts = productReviews.reduce((counts, review) => {\n        const {\n          rating\n        } = review;\n        counts[rating] = (counts[rating] || 0) + 1;\n        return counts;\n      }, {});\n      const totalRates = {\n        1: ratingCounts[1] || 0,\n        2: ratingCounts[2] || 0,\n        3: ratingCounts[3] || 0,\n        4: ratingCounts[4] || 0,\n        5: ratingCounts[5] || 0,\n        AvRate\n      };\n      const allReviews = results;\n      (0, _product2.retrieveAllProduct)();\n      res.status(200).json({\n        allReviews,\n        totalRates\n      });\n      // eslint-disable-next-line no-shadow\n    } catch (err) {\n      console.log(err);\n      return res.status(500).json({\n        error: err.message,\n        message: 'Failed to retrieve products'\n      });\n    }\n  }\n\n  /**\n   * @param {Object} req\n   * @param {Object} res\n   * @returns {res} response\n   */\n  static async editProduct(req, res) {\n    try {\n      const {\n        error,\n        value\n      } = await _product.default.editProduct(req.body, req.files, req.product);\n      if (error) return res.status(400).json({\n        message: 'bad request',\n        error\n      });\n      const productId = req.params.id;\n      const wishers = await _models.wishlists.findAll({\n        where: {\n          productId\n        }\n      });\n      const NewWishers = wishers.map(wish => wish.userId);\n      const emails = await _models.users.findAll({\n        where: {\n          id: NewWishers\n        }\n      });\n      const newNotification = {\n        message: ' Product  you previously wished for  have been updated ',\n        type: 'product updated'\n      };\n      const allNotifications = emails.map(email => {\n        const newN = {\n          ...newNotification\n        };\n        newN.receiverId = email.id;\n        const receiver = {\n          username: email.username,\n          email: email.email\n        };\n        return {\n          newN,\n          receiver\n        };\n      });\n      allNotifications.forEach(async notification => {\n        const {\n          receiver,\n          newN\n        } = notification;\n        const notifyEmail = (0, _mailTemplate.notificationTemplate)(receiver.username, newN.message, newN.type, `${process.env.SWAGGER_SERVER}/products/${value.id}`);\n        (0, _mail.sendEmail)((0, _emailConfig.emailConfig)({\n          email: receiver.email,\n          subject: 'Notification !! Updates',\n          content: notifyEmail\n        }));\n        await _models.notifications.create(newN);\n      });\n      (0, _product2.updateProduct)(req, value);\n      return res.status(200).json({\n        message: 'product edited',\n        product: value\n      });\n    } catch (error) {\n      (0, _product2.productError)(req, error);\n      return res.status(500).json({\n        message: 'server error',\n        error\n      });\n    }\n  }\n\n  /**\n   * @param {Object} req\n   * @param {Object} res\n   * @returns {res} response\n   */\n  static async getProducts(req, res) {\n    try {\n      const totalCount = await _models.products.count({\n        where: {\n          available: true\n        }\n      });\n      const page = Number(req.query.page) || 1;\n      const limit = Number(req.query.limit) || totalCount;\n      const startIndex = (page - 1) * limit;\n      const endIndex = page * limit;\n      const results = {};\n      if (endIndex < totalCount) {\n        results.next = {\n          page: page + 1,\n          limit\n        };\n      }\n      if (startIndex > 0) {\n        results.previous = {\n          page: page - 1,\n          limit\n        };\n      }\n      results.totalCount = totalCount;\n      results.totalPages = Math.ceil(totalCount / limit);\n      results.results = await _models.products.findAll({\n        where: {\n          available: true\n        },\n        limit,\n        attributes: {\n          exclude: ['sellerId']\n        },\n        include: [{\n          model: _models.users,\n          as: 'seller',\n          attributes: ['username', 'email']\n        }],\n        offset: startIndex\n      });\n      const allproducts = results;\n      (0, _product2.retrieveAllProduct)();\n      res.status(200).json({\n        message: 'All products retrieved successfully',\n        allproducts\n      });\n      // eslint-disable-next-line no-shadow\n    } catch (err) {\n      // productError(req, err);\n      return res.status(500).json({\n        error: err.message,\n        message: 'Failed to retrieve products'\n      });\n    }\n  }\n\n  /**\n   * @param {Object} req\n   * @param {Object} res\n   * @returns {res} response\n   */\n  static async deleteProduct(req, res) {\n    try {\n      const product = req.product;\n      const wishers = await _models.wishlists.findAll({\n        where: {\n          productId: product.id\n        }\n      });\n      const NewWishers = wishers.map(wish => wish.userId);\n      await _models.wishlists.destroy({\n        where: {\n          productId: product.id\n        }\n      });\n      const emails = await _models.users.findAll({\n        where: {\n          id: NewWishers\n        }\n      });\n      const newNotification = {\n        message: ' Product  you previously wished for  have permanently deleted',\n        type: 'product deleted'\n      };\n      const allNotifications = emails.map(email => {\n        const newN = {\n          ...newNotification\n        };\n        newN.receiverId = email.id;\n        const receiver = {\n          username: email.username,\n          email: email.email\n        };\n        return {\n          newN,\n          receiver\n        };\n      });\n      allNotifications.forEach(async notification => {\n        const {\n          receiver,\n          newN\n        } = notification;\n        const notifyEmail = (0, _mailTemplate.notificationTemplate)(receiver.username, newN.message, newN.type, `${process.env.SWAGGER_SERVER}/products/${product.id}`);\n        (0, _mail.sendEmail)((0, _emailConfig.emailConfig)({\n          email: receiver.email,\n          subject: 'Notification !! Updates',\n          content: notifyEmail\n        }));\n        await _models.notifications.create(newN);\n      });\n      await product.destroy();\n      (0, _product2.deleteProducts)(req, product);\n      return res.status(200).json({\n        status: 200,\n        message: 'Product deleted successfully',\n        item: product\n      });\n    } catch (error) {\n      (0, _product2.productError)(req, error);\n      return res.status(500).json({\n        status: 500,\n        error: error.message\n      });\n    }\n  }\n\n  /**\n   * @param {Object} req\n   * @param {Object} res\n   * @returns {res} response\n   */\n  static async getProduct(req, res) {\n    try {\n      // if (req.product) return res.status(200).json(req.product);\n\n      const product = await _product.default.getProduct(req.params.id);\n      if (!product || product === null) {\n        return res.status(404).json({\n          message: 'product not found'\n        });\n      }\n      (0, _product2.retrieveOneProduct)(req, product);\n      return res.status(200).json(product);\n    } catch (err) {\n      // productError(req, err);\n      return res.status(500).json({\n        error: err.message,\n        message: 'server product'\n      });\n    }\n  }\n\n  /**\n   * @param {Object} req\n   * @param {Object} res\n   * @returns {res} response\n   */\n  static async sellergetProduct(req, res) {\n    try {\n      // eslint-disable-next-line no-shadow\n      const totalCount = await _models.products.count({\n        where: {\n          sellerId: req.user.id\n        }\n      });\n      // eslint-disable-next-line radix\n      const page = parseInt(req.query.page) || 1;\n      // eslint-disable-next-line radix\n      const limit = parseInt(req.query.limit) || totalCount;\n      const startIndex = (page - 1) * limit;\n      const endIndex = page * limit;\n      const results = {};\n      if (endIndex < totalCount) {\n        results.next = {\n          page: page + 1,\n          limit\n        };\n      }\n      if (startIndex > 0) {\n        results.previous = {\n          page: page - 1,\n          limit\n        };\n      }\n      results.totalCount = totalCount;\n      results.totalPages = Math.ceil(totalCount / limit);\n      results.results = await _models.products.findAll({\n        where: {\n          sellerId: req.user.id\n        },\n        limit,\n        attributes: {\n          exclude: ['sellerId']\n        },\n        include: [{\n          model: _models.users,\n          as: 'seller',\n          attributes: ['username', 'email']\n        }],\n        offset: startIndex\n      });\n      const allProducts = results;\n      (0, _product2.sellerProduct)(req, allProducts);\n      res.status(200).json({\n        message: 'All products retrieved successfully',\n        allProducts\n      });\n    } catch (err) {\n      (0, _product2.productError)(req, err);\n      return res.status(500).json({\n        error: err.message,\n        message: 'Failed to retrieve products'\n      });\n    }\n  }\n  static async getProductById(req, res) {\n    const id = req.params.id;\n    if (!validUUID.test(id)) {\n      return res.status(404).json({\n        message: 'Product not found'\n      });\n    }\n    try {\n      const product = await _product.default.getProductById(id);\n      if (!product) {\n        return res.status(404).json({\n          message: 'Product not found'\n        });\n      }\n      (0, _product2.retrieveOneProduct)(req, id);\n      return res.status(200).json({\n        product\n      });\n    } catch (err) {\n      (0, _product2.productError)(req, err);\n      return res.status(500).json({\n        error: err.message,\n        message: 'Failed to retrieve product'\n      });\n    }\n  }\n  static async getProductByIdAndSeller(req, res) {\n    const id = req.params.id;\n    if (!validUUID.test(id)) {\n      return res.status(404).json({\n        message: 'Product not found'\n      });\n    }\n    try {\n      const product = await _product.default.getProductByIdAndSeller(id, req.user.id);\n      if (!product) {\n        return res.status(404).json({\n          message: 'Product not found in your collection'\n        });\n      }\n      (0, _product2.retrieveOneProduct)(req, id);\n      return res.status(200).json({\n        product\n      });\n    } catch (err) {\n      (0, _product2.productError)(req, err);\n      if (err.name === 'CastError' || err.name === 'NotFoundError') {\n        return res.status(400).json({\n          message: 'Invalid product ID'\n        });\n      }\n      return res.status(500).json({\n        error: err.message,\n        message: 'Failed to retrieve product'\n      });\n    }\n  }\n\n  /**\n   * @param {Object} req\n   * @param {Object} res\n   * @returns {res} response\n   */\n  static async toggleAvailable(req, res) {\n    try {\n      const product = await _product.default.changeAvailable(req.product);\n      const productId = req.params.id;\n      const wishers = await _models.wishlists.findAll({\n        where: {\n          productId\n        }\n      });\n      const NewWishers = wishers.map(wish => wish.userId);\n      const emails = await _models.users.findAll({\n        where: {\n          id: NewWishers\n        }\n      });\n      const newNotification = {\n        message: ' Product  you wished for is currently unavailable',\n        type: 'product updated'\n      };\n      const allNotifications = emails.map(email => {\n        const newN = {\n          ...newNotification\n        };\n        newN.receiverId = email.id;\n        const receiver = {\n          username: email.username,\n          email: email.email\n        };\n        return {\n          newN,\n          receiver\n        };\n      });\n      allNotifications.forEach(async notification => {\n        const {\n          receiver,\n          newN\n        } = notification;\n        const notifyEmail = (0, _mailTemplate.notificationTemplate)(receiver.username, newN.message, newN.type, `${process.env.SWAGGER_SERVER}/products/${product.id}`);\n        (0, _mail.sendEmail)((0, _emailConfig.emailConfig)({\n          email: receiver.email,\n          subject: 'Notification !! Updates',\n          content: notifyEmail\n        }));\n        await _models.notifications.create(newN);\n      });\n      (0, _product2.toggleAvailablePro)(req, product);\n      return res.status(201).json({\n        message: 'availablility changed',\n        product\n      });\n    } catch (err) {\n      (0, _product2.productError)(req, err);\n      return res.status(500).json({\n        error: err.message,\n        message: 'Failed to retrieve products'\n      });\n    }\n  }\n  static async getCategories(req, res) {\n    try {\n      const allCategories = await _models.category.findAll();\n      res.status(200).json(allCategories);\n    } catch (error) {\n      // productError(req, error);\n      res.status(500).json({\n        message: error.message\n      });\n    }\n  }\n  static async searchProduct(req, res) {\n    try {\n      // eslint-disable-next-line no-shadow\n      const products = await _product.default.searchProducts(req.query.q, req.query.min, req.query.max, req.query.category, req.query.page, req.query.limit);\n      (0, _product2.searchPro)(products);\n      res.status(200).json({\n        allproducts: products\n      });\n    } catch (error) {\n      (0, _product2.productError)(req, error);\n      res.status(500).json({\n        message: error.message\n      });\n    }\n  }\n}\nexports.default = Products;\nmodule.exports = exports.default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfZG90ZW52IiwiX2ludGVyb3BSZXF1aXJlRGVmYXVsdCIsInJlcXVpcmUiLCJfcHJvZHVjdCIsIl9tb2RlbHMiLCJfbWFpbCIsIl9lbWFpbENvbmZpZyIsIl9tYWlsVGVtcGxhdGUiLCJfcHJvZHVjdDIiLCJkb3RlbnYiLCJjb25maWciLCJ2YWxpZFVVSUQiLCJQcm9kdWN0cyIsInBvc3RQcm9kdWN0IiwicmVxIiwicmVzIiwiZXJyb3IiLCJ2YWx1ZSIsIlByb2R1Y3QiLCJhZGRQcm9kdWN0IiwiYm9keSIsImZpbGVzIiwidXNlciIsInN0YXR1cyIsImpzb24iLCJtZXNzYWdlIiwiYWRtaW5zIiwidXNlcnMiLCJmaW5kQWxsIiwid2hlcmUiLCJyb2xlIiwibmV3Tm90aWZpY2F0aW9uIiwidXNlcm5hbWUiLCJ0eXBlIiwiYWxsTm90aWZpY2F0aW9ucyIsIm1hcCIsImFkbWluIiwibmV3TiIsInJlY2VpdmVySWQiLCJpZCIsInJlY2VpdmVyIiwiZW1haWwiLCJmb3JFYWNoIiwibm90aWZpY2F0aW9uIiwibm90aWZ5RW1haWwiLCJub3RpZmljYXRpb25UZW1wbGF0ZSIsInByb2Nlc3MiLCJlbnYiLCJTV0FHR0VSX1NFUlZFUiIsInNlbmRFbWFpbCIsImVtYWlsQ29uZmlnIiwic3ViamVjdCIsImNvbnRlbnQiLCJub3RpZmljYXRpb25zIiwiY3JlYXRlIiwiY3JlYXRlUHJvZHVjdCIsInByb2R1Y3QiLCJwcm9kdWN0RXJyb3IiLCJnZXRQcm9kdWN0UmV2aWV3cyIsInByb2R1Y3RJZCIsInBhcmFtcyIsInRvdGFsQ291bnQiLCJyZXZpZXdzIiwiY291bnQiLCJwYWdlIiwiTnVtYmVyIiwicXVlcnkiLCJsaW1pdCIsInN0YXJ0SW5kZXgiLCJlbmRJbmRleCIsInJlc3VsdHMiLCJuZXh0IiwicHJldmlvdXMiLCJ0b3RhbFBhZ2VzIiwiTWF0aCIsImNlaWwiLCJpbmNsdWRlIiwibW9kZWwiLCJhcyIsImF0dHJpYnV0ZXMiLCJvZmZzZXQiLCJwcm9kdWN0UmV2aWV3cyIsIkF2UmF0ZSIsInJlZHVjZSIsInN1bSIsInJldmlldyIsInJhdGluZyIsImxlbmd0aCIsInJhdGluZ0NvdW50cyIsImNvdW50cyIsInRvdGFsUmF0ZXMiLCJhbGxSZXZpZXdzIiwicmV0cmlldmVBbGxQcm9kdWN0IiwiZXJyIiwiY29uc29sZSIsImxvZyIsImVkaXRQcm9kdWN0Iiwid2lzaGVycyIsIndpc2hsaXN0cyIsIk5ld1dpc2hlcnMiLCJ3aXNoIiwidXNlcklkIiwiZW1haWxzIiwidXBkYXRlUHJvZHVjdCIsImdldFByb2R1Y3RzIiwicHJvZHVjdHMiLCJhdmFpbGFibGUiLCJleGNsdWRlIiwiYWxscHJvZHVjdHMiLCJkZWxldGVQcm9kdWN0IiwiZGVzdHJveSIsImRlbGV0ZVByb2R1Y3RzIiwiaXRlbSIsImdldFByb2R1Y3QiLCJyZXRyaWV2ZU9uZVByb2R1Y3QiLCJzZWxsZXJnZXRQcm9kdWN0Iiwic2VsbGVySWQiLCJwYXJzZUludCIsImFsbFByb2R1Y3RzIiwic2VsbGVyUHJvZHVjdCIsImdldFByb2R1Y3RCeUlkIiwidGVzdCIsImdldFByb2R1Y3RCeUlkQW5kU2VsbGVyIiwibmFtZSIsInRvZ2dsZUF2YWlsYWJsZSIsImNoYW5nZUF2YWlsYWJsZSIsInRvZ2dsZUF2YWlsYWJsZVBybyIsImdldENhdGVnb3JpZXMiLCJhbGxDYXRlZ29yaWVzIiwiY2F0ZWdvcnkiLCJzZWFyY2hQcm9kdWN0Iiwic2VhcmNoUHJvZHVjdHMiLCJxIiwibWluIiwibWF4Iiwic2VhcmNoUHJvIiwiZXhwb3J0cyIsImRlZmF1bHQiLCJtb2R1bGUiXSwic291cmNlUm9vdCI6Ii9Vc2Vycy9hbmRlbGFyd2FuZGEvRGVza3RvcC9lLWNvbW0tdGVhbS1icm9ncmFtbWVycy1ibi9zcmMvY29udHJvbGxlcnMvIiwic291cmNlcyI6WyJwcm9kdWN0cy5jb250cm9sbGVycy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKiBlc2xpbnQtZGlzYWJsZSBpbXBvcnQvbmFtZWQgKi9cbi8qIGVzbGludC1kaXNhYmxlIG1heC1sZW4gKi9cbi8qIGVzbGludC1kaXNhYmxlIHByZWZlci1kZXN0cnVjdHVyaW5nICovXG4vKiBlc2xpbnQtZGlzYWJsZSByZXF1aXJlLWpzZG9jICovXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgaW1wb3J0L25vLW5hbWVkLWFzLWRlZmF1bHQsIGltcG9ydC9uby1uYW1lZC1hcy1kZWZhdWx0LW1lbWJlclxuaW1wb3J0IGRvdGVudiBmcm9tICdkb3RlbnYnO1xuaW1wb3J0IFByb2R1Y3QgZnJvbSAnLi4vc2VydmljZXMvcHJvZHVjdC5zZXJ2aWNlcyc7XG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgaW1wb3J0L25hbWVkXG5pbXBvcnQge1xuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgaW1wb3J0L25hbWVkXG4gIHVzZXJzLFxuICByZXZpZXdzLFxuICBub3RpZmljYXRpb25zLFxuICB3aXNobGlzdHMsXG4gIHByb2R1Y3RzLFxuICBjYXRlZ29yeSxcbn0gZnJvbSAnLi4vZGF0YWJhc2UvbW9kZWxzJztcbmltcG9ydCB7IHNlbmRFbWFpbCB9IGZyb20gJy4uL2hlbHBlcnMvbWFpbCc7XG5pbXBvcnQgeyBlbWFpbENvbmZpZyB9IGZyb20gJy4uL2hlbHBlcnMvZW1haWxDb25maWcnO1xuaW1wb3J0IHsgbm90aWZpY2F0aW9uVGVtcGxhdGUgfSBmcm9tICcuLi9oZWxwZXJzL21haWxUZW1wbGF0ZSc7XG5pbXBvcnQge1xuICBkZWxldGVQcm9kdWN0cyxcbiAgc2VsbGVyUHJvZHVjdCxcbiAgY3JlYXRlUHJvZHVjdCxcbiAgcmV0cmlldmVBbGxQcm9kdWN0LFxuICBwcm9kdWN0RXJyb3IsXG4gIHVwZGF0ZVByb2R1Y3QsXG4gIHNlYXJjaFBybyxcbiAgdG9nZ2xlQXZhaWxhYmxlUHJvLFxuICByZXRyaWV2ZU9uZVByb2R1Y3QsXG5cbn0gZnJvbSAnLi4vbG9nZ2Vycy9wcm9kdWN0LmxvZ2dlcic7XG5cbmRvdGVudi5jb25maWcoKTtcbmNvbnN0IHZhbGlkVVVJRCA9IC9eW2EtZkEtRjAtOV17OH0tW2EtZkEtRjAtOV17NH0tWzRdW2EtZkEtRjAtOV17M30tW2EtZkEtRjAtOV17NH0tW2EtZkEtRjAtOV17MTJ9JC87XG5cbi8qKlxuICogdGhlIHByb2R1Y3QgY29udHJvbGxlciBjbGFzc1xuICovXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQcm9kdWN0cyB7XG4gIC8qKlxuICAgKiBAcGFyYW0ge09iamVjdH0gcmVxXG4gICAqIEBwYXJhbSB7T2JqZWN0fSByZXNcbiAgICogQHJldHVybnMge3Jlc30gcmVzcG9uc2VcbiAgICovXG4gIHN0YXRpYyBhc3luYyBwb3N0UHJvZHVjdChyZXEsIHJlcykge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCB7IGVycm9yLCB2YWx1ZSB9ID0gYXdhaXQgUHJvZHVjdC5hZGRQcm9kdWN0KFxuICAgICAgICByZXEuYm9keSxcbiAgICAgICAgcmVxLmZpbGVzLFxuICAgICAgICByZXEudXNlclxuICAgICAgKTtcbiAgICAgIGlmIChlcnJvcikgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgbWVzc2FnZTogJ2JhZCByZXF1ZXN0JywgZXJyb3IgfSk7XG4gICAgICBjb25zdCBhZG1pbnMgPSBhd2FpdCB1c2Vycy5maW5kQWxsKHsgd2hlcmU6IHsgcm9sZTogJ2FkbWluJyB9IH0pO1xuXG4gICAgICBjb25zdCBuZXdOb3RpZmljYXRpb24gPSB7XG4gICAgICAgIG1lc3NhZ2U6IGBuZXcgcHJvZHVjdCBjcmVhdGVkIGJ5ICR7cmVxLnVzZXIudXNlcm5hbWV9YCxcbiAgICAgICAgdHlwZTogJ05ldyBwcm9kdWN0JyxcbiAgICAgIH07XG4gICAgICBjb25zdCBhbGxOb3RpZmljYXRpb25zID0gYWRtaW5zLm1hcCgoYWRtaW4pID0+IHtcbiAgICAgICAgY29uc3QgbmV3TiA9IHsgLi4ubmV3Tm90aWZpY2F0aW9uIH07XG4gICAgICAgIG5ld04ucmVjZWl2ZXJJZCA9IGFkbWluLmlkO1xuICAgICAgICBjb25zdCByZWNlaXZlciA9IHtcbiAgICAgICAgICB1c2VybmFtZTogYWRtaW4udXNlcm5hbWUsXG4gICAgICAgICAgZW1haWw6IGFkbWluLmVtYWlsLFxuICAgICAgICB9O1xuICAgICAgICByZXR1cm4geyBuZXdOLCByZWNlaXZlciB9O1xuICAgICAgfSk7XG4gICAgICBhbGxOb3RpZmljYXRpb25zLmZvckVhY2goYXN5bmMgKG5vdGlmaWNhdGlvbikgPT4ge1xuICAgICAgICBjb25zdCB7IHJlY2VpdmVyLCBuZXdOIH0gPSBub3RpZmljYXRpb247XG4gICAgICAgIGNvbnN0IG5vdGlmeUVtYWlsID0gbm90aWZpY2F0aW9uVGVtcGxhdGUoXG4gICAgICAgICAgcmVjZWl2ZXIudXNlcm5hbWUsXG4gICAgICAgICAgbmV3Ti5tZXNzYWdlLFxuICAgICAgICAgIG5ld04udHlwZSxcbiAgICAgICAgICBgJHtwcm9jZXNzLmVudi5TV0FHR0VSX1NFUlZFUn0vcHJvZHVjdHMvJHt2YWx1ZS5pZH1gXG4gICAgICAgICk7XG4gICAgICAgIHNlbmRFbWFpbChcbiAgICAgICAgICBlbWFpbENvbmZpZyh7XG4gICAgICAgICAgICBlbWFpbDogcmVjZWl2ZXIuZW1haWwsXG4gICAgICAgICAgICBzdWJqZWN0OiAnTm90aWZpY2F0aW9uICEhIG5ldyBwcm9kdWN0JyxcbiAgICAgICAgICAgIGNvbnRlbnQ6IG5vdGlmeUVtYWlsLFxuICAgICAgICAgIH0pXG4gICAgICAgICk7XG4gICAgICAgIGF3YWl0IG5vdGlmaWNhdGlvbnMuY3JlYXRlKG5ld04pO1xuICAgICAgfSk7XG4gICAgICBjcmVhdGVQcm9kdWN0KHJlcSwgdmFsdWUpO1xuICAgICAgcmV0dXJuIHJlc1xuICAgICAgICAuc3RhdHVzKDIwMSlcbiAgICAgICAgLmpzb24oeyBtZXNzYWdlOiAncHJvZHVjdCBjcmVhdGVkJywgcHJvZHVjdDogdmFsdWUgfSk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIHByb2R1Y3RFcnJvcihyZXEsIGVycm9yKTtcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDUwMCkuanNvbih7IG1lc3NhZ2U6ICdzZXJ2ZXIgZXJyb3InLCBlcnJvciB9KTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtPYmplY3R9IHJlcVxuICAgKiBAcGFyYW0ge09iamVjdH0gcmVzXG4gICAqIEByZXR1cm5zIHtyZXN9IHJlc3BvbnNlXG4gICAqL1xuICBzdGF0aWMgYXN5bmMgZ2V0UHJvZHVjdFJldmlld3MocmVxLCByZXMpIHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgcHJvZHVjdElkID0gcmVxLnBhcmFtcy5pZDtcbiAgICAgIGNvbnN0IHRvdGFsQ291bnQgPSBhd2FpdCByZXZpZXdzLmNvdW50KHsgd2hlcmU6IHsgcHJvZHVjdElkIH0gfSk7XG4gICAgICBjb25zdCBwYWdlID0gTnVtYmVyKHJlcS5xdWVyeS5wYWdlKSB8fCAxO1xuICAgICAgY29uc3QgbGltaXQgPSBOdW1iZXIocmVxLnF1ZXJ5LmxpbWl0KSB8fCB0b3RhbENvdW50O1xuXG4gICAgICBjb25zdCBzdGFydEluZGV4ID0gKHBhZ2UgLSAxKSAqIGxpbWl0O1xuICAgICAgY29uc3QgZW5kSW5kZXggPSBwYWdlICogbGltaXQ7XG4gICAgICBjb25zdCByZXN1bHRzID0ge307XG4gICAgICBpZiAoZW5kSW5kZXggPCB0b3RhbENvdW50KSB7XG4gICAgICAgIHJlc3VsdHMubmV4dCA9IHtcbiAgICAgICAgICBwYWdlOiBwYWdlICsgMSxcbiAgICAgICAgICBsaW1pdCxcbiAgICAgICAgfTtcbiAgICAgIH1cbiAgICAgIGlmIChzdGFydEluZGV4ID4gMCkge1xuICAgICAgICByZXN1bHRzLnByZXZpb3VzID0ge1xuICAgICAgICAgIHBhZ2U6IHBhZ2UgLSAxLFxuICAgICAgICAgIGxpbWl0LFxuICAgICAgICB9O1xuICAgICAgfVxuICAgICAgcmVzdWx0cy50b3RhbENvdW50ID0gdG90YWxDb3VudDtcbiAgICAgIHJlc3VsdHMudG90YWxQYWdlcyA9IE1hdGguY2VpbCh0b3RhbENvdW50IC8gbGltaXQpO1xuICAgICAgcmVzdWx0cy5yZXN1bHRzID0gYXdhaXQgcmV2aWV3cy5maW5kQWxsKHtcbiAgICAgICAgd2hlcmU6IHsgcHJvZHVjdElkIH0sXG4gICAgICAgIGxpbWl0LFxuICAgICAgICBpbmNsdWRlOiBbe1xuICAgICAgICAgIG1vZGVsOiB1c2VycyxcbiAgICAgICAgICBhczogJ3Jldmlld2VyJyxcbiAgICAgICAgICBhdHRyaWJ1dGVzOiBbJ3VzZXJuYW1lJywgJ2VtYWlsJywgJ2F2YXRhciddLFxuICAgICAgICB9XSxcbiAgICAgICAgb2Zmc2V0OiBzdGFydEluZGV4LFxuICAgICAgfSk7XG4gICAgICBjb25zdCBwcm9kdWN0UmV2aWV3cyA9IGF3YWl0IHJldmlld3MuZmluZEFsbCh7IHdoZXJlOiB7IHByb2R1Y3RJZCB9IH0pO1xuICAgICAgY29uc3QgQXZSYXRlID0gcHJvZHVjdFJldmlld3MucmVkdWNlKChzdW0sIHJldmlldykgPT4gc3VtICsgcmV2aWV3LnJhdGluZywgMClcbiAgICAgIC8gcHJvZHVjdFJldmlld3MubGVuZ3RoO1xuICAgICAgY29uc3QgcmF0aW5nQ291bnRzID0gcHJvZHVjdFJldmlld3MucmVkdWNlKChjb3VudHMsIHJldmlldykgPT4ge1xuICAgICAgICBjb25zdCB7IHJhdGluZyB9ID0gcmV2aWV3O1xuICAgICAgICBjb3VudHNbcmF0aW5nXSA9IChjb3VudHNbcmF0aW5nXSB8fCAwKSArIDE7XG4gICAgICAgIHJldHVybiBjb3VudHM7XG4gICAgICB9LCB7fSk7XG4gICAgICBjb25zdCB0b3RhbFJhdGVzID0ge1xuICAgICAgICAxOiByYXRpbmdDb3VudHNbMV0gfHwgMCxcbiAgICAgICAgMjogcmF0aW5nQ291bnRzWzJdIHx8IDAsXG4gICAgICAgIDM6IHJhdGluZ0NvdW50c1szXSB8fCAwLFxuICAgICAgICA0OiByYXRpbmdDb3VudHNbNF0gfHwgMCxcbiAgICAgICAgNTogcmF0aW5nQ291bnRzWzVdIHx8IDAsXG4gICAgICAgIEF2UmF0ZSxcbiAgICAgIH07XG5cbiAgICAgIGNvbnN0IGFsbFJldmlld3MgPSByZXN1bHRzO1xuICAgICAgcmV0cmlldmVBbGxQcm9kdWN0KCk7XG4gICAgICByZXNcbiAgICAgICAgLnN0YXR1cygyMDApXG4gICAgICAgIC5qc29uKHsgYWxsUmV2aWV3cywgdG90YWxSYXRlcyB9KTtcbiAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1zaGFkb3dcbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgIGNvbnNvbGUubG9nKGVycik7XG4gICAgICByZXR1cm4gcmVzXG4gICAgICAgIC5zdGF0dXMoNTAwKVxuICAgICAgICAuanNvbih7IGVycm9yOiBlcnIubWVzc2FnZSwgbWVzc2FnZTogJ0ZhaWxlZCB0byByZXRyaWV2ZSBwcm9kdWN0cycgfSk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7T2JqZWN0fSByZXFcbiAgICogQHBhcmFtIHtPYmplY3R9IHJlc1xuICAgKiBAcmV0dXJucyB7cmVzfSByZXNwb25zZVxuICAgKi9cbiAgc3RhdGljIGFzeW5jIGVkaXRQcm9kdWN0KHJlcSwgcmVzKSB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHsgZXJyb3IsIHZhbHVlIH0gPSBhd2FpdCBQcm9kdWN0LmVkaXRQcm9kdWN0KFxuICAgICAgICByZXEuYm9keSxcbiAgICAgICAgcmVxLmZpbGVzLFxuICAgICAgICByZXEucHJvZHVjdFxuICAgICAgKTtcbiAgICAgIGlmIChlcnJvcikgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgbWVzc2FnZTogJ2JhZCByZXF1ZXN0JywgZXJyb3IgfSk7XG4gICAgICBjb25zdCBwcm9kdWN0SWQgPSByZXEucGFyYW1zLmlkO1xuICAgICAgY29uc3Qgd2lzaGVycyA9IGF3YWl0IHdpc2hsaXN0cy5maW5kQWxsKHsgd2hlcmU6IHsgcHJvZHVjdElkIH0gfSk7XG4gICAgICBjb25zdCBOZXdXaXNoZXJzID0gd2lzaGVycy5tYXAoKHdpc2gpID0+IHdpc2gudXNlcklkKTtcbiAgICAgIGNvbnN0IGVtYWlscyA9IGF3YWl0IHVzZXJzLmZpbmRBbGwoeyB3aGVyZTogeyBpZDogTmV3V2lzaGVycyB9IH0pO1xuICAgICAgY29uc3QgbmV3Tm90aWZpY2F0aW9uID0ge1xuICAgICAgICBtZXNzYWdlOiAnIFByb2R1Y3QgIHlvdSBwcmV2aW91c2x5IHdpc2hlZCBmb3IgIGhhdmUgYmVlbiB1cGRhdGVkICcsXG4gICAgICAgIHR5cGU6ICdwcm9kdWN0IHVwZGF0ZWQnLFxuICAgICAgfTtcbiAgICAgIGNvbnN0IGFsbE5vdGlmaWNhdGlvbnMgPSBlbWFpbHMubWFwKChlbWFpbCkgPT4ge1xuICAgICAgICBjb25zdCBuZXdOID0geyAuLi5uZXdOb3RpZmljYXRpb24gfTtcbiAgICAgICAgbmV3Ti5yZWNlaXZlcklkID0gZW1haWwuaWQ7XG4gICAgICAgIGNvbnN0IHJlY2VpdmVyID0ge1xuICAgICAgICAgIHVzZXJuYW1lOiBlbWFpbC51c2VybmFtZSxcbiAgICAgICAgICBlbWFpbDogZW1haWwuZW1haWwsXG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiB7IG5ld04sIHJlY2VpdmVyIH07XG4gICAgICB9KTtcbiAgICAgIGFsbE5vdGlmaWNhdGlvbnMuZm9yRWFjaChhc3luYyAobm90aWZpY2F0aW9uKSA9PiB7XG4gICAgICAgIGNvbnN0IHsgcmVjZWl2ZXIsIG5ld04gfSA9IG5vdGlmaWNhdGlvbjtcbiAgICAgICAgY29uc3Qgbm90aWZ5RW1haWwgPSBub3RpZmljYXRpb25UZW1wbGF0ZShcbiAgICAgICAgICByZWNlaXZlci51c2VybmFtZSxcbiAgICAgICAgICBuZXdOLm1lc3NhZ2UsXG4gICAgICAgICAgbmV3Ti50eXBlLFxuICAgICAgICAgIGAke3Byb2Nlc3MuZW52LlNXQUdHRVJfU0VSVkVSfS9wcm9kdWN0cy8ke3ZhbHVlLmlkfWBcbiAgICAgICAgKTtcbiAgICAgICAgc2VuZEVtYWlsKFxuICAgICAgICAgIGVtYWlsQ29uZmlnKHtcbiAgICAgICAgICAgIGVtYWlsOiByZWNlaXZlci5lbWFpbCxcbiAgICAgICAgICAgIHN1YmplY3Q6ICdOb3RpZmljYXRpb24gISEgVXBkYXRlcycsXG4gICAgICAgICAgICBjb250ZW50OiBub3RpZnlFbWFpbCxcbiAgICAgICAgICB9KVxuICAgICAgICApO1xuICAgICAgICBhd2FpdCBub3RpZmljYXRpb25zLmNyZWF0ZShuZXdOKTtcbiAgICAgIH0pO1xuICAgICAgdXBkYXRlUHJvZHVjdChyZXEsIHZhbHVlKTtcbiAgICAgIHJldHVybiByZXNcbiAgICAgICAgLnN0YXR1cygyMDApXG4gICAgICAgIC5qc29uKHsgbWVzc2FnZTogJ3Byb2R1Y3QgZWRpdGVkJywgcHJvZHVjdDogdmFsdWUgfSk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIHByb2R1Y3RFcnJvcihyZXEsIGVycm9yKTtcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDUwMCkuanNvbih7IG1lc3NhZ2U6ICdzZXJ2ZXIgZXJyb3InLCBlcnJvciB9KTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtPYmplY3R9IHJlcVxuICAgKiBAcGFyYW0ge09iamVjdH0gcmVzXG4gICAqIEByZXR1cm5zIHtyZXN9IHJlc3BvbnNlXG4gICAqL1xuICBzdGF0aWMgYXN5bmMgZ2V0UHJvZHVjdHMocmVxLCByZXMpIHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgdG90YWxDb3VudCA9IGF3YWl0IHByb2R1Y3RzLmNvdW50KHsgd2hlcmU6IHsgYXZhaWxhYmxlOiB0cnVlIH0gfSk7XG4gICAgICBjb25zdCBwYWdlID0gTnVtYmVyKHJlcS5xdWVyeS5wYWdlKSB8fCAxO1xuICAgICAgY29uc3QgbGltaXQgPSBOdW1iZXIocmVxLnF1ZXJ5LmxpbWl0KSB8fCB0b3RhbENvdW50O1xuICAgICAgY29uc3Qgc3RhcnRJbmRleCA9IChwYWdlIC0gMSkgKiBsaW1pdDtcbiAgICAgIGNvbnN0IGVuZEluZGV4ID0gcGFnZSAqIGxpbWl0O1xuICAgICAgY29uc3QgcmVzdWx0cyA9IHt9O1xuICAgICAgaWYgKGVuZEluZGV4IDwgdG90YWxDb3VudCkge1xuICAgICAgICByZXN1bHRzLm5leHQgPSB7XG4gICAgICAgICAgcGFnZTogcGFnZSArIDEsXG4gICAgICAgICAgbGltaXQsXG4gICAgICAgIH07XG4gICAgICB9XG4gICAgICBpZiAoc3RhcnRJbmRleCA+IDApIHtcbiAgICAgICAgcmVzdWx0cy5wcmV2aW91cyA9IHtcbiAgICAgICAgICBwYWdlOiBwYWdlIC0gMSxcbiAgICAgICAgICBsaW1pdCxcbiAgICAgICAgfTtcbiAgICAgIH1cbiAgICAgIHJlc3VsdHMudG90YWxDb3VudCA9IHRvdGFsQ291bnQ7XG4gICAgICByZXN1bHRzLnRvdGFsUGFnZXMgPSBNYXRoLmNlaWwodG90YWxDb3VudCAvIGxpbWl0KTtcbiAgICAgIHJlc3VsdHMucmVzdWx0cyA9IGF3YWl0IHByb2R1Y3RzLmZpbmRBbGwoe1xuICAgICAgICB3aGVyZTogeyBhdmFpbGFibGU6IHRydWUgfSxcbiAgICAgICAgbGltaXQsXG4gICAgICAgIGF0dHJpYnV0ZXM6IHsgZXhjbHVkZTogWydzZWxsZXJJZCddIH0sXG4gICAgICAgIGluY2x1ZGU6IFtcbiAgICAgICAgICB7XG4gICAgICAgICAgICBtb2RlbDogdXNlcnMsXG4gICAgICAgICAgICBhczogJ3NlbGxlcicsXG4gICAgICAgICAgICBhdHRyaWJ1dGVzOiBbJ3VzZXJuYW1lJywgJ2VtYWlsJ10sXG4gICAgICAgICAgfSxcbiAgICAgICAgXSxcbiAgICAgICAgb2Zmc2V0OiBzdGFydEluZGV4LFxuICAgICAgfSk7XG4gICAgICBjb25zdCBhbGxwcm9kdWN0cyA9IHJlc3VsdHM7XG4gICAgICByZXRyaWV2ZUFsbFByb2R1Y3QoKTtcbiAgICAgIHJlc1xuICAgICAgICAuc3RhdHVzKDIwMClcbiAgICAgICAgLmpzb24oeyBtZXNzYWdlOiAnQWxsIHByb2R1Y3RzIHJldHJpZXZlZCBzdWNjZXNzZnVsbHknLCBhbGxwcm9kdWN0cyB9KTtcbiAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1zaGFkb3dcbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgIC8vIHByb2R1Y3RFcnJvcihyZXEsIGVycik7XG4gICAgICByZXR1cm4gcmVzXG4gICAgICAgIC5zdGF0dXMoNTAwKVxuICAgICAgICAuanNvbih7IGVycm9yOiBlcnIubWVzc2FnZSwgbWVzc2FnZTogJ0ZhaWxlZCB0byByZXRyaWV2ZSBwcm9kdWN0cycgfSk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7T2JqZWN0fSByZXFcbiAgICogQHBhcmFtIHtPYmplY3R9IHJlc1xuICAgKiBAcmV0dXJucyB7cmVzfSByZXNwb25zZVxuICAgKi9cbiAgc3RhdGljIGFzeW5jIGRlbGV0ZVByb2R1Y3QocmVxLCByZXMpIHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgcHJvZHVjdCA9IHJlcS5wcm9kdWN0O1xuICAgICAgY29uc3Qgd2lzaGVycyA9IGF3YWl0IHdpc2hsaXN0cy5maW5kQWxsKHtcbiAgICAgICAgd2hlcmU6IHsgcHJvZHVjdElkOiBwcm9kdWN0LmlkIH0sXG4gICAgICB9KTtcbiAgICAgIGNvbnN0IE5ld1dpc2hlcnMgPSB3aXNoZXJzLm1hcCgod2lzaCkgPT4gd2lzaC51c2VySWQpO1xuICAgICAgYXdhaXQgd2lzaGxpc3RzLmRlc3Ryb3koeyB3aGVyZTogeyBwcm9kdWN0SWQ6IHByb2R1Y3QuaWQgfSB9KTtcbiAgICAgIGNvbnN0IGVtYWlscyA9IGF3YWl0IHVzZXJzLmZpbmRBbGwoeyB3aGVyZTogeyBpZDogTmV3V2lzaGVycyB9IH0pO1xuICAgICAgY29uc3QgbmV3Tm90aWZpY2F0aW9uID0ge1xuICAgICAgICBtZXNzYWdlOlxuICAgICAgICAgICcgUHJvZHVjdCAgeW91IHByZXZpb3VzbHkgd2lzaGVkIGZvciAgaGF2ZSBwZXJtYW5lbnRseSBkZWxldGVkJyxcbiAgICAgICAgdHlwZTogJ3Byb2R1Y3QgZGVsZXRlZCcsXG4gICAgICB9O1xuICAgICAgY29uc3QgYWxsTm90aWZpY2F0aW9ucyA9IGVtYWlscy5tYXAoKGVtYWlsKSA9PiB7XG4gICAgICAgIGNvbnN0IG5ld04gPSB7IC4uLm5ld05vdGlmaWNhdGlvbiB9O1xuICAgICAgICBuZXdOLnJlY2VpdmVySWQgPSBlbWFpbC5pZDtcbiAgICAgICAgY29uc3QgcmVjZWl2ZXIgPSB7XG4gICAgICAgICAgdXNlcm5hbWU6IGVtYWlsLnVzZXJuYW1lLFxuICAgICAgICAgIGVtYWlsOiBlbWFpbC5lbWFpbCxcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIHsgbmV3TiwgcmVjZWl2ZXIgfTtcbiAgICAgIH0pO1xuICAgICAgYWxsTm90aWZpY2F0aW9ucy5mb3JFYWNoKGFzeW5jIChub3RpZmljYXRpb24pID0+IHtcbiAgICAgICAgY29uc3QgeyByZWNlaXZlciwgbmV3TiB9ID0gbm90aWZpY2F0aW9uO1xuICAgICAgICBjb25zdCBub3RpZnlFbWFpbCA9IG5vdGlmaWNhdGlvblRlbXBsYXRlKFxuICAgICAgICAgIHJlY2VpdmVyLnVzZXJuYW1lLFxuICAgICAgICAgIG5ld04ubWVzc2FnZSxcbiAgICAgICAgICBuZXdOLnR5cGUsXG4gICAgICAgICAgYCR7cHJvY2Vzcy5lbnYuU1dBR0dFUl9TRVJWRVJ9L3Byb2R1Y3RzLyR7cHJvZHVjdC5pZH1gXG4gICAgICAgICk7XG4gICAgICAgIHNlbmRFbWFpbChcbiAgICAgICAgICBlbWFpbENvbmZpZyh7XG4gICAgICAgICAgICBlbWFpbDogcmVjZWl2ZXIuZW1haWwsXG4gICAgICAgICAgICBzdWJqZWN0OiAnTm90aWZpY2F0aW9uICEhIFVwZGF0ZXMnLFxuICAgICAgICAgICAgY29udGVudDogbm90aWZ5RW1haWwsXG4gICAgICAgICAgfSlcbiAgICAgICAgKTtcbiAgICAgICAgYXdhaXQgbm90aWZpY2F0aW9ucy5jcmVhdGUobmV3Tik7XG4gICAgICB9KTtcblxuICAgICAgYXdhaXQgcHJvZHVjdC5kZXN0cm95KCk7XG4gICAgICBkZWxldGVQcm9kdWN0cyhyZXEsIHByb2R1Y3QpO1xuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoMjAwKS5qc29uKHtcbiAgICAgICAgc3RhdHVzOiAyMDAsXG4gICAgICAgIG1lc3NhZ2U6ICdQcm9kdWN0IGRlbGV0ZWQgc3VjY2Vzc2Z1bGx5JyxcbiAgICAgICAgaXRlbTogcHJvZHVjdCxcbiAgICAgIH0pO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBwcm9kdWN0RXJyb3IocmVxLCBlcnJvcik7XG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg1MDApLmpzb24oe1xuICAgICAgICBzdGF0dXM6IDUwMCxcbiAgICAgICAgZXJyb3I6IGVycm9yLm1lc3NhZ2UsXG4gICAgICB9KTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtPYmplY3R9IHJlcVxuICAgKiBAcGFyYW0ge09iamVjdH0gcmVzXG4gICAqIEByZXR1cm5zIHtyZXN9IHJlc3BvbnNlXG4gICAqL1xuICBzdGF0aWMgYXN5bmMgZ2V0UHJvZHVjdChyZXEsIHJlcykge1xuICAgIHRyeSB7XG4gICAgICAvLyBpZiAocmVxLnByb2R1Y3QpIHJldHVybiByZXMuc3RhdHVzKDIwMCkuanNvbihyZXEucHJvZHVjdCk7XG5cbiAgICAgIGNvbnN0IHByb2R1Y3QgPSBhd2FpdCBQcm9kdWN0LmdldFByb2R1Y3QocmVxLnBhcmFtcy5pZCk7XG4gICAgICBpZiAoIXByb2R1Y3QgfHwgcHJvZHVjdCA9PT0gbnVsbCkge1xuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDQpLmpzb24oeyBtZXNzYWdlOiAncHJvZHVjdCBub3QgZm91bmQnIH0pO1xuICAgICAgfVxuICAgICAgcmV0cmlldmVPbmVQcm9kdWN0KHJlcSwgcHJvZHVjdCk7XG4gICAgICByZXR1cm4gcmVzLnN0YXR1cygyMDApLmpzb24ocHJvZHVjdCk7XG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAvLyBwcm9kdWN0RXJyb3IocmVxLCBlcnIpO1xuICAgICAgcmV0dXJuIHJlc1xuICAgICAgICAuc3RhdHVzKDUwMClcbiAgICAgICAgLmpzb24oeyBlcnJvcjogZXJyLm1lc3NhZ2UsIG1lc3NhZ2U6ICdzZXJ2ZXIgcHJvZHVjdCcgfSk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7T2JqZWN0fSByZXFcbiAgICogQHBhcmFtIHtPYmplY3R9IHJlc1xuICAgKiBAcmV0dXJucyB7cmVzfSByZXNwb25zZVxuICAgKi9cbiAgc3RhdGljIGFzeW5jIHNlbGxlcmdldFByb2R1Y3QocmVxLCByZXMpIHtcbiAgICB0cnkge1xuICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXNoYWRvd1xuICAgICAgY29uc3QgdG90YWxDb3VudCA9IGF3YWl0IHByb2R1Y3RzLmNvdW50KHtcbiAgICAgICAgd2hlcmU6IHsgc2VsbGVySWQ6IHJlcS51c2VyLmlkIH0sXG4gICAgICB9KTtcbiAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSByYWRpeFxuICAgICAgY29uc3QgcGFnZSA9IHBhcnNlSW50KHJlcS5xdWVyeS5wYWdlKSB8fCAxO1xuICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIHJhZGl4XG4gICAgICBjb25zdCBsaW1pdCA9IHBhcnNlSW50KHJlcS5xdWVyeS5saW1pdCkgfHwgdG90YWxDb3VudDtcbiAgICAgIGNvbnN0IHN0YXJ0SW5kZXggPSAocGFnZSAtIDEpICogbGltaXQ7XG4gICAgICBjb25zdCBlbmRJbmRleCA9IHBhZ2UgKiBsaW1pdDtcbiAgICAgIGNvbnN0IHJlc3VsdHMgPSB7fTtcbiAgICAgIGlmIChlbmRJbmRleCA8IHRvdGFsQ291bnQpIHtcbiAgICAgICAgcmVzdWx0cy5uZXh0ID0ge1xuICAgICAgICAgIHBhZ2U6IHBhZ2UgKyAxLFxuICAgICAgICAgIGxpbWl0LFxuICAgICAgICB9O1xuICAgICAgfVxuICAgICAgaWYgKHN0YXJ0SW5kZXggPiAwKSB7XG4gICAgICAgIHJlc3VsdHMucHJldmlvdXMgPSB7XG4gICAgICAgICAgcGFnZTogcGFnZSAtIDEsXG4gICAgICAgICAgbGltaXQsXG4gICAgICAgIH07XG4gICAgICB9XG4gICAgICByZXN1bHRzLnRvdGFsQ291bnQgPSB0b3RhbENvdW50O1xuICAgICAgcmVzdWx0cy50b3RhbFBhZ2VzID0gTWF0aC5jZWlsKHRvdGFsQ291bnQgLyBsaW1pdCk7XG4gICAgICByZXN1bHRzLnJlc3VsdHMgPSBhd2FpdCBwcm9kdWN0cy5maW5kQWxsKHtcbiAgICAgICAgd2hlcmU6IHsgc2VsbGVySWQ6IHJlcS51c2VyLmlkIH0sXG4gICAgICAgIGxpbWl0LFxuICAgICAgICBhdHRyaWJ1dGVzOiB7IGV4Y2x1ZGU6IFsnc2VsbGVySWQnXSB9LFxuICAgICAgICBpbmNsdWRlOiBbXG4gICAgICAgICAge1xuICAgICAgICAgICAgbW9kZWw6IHVzZXJzLFxuICAgICAgICAgICAgYXM6ICdzZWxsZXInLFxuICAgICAgICAgICAgYXR0cmlidXRlczogWyd1c2VybmFtZScsICdlbWFpbCddLFxuICAgICAgICAgIH0sXG4gICAgICAgIF0sXG4gICAgICAgIG9mZnNldDogc3RhcnRJbmRleCxcbiAgICAgIH0pO1xuICAgICAgY29uc3QgYWxsUHJvZHVjdHMgPSByZXN1bHRzO1xuICAgICAgc2VsbGVyUHJvZHVjdChyZXEsIGFsbFByb2R1Y3RzKTtcbiAgICAgIHJlcy5zdGF0dXMoMjAwKS5qc29uKHtcbiAgICAgICAgbWVzc2FnZTogJ0FsbCBwcm9kdWN0cyByZXRyaWV2ZWQgc3VjY2Vzc2Z1bGx5JyxcbiAgICAgICAgYWxsUHJvZHVjdHMsXG4gICAgICB9KTtcbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgIHByb2R1Y3RFcnJvcihyZXEsIGVycik7XG4gICAgICByZXR1cm4gcmVzXG4gICAgICAgIC5zdGF0dXMoNTAwKVxuICAgICAgICAuanNvbih7IGVycm9yOiBlcnIubWVzc2FnZSwgbWVzc2FnZTogJ0ZhaWxlZCB0byByZXRyaWV2ZSBwcm9kdWN0cycgfSk7XG4gICAgfVxuICB9XG5cbiAgc3RhdGljIGFzeW5jIGdldFByb2R1Y3RCeUlkKHJlcSwgcmVzKSB7XG4gICAgY29uc3QgaWQgPSByZXEucGFyYW1zLmlkO1xuICAgIGlmICghdmFsaWRVVUlELnRlc3QoaWQpKSB7XG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDQpLmpzb24oeyBtZXNzYWdlOiAnUHJvZHVjdCBub3QgZm91bmQnIH0pO1xuICAgIH1cbiAgICB0cnkge1xuICAgICAgY29uc3QgcHJvZHVjdCA9IGF3YWl0IFByb2R1Y3QuZ2V0UHJvZHVjdEJ5SWQoaWQpO1xuICAgICAgaWYgKCFwcm9kdWN0KSB7XG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwNCkuanNvbih7IG1lc3NhZ2U6ICdQcm9kdWN0IG5vdCBmb3VuZCcgfSk7XG4gICAgICB9XG4gICAgICByZXRyaWV2ZU9uZVByb2R1Y3QocmVxLCBpZCk7XG4gICAgICByZXR1cm4gcmVzLnN0YXR1cygyMDApLmpzb24oeyBwcm9kdWN0IH0pO1xuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgcHJvZHVjdEVycm9yKHJlcSwgZXJyKTtcbiAgICAgIHJldHVybiByZXNcbiAgICAgICAgLnN0YXR1cyg1MDApXG4gICAgICAgIC5qc29uKHsgZXJyb3I6IGVyci5tZXNzYWdlLCBtZXNzYWdlOiAnRmFpbGVkIHRvIHJldHJpZXZlIHByb2R1Y3QnIH0pO1xuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyBhc3luYyBnZXRQcm9kdWN0QnlJZEFuZFNlbGxlcihyZXEsIHJlcykge1xuICAgIGNvbnN0IGlkID0gcmVxLnBhcmFtcy5pZDtcbiAgICBpZiAoIXZhbGlkVVVJRC50ZXN0KGlkKSkge1xuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA0KS5qc29uKHsgbWVzc2FnZTogJ1Byb2R1Y3Qgbm90IGZvdW5kJyB9KTtcbiAgICB9XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHByb2R1Y3QgPSBhd2FpdCBQcm9kdWN0LmdldFByb2R1Y3RCeUlkQW5kU2VsbGVyKGlkLCByZXEudXNlci5pZCk7XG4gICAgICBpZiAoIXByb2R1Y3QpIHtcbiAgICAgICAgcmV0dXJuIHJlc1xuICAgICAgICAgIC5zdGF0dXMoNDA0KVxuICAgICAgICAgIC5qc29uKHsgbWVzc2FnZTogJ1Byb2R1Y3Qgbm90IGZvdW5kIGluIHlvdXIgY29sbGVjdGlvbicgfSk7XG4gICAgICB9XG4gICAgICByZXRyaWV2ZU9uZVByb2R1Y3QocmVxLCBpZCk7XG4gICAgICByZXR1cm4gcmVzLnN0YXR1cygyMDApLmpzb24oeyBwcm9kdWN0IH0pO1xuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgcHJvZHVjdEVycm9yKHJlcSwgZXJyKTtcbiAgICAgIGlmIChlcnIubmFtZSA9PT0gJ0Nhc3RFcnJvcicgfHwgZXJyLm5hbWUgPT09ICdOb3RGb3VuZEVycm9yJykge1xuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBtZXNzYWdlOiAnSW52YWxpZCBwcm9kdWN0IElEJyB9KTtcbiAgICAgIH1cbiAgICAgIHJldHVybiByZXNcbiAgICAgICAgLnN0YXR1cyg1MDApXG4gICAgICAgIC5qc29uKHsgZXJyb3I6IGVyci5tZXNzYWdlLCBtZXNzYWdlOiAnRmFpbGVkIHRvIHJldHJpZXZlIHByb2R1Y3QnIH0pO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge09iamVjdH0gcmVxXG4gICAqIEBwYXJhbSB7T2JqZWN0fSByZXNcbiAgICogQHJldHVybnMge3Jlc30gcmVzcG9uc2VcbiAgICovXG4gIHN0YXRpYyBhc3luYyB0b2dnbGVBdmFpbGFibGUocmVxLCByZXMpIHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgcHJvZHVjdCA9IGF3YWl0IFByb2R1Y3QuY2hhbmdlQXZhaWxhYmxlKHJlcS5wcm9kdWN0KTtcbiAgICAgIGNvbnN0IHByb2R1Y3RJZCA9IHJlcS5wYXJhbXMuaWQ7XG4gICAgICBjb25zdCB3aXNoZXJzID0gYXdhaXQgd2lzaGxpc3RzLmZpbmRBbGwoeyB3aGVyZTogeyBwcm9kdWN0SWQgfSB9KTtcbiAgICAgIGNvbnN0IE5ld1dpc2hlcnMgPSB3aXNoZXJzLm1hcCgod2lzaCkgPT4gd2lzaC51c2VySWQpO1xuICAgICAgY29uc3QgZW1haWxzID0gYXdhaXQgdXNlcnMuZmluZEFsbCh7IHdoZXJlOiB7IGlkOiBOZXdXaXNoZXJzIH0gfSk7XG4gICAgICBjb25zdCBuZXdOb3RpZmljYXRpb24gPSB7XG4gICAgICAgIG1lc3NhZ2U6ICcgUHJvZHVjdCAgeW91IHdpc2hlZCBmb3IgaXMgY3VycmVudGx5IHVuYXZhaWxhYmxlJyxcbiAgICAgICAgdHlwZTogJ3Byb2R1Y3QgdXBkYXRlZCcsXG4gICAgICB9O1xuICAgICAgY29uc3QgYWxsTm90aWZpY2F0aW9ucyA9IGVtYWlscy5tYXAoKGVtYWlsKSA9PiB7XG4gICAgICAgIGNvbnN0IG5ld04gPSB7IC4uLm5ld05vdGlmaWNhdGlvbiB9O1xuICAgICAgICBuZXdOLnJlY2VpdmVySWQgPSBlbWFpbC5pZDtcbiAgICAgICAgY29uc3QgcmVjZWl2ZXIgPSB7XG4gICAgICAgICAgdXNlcm5hbWU6IGVtYWlsLnVzZXJuYW1lLFxuICAgICAgICAgIGVtYWlsOiBlbWFpbC5lbWFpbCxcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIHsgbmV3TiwgcmVjZWl2ZXIgfTtcbiAgICAgIH0pO1xuICAgICAgYWxsTm90aWZpY2F0aW9ucy5mb3JFYWNoKGFzeW5jIChub3RpZmljYXRpb24pID0+IHtcbiAgICAgICAgY29uc3QgeyByZWNlaXZlciwgbmV3TiB9ID0gbm90aWZpY2F0aW9uO1xuICAgICAgICBjb25zdCBub3RpZnlFbWFpbCA9IG5vdGlmaWNhdGlvblRlbXBsYXRlKFxuICAgICAgICAgIHJlY2VpdmVyLnVzZXJuYW1lLFxuICAgICAgICAgIG5ld04ubWVzc2FnZSxcbiAgICAgICAgICBuZXdOLnR5cGUsXG4gICAgICAgICAgYCR7cHJvY2Vzcy5lbnYuU1dBR0dFUl9TRVJWRVJ9L3Byb2R1Y3RzLyR7cHJvZHVjdC5pZH1gXG4gICAgICAgICk7XG4gICAgICAgIHNlbmRFbWFpbChcbiAgICAgICAgICBlbWFpbENvbmZpZyh7XG4gICAgICAgICAgICBlbWFpbDogcmVjZWl2ZXIuZW1haWwsXG4gICAgICAgICAgICBzdWJqZWN0OiAnTm90aWZpY2F0aW9uICEhIFVwZGF0ZXMnLFxuICAgICAgICAgICAgY29udGVudDogbm90aWZ5RW1haWwsXG4gICAgICAgICAgfSlcbiAgICAgICAgKTtcbiAgICAgICAgYXdhaXQgbm90aWZpY2F0aW9ucy5jcmVhdGUobmV3Tik7XG4gICAgICB9KTtcbiAgICAgIHRvZ2dsZUF2YWlsYWJsZVBybyhyZXEsIHByb2R1Y3QpO1xuICAgICAgcmV0dXJuIHJlc1xuICAgICAgICAuc3RhdHVzKDIwMSlcbiAgICAgICAgLmpzb24oeyBtZXNzYWdlOiAnYXZhaWxhYmxpbGl0eSBjaGFuZ2VkJywgcHJvZHVjdCB9KTtcbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgIHByb2R1Y3RFcnJvcihyZXEsIGVycik7XG4gICAgICByZXR1cm4gcmVzXG4gICAgICAgIC5zdGF0dXMoNTAwKVxuICAgICAgICAuanNvbih7IGVycm9yOiBlcnIubWVzc2FnZSwgbWVzc2FnZTogJ0ZhaWxlZCB0byByZXRyaWV2ZSBwcm9kdWN0cycgfSk7XG4gICAgfVxuICB9XG5cbiAgc3RhdGljIGFzeW5jIGdldENhdGVnb3JpZXMocmVxLCByZXMpIHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgYWxsQ2F0ZWdvcmllcyA9IGF3YWl0IGNhdGVnb3J5LmZpbmRBbGwoKTtcbiAgICAgIHJlcy5zdGF0dXMoMjAwKS5qc29uKGFsbENhdGVnb3JpZXMpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAvLyBwcm9kdWN0RXJyb3IocmVxLCBlcnJvcik7XG4gICAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7IG1lc3NhZ2U6IGVycm9yLm1lc3NhZ2UgfSk7XG4gICAgfVxuICB9XG5cbiAgc3RhdGljIGFzeW5jIHNlYXJjaFByb2R1Y3QocmVxLCByZXMpIHtcbiAgICB0cnkge1xuICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXNoYWRvd1xuICAgICAgY29uc3QgcHJvZHVjdHMgPSBhd2FpdCBQcm9kdWN0LnNlYXJjaFByb2R1Y3RzKFxuICAgICAgICByZXEucXVlcnkucSxcbiAgICAgICAgcmVxLnF1ZXJ5Lm1pbixcbiAgICAgICAgcmVxLnF1ZXJ5Lm1heCxcbiAgICAgICAgcmVxLnF1ZXJ5LmNhdGVnb3J5LFxuICAgICAgICByZXEucXVlcnkucGFnZSxcbiAgICAgICAgcmVxLnF1ZXJ5LmxpbWl0XG4gICAgICApO1xuICAgICAgc2VhcmNoUHJvKHByb2R1Y3RzKTtcbiAgICAgIHJlcy5zdGF0dXMoMjAwKS5qc29uKHsgYWxscHJvZHVjdHM6IHByb2R1Y3RzIH0pO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBwcm9kdWN0RXJyb3IocmVxLCBlcnJvcik7XG4gICAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7IG1lc3NhZ2U6IGVycm9yLm1lc3NhZ2UgfSk7XG4gICAgfVxuICB9XG59XG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFLQSxJQUFBQSxPQUFBLEdBQUFDLHNCQUFBLENBQUFDLE9BQUE7QUFDQSxJQUFBQyxRQUFBLEdBQUFGLHNCQUFBLENBQUFDLE9BQUE7QUFFQSxJQUFBRSxPQUFBLEdBQUFGLE9BQUE7QUFTQSxJQUFBRyxLQUFBLEdBQUFILE9BQUE7QUFDQSxJQUFBSSxZQUFBLEdBQUFKLE9BQUE7QUFDQSxJQUFBSyxhQUFBLEdBQUFMLE9BQUE7QUFDQSxJQUFBTSxTQUFBLEdBQUFOLE9BQUE7QUFwQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFHQTs7QUEwQkFPLGVBQU0sQ0FBQ0MsTUFBTSxFQUFFO0FBQ2YsTUFBTUMsU0FBUyxHQUFHLGtGQUFrRjs7QUFFcEc7QUFDQTtBQUNBO0FBQ2UsTUFBTUMsUUFBUSxDQUFDO0VBQzVCO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7RUFDRSxhQUFhQyxXQUFXQSxDQUFDQyxHQUFHLEVBQUVDLEdBQUcsRUFB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","map":{"version":3,"names":["_dotenv","_interopRequireDefault","require","_product","_models","_mail","_emailConfig","_mailTemplate","_product2","dotenv","config","validUUID","Products","postProduct","req","res","error","value","Product","addProduct","body","files","user","status","json","message","admins","users","findAll","where","role","newNotification","username","type","allNotifications","map","admin","newN","receiverId","id","receiver","email","forEach","notification","notifyEmail","notificationTemplate","process","env","SWAGGER_SERVER","sendEmail","emailConfig","subject","content","notifications","create","createProduct","product","productError","getProductReviews","productId","params","totalCount","reviews","count","page","Number","query","limit","startIndex","endIndex","results","next","previous","totalPages","Math","ceil","include","model","as","attributes","offset","productReviews","AvRate","reduce","sum","review","rating","length","ratingCounts","counts","totalRates","allReviews","retrieveAllProduct","err","console","log","editProduct","wishers","wishlists","NewWishers","wish","userId","emails","updateProduct","getProducts","products","available","exclude","allproducts","deleteProduct","destroy","deleteProducts","item","getProduct","retrieveOneProduct","sellergetProduct","sellerId","parseInt","allProducts","sellerProduct","getProductById","test","getProductByIdAndSeller","name","toggleAvailable","changeAvailable","toggleAvailablePro","getCategories","allCategories","category","searchProduct","searchProducts","q","min","max","searchPro","exports","default","module"],"sourceRoot":"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/controllers/","sources":["products.controllers.js"],"sourcesContent":["/* eslint-disable import/named */\n/* eslint-disable max-len */\n/* eslint-disable prefer-destructuring */\n/* eslint-disable require-jsdoc */\n// eslint-disable-next-line import/no-named-as-default, import/no-named-as-default-member\nimport dotenv from 'dotenv';\nimport Product from '../services/product.services';\n// eslint-disable-next-line import/named\nimport {\n  // eslint-disable-next-line import/named\n  users,\n  reviews,\n  notifications,\n  wishlists,\n  products,\n  category,\n} from '../database/models';\nimport { sendEmail } from '../helpers/mail';\nimport { emailConfig } from '../helpers/emailConfig';\nimport { notificationTemplate } from '../helpers/mailTemplate';\nimport {\n  deleteProducts,\n  sellerProduct,\n  createProduct,\n  retrieveAllProduct,\n  productError,\n  updateProduct,\n  searchPro,\n  toggleAvailablePro,\n  retrieveOneProduct,\n\n} from '../loggers/product.logger';\n\ndotenv.config();\nconst validUUID = /^[a-fA-F0-9]{8}-[a-fA-F0-9]{4}-[4][a-fA-F0-9]{3}-[a-fA-F0-9]{4}-[a-fA-F0-9]{12}$/;\n\n/**\n * the product controller class\n */\nexport default class Products {\n  /**\n   * @param {Object} req\n   * @param {Object} res\n   * @returns {res} response\n   */\n  static async postProduct(req, res) {\n    try {\n      const { error, value } = await Product.addProduct(\n        req.body,\n        req.files,\n        req.user\n      );\n      if (error) return res.status(400).json({ message: 'bad request', error });\n      const admins = await users.findAll({ where: { role: 'admin' } });\n\n      const newNotification = {\n        message: `new product created by ${req.user.username}`,\n        type: 'New product',\n      };\n      const allNotifications = admins.map((admin) => {\n        const newN = { ...newNotification };\n        newN.receiverId = admin.id;\n        const receiver = {\n          username: admin.username,\n          email: admin.email,\n        };\n        return { newN, receiver };\n      });\n      allNotifications.forEach(async (notification) => {\n        const { receiver, newN } = notification;\n        const notifyEmail = notificationTemplate(\n          receiver.username,\n          newN.message,\n          newN.type,\n          `${process.env.SWAGGER_SERVER}/products/${value.id}`\n        );\n        sendEmail(\n          emailConfig({\n            email: receiver.email,\n            subject: 'Notification !! new product',\n            content: notifyEmail,\n          })\n        );\n        await notifications.create(newN);\n      });\n      createProduct(req, value);\n      return res\n        .status(201)\n        .json({ message: 'product created', product: value });\n    } catch (error) {\n      productError(req, error);\n      return res.status(500).json({ message: 'server error', error });\n    }\n  }\n\n  /**\n   * @param {Object} req\n   * @param {Object} res\n   * @returns {res} response\n   */\n  static async getProductReviews(req, res) {\n    try {\n      const productId = req.params.id;\n      const totalCount = await reviews.count({ where: { productId } });\n      const page = Number(req.query.page) || 1;\n      const limit = Number(req.query.limit) || totalCount;\n\n      const startIndex = (page - 1) * limit;\n      const endIndex = page * limit;\n      const results = {};\n      if (endIndex < totalCount) {\n        results.next = {\n          page: page + 1,\n          limit,\n        };\n      }\n      if (startIndex > 0) {\n        results.previous = {\n          page: page - 1,\n          limit,\n        };\n      }\n      results.totalCount = totalCount;\n      results.totalPages = Math.ceil(totalCount / limit);\n      results.results = await reviews.findAll({\n        where: { productId },\n        limit,\n        include: [{\n          model: users,\n          as: 'reviewer',\n          attributes: ['username', 'email', 'avatar'],\n        }],\n        offset: startIndex,\n      });\n      const productReviews = await reviews.findAll({ where: { productId } });\n      const AvRate = productReviews.reduce((sum, review) => sum + review.rating, 0)\n      / productReviews.length;\n      const ratingCounts = productReviews.reduce((counts, review) => {\n        const { rating } = review;\n        counts[rating] = (counts[rating] || 0) + 1;\n        return counts;\n      }, {});\n      const totalRates = {\n        1: ratingCounts[1] || 0,\n        2: ratingCounts[2] || 0,\n        3: ratingCounts[3] || 0,\n        4: ratingCounts[4] || 0,\n        5: ratingCounts[5] || 0,\n        AvRate,\n      };\n\n      const allReviews = results;\n      retrieveAllProduct();\n      res\n        .status(200)\n        .json({ allReviews, totalRates });\n      // eslint-disable-next-line no-shadow\n    } catch (err) {\n      console.log(err);\n      return res\n        .status(500)\n        .json({ error: err.message, message: 'Failed to retrieve products' });\n    }\n  }\n\n  /**\n   * @param {Object} req\n   * @param {Object} res\n   * @returns {res} response\n   */\n  static async editProduct(req, res) {\n    try {\n      const { error, value } = await Product.editProduct(\n        req.body,\n        req.files,\n        req.product\n      );\n      if (error) return res.status(400).json({ message: 'bad request', error });\n      const productId = req.params.id;\n      const wishers = await wishlists.findAll({ where: { productId } });\n      const NewWishers = wishers.map((wish) => wish.userId);\n      const emails = await users.findAll({ where: { id: NewWishers } });\n      const newNotification = {\n        message: ' Product  you previously wished for  have been updated ',\n        type: 'product updated',\n      };\n      const allNotifications = emails.map((email) => {\n        const newN = { ...newNotification };\n        newN.receiverId = email.id;\n        const receiver = {\n          username: email.username,\n          email: email.email,\n        };\n        return { newN, receiver };\n      });\n      allNotifications.forEach(async (notification) => {\n        const { receiver, newN } = notification;\n        const notifyEmail = notificationTemplate(\n          receiver.username,\n          newN.message,\n          newN.type,\n          `${process.env.SWAGGER_SERVER}/products/${value.id}`\n        );\n        sendEmail(\n          emailConfig({\n            email: receiver.email,\n            subject: 'Notification !! Updates',\n            content: notifyEmail,\n          })\n        );\n        await notifications.create(newN);\n      });\n      updateProduct(req, value);\n      return res\n        .status(200)\n        .json({ message: 'product edited', product: value });\n    } catch (error) {\n      productError(req, error);\n      return res.status(500).json({ message: 'server error', error });\n    }\n  }\n\n  /**\n   * @param {Object} req\n   * @param {Object} res\n   * @returns {res} response\n   */\n  static async getProducts(req, res) {\n    try {\n      const totalCount = await products.count({ where: { available: true } });\n      const page = Number(req.query.page) || 1;\n      const limit = Number(req.query.limit) || totalCount;\n      const startIndex = (page - 1) * limit;\n      const endIndex = page * limit;\n      const results = {};\n      if (endIndex < totalCount) {\n        results.next = {\n          page: page + 1,\n          limit,\n        };\n      }\n      if (startIndex > 0) {\n        results.previous = {\n          page: page - 1,\n          limit,\n        };\n      }\n      results.totalCount = totalCount;\n      results.totalPages = Math.ceil(totalCount / limit);\n      results.results = await products.findAll({\n        where: { available: true },\n        limit,\n        attributes: { exclude: ['sellerId'] },\n        include: [\n          {\n            model: users,\n            as: 'seller',\n            attributes: ['username', 'email'],\n          },\n        ],\n        offset: startIndex,\n      });\n      const allproducts = results;\n      retrieveAllProduct();\n      res\n        .status(200)\n        .json({ message: 'All products retrieved successfully', allproducts });\n      // eslint-disable-next-line no-shadow\n    } catch (err) {\n      // productError(req, err);\n      return res\n        .status(500)\n        .json({ error: err.message, message: 'Failed to retrieve products' });\n    }\n  }\n\n  /**\n   * @param {Object} req\n   * @param {Object} res\n   * @returns {res} response\n   */\n  static async deleteProduct(req, res) {\n    try {\n      const product = req.product;\n      const wishers = await wishlists.findAll({\n        where: { productId: product.id },\n      });\n      const NewWishers = wishers.map((wish) => wish.userId);\n      await wishlists.destroy({ where: { productId: product.id } });\n      const emails = await users.findAll({ where: { id: NewWishers } });\n      const newNotification = {\n        message:\n          ' Product  you previously wished for  have permanently deleted',\n        type: 'product deleted',\n      };\n      const allNotifications = emails.map((email) => {\n        const newN = { ...newNotification };\n        newN.receiverId = email.id;\n        const receiver = {\n          username: email.username,\n          email: email.email,\n        };\n        return { newN, receiver };\n      });\n      allNotifications.forEach(async (notification) => {\n        const { receiver, newN } = notification;\n        const notifyEmail = notificationTemplate(\n          receiver.username,\n          newN.message,\n          newN.type,\n          `${process.env.SWAGGER_SERVER}/products/${product.id}`\n        );\n        sendEmail(\n          emailConfig({\n            email: receiver.email,\n            subject: 'Notification !! Updates',\n            content: notifyEmail,\n          })\n        );\n        await notifications.create(newN);\n      });\n\n      await product.destroy();\n      deleteProducts(req, product);\n      return res.status(200).json({\n        status: 200,\n        message: 'Product deleted successfully',\n        item: product,\n      });\n    } catch (error) {\n      productError(req, error);\n      return res.status(500).json({\n        status: 500,\n        error: error.message,\n      });\n    }\n  }\n\n  /**\n   * @param {Object} req\n   * @param {Object} res\n   * @returns {res} response\n   */\n  static async getProduct(req, res) {\n    try {\n      // if (req.product) return res.status(200).json(req.product);\n\n      const product = await Product.getProduct(req.params.id);\n      if (!product || product === null) {\n        return res.status(404).json({ message: 'product not found' });\n      }\n      retrieveOneProduct(req, product);\n      return res.status(200).json(product);\n    } catch (err) {\n      // productError(req, err);\n      return res\n        .status(500)\n        .json({ error: err.message, message: 'server product' });\n    }\n  }\n\n  /**\n   * @param {Object} req\n   * @param {Object} res\n   * @returns {res} response\n   */\n  static async sellergetProduct(req, res) {\n    try {\n      // eslint-disable-next-line no-shadow\n      const totalCount = await products.count({\n        where: { sellerId: req.user.id },\n      });\n      // eslint-disable-next-line radix\n      const page = parseInt(req.query.page) || 1;\n      // eslint-disable-next-line radix\n      const limit = parseInt(req.query.limit) || totalCount;\n      const startIndex = (page - 1) * limit;\n      const endIndex = page * limit;\n      const results = {};\n      if (endIndex < totalCount) {\n        results.next = {\n          page: page + 1,\n          limit,\n        };\n      }\n      if (startIndex > 0) {\n        results.previous = {\n          page: page - 1,\n          limit,\n        };\n      }\n      results.totalCount = totalCount;\n      results.totalPages = Math.ceil(totalCount / limit);\n      results.results = await products.findAll({\n        where: { sellerId: req.user.id },\n        limit,\n        attributes: { exclude: ['sellerId'] },\n        include: [\n          {\n            model: users,\n            as: 'seller',\n            attributes: ['username', 'email'],\n          },\n        ],\n        offset: startIndex,\n      });\n      const allProducts = results;\n      sellerProduct(req, allProducts);\n      res.status(200).json({\n        message: 'All products retrieved successfully',\n        allProducts,\n      });\n    } catch (err) {\n      productError(req, err);\n      return res\n        .status(500)\n        .json({ error: err.message, message: 'Failed to retrieve products' });\n    }\n  }\n\n  static async getProductById(req, res) {\n    const id = req.params.id;\n    if (!validUUID.test(id)) {\n      return res.status(404).json({ message: 'Product not found' });\n    }\n    try {\n      const product = await Product.getProductById(id);\n      if (!product) {\n        return res.status(404).json({ message: 'Product not found' });\n      }\n      retrieveOneProduct(req, id);\n      return res.status(200).json({ product });\n    } catch (err) {\n      productError(req, err);\n      return res\n        .status(500)\n        .json({ error: err.message, message: 'Failed to retrieve product' });\n    }\n  }\n\n  static async getProductByIdAndSeller(req, res) {\n    const id = req.params.id;\n    if (!validUUID.test(id)) {\n      return res.status(404).json({ message: 'Product not found' });\n    }\n    try {\n      const product = await Product.getProductByIdAndSeller(id, req.user.id);\n      if (!product) {\n        return res\n          .status(404)\n          .json({ message: 'Product not found in your collection' });\n      }\n      retrieveOneProduct(req, id);\n      return res.status(200).json({ product });\n    } catch (err) {\n      productError(req, err);\n      if (err.name === 'CastError' || err.name === 'NotFoundError') {\n        return res.status(400).json({ message: 'Invalid product ID' });\n      }\n      return res\n        .status(500)\n        .json({ error: err.message, message: 'Failed to retrieve product' });\n    }\n  }\n\n  /**\n   * @param {Object} req\n   * @param {Object} res\n   * @returns {res} response\n   */\n  static async toggleAvailable(req, res) {\n    try {\n      const product = await Product.changeAvailable(req.product);\n      const productId = req.params.id;\n      const wishers = await wishlists.findAll({ where: { productId } });\n      const NewWishers = wishers.map((wish) => wish.userId);\n      const emails = await users.findAll({ where: { id: NewWishers } });\n      const newNotification = {\n        message: ' Product  you wished for is currently unavailable',\n        type: 'product updated',\n      };\n      const allNotifications = emails.map((email) => {\n        const newN = { ...newNotification };\n        newN.receiverId = email.id;\n        const receiver = {\n          username: email.username,\n          email: email.email,\n        };\n        return { newN, receiver };\n      });\n      allNotifications.forEach(async (notification) => {\n        const { receiver, newN } = notification;\n        const notifyEmail = notificationTemplate(\n          receiver.username,\n          newN.message,\n          newN.type,\n          `${process.env.SWAGGER_SERVER}/products/${product.id}`\n        );\n        sendEmail(\n          emailConfig({\n            email: receiver.email,\n            subject: 'Notification !! Updates',\n            content: notifyEmail,\n          })\n        );\n        await notifications.create(newN);\n      });\n      toggleAvailablePro(req, product);\n      return res\n        .status(201)\n        .json({ message: 'availablility changed', product });\n    } catch (err) {\n      productError(req, err);\n      return res\n        .status(500)\n        .json({ error: err.message, message: 'Failed to retrieve products' });\n    }\n  }\n\n  static async getCategories(req, res) {\n    try {\n      const allCategories = await category.findAll();\n      res.status(200).json(allCategories);\n    } catch (error) {\n      // productError(req, error);\n      res.status(500).json({ message: error.message });\n    }\n  }\n\n  static async searchProduct(req, res) {\n    try {\n      // eslint-disable-next-line no-shadow\n      const products = await Product.searchProducts(\n        req.query.q,\n        req.query.min,\n        req.query.max,\n        req.query.category,\n        req.query.page,\n        req.query.limit\n      );\n      searchPro(products);\n      res.status(200).json({ allproducts: products });\n    } catch (error) {\n      productError(req, error);\n      res.status(500).json({ message: error.message });\n    }\n  }\n}\n"],"mappings":"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"}},"mtime":1685643189438},"{\"assumptions\":{},\"sourceRoot\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/services/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"filename\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/services/product.services.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/node_modules/babel-plugin-add-module-exports/lib/index.js\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-runtime\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"regenerator\":true},\"externalDependencies\":[]},{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.21.0:development":{"value":{"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _sequelize = require(\"sequelize\");\nvar _models = require(\"../database/models\");\nvar _cloud = _interopRequireDefault(require(\"../helpers/cloud.upload\"));\nvar _expiredProduct = _interopRequireDefault(require(\"../helpers/expiredProduct\"));\n/* eslint-disable no-shadow */\n/* eslint-disable import/named */\n/* eslint-disable prefer-const */\n/* eslint-disable require-jsdoc */\n// eslint-disable-next-line import/named\n\n/**\n * product services\n */\nclass Product {\n  /**\n   * @param {Object} data\n   * @param {Object} files\n   * @param {Object} user\n   * @returns {value | error} it returns value or error\n   */\n  static async addProduct(data, files, user) {\n    if (files.length < 2) {\n      return {\n        error: 'images must be more than 1'\n      };\n    }\n    let {\n      // eslint-disable-next-line prefer-const\n      name,\n      // eslint-disable-next-line prefer-const\n      description,\n      quantity,\n      price,\n      expdate,\n      category\n    } = data;\n    if (!expdate || expdate === null) expdate = '01-01-2100';\n    const results = await _cloud.default.multi(files);\n    const images = results.map(each => each.url);\n    const value = await _models.products.create({\n      name,\n      description,\n      quantity,\n      price,\n      exp_date: new Date(expdate),\n      sellerId: user.id,\n      category,\n      images\n    });\n    (0, _expiredProduct.default)(value);\n    return {\n      value\n    };\n  }\n\n  /**\n   * @param {Object} data\n   * @param {Object} files\n   * @param {Object} product\n   * @returns {value | error} it returns value or error\n   */\n  static async editProduct(data, files, product) {\n    const {\n      name,\n      description,\n      quantity,\n      expdate,\n      price,\n      category\n    } = data;\n    if (name && name !== null) product.name = name;\n    if (description && description !== null) product.description = description;\n    if (quantity && quantity !== null) product.quantity = quantity;\n    if (expdate && expdate !== null) {\n      product.exp_date = new Date(expdate);\n      (0, _expiredProduct.default)(product);\n    }\n    if (price && price !== null) product.price = price;\n    if (category && category !== null) product.category = category;\n    if (files && files !== null && files.length !== 0) {\n      if (files.length < 2) {\n        return {\n          error: 'images must be more than 1'\n        };\n      }\n      const results = await _cloud.default.multi(files);\n      product.images = results.map(each => each.url);\n    }\n    await product.save();\n    return {\n      value: product\n    };\n  }\n\n  /**\n   * @returns {products} allproducts\n   */\n  static async getProducts() {\n    const allproducts = await _models.products.findAll({\n      where: {\n        available: true\n      },\n      attributes: {\n        exclude: ['sellerId']\n      },\n      include: {\n        model: _models.users,\n        as: 'seller',\n        attributes: ['username', 'email']\n      }\n    });\n    return allproducts;\n  }\n\n  /**\n   * @param {String} id\n   * @returns {products} allproducts\n   */\n  static async getProduct(id) {\n    const product = await _models.products.findOne({\n      where: {\n        id\n      },\n      attributes: {\n        exclude: ['sellerId']\n      },\n      include: [{\n        model: _models.users,\n        as: 'seller',\n        attributes: ['username', 'email']\n      }, {\n        model: _models.reviews,\n        as: 'reviews'\n      }]\n    });\n    return product;\n  }\n\n  /**\n   * @param {Object} user\n   * @returns {products} allproducts\n   */\n  static async sellergetProduct(user) {\n    const allproducts = await _models.products.findAll({\n      where: {\n        sellerId: user.id\n      }\n    });\n    return allproducts;\n  }\n  static async getProductById(id) {\n    const product = await _models.products.findByPk(id);\n    return product;\n  }\n  static async getProductByIdAndSeller(id, sellerId) {\n    const product = await _models.products.findOne({\n      where: {\n        id,\n        sellerId\n      },\n      attributes: {\n        exclude: ['sellerId']\n      },\n      include: {\n        model: _models.users,\n        as: 'seller',\n        attributes: ['username', 'email']\n      }\n    });\n    return product;\n  }\n  static async getProductName(productId, userId) {\n    const product = await _models.products.findOne({\n      where: {\n        id: productId,\n        sellerId: userId\n      }\n    });\n    if (!product) {\n      throw new Error('Product not found');\n    }\n    return product;\n  }\n  static async getProductReviews(reviewsProductId) {\n    const productReviews = await _models.reviews.findAll({\n      where: {\n        productId: reviewsProductId\n      },\n      include: {\n        model: _models.users,\n        as: 'reviewer',\n        attributes: ['username', 'email', 'avatar']\n      }\n    });\n    const AvRate = productReviews.reduce((sum, review) => sum + review.rating, 0) / productReviews.length;\n    const ratingCounts = productReviews.reduce((counts, review) => {\n      const {\n        rating\n      } = review;\n      counts[rating] = (counts[rating] || 0) + 1;\n      return counts;\n    }, {});\n    const totalRates = {\n      1: ratingCounts[1] || 0,\n      2: ratingCounts[2] || 0,\n      3: ratingCounts[3] || 0,\n      4: ratingCounts[4] || 0,\n      5: ratingCounts[5] || 0,\n      AvRate\n    };\n    console.log(totalRates);\n    const results = {\n      productReviews,\n      totalRates\n    };\n    return results;\n  }\n\n  /**\n   * @param {Object} product\n   * @returns {products} allproducts\n   */\n  static async changeAvailable(product) {\n    product.available = !product.available;\n    product.save();\n    return product;\n  }\n  static async searchProducts(query, min, max, categry, pageNumber, limitNumber) {\n    let where = {};\n    if (!min) min = 0;\n    if (!max || max < min) max = Infinity;\n    if (!query) query = '';\n    where = {\n      price: {\n        [_sequelize.Op.between]: [min, max]\n      },\n      available: true,\n      [_sequelize.Op.or]: [{\n        name: {\n          [_sequelize.Op.iLike]: `%${query}%`\n        }\n      }, {\n        description: {\n          [_sequelize.Op.iLike]: `%${query}%`\n        }\n      }]\n    };\n    if (categry) {\n      const cat = await _models.category.findAll({\n        where: {\n          title: {\n            [_sequelize.Op.iLike]: `%${categry}%`\n          }\n        }\n      });\n      const ids = cat.map(item => Number(item.id));\n      if (cat) {\n        where.category = {\n          [_sequelize.Op.in]: ids || []\n        };\n      }\n    }\n    let totalCount = await _models.products.count({\n      where\n    });\n    const page = Number(pageNumber) || 1;\n    const limit = Number(limitNumber) || totalCount;\n    const startIndex = (page - 1) * limit;\n    const endIndex = page * limit;\n    const out = {\n      totalCount,\n      totalPages: Math.ceil(totalCount / limit)\n    };\n    if (endIndex < totalCount) {\n      out.next = {\n        page: page + 1,\n        limit\n      };\n    }\n    if (startIndex > 0) {\n      out.previous = {\n        page: page - 1,\n        limit\n      };\n    }\n    const product = await _models.products.findAll({\n      where,\n      limit,\n      offset: startIndex,\n      attributes: {\n        exclude: ['sellerId']\n      },\n      include: {\n        model: _models.users,\n        as: 'seller',\n        attributes: ['username', 'email']\n      }\n    });\n    return {\n      ...out,\n      results: product\n    };\n  }\n}\nexports.default = Product;\nmodule.exports = exports.default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfc2VxdWVsaXplIiwicmVxdWlyZSIsIl9tb2RlbHMiLCJfY2xvdWQiLCJfaW50ZXJvcFJlcXVpcmVEZWZhdWx0IiwiX2V4cGlyZWRQcm9kdWN0IiwiUHJvZHVjdCIsImFkZFByb2R1Y3QiLCJkYXRhIiwiZmlsZXMiLCJ1c2VyIiwibGVuZ3RoIiwiZXJyb3IiLCJuYW1lIiwiZGVzY3JpcHRpb24iLCJxdWFudGl0eSIsInByaWNlIiwiZXhwZGF0ZSIsImNhdGVnb3J5IiwicmVzdWx0cyIsIkNsb3VkVXBsb2FkIiwibXVsdGkiLCJpbWFnZXMiLCJtYXAiLCJlYWNoIiwidXJsIiwidmFsdWUiLCJwcm9kdWN0cyIsImNyZWF0ZSIsImV4cF9kYXRlIiwiRGF0ZSIsInNlbGxlcklkIiwiaWQiLCJjaGVja0V4cGlyZWRQcm9kdWN0IiwiZWRpdFByb2R1Y3QiLCJwcm9kdWN0Iiwic2F2ZSIsImdldFByb2R1Y3RzIiwiYWxscHJvZHVjdHMiLCJmaW5kQWxsIiwid2hlcmUiLCJhdmFpbGFibGUiLCJhdHRyaWJ1dGVzIiwiZXhjbHVkZSIsImluY2x1ZGUiLCJtb2RlbCIsInVzZXJzIiwiYXMiLCJnZXRQcm9kdWN0IiwiZmluZE9uZSIsInJldmlld3MiLCJzZWxsZXJnZXRQcm9kdWN0IiwiZ2V0UHJvZHVjdEJ5SWQiLCJmaW5kQnlQayIsImdldFByb2R1Y3RCeUlkQW5kU2VsbGVyIiwiZ2V0UHJvZHVjdE5hbWUiLCJwcm9kdWN0SWQiLCJ1c2VySWQiLCJFcnJvciIsImdldFByb2R1Y3RSZXZpZXdzIiwicmV2aWV3c1Byb2R1Y3RJZCIsInByb2R1Y3RSZXZpZXdzIiwiQXZSYXRlIiwicmVkdWNlIiwic3VtIiwicmV2aWV3IiwicmF0aW5nIiwicmF0aW5nQ291bnRzIiwiY291bnRzIiwidG90YWxSYXRlcyIsImNvbnNvbGUiLCJsb2ciLCJjaGFuZ2VBdmFpbGFibGUiLCJzZWFyY2hQcm9kdWN0cyIsInF1ZXJ5IiwibWluIiwibWF4IiwiY2F0ZWdyeSIsInBhZ2VOdW1iZXIiLCJsaW1pdE51bWJlciIsIkluZmluaXR5IiwiT3AiLCJiZXR3ZWVuIiwib3IiLCJpTGlrZSIsImNhdCIsInRpdGxlIiwiaWRzIiwiaXRlbSIsIk51bWJlciIsImluIiwidG90YWxDb3VudCIsImNvdW50IiwicGFnZSIsImxpbWl0Iiwic3RhcnRJbmRleCIsImVuZEluZGV4Iiwib3V0IiwidG90YWxQYWdlcyIsIk1hdGgiLCJjZWlsIiwibmV4dCIsInByZXZpb3VzIiwib2Zmc2V0IiwiZXhwb3J0cyIsImRlZmF1bHQiLCJtb2R1bGUiXSwic291cmNlUm9vdCI6Ii9Vc2Vycy9hbmRlbGFyd2FuZGEvRGVza3RvcC9lLWNvbW0tdGVhbS1icm9ncmFtbWVycy1ibi9zcmMvc2VydmljZXMvIiwic291cmNlcyI6WyJwcm9kdWN0LnNlcnZpY2VzLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qIGVzbGludC1kaXNhYmxlIG5vLXNoYWRvdyAqL1xuLyogZXNsaW50LWRpc2FibGUgaW1wb3J0L25hbWVkICovXG4vKiBlc2xpbnQtZGlzYWJsZSBwcmVmZXItY29uc3QgKi9cbi8qIGVzbGludC1kaXNhYmxlIHJlcXVpcmUtanNkb2MgKi9cbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBpbXBvcnQvbmFtZWRcbmltcG9ydCB7IE9wIH0gZnJvbSAnc2VxdWVsaXplJztcbmltcG9ydCB7XG4gIHByb2R1Y3RzLCBjYXRlZ29yeSwgcmV2aWV3cywgdXNlcnNcbn0gZnJvbSAnLi4vZGF0YWJhc2UvbW9kZWxzJztcbmltcG9ydCBDbG91ZFVwbG9hZCBmcm9tICcuLi9oZWxwZXJzL2Nsb3VkLnVwbG9hZCc7XG5pbXBvcnQgY2hlY2tFeHBpcmVkUHJvZHVjdCBmcm9tICcuLi9oZWxwZXJzL2V4cGlyZWRQcm9kdWN0JztcblxuLyoqXG4gKiBwcm9kdWN0IHNlcnZpY2VzXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFByb2R1Y3Qge1xuICAvKipcbiAgICogQHBhcmFtIHtPYmplY3R9IGRhdGFcbiAgICogQHBhcmFtIHtPYmplY3R9IGZpbGVzXG4gICAqIEBwYXJhbSB7T2JqZWN0fSB1c2VyXG4gICAqIEByZXR1cm5zIHt2YWx1ZSB8IGVycm9yfSBpdCByZXR1cm5zIHZhbHVlIG9yIGVycm9yXG4gICAqL1xuICBzdGF0aWMgYXN5bmMgYWRkUHJvZHVjdChkYXRhLCBmaWxlcywgdXNlcikge1xuICAgIGlmIChmaWxlcy5sZW5ndGggPCAyKSB7XG4gICAgICByZXR1cm4geyBlcnJvcjogJ2ltYWdlcyBtdXN0IGJlIG1vcmUgdGhhbiAxJyB9O1xuICAgIH1cblxuICAgIGxldCB7XG4gICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgcHJlZmVyLWNvbnN0XG4gICAgICBuYW1lLFxuICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIHByZWZlci1jb25zdFxuICAgICAgZGVzY3JpcHRpb24sXG4gICAgICBxdWFudGl0eSxcbiAgICAgIHByaWNlLFxuICAgICAgZXhwZGF0ZSxcbiAgICAgIGNhdGVnb3J5LFxuICAgIH0gPSBkYXRhO1xuICAgIGlmICghZXhwZGF0ZSB8fCBleHBkYXRlID09PSBudWxsKSBleHBkYXRlID0gJzAxLTAxLTIxMDAnO1xuXG4gICAgY29uc3QgcmVzdWx0cyA9IGF3YWl0IENsb3VkVXBsb2FkLm11bHRpKGZpbGVzKTtcblxuICAgIGNvbnN0IGltYWdlcyA9IHJlc3VsdHMubWFwKChlYWNoKSA9PiBlYWNoLnVybCk7XG5cbiAgICBjb25zdCB2YWx1ZSA9IGF3YWl0IHByb2R1Y3RzLmNyZWF0ZSh7XG4gICAgICBuYW1lLFxuICAgICAgZGVzY3JpcHRpb24sXG4gICAgICBxdWFudGl0eSxcbiAgICAgIHByaWNlLFxuICAgICAgZXhwX2RhdGU6IG5ldyBEYXRlKGV4cGRhdGUpLFxuICAgICAgc2VsbGVySWQ6IHVzZXIuaWQsXG4gICAgICBjYXRlZ29yeSxcbiAgICAgIGltYWdlcyxcbiAgICB9KTtcbiAgICBjaGVja0V4cGlyZWRQcm9kdWN0KHZhbHVlKTtcblxuICAgIHJldHVybiB7IHZhbHVlIH07XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtPYmplY3R9IGRhdGFcbiAgICogQHBhcmFtIHtPYmplY3R9IGZpbGVzXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBwcm9kdWN0XG4gICAqIEByZXR1cm5zIHt2YWx1ZSB8IGVycm9yfSBpdCByZXR1cm5zIHZhbHVlIG9yIGVycm9yXG4gICAqL1xuICBzdGF0aWMgYXN5bmMgZWRpdFByb2R1Y3QoZGF0YSwgZmlsZXMsIHByb2R1Y3QpIHtcbiAgICBjb25zdCB7XG4gICAgICBuYW1lLCBkZXNjcmlwdGlvbiwgcXVhbnRpdHksIGV4cGRhdGUsIHByaWNlLCBjYXRlZ29yeVxuICAgIH0gPSBkYXRhO1xuXG4gICAgaWYgKG5hbWUgJiYgbmFtZSAhPT0gbnVsbCkgcHJvZHVjdC5uYW1lID0gbmFtZTtcbiAgICBpZiAoZGVzY3JpcHRpb24gJiYgZGVzY3JpcHRpb24gIT09IG51bGwpIHByb2R1Y3QuZGVzY3JpcHRpb24gPSBkZXNjcmlwdGlvbjtcbiAgICBpZiAocXVhbnRpdHkgJiYgcXVhbnRpdHkgIT09IG51bGwpIHByb2R1Y3QucXVhbnRpdHkgPSBxdWFudGl0eTtcbiAgICBpZiAoZXhwZGF0ZSAmJiBleHBkYXRlICE9PSBudWxsKSB7XG4gICAgICBwcm9kdWN0LmV4cF9kYXRlID0gbmV3IERhdGUoZXhwZGF0ZSk7XG4gICAgICBjaGVja0V4cGlyZWRQcm9kdWN0KHByb2R1Y3QpO1xuICAgIH1cbiAgICBpZiAocHJpY2UgJiYgcHJpY2UgIT09IG51bGwpIHByb2R1Y3QucHJpY2UgPSBwcmljZTtcbiAgICBpZiAoY2F0ZWdvcnkgJiYgY2F0ZWdvcnkgIT09IG51bGwpIHByb2R1Y3QuY2F0ZWdvcnkgPSBjYXRlZ29yeTtcblxuICAgIGlmIChmaWxlcyAmJiBmaWxlcyAhPT0gbnVsbCAmJiBmaWxlcy5sZW5ndGggIT09IDApIHtcbiAgICAgIGlmIChmaWxlcy5sZW5ndGggPCAyKSB7XG4gICAgICAgIHJldHVybiB7IGVycm9yOiAnaW1hZ2VzIG11c3QgYmUgbW9yZSB0aGFuIDEnIH07XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHJlc3VsdHMgPSBhd2FpdCBDbG91ZFVwbG9hZC5tdWx0aShmaWxlcyk7XG4gICAgICBwcm9kdWN0LmltYWdlcyA9IHJlc3VsdHMubWFwKChlYWNoKSA9PiBlYWNoLnVybCk7XG4gICAgfVxuICAgIGF3YWl0IHByb2R1Y3Quc2F2ZSgpO1xuICAgIHJldHVybiB7IHZhbHVlOiBwcm9kdWN0IH07XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybnMge3Byb2R1Y3RzfSBhbGxwcm9kdWN0c1xuICAgKi9cbiAgc3RhdGljIGFzeW5jIGdldFByb2R1Y3RzKCkge1xuICAgIGNvbnN0IGFsbHByb2R1Y3RzID0gYXdhaXQgcHJvZHVjdHMuZmluZEFsbCh7XG4gICAgICB3aGVyZTogeyBhdmFpbGFibGU6IHRydWUgfSxcbiAgICAgIGF0dHJpYnV0ZXM6IHsgZXhjbHVkZTogWydzZWxsZXJJZCddIH0sXG4gICAgICBpbmNsdWRlOiB7XG4gICAgICAgIG1vZGVsOiB1c2VycyxcbiAgICAgICAgYXM6ICdzZWxsZXInLFxuICAgICAgICBhdHRyaWJ1dGVzOiBbJ3VzZXJuYW1lJywgJ2VtYWlsJ11cbiAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4gYWxscHJvZHVjdHM7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtTdHJpbmd9IGlkXG4gICAqIEByZXR1cm5zIHtwcm9kdWN0c30gYWxscHJvZHVjdHNcbiAgICovXG4gIHN0YXRpYyBhc3luYyBnZXRQcm9kdWN0KGlkKSB7XG4gICAgY29uc3QgcHJvZHVjdCA9IGF3YWl0IHByb2R1Y3RzLmZpbmRPbmUoe1xuICAgICAgd2hlcmU6IHsgaWQgfSxcbiAgICAgIGF0dHJpYnV0ZXM6IHsgZXhjbHVkZTogWydzZWxsZXJJZCddIH0sXG4gICAgICBpbmNsdWRlOiBbe1xuICAgICAgICBtb2RlbDogdXNlcnMsXG4gICAgICAgIGFzOiAnc2VsbGVyJyxcbiAgICAgICAgYXR0cmlidXRlczogWyd1c2VybmFtZScsICdlbWFpbCddXG4gICAgICB9LFxuICAgICAge1xuICAgICAgICBtb2RlbDogcmV2aWV3cyxcbiAgICAgICAgYXM6ICdyZXZpZXdzJyxcbiAgICAgIH1dLFxuICAgIH0pO1xuICAgIHJldHVybiBwcm9kdWN0O1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7T2JqZWN0fSB1c2VyXG4gICAqIEByZXR1cm5zIHtwcm9kdWN0c30gYWxscHJvZHVjdHNcbiAgICovXG4gIHN0YXRpYyBhc3luYyBzZWxsZXJnZXRQcm9kdWN0KHVzZXIpIHtcbiAgICBjb25zdCBhbGxwcm9kdWN0cyA9IGF3YWl0IHByb2R1Y3RzLmZpbmRBbGwoe1xuICAgICAgd2hlcmU6IHsgc2VsbGVySWQ6IHVzZXIuaWQgfSxcbiAgICB9KTtcbiAgICByZXR1cm4gYWxscHJvZHVjdHM7XG4gIH1cblxuICBzdGF0aWMgYXN5bmMgZ2V0UHJvZHVjdEJ5SWQoaWQpIHtcbiAgICBjb25zdCBwcm9kdWN0ID0gYXdhaXQgcHJvZHVjdHMuZmluZEJ5UGsoaWQpO1xuICAgIHJldHVybiBwcm9kdWN0O1xuICB9XG5cbiAgc3RhdGljIGFzeW5jIGdldFByb2R1Y3RCeUlkQW5kU2VsbGVyKGlkLCBzZWxsZXJJZCkge1xuICAgIGNvbnN0IHByb2R1Y3QgPSBhd2FpdCBwcm9kdWN0cy5maW5kT25lKHtcbiAgICAgIHdoZXJlOiB7XG4gICAgICAgIGlkLFxuICAgICAgICBzZWxsZXJJZCxcbiAgICAgIH0sXG4gICAgICBhdHRyaWJ1dGVzOiB7IGV4Y2x1ZGU6IFsnc2VsbGVySWQnXSB9LFxuICAgICAgaW5jbHVkZToge1xuICAgICAgICBtb2RlbDogdXNlcnMsXG4gICAgICAgIGFzOiAnc2VsbGVyJyxcbiAgICAgICAgYXR0cmlidXRlczogWyd1c2VybmFtZScsICdlbWFpbCddXG4gICAgICB9XG4gICAgfSk7XG4gICAgcmV0dXJuIHByb2R1Y3Q7XG4gIH1cblxuICBzdGF0aWMgYXN5bmMgZ2V0UHJvZHVjdE5hbWUocHJvZHVjdElkLCB1c2VySWQpIHtcbiAgICBjb25zdCBwcm9kdWN0ID0gYXdhaXQgcHJvZHVjdHMuZmluZE9uZSh7XG4gICAgICB3aGVyZTogeyBpZDogcHJvZHVjdElkLCBzZWxsZXJJZDogdXNlcklkIH0sXG4gICAgfSk7XG4gICAgaWYgKCFwcm9kdWN0KSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ1Byb2R1Y3Qgbm90IGZvdW5kJyk7XG4gICAgfVxuICAgIHJldHVybiBwcm9kdWN0O1xuICB9XG5cbiAgc3RhdGljIGFzeW5jIGdldFByb2R1Y3RSZXZpZXdzKHJldmlld3NQcm9kdWN0SWQpIHtcbiAgICBjb25zdCBwcm9kdWN0UmV2aWV3cyA9IGF3YWl0IHJldmlld3MuZmluZEFsbCh7XG4gICAgICB3aGVyZTogeyBwcm9kdWN0SWQ6IHJldmlld3NQcm9kdWN0SWQgfSxcbiAgICAgIGluY2x1ZGU6IHtcbiAgICAgICAgbW9kZWw6IHVzZXJzLFxuICAgICAgICBhczogJ3Jldmlld2VyJyxcbiAgICAgICAgYXR0cmlidXRlczogWyd1c2VybmFtZScsICdlbWFpbCcsICdhdmF0YXInXVxuICAgICAgfVxuICAgIH0pO1xuICAgIGNvbnN0IEF2UmF0ZSA9IHByb2R1Y3RSZXZpZXdzXG4gICAgICAucmVkdWNlKChzdW0sIHJldmlldykgPT4gc3VtICsgcmV2aWV3LnJhdGluZywgMCkgLyBwcm9kdWN0UmV2aWV3cy5sZW5ndGg7XG4gICAgY29uc3QgcmF0aW5nQ291bnRzID0gcHJvZHVjdFJldmlld3MucmVkdWNlKChjb3VudHMsIHJldmlldykgPT4ge1xuICAgICAgY29uc3QgeyByYXRpbmcgfSA9IHJldmlldztcbiAgICAgIGNvdW50c1tyYXRpbmddID0gKGNvdW50c1tyYXRpbmddIHx8IDApICsgMTtcbiAgICAgIHJldHVybiBjb3VudHM7XG4gICAgfSwge30pO1xuICAgIGNvbnN0IHRvdGFsUmF0ZXMgPSB7XG5cbiAgICAgIDE6IHJhdGluZ0NvdW50c1sxXSB8fCAwLFxuICAgICAgMjogcmF0aW5nQ291bnRzWzJdIHx8IDAsXG4gICAgICAzOiByYXRpbmdDb3VudHNbM10gfHwgMCxcbiAgICAgIDQ6IHJhdGluZ0NvdW50c1s0XSB8fCAwLFxuICAgICAgNTogcmF0aW5nQ291bnRzWzVdIHx8IDAsXG4gICAgICBBdlJhdGVcbiAgICB9O1xuICAgIGNvbnNvbGUubG9nKHRvdGFsUmF0ZXMpO1xuICAgIGNvbnN0IHJlc3VsdHMgPSB7XG4gICAgICBwcm9kdWN0UmV2aWV3cyxcbiAgICAgIHRvdGFsUmF0ZXMsXG4gICAgfTtcblxuICAgIHJldHVybiByZXN1bHRzO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBwcm9kdWN0XG4gICAqIEByZXR1cm5zIHtwcm9kdWN0c30gYWxscHJvZHVjdHNcbiAgICovXG4gIHN0YXRpYyBhc3luYyBjaGFuZ2VBdmFpbGFibGUocHJvZHVjdCkge1xuICAgIHByb2R1Y3QuYXZhaWxhYmxlID0gIXByb2R1Y3QuYXZhaWxhYmxlO1xuICAgIHByb2R1Y3Quc2F2ZSgpO1xuICAgIHJldHVybiBwcm9kdWN0O1xuICB9XG5cbiAgc3RhdGljIGFzeW5jIHNlYXJjaFByb2R1Y3RzKHF1ZXJ5LCBtaW4sIG1heCwgY2F0ZWdyeSwgcGFnZU51bWJlciwgbGltaXROdW1iZXIpIHtcbiAgICBsZXQgd2hlcmUgPSB7fTtcbiAgICBpZiAoIW1pbikgbWluID0gMDtcbiAgICBpZiAoIW1heCB8fCBtYXggPCBtaW4pIG1heCA9IEluZmluaXR5O1xuICAgIGlmICghcXVlcnkpIHF1ZXJ5ID0gJyc7XG4gICAgd2hlcmUgPSB7XG4gICAgICBwcmljZTogeyBbT3AuYmV0d2Vlbl06IFttaW4sIG1heF0gfSxcbiAgICAgIGF2YWlsYWJsZTogdHJ1ZSxcbiAgICAgIFtPcC5vcl06IFtcbiAgICAgICAgeyBuYW1lOiB7IFtPcC5pTGlrZV06IGAlJHtxdWVyeX0lYCB9IH0sXG4gICAgICAgIHsgZGVzY3JpcHRpb246IHsgW09wLmlMaWtlXTogYCUke3F1ZXJ5fSVgIH0gfSxcbiAgICAgIF0sXG4gICAgfTtcbiAgICBpZiAoY2F0ZWdyeSkge1xuICAgICAgY29uc3QgY2F0ID0gYXdhaXQgY2F0ZWdvcnkuZmluZEFsbCh7XG4gICAgICAgIHdoZXJlOiB7IHRpdGxlOiB7IFtPcC5pTGlrZV06IGAlJHtjYXRlZ3J5fSVgIH0gfSxcbiAgICAgIH0pO1xuICAgICAgY29uc3QgaWRzID0gY2F0Lm1hcCgoaXRlbSkgPT4gTnVtYmVyKGl0ZW0uaWQpKTtcbiAgICAgIGlmIChjYXQpIHtcbiAgICAgICAgd2hlcmUuY2F0ZWdvcnkgPSB7IFtPcC5pbl06IGlkcyB8fCBbXSB9O1xuICAgICAgfVxuICAgIH1cblxuICAgIGxldCB0b3RhbENvdW50ID0gYXdhaXQgcHJvZHVjdHMuY291bnQoeyB3aGVyZSB9KTtcbiAgICBjb25zdCBwYWdlID0gTnVtYmVyKHBhZ2VOdW1iZXIpIHx8IDE7XG4gICAgY29uc3QgbGltaXQgPSBOdW1iZXIobGltaXROdW1iZXIpIHx8IHRvdGFsQ291bnQ7XG4gICAgY29uc3Qgc3RhcnRJbmRleCA9IChwYWdlIC0gMSkgKiBsaW1pdDtcbiAgICBjb25zdCBlbmRJbmRleCA9IHBhZ2UgKiBsaW1pdDtcbiAgICBjb25zdCBvdXQgPSB7XG4gICAgICB0b3RhbENvdW50LFxuICAgICAgdG90YWxQYWdlczogTWF0aC5jZWlsKHRvdGFsQ291bnQgLyBsaW1pdClcbiAgICB9O1xuICAgIGlmIChlbmRJbmRleCA8IHRvdGFsQ291bnQpIHtcbiAgICAgIG91dC5uZXh0ID0ge1xuICAgICAgICBwYWdlOiBwYWdlICsgMSxcbiAgICAgICAgbGltaXQsXG4gICAgICB9O1xuICAgIH1cbiAgICBpZiAoc3RhcnRJbmRleCA+IDApIHtcbiAgICAgIG91dC5wcmV2aW91cyA9IHtcbiAgICAgICAgcGFnZTogcGFnZSAtIDEsXG4gICAgICAgIGxpbWl0LFxuICAgICAgfTtcbiAgICB9XG5cbiAgICBjb25zdCBwcm9kdWN0ID0gYXdhaXQgcHJvZHVjdHMuZmluZEFsbCh7XG4gICAgICB3aGVyZSxcbiAgICAgIGxpbWl0LFxuICAgICAgb2Zmc2V0OiBzdGFydEluZGV4LFxuICAgICAgYXR0cmlidXRlczogeyBleGNsdWRlOiBbJ3NlbGxlcklkJ10gfSxcbiAgICAgIGluY2x1ZGU6IHtcbiAgICAgICAgbW9kZWw6IHVzZXJzLFxuICAgICAgICBhczogJ3NlbGxlcicsXG4gICAgICAgIGF0dHJpYnV0ZXM6IFsndXNlcm5hbWUnLCAnZW1haWwnXVxuICAgICAgfVxuICAgIH0pO1xuXG4gICAgcmV0dXJuIHsgLi4ub3V0LCByZXN1bHRzOiBwcm9kdWN0IH07XG4gIH1cbn1cbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUtBLElBQUFBLFVBQUEsR0FBQUMsT0FBQTtBQUNBLElBQUFDLE9BQUEsR0FBQUQsT0FBQTtBQUdBLElBQUFFLE1BQUEsR0FBQUMsc0JBQUEsQ0FBQUgsT0FBQTtBQUNBLElBQUFJLGVBQUEsR0FBQUQsc0JBQUEsQ0FBQUgsT0FBQTtBQVZBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBUUE7QUFDQTtBQUNBO0FBQ2UsTUFBTUssT0FBTyxDQUFDO0VBQzNCO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtFQUNFLGFBQWFDLFVBQVVBLENBQUNDLElBQUksRUFBRUMsS0FBSyxFQUFFQyxJQUFJLEVBQUU7SUFDekMsSUFBSUQsS0FBSyxDQUFDRSxNQUFNLEdBQUcsQ0FBQyxFQUFFO01BQ3BCLE9BQU87UUFBRUMsS0FBSyxFQUFFO01BQTZCLENBQUM7SUFDaEQ7SUFFQSxJQUFJO01BQ0Y7TUFDQUMsSUFBSTtNQUNKO01BQ0FDLFdBQVc7TUFDWEMsUUFBUTtNQUNSQyxLQUFLO01BQ0xDLE9BQU87TUFDUEM7SUFDRixDQUFDLEdBQUdWLElBQUk7SUFDUixJQUFJLENBQUNTLE9BQU8sSUFBSUEsT0FBTyxLQUFLLElBQUksRUFBRUEsT0FBTyxHQUFHLFlBQVk7SUFFeEQsTUFBTUUsT0FBTyxHQUFHLE1BQU1DLGNBQVcsQ0FBQ0MsS0FBSyxDQUFDWixLQUFLLENBQUM7SUFFOUMsTUFBTWEsTUFBTSxHQUFHSCxPQUFPLENBQUNJLEdBQUcs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","map":{"version":3,"names":["_sequelize","require","_models","_cloud","_interopRequireDefault","_expiredProduct","Product","addProduct","data","files","user","length","error","name","description","quantity","price","expdate","category","results","CloudUpload","multi","images","map","each","url","value","products","create","exp_date","Date","sellerId","id","checkExpiredProduct","editProduct","product","save","getProducts","allproducts","findAll","where","available","attributes","exclude","include","model","users","as","getProduct","findOne","reviews","sellergetProduct","getProductById","findByPk","getProductByIdAndSeller","getProductName","productId","userId","Error","getProductReviews","reviewsProductId","productReviews","AvRate","reduce","sum","review","rating","ratingCounts","counts","totalRates","console","log","changeAvailable","searchProducts","query","min","max","categry","pageNumber","limitNumber","Infinity","Op","between","or","iLike","cat","title","ids","item","Number","in","totalCount","count","page","limit","startIndex","endIndex","out","totalPages","Math","ceil","next","previous","offset","exports","default","module"],"sourceRoot":"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/services/","sources":["product.services.js"],"sourcesContent":["/* eslint-disable no-shadow */\n/* eslint-disable import/named */\n/* eslint-disable prefer-const */\n/* eslint-disable require-jsdoc */\n// eslint-disable-next-line import/named\nimport { Op } from 'sequelize';\nimport {\n  products, category, reviews, users\n} from '../database/models';\nimport CloudUpload from '../helpers/cloud.upload';\nimport checkExpiredProduct from '../helpers/expiredProduct';\n\n/**\n * product services\n */\nexport default class Product {\n  /**\n   * @param {Object} data\n   * @param {Object} files\n   * @param {Object} user\n   * @returns {value | error} it returns value or error\n   */\n  static async addProduct(data, files, user) {\n    if (files.length < 2) {\n      return { error: 'images must be more than 1' };\n    }\n\n    let {\n      // eslint-disable-next-line prefer-const\n      name,\n      // eslint-disable-next-line prefer-const\n      description,\n      quantity,\n      price,\n      expdate,\n      category,\n    } = data;\n    if (!expdate || expdate === null) expdate = '01-01-2100';\n\n    const results = await CloudUpload.multi(files);\n\n    const images = results.map((each) => each.url);\n\n    const value = await products.create({\n      name,\n      description,\n      quantity,\n      price,\n      exp_date: new Date(expdate),\n      sellerId: user.id,\n      category,\n      images,\n    });\n    checkExpiredProduct(value);\n\n    return { value };\n  }\n\n  /**\n   * @param {Object} data\n   * @param {Object} files\n   * @param {Object} product\n   * @returns {value | error} it returns value or error\n   */\n  static async editProduct(data, files, product) {\n    const {\n      name, description, quantity, expdate, price, category\n    } = data;\n\n    if (name && name !== null) product.name = name;\n    if (description && description !== null) product.description = description;\n    if (quantity && quantity !== null) product.quantity = quantity;\n    if (expdate && expdate !== null) {\n      product.exp_date = new Date(expdate);\n      checkExpiredProduct(product);\n    }\n    if (price && price !== null) product.price = price;\n    if (category && category !== null) product.category = category;\n\n    if (files && files !== null && files.length !== 0) {\n      if (files.length < 2) {\n        return { error: 'images must be more than 1' };\n      }\n\n      const results = await CloudUpload.multi(files);\n      product.images = results.map((each) => each.url);\n    }\n    await product.save();\n    return { value: product };\n  }\n\n  /**\n   * @returns {products} allproducts\n   */\n  static async getProducts() {\n    const allproducts = await products.findAll({\n      where: { available: true },\n      attributes: { exclude: ['sellerId'] },\n      include: {\n        model: users,\n        as: 'seller',\n        attributes: ['username', 'email']\n      }\n    });\n    return allproducts;\n  }\n\n  /**\n   * @param {String} id\n   * @returns {products} allproducts\n   */\n  static async getProduct(id) {\n    const product = await products.findOne({\n      where: { id },\n      attributes: { exclude: ['sellerId'] },\n      include: [{\n        model: users,\n        as: 'seller',\n        attributes: ['username', 'email']\n      },\n      {\n        model: reviews,\n        as: 'reviews',\n      }],\n    });\n    return product;\n  }\n\n  /**\n   * @param {Object} user\n   * @returns {products} allproducts\n   */\n  static async sellergetProduct(user) {\n    const allproducts = await products.findAll({\n      where: { sellerId: user.id },\n    });\n    return allproducts;\n  }\n\n  static async getProductById(id) {\n    const product = await products.findByPk(id);\n    return product;\n  }\n\n  static async getProductByIdAndSeller(id, sellerId) {\n    const product = await products.findOne({\n      where: {\n        id,\n        sellerId,\n      },\n      attributes: { exclude: ['sellerId'] },\n      include: {\n        model: users,\n        as: 'seller',\n        attributes: ['username', 'email']\n      }\n    });\n    return product;\n  }\n\n  static async getProductName(productId, userId) {\n    const product = await products.findOne({\n      where: { id: productId, sellerId: userId },\n    });\n    if (!product) {\n      throw new Error('Product not found');\n    }\n    return product;\n  }\n\n  static async getProductReviews(reviewsProductId) {\n    const productReviews = await reviews.findAll({\n      where: { productId: reviewsProductId },\n      include: {\n        model: users,\n        as: 'reviewer',\n        attributes: ['username', 'email', 'avatar']\n      }\n    });\n    const AvRate = productReviews\n      .reduce((sum, review) => sum + review.rating, 0) / productReviews.length;\n    const ratingCounts = productReviews.reduce((counts, review) => {\n      const { rating } = review;\n      counts[rating] = (counts[rating] || 0) + 1;\n      return counts;\n    }, {});\n    const totalRates = {\n\n      1: ratingCounts[1] || 0,\n      2: ratingCounts[2] || 0,\n      3: ratingCounts[3] || 0,\n      4: ratingCounts[4] || 0,\n      5: ratingCounts[5] || 0,\n      AvRate\n    };\n    console.log(totalRates);\n    const results = {\n      productReviews,\n      totalRates,\n    };\n\n    return results;\n  }\n\n  /**\n   * @param {Object} product\n   * @returns {products} allproducts\n   */\n  static async changeAvailable(product) {\n    product.available = !product.available;\n    product.save();\n    return product;\n  }\n\n  static async searchProducts(query, min, max, categry, pageNumber, limitNumber) {\n    let where = {};\n    if (!min) min = 0;\n    if (!max || max < min) max = Infinity;\n    if (!query) query = '';\n    where = {\n      price: { [Op.between]: [min, max] },\n      available: true,\n      [Op.or]: [\n        { name: { [Op.iLike]: `%${query}%` } },\n        { description: { [Op.iLike]: `%${query}%` } },\n      ],\n    };\n    if (categry) {\n      const cat = await category.findAll({\n        where: { title: { [Op.iLike]: `%${categry}%` } },\n      });\n      const ids = cat.map((item) => Number(item.id));\n      if (cat) {\n        where.category = { [Op.in]: ids || [] };\n      }\n    }\n\n    let totalCount = await products.count({ where });\n    const page = Number(pageNumber) || 1;\n    const limit = Number(limitNumber) || totalCount;\n    const startIndex = (page - 1) * limit;\n    const endIndex = page * limit;\n    const out = {\n      totalCount,\n      totalPages: Math.ceil(totalCount / limit)\n    };\n    if (endIndex < totalCount) {\n      out.next = {\n        page: page + 1,\n        limit,\n      };\n    }\n    if (startIndex > 0) {\n      out.previous = {\n        page: page - 1,\n        limit,\n      };\n    }\n\n    const product = await products.findAll({\n      where,\n      limit,\n      offset: startIndex,\n      attributes: { exclude: ['sellerId'] },\n      include: {\n        model: users,\n        as: 'seller',\n        attributes: ['username', 'email']\n      }\n    });\n\n    return { ...out, results: product };\n  }\n}\n"],"mappings":"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"}},"mtime":1685643189472},"{\"assumptions\":{},\"sourceRoot\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/helpers/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"filename\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/helpers/expiredProduct.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/node_modules/babel-plugin-add-module-exports/lib/index.js\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-runtime\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"regenerator\":true},\"externalDependencies\":[]},{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.21.0:development":{"value":{"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = checkExpiredProduct;\nvar _moment = _interopRequireDefault(require(\"moment\"));\nvar _nodeSchedule = require(\"node-schedule\");\nvar _models = require(\"../database/models\");\nvar _emailConfig = require(\"./emailConfig\");\nvar _mailTemplate = require(\"./mailTemplate\");\nvar _mail = require(\"./mail\");\n/* eslint-disable import/no-extraneous-dependencies */\n/* eslint-disable import/named */\n/* eslint-disable require-jsdoc */\n\n// variables, time in days\nconst warningTime = 30;\nconst warningTimeFormat = 'days';\nfunction diff(t1, t2, format) {\n  t1 = (0, _moment.default)(t1);\n  t2 = (0, _moment.default)(t2);\n  return t2.diff(t1, format || 'hours');\n}\nfunction scheduleExpirationEmail(date, callback) {\n  date = new Date(date);\n  const expSchedule = new _nodeSchedule.scheduleJob(date, () => {\n    expSchedule.cancel();\n    callback();\n  });\n  const warnDate = new Date(date);\n  warnDate.setDate(warnDate.getDate() - warningTime);\n  const expWarnSchedule = new _nodeSchedule.scheduleJob(warnDate, () => {\n    expWarnSchedule.cancel();\n    callback();\n  });\n}\nasync function checkExpiredProduct(product) {\n  try {\n    const exp = new Date(product.exp_date);\n    exp.setHours(exp.getHours() + 24);\n    const time = diff(new Date(), exp, warningTimeFormat);\n    if (time <= 0) {\n      if (product.available) {\n        const user = await _models.users.findOne({\n          where: {\n            id: product.sellerId\n          }\n        });\n        product.available = false;\n        product.save();\n        const html = (0, _mailTemplate.expireProduct)(user, product);\n        (0, _mail.sendEmail)((0, _emailConfig.emailConfig)({\n          email: user.email,\n          subject: `Important: ${product.name} has Expired`,\n          content: html\n        }));\n      }\n    } else if (time <= warningTime) {\n      scheduleExpirationEmail(new Date(product.exp_date), () => checkExpiredProduct(product));\n      const user = await _models.users.findOne({\n        where: {\n          id: product.sellerId\n        }\n      });\n      const html = (0, _mailTemplate.expireProductWarning)(user, product);\n      (0, _mail.sendEmail)((0, _emailConfig.emailConfig)({\n        email: user.email,\n        subject: `Expiry Date of ${product.name} is Approaching`,\n        content: html\n      }));\n    } else {\n      scheduleExpirationEmail(new Date(product.exp_date), () => checkExpiredProduct(product));\n    }\n    return {\n      value: 'checked'\n    };\n  } catch (error) {\n    return {\n      error\n    };\n  }\n}\nmodule.exports = exports.default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfbW9tZW50IiwiX2ludGVyb3BSZXF1aXJlRGVmYXVsdCIsInJlcXVpcmUiLCJfbm9kZVNjaGVkdWxlIiwiX21vZGVscyIsIl9lbWFpbENvbmZpZyIsIl9tYWlsVGVtcGxhdGUiLCJfbWFpbCIsIndhcm5pbmdUaW1lIiwid2FybmluZ1RpbWVGb3JtYXQiLCJkaWZmIiwidDEiLCJ0MiIsImZvcm1hdCIsIm1vbWVudCIsInNjaGVkdWxlRXhwaXJhdGlvbkVtYWlsIiwiZGF0ZSIsImNhbGxiYWNrIiwiRGF0ZSIsImV4cFNjaGVkdWxlIiwic2NoZWR1bGVKb2IiLCJjYW5jZWwiLCJ3YXJuRGF0ZSIsInNldERhdGUiLCJnZXREYXRlIiwiZXhwV2FyblNjaGVkdWxlIiwiY2hlY2tFeHBpcmVkUHJvZHVjdCIsInByb2R1Y3QiLCJleHAiLCJleHBfZGF0ZSIsInNldEhvdXJzIiwiZ2V0SG91cnMiLCJ0aW1lIiwiYXZhaWxhYmxlIiwidXNlciIsInVzZXJzIiwiZmluZE9uZSIsIndoZXJlIiwiaWQiLCJzZWxsZXJJZCIsInNhdmUiLCJodG1sIiwiZXhwaXJlUHJvZHVjdCIsInNlbmRFbWFpbCIsImVtYWlsQ29uZmlnIiwiZW1haWwiLCJzdWJqZWN0IiwibmFtZSIsImNvbnRlbnQiLCJleHBpcmVQcm9kdWN0V2FybmluZyIsInZhbHVlIiwiZXJyb3IiLCJtb2R1bGUiLCJleHBvcnRzIiwiZGVmYXVsdCJdLCJzb3VyY2VSb290IjoiL1VzZXJzL2FuZGVsYXJ3YW5kYS9EZXNrdG9wL2UtY29tbS10ZWFtLWJyb2dyYW1tZXJzLWJuL3NyYy9oZWxwZXJzLyIsInNvdXJjZXMiOlsiZXhwaXJlZFByb2R1Y3QuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLyogZXNsaW50LWRpc2FibGUgaW1wb3J0L25vLWV4dHJhbmVvdXMtZGVwZW5kZW5jaWVzICovXG4vKiBlc2xpbnQtZGlzYWJsZSBpbXBvcnQvbmFtZWQgKi9cbi8qIGVzbGludC1kaXNhYmxlIHJlcXVpcmUtanNkb2MgKi9cbmltcG9ydCBtb21lbnQgZnJvbSAnbW9tZW50JztcbmltcG9ydCB7IHNjaGVkdWxlSm9iIH0gZnJvbSAnbm9kZS1zY2hlZHVsZSc7XG5pbXBvcnQgeyB1c2VycyB9IGZyb20gJy4uL2RhdGFiYXNlL21vZGVscyc7XG5pbXBvcnQgeyBlbWFpbENvbmZpZyB9IGZyb20gJy4vZW1haWxDb25maWcnO1xuaW1wb3J0IHsgZXhwaXJlUHJvZHVjdCwgZXhwaXJlUHJvZHVjdFdhcm5pbmcgfSBmcm9tICcuL21haWxUZW1wbGF0ZSc7XG5pbXBvcnQgeyBzZW5kRW1haWwgfSBmcm9tICcuL21haWwnO1xuXG4vLyB2YXJpYWJsZXMsIHRpbWUgaW4gZGF5c1xuY29uc3Qgd2FybmluZ1RpbWUgPSAzMDtcbmNvbnN0IHdhcm5pbmdUaW1lRm9ybWF0ID0gJ2RheXMnO1xuXG5mdW5jdGlvbiBkaWZmKHQxLCB0MiwgZm9ybWF0KSB7XG4gIHQxID0gbW9tZW50KHQxKTtcbiAgdDIgPSBtb21lbnQodDIpO1xuXG4gIHJldHVybiB0Mi5kaWZmKHQxLCBmb3JtYXQgfHwgJ2hvdXJzJyk7XG59XG5cbmZ1bmN0aW9uIHNjaGVkdWxlRXhwaXJhdGlvbkVtYWlsKGRhdGUsIGNhbGxiYWNrKSB7XG4gIGRhdGUgPSBuZXcgRGF0ZShkYXRlKTtcbiAgY29uc3QgZXhwU2NoZWR1bGUgPSBuZXcgc2NoZWR1bGVKb2IoZGF0ZSwgKCkgPT4ge1xuICAgIGV4cFNjaGVkdWxlLmNhbmNlbCgpO1xuICAgIGNhbGxiYWNrKCk7XG4gIH0pO1xuXG4gIGNvbnN0IHdhcm5EYXRlID0gbmV3IERhdGUoZGF0ZSk7XG4gIHdhcm5EYXRlLnNldERhdGUod2FybkRhdGUuZ2V0RGF0ZSgpIC0gd2FybmluZ1RpbWUpO1xuICBjb25zdCBleHBXYXJuU2NoZWR1bGUgPSBuZXcgc2NoZWR1bGVKb2Iod2FybkRhdGUsICgpID0+IHtcbiAgICBleHBXYXJuU2NoZWR1bGUuY2FuY2VsKCk7XG4gICAgY2FsbGJhY2soKTtcbiAgfSk7XG59XG5cbmV4cG9ydCBkZWZhdWx0IGFzeW5jIGZ1bmN0aW9uIGNoZWNrRXhwaXJlZFByb2R1Y3QocHJvZHVjdCkge1xuICB0cnkge1xuICAgIGNvbnN0IGV4cCA9IG5ldyBEYXRlKHByb2R1Y3QuZXhwX2RhdGUpO1xuICAgIGV4cC5zZXRIb3VycyhleHAuZ2V0SG91cnMoKSArIDI0KTtcbiAgICBjb25zdCB0aW1lID0gZGlmZihuZXcgRGF0ZSgpLCBleHAsIHdhcm5pbmdUaW1lRm9ybWF0KTtcblxuICAgIGlmICh0aW1lIDw9IDApIHtcbiAgICAgIGlmIChwcm9kdWN0LmF2YWlsYWJsZSkge1xuICAgICAgICBjb25zdCB1c2VyID0gYXdhaXQgdXNlcnMuZmluZE9uZSh7IHdoZXJlOiB7IGlkOiBwcm9kdWN0LnNlbGxlcklkIH0gfSk7XG4gICAgICAgIHByb2R1Y3QuYXZhaWxhYmxlID0gZmFsc2U7XG4gICAgICAgIHByb2R1Y3Quc2F2ZSgpO1xuICAgICAgICBjb25zdCBodG1sID0gZXhwaXJlUHJvZHVjdCh1c2VyLCBwcm9kdWN0KTtcbiAgICAgICAgc2VuZEVtYWlsKFxuICAgICAgICAgIGVtYWlsQ29uZmlnKHtcbiAgICAgICAgICAgIGVtYWlsOiB1c2VyLmVtYWlsLFxuICAgICAgICAgICAgc3ViamVjdDogYEltcG9ydGFudDogJHtwcm9kdWN0Lm5hbWV9IGhhcyBFeHBpcmVkYCxcbiAgICAgICAgICAgIGNvbnRlbnQ6IGh0bWxcbiAgICAgICAgICB9KVxuICAgICAgICApO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAodGltZSA8PSB3YXJuaW5nVGltZSkge1xuICAgICAgc2NoZWR1bGVFeHBpcmF0aW9uRW1haWwobmV3IERhdGUocHJvZHVjdC5leHBfZGF0ZSksICgpID0+IGNoZWNrRXhwaXJlZFByb2R1Y3QocHJvZHVjdCkpO1xuXG4gICAgICBjb25zdCB1c2VyID0gYXdhaXQgdXNlcnMuZmluZE9uZSh7IHdoZXJlOiB7IGlkOiBwcm9kdWN0LnNlbGxlcklkIH0gfSk7XG4gICAgICBjb25zdCBodG1sID0gZXhwaXJlUHJvZHVjdFdhcm5pbmcodXNlciwgcHJvZHVjdCk7XG4gICAgICBzZW5kRW1haWwoXG4gICAgICAgIGVtYWlsQ29uZmlnKHtcbiAgICAgICAgICBlbWFpbDogdXNlci5lbWFpbCxcbiAgICAgICAgICBzdWJqZWN0OiBgRXhwaXJ5IERhdGUgb2YgJHtwcm9kdWN0Lm5hbWV9IGlzIEFwcHJvYWNoaW5nYCxcbiAgICAgICAgICBjb250ZW50OiBodG1sXG4gICAgICAgIH0pXG4gICAgICApO1xuICAgIH0gZWxzZSB7XG4gICAgICBzY2hlZHVsZUV4cGlyYXRpb25FbWFpbChuZXcgRGF0ZShwcm9kdWN0LmV4cF9kYXRlKSwgKCkgPT4gY2hlY2tFeHBpcmVkUHJvZHVjdChwcm9kdWN0KSk7XG4gICAgfVxuICAgIHJldHVybiB7IHZhbHVlOiAnY2hlY2tlZCcgfTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICByZXR1cm4geyBlcnJvciB9O1xuICB9XG59XG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFHQSxJQUFBQSxPQUFBLEdBQUFDLHNCQUFBLENBQUFDLE9BQUE7QUFDQSxJQUFBQyxhQUFBLEdBQUFELE9BQUE7QUFDQSxJQUFBRSxPQUFBLEdBQUFGLE9BQUE7QUFDQSxJQUFBRyxZQUFBLEdBQUFILE9BQUE7QUFDQSxJQUFBSSxhQUFBLEdBQUFKLE9BQUE7QUFDQSxJQUFBSyxLQUFBLEdBQUFMLE9BQUE7QUFSQTtBQUNBO0FBQ0E7O0FBUUE7QUFDQSxNQUFNTSxXQUFXLEdBQUcsRUFBRTtBQUN0QixNQUFNQyxpQkFBaUIsR0FBRyxNQUFNO0FBRWhDLFNBQVNDLElBQUlBLENBQUNDLEVBQUUsRUFBRUMsRUFBRSxFQUFFQyxNQUFNLEVBQUU7RUFDNUJGLEVBQUUsR0FBRyxJQUFBRyxlQUFNLEVBQUNILEVBQUUsQ0FBQztFQUNmQyxFQUFFLEdBQUcsSUFBQUUsZUFBTSxFQUFDRixFQUFFLENBQUM7RUFFZixPQUFPQSxFQUFFLENBQUNGLElBQUksQ0FBQ0MsRUFBRSxFQUFFRSxNQUFNLElBQUksT0FBTyxDQUFDO0FBQ3ZDO0FB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","map":{"version":3,"names":["_moment","_interopRequireDefault","require","_nodeSchedule","_models","_emailConfig","_mailTemplate","_mail","warningTime","warningTimeFormat","diff","t1","t2","format","moment","scheduleExpirationEmail","date","callback","Date","expSchedule","scheduleJob","cancel","warnDate","setDate","getDate","expWarnSchedule","checkExpiredProduct","product","exp","exp_date","setHours","getHours","time","available","user","users","findOne","where","id","sellerId","save","html","expireProduct","sendEmail","emailConfig","email","subject","name","content","expireProductWarning","value","error","module","exports","default"],"sourceRoot":"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/helpers/","sources":["expiredProduct.js"],"sourcesContent":["/* eslint-disable import/no-extraneous-dependencies */\n/* eslint-disable import/named */\n/* eslint-disable require-jsdoc */\nimport moment from 'moment';\nimport { scheduleJob } from 'node-schedule';\nimport { users } from '../database/models';\nimport { emailConfig } from './emailConfig';\nimport { expireProduct, expireProductWarning } from './mailTemplate';\nimport { sendEmail } from './mail';\n\n// variables, time in days\nconst warningTime = 30;\nconst warningTimeFormat = 'days';\n\nfunction diff(t1, t2, format) {\n  t1 = moment(t1);\n  t2 = moment(t2);\n\n  return t2.diff(t1, format || 'hours');\n}\n\nfunction scheduleExpirationEmail(date, callback) {\n  date = new Date(date);\n  const expSchedule = new scheduleJob(date, () => {\n    expSchedule.cancel();\n    callback();\n  });\n\n  const warnDate = new Date(date);\n  warnDate.setDate(warnDate.getDate() - warningTime);\n  const expWarnSchedule = new scheduleJob(warnDate, () => {\n    expWarnSchedule.cancel();\n    callback();\n  });\n}\n\nexport default async function checkExpiredProduct(product) {\n  try {\n    const exp = new Date(product.exp_date);\n    exp.setHours(exp.getHours() + 24);\n    const time = diff(new Date(), exp, warningTimeFormat);\n\n    if (time <= 0) {\n      if (product.available) {\n        const user = await users.findOne({ where: { id: product.sellerId } });\n        product.available = false;\n        product.save();\n        const html = expireProduct(user, product);\n        sendEmail(\n          emailConfig({\n            email: user.email,\n            subject: `Important: ${product.name} has Expired`,\n            content: html\n          })\n        );\n      }\n    } else if (time <= warningTime) {\n      scheduleExpirationEmail(new Date(product.exp_date), () => checkExpiredProduct(product));\n\n      const user = await users.findOne({ where: { id: product.sellerId } });\n      const html = expireProductWarning(user, product);\n      sendEmail(\n        emailConfig({\n          email: user.email,\n          subject: `Expiry Date of ${product.name} is Approaching`,\n          content: html\n        })\n      );\n    } else {\n      scheduleExpirationEmail(new Date(product.exp_date), () => checkExpiredProduct(product));\n    }\n    return { value: 'checked' };\n  } catch (error) {\n    return { error };\n  }\n}\n"],"mappings":"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"}},"mtime":1682148437940},"{\"assumptions\":{},\"sourceRoot\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/loggers/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"filename\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/loggers/product.logger.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/node_modules/babel-plugin-add-module-exports/lib/index.js\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-runtime\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"regenerator\":true},\"externalDependencies\":[]},{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.21.0:development":{"value":{"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.viewProductReview = exports.updateProduct = exports.toggleAvailablePro = exports.sellerProduct = exports.searchPro = exports.retrieveOneProduct = exports.retrieveAllProduct = exports.productError = exports.deleteProducts = exports.createProduct = void 0;\nvar _logger = _interopRequireDefault(require(\"../configs/logger\"));\nvar _models = require(\"../database/models\");\n/* eslint-disable import/named */\n\nconst createProduct = async (req, value) => {\n  const logData = {\n    level: 'info',\n    message: `User ${req.user.email} created product ${value.id}`,\n    userId: req.user.id,\n    metadata: {\n      createdProduct: value\n    }\n  };\n  await _models.Log.create(logData);\n  _logger.default.info(`User ${req.user.email} created product ${value.id}`);\n};\nexports.createProduct = createProduct;\nconst updateProduct = async (req, res, value) => {\n  const logData = {\n    level: 'info',\n    message: `User ${req.user.email} updated product ${value.id}`,\n    userId: req.user.id,\n    metadata: {\n      updatedProduct: value\n    }\n  };\n  await _models.Log.create(logData);\n  _logger.default.info(`User ${req.user.email} updated product ${value.id}`);\n};\nexports.updateProduct = updateProduct;\nconst deleteProducts = async (req, res, value) => {\n  const logData = {\n    level: 'info',\n    message: `User ${req.user.email} deleted product ${req.params.id}`,\n    userId: req.user.id,\n    metadata: {\n      deletedProduct: value\n    }\n  };\n  await _models.Log.create(logData);\n  _logger.default.info(`User ${req.user.email} deleted product ${req.params.id}`);\n};\nexports.deleteProducts = deleteProducts;\nconst productError = async (req, error) => {\n  const logData = {\n    level: 'error',\n    message: error.message,\n    userId: req.user.id,\n    metadata: {\n      error\n    }\n  };\n  await _models.Log.create(logData);\n  _logger.default.error(error);\n};\nexports.productError = productError;\nconst viewProductReview = async () => {\n  _logger.default.info('User  viewed  a product reviews');\n};\nexports.viewProductReview = viewProductReview;\nconst retrieveAllProduct = async () => {\n  _logger.default.info('User retrieved all products');\n};\nexports.retrieveAllProduct = retrieveAllProduct;\nconst retrieveOneProduct = async req => {\n  _logger.default.info(`User retrieved a product ${req.params.id}`);\n};\nexports.retrieveOneProduct = retrieveOneProduct;\nconst sellerProduct = async (req, res, product) => {\n  const logData = {\n    level: 'info',\n    message: `Seller ${req.user.email} retrieved all products`,\n    userId: req.user.id,\n    metadata: {\n      AllProduct: product\n    }\n  };\n  await _models.Log.create(logData);\n  _logger.default.info(`Seller ${req.user.email} retrieved all products`);\n};\nexports.sellerProduct = sellerProduct;\nconst toggleAvailablePro = async (req, res, product) => {\n  const logData = {\n    level: 'info',\n    message: `Seller ${req.user.email} Updated availability of a product`,\n    userId: req.user.id,\n    metadata: {\n      AllProduct: product\n    }\n  };\n  await _models.Log.create(logData);\n  _logger.default.info(`Seller ${req.user.email} Updated availability of a product`);\n};\nexports.toggleAvailablePro = toggleAvailablePro;\nconst searchPro = async products => {\n  _logger.default.info(`user searched for  products ${products}`);\n};\nexports.searchPro = searchPro;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfbG9nZ2VyIiwiX2ludGVyb3BSZXF1aXJlRGVmYXVsdCIsInJlcXVpcmUiLCJfbW9kZWxzIiwiY3JlYXRlUHJvZHVjdCIsInJlcSIsInZhbHVlIiwibG9nRGF0YSIsImxldmVsIiwibWVzc2FnZSIsInVzZXIiLCJlbWFpbCIsImlkIiwidXNlcklkIiwibWV0YWRhdGEiLCJjcmVhdGVkUHJvZHVjdCIsIkxvZyIsImNyZWF0ZSIsImxvZ2dlciIsImluZm8iLCJleHBvcnRzIiwidXBkYXRlUHJvZHVjdCIsInJlcyIsInVwZGF0ZWRQcm9kdWN0IiwiZGVsZXRlUHJvZHVjdHMiLCJwYXJhbXMiLCJkZWxldGVkUHJvZHVjdCIsInByb2R1Y3RFcnJvciIsImVycm9yIiwidmlld1Byb2R1Y3RSZXZpZXciLCJyZXRyaWV2ZUFsbFByb2R1Y3QiLCJyZXRyaWV2ZU9uZVByb2R1Y3QiLCJzZWxsZXJQcm9kdWN0IiwicHJvZHVjdCIsIkFsbFByb2R1Y3QiLCJ0b2dnbGVBdmFpbGFibGVQcm8iLCJzZWFyY2hQcm8iLCJwcm9kdWN0cyJdLCJzb3VyY2VSb290IjoiL1VzZXJzL2FuZGVsYXJ3YW5kYS9EZXNrdG9wL2UtY29tbS10ZWFtLWJyb2dyYW1tZXJzLWJuL3NyYy9sb2dnZXJzLyIsInNvdXJjZXMiOlsicHJvZHVjdC5sb2dnZXIuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLyogZXNsaW50LWRpc2FibGUgaW1wb3J0L25hbWVkICovXG5cbmltcG9ydCBsb2dnZXIgZnJvbSAnLi4vY29uZmlncy9sb2dnZXInO1xuaW1wb3J0IHsgTG9nIH0gZnJvbSAnLi4vZGF0YWJhc2UvbW9kZWxzJztcblxuZXhwb3J0IGNvbnN0IGNyZWF0ZVByb2R1Y3QgPSBhc3luYyAocmVxLCB2YWx1ZSkgPT4ge1xuICBjb25zdCBsb2dEYXRhID0ge1xuICAgIGxldmVsOiAnaW5mbycsXG4gICAgbWVzc2FnZTogYFVzZXIgJHtyZXEudXNlci5lbWFpbH0gY3JlYXRlZCBwcm9kdWN0ICR7dmFsdWUuaWR9YCxcbiAgICB1c2VySWQ6IHJlcS51c2VyLmlkLFxuICAgIG1ldGFkYXRhOiB7IGNyZWF0ZWRQcm9kdWN0OiB2YWx1ZSB9LFxuICB9O1xuICBhd2FpdCBMb2cuY3JlYXRlKGxvZ0RhdGEpO1xuICBsb2dnZXIuaW5mbyhgVXNlciAke3JlcS51c2VyLmVtYWlsfSBjcmVhdGVkIHByb2R1Y3QgJHt2YWx1ZS5pZH1gKTtcbn07XG5cbmV4cG9ydCBjb25zdCB1cGRhdGVQcm9kdWN0ID0gYXN5bmMgKHJlcSwgcmVzLCB2YWx1ZSkgPT4ge1xuICBjb25zdCBsb2dEYXRhID0ge1xuICAgIGxldmVsOiAnaW5mbycsXG4gICAgbWVzc2FnZTogYFVzZXIgJHtyZXEudXNlci5lbWFpbH0gdXBkYXRlZCBwcm9kdWN0ICR7dmFsdWUuaWR9YCxcbiAgICB1c2VySWQ6IHJlcS51c2VyLmlkLFxuICAgIG1ldGFkYXRhOiB7IHVwZGF0ZWRQcm9kdWN0OiB2YWx1ZSB9LFxuICB9O1xuICBhd2FpdCBMb2cuY3JlYXRlKGxvZ0RhdGEpO1xuICBsb2dnZXIuaW5mbyhgVXNlciAke3JlcS51c2VyLmVtYWlsfSB1cGRhdGVkIHByb2R1Y3QgJHt2YWx1ZS5pZH1gKTtcbn07XG5cbmV4cG9ydCBjb25zdCBkZWxldGVQcm9kdWN0cyA9IGFzeW5jIChyZXEsIHJlcywgdmFsdWUpID0+IHtcbiAgY29uc3QgbG9nRGF0YSA9IHtcbiAgICBsZXZlbDogJ2luZm8nLFxuICAgIG1lc3NhZ2U6IGBVc2VyICR7cmVxLnVzZXIuZW1haWx9IGRlbGV0ZWQgcHJvZHVjdCAke3JlcS5wYXJhbXMuaWR9YCxcbiAgICB1c2VySWQ6IHJlcS51c2VyLmlkLFxuICAgIG1ldGFkYXRhOiB7IGRlbGV0ZWRQcm9kdWN0OiB2YWx1ZSB9LFxuICB9O1xuICBhd2FpdCBMb2cuY3JlYXRlKGxvZ0RhdGEpO1xuICBsb2dnZXIuaW5mbyhgVXNlciAke3JlcS51c2VyLmVtYWlsfSBkZWxldGVkIHByb2R1Y3QgJHtyZXEucGFyYW1zLmlkfWApO1xufTtcblxuZXhwb3J0IGNvbnN0IHByb2R1Y3RFcnJvciA9IGFzeW5jIChyZXEsIGVycm9yKSA9PiB7XG4gIGNvbnN0IGxvZ0RhdGEgPSB7XG4gICAgbGV2ZWw6ICdlcnJvcicsXG4gICAgbWVzc2FnZTogZXJyb3IubWVzc2FnZSxcbiAgICB1c2VySWQ6IHJlcS51c2VyLmlkLFxuICAgIG1ldGFkYXRhOiB7IGVycm9yIH0sXG4gIH07XG4gIGF3YWl0IExvZy5jcmVhdGUobG9nRGF0YSk7XG4gIGxvZ2dlci5lcnJvcihlcnJvcik7XG59O1xuZXhwb3J0IGNvbnN0IHZpZXdQcm9kdWN0UmV2aWV3ID0gYXN5bmMgKCkgPT4ge1xuICBsb2dnZXIuaW5mbygnVXNlciAgdmlld2VkICBhIHByb2R1Y3QgcmV2aWV3cycsKTtcbn07XG5leHBvcnQgY29uc3QgcmV0cmlldmVBbGxQcm9kdWN0ID0gYXN5bmMgKCkgPT4ge1xuICBsb2dnZXIuaW5mbygnVXNlciByZXRyaWV2ZWQgYWxsIHByb2R1Y3RzJyk7XG59O1xuZXhwb3J0IGNvbnN0IHJldHJpZXZlT25lUHJvZHVjdCA9IGFzeW5jIChyZXEpID0+IHtcbiAgbG9nZ2VyLmluZm8oYFVzZXIgcmV0cmlldmVkIGEgcHJvZHVjdCAke3JlcS5wYXJhbXMuaWR9YCk7XG59O1xuZXhwb3J0IGNvbnN0IHNlbGxlclByb2R1Y3QgPSBhc3luYyAocmVxLCByZXMsIHByb2R1Y3QpID0+IHtcbiAgY29uc3QgbG9nRGF0YSA9IHtcbiAgICBsZXZlbDogJ2luZm8nLFxuICAgIG1lc3NhZ2U6IGBTZWxsZXIgJHtyZXEudXNlci5lbWFpbH0gcmV0cmlldmVkIGFsbCBwcm9kdWN0c2AsXG4gICAgdXNlcklkOiByZXEudXNlci5pZCxcbiAgICBtZXRhZGF0YTogeyBBbGxQcm9kdWN0OiBwcm9kdWN0IH0sXG4gIH07XG4gIGF3YWl0IExvZy5jcmVhdGUobG9nRGF0YSk7XG4gIGxvZ2dlci5pbmZvKGBTZWxsZXIgJHtyZXEudXNlci5lbWFpbH0gcmV0cmlldmVkIGFsbCBwcm9kdWN0c2ApO1xufTtcbmV4cG9ydCBjb25zdCB0b2dnbGVBdmFpbGFibGVQcm8gPSBhc3luYyAocmVxLCByZXMsIHByb2R1Y3QpID0+IHtcbiAgY29uc3QgbG9nRGF0YSA9IHtcbiAgICBsZXZlbDogJ2luZm8nLFxuICAgIG1lc3NhZ2U6IGBTZWxsZXIgJHtyZXEudXNlci5lbWFpbH0gVXBkYXRlZCBhdmFpbGFiaWxpdHkgb2YgYSBwcm9kdWN0YCxcbiAgICB1c2VySWQ6IHJlcS51c2VyLmlkLFxuICAgIG1ldGFkYXRhOiB7IEFsbFByb2R1Y3Q6IHByb2R1Y3QgfSxcbiAgfTtcbiAgYXdhaXQgTG9nLmNyZWF0ZShsb2dEYXRhKTtcbiAgbG9nZ2VyLmluZm8oYFNlbGxlciAke3JlcS51c2VyLmVtYWlsfSBVcGRhdGVkIGF2YWlsYWJpbGl0eSBvZiBhIHByb2R1Y3RgKTtcbn07XG5leHBvcnQgY29uc3Qgc2VhcmNoUHJvID0gYXN5bmMgKHByb2R1Y3RzKSA9PiB7XG4gIGxvZ2dlci5pbmZvKGB1c2VyIHNlYXJjaGVkIGZvciAgcHJvZHVjdHMgJHtwcm9kdWN0c31gKTtcbn07XG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFFQSxJQUFBQSxPQUFBLEdBQUFDLHNCQUFBLENBQUFDLE9BQUE7QUFDQSxJQUFBQyxPQUFBLEdBQUFELE9BQUE7QUFIQTs7QUFLTyxNQUFNRSxhQUFhLEdBQUcsTUFBQUEsQ0FBT0MsR0FBRyxFQUFFQyxLQUFLLEtBQUs7RUFDakQsTUFBTUMsT0FBTyxHQUFHO0lBQ2RDLEtBQUssRUFBRSxNQUFNO0lBQ2JDLE9BQU8sRUFBRyxRQUFPSixHQUFHLENBQUNLLElBQUksQ0FBQ0MsS0FBTSxvQkFBbUJMLEtBQUssQ0FBQ00sRUFBRyxFQUFDO0lBQzdEQyxNQUFNLEVBQUVSLEdBQUcsQ0FBQ0ssSUFBSSxDQUFDRSxFQUFFO0lBQ25CRSxRQUFRLEVBQUU7TUFBRUMsY0FBYyxFQUFFVDtJQUFNO0VBQ3BDLENBQUM7RUFDRCxNQUFNVSxXQUFHLENBQUNDLE1BQU0sQ0FBQ1YsT0FBTyxDQUFDO0VBQ3pCVyxlQUFNLENBQUNDLElBQUks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","map":{"version":3,"names":["_logger","_interopRequireDefault","require","_models","createProduct","req","value","logData","level","message","user","email","id","userId","metadata","createdProduct","Log","create","logger","info","exports","updateProduct","res","updatedProduct","deleteProducts","params","deletedProduct","productError","error","viewProductReview","retrieveAllProduct","retrieveOneProduct","sellerProduct","product","AllProduct","toggleAvailablePro","searchPro","products"],"sourceRoot":"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/loggers/","sources":["product.logger.js"],"sourcesContent":["/* eslint-disable import/named */\n\nimport logger from '../configs/logger';\nimport { Log } from '../database/models';\n\nexport const createProduct = async (req, value) => {\n  const logData = {\n    level: 'info',\n    message: `User ${req.user.email} created product ${value.id}`,\n    userId: req.user.id,\n    metadata: { createdProduct: value },\n  };\n  await Log.create(logData);\n  logger.info(`User ${req.user.email} created product ${value.id}`);\n};\n\nexport const updateProduct = async (req, res, value) => {\n  const logData = {\n    level: 'info',\n    message: `User ${req.user.email} updated product ${value.id}`,\n    userId: req.user.id,\n    metadata: { updatedProduct: value },\n  };\n  await Log.create(logData);\n  logger.info(`User ${req.user.email} updated product ${value.id}`);\n};\n\nexport const deleteProducts = async (req, res, value) => {\n  const logData = {\n    level: 'info',\n    message: `User ${req.user.email} deleted product ${req.params.id}`,\n    userId: req.user.id,\n    metadata: { deletedProduct: value },\n  };\n  await Log.create(logData);\n  logger.info(`User ${req.user.email} deleted product ${req.params.id}`);\n};\n\nexport const productError = async (req, error) => {\n  const logData = {\n    level: 'error',\n    message: error.message,\n    userId: req.user.id,\n    metadata: { error },\n  };\n  await Log.create(logData);\n  logger.error(error);\n};\nexport const viewProductReview = async () => {\n  logger.info('User  viewed  a product reviews',);\n};\nexport const retrieveAllProduct = async () => {\n  logger.info('User retrieved all products');\n};\nexport const retrieveOneProduct = async (req) => {\n  logger.info(`User retrieved a product ${req.params.id}`);\n};\nexport const sellerProduct = async (req, res, product) => {\n  const logData = {\n    level: 'info',\n    message: `Seller ${req.user.email} retrieved all products`,\n    userId: req.user.id,\n    metadata: { AllProduct: product },\n  };\n  await Log.create(logData);\n  logger.info(`Seller ${req.user.email} retrieved all products`);\n};\nexport const toggleAvailablePro = async (req, res, product) => {\n  const logData = {\n    level: 'info',\n    message: `Seller ${req.user.email} Updated availability of a product`,\n    userId: req.user.id,\n    metadata: { AllProduct: product },\n  };\n  await Log.create(logData);\n  logger.info(`Seller ${req.user.email} Updated availability of a product`);\n};\nexport const searchPro = async (products) => {\n  logger.info(`user searched for  products ${products}`);\n};\n"],"mappings":"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"}},"mtime":1685643189457},"{\"assumptions\":{},\"sourceRoot\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/middlewares/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"filename\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/middlewares/productValidate.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/node_modules/babel-plugin-add-module-exports/lib/index.js\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-runtime\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"regenerator\":true},\"externalDependencies\":[]},{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.21.0:development":{"value":{"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = productVatidate;\nvar _product = _interopRequireDefault(require(\"../validations/product.validation\"));\n/**\n * validation function\n * @param {Object} req\n * @param {Object} res\n * @param {Object} next next to other function\n * @returns {Object} response if error\n */\nasync function productVatidate(req, res, next) {\n  const {\n    body\n  } = req;\n  body.sellerId = req.user.id;\n  const {\n    error\n  } = await (0, _product.default)(body);\n  if (error) {\n    return res.status(400).json({\n      message: error.message\n    });\n  }\n  next();\n}\nmodule.exports = exports.default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfcHJvZHVjdCIsIl9pbnRlcm9wUmVxdWlyZURlZmF1bHQiLCJyZXF1aXJlIiwicHJvZHVjdFZhdGlkYXRlIiwicmVxIiwicmVzIiwibmV4dCIsImJvZHkiLCJzZWxsZXJJZCIsInVzZXIiLCJpZCIsImVycm9yIiwidmFsaWRhdGlvbiIsInN0YXR1cyIsImpzb24iLCJtZXNzYWdlIiwibW9kdWxlIiwiZXhwb3J0cyIsImRlZmF1bHQiXSwic291cmNlUm9vdCI6Ii9Vc2Vycy9hbmRlbGFyd2FuZGEvRGVza3RvcC9lLWNvbW0tdGVhbS1icm9ncmFtbWVycy1ibi9zcmMvbWlkZGxld2FyZXMvIiwic291cmNlcyI6WyJwcm9kdWN0VmFsaWRhdGUuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHZhbGlkYXRpb24gZnJvbSAnLi4vdmFsaWRhdGlvbnMvcHJvZHVjdC52YWxpZGF0aW9uJztcblxuLyoqXG4gKiB2YWxpZGF0aW9uIGZ1bmN0aW9uXG4gKiBAcGFyYW0ge09iamVjdH0gcmVxXG4gKiBAcGFyYW0ge09iamVjdH0gcmVzXG4gKiBAcGFyYW0ge09iamVjdH0gbmV4dCBuZXh0IHRvIG90aGVyIGZ1bmN0aW9uXG4gKiBAcmV0dXJucyB7T2JqZWN0fSByZXNwb25zZSBpZiBlcnJvclxuICovXG5leHBvcnQgZGVmYXVsdCBhc3luYyBmdW5jdGlvbiBwcm9kdWN0VmF0aWRhdGUocmVxLCByZXMsIG5leHQpIHtcbiAgY29uc3QgeyBib2R5IH0gPSByZXE7XG4gIGJvZHkuc2VsbGVySWQgPSByZXEudXNlci5pZDtcbiAgY29uc3QgeyBlcnJvciB9ID0gYXdhaXQgdmFsaWRhdGlvbihib2R5KTtcbiAgaWYgKGVycm9yKSB7XG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgbWVzc2FnZTogZXJyb3IubWVzc2FnZSB9KTtcbiAgfVxuICBuZXh0KCk7XG59XG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBQSxJQUFBQSxRQUFBLEdBQUFDLHNCQUFBLENBQUFDLE9BQUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNlLGVBQWVDLGVBQWVBLENBQUNDLEdBQUcsRUFBRUMsR0FBRyxFQUFFQyxJQUFJLEVBQUU7RUFDNUQsTUFBTTtJQUFFQztFQUFLLENBQUMsR0FBR0gsR0FBRztFQUNwQkcsSUFBSSxDQUFDQyxRQUFRLEdBQUdKLEdBQUcsQ0FBQ0ssSUFBSSxDQUFDQyxFQUFFO0VBQzNCLE1BQU07SUFBRUM7RUFBTSxDQUFDLEdBQUcsTUFBTSxJQUFBQyxnQkFBVSxFQUFDTCxJQUFJLENBQUM7RUFDeEMsSUFBSUksS0FBSyxFQUFFO0lBQ1QsT0FBT04sR0FBRyxDQUFDUSxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUNDLElBQUksQ0FBQztNQUFFQyxPQUFPLEVBQUVKLEtBQUssQ0FBQ0k7SUFBUSxDQUFDLENBQUM7RUFDekQ7RUFDQVQsSUFBSSxFQUFFO0FBQ1I7QUFBQ1UsTUFBQSxDQUFBQyxPQUFBLEdBQUFBLE9BQUEsQ0FBQUMsT0FBQSJ9","map":{"version":3,"names":["_product","_interopRequireDefault","require","productVatidate","req","res","next","body","sellerId","user","id","error","validation","status","json","message","module","exports","default"],"sourceRoot":"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/middlewares/","sources":["productValidate.js"],"sourcesContent":["import validation from '../validations/product.validation';\n\n/**\n * validation function\n * @param {Object} req\n * @param {Object} res\n * @param {Object} next next to other function\n * @returns {Object} response if error\n */\nexport default async function productVatidate(req, res, next) {\n  const { body } = req;\n  body.sellerId = req.user.id;\n  const { error } = await validation(body);\n  if (error) {\n    return res.status(400).json({ message: error.message });\n  }\n  next();\n}\n"],"mappings":";;;;;;;AAAA,IAAAA,QAAA,GAAAC,sBAAA,CAAAC,OAAA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACe,eAAeC,eAAeA,CAACC,GAAG,EAAEC,GAAG,EAAEC,IAAI,EAAE;EAC5D,MAAM;IAAEC;EAAK,CAAC,GAAGH,GAAG;EACpBG,IAAI,CAACC,QAAQ,GAAGJ,GAAG,CAACK,IAAI,CAACC,EAAE;EAC3B,MAAM;IAAEC;EAAM,CAAC,GAAG,MAAM,IAAAC,gBAAU,EAACL,IAAI,CAAC;EACxC,IAAII,KAAK,EAAE;IACT,OAAON,GAAG,CAACQ,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;MAAEC,OAAO,EAAEJ,KAAK,CAACI;IAAQ,CAAC,CAAC;EACzD;EACAT,IAAI,EAAE;AACR;AAACU,MAAA,CAAAC,OAAA,GAAAA,OAAA,CAAAC,OAAA"}},"mtime":1682148437951},"{\"assumptions\":{},\"sourceRoot\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/validations/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"filename\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/validations/product.validation.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/node_modules/babel-plugin-add-module-exports/lib/index.js\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-runtime\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"regenerator\":true},\"externalDependencies\":[]},{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.21.0:development":{"value":{"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = productValidation;\nvar _joi = _interopRequireDefault(require(\"joi\"));\n/**\n * validating user info\n * @param {Object} data data to be validated\n * @returns {Schema} output for validation\n */\nasync function productValidation(data) {\n  const Schema = _joi.default.object({\n    name: _joi.default.string().min(3).max(255).required().label('name'),\n    description: _joi.default.string().min(5).max(2000).label('description'),\n    quantity: _joi.default.number().min(0).required().label('quantity'),\n    sellerId: _joi.default.string().uuid().required().label('sellerId'),\n    expdate: _joi.default.date().min('now').label('expiration data'),\n    price: _joi.default.number().min(0).required().label('price'),\n    category: _joi.default.number().min(0).label('category')\n  });\n\n  // eslint-disable-next-line no-return-await\n  return await Schema.validate(data, {\n    abortEarly: false\n  });\n}\nmodule.exports = exports.default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfam9pIiwiX2ludGVyb3BSZXF1aXJlRGVmYXVsdCIsInJlcXVpcmUiLCJwcm9kdWN0VmFsaWRhdGlvbiIsImRhdGEiLCJTY2hlbWEiLCJqb2kiLCJvYmplY3QiLCJuYW1lIiwic3RyaW5nIiwibWluIiwibWF4IiwicmVxdWlyZWQiLCJsYWJlbCIsImRlc2NyaXB0aW9uIiwicXVhbnRpdHkiLCJudW1iZXIiLCJzZWxsZXJJZCIsInV1aWQiLCJleHBkYXRlIiwiZGF0ZSIsInByaWNlIiwiY2F0ZWdvcnkiLCJ2YWxpZGF0ZSIsImFib3J0RWFybHkiLCJtb2R1bGUiLCJleHBvcnRzIiwiZGVmYXVsdCJdLCJzb3VyY2VSb290IjoiL1VzZXJzL2FuZGVsYXJ3YW5kYS9EZXNrdG9wL2UtY29tbS10ZWFtLWJyb2dyYW1tZXJzLWJuL3NyYy92YWxpZGF0aW9ucy8iLCJzb3VyY2VzIjpbInByb2R1Y3QudmFsaWRhdGlvbi5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgam9pIGZyb20gJ2pvaSc7XG5cbi8qKlxuICogdmFsaWRhdGluZyB1c2VyIGluZm9cbiAqIEBwYXJhbSB7T2JqZWN0fSBkYXRhIGRhdGEgdG8gYmUgdmFsaWRhdGVkXG4gKiBAcmV0dXJucyB7U2NoZW1hfSBvdXRwdXQgZm9yIHZhbGlkYXRpb25cbiAqL1xuZXhwb3J0IGRlZmF1bHQgYXN5bmMgZnVuY3Rpb24gcHJvZHVjdFZhbGlkYXRpb24oZGF0YSkge1xuICBjb25zdCBTY2hlbWEgPSBqb2kub2JqZWN0KHtcbiAgICBuYW1lOiBqb2lcbiAgICAgIC5zdHJpbmcoKVxuICAgICAgLm1pbigzKVxuICAgICAgLm1heCgyNTUpXG4gICAgICAucmVxdWlyZWQoKVxuICAgICAgLmxhYmVsKCduYW1lJyksXG4gICAgZGVzY3JpcHRpb246IGpvaS5zdHJpbmcoKS5taW4oNSkubWF4KDIwMDApLmxhYmVsKCdkZXNjcmlwdGlvbicpLFxuICAgIHF1YW50aXR5OiBqb2kubnVtYmVyKCkubWluKDApLnJlcXVpcmVkKCkubGFiZWwoJ3F1YW50aXR5JyksXG4gICAgc2VsbGVySWQ6IGpvaS5zdHJpbmcoKS51dWlkKCkucmVxdWlyZWQoKS5sYWJlbCgnc2VsbGVySWQnKSxcbiAgICBleHBkYXRlOiBqb2kuZGF0ZSgpLm1pbignbm93JykubGFiZWwoJ2V4cGlyYXRpb24gZGF0YScpLFxuICAgIHByaWNlOiBqb2kubnVtYmVyKCkubWluKDApLnJlcXVpcmVkKCkubGFiZWwoJ3ByaWNlJyksXG4gICAgY2F0ZWdvcnk6IGpvaS5udW1iZXIoKS5taW4oMCkubGFiZWwoJ2NhdGVnb3J5JylcbiAgfSk7XG5cbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXJldHVybi1hd2FpdFxuICByZXR1cm4gYXdhaXQgU2NoZW1hLnZhbGlkYXRlKGRhdGEsIHtcbiAgICBhYm9ydEVhcmx5OiBmYWxzZVxuICB9KTtcbn1cbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBLElBQUFBLElBQUEsR0FBQUMsc0JBQUEsQ0FBQUMsT0FBQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDZSxlQUFlQyxpQkFBaUJBLENBQUNDLElBQUksRUFBRTtFQUNwRCxNQUFNQyxNQUFNLEdBQUdDLFlBQUcsQ0FBQ0MsTUFBTSxDQUFDO0lBQ3hCQyxJQUFJLEVBQUVGLFlBQUcsQ0FDTkcsTUFBTSxFQUFFLENBQ1JDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FDTkMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUNSQyxRQUFRLEVBQUUsQ0FDVkMsS0FBSyxDQUFDLE1BQU0sQ0FBQztJQUNoQkMsV0FBVyxFQUFFUixZQUFHLENBQUNHLE1BQU0sRUFBRSxDQUFDQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUNDLEdBQUcsQ0FBQyxJQUFJLENBQUMsQ0FBQ0UsS0FBSyxDQUFDLGFBQWEsQ0FBQztJQUMvREUsUUFBUSxFQUFFVCxZQUFHLENBQUNVLE1BQU0sRUFBRSxDQUFDTixHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUNFLFFBQVEsRUFBRSxDQUFDQyxLQUFLLENBQUMsVUFBVSxDQUFDO0lBQzFESSxRQUFRLEVBQUVYLFlBQUcsQ0FBQ0csTUFBTSxFQUFFLENBQUNTLElBQUksRUFBRSxDQUFDTixRQUFRLEVBQUUsQ0FBQ0MsS0FBSyxDQUFDLFVBQVUsQ0FBQztJQUMxRE0sT0FBTyxFQUFFYixZQUFHLENBQUNjLElBQUksRUFBRSxDQUFDVixHQUFHLENBQUMsS0FBSyxDQUFDLENBQUNHLEtBQUssQ0FBQyxpQkFBaUIsQ0FBQztJQUN2RFEsS0FBSyxFQUFFZixZQUFHLENBQUNVLE1BQU0sRUFBRSxDQUFDTixHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUNFLFFBQVEsRUFBRSxDQUFDQyxLQUFLLENBQUMsT0FBTyxDQUFDO0lBQ3BEUyxRQUFRLEVBQUVoQixZQUFHLENBQUNVLE1BQU0sRUFBRSxDQUFDTixHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUNHLEtBQUssQ0FBQyxVQUFVO0VBQ2hELENBQUMsQ0FBQzs7RUFFRjtFQUNBLE9BQU8sTUFBTVIsTUFBTSxDQUFDa0IsUUFBUSxDQUFDbkIsSUFBSSxFQUFFO0lBQ2pDb0IsVUFBVSxFQUFFO0VBQ2QsQ0FBQyxDQUFDO0FBQ0o7QUFBQ0MsTUFBQSxDQUFBQyxPQUFBLEdBQUFBLE9BQUEsQ0FBQUMsT0FBQSJ9","map":{"version":3,"names":["_joi","_interopRequireDefault","require","productValidation","data","Schema","joi","object","name","string","min","max","required","label","description","quantity","number","sellerId","uuid","expdate","date","price","category","validate","abortEarly","module","exports","default"],"sourceRoot":"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/validations/","sources":["product.validation.js"],"sourcesContent":["import joi from 'joi';\n\n/**\n * validating user info\n * @param {Object} data data to be validated\n * @returns {Schema} output for validation\n */\nexport default async function productValidation(data) {\n  const Schema = joi.object({\n    name: joi\n      .string()\n      .min(3)\n      .max(255)\n      .required()\n      .label('name'),\n    description: joi.string().min(5).max(2000).label('description'),\n    quantity: joi.number().min(0).required().label('quantity'),\n    sellerId: joi.string().uuid().required().label('sellerId'),\n    expdate: joi.date().min('now').label('expiration data'),\n    price: joi.number().min(0).required().label('price'),\n    category: joi.number().min(0).label('category')\n  });\n\n  // eslint-disable-next-line no-return-await\n  return await Schema.validate(data, {\n    abortEarly: false\n  });\n}\n"],"mappings":";;;;;;;AAAA,IAAAA,IAAA,GAAAC,sBAAA,CAAAC,OAAA;AAEA;AACA;AACA;AACA;AACA;AACe,eAAeC,iBAAiBA,CAACC,IAAI,EAAE;EACpD,MAAMC,MAAM,GAAGC,YAAG,CAACC,MAAM,CAAC;IACxBC,IAAI,EAAEF,YAAG,CACNG,MAAM,EAAE,CACRC,GAAG,CAAC,CAAC,CAAC,CACNC,GAAG,CAAC,GAAG,CAAC,CACRC,QAAQ,EAAE,CACVC,KAAK,CAAC,MAAM,CAAC;IAChBC,WAAW,EAAER,YAAG,CAACG,MAAM,EAAE,CAACC,GAAG,CAAC,CAAC,CAAC,CAACC,GAAG,CAAC,IAAI,CAAC,CAACE,KAAK,CAAC,aAAa,CAAC;IAC/DE,QAAQ,EAAET,YAAG,CAACU,MAAM,EAAE,CAACN,GAAG,CAAC,CAAC,CAAC,CAACE,QAAQ,EAAE,CAACC,KAAK,CAAC,UAAU,CAAC;IAC1DI,QAAQ,EAAEX,YAAG,CAACG,MAAM,EAAE,CAACS,IAAI,EAAE,CAACN,QAAQ,EAAE,CAACC,KAAK,CAAC,UAAU,CAAC;IAC1DM,OAAO,EAAEb,YAAG,CAACc,IAAI,EAAE,CAACV,GAAG,CAAC,KAAK,CAAC,CAACG,KAAK,CAAC,iBAAiB,CAAC;IACvDQ,KAAK,EAAEf,YAAG,CAACU,MAAM,EAAE,CAACN,GAAG,CAAC,CAAC,CAAC,CAACE,QAAQ,EAAE,CAACC,KAAK,CAAC,OAAO,CAAC;IACpDS,QAAQ,EAAEhB,YAAG,CAACU,MAAM,EAAE,CAACN,GAAG,CAAC,CAAC,CAAC,CAACG,KAAK,CAAC,UAAU;EAChD,CAAC,CAAC;;EAEF;EACA,OAAO,MAAMR,MAAM,CAACkB,QAAQ,CAACnB,IAAI,EAAE;IACjCoB,UAAU,EAAE;EACd,CAAC,CAAC;AACJ;AAACC,MAAA,CAAAC,OAAA,GAAAA,OAAA,CAAAC,OAAA"}},"mtime":1682148437966},"{\"assumptions\":{},\"sourceRoot\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/middlewares/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"filename\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/middlewares/editProductValidate.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/node_modules/babel-plugin-add-module-exports/lib/index.js\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-runtime\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"regenerator\":true},\"externalDependencies\":[]},{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.21.0:development":{"value":{"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = editProductVatidate;\nvar _productEdit = _interopRequireDefault(require(\"../validations/product.edit.validation\"));\n/**\n * validation function\n * @param {Object} req\n * @param {Object} res\n * @param {Object} next next to other function\n * @returns {Object} response if error\n */\nasync function editProductVatidate(req, res, next) {\n  const {\n    body\n  } = req;\n  const {\n    error\n  } = await (0, _productEdit.default)(body);\n  if (error) {\n    return res.status(400).json({\n      message: error.message\n    });\n  }\n  next();\n}\nmodule.exports = exports.default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfcHJvZHVjdEVkaXQiLCJfaW50ZXJvcFJlcXVpcmVEZWZhdWx0IiwicmVxdWlyZSIsImVkaXRQcm9kdWN0VmF0aWRhdGUiLCJyZXEiLCJyZXMiLCJuZXh0IiwiYm9keSIsImVycm9yIiwidmFsaWRhdGlvbiIsInN0YXR1cyIsImpzb24iLCJtZXNzYWdlIiwibW9kdWxlIiwiZXhwb3J0cyIsImRlZmF1bHQiXSwic291cmNlUm9vdCI6Ii9Vc2Vycy9hbmRlbGFyd2FuZGEvRGVza3RvcC9lLWNvbW0tdGVhbS1icm9ncmFtbWVycy1ibi9zcmMvbWlkZGxld2FyZXMvIiwic291cmNlcyI6WyJlZGl0UHJvZHVjdFZhbGlkYXRlLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB2YWxpZGF0aW9uIGZyb20gJy4uL3ZhbGlkYXRpb25zL3Byb2R1Y3QuZWRpdC52YWxpZGF0aW9uJztcblxuLyoqXG4gKiB2YWxpZGF0aW9uIGZ1bmN0aW9uXG4gKiBAcGFyYW0ge09iamVjdH0gcmVxXG4gKiBAcGFyYW0ge09iamVjdH0gcmVzXG4gKiBAcGFyYW0ge09iamVjdH0gbmV4dCBuZXh0IHRvIG90aGVyIGZ1bmN0aW9uXG4gKiBAcmV0dXJucyB7T2JqZWN0fSByZXNwb25zZSBpZiBlcnJvclxuICovXG5leHBvcnQgZGVmYXVsdCBhc3luYyBmdW5jdGlvbiBlZGl0UHJvZHVjdFZhdGlkYXRlKHJlcSwgcmVzLCBuZXh0KSB7XG4gIGNvbnN0IHsgYm9keSB9ID0gcmVxO1xuICBjb25zdCB7IGVycm9yIH0gPSBhd2FpdCB2YWxpZGF0aW9uKGJvZHkpO1xuICBpZiAoZXJyb3IpIHtcbiAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBtZXNzYWdlOiBlcnJvci5tZXNzYWdlIH0pO1xuICB9XG4gIG5leHQoKTtcbn1cbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBLElBQUFBLFlBQUEsR0FBQUMsc0JBQUEsQ0FBQUMsT0FBQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ2UsZUFBZUMsbUJBQW1CQSxDQUFDQyxHQUFHLEVBQUVDLEdBQUcsRUFBRUMsSUFBSSxFQUFFO0VBQ2hFLE1BQU07SUFBRUM7RUFBSyxDQUFDLEdBQUdILEdBQUc7RUFDcEIsTUFBTTtJQUFFSTtFQUFNLENBQUMsR0FBRyxNQUFNLElBQUFDLG9CQUFVLEVBQUNGLElBQUksQ0FBQztFQUN4QyxJQUFJQyxLQUFLLEVBQUU7SUFDVCxPQUFPSCxHQUFHLENBQUNLLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQ0MsSUFBSSxDQUFDO01BQUVDLE9BQU8sRUFBRUosS0FBSyxDQUFDSTtJQUFRLENBQUMsQ0FBQztFQUN6RDtFQUNBTixJQUFJLEVBQUU7QUFDUjtBQUFDTyxNQUFBLENBQUFDLE9BQUEsR0FBQUEsT0FBQSxDQUFBQyxPQUFBIn0=","map":{"version":3,"names":["_productEdit","_interopRequireDefault","require","editProductVatidate","req","res","next","body","error","validation","status","json","message","module","exports","default"],"sourceRoot":"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/middlewares/","sources":["editProductValidate.js"],"sourcesContent":["import validation from '../validations/product.edit.validation';\n\n/**\n * validation function\n * @param {Object} req\n * @param {Object} res\n * @param {Object} next next to other function\n * @returns {Object} response if error\n */\nexport default async function editProductVatidate(req, res, next) {\n  const { body } = req;\n  const { error } = await validation(body);\n  if (error) {\n    return res.status(400).json({ message: error.message });\n  }\n  next();\n}\n"],"mappings":";;;;;;;AAAA,IAAAA,YAAA,GAAAC,sBAAA,CAAAC,OAAA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACe,eAAeC,mBAAmBA,CAACC,GAAG,EAAEC,GAAG,EAAEC,IAAI,EAAE;EAChE,MAAM;IAAEC;EAAK,CAAC,GAAGH,GAAG;EACpB,MAAM;IAAEI;EAAM,CAAC,GAAG,MAAM,IAAAC,oBAAU,EAACF,IAAI,CAAC;EACxC,IAAIC,KAAK,EAAE;IACT,OAAOH,GAAG,CAACK,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;MAAEC,OAAO,EAAEJ,KAAK,CAACI;IAAQ,CAAC,CAAC;EACzD;EACAN,IAAI,EAAE;AACR;AAACO,MAAA,CAAAC,OAAA,GAAAA,OAAA,CAAAC,OAAA"}},"mtime":1682148437944},"{\"assumptions\":{},\"sourceRoot\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/validations/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"filename\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/validations/product.edit.validation.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/node_modules/babel-plugin-add-module-exports/lib/index.js\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-runtime\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"regenerator\":true},\"externalDependencies\":[]},{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.21.0:development":{"value":{"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = productEditValidation;\nvar _joi = _interopRequireDefault(require(\"joi\"));\n/**\n * validating user info\n * @param {Object} data data to be validated\n * @returns {Schema} output for validation\n */\nasync function productEditValidation(data) {\n  const Schema = _joi.default.object({\n    name: _joi.default.string().min(3).max(255).label('name'),\n    description: _joi.default.string().min(5).max(2000).label('description'),\n    quantity: _joi.default.number().min(0).label('quantity'),\n    sellerId: _joi.default.string().uuid().label('sellerId'),\n    expdate: _joi.default.string().label('expiration data'),\n    price: _joi.default.number().min(0).label('price'),\n    category: _joi.default.number().min(0).label('category')\n  });\n\n  // eslint-disable-next-line no-return-await\n  return await Schema.validate(data, {\n    abortEarly: false\n  });\n}\nmodule.exports = exports.default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfam9pIiwiX2ludGVyb3BSZXF1aXJlRGVmYXVsdCIsInJlcXVpcmUiLCJwcm9kdWN0RWRpdFZhbGlkYXRpb24iLCJkYXRhIiwiU2NoZW1hIiwiam9pIiwib2JqZWN0IiwibmFtZSIsInN0cmluZyIsIm1pbiIsIm1heCIsImxhYmVsIiwiZGVzY3JpcHRpb24iLCJxdWFudGl0eSIsIm51bWJlciIsInNlbGxlcklkIiwidXVpZCIsImV4cGRhdGUiLCJwcmljZSIsImNhdGVnb3J5IiwidmFsaWRhdGUiLCJhYm9ydEVhcmx5IiwibW9kdWxlIiwiZXhwb3J0cyIsImRlZmF1bHQiXSwic291cmNlUm9vdCI6Ii9Vc2Vycy9hbmRlbGFyd2FuZGEvRGVza3RvcC9lLWNvbW0tdGVhbS1icm9ncmFtbWVycy1ibi9zcmMvdmFsaWRhdGlvbnMvIiwic291cmNlcyI6WyJwcm9kdWN0LmVkaXQudmFsaWRhdGlvbi5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgam9pIGZyb20gJ2pvaSc7XG5cbi8qKlxuICogdmFsaWRhdGluZyB1c2VyIGluZm9cbiAqIEBwYXJhbSB7T2JqZWN0fSBkYXRhIGRhdGEgdG8gYmUgdmFsaWRhdGVkXG4gKiBAcmV0dXJucyB7U2NoZW1hfSBvdXRwdXQgZm9yIHZhbGlkYXRpb25cbiAqL1xuZXhwb3J0IGRlZmF1bHQgYXN5bmMgZnVuY3Rpb24gcHJvZHVjdEVkaXRWYWxpZGF0aW9uKGRhdGEpIHtcbiAgY29uc3QgU2NoZW1hID0gam9pLm9iamVjdCh7XG4gICAgbmFtZTogam9pLnN0cmluZygpLm1pbigzKS5tYXgoMjU1KS5sYWJlbCgnbmFtZScpLFxuICAgIGRlc2NyaXB0aW9uOiBqb2kuc3RyaW5nKCkubWluKDUpLm1heCgyMDAwKS5sYWJlbCgnZGVzY3JpcHRpb24nKSxcbiAgICBxdWFudGl0eTogam9pLm51bWJlcigpLm1pbigwKS5sYWJlbCgncXVhbnRpdHknKSxcbiAgICBzZWxsZXJJZDogam9pLnN0cmluZygpLnV1aWQoKS5sYWJlbCgnc2VsbGVySWQnKSxcbiAgICBleHBkYXRlOiBqb2kuc3RyaW5nKCkubGFiZWwoJ2V4cGlyYXRpb24gZGF0YScpLFxuICAgIHByaWNlOiBqb2kubnVtYmVyKCkubWluKDApLmxhYmVsKCdwcmljZScpLFxuICAgIGNhdGVnb3J5OiBqb2kubnVtYmVyKCkubWluKDApLmxhYmVsKCdjYXRlZ29yeScpXG4gIH0pO1xuXG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1yZXR1cm4tYXdhaXRcbiAgcmV0dXJuIGF3YWl0IFNjaGVtYS52YWxpZGF0ZShkYXRhLCB7XG4gICAgYWJvcnRFYXJseTogZmFsc2VcbiAgfSk7XG59XG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBQSxJQUFBQSxJQUFBLEdBQUFDLHNCQUFBLENBQUFDLE9BQUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ2UsZUFBZUMscUJBQXFCQSxDQUFDQyxJQUFJLEVBQUU7RUFDeEQsTUFBTUMsTUFBTSxHQUFHQyxZQUFHLENBQUNDLE1BQU0sQ0FBQztJQUN4QkMsSUFBSSxFQUFFRixZQUFHLENBQUNHLE1BQU0sRUFBRSxDQUFDQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUNDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQ0MsS0FBSyxDQUFDLE1BQU0sQ0FBQztJQUNoREMsV0FBVyxFQUFFUCxZQUFHLENBQUNHLE1BQU0sRUFBRSxDQUFDQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUNDLEdBQUcsQ0FBQyxJQUFJLENBQUMsQ0FBQ0MsS0FBSyxDQUFDLGFBQWEsQ0FBQztJQUMvREUsUUFBUSxFQUFFUixZQUFHLENBQUNTLE1BQU0sRUFBRSxDQUFDTCxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUNFLEtBQUssQ0FBQyxVQUFVLENBQUM7SUFDL0NJLFFBQVEsRUFBRVYsWUFBRyxDQUFDRyxNQUFNLEVBQUUsQ0FBQ1EsSUFBSSxFQUFFLENBQUNMLEtBQUssQ0FBQyxVQUFVLENBQUM7SUFDL0NNLE9BQU8sRUFBRVosWUFBRyxDQUFDRyxNQUFNLEVBQUUsQ0FBQ0csS0FBSyxDQUFDLGlCQUFpQixDQUFDO0lBQzlDTyxLQUFLLEVBQUViLFlBQUcsQ0FBQ1MsTUFBTSxFQUFFLENBQUNMLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQ0UsS0FBSyxDQUFDLE9BQU8sQ0FBQztJQUN6Q1EsUUFBUSxFQUFFZCxZQUFHLENBQUNTLE1BQU0sRUFBRSxDQUFDTCxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUNFLEtBQUssQ0FBQyxVQUFVO0VBQ2hELENBQUMsQ0FBQzs7RUFFRjtFQUNBLE9BQU8sTUFBTVAsTUFBTSxDQUFDZ0IsUUFBUSxDQUFDakIsSUFBSSxFQUFFO0lBQ2pDa0IsVUFBVSxFQUFFO0VBQ2QsQ0FBQyxDQUFDO0FBQ0o7QUFBQ0MsTUFBQSxDQUFBQyxPQUFBLEdBQUFBLE9BQUEsQ0FBQUMsT0FBQSJ9","map":{"version":3,"names":["_joi","_interopRequireDefault","require","productEditValidation","data","Schema","joi","object","name","string","min","max","label","description","quantity","number","sellerId","uuid","expdate","price","category","validate","abortEarly","module","exports","default"],"sourceRoot":"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/validations/","sources":["product.edit.validation.js"],"sourcesContent":["import joi from 'joi';\n\n/**\n * validating user info\n * @param {Object} data data to be validated\n * @returns {Schema} output for validation\n */\nexport default async function productEditValidation(data) {\n  const Schema = joi.object({\n    name: joi.string().min(3).max(255).label('name'),\n    description: joi.string().min(5).max(2000).label('description'),\n    quantity: joi.number().min(0).label('quantity'),\n    sellerId: joi.string().uuid().label('sellerId'),\n    expdate: joi.string().label('expiration data'),\n    price: joi.number().min(0).label('price'),\n    category: joi.number().min(0).label('category')\n  });\n\n  // eslint-disable-next-line no-return-await\n  return await Schema.validate(data, {\n    abortEarly: false\n  });\n}\n"],"mappings":";;;;;;;AAAA,IAAAA,IAAA,GAAAC,sBAAA,CAAAC,OAAA;AAEA;AACA;AACA;AACA;AACA;AACe,eAAeC,qBAAqBA,CAACC,IAAI,EAAE;EACxD,MAAMC,MAAM,GAAGC,YAAG,CAACC,MAAM,CAAC;IACxBC,IAAI,EAAEF,YAAG,CAACG,MAAM,EAAE,CAACC,GAAG,CAAC,CAAC,CAAC,CAACC,GAAG,CAAC,GAAG,CAAC,CAACC,KAAK,CAAC,MAAM,CAAC;IAChDC,WAAW,EAAEP,YAAG,CAACG,MAAM,EAAE,CAACC,GAAG,CAAC,CAAC,CAAC,CAACC,GAAG,CAAC,IAAI,CAAC,CAACC,KAAK,CAAC,aAAa,CAAC;IAC/DE,QAAQ,EAAER,YAAG,CAACS,MAAM,EAAE,CAACL,GAAG,CAAC,CAAC,CAAC,CAACE,KAAK,CAAC,UAAU,CAAC;IAC/CI,QAAQ,EAAEV,YAAG,CAACG,MAAM,EAAE,CAACQ,IAAI,EAAE,CAACL,KAAK,CAAC,UAAU,CAAC;IAC/CM,OAAO,EAAEZ,YAAG,CAACG,MAAM,EAAE,CAACG,KAAK,CAAC,iBAAiB,CAAC;IAC9CO,KAAK,EAAEb,YAAG,CAACS,MAAM,EAAE,CAACL,GAAG,CAAC,CAAC,CAAC,CAACE,KAAK,CAAC,OAAO,CAAC;IACzCQ,QAAQ,EAAEd,YAAG,CAACS,MAAM,EAAE,CAACL,GAAG,CAAC,CAAC,CAAC,CAACE,KAAK,CAAC,UAAU;EAChD,CAAC,CAAC;;EAEF;EACA,OAAO,MAAMP,MAAM,CAACgB,QAAQ,CAACjB,IAAI,EAAE;IACjCkB,UAAU,EAAE;EACd,CAAC,CAAC;AACJ;AAACC,MAAA,CAAAC,OAAA,GAAAA,OAAA,CAAAC,OAAA"}},"mtime":1682148437966},"{\"assumptions\":{},\"sourceRoot\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/middlewares/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"filename\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/middlewares/isowner.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/node_modules/babel-plugin-add-module-exports/lib/index.js\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-runtime\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"regenerator\":true},\"externalDependencies\":[]},{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.21.0:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = isOwner;\nvar _models = require(\"../database/models\");\n// eslint-disable-next-line import/named\n\n/**\n * @param {Object} req\n * @param {Object} res\n * @param {Object} next\n * @returns {res} response\n */\nasync function isOwner(req, res, next) {\n  try {\n    const {\n      id\n    } = req.params;\n    if (!id || id === null) return res.status(400).json({\n      message: \"product doesn't exist\"\n    });\n    const product = await _models.products.findOne({\n      where: {\n        id\n      }\n    });\n    if (!product || product === null) return res.status(400).json({\n      message: \"product doesn't exist\"\n    });\n    if (product.sellerId !== req.user.id && req.user.role !== 'admin') {\n      return res.status(401).json({\n        message: \"you're not authorized\"\n      });\n    }\n    req.product = product;\n    next();\n  } catch (error) {\n    return res.status(401).json({\n      error\n    });\n  }\n}\nmodule.exports = exports.default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfbW9kZWxzIiwicmVxdWlyZSIsImlzT3duZXIiLCJyZXEiLCJyZXMiLCJuZXh0IiwiaWQiLCJwYXJhbXMiLCJzdGF0dXMiLCJqc29uIiwibWVzc2FnZSIsInByb2R1Y3QiLCJwcm9kdWN0cyIsImZpbmRPbmUiLCJ3aGVyZSIsInNlbGxlcklkIiwidXNlciIsInJvbGUiLCJlcnJvciIsIm1vZHVsZSIsImV4cG9ydHMiLCJkZWZhdWx0Il0sInNvdXJjZVJvb3QiOiIvVXNlcnMvYW5kZWxhcndhbmRhL0Rlc2t0b3AvZS1jb21tLXRlYW0tYnJvZ3JhbW1lcnMtYm4vc3JjL21pZGRsZXdhcmVzLyIsInNvdXJjZXMiOlsiaXNvd25lci5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgaW1wb3J0L25hbWVkXG5pbXBvcnQgeyBwcm9kdWN0cyB9IGZyb20gJy4uL2RhdGFiYXNlL21vZGVscyc7XG5cbi8qKlxuICogQHBhcmFtIHtPYmplY3R9IHJlcVxuICogQHBhcmFtIHtPYmplY3R9IHJlc1xuICogQHBhcmFtIHtPYmplY3R9IG5leHRcbiAqIEByZXR1cm5zIHtyZXN9IHJlc3BvbnNlXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGFzeW5jIGZ1bmN0aW9uIGlzT3duZXIocmVxLCByZXMsIG5leHQpIHtcbiAgdHJ5IHtcbiAgICBjb25zdCB7IGlkIH0gPSByZXEucGFyYW1zO1xuICAgIGlmICghaWQgfHwgaWQgPT09IG51bGwpIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IG1lc3NhZ2U6IFwicHJvZHVjdCBkb2Vzbid0IGV4aXN0XCIgfSk7XG5cbiAgICBjb25zdCBwcm9kdWN0ID0gYXdhaXQgcHJvZHVjdHMuZmluZE9uZSh7IHdoZXJlOiB7IGlkIH0gfSk7XG4gICAgaWYgKCFwcm9kdWN0IHx8IHByb2R1Y3QgPT09IG51bGwpIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IG1lc3NhZ2U6IFwicHJvZHVjdCBkb2Vzbid0IGV4aXN0XCIgfSk7XG5cbiAgICBpZiAocHJvZHVjdC5zZWxsZXJJZCAhPT0gcmVxLnVzZXIuaWQgJiYgcmVxLnVzZXIucm9sZSAhPT0gJ2FkbWluJykge1xuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAxKS5qc29uKHsgbWVzc2FnZTogXCJ5b3UncmUgbm90IGF1dGhvcml6ZWRcIiB9KTtcbiAgICB9XG4gICAgcmVxLnByb2R1Y3QgPSBwcm9kdWN0O1xuICAgIG5leHQoKTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDEpLmpzb24oeyBlcnJvciB9KTtcbiAgfVxufVxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7QUFDQSxJQUFBQSxPQUFBLEdBQUFDLE9BQUE7QUFEQTs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDZSxlQUFlQyxPQUFPQSxDQUFDQyxHQUFHLEVBQUVDLEdBQUcsRUFBRUMsSUFBSSxFQUFFO0VBQ3BELElBQUk7SUFDRixNQUFNO01BQUVDO0lBQUcsQ0FBQyxHQUFHSCxHQUFHLENBQUNJLE1BQU07SUFDekIsSUFBSSxDQUFDRCxFQUFFLElBQUlBLEVBQUUsS0FBSyxJQUFJLEVBQUUsT0FBT0YsR0FBRyxDQUFDSSxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUNDLElBQUksQ0FBQztNQUFFQyxPQUFPLEVBQUU7SUFBd0IsQ0FBQyxDQUFDO0lBRXpGLE1BQU1DLE9BQU8sR0FBRyxNQUFNQyxnQkFBUSxDQUFDQyxPQUFPLENBQUM7TUFBRUMsS0FBSyxFQUFFO1FBQUVSO01BQUc7SUFBRSxDQUFDLENBQUM7SUFDekQsSUFBSSxDQUFDSyxPQUFPLElBQUlBLE9BQU8sS0FBSyxJQUFJLEVBQUUsT0FBT1AsR0FBRyxDQUFDSSxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUNDLElBQUksQ0FBQztNQUFFQyxPQUFPLEVBQUU7SUFBd0IsQ0FBQyxDQUFDO0lBRW5HLElBQUlDLE9BQU8sQ0FBQ0ksUUFBUSxLQUFLWixHQUFHLENBQUNhLElBQUksQ0FBQ1YsRUFBRSxJQUFJSCxHQUFHLENBQUNhLElBQUksQ0FBQ0MsSUFBSSxLQUFLLE9BQU8sRUFBRTtNQUNqRSxPQUFPYixHQUFHLENBQUNJLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQ0MsSUFBSSxDQUFDO1FBQUVDLE9BQU8sRUFBRTtNQUF3QixDQUFDLENBQUM7SUFDbkU7SUFDQVAsR0FBRyxDQUFDUSxPQUFPLEdBQUdBLE9BQU87SUFDckJOLElBQUksRUFBRTtFQUNSLENBQUMsQ0FBQyxPQUFPYSxLQUFLLEVBQUU7SUFDZCxPQUFPZCxHQUFHLENBQUNJLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQ0MsSUFBSSxDQUFDO01BQUVTO0lBQU0sQ0FBQyxDQUFDO0VBQ3hDO0FBQ0Y7QUFBQ0MsTUFBQSxDQUFBQyxPQUFBLEdBQUFBLE9BQUEsQ0FBQUMsT0FBQSJ9","map":{"version":3,"names":["_models","require","isOwner","req","res","next","id","params","status","json","message","product","products","findOne","where","sellerId","user","role","error","module","exports","default"],"sourceRoot":"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/middlewares/","sources":["isowner.js"],"sourcesContent":["// eslint-disable-next-line import/named\nimport { products } from '../database/models';\n\n/**\n * @param {Object} req\n * @param {Object} res\n * @param {Object} next\n * @returns {res} response\n */\nexport default async function isOwner(req, res, next) {\n  try {\n    const { id } = req.params;\n    if (!id || id === null) return res.status(400).json({ message: \"product doesn't exist\" });\n\n    const product = await products.findOne({ where: { id } });\n    if (!product || product === null) return res.status(400).json({ message: \"product doesn't exist\" });\n\n    if (product.sellerId !== req.user.id && req.user.role !== 'admin') {\n      return res.status(401).json({ message: \"you're not authorized\" });\n    }\n    req.product = product;\n    next();\n  } catch (error) {\n    return res.status(401).json({ error });\n  }\n}\n"],"mappings":";;;;;;AACA,IAAAA,OAAA,GAAAC,OAAA;AADA;;AAGA;AACA;AACA;AACA;AACA;AACA;AACe,eAAeC,OAAOA,CAACC,GAAG,EAAEC,GAAG,EAAEC,IAAI,EAAE;EACpD,IAAI;IACF,MAAM;MAAEC;IAAG,CAAC,GAAGH,GAAG,CAACI,MAAM;IACzB,IAAI,CAACD,EAAE,IAAIA,EAAE,KAAK,IAAI,EAAE,OAAOF,GAAG,CAACI,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;MAAEC,OAAO,EAAE;IAAwB,CAAC,CAAC;IAEzF,MAAMC,OAAO,GAAG,MAAMC,gBAAQ,CAACC,OAAO,CAAC;MAAEC,KAAK,EAAE;QAAER;MAAG;IAAE,CAAC,CAAC;IACzD,IAAI,CAACK,OAAO,IAAIA,OAAO,KAAK,IAAI,EAAE,OAAOP,GAAG,CAACI,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;MAAEC,OAAO,EAAE;IAAwB,CAAC,CAAC;IAEnG,IAAIC,OAAO,CAACI,QAAQ,KAAKZ,GAAG,CAACa,IAAI,CAACV,EAAE,IAAIH,GAAG,CAACa,IAAI,CAACC,IAAI,KAAK,OAAO,EAAE;MACjE,OAAOb,GAAG,CAACI,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;QAAEC,OAAO,EAAE;MAAwB,CAAC,CAAC;IACnE;IACAP,GAAG,CAACQ,OAAO,GAAGA,OAAO;IACrBN,IAAI,EAAE;EACR,CAAC,CAAC,OAAOa,KAAK,EAAE;IACd,OAAOd,GAAG,CAACI,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;MAAES;IAAM,CAAC,CAAC;EACxC;AACF;AAACC,MAAA,CAAAC,OAAA,GAAAA,OAAA,CAAAC,OAAA"}},"mtime":1685643189462},"{\"assumptions\":{},\"sourceRoot\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/middlewares/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"filename\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/middlewares/isProductAvailable.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/node_modules/babel-plugin-add-module-exports/lib/index.js\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-runtime\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"regenerator\":true},\"externalDependencies\":[]},{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.21.0:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = isAvailable;\nvar _models = require(\"../database/models\");\n// eslint-disable-next-line import/named\n\n/**\n * @param {Object} req\n * @param {Object} res\n * @param {Object} next\n * @returns {res} response\n */\nasync function isAvailable(req, res, next) {\n  try {\n    const {\n      id\n    } = req.params;\n    if (!id || id === null) return res.status(400).json({\n      message: 'id is not supposed to be null'\n    });\n    const product = await _models.products.findOne({\n      where: {\n        id\n      }\n    });\n    if (!product || product === null) return res.status(400).json({\n      message: 'product not found'\n    });\n    if (!product.available) return res.status(400).json({\n      message: 'product not available'\n    });\n    req.product = product;\n    next();\n  } catch (error) {\n    return res.status(500).json({\n      message: 'server error'\n    });\n  }\n}\nmodule.exports = exports.default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfbW9kZWxzIiwicmVxdWlyZSIsImlzQXZhaWxhYmxlIiwicmVxIiwicmVzIiwibmV4dCIsImlkIiwicGFyYW1zIiwic3RhdHVzIiwianNvbiIsIm1lc3NhZ2UiLCJwcm9kdWN0IiwicHJvZHVjdHMiLCJmaW5kT25lIiwid2hlcmUiLCJhdmFpbGFibGUiLCJlcnJvciIsIm1vZHVsZSIsImV4cG9ydHMiLCJkZWZhdWx0Il0sInNvdXJjZVJvb3QiOiIvVXNlcnMvYW5kZWxhcndhbmRhL0Rlc2t0b3AvZS1jb21tLXRlYW0tYnJvZ3JhbW1lcnMtYm4vc3JjL21pZGRsZXdhcmVzLyIsInNvdXJjZXMiOlsiaXNQcm9kdWN0QXZhaWxhYmxlLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBpbXBvcnQvbmFtZWRcbmltcG9ydCB7IHByb2R1Y3RzIH0gZnJvbSAnLi4vZGF0YWJhc2UvbW9kZWxzJztcblxuLyoqXG4gKiBAcGFyYW0ge09iamVjdH0gcmVxXG4gKiBAcGFyYW0ge09iamVjdH0gcmVzXG4gKiBAcGFyYW0ge09iamVjdH0gbmV4dFxuICogQHJldHVybnMge3Jlc30gcmVzcG9uc2VcbiAqL1xuZXhwb3J0IGRlZmF1bHQgYXN5bmMgZnVuY3Rpb24gaXNBdmFpbGFibGUocmVxLCByZXMsIG5leHQpIHtcbiAgdHJ5IHtcbiAgICBjb25zdCB7IGlkIH0gPSByZXEucGFyYW1zO1xuICAgIGlmICghaWQgfHwgaWQgPT09IG51bGwpIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IG1lc3NhZ2U6ICdpZCBpcyBub3Qgc3VwcG9zZWQgdG8gYmUgbnVsbCcgfSk7XG4gICAgY29uc3QgcHJvZHVjdCA9IGF3YWl0IHByb2R1Y3RzLmZpbmRPbmUoeyB3aGVyZTogeyBpZCB9IH0pO1xuICAgIGlmICghcHJvZHVjdCB8fCBwcm9kdWN0ID09PSBudWxsKSByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBtZXNzYWdlOiAncHJvZHVjdCBub3QgZm91bmQnIH0pO1xuICAgIGlmICghcHJvZHVjdC5hdmFpbGFibGUpIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IG1lc3NhZ2U6ICdwcm9kdWN0IG5vdCBhdmFpbGFibGUnIH0pO1xuXG4gICAgcmVxLnByb2R1Y3QgPSBwcm9kdWN0O1xuICAgIG5leHQoKTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICByZXR1cm4gcmVzLnN0YXR1cyg1MDApLmpzb24oeyBtZXNzYWdlOiAnc2VydmVyIGVycm9yJyB9KTtcbiAgfVxufVxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7QUFDQSxJQUFBQSxPQUFBLEdBQUFDLE9BQUE7QUFEQTs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDZSxlQUFlQyxXQUFXQSxDQUFDQyxHQUFHLEVBQUVDLEdBQUcsRUFBRUMsSUFBSSxFQUFFO0VBQ3hELElBQUk7SUFDRixNQUFNO01BQUVDO0lBQUcsQ0FBQyxHQUFHSCxHQUFHLENBQUNJLE1BQU07SUFDekIsSUFBSSxDQUFDRCxFQUFFLElBQUlBLEVBQUUsS0FBSyxJQUFJLEVBQUUsT0FBT0YsR0FBRyxDQUFDSSxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUNDLElBQUksQ0FBQztNQUFFQyxPQUFPLEVBQUU7SUFBZ0MsQ0FBQyxDQUFDO0lBQ2pHLE1BQU1DLE9BQU8sR0FBRyxNQUFNQyxnQkFBUSxDQUFDQyxPQUFPLENBQUM7TUFBRUMsS0FBSyxFQUFFO1FBQUVSO01BQUc7SUFBRSxDQUFDLENBQUM7SUFDekQsSUFBSSxDQUFDSyxPQUFPLElBQUlBLE9BQU8sS0FBSyxJQUFJLEVBQUUsT0FBT1AsR0FBRyxDQUFDSSxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUNDLElBQUksQ0FBQztNQUFFQyxPQUFPLEVBQUU7SUFBb0IsQ0FBQyxDQUFDO0lBQy9GLElBQUksQ0FBQ0MsT0FBTyxDQUFDSSxTQUFTLEVBQUUsT0FBT1gsR0FBRyxDQUFDSSxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUNDLElBQUksQ0FBQztNQUFFQyxPQUFPLEVBQUU7SUFBd0IsQ0FBQyxDQUFDO0lBRXpGUCxHQUFHLENBQUNRLE9BQU8sR0FBR0EsT0FBTztJQUNyQk4sSUFBSSxFQUFFO0VBQ1IsQ0FBQyxDQUFDLE9BQU9XLEtBQUssRUFBRTtJQUNkLE9BQU9aLEdBQUcsQ0FBQ0ksTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDQyxJQUFJLENBQUM7TUFBRUMsT0FBTyxFQUFFO0lBQWUsQ0FBQyxDQUFDO0VBQzFEO0FBQ0Y7QUFBQ08sTUFBQSxDQUFBQyxPQUFBLEdBQUFBLE9BQUEsQ0FBQUMsT0FBQSJ9","map":{"version":3,"names":["_models","require","isAvailable","req","res","next","id","params","status","json","message","product","products","findOne","where","available","error","module","exports","default"],"sourceRoot":"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/middlewares/","sources":["isProductAvailable.js"],"sourcesContent":["// eslint-disable-next-line import/named\nimport { products } from '../database/models';\n\n/**\n * @param {Object} req\n * @param {Object} res\n * @param {Object} next\n * @returns {res} response\n */\nexport default async function isAvailable(req, res, next) {\n  try {\n    const { id } = req.params;\n    if (!id || id === null) return res.status(400).json({ message: 'id is not supposed to be null' });\n    const product = await products.findOne({ where: { id } });\n    if (!product || product === null) return res.status(400).json({ message: 'product not found' });\n    if (!product.available) return res.status(400).json({ message: 'product not available' });\n\n    req.product = product;\n    next();\n  } catch (error) {\n    return res.status(500).json({ message: 'server error' });\n  }\n}\n"],"mappings":";;;;;;AACA,IAAAA,OAAA,GAAAC,OAAA;AADA;;AAGA;AACA;AACA;AACA;AACA;AACA;AACe,eAAeC,WAAWA,CAACC,GAAG,EAAEC,GAAG,EAAEC,IAAI,EAAE;EACxD,IAAI;IACF,MAAM;MAAEC;IAAG,CAAC,GAAGH,GAAG,CAACI,MAAM;IACzB,IAAI,CAACD,EAAE,IAAIA,EAAE,KAAK,IAAI,EAAE,OAAOF,GAAG,CAACI,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;MAAEC,OAAO,EAAE;IAAgC,CAAC,CAAC;IACjG,MAAMC,OAAO,GAAG,MAAMC,gBAAQ,CAACC,OAAO,CAAC;MAAEC,KAAK,EAAE;QAAER;MAAG;IAAE,CAAC,CAAC;IACzD,IAAI,CAACK,OAAO,IAAIA,OAAO,KAAK,IAAI,EAAE,OAAOP,GAAG,CAACI,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;MAAEC,OAAO,EAAE;IAAoB,CAAC,CAAC;IAC/F,IAAI,CAACC,OAAO,CAACI,SAAS,EAAE,OAAOX,GAAG,CAACI,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;MAAEC,OAAO,EAAE;IAAwB,CAAC,CAAC;IAEzFP,GAAG,CAACQ,OAAO,GAAGA,OAAO;IACrBN,IAAI,EAAE;EACR,CAAC,CAAC,OAAOW,KAAK,EAAE;IACd,OAAOZ,GAAG,CAACI,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;MAAEC,OAAO,EAAE;IAAe,CAAC,CAAC;EAC1D;AACF;AAACO,MAAA,CAAAC,OAAA,GAAAA,OAAA,CAAAC,OAAA"}},"mtime":1682148437945},"{\"assumptions\":{},\"sourceRoot\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/middlewares/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"filename\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/middlewares/catchError.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/node_modules/babel-plugin-add-module-exports/lib/index.js\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-runtime\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"regenerator\":true},\"externalDependencies\":[]},{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.21.0:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _default = middleware => async (req, res, next) => {\n  try {\n    await middleware(req, res, next);\n  } catch (error) {\n    res.status(500).json({\n      message: error.message\n    });\n  }\n};\nexports.default = _default;\nmodule.exports = exports.default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJtaWRkbGV3YXJlIiwicmVxIiwicmVzIiwibmV4dCIsImVycm9yIiwic3RhdHVzIiwianNvbiIsIm1lc3NhZ2UiLCJleHBvcnRzIiwiZGVmYXVsdCIsIl9kZWZhdWx0IiwibW9kdWxlIl0sInNvdXJjZVJvb3QiOiIvVXNlcnMvYW5kZWxhcndhbmRhL0Rlc2t0b3AvZS1jb21tLXRlYW0tYnJvZ3JhbW1lcnMtYm4vc3JjL21pZGRsZXdhcmVzLyIsInNvdXJjZXMiOlsiY2F0Y2hFcnJvci5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZGVmYXVsdCAobWlkZGxld2FyZSkgPT4gYXN5bmMgKHJlcSwgcmVzLCBuZXh0KSA9PiB7XG4gIHRyeSB7XG4gICAgYXdhaXQgbWlkZGxld2FyZShyZXEsIHJlcywgbmV4dCk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgcmVzLnN0YXR1cyg1MDApLmpzb24oeyBtZXNzYWdlOiBlcnJvci5tZXNzYWdlIH0pO1xuICB9XG59O1xuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7ZUFBZ0JBLFVBQVUsSUFBSyxPQUFPQyxHQUFHLEVBQUVDLEdBQUcsRUFBRUMsSUFBSSxLQUFLO0VBQ3ZELElBQUk7SUFDRixNQUFNSCxVQUFVLENBQUNDLEdBQUcsRUFBRUMsR0FBRyxFQUFFQyxJQUFJLENBQUM7RUFDbEMsQ0FBQyxDQUFDLE9BQU9DLEtBQUssRUFBRTtJQUNkRixHQUFHLENBQUNHLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQ0MsSUFBSSxDQUFDO01BQUVDLE9BQU8sRUFBRUgsS0FBSyxDQUFDRztJQUFRLENBQUMsQ0FBQztFQUNsRDtBQUNGLENBQUM7QUFBQUMsT0FBQSxDQUFBQyxPQUFBLEdBQUFDLFFBQUE7QUFBQUMsTUFBQSxDQUFBSCxPQUFBLEdBQUFBLE9BQUEsQ0FBQUMsT0FBQSJ9","map":{"version":3,"names":["middleware","req","res","next","error","status","json","message","exports","default","_default","module"],"sourceRoot":"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/middlewares/","sources":["catchError.js"],"sourcesContent":["export default (middleware) => async (req, res, next) => {\n  try {\n    await middleware(req, res, next);\n  } catch (error) {\n    res.status(500).json({ message: error.message });\n  }\n};\n"],"mappings":";;;;;;eAAgBA,UAAU,IAAK,OAAOC,GAAG,EAAEC,GAAG,EAAEC,IAAI,KAAK;EACvD,IAAI;IACF,MAAMH,UAAU,CAACC,GAAG,EAAEC,GAAG,EAAEC,IAAI,CAAC;EAClC,CAAC,CAAC,OAAOC,KAAK,EAAE;IACdF,GAAG,CAACG,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;MAAEC,OAAO,EAAEH,KAAK,CAACG;IAAQ,CAAC,CAAC;EAClD;AACF,CAAC;AAAAC,OAAA,CAAAC,OAAA,GAAAC,QAAA;AAAAC,MAAA,CAAAH,OAAA,GAAAA,OAAA,CAAAC,OAAA"}},"mtime":1682148437944},"{\"assumptions\":{},\"sourceRoot\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/routes/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"filename\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/routes/wishlist.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/node_modules/babel-plugin-add-module-exports/lib/index.js\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-runtime\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"regenerator\":true},\"externalDependencies\":[]},{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.21.0:development":{"value":{"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _express = _interopRequireDefault(require(\"express\"));\nvar _isItemInWishlist = _interopRequireDefault(require(\"../middlewares/wishlist/isItemInWishlist\"));\nvar _wishlist = _interopRequireDefault(require(\"../controllers/wishlist.controller\"));\nvar _Checkrole = _interopRequireDefault(require(\"../middlewares/Checkrole\"));\nvar _verifyToken = _interopRequireDefault(require(\"../middlewares/verifyToken\"));\nvar _doesProductExist = _interopRequireDefault(require(\"../middlewares/wishlist/doesProductExist\"));\n// eslint-disable-next-line import/no-unresolved, import/extensions\n\nconst routes = _express.default.Router();\nroutes.post('/:id', _verifyToken.default, _doesProductExist.default, _isItemInWishlist.default, _wishlist.default.postwish);\nroutes.get('/', _verifyToken.default, _wishlist.default.getwishesofuser);\nroutes.get('/all', _verifyToken.default, (0, _Checkrole.default)(['admin']), _wishlist.default.getallawishlists);\nroutes.patch('/clear', _verifyToken.default, _wishlist.default.clearWishlist);\nroutes.delete('/:id', _verifyToken.default, _doesProductExist.default, _wishlist.default.deleteWish);\nvar _default = routes;\nexports.default = _default;\nmodule.exports = exports.default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfZXhwcmVzcyIsIl9pbnRlcm9wUmVxdWlyZURlZmF1bHQiLCJyZXF1aXJlIiwiX2lzSXRlbUluV2lzaGxpc3QiLCJfd2lzaGxpc3QiLCJfQ2hlY2tyb2xlIiwiX3ZlcmlmeVRva2VuIiwiX2RvZXNQcm9kdWN0RXhpc3QiLCJyb3V0ZXMiLCJleHByZXNzIiwiUm91dGVyIiwicG9zdCIsImlzQXV0aGVudGljYXRlZCIsImRvZXNQcm9kdWN0RXhpc3QiLCJpc0l0ZW1Jbldpc2hsaXN0Iiwid2lzaGxpc3QiLCJwb3N0d2lzaCIsImdldCIsImdldHdpc2hlc29mdXNlciIsImNoZWNrUm9sZSIsImdldGFsbGF3aXNobGlzdHMiLCJwYXRjaCIsImNsZWFyV2lzaGxpc3QiLCJkZWxldGUiLCJkZWxldGVXaXNoIiwiX2RlZmF1bHQiLCJleHBvcnRzIiwiZGVmYXVsdCIsIm1vZHVsZSJdLCJzb3VyY2VSb290IjoiL1VzZXJzL2FuZGVsYXJ3YW5kYS9EZXNrdG9wL2UtY29tbS10ZWFtLWJyb2dyYW1tZXJzLWJuL3NyYy9yb3V0ZXMvIiwic291cmNlcyI6WyJ3aXNobGlzdC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgZXhwcmVzcyBmcm9tICdleHByZXNzJztcbmltcG9ydCBpc0l0ZW1Jbldpc2hsaXN0IGZyb20gJy4uL21pZGRsZXdhcmVzL3dpc2hsaXN0L2lzSXRlbUluV2lzaGxpc3QnO1xuaW1wb3J0IHdpc2hsaXN0IGZyb20gJy4uL2NvbnRyb2xsZXJzL3dpc2hsaXN0LmNvbnRyb2xsZXInO1xuaW1wb3J0IGNoZWNrUm9sZSBmcm9tICcuLi9taWRkbGV3YXJlcy9DaGVja3JvbGUnO1xuaW1wb3J0IGlzQXV0aGVudGljYXRlZCBmcm9tICcuLi9taWRkbGV3YXJlcy92ZXJpZnlUb2tlbic7XG5pbXBvcnQgZG9lc1Byb2R1Y3RFeGlzdCBmcm9tICcuLi9taWRkbGV3YXJlcy93aXNobGlzdC9kb2VzUHJvZHVjdEV4aXN0Jztcbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBpbXBvcnQvbm8tdW5yZXNvbHZlZCwgaW1wb3J0L2V4dGVuc2lvbnNcblxuY29uc3Qgcm91dGVzID0gZXhwcmVzcy5Sb3V0ZXIoKTtcblxucm91dGVzLnBvc3QoJy86aWQnLCBpc0F1dGhlbnRpY2F0ZWQsIGRvZXNQcm9kdWN0RXhpc3QsIGlzSXRlbUluV2lzaGxpc3QsIHdpc2hsaXN0LnBvc3R3aXNoKTtcbnJvdXRlcy5nZXQoJy8nLCBpc0F1dGhlbnRpY2F0ZWQsIHdpc2hsaXN0LmdldHdpc2hlc29mdXNlcik7XG5yb3V0ZXMuZ2V0KCcvYWxsJywgaXNBdXRoZW50aWNhdGVkLCBjaGVja1JvbGUoWydhZG1pbiddKSwgd2lzaGxpc3QuZ2V0YWxsYXdpc2hsaXN0cyk7XG5yb3V0ZXMucGF0Y2goJy9jbGVhcicsIGlzQXV0aGVudGljYXRlZCwgd2lzaGxpc3QuY2xlYXJXaXNobGlzdCk7XG5yb3V0ZXMuZGVsZXRlKCcvOmlkJywgaXNBdXRoZW50aWNhdGVkLCBkb2VzUHJvZHVjdEV4aXN0LCB3aXNobGlzdC5kZWxldGVXaXNoKTtcbmV4cG9ydCBkZWZhdWx0IHJvdXRlcztcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBLElBQUFBLFFBQUEsR0FBQUMsc0JBQUEsQ0FBQUMsT0FBQTtBQUNBLElBQUFDLGlCQUFBLEdBQUFGLHNCQUFBLENBQUFDLE9BQUE7QUFDQSxJQUFBRSxTQUFBLEdBQUFILHNCQUFBLENBQUFDLE9BQUE7QUFDQSxJQUFBRyxVQUFBLEdBQUFKLHNCQUFBLENBQUFDLE9BQUE7QUFDQSxJQUFBSSxZQUFBLEdBQUFMLHNCQUFBLENBQUFDLE9BQUE7QUFDQSxJQUFBSyxpQkFBQSxHQUFBTixzQkFBQSxDQUFBQyxPQUFBO0FBQ0E7O0FBRUEsTUFBTU0sTUFBTSxHQUFHQyxnQkFBTyxDQUFDQyxNQUFNLEVBQUU7QUFFL0JGLE1BQU0sQ0FBQ0csSUFBSSxDQUFDLE1BQU0sRUFBRUMsb0JBQWUsRUFBRUMseUJBQWdCLEVBQUVDLHlCQUFnQixFQUFFQyxpQkFBUSxDQUFDQyxRQUFRLENBQUM7QUFDM0ZSLE1BQU0sQ0FBQ1MsR0FBRyxDQUFDLEdBQUcsRUFBRUwsb0JBQWUsRUFBRUcsaUJBQVEsQ0FBQ0csZUFBZSxDQUFDO0FBQzFEVixNQUFNLENBQUNTLEdBQUcsQ0FBQyxNQUFNLEVBQUVMLG9CQUFlLEVBQUUsSUFBQU8sa0JBQVMsRUFBQyxDQUFDLE9BQU8sQ0FBQyxDQUFDLEVBQUVKLGlCQUFRLENBQUNLLGdCQUFnQixDQUFDO0FBQ3BGWixNQUFNLENBQUNhLEtBQUssQ0FBQyxRQUFRLEVBQUVULG9CQUFlLEVBQUVHLGlCQUFRLENBQUNPLGFBQWEsQ0FBQztBQUMvRGQsTUFBTSxDQUFDZSxNQUFNLENBQUMsTUFBTSxFQUFFWCxvQkFBZSxFQUFFQyx5QkFBZ0IsRUFBRUUsaUJBQVEsQ0FBQ1MsVUFBVSxDQUFDO0FBQUMsSUFBQUMsUUFBQSxHQUMvRGpCLE1BQU07QUFBQWtCLE9BQUEsQ0FBQUMsT0FBQSxHQUFBRixRQUFBO0FBQUFHLE1BQUEsQ0FBQUYsT0FBQSxHQUFBQSxPQUFBLENBQUFDLE9BQUEifQ==","map":{"version":3,"names":["_express","_interopRequireDefault","require","_isItemInWishlist","_wishlist","_Checkrole","_verifyToken","_doesProductExist","routes","express","Router","post","isAuthenticated","doesProductExist","isItemInWishlist","wishlist","postwish","get","getwishesofuser","checkRole","getallawishlists","patch","clearWishlist","delete","deleteWish","_default","exports","default","module"],"sourceRoot":"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/routes/","sources":["wishlist.js"],"sourcesContent":["import express from 'express';\nimport isItemInWishlist from '../middlewares/wishlist/isItemInWishlist';\nimport wishlist from '../controllers/wishlist.controller';\nimport checkRole from '../middlewares/Checkrole';\nimport isAuthenticated from '../middlewares/verifyToken';\nimport doesProductExist from '../middlewares/wishlist/doesProductExist';\n// eslint-disable-next-line import/no-unresolved, import/extensions\n\nconst routes = express.Router();\n\nroutes.post('/:id', isAuthenticated, doesProductExist, isItemInWishlist, wishlist.postwish);\nroutes.get('/', isAuthenticated, wishlist.getwishesofuser);\nroutes.get('/all', isAuthenticated, checkRole(['admin']), wishlist.getallawishlists);\nroutes.patch('/clear', isAuthenticated, wishlist.clearWishlist);\nroutes.delete('/:id', isAuthenticated, doesProductExist, wishlist.deleteWish);\nexport default routes;\n"],"mappings":";;;;;;;AAAA,IAAAA,QAAA,GAAAC,sBAAA,CAAAC,OAAA;AACA,IAAAC,iBAAA,GAAAF,sBAAA,CAAAC,OAAA;AACA,IAAAE,SAAA,GAAAH,sBAAA,CAAAC,OAAA;AACA,IAAAG,UAAA,GAAAJ,sBAAA,CAAAC,OAAA;AACA,IAAAI,YAAA,GAAAL,sBAAA,CAAAC,OAAA;AACA,IAAAK,iBAAA,GAAAN,sBAAA,CAAAC,OAAA;AACA;;AAEA,MAAMM,MAAM,GAAGC,gBAAO,CAACC,MAAM,EAAE;AAE/BF,MAAM,CAACG,IAAI,CAAC,MAAM,EAAEC,oBAAe,EAAEC,yBAAgB,EAAEC,yBAAgB,EAAEC,iBAAQ,CAACC,QAAQ,CAAC;AAC3FR,MAAM,CAACS,GAAG,CAAC,GAAG,EAAEL,oBAAe,EAAEG,iBAAQ,CAACG,eAAe,CAAC;AAC1DV,MAAM,CAACS,GAAG,CAAC,MAAM,EAAEL,oBAAe,EAAE,IAAAO,kBAAS,EAAC,CAAC,OAAO,CAAC,CAAC,EAAEJ,iBAAQ,CAACK,gBAAgB,CAAC;AACpFZ,MAAM,CAACa,KAAK,CAAC,QAAQ,EAAET,oBAAe,EAAEG,iBAAQ,CAACO,aAAa,CAAC;AAC/Dd,MAAM,CAACe,MAAM,CAAC,MAAM,EAAEX,oBAAe,EAAEC,yBAAgB,EAAEE,iBAAQ,CAACS,UAAU,CAAC;AAAC,IAAAC,QAAA,GAC/DjB,MAAM;AAAAkB,OAAA,CAAAC,OAAA,GAAAF,QAAA;AAAAG,MAAA,CAAAF,OAAA,GAAAA,OAAA,CAAAC,OAAA"}},"mtime":1682148437959},"{\"assumptions\":{},\"sourceRoot\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/middlewares/wishlist/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"filename\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/middlewares/wishlist/isItemInWishlist.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/node_modules/babel-plugin-add-module-exports/lib/index.js\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-runtime\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"regenerator\":true},\"externalDependencies\":[]},{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.21.0:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = isItemInWishlist;\nvar _models = require(\"../../database/models\");\n// eslint-disable-next-line import/named\n\n/**\n * @param {Object} req\n * @param {Object} res\n * @param {Object} next\n * @returns {res} response\n */\nasync function isItemInWishlist(req, res, next) {\n  try {\n    const productId = req.params.id;\n    const user = req.user.id;\n    const wished = await _models.wishlists.findOne({\n      // eslint-disable-next-line object-shorthand\n      where: {\n        productId: productId,\n        userId: user\n      }\n    });\n    if (wished || wished !== null) {\n      return res.status(400).json({\n        message: 'product already in wishlist'\n      });\n    }\n    next();\n  } catch (error) {\n    return res.status(401).json({\n      error\n    });\n  }\n}\nmodule.exports = exports.default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfbW9kZWxzIiwicmVxdWlyZSIsImlzSXRlbUluV2lzaGxpc3QiLCJyZXEiLCJyZXMiLCJuZXh0IiwicHJvZHVjdElkIiwicGFyYW1zIiwiaWQiLCJ1c2VyIiwid2lzaGVkIiwid2lzaGxpc3RzIiwiZmluZE9uZSIsIndoZXJlIiwidXNlcklkIiwic3RhdHVzIiwianNvbiIsIm1lc3NhZ2UiLCJlcnJvciIsIm1vZHVsZSIsImV4cG9ydHMiLCJkZWZhdWx0Il0sInNvdXJjZVJvb3QiOiIvVXNlcnMvYW5kZWxhcndhbmRhL0Rlc2t0b3AvZS1jb21tLXRlYW0tYnJvZ3JhbW1lcnMtYm4vc3JjL21pZGRsZXdhcmVzL3dpc2hsaXN0LyIsInNvdXJjZXMiOlsiaXNJdGVtSW5XaXNobGlzdC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgaW1wb3J0L25hbWVkXG5pbXBvcnQgeyB3aXNobGlzdHMgfSBmcm9tICcuLi8uLi9kYXRhYmFzZS9tb2RlbHMnO1xuXG4vKipcbiAqIEBwYXJhbSB7T2JqZWN0fSByZXFcbiAqIEBwYXJhbSB7T2JqZWN0fSByZXNcbiAqIEBwYXJhbSB7T2JqZWN0fSBuZXh0XG4gKiBAcmV0dXJucyB7cmVzfSByZXNwb25zZVxuICovXG5leHBvcnQgZGVmYXVsdCBhc3luYyBmdW5jdGlvbiBpc0l0ZW1Jbldpc2hsaXN0KHJlcSwgcmVzLCBuZXh0KSB7XG4gIHRyeSB7XG4gICAgY29uc3QgcHJvZHVjdElkID0gcmVxLnBhcmFtcy5pZDtcbiAgICBjb25zdCB1c2VyID0gcmVxLnVzZXIuaWQ7XG4gICAgY29uc3Qgd2lzaGVkID0gYXdhaXQgd2lzaGxpc3RzLmZpbmRPbmUoe1xuICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG9iamVjdC1zaG9ydGhhbmRcbiAgICAgIHdoZXJlOiB7IHByb2R1Y3RJZDogcHJvZHVjdElkLCB1c2VySWQ6IHVzZXIgfSxcbiAgICB9KTtcbiAgICBpZiAod2lzaGVkIHx8IHdpc2hlZCAhPT0gbnVsbCkge1xuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgbWVzc2FnZTogJ3Byb2R1Y3QgYWxyZWFkeSBpbiB3aXNobGlzdCcgfSk7XG4gICAgfVxuXG4gICAgbmV4dCgpO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIHJldHVybiByZXMuc3RhdHVzKDQwMSkuanNvbih7IGVycm9yIH0pO1xuICB9XG59XG4iXSwibWFwcGluZ3MiOiI7Ozs7OztBQUNBLElBQUFBLE9BQUEsR0FBQUMsT0FBQTtBQURBOztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNlLGVBQWVDLGdCQUFnQkEsQ0FBQ0MsR0FBRyxFQUFFQyxHQUFHLEVBQUVDLElBQUksRUFBRTtFQUM3RCxJQUFJO0lBQ0YsTUFBTUMsU0FBUyxHQUFHSCxHQUFHLENBQUNJLE1BQU0sQ0FBQ0MsRUFBRTtJQUMvQixNQUFNQyxJQUFJLEdBQUdOLEdBQUcsQ0FBQ00sSUFBSSxDQUFDRCxFQUFFO0lBQ3hCLE1BQU1FLE1BQU0sR0FBRyxNQUFNQyxpQkFBUyxDQUFDQyxPQUFPLENBQUM7TUFDckM7TUFDQUMsS0FBSyxFQUFFO1FBQUVQLFNBQVMsRUFBRUEsU0FBUztRQUFFUSxNQUFNLEVBQUVMO01BQUs7SUFDOUMsQ0FBQyxDQUFDO0lBQ0YsSUFBSUMsTUFBTSxJQUFJQSxNQUFNLEtBQUssSUFBSSxFQUFFO01BQzdCLE9BQU9OLEdBQUcsQ0FBQ1csTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDQyxJQUFJLENBQUM7UUFBRUMsT0FBTyxFQUFFO01BQThCLENBQUMsQ0FBQztJQUN6RTtJQUVBWixJQUFJLEVBQUU7RUFDUixDQUFDLENBQUMsT0FBT2EsS0FBSyxFQUFFO0lBQ2QsT0FBT2QsR0FBRyxDQUFDVyxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUNDLElBQUksQ0FBQztNQUFFRTtJQUFNLENBQUMsQ0FBQztFQUN4QztBQUNGO0FBQUNDLE1BQUEsQ0FBQUMsT0FBQSxHQUFBQSxPQUFBLENBQUFDLE9BQUEifQ==","map":{"version":3,"names":["_models","require","isItemInWishlist","req","res","next","productId","params","id","user","wished","wishlists","findOne","where","userId","status","json","message","error","module","exports","default"],"sourceRoot":"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/middlewares/wishlist/","sources":["isItemInWishlist.js"],"sourcesContent":["// eslint-disable-next-line import/named\nimport { wishlists } from '../../database/models';\n\n/**\n * @param {Object} req\n * @param {Object} res\n * @param {Object} next\n * @returns {res} response\n */\nexport default async function isItemInWishlist(req, res, next) {\n  try {\n    const productId = req.params.id;\n    const user = req.user.id;\n    const wished = await wishlists.findOne({\n      // eslint-disable-next-line object-shorthand\n      where: { productId: productId, userId: user },\n    });\n    if (wished || wished !== null) {\n      return res.status(400).json({ message: 'product already in wishlist' });\n    }\n\n    next();\n  } catch (error) {\n    return res.status(401).json({ error });\n  }\n}\n"],"mappings":";;;;;;AACA,IAAAA,OAAA,GAAAC,OAAA;AADA;;AAGA;AACA;AACA;AACA;AACA;AACA;AACe,eAAeC,gBAAgBA,CAACC,GAAG,EAAEC,GAAG,EAAEC,IAAI,EAAE;EAC7D,IAAI;IACF,MAAMC,SAAS,GAAGH,GAAG,CAACI,MAAM,CAACC,EAAE;IAC/B,MAAMC,IAAI,GAAGN,GAAG,CAACM,IAAI,CAACD,EAAE;IACxB,MAAME,MAAM,GAAG,MAAMC,iBAAS,CAACC,OAAO,CAAC;MACrC;MACAC,KAAK,EAAE;QAAEP,SAAS,EAAEA,SAAS;QAAEQ,MAAM,EAAEL;MAAK;IAC9C,CAAC,CAAC;IACF,IAAIC,MAAM,IAAIA,MAAM,KAAK,IAAI,EAAE;MAC7B,OAAON,GAAG,CAACW,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;QAAEC,OAAO,EAAE;MAA8B,CAAC,CAAC;IACzE;IAEAZ,IAAI,EAAE;EACR,CAAC,CAAC,OAAOa,KAAK,EAAE;IACd,OAAOd,GAAG,CAACW,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;MAAEE;IAAM,CAAC,CAAC;EACxC;AACF;AAACC,MAAA,CAAAC,OAAA,GAAAA,OAAA,CAAAC,OAAA"}},"mtime":1682148437955},"{\"assumptions\":{},\"sourceRoot\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/controllers/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"filename\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/controllers/wishlist.controller.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/node_modules/babel-plugin-add-module-exports/lib/index.js\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-runtime\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"regenerator\":true},\"externalDependencies\":[]},{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.21.0:development":{"value":{"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _wishlist = _interopRequireDefault(require(\"../services/wishlist.services\"));\nvar _models = require(\"../database/models\");\nvar _paginating = _interopRequireDefault(require(\"../middlewares/paginating\"));\nvar _wishlist2 = require(\"../loggers/wishlist.logger\");\n// eslint-disable-next-line import/named, import/no-duplicates\n\n// eslint-disable-next-line import/named, import/no-duplicates\n\n/**\n * the wishlist controller class\n */\nclass wishlist {\n  /**\n   * @param {Object} req\n   * @param {Object} res\n   * @returns {res} response\n   */\n  static async postwish(req, res) {\n    try {\n      const {\n        id: userId\n      } = req.user;\n      // eslint-disable-next-line camelcase\n      const product_id = req.params.id;\n      const newWish = {\n        userId,\n        // eslint-disable-next-line camelcase\n        productId: product_id\n      };\n      const wish = await _wishlist.default.createWish(newWish);\n      (0, _wishlist2.createWishlist)(req);\n      return res.status(200).json({\n        data: wish,\n        message: 'product added to your wishlist successfully'\n      });\n    } catch (error) {\n      (0, _wishlist2.wishlistError)(req, error);\n      return res.status(500).json({\n        error: error.message,\n        message: 'Could not add product to wishlist, try again'\n      });\n    }\n  }\n\n  /**\n   * @param {Object} req\n   * @param {Object} res\n   * @returns {res} response\n   */\n  static async getwishesofuser(req, res) {\n    try {\n      const userId = req.user.id;\n      const userwishes = await _models.wishlists.findAll({\n        where: {\n          userId\n        }\n      });\n      const productIds = userwishes.map(wish => wish.productId);\n      const Products = await _models.products.findAll({\n        where: {\n          id: productIds\n        }\n      });\n      (0, _wishlist2.getWishlists)(req, Products);\n      return res.status(200).json({\n        message: `${req.user.username} here is product in your wishlist`,\n        data: Products\n      });\n    } catch (error) {\n      (0, _wishlist2.wishlistError)(req, error);\n      return res.status(500).json({\n        error: error.message,\n        message: 'Could not get  wishlist, try again'\n      });\n    }\n  }\n\n  /**\n   * @param {Object} req\n   * @param {Object} res\n   * @returns {res} response\n   */\n  static async deleteWish(req, res) {\n    try {\n      const productId = req.params.id;\n      const userwish = await _models.wishlists.findOne({\n        where: {\n          productId\n        }\n      });\n      if (userwish) {\n        await _models.wishlists.destroy({\n          where: {\n            productId\n          }\n        });\n        await userwish.save();\n        (0, _wishlist2.deleteWishlists)(req, userwish);\n        return res.status(200).json({\n          message: 'deleted from wishlist '\n        });\n      }\n      return res.status(400).json({\n        message: 'you dont have this product in your wishlist'\n      });\n    } catch (error) {\n      (0, _wishlist2.wishlistError)(req, error);\n      return res.status(500).json({\n        error: error.message,\n        message: 'Could delete   wish, try again'\n      });\n    }\n  }\n\n  /**\n   * @param {Object} req\n   * @param {Object} res\n   * @returns {res} response\n   */\n  static async getallawishlists(req, res) {\n    try {\n      (0, _paginating.default)(_models.wishlists)(req, res, () => res.status(200).json(res.paginatedResults));\n      (0, _wishlist2.AdmingetWishlists)(req, res.paginatedResults);\n    } catch (error) {\n      (0, _wishlist2.wishlistError)(req, error);\n      return res.status(500).json({\n        error: error.message,\n        message: 'Could not get  wishlist, try again'\n      });\n    }\n  }\n\n  /**\n   * @param {Object} req\n   * @param {Object} res\n   * @returns {res} response\n   */\n  static async clearWishlist(req, res) {\n    try {\n      const userId = req.user.id;\n      const userwishes = await _models.wishlists.findAll({\n        where: {\n          userId\n        }\n      });\n      if (userwishes !== []) {\n        await _models.wishlists.destroy({\n          where: {\n            userId\n          }\n        });\n        (0, _wishlist2.clearWishlists)(req, userwishes);\n        return res.status(200).json({\n          message: ' wishlists have been cleared'\n        });\n      }\n      return res.status(400).json({\n        message: 'no wishlist to clear'\n      });\n    } catch (error) {\n      (0, _wishlist2.wishlistError)(req, error);\n      return res.status(500).json({\n        error: error.message,\n        message: 'Could not clear  wishlist, try again'\n      });\n    }\n  }\n}\nexports.default = wishlist;\nmodule.exports = exports.default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfd2lzaGxpc3QiLCJfaW50ZXJvcFJlcXVpcmVEZWZhdWx0IiwicmVxdWlyZSIsIl9tb2RlbHMiLCJfcGFnaW5hdGluZyIsIl93aXNobGlzdDIiLCJ3aXNobGlzdCIsInBvc3R3aXNoIiwicmVxIiwicmVzIiwiaWQiLCJ1c2VySWQiLCJ1c2VyIiwicHJvZHVjdF9pZCIsInBhcmFtcyIsIm5ld1dpc2giLCJwcm9kdWN0SWQiLCJ3aXNoIiwiV2lzaGxpc3QiLCJjcmVhdGVXaXNoIiwiY3JlYXRlV2lzaGxpc3QiLCJzdGF0dXMiLCJqc29uIiwiZGF0YSIsIm1lc3NhZ2UiLCJlcnJvciIsIndpc2hsaXN0RXJyb3IiLCJnZXR3aXNoZXNvZnVzZXIiLCJ1c2Vyd2lzaGVzIiwid2lzaGxpc3RzIiwiZmluZEFsbCIsIndoZXJlIiwicHJvZHVjdElkcyIsIm1hcCIsIlByb2R1Y3RzIiwicHJvZHVjdHMiLCJnZXRXaXNobGlzdHMiLCJ1c2VybmFtZSIsImRlbGV0ZVdpc2giLCJ1c2Vyd2lzaCIsImZpbmRPbmUiLCJkZXN0cm95Iiwic2F2ZSIsImRlbGV0ZVdpc2hsaXN0cyIsImdldGFsbGF3aXNobGlzdHMiLCJwYWdpbmF0ZWRSZXN1bHRzIiwiQWRtaW5nZXRXaXNobGlzdHMiLCJjbGVhcldpc2hsaXN0IiwiY2xlYXJXaXNobGlzdHMiLCJleHBvcnRzIiwiZGVmYXVsdCIsIm1vZHVsZSJdLCJzb3VyY2VSb290IjoiL1VzZXJzL2FuZGVsYXJ3YW5kYS9EZXNrdG9wL2UtY29tbS10ZWFtLWJyb2dyYW1tZXJzLWJuL3NyYy9jb250cm9sbGVycy8iLCJzb3VyY2VzIjpbIndpc2hsaXN0LmNvbnRyb2xsZXIuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFdpc2hsaXN0IGZyb20gJy4uL3NlcnZpY2VzL3dpc2hsaXN0LnNlcnZpY2VzJztcbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBpbXBvcnQvbmFtZWQsIGltcG9ydC9uby1kdXBsaWNhdGVzXG5pbXBvcnQgeyB3aXNobGlzdHMgfSBmcm9tICcuLi9kYXRhYmFzZS9tb2RlbHMnO1xuaW1wb3J0IHBhZ2luYXRlZFJlc3VsdHMgZnJvbSAnLi4vbWlkZGxld2FyZXMvcGFnaW5hdGluZyc7XG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgaW1wb3J0L25hbWVkLCBpbXBvcnQvbm8tZHVwbGljYXRlc1xuaW1wb3J0IHsgcHJvZHVjdHMgfSBmcm9tICcuLi9kYXRhYmFzZS9tb2RlbHMnO1xuaW1wb3J0IHtcbiAgZGVsZXRlV2lzaGxpc3RzLFxuICBjbGVhcldpc2hsaXN0cyxcbiAgQWRtaW5nZXRXaXNobGlzdHMsXG4gIGdldFdpc2hsaXN0cyxcbiAgd2lzaGxpc3RFcnJvcixcbiAgY3JlYXRlV2lzaGxpc3QsXG59IGZyb20gJy4uL2xvZ2dlcnMvd2lzaGxpc3QubG9nZ2VyJztcbi8qKlxuICogdGhlIHdpc2hsaXN0IGNvbnRyb2xsZXIgY2xhc3NcbiAqL1xuZXhwb3J0IGRlZmF1bHQgY2xhc3Mgd2lzaGxpc3Qge1xuICAvKipcbiAgICogQHBhcmFtIHtPYmplY3R9IHJlcVxuICAgKiBAcGFyYW0ge09iamVjdH0gcmVzXG4gICAqIEByZXR1cm5zIHtyZXN9IHJlc3BvbnNlXG4gICAqL1xuICBzdGF0aWMgYXN5bmMgcG9zdHdpc2gocmVxLCByZXMpIHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgeyBpZDogdXNlcklkIH0gPSByZXEudXNlcjtcbiAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBjYW1lbGNhc2VcbiAgICAgIGNvbnN0IHByb2R1Y3RfaWQgPSByZXEucGFyYW1zLmlkO1xuICAgICAgY29uc3QgbmV3V2lzaCA9IHtcbiAgICAgICAgdXNlcklkLFxuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgY2FtZWxjYXNlXG4gICAgICAgIHByb2R1Y3RJZDogcHJvZHVjdF9pZCxcbiAgICAgIH07XG4gICAgICBjb25zdCB3aXNoID0gYXdhaXQgV2lzaGxpc3QuY3JlYXRlV2lzaChuZXdXaXNoKTtcbiAgICAgIGNyZWF0ZVdpc2hsaXN0KHJlcSk7XG4gICAgICByZXR1cm4gcmVzLnN0YXR1cygyMDApLmpzb24oe1xuICAgICAgICBkYXRhOiB3aXNoLFxuICAgICAgICBtZXNzYWdlOiAncHJvZHVjdCBhZGRlZCB0byB5b3VyIHdpc2hsaXN0IHN1Y2Nlc3NmdWxseScsXG4gICAgICB9KTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgd2lzaGxpc3RFcnJvcihyZXEsIGVycm9yKTtcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDUwMCkuanNvbih7XG4gICAgICAgIGVycm9yOiBlcnJvci5tZXNzYWdlLFxuICAgICAgICBtZXNzYWdlOiAnQ291bGQgbm90IGFkZCBwcm9kdWN0IHRvIHdpc2hsaXN0LCB0cnkgYWdhaW4nLFxuICAgICAgfSk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7T2JqZWN0fSByZXFcbiAgICogQHBhcmFtIHtPYmplY3R9IHJlc1xuICAgKiBAcmV0dXJucyB7cmVzfSByZXNwb25zZVxuICAgKi9cbiAgc3RhdGljIGFzeW5jIGdldHdpc2hlc29mdXNlcihyZXEsIHJlcykge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCB1c2VySWQgPSByZXEudXNlci5pZDtcbiAgICAgIGNvbnN0IHVzZXJ3aXNoZXMgPSBhd2FpdCB3aXNobGlzdHMuZmluZEFsbCh7IHdoZXJlOiB7IHVzZXJJZCB9IH0pO1xuICAgICAgY29uc3QgcHJvZHVjdElkcyA9IHVzZXJ3aXNoZXMubWFwKCh3aXNoKSA9PiB3aXNoLnByb2R1Y3RJZCk7XG5cbiAgICAgIGNvbnN0IFByb2R1Y3RzID0gYXdhaXQgcHJvZHVjdHMuZmluZEFsbCh7XG4gICAgICAgIHdoZXJlOiB7XG4gICAgICAgICAgaWQ6IHByb2R1Y3RJZHMsXG4gICAgICAgIH0sXG4gICAgICB9KTtcbiAgICAgIGdldFdpc2hsaXN0cyhyZXEsIFByb2R1Y3RzKTtcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDIwMCkuanNvbih7XG4gICAgICAgIG1lc3NhZ2U6IGAke3JlcS51c2VyLnVzZXJuYW1lfSBoZXJlIGlzIHByb2R1Y3QgaW4geW91ciB3aXNobGlzdGAsXG4gICAgICAgIGRhdGE6IFByb2R1Y3RzLFxuICAgICAgfSk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIHdpc2hsaXN0RXJyb3IocmVxLCBlcnJvcik7XG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg1MDApLmpzb24oe1xuICAgICAgICBlcnJvcjogZXJyb3IubWVzc2FnZSxcbiAgICAgICAgbWVzc2FnZTogJ0NvdWxkIG5vdCBnZXQgIHdpc2hsaXN0LCB0cnkgYWdhaW4nLFxuICAgICAgfSk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7T2JqZWN0fSByZXFcbiAgICogQHBhcmFtIHtPYmplY3R9IHJlc1xuICAgKiBAcmV0dXJucyB7cmVzfSByZXNwb25zZVxuICAgKi9cbiAgc3RhdGljIGFzeW5jIGRlbGV0ZVdpc2gocmVxLCByZXMpIHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgcHJvZHVjdElkID0gcmVxLnBhcmFtcy5pZDtcbiAgICAgIGNvbnN0IHVzZXJ3aXNoID0gYXdhaXQgd2lzaGxpc3RzLmZpbmRPbmUoeyB3aGVyZTogeyBwcm9kdWN0SWQgfSB9KTtcbiAgICAgIGlmICh1c2Vyd2lzaCkge1xuICAgICAgICBhd2FpdCB3aXNobGlzdHMuZGVzdHJveSh7IHdoZXJlOiB7IHByb2R1Y3RJZCB9IH0pO1xuICAgICAgICBhd2FpdCB1c2Vyd2lzaC5zYXZlKCk7XG4gICAgICAgIGRlbGV0ZVdpc2hsaXN0cyhyZXEsIHVzZXJ3aXNoKTtcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoMjAwKS5qc29uKHtcbiAgICAgICAgICBtZXNzYWdlOiAnZGVsZXRlZCBmcm9tIHdpc2hsaXN0ICcsXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHtcbiAgICAgICAgbWVzc2FnZTogJ3lvdSBkb250IGhhdmUgdGhpcyBwcm9kdWN0IGluIHlvdXIgd2lzaGxpc3QnLFxuICAgICAgfSk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIHdpc2hsaXN0RXJyb3IocmVxLCBlcnJvcik7XG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg1MDApLmpzb24oe1xuICAgICAgICBlcnJvcjogZXJyb3IubWVzc2FnZSxcbiAgICAgICAgbWVzc2FnZTogJ0NvdWxkIGRlbGV0ZSAgIHdpc2gsIHRyeSBhZ2FpbicsXG4gICAgICB9KTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtPYmplY3R9IHJlcVxuICAgKiBAcGFyYW0ge09iamVjdH0gcmVzXG4gICAqIEByZXR1cm5zIHtyZXN9IHJlc3BvbnNlXG4gICAqL1xuICBzdGF0aWMgYXN5bmMgZ2V0YWxsYXdpc2hsaXN0cyhyZXEsIHJlcykge1xuICAgIHRyeSB7XG4gICAgICBwYWdpbmF0ZWRSZXN1bHRzKHdpc2hsaXN0cykocmVxLCByZXMsICgpID0+IHJlcy5zdGF0dXMoMjAwKS5qc29uKHJlcy5wYWdpbmF0ZWRSZXN1bHRzKSk7XG4gICAgICBBZG1pbmdldFdpc2hsaXN0cyhyZXEsIHJlcy5wYWdpbmF0ZWRSZXN1bHRzKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgd2lzaGxpc3RFcnJvcihyZXEsIGVycm9yKTtcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDUwMCkuanNvbih7XG4gICAgICAgIGVycm9yOiBlcnJvci5tZXNzYWdlLFxuICAgICAgICBtZXNzYWdlOiAnQ291bGQgbm90IGdldCAgd2lzaGxpc3QsIHRyeSBhZ2FpbicsXG4gICAgICB9KTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtPYmplY3R9IHJlcVxuICAgKiBAcGFyYW0ge09iamVjdH0gcmVzXG4gICAqIEByZXR1cm5zIHtyZXN9IHJlc3BvbnNlXG4gICAqL1xuICBzdGF0aWMgYXN5bmMgY2xlYXJXaXNobGlzdChyZXEsIHJlcykge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCB1c2VySWQgPSByZXEudXNlci5pZDtcbiAgICAgIGNvbnN0IHVzZXJ3aXNoZXMgPSBhd2FpdCB3aXNobGlzdHMuZmluZEFsbCh7IHdoZXJlOiB7IHVzZXJJZCB9IH0pO1xuICAgICAgaWYgKHVzZXJ3aXNoZXMgIT09IFtdKSB7XG4gICAgICAgIGF3YWl0IHdpc2hsaXN0cy5kZXN0cm95KHsgd2hlcmU6IHsgdXNlcklkIH0gfSk7XG4gICAgICAgIGNsZWFyV2lzaGxpc3RzKHJlcSwgdXNlcndpc2hlcyk7XG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDIwMCkuanNvbih7XG4gICAgICAgICAgbWVzc2FnZTogJyB3aXNobGlzdHMgaGF2ZSBiZWVuIGNsZWFyZWQnLFxuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHtcbiAgICAgICAgbWVzc2FnZTogJ25vIHdpc2hsaXN0IHRvIGNsZWFyJyxcbiAgICAgIH0pO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICB3aXNobGlzdEVycm9yKHJlcSwgZXJyb3IpO1xuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNTAwKS5qc29uKHtcbiAgICAgICAgZXJyb3I6IGVycm9yLm1lc3NhZ2UsXG4gICAgICAgIG1lc3NhZ2U6ICdDb3VsZCBub3QgY2xlYXIgIHdpc2hsaXN0LCB0cnkgYWdhaW4nLFxuICAgICAgfSk7XG4gICAgfVxuICB9XG59XG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBQSxJQUFBQSxTQUFBLEdBQUFDLHNCQUFBLENBQUFDLE9BQUE7QUFFQSxJQUFBQyxPQUFBLEdBQUFELE9BQUE7QUFDQSxJQUFBRSxXQUFBLEdBQUFILHNCQUFBLENBQUFDLE9BQUE7QUFHQSxJQUFBRyxVQUFBLEdBQUFILE9BQUE7QUFMQTs7QUFHQTs7QUFVQTtBQUNBO0FBQ0E7QUFDZSxNQUFNSSxRQUFRLENBQUM7RUFDNUI7QUFDRjtBQUNBO0FBQ0E7QUFDQTtF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","map":{"version":3,"names":["_wishlist","_interopRequireDefault","require","_models","_paginating","_wishlist2","wishlist","postwish","req","res","id","userId","user","product_id","params","newWish","productId","wish","Wishlist","createWish","createWishlist","status","json","data","message","error","wishlistError","getwishesofuser","userwishes","wishlists","findAll","where","productIds","map","Products","products","getWishlists","username","deleteWish","userwish","findOne","destroy","save","deleteWishlists","getallawishlists","paginatedResults","AdmingetWishlists","clearWishlist","clearWishlists","exports","default","module"],"sourceRoot":"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/controllers/","sources":["wishlist.controller.js"],"sourcesContent":["import Wishlist from '../services/wishlist.services';\n// eslint-disable-next-line import/named, import/no-duplicates\nimport { wishlists } from '../database/models';\nimport paginatedResults from '../middlewares/paginating';\n// eslint-disable-next-line import/named, import/no-duplicates\nimport { products } from '../database/models';\nimport {\n  deleteWishlists,\n  clearWishlists,\n  AdmingetWishlists,\n  getWishlists,\n  wishlistError,\n  createWishlist,\n} from '../loggers/wishlist.logger';\n/**\n * the wishlist controller class\n */\nexport default class wishlist {\n  /**\n   * @param {Object} req\n   * @param {Object} res\n   * @returns {res} response\n   */\n  static async postwish(req, res) {\n    try {\n      const { id: userId } = req.user;\n      // eslint-disable-next-line camelcase\n      const product_id = req.params.id;\n      const newWish = {\n        userId,\n        // eslint-disable-next-line camelcase\n        productId: product_id,\n      };\n      const wish = await Wishlist.createWish(newWish);\n      createWishlist(req);\n      return res.status(200).json({\n        data: wish,\n        message: 'product added to your wishlist successfully',\n      });\n    } catch (error) {\n      wishlistError(req, error);\n      return res.status(500).json({\n        error: error.message,\n        message: 'Could not add product to wishlist, try again',\n      });\n    }\n  }\n\n  /**\n   * @param {Object} req\n   * @param {Object} res\n   * @returns {res} response\n   */\n  static async getwishesofuser(req, res) {\n    try {\n      const userId = req.user.id;\n      const userwishes = await wishlists.findAll({ where: { userId } });\n      const productIds = userwishes.map((wish) => wish.productId);\n\n      const Products = await products.findAll({\n        where: {\n          id: productIds,\n        },\n      });\n      getWishlists(req, Products);\n      return res.status(200).json({\n        message: `${req.user.username} here is product in your wishlist`,\n        data: Products,\n      });\n    } catch (error) {\n      wishlistError(req, error);\n      return res.status(500).json({\n        error: error.message,\n        message: 'Could not get  wishlist, try again',\n      });\n    }\n  }\n\n  /**\n   * @param {Object} req\n   * @param {Object} res\n   * @returns {res} response\n   */\n  static async deleteWish(req, res) {\n    try {\n      const productId = req.params.id;\n      const userwish = await wishlists.findOne({ where: { productId } });\n      if (userwish) {\n        await wishlists.destroy({ where: { productId } });\n        await userwish.save();\n        deleteWishlists(req, userwish);\n        return res.status(200).json({\n          message: 'deleted from wishlist ',\n        });\n      }\n      return res.status(400).json({\n        message: 'you dont have this product in your wishlist',\n      });\n    } catch (error) {\n      wishlistError(req, error);\n      return res.status(500).json({\n        error: error.message,\n        message: 'Could delete   wish, try again',\n      });\n    }\n  }\n\n  /**\n   * @param {Object} req\n   * @param {Object} res\n   * @returns {res} response\n   */\n  static async getallawishlists(req, res) {\n    try {\n      paginatedResults(wishlists)(req, res, () => res.status(200).json(res.paginatedResults));\n      AdmingetWishlists(req, res.paginatedResults);\n    } catch (error) {\n      wishlistError(req, error);\n      return res.status(500).json({\n        error: error.message,\n        message: 'Could not get  wishlist, try again',\n      });\n    }\n  }\n\n  /**\n   * @param {Object} req\n   * @param {Object} res\n   * @returns {res} response\n   */\n  static async clearWishlist(req, res) {\n    try {\n      const userId = req.user.id;\n      const userwishes = await wishlists.findAll({ where: { userId } });\n      if (userwishes !== []) {\n        await wishlists.destroy({ where: { userId } });\n        clearWishlists(req, userwishes);\n        return res.status(200).json({\n          message: ' wishlists have been cleared',\n        });\n      }\n\n      return res.status(400).json({\n        message: 'no wishlist to clear',\n      });\n    } catch (error) {\n      wishlistError(req, error);\n      return res.status(500).json({\n        error: error.message,\n        message: 'Could not clear  wishlist, try again',\n      });\n    }\n  }\n}\n"],"mappings":"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"}},"mtime":1685643189441},"{\"assumptions\":{},\"sourceRoot\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/services/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"filename\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/services/wishlist.services.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/node_modules/babel-plugin-add-module-exports/lib/index.js\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-runtime\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"regenerator\":true},\"externalDependencies\":[]},{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.21.0:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _models = require(\"../database/models\");\n// eslint-disable-next-line import/named\n\n/**\n * function to register user\n * @param {Object} data the information for user to be created\n * @returns {data} for the created user\n */\nclass Wishlist {\n  // eslint-disable-next-line require-jsdoc\n  static async createWish(wish) {\n    const createWish = await _models.wishlists.create(wish);\n    return createWish;\n  }\n\n  // eslint-disable-next-line require-jsdoc\n  static async getwish() {\n    const allwishes = await _models.wishlists.findAll();\n    return allwishes;\n  }\n\n  // eslint-disable-next-line require-jsdoc\n  static async getallwishes() {\n    const allwishes = await _models.wishlists.findAll();\n    return allwishes;\n  }\n\n  // eslint-disable-next-line require-jsdoc\n  static async getallwishlists() {\n    const allwishes = await _models.wishlists.findAll();\n    return allwishes;\n  }\n\n  // eslint-disable-next-line require-jsdoc\n  static async clearwishlist() {\n    const allwishes = await _models.wishlists.findAll();\n    return allwishes;\n  }\n}\nexports.default = Wishlist;\nmodule.exports = exports.default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfbW9kZWxzIiwicmVxdWlyZSIsIldpc2hsaXN0IiwiY3JlYXRlV2lzaCIsIndpc2giLCJ3aXNobGlzdHMiLCJjcmVhdGUiLCJnZXR3aXNoIiwiYWxsd2lzaGVzIiwiZmluZEFsbCIsImdldGFsbHdpc2hlcyIsImdldGFsbHdpc2hsaXN0cyIsImNsZWFyd2lzaGxpc3QiLCJleHBvcnRzIiwiZGVmYXVsdCIsIm1vZHVsZSJdLCJzb3VyY2VSb290IjoiL1VzZXJzL2FuZGVsYXJ3YW5kYS9EZXNrdG9wL2UtY29tbS10ZWFtLWJyb2dyYW1tZXJzLWJuL3NyYy9zZXJ2aWNlcy8iLCJzb3VyY2VzIjpbIndpc2hsaXN0LnNlcnZpY2VzLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBpbXBvcnQvbmFtZWRcbmltcG9ydCB7IHdpc2hsaXN0cyB9IGZyb20gJy4uL2RhdGFiYXNlL21vZGVscyc7XG5cbi8qKlxuICogZnVuY3Rpb24gdG8gcmVnaXN0ZXIgdXNlclxuICogQHBhcmFtIHtPYmplY3R9IGRhdGEgdGhlIGluZm9ybWF0aW9uIGZvciB1c2VyIHRvIGJlIGNyZWF0ZWRcbiAqIEByZXR1cm5zIHtkYXRhfSBmb3IgdGhlIGNyZWF0ZWQgdXNlclxuICovXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBXaXNobGlzdCB7XG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSByZXF1aXJlLWpzZG9jXG4gIHN0YXRpYyBhc3luYyBjcmVhdGVXaXNoKHdpc2gpIHtcbiAgICBjb25zdCBjcmVhdGVXaXNoID0gYXdhaXQgd2lzaGxpc3RzLmNyZWF0ZSh3aXNoKTtcbiAgICByZXR1cm4gY3JlYXRlV2lzaDtcbiAgfVxuXG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSByZXF1aXJlLWpzZG9jXG4gIHN0YXRpYyBhc3luYyBnZXR3aXNoKCkge1xuICAgIGNvbnN0IGFsbHdpc2hlcyA9IGF3YWl0IHdpc2hsaXN0cy5maW5kQWxsKCk7XG4gICAgcmV0dXJuIGFsbHdpc2hlcztcbiAgfVxuXG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSByZXF1aXJlLWpzZG9jXG4gIHN0YXRpYyBhc3luYyBnZXRhbGx3aXNoZXMoKSB7XG4gICAgY29uc3QgYWxsd2lzaGVzID0gYXdhaXQgd2lzaGxpc3RzLmZpbmRBbGwoKTtcbiAgICByZXR1cm4gYWxsd2lzaGVzO1xuICB9XG5cbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIHJlcXVpcmUtanNkb2NcbiAgc3RhdGljIGFzeW5jIGdldGFsbHdpc2hsaXN0cygpIHtcbiAgICBjb25zdCBhbGx3aXNoZXMgPSBhd2FpdCB3aXNobGlzdHMuZmluZEFsbCgpO1xuICAgIHJldHVybiBhbGx3aXNoZXM7XG4gIH1cblxuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgcmVxdWlyZS1qc2RvY1xuICBzdGF0aWMgYXN5bmMgY2xlYXJ3aXNobGlzdCgpIHtcbiAgICBjb25zdCBhbGx3aXNoZXMgPSBhd2FpdCB3aXNobGlzdHMuZmluZEFsbCgpO1xuICAgIHJldHVybiBhbGx3aXNoZXM7XG4gIH1cbn1cbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQ0EsSUFBQUEsT0FBQSxHQUFBQyxPQUFBO0FBREE7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNlLE1BQU1DLFFBQVEsQ0FBQztFQUM1QjtFQUNBLGFBQWFDLFVBQVVBLENBQUNDLElBQUksRUFBRTtJQUM1QixNQUFNRCxVQUFVLEdBQUcsTUFBTUUsaUJBQVMsQ0FBQ0MsTUFBTSxDQUFDRixJQUFJLENBQUM7SUFDL0MsT0FBT0QsVUFBVTtFQUNuQjs7RUFFQTtFQUNBLGFBQWFJLE9BQU9BLENBQUEsRUFBRztJQUNyQixNQUFNQyxTQUFTLEdBQUcsTUFBTUgsaUJBQVMsQ0FBQ0ksT0FBTyxFQUFFO0lBQzNDLE9BQU9ELFNBQVM7RUFDbEI7O0VBRUE7RUFDQSxhQUFhRSxZQUFZQSxDQUFBLEVBQUc7SUFDMUIsTUFBTUYsU0FBUyxHQUFHLE1BQU1ILGlCQUFTLENBQUNJLE9BQU8sRUFBRTtJQUMzQyxPQUFPRCxTQUFTO0VBQ2xCOztFQUVBO0VBQ0EsYUFBYUcsZUFBZUEsQ0FBQSxFQUFHO0lBQzdCLE1BQU1ILFNBQVMsR0FBRyxNQUFNSCxpQkFBUyxDQUFDSSxPQUFPLEVBQUU7SUFDM0MsT0FBT0QsU0FBUztFQUNsQjs7RUFFQTtFQUNBLGFBQWFJLGFBQWFBLENBQUEsRUFBRztJQUMzQixNQUFNSixTQUFTLEdBQUcsTUFBTUgsaUJBQVMsQ0FBQ0ksT0FBTyxFQUFFO0lBQzNDLE9BQU9ELFNBQVM7RUFDbEI7QUFDRjtBQUFDSyxPQUFBLENBQUFDLE9BQUEsR0FBQVosUUFBQTtBQUFBYSxNQUFBLENBQUFGLE9BQUEsR0FBQUEsT0FBQSxDQUFBQyxPQUFBIn0=","map":{"version":3,"names":["_models","require","Wishlist","createWish","wish","wishlists","create","getwish","allwishes","findAll","getallwishes","getallwishlists","clearwishlist","exports","default","module"],"sourceRoot":"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/services/","sources":["wishlist.services.js"],"sourcesContent":["// eslint-disable-next-line import/named\nimport { wishlists } from '../database/models';\n\n/**\n * function to register user\n * @param {Object} data the information for user to be created\n * @returns {data} for the created user\n */\nexport default class Wishlist {\n  // eslint-disable-next-line require-jsdoc\n  static async createWish(wish) {\n    const createWish = await wishlists.create(wish);\n    return createWish;\n  }\n\n  // eslint-disable-next-line require-jsdoc\n  static async getwish() {\n    const allwishes = await wishlists.findAll();\n    return allwishes;\n  }\n\n  // eslint-disable-next-line require-jsdoc\n  static async getallwishes() {\n    const allwishes = await wishlists.findAll();\n    return allwishes;\n  }\n\n  // eslint-disable-next-line require-jsdoc\n  static async getallwishlists() {\n    const allwishes = await wishlists.findAll();\n    return allwishes;\n  }\n\n  // eslint-disable-next-line require-jsdoc\n  static async clearwishlist() {\n    const allwishes = await wishlists.findAll();\n    return allwishes;\n  }\n}\n"],"mappings":";;;;;;AACA,IAAAA,OAAA,GAAAC,OAAA;AADA;;AAGA;AACA;AACA;AACA;AACA;AACe,MAAMC,QAAQ,CAAC;EAC5B;EACA,aAAaC,UAAUA,CAACC,IAAI,EAAE;IAC5B,MAAMD,UAAU,GAAG,MAAME,iBAAS,CAACC,MAAM,CAACF,IAAI,CAAC;IAC/C,OAAOD,UAAU;EACnB;;EAEA;EACA,aAAaI,OAAOA,CAAA,EAAG;IACrB,MAAMC,SAAS,GAAG,MAAMH,iBAAS,CAACI,OAAO,EAAE;IAC3C,OAAOD,SAAS;EAClB;;EAEA;EACA,aAAaE,YAAYA,CAAA,EAAG;IAC1B,MAAMF,SAAS,GAAG,MAAMH,iBAAS,CAACI,OAAO,EAAE;IAC3C,OAAOD,SAAS;EAClB;;EAEA;EACA,aAAaG,eAAeA,CAAA,EAAG;IAC7B,MAAMH,SAAS,GAAG,MAAMH,iBAAS,CAACI,OAAO,EAAE;IAC3C,OAAOD,SAAS;EAClB;;EAEA;EACA,aAAaI,aAAaA,CAAA,EAAG;IAC3B,MAAMJ,SAAS,GAAG,MAAMH,iBAAS,CAACI,OAAO,EAAE;IAC3C,OAAOD,SAAS;EAClB;AACF;AAACK,OAAA,CAAAC,OAAA,GAAAZ,QAAA;AAAAa,MAAA,CAAAF,OAAA,GAAAA,OAAA,CAAAC,OAAA"}},"mtime":1682148437963},"{\"assumptions\":{},\"sourceRoot\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/loggers/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"filename\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/loggers/wishlist.logger.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/node_modules/babel-plugin-add-module-exports/lib/index.js\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-runtime\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"regenerator\":true},\"externalDependencies\":[]},{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.21.0:development":{"value":{"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.wishlistError = exports.getWishlists = exports.deleteWishlists = exports.createWishlist = exports.clearWishlists = exports.AdmingetWishlists = void 0;\nvar _logger = _interopRequireDefault(require(\"../configs/logger\"));\nvar _models = require(\"../database/models\");\n/* eslint-disable import/named */\n\nconst createWishlist = async req => {\n  const logData = {\n    level: 'info',\n    message: `User ${req.user.email} added a product ${req.params.id} in wishlist`,\n    userId: req.user.id,\n    metadata: {\n      wishlist: req.body\n    }\n  };\n  await _models.Log.create(logData);\n  _logger.default.info(`User ${req.user.email} added a product ${req.params.id} in wishlist`);\n};\nexports.createWishlist = createWishlist;\nconst deleteWishlists = async (req, res, wishlist) => {\n  const logData = {\n    level: 'info',\n    message: `User ${req.user.email} removed a product ${req.params.id} in wishlist`,\n    userId: req.user.id,\n    metadata: {\n      deletedWishlist: wishlist\n    }\n  };\n  await _models.Log.create(logData);\n  _logger.default.info(`User ${req.user.email} removed a product ${req.params.id} in wishlist`);\n};\nexports.deleteWishlists = deleteWishlists;\nconst wishlistError = async (req, error) => {\n  const logData = {\n    level: 'error',\n    message: error.message,\n    userId: req.user.id,\n    metadata: {\n      error\n    }\n  };\n  await _models.Log.create(logData);\n  _logger.default.error(error);\n};\nexports.wishlistError = wishlistError;\nconst getWishlists = async (req, Products) => {\n  const logData = {\n    level: 'info',\n    message: `${req.user.email} viewed products in wishlist`,\n    userId: req.user.id,\n    metadata: {\n      wishlistProducts: Products\n    }\n  };\n  await _models.Log.create(logData);\n  _logger.default.info(`${req.user.email}  viewed products in wishlist`, {\n    wishlistProducts: Products\n  });\n};\nexports.getWishlists = getWishlists;\nconst AdmingetWishlists = async (req, userwishes) => {\n  const logData = {\n    level: 'info',\n    message: 'All wishlists retrieved',\n    userId: req.user.id,\n    metadata: {\n      userWishlists: userwishes\n    }\n  };\n  await _models.Log.create(logData);\n  _logger.default.info('All wishlists retrieved', {\n    userWishlists: userwishes\n  });\n};\nexports.AdmingetWishlists = AdmingetWishlists;\nconst clearWishlists = async (req, userwishes) => {\n  const logData = {\n    level: 'info',\n    message: `User ${req.user.email} cleared all wishlists`,\n    userId: req.user.id,\n    metadata: {\n      userwishes\n    }\n  };\n  await _models.Log.create(logData);\n  _logger.default.info(`User ${req.user.email} cleared all wishlists`);\n};\nexports.clearWishlists = clearWishlists;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfbG9nZ2VyIiwiX2ludGVyb3BSZXF1aXJlRGVmYXVsdCIsInJlcXVpcmUiLCJfbW9kZWxzIiwiY3JlYXRlV2lzaGxpc3QiLCJyZXEiLCJsb2dEYXRhIiwibGV2ZWwiLCJtZXNzYWdlIiwidXNlciIsImVtYWlsIiwicGFyYW1zIiwiaWQiLCJ1c2VySWQiLCJtZXRhZGF0YSIsIndpc2hsaXN0IiwiYm9keSIsIkxvZyIsImNyZWF0ZSIsImxvZ2dlciIsImluZm8iLCJleHBvcnRzIiwiZGVsZXRlV2lzaGxpc3RzIiwicmVzIiwiZGVsZXRlZFdpc2hsaXN0Iiwid2lzaGxpc3RFcnJvciIsImVycm9yIiwiZ2V0V2lzaGxpc3RzIiwiUHJvZHVjdHMiLCJ3aXNobGlzdFByb2R1Y3RzIiwiQWRtaW5nZXRXaXNobGlzdHMiLCJ1c2Vyd2lzaGVzIiwidXNlcldpc2hsaXN0cyIsImNsZWFyV2lzaGxpc3RzIl0sInNvdXJjZVJvb3QiOiIvVXNlcnMvYW5kZWxhcndhbmRhL0Rlc2t0b3AvZS1jb21tLXRlYW0tYnJvZ3JhbW1lcnMtYm4vc3JjL2xvZ2dlcnMvIiwic291cmNlcyI6WyJ3aXNobGlzdC5sb2dnZXIuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLyogZXNsaW50LWRpc2FibGUgaW1wb3J0L25hbWVkICovXG5cbmltcG9ydCBsb2dnZXIgZnJvbSAnLi4vY29uZmlncy9sb2dnZXInO1xuaW1wb3J0IHsgTG9nIH0gZnJvbSAnLi4vZGF0YWJhc2UvbW9kZWxzJztcblxuZXhwb3J0IGNvbnN0IGNyZWF0ZVdpc2hsaXN0ID0gYXN5bmMgKHJlcSkgPT4ge1xuICBjb25zdCBsb2dEYXRhID0ge1xuICAgIGxldmVsOiAnaW5mbycsXG4gICAgbWVzc2FnZTogYFVzZXIgJHtyZXEudXNlci5lbWFpbH0gYWRkZWQgYSBwcm9kdWN0ICR7cmVxLnBhcmFtcy5pZH0gaW4gd2lzaGxpc3RgLFxuICAgIHVzZXJJZDogcmVxLnVzZXIuaWQsXG4gICAgbWV0YWRhdGE6IHsgd2lzaGxpc3Q6IHJlcS5ib2R5IH0sXG4gIH07XG4gIGF3YWl0IExvZy5jcmVhdGUobG9nRGF0YSk7XG4gIGxvZ2dlci5pbmZvKGBVc2VyICR7cmVxLnVzZXIuZW1haWx9IGFkZGVkIGEgcHJvZHVjdCAke3JlcS5wYXJhbXMuaWR9IGluIHdpc2hsaXN0YCk7XG59O1xuXG5leHBvcnQgY29uc3QgZGVsZXRlV2lzaGxpc3RzID0gYXN5bmMgKHJlcSwgcmVzLCB3aXNobGlzdCkgPT4ge1xuICBjb25zdCBsb2dEYXRhID0ge1xuICAgIGxldmVsOiAnaW5mbycsXG4gICAgbWVzc2FnZTogYFVzZXIgJHtyZXEudXNlci5lbWFpbH0gcmVtb3ZlZCBhIHByb2R1Y3QgJHtyZXEucGFyYW1zLmlkfSBpbiB3aXNobGlzdGAsXG4gICAgdXNlcklkOiByZXEudXNlci5pZCxcbiAgICBtZXRhZGF0YTogeyBkZWxldGVkV2lzaGxpc3Q6IHdpc2hsaXN0IH0sXG4gIH07XG4gIGF3YWl0IExvZy5jcmVhdGUobG9nRGF0YSk7XG4gIGxvZ2dlci5pbmZvKGBVc2VyICR7cmVxLnVzZXIuZW1haWx9IHJlbW92ZWQgYSBwcm9kdWN0ICR7cmVxLnBhcmFtcy5pZH0gaW4gd2lzaGxpc3RgKTtcbn07XG5leHBvcnQgY29uc3Qgd2lzaGxpc3RFcnJvciA9IGFzeW5jIChyZXEsIGVycm9yKSA9PiB7XG4gIGNvbnN0IGxvZ0RhdGEgPSB7XG4gICAgbGV2ZWw6ICdlcnJvcicsXG4gICAgbWVzc2FnZTogZXJyb3IubWVzc2FnZSxcbiAgICB1c2VySWQ6IHJlcS51c2VyLmlkLFxuICAgIG1ldGFkYXRhOiB7IGVycm9yIH0sXG4gIH07XG4gIGF3YWl0IExvZy5jcmVhdGUobG9nRGF0YSk7XG4gIGxvZ2dlci5lcnJvcihlcnJvcik7XG59O1xuZXhwb3J0IGNvbnN0IGdldFdpc2hsaXN0cyA9IGFzeW5jIChyZXEsIFByb2R1Y3RzKSA9PiB7XG4gIGNvbnN0IGxvZ0RhdGEgPSB7XG4gICAgbGV2ZWw6ICdpbmZvJyxcbiAgICBtZXNzYWdlOiBgJHtyZXEudXNlci5lbWFpbH0gdmlld2VkIHByb2R1Y3RzIGluIHdpc2hsaXN0YCxcbiAgICB1c2VySWQ6IHJlcS51c2VyLmlkLFxuICAgIG1ldGFkYXRhOiB7IHdpc2hsaXN0UHJvZHVjdHM6IFByb2R1Y3RzIH0sXG4gIH07XG4gIGF3YWl0IExvZy5jcmVhdGUobG9nRGF0YSk7XG4gIGxvZ2dlci5pbmZvKGAke3JlcS51c2VyLmVtYWlsfSAgdmlld2VkIHByb2R1Y3RzIGluIHdpc2hsaXN0YCwgeyB3aXNobGlzdFByb2R1Y3RzOiBQcm9kdWN0cyB9KTtcbn07XG5leHBvcnQgY29uc3QgQWRtaW5nZXRXaXNobGlzdHMgPSBhc3luYyAocmVxLCB1c2Vyd2lzaGVzKSA9PiB7XG4gIGNvbnN0IGxvZ0RhdGEgPSB7XG4gICAgbGV2ZWw6ICdpbmZvJyxcbiAgICBtZXNzYWdlOiAnQWxsIHdpc2hsaXN0cyByZXRyaWV2ZWQnLFxuICAgIHVzZXJJZDogcmVxLnVzZXIuaWQsXG4gICAgbWV0YWRhdGE6IHsgdXNlcldpc2hsaXN0czogdXNlcndpc2hlcyB9LFxuICB9O1xuICBhd2FpdCBMb2cuY3JlYXRlKGxvZ0RhdGEpO1xuICBsb2dnZXIuaW5mbygnQWxsIHdpc2hsaXN0cyByZXRyaWV2ZWQnLCB7IHVzZXJXaXNobGlzdHM6IHVzZXJ3aXNoZXMgfSk7XG59O1xuZXhwb3J0IGNvbnN0IGNsZWFyV2lzaGxpc3RzID0gYXN5bmMgKHJlcSwgdXNlcndpc2hlcykgPT4ge1xuICBjb25zdCBsb2dEYXRhID0ge1xuICAgIGxldmVsOiAnaW5mbycsXG4gICAgbWVzc2FnZTogYFVzZXIgJHtyZXEudXNlci5lbWFpbH0gY2xlYXJlZCBhbGwgd2lzaGxpc3RzYCxcbiAgICB1c2VySWQ6IHJlcS51c2VyLmlkLFxuICAgIG1ldGFkYXRhOiB7IHVzZXJ3aXNoZXMgfSxcbiAgfTtcbiAgYXdhaXQgTG9nLmNyZWF0ZShsb2dEYXRhKTtcbiAgbG9nZ2VyLmluZm8oYFVzZXIgJHtyZXEudXNlci5lbWFpbH0gY2xlYXJlZCBhbGwgd2lzaGxpc3RzYCk7XG59O1xu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","map":{"version":3,"names":["_logger","_interopRequireDefault","require","_models","createWishlist","req","logData","level","message","user","email","params","id","userId","metadata","wishlist","body","Log","create","logger","info","exports","deleteWishlists","res","deletedWishlist","wishlistError","error","getWishlists","Products","wishlistProducts","AdmingetWishlists","userwishes","userWishlists","clearWishlists"],"sourceRoot":"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/loggers/","sources":["wishlist.logger.js"],"sourcesContent":["/* eslint-disable import/named */\n\nimport logger from '../configs/logger';\nimport { Log } from '../database/models';\n\nexport const createWishlist = async (req) => {\n  const logData = {\n    level: 'info',\n    message: `User ${req.user.email} added a product ${req.params.id} in wishlist`,\n    userId: req.user.id,\n    metadata: { wishlist: req.body },\n  };\n  await Log.create(logData);\n  logger.info(`User ${req.user.email} added a product ${req.params.id} in wishlist`);\n};\n\nexport const deleteWishlists = async (req, res, wishlist) => {\n  const logData = {\n    level: 'info',\n    message: `User ${req.user.email} removed a product ${req.params.id} in wishlist`,\n    userId: req.user.id,\n    metadata: { deletedWishlist: wishlist },\n  };\n  await Log.create(logData);\n  logger.info(`User ${req.user.email} removed a product ${req.params.id} in wishlist`);\n};\nexport const wishlistError = async (req, error) => {\n  const logData = {\n    level: 'error',\n    message: error.message,\n    userId: req.user.id,\n    metadata: { error },\n  };\n  await Log.create(logData);\n  logger.error(error);\n};\nexport const getWishlists = async (req, Products) => {\n  const logData = {\n    level: 'info',\n    message: `${req.user.email} viewed products in wishlist`,\n    userId: req.user.id,\n    metadata: { wishlistProducts: Products },\n  };\n  await Log.create(logData);\n  logger.info(`${req.user.email}  viewed products in wishlist`, { wishlistProducts: Products });\n};\nexport const AdmingetWishlists = async (req, userwishes) => {\n  const logData = {\n    level: 'info',\n    message: 'All wishlists retrieved',\n    userId: req.user.id,\n    metadata: { userWishlists: userwishes },\n  };\n  await Log.create(logData);\n  logger.info('All wishlists retrieved', { userWishlists: userwishes });\n};\nexport const clearWishlists = async (req, userwishes) => {\n  const logData = {\n    level: 'info',\n    message: `User ${req.user.email} cleared all wishlists`,\n    userId: req.user.id,\n    metadata: { userwishes },\n  };\n  await Log.create(logData);\n  logger.info(`User ${req.user.email} cleared all wishlists`);\n};\n"],"mappings":"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"}},"mtime":1682148437943},"{\"assumptions\":{},\"sourceRoot\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/middlewares/wishlist/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"filename\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/middlewares/wishlist/doesProductExist.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/node_modules/babel-plugin-add-module-exports/lib/index.js\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-runtime\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"regenerator\":true},\"externalDependencies\":[]},{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.21.0:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = doesProductExist;\nvar _models = require(\"../../database/models\");\n/* eslint-disable import/named */\n// eslint-disable-next-line no-unused-vars\n\n/**\n * @param {Object} req\n * @param {Object} res\n * @param {Object} next\n * @returns {res} response\n */\nasync function doesProductExist(req, res, next) {\n  try {\n    const {\n      id: productId\n    } = req.params;\n    if (!productId || productId === null) {\n      return res.status(400).json({\n        message: 'no id found in parameters'\n      });\n    }\n    // eslint-disable-next-line no-shadow, no-undef\n    const product = await _models.products.findOne({\n      where: {\n        id: productId,\n        available: true\n      }\n    });\n    if (!product || product === null) {\n      return res.status(400).json({\n        message: 'product does not exist'\n      });\n    }\n    req.product = product;\n    next();\n  } catch (error) {\n    return res.status(401).json({\n      error\n    });\n  }\n}\nmodule.exports = exports.default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfbW9kZWxzIiwicmVxdWlyZSIsImRvZXNQcm9kdWN0RXhpc3QiLCJyZXEiLCJyZXMiLCJuZXh0IiwiaWQiLCJwcm9kdWN0SWQiLCJwYXJhbXMiLCJzdGF0dXMiLCJqc29uIiwibWVzc2FnZSIsInByb2R1Y3QiLCJwcm9kdWN0cyIsImZpbmRPbmUiLCJ3aGVyZSIsImF2YWlsYWJsZSIsImVycm9yIiwibW9kdWxlIiwiZXhwb3J0cyIsImRlZmF1bHQiXSwic291cmNlUm9vdCI6Ii9Vc2Vycy9hbmRlbGFyd2FuZGEvRGVza3RvcC9lLWNvbW0tdGVhbS1icm9ncmFtbWVycy1ibi9zcmMvbWlkZGxld2FyZXMvd2lzaGxpc3QvIiwic291cmNlcyI6WyJkb2VzUHJvZHVjdEV4aXN0LmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qIGVzbGludC1kaXNhYmxlIGltcG9ydC9uYW1lZCAqL1xuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXVudXNlZC12YXJzXG5pbXBvcnQgeyBwcm9kdWN0cyB9IGZyb20gJy4uLy4uL2RhdGFiYXNlL21vZGVscyc7XG5cbi8qKlxuICogQHBhcmFtIHtPYmplY3R9IHJlcVxuICogQHBhcmFtIHtPYmplY3R9IHJlc1xuICogQHBhcmFtIHtPYmplY3R9IG5leHRcbiAqIEByZXR1cm5zIHtyZXN9IHJlc3BvbnNlXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGFzeW5jIGZ1bmN0aW9uIGRvZXNQcm9kdWN0RXhpc3QocmVxLCByZXMsIG5leHQpIHtcbiAgdHJ5IHtcbiAgICBjb25zdCB7IGlkOiBwcm9kdWN0SWQgfSA9IHJlcS5wYXJhbXM7XG4gICAgaWYgKCFwcm9kdWN0SWQgfHwgcHJvZHVjdElkID09PSBudWxsKSB7XG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBtZXNzYWdlOiAnbm8gaWQgZm91bmQgaW4gcGFyYW1ldGVycycgfSk7XG4gICAgfVxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1zaGFkb3csIG5vLXVuZGVmXG4gICAgY29uc3QgcHJvZHVjdCA9IGF3YWl0IHByb2R1Y3RzLmZpbmRPbmUoeyB3aGVyZTogeyBpZDogcHJvZHVjdElkLCBhdmFpbGFibGU6IHRydWUgfSB9KTtcbiAgICBpZiAoIXByb2R1Y3QgfHwgcHJvZHVjdCA9PT0gbnVsbCkge1xuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgbWVzc2FnZTogJ3Byb2R1Y3QgZG9lcyBub3QgZXhpc3QnIH0pO1xuICAgIH1cbiAgICByZXEucHJvZHVjdCA9IHByb2R1Y3Q7XG4gICAgbmV4dCgpO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIHJldHVybiByZXMuc3RhdHVzKDQwMSkuanNvbih7IGVycm9yIH0pO1xuICB9XG59XG4iXSwibWFwcGluZ3MiOiI7Ozs7OztBQUVBLElBQUFBLE9BQUEsR0FBQUMsT0FBQTtBQUZBO0FBQ0E7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ2UsZUFBZUMsZ0JBQWdCQSxDQUFDQyxHQUFHLEVBQUVDLEdBQUcsRUFBRUMsSUFBSSxFQUFFO0VBQzdELElBQUk7SUFDRixNQUFNO01BQUVDLEVBQUUsRUFBRUM7SUFBVSxDQUFDLEdBQUdKLEdBQUcsQ0FBQ0ssTUFBTTtJQUNwQyxJQUFJLENBQUNELFNBQVMsSUFBSUEsU0FBUyxLQUFLLElBQUksRUFBRTtNQUNwQyxPQUFPSCxHQUFHLENBQUNLLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQ0MsSUFBSSxDQUFDO1FBQUVDLE9BQU8sRUFBRTtNQUE0QixDQUFDLENBQUM7SUFDdkU7SUFDQTtJQUNBLE1BQU1DLE9BQU8sR0FBRyxNQUFNQyxnQkFBUSxDQUFDQyxPQUFPLENBQUM7TUFBRUMsS0FBSyxFQUFFO1FBQUVULEVBQUUsRUFBRUMsU0FBUztRQUFFUyxTQUFTLEVBQUU7TUFBSztJQUFFLENBQUMsQ0FBQztJQUNyRixJQUFJLENBQUNKLE9BQU8sSUFBSUEsT0FBTyxLQUFLLElBQUksRUFBRTtNQUNoQyxPQUFPUixHQUFHLENBQUNLLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQ0MsSUFBSSxDQUFDO1FBQUVDLE9BQU8sRUFBRTtNQUF5QixDQUFDLENBQUM7SUFDcEU7SUFDQVIsR0FBRyxDQUFDUyxPQUFPLEdBQUdBLE9BQU87SUFDckJQLElBQUksRUFBRTtFQUNSLENBQUMsQ0FBQyxPQUFPWSxLQUFLLEVBQUU7SUFDZCxPQUFPYixHQUFHLENBQUNLLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQ0MsSUFBSSxDQUFDO01BQUVPO0lBQU0sQ0FBQyxDQUFDO0VBQ3hDO0FBQ0Y7QUFBQ0MsTUFBQSxDQUFBQyxPQUFBLEdBQUFBLE9BQUEsQ0FBQUMsT0FBQSJ9","map":{"version":3,"names":["_models","require","doesProductExist","req","res","next","id","productId","params","status","json","message","product","products","findOne","where","available","error","module","exports","default"],"sourceRoot":"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/middlewares/wishlist/","sources":["doesProductExist.js"],"sourcesContent":["/* eslint-disable import/named */\n// eslint-disable-next-line no-unused-vars\nimport { products } from '../../database/models';\n\n/**\n * @param {Object} req\n * @param {Object} res\n * @param {Object} next\n * @returns {res} response\n */\nexport default async function doesProductExist(req, res, next) {\n  try {\n    const { id: productId } = req.params;\n    if (!productId || productId === null) {\n      return res.status(400).json({ message: 'no id found in parameters' });\n    }\n    // eslint-disable-next-line no-shadow, no-undef\n    const product = await products.findOne({ where: { id: productId, available: true } });\n    if (!product || product === null) {\n      return res.status(400).json({ message: 'product does not exist' });\n    }\n    req.product = product;\n    next();\n  } catch (error) {\n    return res.status(401).json({ error });\n  }\n}\n"],"mappings":";;;;;;AAEA,IAAAA,OAAA,GAAAC,OAAA;AAFA;AACA;;AAGA;AACA;AACA;AACA;AACA;AACA;AACe,eAAeC,gBAAgBA,CAACC,GAAG,EAAEC,GAAG,EAAEC,IAAI,EAAE;EAC7D,IAAI;IACF,MAAM;MAAEC,EAAE,EAAEC;IAAU,CAAC,GAAGJ,GAAG,CAACK,MAAM;IACpC,IAAI,CAACD,SAAS,IAAIA,SAAS,KAAK,IAAI,EAAE;MACpC,OAAOH,GAAG,CAACK,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;QAAEC,OAAO,EAAE;MAA4B,CAAC,CAAC;IACvE;IACA;IACA,MAAMC,OAAO,GAAG,MAAMC,gBAAQ,CAACC,OAAO,CAAC;MAAEC,KAAK,EAAE;QAAET,EAAE,EAAEC,SAAS;QAAES,SAAS,EAAE;MAAK;IAAE,CAAC,CAAC;IACrF,IAAI,CAACJ,OAAO,IAAIA,OAAO,KAAK,IAAI,EAAE;MAChC,OAAOR,GAAG,CAACK,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;QAAEC,OAAO,EAAE;MAAyB,CAAC,CAAC;IACpE;IACAR,GAAG,CAACS,OAAO,GAAGA,OAAO;IACrBP,IAAI,EAAE;EACR,CAAC,CAAC,OAAOY,KAAK,EAAE;IACd,OAAOb,GAAG,CAACK,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;MAAEO;IAAM,CAAC,CAAC;EACxC;AACF;AAACC,MAAA,CAAAC,OAAA,GAAAA,OAAA,CAAAC,OAAA"}},"mtime":1682148437955},"{\"assumptions\":{},\"sourceRoot\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/routes/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"filename\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/routes/cart.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/node_modules/babel-plugin-add-module-exports/lib/index.js\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-runtime\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"regenerator\":true},\"externalDependencies\":[]},{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.21.0:development":{"value":{"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _express = _interopRequireDefault(require(\"express\"));\nvar _cart = _interopRequireDefault(require(\"../controllers/cart.controller\"));\nvar _verifyToken = _interopRequireDefault(require(\"../middlewares/verifyToken\"));\nvar _doesProductExist = _interopRequireDefault(require(\"../middlewares/wishlist/doesProductExist\"));\nvar _isOwnerOfCart = _interopRequireDefault(require(\"../middlewares/isOwnerOfCart\"));\nvar _Checkrole = _interopRequireDefault(require(\"../middlewares/Checkrole\"));\n// eslint-disable-next-line import/no-unresolved, import/extensions\n\nconst routes = _express.default.Router();\nroutes.post('/:id', _verifyToken.default, _doesProductExist.default, _cart.default.addItemTocart);\nroutes.delete('/:id', _verifyToken.default, _doesProductExist.default, _isOwnerOfCart.default, _cart.default.removeFromCart);\nroutes.delete('/', _verifyToken.default, _isOwnerOfCart.default, _cart.default.clearCart);\nroutes.get('/', _verifyToken.default, _isOwnerOfCart.default, _cart.default.viewCartOfUser);\nroutes.get('/all', _verifyToken.default, (0, _Checkrole.default)(['admin']), _cart.default.viewAllCartOfUsers);\nvar _default = routes;\nexports.default = _default;\nmodule.exports = exports.default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfZXhwcmVzcyIsIl9pbnRlcm9wUmVxdWlyZURlZmF1bHQiLCJyZXF1aXJlIiwiX2NhcnQiLCJfdmVyaWZ5VG9rZW4iLCJfZG9lc1Byb2R1Y3RFeGlzdCIsIl9pc093bmVyT2ZDYXJ0IiwiX0NoZWNrcm9sZSIsInJvdXRlcyIsImV4cHJlc3MiLCJSb3V0ZXIiLCJwb3N0IiwiaXNBdXRoZW50aWNhdGVkIiwiZG9lc1Byb2R1Y3RFeGlzdCIsIkNhcnRjb250cm9sbGVyIiwiYWRkSXRlbVRvY2FydCIsImRlbGV0ZSIsImlzT3duZXJPZkNhcnQiLCJyZW1vdmVGcm9tQ2FydCIsImNsZWFyQ2FydCIsImdldCIsInZpZXdDYXJ0T2ZVc2VyIiwiY2hlY2tSb2xlIiwidmlld0FsbENhcnRPZlVzZXJzIiwiX2RlZmF1bHQiLCJleHBvcnRzIiwiZGVmYXVsdCIsIm1vZHVsZSJdLCJzb3VyY2VSb290IjoiL1VzZXJzL2FuZGVsYXJ3YW5kYS9EZXNrdG9wL2UtY29tbS10ZWFtLWJyb2dyYW1tZXJzLWJuL3NyYy9yb3V0ZXMvIiwic291cmNlcyI6WyJjYXJ0LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBleHByZXNzIGZyb20gJ2V4cHJlc3MnO1xuaW1wb3J0IENhcnRjb250cm9sbGVyIGZyb20gJy4uL2NvbnRyb2xsZXJzL2NhcnQuY29udHJvbGxlcic7XG5pbXBvcnQgaXNBdXRoZW50aWNhdGVkIGZyb20gJy4uL21pZGRsZXdhcmVzL3ZlcmlmeVRva2VuJztcbmltcG9ydCBkb2VzUHJvZHVjdEV4aXN0IGZyb20gJy4uL21pZGRsZXdhcmVzL3dpc2hsaXN0L2RvZXNQcm9kdWN0RXhpc3QnO1xuaW1wb3J0IGlzT3duZXJPZkNhcnQgZnJvbSAnLi4vbWlkZGxld2FyZXMvaXNPd25lck9mQ2FydCc7XG5pbXBvcnQgY2hlY2tSb2xlIGZyb20gJy4uL21pZGRsZXdhcmVzL0NoZWNrcm9sZSc7XG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgaW1wb3J0L25vLXVucmVzb2x2ZWQsIGltcG9ydC9leHRlbnNpb25zXG5cbmNvbnN0IHJvdXRlcyA9IGV4cHJlc3MuUm91dGVyKCk7XG5cbnJvdXRlcy5wb3N0KCcvOmlkJywgaXNBdXRoZW50aWNhdGVkLCBkb2VzUHJvZHVjdEV4aXN0LCBDYXJ0Y29udHJvbGxlci5hZGRJdGVtVG9jYXJ0KTtcbnJvdXRlcy5kZWxldGUoJy86aWQnLCBpc0F1dGhlbnRpY2F0ZWQsIGRvZXNQcm9kdWN0RXhpc3QsIGlzT3duZXJPZkNhcnQsIENhcnRjb250cm9sbGVyLnJlbW92ZUZyb21DYXJ0KTtcblxucm91dGVzLmRlbGV0ZSgnLycsIGlzQXV0aGVudGljYXRlZCwgaXNPd25lck9mQ2FydCwgQ2FydGNvbnRyb2xsZXIuY2xlYXJDYXJ0KTtcbnJvdXRlcy5nZXQoJy8nLCBpc0F1dGhlbnRpY2F0ZWQsIGlzT3duZXJPZkNhcnQsIENhcnRjb250cm9sbGVyLnZpZXdDYXJ0T2ZVc2VyKTtcbnJvdXRlcy5nZXQoJy9hbGwnLCBpc0F1dGhlbnRpY2F0ZWQsIGNoZWNrUm9sZShbJ2FkbWluJ10pLCBDYXJ0Y29udHJvbGxlci52aWV3QWxsQ2FydE9mVXNlcnMpO1xuZXhwb3J0IGRlZmF1bHQgcm91dGVzO1xuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQUEsSUFBQUEsUUFBQSxHQUFBQyxzQkFBQSxDQUFBQyxPQUFBO0FBQ0EsSUFBQUMsS0FBQSxHQUFBRixzQkFBQSxDQUFBQyxPQUFBO0FBQ0EsSUFBQUUsWUFBQSxHQUFBSCxzQkFBQSxDQUFBQyxPQUFBO0FBQ0EsSUFBQUcsaUJBQUEsR0FBQUosc0JBQUEsQ0FBQUMsT0FBQTtBQUNBLElBQUFJLGNBQUEsR0FBQUwsc0JBQUEsQ0FBQUMsT0FBQTtBQUNBLElBQUFLLFVBQUEsR0FBQU4sc0JBQUEsQ0FBQUMsT0FBQTtBQUNBOztBQUVBLE1BQU1NLE1BQU0sR0FBR0MsZ0JBQU8sQ0FBQ0MsTUFBTSxFQUFFO0FBRS9CRixNQUFNLENBQUNHLElBQUksQ0FBQyxNQUFNLEVBQUVDLG9CQUFlLEVBQUVDLHlCQUFnQixFQUFFQyxhQUFjLENBQUNDLGFBQWEsQ0FBQztBQUNwRlAsTUFBTSxDQUFDUSxNQUFNLENBQUMsTUFBTSxFQUFFSixvQkFBZSxFQUFFQyx5QkFBZ0IsRUFBRUksc0JBQWEsRUFBRUgsYUFBYyxDQUFDSSxjQUFjLENBQUM7QUFFdEdWLE1BQU0sQ0FBQ1EsTUFBTSxDQUFDLEdBQUcsRUFBRUosb0JBQWUsRUFBRUssc0JBQWEsRUFBRUgsYUFBYyxDQUFDSyxTQUFTLENBQUM7QUFDNUVYLE1BQU0sQ0FBQ1ksR0FBRyxDQUFDLEdBQUcsRUFBRVIsb0JBQWUsRUFBRUssc0JBQWEsRUFBRUgsYUFBYyxDQUFDTyxjQUFjLENBQUM7QUFDOUViLE1BQU0sQ0FBQ1ksR0FBRyxDQUFDLE1BQU0sRUFBRVIsb0JBQWUsRUFBRSxJQUFBVSxrQkFBUyxFQUFDLENBQUMsT0FBTyxDQUFDLENBQUMsRUFBRVIsYUFBYyxDQUFDUyxrQkFBa0IsQ0FBQztBQUFDLElBQUFDLFFBQUEsR0FDOUVoQixNQUFNO0FBQUFpQixPQUFBLENBQUFDLE9BQUEsR0FBQUYsUUFBQTtBQUFBRyxNQUFBLENBQUFGLE9BQUEsR0FBQUEsT0FBQSxDQUFBQyxPQUFBIn0=","map":{"version":3,"names":["_express","_interopRequireDefault","require","_cart","_verifyToken","_doesProductExist","_isOwnerOfCart","_Checkrole","routes","express","Router","post","isAuthenticated","doesProductExist","Cartcontroller","addItemTocart","delete","isOwnerOfCart","removeFromCart","clearCart","get","viewCartOfUser","checkRole","viewAllCartOfUsers","_default","exports","default","module"],"sourceRoot":"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/routes/","sources":["cart.js"],"sourcesContent":["import express from 'express';\nimport Cartcontroller from '../controllers/cart.controller';\nimport isAuthenticated from '../middlewares/verifyToken';\nimport doesProductExist from '../middlewares/wishlist/doesProductExist';\nimport isOwnerOfCart from '../middlewares/isOwnerOfCart';\nimport checkRole from '../middlewares/Checkrole';\n// eslint-disable-next-line import/no-unresolved, import/extensions\n\nconst routes = express.Router();\n\nroutes.post('/:id', isAuthenticated, doesProductExist, Cartcontroller.addItemTocart);\nroutes.delete('/:id', isAuthenticated, doesProductExist, isOwnerOfCart, Cartcontroller.removeFromCart);\n\nroutes.delete('/', isAuthenticated, isOwnerOfCart, Cartcontroller.clearCart);\nroutes.get('/', isAuthenticated, isOwnerOfCart, Cartcontroller.viewCartOfUser);\nroutes.get('/all', isAuthenticated, checkRole(['admin']), Cartcontroller.viewAllCartOfUsers);\nexport default routes;\n"],"mappings":";;;;;;;AAAA,IAAAA,QAAA,GAAAC,sBAAA,CAAAC,OAAA;AACA,IAAAC,KAAA,GAAAF,sBAAA,CAAAC,OAAA;AACA,IAAAE,YAAA,GAAAH,sBAAA,CAAAC,OAAA;AACA,IAAAG,iBAAA,GAAAJ,sBAAA,CAAAC,OAAA;AACA,IAAAI,cAAA,GAAAL,sBAAA,CAAAC,OAAA;AACA,IAAAK,UAAA,GAAAN,sBAAA,CAAAC,OAAA;AACA;;AAEA,MAAMM,MAAM,GAAGC,gBAAO,CAACC,MAAM,EAAE;AAE/BF,MAAM,CAACG,IAAI,CAAC,MAAM,EAAEC,oBAAe,EAAEC,yBAAgB,EAAEC,aAAc,CAACC,aAAa,CAAC;AACpFP,MAAM,CAACQ,MAAM,CAAC,MAAM,EAAEJ,oBAAe,EAAEC,yBAAgB,EAAEI,sBAAa,EAAEH,aAAc,CAACI,cAAc,CAAC;AAEtGV,MAAM,CAACQ,MAAM,CAAC,GAAG,EAAEJ,oBAAe,EAAEK,sBAAa,EAAEH,aAAc,CAACK,SAAS,CAAC;AAC5EX,MAAM,CAACY,GAAG,CAAC,GAAG,EAAER,oBAAe,EAAEK,sBAAa,EAAEH,aAAc,CAACO,cAAc,CAAC;AAC9Eb,MAAM,CAACY,GAAG,CAAC,MAAM,EAAER,oBAAe,EAAE,IAAAU,kBAAS,EAAC,CAAC,OAAO,CAAC,CAAC,EAAER,aAAc,CAACS,kBAAkB,CAAC;AAAC,IAAAC,QAAA,GAC9EhB,MAAM;AAAAiB,OAAA,CAAAC,OAAA,GAAAF,QAAA;AAAAG,MAAA,CAAAF,OAAA,GAAAA,OAAA,CAAAC,OAAA"}},"mtime":1685643189464},"{\"assumptions\":{},\"sourceRoot\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/controllers/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"filename\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/controllers/cart.controller.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/node_modules/babel-plugin-add-module-exports/lib/index.js\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-runtime\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"regenerator\":true},\"externalDependencies\":[]},{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.21.0:development":{"value":{"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _carts = _interopRequireDefault(require(\"../services/carts.services\"));\nvar _models = require(\"../database/models\");\nvar _paginating = _interopRequireDefault(require(\"../middlewares/paginating\"));\nvar _cart = require(\"../loggers/cart.logger\");\n/* eslint-disable import/named */\n// eslint-disable-next-line max-len\n// eslint-disable-next-line import/named, import/no-named-as-default, import/no-named-as-default-member\n\n/**\n * the cart controller class\n */\nclass Cartcontroller {\n  /**\n   * @param {Object} req\n   * @param {Object} res\n   * @returns {res} response\n   */\n  static async addItemTocart(req, res) {\n    try {\n      const result = await _carts.default.addItem(req);\n      if (result.error) {\n        return res.status(400).json({\n          error: result.error\n        });\n      }\n      (0, _cart.cartLogger)(req, result.value);\n      return res.status(201).json({\n        value: result.value\n      });\n    } catch (error) {\n      (0, _cart.ItemError)(req, error);\n      res.status(500).json({\n        status: 500,\n        message: error.message\n      });\n    }\n  }\n\n  /**\n   * @param {Object} req\n   * @param {Object} res\n   * @returns {res} response\n   */\n  static async removeFromCart(req, res) {\n    try {\n      const {\n        cart\n      } = req;\n      const {\n        id\n      } = req.params;\n      const productToRemove = cart.products.findIndex(product => product.id === id);\n      const removedProduct = cart.products[productToRemove];\n      cart.products.splice(productToRemove, 1);\n      const total = cart.total - removedProduct.price * removedProduct.quantity;\n      await _carts.default.updateCart({\n        products: cart.products,\n        total\n      }, cart.id);\n      return res.status(200).json({\n        id: cart.id,\n        message: 'Item removed from cart successfully',\n        total\n      });\n    } catch (error) {\n      return res.status(500).json({\n        error: error.message,\n        message: 'Could not remove item from cart, try again'\n      });\n    }\n  }\n\n  /**\n  /**\n   * @param {Object} req\n   * @param {Object} res\n   * @returns {res} response\n   */\n  static async viewCartOfUser(req, res) {\n    try {\n      const result = await _carts.default.viewCart(req);\n      if (result.error) {\n        return res.status(400).json({\n          error: result.error\n        });\n      }\n      (0, _cart.viewCart)(req, result.value);\n      return res.status(200).json({\n        value: result.value\n      });\n    } catch (error) {\n      (0, _cart.ItemError)(req, error);\n      res.status(500).json({\n        status: 500,\n        message: error\n      });\n    }\n  }\n\n  /**\n   * @param {Object} req\n   * @param {Object} res\n   * @returns {res} response\n   */\n  static async clearCart(req, res) {\n    try {\n      const result = await _carts.default.clearCart(req);\n      (0, _cart.clearCarts)(req);\n      return res.status(200).json({\n        value: result.value\n      });\n    } catch (error) {\n      (0, _cart.ItemError)(req, error);\n      res.status(500).json({\n        status: 500,\n        message: error\n      });\n    }\n  }\n\n  /**\n   * @param {Object} req\n   * @param {Object} res\n   * @returns {res} response\n   */\n  static async viewAllCartOfUsers(req, res) {\n    try {\n      (0, _paginating.default)(_models.carts)(req, res, () => res.status(200).json(res.paginatedResults));\n      (0, _cart.viewAllCarts)(req, res.paginatedResults);\n    } catch (error) {\n      (0, _cart.ItemError)(req, error);\n      res.status(500).json({\n        status: 500,\n        message: error\n      });\n    }\n  }\n}\nexports.default = Cartcontroller;\nmodule.exports = exports.default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfY2FydHMiLCJfaW50ZXJvcFJlcXVpcmVEZWZhdWx0IiwicmVxdWlyZSIsIl9tb2RlbHMiLCJfcGFnaW5hdGluZyIsIl9jYXJ0IiwiQ2FydGNvbnRyb2xsZXIiLCJhZGRJdGVtVG9jYXJ0IiwicmVxIiwicmVzIiwicmVzdWx0IiwiY2FydFNlcnZpY2UiLCJhZGRJdGVtIiwiZXJyb3IiLCJzdGF0dXMiLCJqc29uIiwiY2FydExvZ2dlciIsInZhbHVlIiwiSXRlbUVycm9yIiwibWVzc2FnZSIsInJlbW92ZUZyb21DYXJ0IiwiY2FydCIsImlkIiwicGFyYW1zIiwicHJvZHVjdFRvUmVtb3ZlIiwicHJvZHVjdHMiLCJmaW5kSW5kZXgiLCJwcm9kdWN0IiwicmVtb3ZlZFByb2R1Y3QiLCJzcGxpY2UiLCJ0b3RhbCIsInByaWNlIiwicXVhbnRpdHkiLCJ1cGRhdGVDYXJ0Iiwidmlld0NhcnRPZlVzZXIiLCJ2aWV3Q2FydCIsImNsZWFyQ2FydCIsImNsZWFyQ2FydHMiLCJ2aWV3QWxsQ2FydE9mVXNlcnMiLCJwYWdpbmF0ZWRSZXN1bHRzIiwiY2FydHMiLCJ2aWV3QWxsQ2FydHMiLCJleHBvcnRzIiwiZGVmYXVsdCIsIm1vZHVsZSJdLCJzb3VyY2VSb290IjoiL1VzZXJzL2FuZGVsYXJ3YW5kYS9EZXNrdG9wL2UtY29tbS10ZWFtLWJyb2dyYW1tZXJzLWJuL3NyYy9jb250cm9sbGVycy8iLCJzb3VyY2VzIjpbImNhcnQuY29udHJvbGxlci5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKiBlc2xpbnQtZGlzYWJsZSBpbXBvcnQvbmFtZWQgKi9cbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBtYXgtbGVuXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgaW1wb3J0L25hbWVkLCBpbXBvcnQvbm8tbmFtZWQtYXMtZGVmYXVsdCwgaW1wb3J0L25vLW5hbWVkLWFzLWRlZmF1bHQtbWVtYmVyXG5pbXBvcnQgY2FydFNlcnZpY2UgZnJvbSAnLi4vc2VydmljZXMvY2FydHMuc2VydmljZXMnO1xuaW1wb3J0IHsgY2FydHMgfSBmcm9tICcuLi9kYXRhYmFzZS9tb2RlbHMnO1xuaW1wb3J0IHBhZ2luYXRlZFJlc3VsdHMgZnJvbSAnLi4vbWlkZGxld2FyZXMvcGFnaW5hdGluZyc7XG5cbmltcG9ydCB7XG4gIHZpZXdBbGxDYXJ0cyxcbiAgY2xlYXJDYXJ0cyxcbiAgdmlld0NhcnQsXG4gIEl0ZW1FcnJvcixcbiAgY2FydExvZ2dlcixcbn0gZnJvbSAnLi4vbG9nZ2Vycy9jYXJ0LmxvZ2dlcic7XG4vKipcbiAqIHRoZSBjYXJ0IGNvbnRyb2xsZXIgY2xhc3NcbiAqL1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ2FydGNvbnRyb2xsZXIge1xuICAvKipcbiAgICogQHBhcmFtIHtPYmplY3R9IHJlcVxuICAgKiBAcGFyYW0ge09iamVjdH0gcmVzXG4gICAqIEByZXR1cm5zIHtyZXN9IHJlc3BvbnNlXG4gICAqL1xuICBzdGF0aWMgYXN5bmMgYWRkSXRlbVRvY2FydChyZXEsIHJlcykge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBjYXJ0U2VydmljZS5hZGRJdGVtKHJlcSk7XG4gICAgICBpZiAocmVzdWx0LmVycm9yKSB7XG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IGVycm9yOiByZXN1bHQuZXJyb3IgfSk7XG4gICAgICB9XG4gICAgICBjYXJ0TG9nZ2VyKHJlcSwgcmVzdWx0LnZhbHVlKTtcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDIwMSkuanNvbih7IHZhbHVlOiByZXN1bHQudmFsdWUgfSk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIEl0ZW1FcnJvcihyZXEsIGVycm9yKTtcbiAgICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgc3RhdHVzOiA1MDAsIG1lc3NhZ2U6IGVycm9yLm1lc3NhZ2UgfSk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7T2JqZWN0fSByZXFcbiAgICogQHBhcmFtIHtPYmplY3R9IHJlc1xuICAgKiBAcmV0dXJucyB7cmVzfSByZXNwb25zZVxuICAgKi9cbiAgc3RhdGljIGFzeW5jIHJlbW92ZUZyb21DYXJ0KHJlcSwgcmVzKSB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHsgY2FydCB9ID0gcmVxO1xuICAgICAgY29uc3QgeyBpZCB9ID0gcmVxLnBhcmFtcztcbiAgICAgIGNvbnN0IHByb2R1Y3RUb1JlbW92ZSA9IGNhcnQucHJvZHVjdHMuZmluZEluZGV4KFxuICAgICAgICAocHJvZHVjdCkgPT4gcHJvZHVjdC5pZCA9PT0gaWRcbiAgICAgICk7XG4gICAgICBjb25zdCByZW1vdmVkUHJvZHVjdCA9IGNhcnQucHJvZHVjdHNbcHJvZHVjdFRvUmVtb3ZlXTtcbiAgICAgIGNhcnQucHJvZHVjdHMuc3BsaWNlKHByb2R1Y3RUb1JlbW92ZSwgMSk7XG4gICAgICBjb25zdCB0b3RhbCA9IGNhcnQudG90YWwgLSByZW1vdmVkUHJvZHVjdC5wcmljZSAqIHJlbW92ZWRQcm9kdWN0LnF1YW50aXR5O1xuICAgICAgYXdhaXQgY2FydFNlcnZpY2UudXBkYXRlQ2FydCh7IHByb2R1Y3RzOiBjYXJ0LnByb2R1Y3RzLCB0b3RhbCB9LCBjYXJ0LmlkKTtcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDIwMCkuanNvbih7XG4gICAgICAgIGlkOiBjYXJ0LmlkLFxuICAgICAgICBtZXNzYWdlOiAnSXRlbSByZW1vdmVkIGZyb20gY2FydCBzdWNjZXNzZnVsbHknLFxuICAgICAgICB0b3RhbFxuICAgICAgfSk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDUwMCkuanNvbih7XG4gICAgICAgIGVycm9yOiBlcnJvci5tZXNzYWdlLFxuICAgICAgICBtZXNzYWdlOiAnQ291bGQgbm90IHJlbW92ZSBpdGVtIGZyb20gY2FydCwgdHJ5IGFnYWluJyxcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAvKipcbiAgICogQHBhcmFtIHtPYmplY3R9IHJlcVxuICAgKiBAcGFyYW0ge09iamVjdH0gcmVzXG4gICAqIEByZXR1cm5zIHtyZXN9IHJlc3BvbnNlXG4gICAqL1xuICBzdGF0aWMgYXN5bmMgdmlld0NhcnRPZlVzZXIocmVxLCByZXMpIHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgY2FydFNlcnZpY2Uudmlld0NhcnQocmVxKTtcbiAgICAgIGlmIChyZXN1bHQuZXJyb3IpIHtcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3I6IHJlc3VsdC5lcnJvciB9KTtcbiAgICAgIH1cbiAgICAgIHZpZXdDYXJ0KHJlcSwgcmVzdWx0LnZhbHVlKTtcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDIwMCkuanNvbih7IHZhbHVlOiByZXN1bHQudmFsdWUgfSk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIEl0ZW1FcnJvcihyZXEsIGVycm9yKTtcbiAgICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgc3RhdHVzOiA1MDAsIG1lc3NhZ2U6IGVycm9yIH0pO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge09iamVjdH0gcmVxXG4gICAqIEBwYXJhbSB7T2JqZWN0fSByZXNcbiAgICogQHJldHVybnMge3Jlc30gcmVzcG9uc2VcbiAgICovXG4gIHN0YXRpYyBhc3luYyBjbGVhckNhcnQocmVxLCByZXMpIHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgY2FydFNlcnZpY2UuY2xlYXJDYXJ0KHJlcSk7XG4gICAgICBjbGVhckNhcnRzKHJlcSk7XG4gICAgICByZXR1cm4gcmVzLnN0YXR1cygyMDApLmpzb24oeyB2YWx1ZTogcmVzdWx0LnZhbHVlIH0pO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBJdGVtRXJyb3IocmVxLCBlcnJvcik7XG4gICAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7IHN0YXR1czogNTAwLCBtZXNzYWdlOiBlcnJvciB9KTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtPYmplY3R9IHJlcVxuICAgKiBAcGFyYW0ge09iamVjdH0gcmVzXG4gICAqIEByZXR1cm5zIHtyZXN9IHJlc3BvbnNlXG4gICAqL1xuICBzdGF0aWMgYXN5bmMgdmlld0FsbENhcnRPZlVzZXJzKHJlcSwgcmVzKSB7XG4gICAgdHJ5IHtcbiAgICAgIHBhZ2luYXRlZFJlc3VsdHMoY2FydHMpKHJlcSwgcmVzLCAoKSA9PiByZXMuc3RhdHVzKDIwMCkuanNvbihyZXMucGFnaW5hdGVkUmVzdWx0cykpO1xuICAgICAgdmlld0FsbENhcnRzKHJlcSwgcmVzLnBhZ2luYXRlZFJlc3VsdHMpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBJdGVtRXJyb3IocmVxLCBlcnJvcik7XG4gICAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7IHN0YXR1czogNTAwLCBtZXNzYWdlOiBlcnJvciB9KTtcbiAgICB9XG4gIH1cbn1cbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUdBLElBQUFBLE1BQUEsR0FBQUMsc0JBQUEsQ0FBQUMsT0FBQTtBQUNBLElBQUFDLE9BQUEsR0FBQUQsT0FBQTtBQUNBLElBQUFFLFdBQUEsR0FBQUgsc0JBQUEsQ0FBQUMsT0FBQTtBQUVBLElBQUFHLEtBQUEsR0FBQUgsT0FBQTtBQVBBO0FBQ0E7QUFDQTs7QUFZQTtBQUNBO0FBQ0E7QUFDZSxNQUFNSSxjQUFjLENBQUM7RUFDbEM7QUFDRjtBQUNBO0FBQ0E7QUFDQTtFQUNFLGFBQWFDLGFBQWFBLENBQUNDLEdBQUcsRUFBRUMsR0FBRyxFQUFFO0lBQ25DLElBQUk7TUFDRixNQUFNQyxNQUFNLEdBQUcsTUFBTUMsY0FBVyxDQUFDQyxPQUFPLENBQUNKLEdBQUcsQ0FBQztNQUM3QyxJQUFJRSxNQUFNLENBQUNHLEtBQUssRUFBRTtRQUNoQixPQUFPSixHQUFHLENBQUNLLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQ0MsSUFBSSxDQUFDO1VBQUVGLEtBQUssRUFB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","map":{"version":3,"names":["_carts","_interopRequireDefault","require","_models","_paginating","_cart","Cartcontroller","addItemTocart","req","res","result","cartService","addItem","error","status","json","cartLogger","value","ItemError","message","removeFromCart","cart","id","params","productToRemove","products","findIndex","product","removedProduct","splice","total","price","quantity","updateCart","viewCartOfUser","viewCart","clearCart","clearCarts","viewAllCartOfUsers","paginatedResults","carts","viewAllCarts","exports","default","module"],"sourceRoot":"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/controllers/","sources":["cart.controller.js"],"sourcesContent":["/* eslint-disable import/named */\n// eslint-disable-next-line max-len\n// eslint-disable-next-line import/named, import/no-named-as-default, import/no-named-as-default-member\nimport cartService from '../services/carts.services';\nimport { carts } from '../database/models';\nimport paginatedResults from '../middlewares/paginating';\n\nimport {\n  viewAllCarts,\n  clearCarts,\n  viewCart,\n  ItemError,\n  cartLogger,\n} from '../loggers/cart.logger';\n/**\n * the cart controller class\n */\nexport default class Cartcontroller {\n  /**\n   * @param {Object} req\n   * @param {Object} res\n   * @returns {res} response\n   */\n  static async addItemTocart(req, res) {\n    try {\n      const result = await cartService.addItem(req);\n      if (result.error) {\n        return res.status(400).json({ error: result.error });\n      }\n      cartLogger(req, result.value);\n      return res.status(201).json({ value: result.value });\n    } catch (error) {\n      ItemError(req, error);\n      res.status(500).json({ status: 500, message: error.message });\n    }\n  }\n\n  /**\n   * @param {Object} req\n   * @param {Object} res\n   * @returns {res} response\n   */\n  static async removeFromCart(req, res) {\n    try {\n      const { cart } = req;\n      const { id } = req.params;\n      const productToRemove = cart.products.findIndex(\n        (product) => product.id === id\n      );\n      const removedProduct = cart.products[productToRemove];\n      cart.products.splice(productToRemove, 1);\n      const total = cart.total - removedProduct.price * removedProduct.quantity;\n      await cartService.updateCart({ products: cart.products, total }, cart.id);\n      return res.status(200).json({\n        id: cart.id,\n        message: 'Item removed from cart successfully',\n        total\n      });\n    } catch (error) {\n      return res.status(500).json({\n        error: error.message,\n        message: 'Could not remove item from cart, try again',\n      });\n    }\n  }\n\n  /**\n  /**\n   * @param {Object} req\n   * @param {Object} res\n   * @returns {res} response\n   */\n  static async viewCartOfUser(req, res) {\n    try {\n      const result = await cartService.viewCart(req);\n      if (result.error) {\n        return res.status(400).json({ error: result.error });\n      }\n      viewCart(req, result.value);\n      return res.status(200).json({ value: result.value });\n    } catch (error) {\n      ItemError(req, error);\n      res.status(500).json({ status: 500, message: error });\n    }\n  }\n\n  /**\n   * @param {Object} req\n   * @param {Object} res\n   * @returns {res} response\n   */\n  static async clearCart(req, res) {\n    try {\n      const result = await cartService.clearCart(req);\n      clearCarts(req);\n      return res.status(200).json({ value: result.value });\n    } catch (error) {\n      ItemError(req, error);\n      res.status(500).json({ status: 500, message: error });\n    }\n  }\n\n  /**\n   * @param {Object} req\n   * @param {Object} res\n   * @returns {res} response\n   */\n  static async viewAllCartOfUsers(req, res) {\n    try {\n      paginatedResults(carts)(req, res, () => res.status(200).json(res.paginatedResults));\n      viewAllCarts(req, res.paginatedResults);\n    } catch (error) {\n      ItemError(req, error);\n      res.status(500).json({ status: 500, message: error });\n    }\n  }\n}\n"],"mappings":"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"}},"mtime":1685643189435},"{\"assumptions\":{},\"sourceRoot\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/services/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"filename\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/services/carts.services.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/node_modules/babel-plugin-add-module-exports/lib/index.js\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-runtime\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"regenerator\":true},\"externalDependencies\":[]},{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.21.0:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n/* eslint-disable require-jsdoc */\n// eslint-disable-next-line import/named, import/no-duplicates\nconst {\n  carts,\n  products\n} = require('../database/models');\n// eslint-disable-next-line import/no-duplicates, import/named\n\n/**\n * cart services\n */\nclass cartService {\n  /**\n   * adding product to cart\n   * @param {Object} req the data for product\n   * @param {Object} res body\n   * @returns {data} for the created user\n   */\n  static async addItem(req) {\n    const {\n      id: productId\n    } = req.params;\n    const quantitie = req.body.quantities || 1;\n    const product = await products.findOne({\n      where: {\n        id: productId,\n        available: true\n      }\n    });\n    if (product) {\n      if (product.quantity < quantitie) {\n        return {\n          error: {\n            message: 'not enough product in stock'\n          }\n        };\n      }\n      const newprice = product.price * quantitie;\n      const item = {\n        id: product.id,\n        name: product.name,\n        image: product.images[0],\n        quantity: quantitie,\n        price: product.price,\n        Ptotal: newprice\n      };\n      const userid = req.user.id;\n      const cart = await carts.findOne({\n        where: {\n          userId: userid\n        }\n      });\n      if (!cart) {\n        const newCart = await carts.create({\n          products: [item],\n          userId: req.user.id\n        });\n        newCart.total = newCart.products.map(item1 => JSON.parse(item1.Ptotal)).reduce((sum, next) => sum + next);\n        await newCart.save();\n        return {\n          value: {\n            message: 'added to cart successfully',\n            data: newCart\n            // eslint-disable-next-line object-curly-newline\n          }\n        };\n      }\n\n      const itemExists = cart.products.findIndex(cartitem => cartitem.id === item.id);\n      if (itemExists !== -1) {\n        cart.products.splice(itemExists, 1);\n      }\n      cart.products.push(item);\n      const subtotal = cart.products.map(prod1 => JSON.parse(prod1.Ptotal)).reduce((sum, next) => sum + next);\n      cart.total = subtotal;\n      await carts.update({\n        products: cart.products,\n        total: subtotal\n      }, {\n        where: {\n          id: cart.id\n        }\n      });\n      return {\n        value: {\n          message: 'added to cart successfully',\n          data: cart\n          // eslint-disable-next-line object-curly-newline\n        }\n      };\n    }\n  }\n\n  static async updateCart(fields, cartId) {\n    return carts.update({\n      ...fields\n    }, {\n      where: {\n        id: cartId\n      }\n    });\n  }\n\n  /**\n   * clearing cart and resetting total to zero\n   * @param {Object} req\n   * @returns {Promise<Object>} confirmation message\n   */\n  static async clearCart(req) {\n    const userid = req.user.id;\n    const cart = await carts.findOne({\n      where: {\n        userId: userid\n      }\n    });\n    if (cart) {\n      await cart.destroy();\n    }\n    return {\n      value: {\n        message: 'Cart cleared successfully'\n      }\n    };\n  }\n\n  /**\n   *  view the cart\n   * @param {Object} req the data for product\n   * @returns {data} for viewing product in cart\n   */\n  static async viewCart(req) {\n    const userid = req.user.id;\n    const cart = await carts.findOne({\n      where: {\n        userId: userid\n      }\n    });\n    if (!cart) {\n      return {\n        value: {\n          message: 'Your cart is empty.',\n          data: {\n            products: []\n          }\n        }\n      };\n    }\n    return {\n      value: {\n        message: 'Hey Here is your cart!',\n        data: cart\n      }\n    };\n  }\n\n  /**\n   * view all carts\n   * @param {Object} req the data for product\n   * @returns {data} for viewing product in cart\n   */\n  static async viewAllCarts() {\n    // eslint-disable-next-line no-use-before-define\n    const allcart = await carts.findAll();\n    return {\n      value: {\n        message: 'Here are all the carts',\n        data: allcart\n        // eslint-disable-next-line object-curly-newline\n      }\n    };\n  }\n}\nexports.default = cartService;\nmodule.exports = exports.default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJjYXJ0cyIsInByb2R1Y3RzIiwicmVxdWlyZSIsImNhcnRTZXJ2aWNlIiwiYWRkSXRlbSIsInJlcSIsImlkIiwicHJvZHVjdElkIiwicGFyYW1zIiwicXVhbnRpdGllIiwiYm9keSIsInF1YW50aXRpZXMiLCJwcm9kdWN0IiwiZmluZE9uZSIsIndoZXJlIiwiYXZhaWxhYmxlIiwicXVhbnRpdHkiLCJlcnJvciIsIm1lc3NhZ2UiLCJuZXdwcmljZSIsInByaWNlIiwiaXRlbSIsIm5hbWUiLCJpbWFnZSIsImltYWdlcyIsIlB0b3RhbCIsInVzZXJpZCIsInVzZXIiLCJjYXJ0IiwidXNlcklkIiwibmV3Q2FydCIsImNyZWF0ZSIsInRvdGFsIiwibWFwIiwiaXRlbTEiLCJKU09OIiwicGFyc2UiLCJyZWR1Y2UiLCJzdW0iLCJuZXh0Iiwic2F2ZSIsInZhbHVlIiwiZGF0YSIsIml0ZW1FeGlzdHMiLCJmaW5kSW5kZXgiLCJjYXJ0aXRlbSIsInNwbGljZSIsInB1c2giLCJzdWJ0b3RhbCIsInByb2QxIiwidXBkYXRlIiwidXBkYXRlQ2FydCIsImZpZWxkcyIsImNhcnRJZCIsImNsZWFyQ2FydCIsImRlc3Ryb3kiLCJ2aWV3Q2FydCIsInZpZXdBbGxDYXJ0cyIsImFsbGNhcnQiLCJmaW5kQWxsIiwiZXhwb3J0cyIsImRlZmF1bHQiLCJtb2R1bGUiXSwic291cmNlUm9vdCI6Ii9Vc2Vycy9hbmRlbGFyd2FuZGEvRGVza3RvcC9lLWNvbW0tdGVhbS1icm9ncmFtbWVycy1ibi9zcmMvc2VydmljZXMvIiwic291cmNlcyI6WyJjYXJ0cy5zZXJ2aWNlcy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKiBlc2xpbnQtZGlzYWJsZSByZXF1aXJlLWpzZG9jICovXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgaW1wb3J0L25hbWVkLCBpbXBvcnQvbm8tZHVwbGljYXRlc1xuY29uc3QgeyBjYXJ0cywgcHJvZHVjdHMgfSA9IHJlcXVpcmUoJy4uL2RhdGFiYXNlL21vZGVscycpO1xuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGltcG9ydC9uby1kdXBsaWNhdGVzLCBpbXBvcnQvbmFtZWRcblxuLyoqXG4gKiBjYXJ0IHNlcnZpY2VzXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIGNhcnRTZXJ2aWNlIHtcbiAgLyoqXG4gICAqIGFkZGluZyBwcm9kdWN0IHRvIGNhcnRcbiAgICogQHBhcmFtIHtPYmplY3R9IHJlcSB0aGUgZGF0YSBmb3IgcHJvZHVjdFxuICAgKiBAcGFyYW0ge09iamVjdH0gcmVzIGJvZHlcbiAgICogQHJldHVybnMge2RhdGF9IGZvciB0aGUgY3JlYXRlZCB1c2VyXG4gICAqL1xuICBzdGF0aWMgYXN5bmMgYWRkSXRlbShyZXEpIHtcbiAgICBjb25zdCB7IGlkOiBwcm9kdWN0SWQgfSA9IHJlcS5wYXJhbXM7XG4gICAgY29uc3QgcXVhbnRpdGllID0gcmVxLmJvZHkucXVhbnRpdGllcyB8fCAxO1xuICAgIGNvbnN0IHByb2R1Y3QgPSBhd2FpdCBwcm9kdWN0cy5maW5kT25lKHtcbiAgICAgIHdoZXJlOiB7IGlkOiBwcm9kdWN0SWQsIGF2YWlsYWJsZTogdHJ1ZSB9LFxuICAgIH0pO1xuICAgIGlmIChwcm9kdWN0KSB7XG4gICAgICBpZiAocHJvZHVjdC5xdWFudGl0eSA8IHF1YW50aXRpZSkge1xuICAgICAgICByZXR1cm4geyBlcnJvcjogeyBtZXNzYWdlOiAnbm90IGVub3VnaCBwcm9kdWN0IGluIHN0b2NrJyB9IH07XG4gICAgICB9XG4gICAgICBjb25zdCBuZXdwcmljZSA9IHByb2R1Y3QucHJpY2UgKiBxdWFudGl0aWU7XG4gICAgICBjb25zdCBpdGVtID0ge1xuICAgICAgICBpZDogcHJvZHVjdC5pZCxcbiAgICAgICAgbmFtZTogcHJvZHVjdC5uYW1lLFxuICAgICAgICBpbWFnZTogcHJvZHVjdC5pbWFnZXNbMF0sXG4gICAgICAgIHF1YW50aXR5OiBxdWFudGl0aWUsXG4gICAgICAgIHByaWNlOiBwcm9kdWN0LnByaWNlLFxuICAgICAgICBQdG90YWw6IG5ld3ByaWNlLFxuICAgICAgfTtcbiAgICAgIGNvbnN0IHVzZXJpZCA9IHJlcS51c2VyLmlkO1xuICAgICAgY29uc3QgY2FydCA9IGF3YWl0IGNhcnRzLmZpbmRPbmUoeyB3aGVyZTogeyB1c2VySWQ6IHVzZXJpZCB9IH0pO1xuICAgICAgaWYgKCFjYXJ0KSB7XG4gICAgICAgIGNvbnN0IG5ld0NhcnQgPSBhd2FpdCBjYXJ0cy5jcmVhdGUoe1xuICAgICAgICAgIHByb2R1Y3RzOiBbaXRlbV0sXG4gICAgICAgICAgdXNlcklkOiByZXEudXNlci5pZCxcbiAgICAgICAgfSk7XG4gICAgICAgIG5ld0NhcnQudG90YWwgPSBuZXdDYXJ0LnByb2R1Y3RzXG4gICAgICAgICAgLm1hcCgoaXRlbTEpID0+IEpTT04ucGFyc2UoaXRlbTEuUHRvdGFsKSlcbiAgICAgICAgICAucmVkdWNlKChzdW0sIG5leHQpID0+IHN1bSArIG5leHQpO1xuICAgICAgICBhd2FpdCBuZXdDYXJ0LnNhdmUoKTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICB2YWx1ZToge1xuICAgICAgICAgICAgbWVzc2FnZTogJ2FkZGVkIHRvIGNhcnQgc3VjY2Vzc2Z1bGx5JyxcbiAgICAgICAgICAgIGRhdGE6IG5ld0NhcnQsXG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgb2JqZWN0LWN1cmx5LW5ld2xpbmVcbiAgICAgICAgICB9LFxuICAgICAgICB9O1xuICAgICAgfVxuICAgICAgY29uc3QgaXRlbUV4aXN0cyA9IGNhcnQucHJvZHVjdHMuZmluZEluZGV4KFxuICAgICAgICAoY2FydGl0ZW0pID0+IGNhcnRpdGVtLmlkID09PSBpdGVtLmlkXG4gICAgICApO1xuICAgICAgaWYgKGl0ZW1FeGlzdHMgIT09IC0xKSB7XG4gICAgICAgIGNhcnQucHJvZHVjdHMuc3BsaWNlKGl0ZW1FeGlzdHMsIDEpO1xuICAgICAgfVxuICAgICAgY2FydC5wcm9kdWN0cy5wdXNoKGl0ZW0pO1xuICAgICAgY29uc3Qgc3VidG90YWwgPSBjYXJ0LnByb2R1Y3RzXG4gICAgICAgIC5tYXAoKHByb2QxKSA9PiBKU09OLnBhcnNlKHByb2QxLlB0b3RhbCkpXG4gICAgICAgIC5yZWR1Y2UoKHN1bSwgbmV4dCkgPT4gc3VtICsgbmV4dCk7XG4gICAgICBjYXJ0LnRvdGFsID0gc3VidG90YWw7XG4gICAgICBhd2FpdCBjYXJ0cy51cGRhdGUoXG4gICAgICAgIHsgcHJvZHVjdHM6IGNhcnQucHJvZHVjdHMsIHRvdGFsOiBzdWJ0b3RhbCB9LFxuICAgICAgICB7IHdoZXJlOiB7IGlkOiBjYXJ0LmlkIH0gfVxuICAgICAgKTtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHZhbHVlOiB7XG4gICAgICAgICAgbWVzc2FnZTogJ2FkZGVkIHRvIGNhcnQgc3VjY2Vzc2Z1bGx5JyxcbiAgICAgICAgICBkYXRhOiBjYXJ0LFxuICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBvYmplY3QtY3VybHktbmV3bGluZVxuICAgICAgICB9LFxuICAgICAgfTtcbiAgICB9XG4gIH1cblxuICBzdGF0aWMgYXN5bmMgdXBkYXRlQ2FydChmaWVsZHMsIGNhcnRJZCkge1xuICAgIHJldHVybiBjYXJ0cy51cGRhdGUoeyAuLi5maWVsZHMgfSwgeyB3aGVyZTogeyBpZDogY2FydElkIH0gfSk7XG4gIH1cblxuICAvKipcbiAgICogY2xlYXJpbmcgY2FydCBhbmQgcmVzZXR0aW5nIHRvdGFsIHRvIHplcm9cbiAgICogQHBhcmFtIHtPYmplY3R9IHJlcVxuICAgKiBAcmV0dXJucyB7UHJvbWlzZTxPYmplY3Q+fSBjb25maXJtYXRpb24gbWVzc2FnZVxuICAgKi9cbiAgc3RhdGljIGFzeW5jIGNsZWFyQ2FydChyZXEpIHtcbiAgICBjb25zdCB1c2VyaWQgPSByZXEudXNlci5pZDtcbiAgICBjb25zdCBjYXJ0ID0gYXdhaXQgY2FydHMuZmluZE9uZSh7IHdoZXJlOiB7IHVzZXJJZDogdXNlcmlkIH0gfSk7XG4gICAgaWYgKGNhcnQpIHtcbiAgICAgIGF3YWl0IGNhcnQuZGVzdHJveSgpO1xuICAgIH1cbiAgICByZXR1cm4geyB2YWx1ZTogeyBtZXNzYWdlOiAnQ2FydCBjbGVhcmVkIHN1Y2Nlc3NmdWxseScgfSB9O1xuICB9XG5cbiAgLyoqXG4gICAqICB2aWV3IHRoZSBjYXJ0XG4gICAqIEBwYXJhbSB7T2JqZWN0fSByZXEgdGhlIGRhdGEgZm9yIHByb2R1Y3RcbiAgICogQHJldHVybnMge2RhdGF9IGZvciB2aWV3aW5nIHByb2R1Y3QgaW4gY2FydFxuICAgKi9cbiAgc3RhdGljIGFzeW5jIHZpZXdDYXJ0KHJlcSkge1xuICAgIGNvbnN0IHVzZXJpZCA9IHJlcS51c2VyLmlkO1xuICAgIGNvbnN0IGNhcnQgPSBhd2FpdCBjYXJ0cy5maW5kT25lKHsgd2hlcmU6IHsgdXNlcklkOiB1c2VyaWQgfSB9KTtcbiAgICBpZiAoIWNhcnQpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHZhbHVlOiB7XG4gICAgICAgICAgbWVzc2FnZTogJ1lvdXIgY2FydCBpcyBlbXB0eS4nLFxuICAgICAgICAgIGRhdGE6IHsgcHJvZHVjdHM6IFtdIH0sXG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgfVxuICAgIHJldHVybiB7XG4gICAgICB2YWx1ZToge1xuICAgICAgICBtZXNzYWdlOiAnSGV5IEhlcmUgaXMgeW91ciBjYXJ0IScsXG4gICAgICAgIGRhdGE6IGNhcnQsXG4gICAgICB9XG4gICAgfTtcbiAgfVxuXG4gIC8qKlxuICAgKiB2aWV3IGFsbCBjYXJ0c1xuICAgKiBAcGFyYW0ge09iamVjdH0gcmVxIHRoZSBkYXRhIGZvciBwcm9kdWN0XG4gICAqIEByZXR1cm5zIHtkYXRhfSBmb3Igdmlld2luZyBwcm9kdWN0IGluIGNhcnRcbiAgICovXG4gIHN0YXRpYyBhc3luYyB2aWV3QWxsQ2FydHMoKSB7XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXVzZS1iZWZvcmUtZGVmaW5lXG4gICAgY29uc3QgYWxsY2FydCA9IGF3YWl0IGNhcnRzLmZpbmRBbGwoKTtcbiAgICByZXR1cm4ge1xuICAgICAgdmFsdWU6IHtcbiAgICAgICAgbWVzc2FnZTogJ0hlcmUgYXJlIGFsbCB0aGUgY2FydHMnLFxuICAgICAgICBkYXRhOiBhbGxjYXJ0XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBvYmplY3QtY3VybHktbmV3bGluZVxuICAgICAgfVxuICAgIH07XG4gIH1cbn1cbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQUE7QUFDQTtBQUNBLE1BQU07RUFBRUEsS0FBSztFQUFFQztBQUFTLENBQUMsR0FBR0MsT0FBTyxDQUFDLG9CQUFvQixDQUFDO0FBQ3pEOztBQUVBO0FBQ0E7QUFDQTtBQUNlLE1BQU1DLFdBQVcsQ0FBQztFQUMvQjtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7RUFDRSxhQUFhQyxPQUFPQSxDQUFDQyxHQUFHLEVBQUU7SUFDeEIsTUFBTTtNQUFFQyxFQUFFLEVBQUVDO0lBQVUsQ0FBQyxHQUFHRixHQUFHLENBQUNHLE1BQU07SUFDcEMsTUFBTUMsU0FBUyxHQUFHSixHQUFHLENBQUNLLElBQUksQ0FBQ0MsVUFBVSxJQUFJLENBQUM7SUFDMUMsTUFBTUMsT0FBTyxHQUFHLE1BQU1YLFFBQVEsQ0FBQ1ksT0FBTyxDQUFDO01BQ3JDQyxLQUFLLEVBQUU7UUFBRVIsRUFBRSxFQUFFQyxTQUFTO1FBQUVRLFNBQVMsRUFBRTtNQUFLO0lBQzFDLENBQUMsQ0FBQztJQUNGLElBQUlILE9BQU8sRUFBRTtNQUNYLElBQUlBLE9BQU8sQ0FBQ0ksUUFBUSxHQUFHUCxTQUFTLEVBQUU7UUFDaEMsT0FBTztVQUFFUSxLQUFLLEVBQUU7WUFBRUMsT0FBTyxFQUFFO1VBQThCO1FBQUUsQ0FBQztNQUM5RDtNQUNBLE1BQU1DLFFBQVEsR0FBR1AsT0FBTyxDQUFDUSxLQUFLLEdBQUdYLFNBQVM7TUFDMUMsTUFBTVksSUFBSSxHQUFHO1FBQ1hmLEVBQUUsRUFBRU0sT0FBTyxDQUFDTixFQUFFO1FBQ2RnQixJQUFJLEVBQUVWLE9BQU8s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","map":{"version":3,"names":["carts","products","require","cartService","addItem","req","id","productId","params","quantitie","body","quantities","product","findOne","where","available","quantity","error","message","newprice","price","item","name","image","images","Ptotal","userid","user","cart","userId","newCart","create","total","map","item1","JSON","parse","reduce","sum","next","save","value","data","itemExists","findIndex","cartitem","splice","push","subtotal","prod1","update","updateCart","fields","cartId","clearCart","destroy","viewCart","viewAllCarts","allcart","findAll","exports","default","module"],"sourceRoot":"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/services/","sources":["carts.services.js"],"sourcesContent":["/* eslint-disable require-jsdoc */\n// eslint-disable-next-line import/named, import/no-duplicates\nconst { carts, products } = require('../database/models');\n// eslint-disable-next-line import/no-duplicates, import/named\n\n/**\n * cart services\n */\nexport default class cartService {\n  /**\n   * adding product to cart\n   * @param {Object} req the data for product\n   * @param {Object} res body\n   * @returns {data} for the created user\n   */\n  static async addItem(req) {\n    const { id: productId } = req.params;\n    const quantitie = req.body.quantities || 1;\n    const product = await products.findOne({\n      where: { id: productId, available: true },\n    });\n    if (product) {\n      if (product.quantity < quantitie) {\n        return { error: { message: 'not enough product in stock' } };\n      }\n      const newprice = product.price * quantitie;\n      const item = {\n        id: product.id,\n        name: product.name,\n        image: product.images[0],\n        quantity: quantitie,\n        price: product.price,\n        Ptotal: newprice,\n      };\n      const userid = req.user.id;\n      const cart = await carts.findOne({ where: { userId: userid } });\n      if (!cart) {\n        const newCart = await carts.create({\n          products: [item],\n          userId: req.user.id,\n        });\n        newCart.total = newCart.products\n          .map((item1) => JSON.parse(item1.Ptotal))\n          .reduce((sum, next) => sum + next);\n        await newCart.save();\n        return {\n          value: {\n            message: 'added to cart successfully',\n            data: newCart,\n            // eslint-disable-next-line object-curly-newline\n          },\n        };\n      }\n      const itemExists = cart.products.findIndex(\n        (cartitem) => cartitem.id === item.id\n      );\n      if (itemExists !== -1) {\n        cart.products.splice(itemExists, 1);\n      }\n      cart.products.push(item);\n      const subtotal = cart.products\n        .map((prod1) => JSON.parse(prod1.Ptotal))\n        .reduce((sum, next) => sum + next);\n      cart.total = subtotal;\n      await carts.update(\n        { products: cart.products, total: subtotal },\n        { where: { id: cart.id } }\n      );\n      return {\n        value: {\n          message: 'added to cart successfully',\n          data: cart,\n          // eslint-disable-next-line object-curly-newline\n        },\n      };\n    }\n  }\n\n  static async updateCart(fields, cartId) {\n    return carts.update({ ...fields }, { where: { id: cartId } });\n  }\n\n  /**\n   * clearing cart and resetting total to zero\n   * @param {Object} req\n   * @returns {Promise<Object>} confirmation message\n   */\n  static async clearCart(req) {\n    const userid = req.user.id;\n    const cart = await carts.findOne({ where: { userId: userid } });\n    if (cart) {\n      await cart.destroy();\n    }\n    return { value: { message: 'Cart cleared successfully' } };\n  }\n\n  /**\n   *  view the cart\n   * @param {Object} req the data for product\n   * @returns {data} for viewing product in cart\n   */\n  static async viewCart(req) {\n    const userid = req.user.id;\n    const cart = await carts.findOne({ where: { userId: userid } });\n    if (!cart) {\n      return {\n        value: {\n          message: 'Your cart is empty.',\n          data: { products: [] },\n        }\n      };\n    }\n    return {\n      value: {\n        message: 'Hey Here is your cart!',\n        data: cart,\n      }\n    };\n  }\n\n  /**\n   * view all carts\n   * @param {Object} req the data for product\n   * @returns {data} for viewing product in cart\n   */\n  static async viewAllCarts() {\n    // eslint-disable-next-line no-use-before-define\n    const allcart = await carts.findAll();\n    return {\n      value: {\n        message: 'Here are all the carts',\n        data: allcart\n        // eslint-disable-next-line object-curly-newline\n      }\n    };\n  }\n}\n"],"mappings":"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"}},"mtime":1685643189470},"{\"assumptions\":{},\"sourceRoot\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/loggers/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"filename\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/loggers/cart.logger.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/node_modules/babel-plugin-add-module-exports/lib/index.js\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-runtime\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"regenerator\":true},\"externalDependencies\":[]},{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.21.0:development":{"value":{"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.viewCart = exports.viewAllCarts = exports.deleteItem = exports.clearCarts = exports.cartLogger = exports.ItemError = void 0;\nvar _logger = _interopRequireDefault(require(\"../configs/logger\"));\nvar _models = require(\"../database/models\");\n/* eslint-disable import/named */\n\nconst cartLogger = async req => {\n  const logData = {\n    level: 'info',\n    message: `User ${req.user.email} added item ${req.params.id} to cart successfully`,\n    userId: req.user.id,\n    metadata: {\n      addItemRequest: req.body\n    }\n  };\n  await _models.Log.create(logData);\n  _logger.default.info(`User ${req.user.email} added item ${req.params.id} to cart successfully`);\n};\nexports.cartLogger = cartLogger;\nconst deleteItem = async req => {\n  const logData = {\n    level: 'info',\n    message: `User ${req.user.email} deleted item from cart successfully`,\n    userId: req.user.id,\n    metadata: {\n      deleteItemRequest: req.body\n    }\n  };\n  await _models.Log.create(logData);\n  _logger.default.info(`User ${req.user.email} deleted item from cart successfully`);\n};\nexports.deleteItem = deleteItem;\nconst ItemError = async (req, error) => {\n  const logData = {\n    level: 'error',\n    message: error.message,\n    userId: req.user.id,\n    metadata: {\n      ItemRequest: req.body\n    }\n  };\n  await _models.Log.create(logData);\n  _logger.default.error(`User ${req.user.email} encountered an errorwhile deleting item from cart:${error.message}`);\n};\nexports.ItemError = ItemError;\nconst viewCart = async (req, cart) => {\n  const logData = {\n    level: 'info',\n    message: `User ${req.user.email} viewed cart ${cart} successfully`,\n    userId: req.user.id,\n    metadata: {\n      viewCartRequest: req.body\n    }\n  };\n  await _models.Log.create(logData);\n  _logger.default.info(`User ${req.user.email} viewed cart successfully`);\n};\nexports.viewCart = viewCart;\nconst clearCarts = async req => {\n  const logData = {\n    level: 'info',\n    message: `User ${req.user.email} cleared all items from cart successfully`,\n    userId: req.user.id,\n    metadata: {\n      clearCartRequest: req.body\n    }\n  };\n  await _models.Log.create(logData);\n  _logger.default.info(`User ${req.user.email} cleared all items from cart successfully`);\n};\nexports.clearCarts = clearCarts;\nconst viewAllCarts = async (req, cart) => {\n  const logData = {\n    level: 'info',\n    message: `User ${req.user.email} viewed all carts successfully`,\n    userId: req.user.id,\n    metadata: {\n      viewCartRequest: cart\n    }\n  };\n  await _models.Log.create(logData);\n  _logger.default.info(`User ${req.user.email} viewed all carts successfully`);\n};\nexports.viewAllCarts = viewAllCarts;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfbG9nZ2VyIiwiX2ludGVyb3BSZXF1aXJlRGVmYXVsdCIsInJlcXVpcmUiLCJfbW9kZWxzIiwiY2FydExvZ2dlciIsInJlcSIsImxvZ0RhdGEiLCJsZXZlbCIsIm1lc3NhZ2UiLCJ1c2VyIiwiZW1haWwiLCJwYXJhbXMiLCJpZCIsInVzZXJJZCIsIm1ldGFkYXRhIiwiYWRkSXRlbVJlcXVlc3QiLCJib2R5IiwiTG9nIiwiY3JlYXRlIiwibG9nZ2VyIiwiaW5mbyIsImV4cG9ydHMiLCJkZWxldGVJdGVtIiwiZGVsZXRlSXRlbVJlcXVlc3QiLCJJdGVtRXJyb3IiLCJlcnJvciIsIkl0ZW1SZXF1ZXN0Iiwidmlld0NhcnQiLCJjYXJ0Iiwidmlld0NhcnRSZXF1ZXN0IiwiY2xlYXJDYXJ0cyIsImNsZWFyQ2FydFJlcXVlc3QiLCJ2aWV3QWxsQ2FydHMiXSwic291cmNlUm9vdCI6Ii9Vc2Vycy9hbmRlbGFyd2FuZGEvRGVza3RvcC9lLWNvbW0tdGVhbS1icm9ncmFtbWVycy1ibi9zcmMvbG9nZ2Vycy8iLCJzb3VyY2VzIjpbImNhcnQubG9nZ2VyLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qIGVzbGludC1kaXNhYmxlIGltcG9ydC9uYW1lZCAqL1xuXG5pbXBvcnQgbG9nZ2VyIGZyb20gJy4uL2NvbmZpZ3MvbG9nZ2VyJztcbmltcG9ydCB7IExvZyB9IGZyb20gJy4uL2RhdGFiYXNlL21vZGVscyc7XG5cbmV4cG9ydCBjb25zdCBjYXJ0TG9nZ2VyID0gYXN5bmMgKHJlcSkgPT4ge1xuICBjb25zdCBsb2dEYXRhID0ge1xuICAgIGxldmVsOiAnaW5mbycsXG4gICAgbWVzc2FnZTogYFVzZXIgJHtyZXEudXNlci5lbWFpbH0gYWRkZWQgaXRlbSAke3JlcS5wYXJhbXMuaWR9IHRvIGNhcnQgc3VjY2Vzc2Z1bGx5YCxcbiAgICB1c2VySWQ6IHJlcS51c2VyLmlkLFxuICAgIG1ldGFkYXRhOiB7IGFkZEl0ZW1SZXF1ZXN0OiByZXEuYm9keSB9LFxuICB9O1xuICBhd2FpdCBMb2cuY3JlYXRlKGxvZ0RhdGEpO1xuICBsb2dnZXIuaW5mbyhgVXNlciAke3JlcS51c2VyLmVtYWlsfSBhZGRlZCBpdGVtICR7cmVxLnBhcmFtcy5pZH0gdG8gY2FydCBzdWNjZXNzZnVsbHlgKTtcbn07XG5leHBvcnQgY29uc3QgZGVsZXRlSXRlbSA9IGFzeW5jIChyZXEpID0+IHtcbiAgY29uc3QgbG9nRGF0YSA9IHtcbiAgICBsZXZlbDogJ2luZm8nLFxuICAgIG1lc3NhZ2U6IGBVc2VyICR7cmVxLnVzZXIuZW1haWx9IGRlbGV0ZWQgaXRlbSBmcm9tIGNhcnQgc3VjY2Vzc2Z1bGx5YCxcbiAgICB1c2VySWQ6IHJlcS51c2VyLmlkLFxuICAgIG1ldGFkYXRhOiB7IGRlbGV0ZUl0ZW1SZXF1ZXN0OiByZXEuYm9keSB9LFxuICB9O1xuICBhd2FpdCBMb2cuY3JlYXRlKGxvZ0RhdGEpO1xuICBsb2dnZXIuaW5mbyhgVXNlciAke3JlcS51c2VyLmVtYWlsfSBkZWxldGVkIGl0ZW0gZnJvbSBjYXJ0IHN1Y2Nlc3NmdWxseWApO1xufTtcbmV4cG9ydCBjb25zdCBJdGVtRXJyb3IgPSBhc3luYyAocmVxLCBlcnJvcikgPT4ge1xuICBjb25zdCBsb2dEYXRhID0ge1xuICAgIGxldmVsOiAnZXJyb3InLFxuICAgIG1lc3NhZ2U6IGVycm9yLm1lc3NhZ2UsXG4gICAgdXNlcklkOiByZXEudXNlci5pZCxcbiAgICBtZXRhZGF0YTogeyBJdGVtUmVxdWVzdDogcmVxLmJvZHkgfSxcbiAgfTtcbiAgYXdhaXQgTG9nLmNyZWF0ZShsb2dEYXRhKTtcbiAgbG9nZ2VyLmVycm9yKGBVc2VyICR7cmVxLnVzZXIuZW1haWx9IGVuY291bnRlcmVkIGFuIGVycm9yd2hpbGUgZGVsZXRpbmcgaXRlbSBmcm9tIGNhcnQ6JHtlcnJvci5tZXNzYWdlfWApO1xufTtcblxuZXhwb3J0IGNvbnN0IHZpZXdDYXJ0ID0gYXN5bmMgKHJlcSwgY2FydCkgPT4ge1xuICBjb25zdCBsb2dEYXRhID0ge1xuICAgIGxldmVsOiAnaW5mbycsXG4gICAgbWVzc2FnZTogYFVzZXIgJHtyZXEudXNlci5lbWFpbH0gdmlld2VkIGNhcnQgJHtjYXJ0fSBzdWNjZXNzZnVsbHlgLFxuICAgIHVzZXJJZDogcmVxLnVzZXIuaWQsXG4gICAgbWV0YWRhdGE6IHsgdmlld0NhcnRSZXF1ZXN0OiByZXEuYm9keSB9LFxuICB9O1xuICBhd2FpdCBMb2cuY3JlYXRlKGxvZ0RhdGEpO1xuICBsb2dnZXIuaW5mbyhgVXNlciAke3JlcS51c2VyLmVtYWlsfSB2aWV3ZWQgY2FydCBzdWNjZXNzZnVsbHlgKTtcbn07XG5leHBvcnQgY29uc3QgY2xlYXJDYXJ0cyA9IGFzeW5jIChyZXEpID0+IHtcbiAgY29uc3QgbG9nRGF0YSA9IHtcbiAgICBsZXZlbDogJ2luZm8nLFxuICAgIG1lc3NhZ2U6IGBVc2VyICR7cmVxLnVzZXIuZW1haWx9IGNsZWFyZWQgYWxsIGl0ZW1zIGZyb20gY2FydCBzdWNjZXNzZnVsbHlgLFxuICAgIHVzZXJJZDogcmVxLnVzZXIuaWQsXG4gICAgbWV0YWRhdGE6IHsgY2xlYXJDYXJ0UmVxdWVzdDogcmVxLmJvZHkgfSxcbiAgfTtcbiAgYXdhaXQgTG9nLmNyZWF0ZShsb2dEYXRhKTtcbiAgbG9nZ2VyLmluZm8oYFVzZXIgJHtyZXEudXNlci5lbWFpbH0gY2xlYXJlZCBhbGwgaXRlbXMgZnJvbSBjYXJ0IHN1Y2Nlc3NmdWxseWApO1xufTtcbmV4cG9ydCBjb25zdCB2aWV3QWxsQ2FydHMgPSBhc3luYyAocmVxLCBjYXJ0KSA9PiB7XG4gIGNvbnN0IGxvZ0RhdGEgPSB7XG4gICAgbGV2ZWw6ICdpbmZvJyxcbiAgICBtZXNzYWdlOiBgVXNlciAke3JlcS51c2VyLmVtYWlsfSB2aWV3ZWQgYWxsIGNhcnRzIHN1Y2Nlc3NmdWxseWAsXG4gICAgdXNlcklkOiByZXEudXNlci5pZCxcbiAgICBtZXRhZGF0YTogeyB2aWV3Q2FydFJlcXVlc3Q6IGNhcnQgfSxcbiAgfTtcbiAgYXdhaXQgTG9nLmNyZWF0ZShsb2dEYXRhKTtcbiAgbG9nZ2VyLmluZm8oYFVz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","map":{"version":3,"names":["_logger","_interopRequireDefault","require","_models","cartLogger","req","logData","level","message","user","email","params","id","userId","metadata","addItemRequest","body","Log","create","logger","info","exports","deleteItem","deleteItemRequest","ItemError","error","ItemRequest","viewCart","cart","viewCartRequest","clearCarts","clearCartRequest","viewAllCarts"],"sourceRoot":"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/loggers/","sources":["cart.logger.js"],"sourcesContent":["/* eslint-disable import/named */\n\nimport logger from '../configs/logger';\nimport { Log } from '../database/models';\n\nexport const cartLogger = async (req) => {\n  const logData = {\n    level: 'info',\n    message: `User ${req.user.email} added item ${req.params.id} to cart successfully`,\n    userId: req.user.id,\n    metadata: { addItemRequest: req.body },\n  };\n  await Log.create(logData);\n  logger.info(`User ${req.user.email} added item ${req.params.id} to cart successfully`);\n};\nexport const deleteItem = async (req) => {\n  const logData = {\n    level: 'info',\n    message: `User ${req.user.email} deleted item from cart successfully`,\n    userId: req.user.id,\n    metadata: { deleteItemRequest: req.body },\n  };\n  await Log.create(logData);\n  logger.info(`User ${req.user.email} deleted item from cart successfully`);\n};\nexport const ItemError = async (req, error) => {\n  const logData = {\n    level: 'error',\n    message: error.message,\n    userId: req.user.id,\n    metadata: { ItemRequest: req.body },\n  };\n  await Log.create(logData);\n  logger.error(`User ${req.user.email} encountered an errorwhile deleting item from cart:${error.message}`);\n};\n\nexport const viewCart = async (req, cart) => {\n  const logData = {\n    level: 'info',\n    message: `User ${req.user.email} viewed cart ${cart} successfully`,\n    userId: req.user.id,\n    metadata: { viewCartRequest: req.body },\n  };\n  await Log.create(logData);\n  logger.info(`User ${req.user.email} viewed cart successfully`);\n};\nexport const clearCarts = async (req) => {\n  const logData = {\n    level: 'info',\n    message: `User ${req.user.email} cleared all items from cart successfully`,\n    userId: req.user.id,\n    metadata: { clearCartRequest: req.body },\n  };\n  await Log.create(logData);\n  logger.info(`User ${req.user.email} cleared all items from cart successfully`);\n};\nexport const viewAllCarts = async (req, cart) => {\n  const logData = {\n    level: 'info',\n    message: `User ${req.user.email} viewed all carts successfully`,\n    userId: req.user.id,\n    metadata: { viewCartRequest: cart },\n  };\n  await Log.create(logData);\n  logger.info(`User ${req.user.email} viewed all carts successfully`);\n};\n"],"mappings":"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"}},"mtime":1682148437942},"{\"assumptions\":{},\"sourceRoot\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/middlewares/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"filename\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/middlewares/isOwnerOfCart.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/node_modules/babel-plugin-add-module-exports/lib/index.js\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-runtime\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"regenerator\":true},\"externalDependencies\":[]},{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.21.0:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = isOwnerOfCart;\nvar _models = require(\"../database/models\");\n// eslint-disable-next-line import/named\n\n/**\n * @param {Object} req\n * @param {Object} res\n * @param {Object} next\n * @returns {res} response\n */\nasync function isOwnerOfCart(req, res, next) {\n  try {\n    const userId = req.user.id;\n    const cart = await _models.carts.findOne({\n      where: {\n        userId\n      }\n    });\n    req.cart = cart;\n    next();\n  } catch (error) {\n    return res.status(401).json({\n      error\n    });\n  }\n}\nmodule.exports = exports.default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfbW9kZWxzIiwicmVxdWlyZSIsImlzT3duZXJPZkNhcnQiLCJyZXEiLCJyZXMiLCJuZXh0IiwidXNlcklkIiwidXNlciIsImlkIiwiY2FydCIsImNhcnRzIiwiZmluZE9uZSIsIndoZXJlIiwiZXJyb3IiLCJzdGF0dXMiLCJqc29uIiwibW9kdWxlIiwiZXhwb3J0cyIsImRlZmF1bHQiXSwic291cmNlUm9vdCI6Ii9Vc2Vycy9hbmRlbGFyd2FuZGEvRGVza3RvcC9lLWNvbW0tdGVhbS1icm9ncmFtbWVycy1ibi9zcmMvbWlkZGxld2FyZXMvIiwic291cmNlcyI6WyJpc093bmVyT2ZDYXJ0LmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBpbXBvcnQvbmFtZWRcbmltcG9ydCB7IGNhcnRzIH0gZnJvbSAnLi4vZGF0YWJhc2UvbW9kZWxzJztcblxuLyoqXG4gKiBAcGFyYW0ge09iamVjdH0gcmVxXG4gKiBAcGFyYW0ge09iamVjdH0gcmVzXG4gKiBAcGFyYW0ge09iamVjdH0gbmV4dFxuICogQHJldHVybnMge3Jlc30gcmVzcG9uc2VcbiAqL1xuZXhwb3J0IGRlZmF1bHQgYXN5bmMgZnVuY3Rpb24gaXNPd25lck9mQ2FydChyZXEsIHJlcywgbmV4dCkge1xuICB0cnkge1xuICAgIGNvbnN0IHVzZXJJZCA9IHJlcS51c2VyLmlkO1xuICAgIGNvbnN0IGNhcnQgPSBhd2FpdCBjYXJ0cy5maW5kT25lKHsgd2hlcmU6IHsgdXNlcklkIH0gfSk7XG4gICAgcmVxLmNhcnQgPSBjYXJ0O1xuICAgIG5leHQoKTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDEpLmpzb24oeyBlcnJvciB9KTtcbiAgfVxufVxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7QUFDQSxJQUFBQSxPQUFBLEdBQUFDLE9BQUE7QUFEQTs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDZSxlQUFlQyxhQUFhQSxDQUFDQyxHQUFHLEVBQUVDLEdBQUcsRUFBRUMsSUFBSSxFQUFFO0VBQzFELElBQUk7SUFDRixNQUFNQyxNQUFNLEdBQUdILEdBQUcsQ0FBQ0ksSUFBSSxDQUFDQyxFQUFFO0lBQzFCLE1BQU1DLElBQUksR0FBRyxNQUFNQyxhQUFLLENBQUNDLE9BQU8sQ0FBQztNQUFFQyxLQUFLLEVBQUU7UUFBRU47TUFBTztJQUFFLENBQUMsQ0FBQztJQUN2REgsR0FBRyxDQUFDTSxJQUFJLEdBQUdBLElBQUk7SUFDZkosSUFBSSxFQUFFO0VBQ1IsQ0FBQyxDQUFDLE9BQU9RLEtBQUssRUFBRTtJQUNkLE9BQU9ULEdBQUcsQ0FBQ1UsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDQyxJQUFJLENBQUM7TUFBRUY7SUFBTSxDQUFDLENBQUM7RUFDeEM7QUFDRjtBQUFDRyxNQUFBLENBQUFDLE9BQUEsR0FBQUEsT0FBQSxDQUFBQyxPQUFBIn0=","map":{"version":3,"names":["_models","require","isOwnerOfCart","req","res","next","userId","user","id","cart","carts","findOne","where","error","status","json","module","exports","default"],"sourceRoot":"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/middlewares/","sources":["isOwnerOfCart.js"],"sourcesContent":["// eslint-disable-next-line import/named\nimport { carts } from '../database/models';\n\n/**\n * @param {Object} req\n * @param {Object} res\n * @param {Object} next\n * @returns {res} response\n */\nexport default async function isOwnerOfCart(req, res, next) {\n  try {\n    const userId = req.user.id;\n    const cart = await carts.findOne({ where: { userId } });\n    req.cart = cart;\n    next();\n  } catch (error) {\n    return res.status(401).json({ error });\n  }\n}\n"],"mappings":";;;;;;AACA,IAAAA,OAAA,GAAAC,OAAA;AADA;;AAGA;AACA;AACA;AACA;AACA;AACA;AACe,eAAeC,aAAaA,CAACC,GAAG,EAAEC,GAAG,EAAEC,IAAI,EAAE;EAC1D,IAAI;IACF,MAAMC,MAAM,GAAGH,GAAG,CAACI,IAAI,CAACC,EAAE;IAC1B,MAAMC,IAAI,GAAG,MAAMC,aAAK,CAACC,OAAO,CAAC;MAAEC,KAAK,EAAE;QAAEN;MAAO;IAAE,CAAC,CAAC;IACvDH,GAAG,CAACM,IAAI,GAAGA,IAAI;IACfJ,IAAI,EAAE;EACR,CAAC,CAAC,OAAOQ,KAAK,EAAE;IACd,OAAOT,GAAG,CAACU,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;MAAEF;IAAM,CAAC,CAAC;EACxC;AACF;AAACG,MAAA,CAAAC,OAAA,GAAAA,OAAA,CAAAC,OAAA"}},"mtime":1685643189461},"{\"assumptions\":{},\"sourceRoot\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/routes/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"filename\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/routes/reviews.routes.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/node_modules/babel-plugin-add-module-exports/lib/index.js\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-runtime\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"regenerator\":true},\"externalDependencies\":[]},{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.21.0:development":{"value":{"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _express = require(\"express\");\nvar _catchError = _interopRequireDefault(require(\"../middlewares/catchError\"));\nvar _requestValidator = _interopRequireDefault(require(\"../middlewares/requestValidator\"));\nvar _verifyToken = _interopRequireDefault(require(\"../middlewares/verifyToken\"));\nvar _review = require(\"../validations/review.validation\");\nvar _reviews = require(\"../controllers/reviews.contollers\");\n// eslint-disable-next-line import/named\n\nconst router = (0, _express.Router)();\nrouter.get('/', (0, _catchError.default)(_reviews.listReviews));\nrouter.post('/', _verifyToken.default, (0, _requestValidator.default)(_review.createReviewValidate), (0, _catchError.default)(_reviews.createReview));\nrouter.patch('/:id', _verifyToken.default, (0, _requestValidator.default)(_review.updateReviewValidate), (0, _catchError.default)(_reviews.updateReview));\nrouter.get('/:id', (0, _catchError.default)(_reviews.getReview));\nrouter.delete('/:id', _verifyToken.default, (0, _catchError.default)(_reviews.deleteReview));\nvar _default = router;\nexports.default = _default;\nmodule.exports = exports.default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfZXhwcmVzcyIsInJlcXVpcmUiLCJfY2F0Y2hFcnJvciIsIl9pbnRlcm9wUmVxdWlyZURlZmF1bHQiLCJfcmVxdWVzdFZhbGlkYXRvciIsIl92ZXJpZnlUb2tlbiIsIl9yZXZpZXciLCJfcmV2aWV3cyIsInJvdXRlciIsIlJvdXRlciIsImdldCIsImNhdGNoRXJyb3IiLCJsaXN0UmV2aWV3cyIsInBvc3QiLCJpc0F1dGhlbnRpY2F0ZWQiLCJyZXF1ZXN0VmFsaWRhdG9yIiwiY3JlYXRlUmV2aWV3VmFsaWRhdGUiLCJjcmVhdGVSZXZpZXciLCJwYXRjaCIsInVwZGF0ZVJldmlld1ZhbGlkYXRlIiwidXBkYXRlUmV2aWV3IiwiZ2V0UmV2aWV3IiwiZGVsZXRlIiwiZGVsZXRlUmV2aWV3IiwiX2RlZmF1bHQiLCJleHBvcnRzIiwiZGVmYXVsdCIsIm1vZHVsZSJdLCJzb3VyY2VSb290IjoiL1VzZXJzL2FuZGVsYXJ3YW5kYS9EZXNrdG9wL2UtY29tbS10ZWFtLWJyb2dyYW1tZXJzLWJuL3NyYy9yb3V0ZXMvIiwic291cmNlcyI6WyJyZXZpZXdzLnJvdXRlcy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBSb3V0ZXIgfSBmcm9tICdleHByZXNzJztcblxuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGltcG9ydC9uYW1lZFxuaW1wb3J0IGNhdGNoRXJyb3IgZnJvbSAnLi4vbWlkZGxld2FyZXMvY2F0Y2hFcnJvcic7XG5pbXBvcnQgcmVxdWVzdFZhbGlkYXRvciBmcm9tICcuLi9taWRkbGV3YXJlcy9yZXF1ZXN0VmFsaWRhdG9yJztcbmltcG9ydCBpc0F1dGhlbnRpY2F0ZWQgZnJvbSAnLi4vbWlkZGxld2FyZXMvdmVyaWZ5VG9rZW4nO1xuaW1wb3J0IHtcbiAgY3JlYXRlUmV2aWV3VmFsaWRhdGUsXG4gIHVwZGF0ZVJldmlld1ZhbGlkYXRlLFxufSBmcm9tICcuLi92YWxpZGF0aW9ucy9yZXZpZXcudmFsaWRhdGlvbic7XG5pbXBvcnQge1xuICBjcmVhdGVSZXZpZXcsXG4gIGRlbGV0ZVJldmlldyxcbiAgZ2V0UmV2aWV3LFxuICBsaXN0UmV2aWV3cyxcbiAgdXBkYXRlUmV2aWV3LFxufSBmcm9tICcuLi9jb250cm9sbGVycy9yZXZpZXdzLmNvbnRvbGxlcnMnO1xuXG5jb25zdCByb3V0ZXIgPSBSb3V0ZXIoKTtcblxucm91dGVyLmdldCgnLycsIGNhdGNoRXJyb3IobGlzdFJldmlld3MpKTtcbnJvdXRlci5wb3N0KFxuICAnLycsXG4gIGlzQXV0aGVudGljYXRlZCxcbiAgcmVxdWVzdFZhbGlkYXRvcihjcmVhdGVSZXZpZXdWYWxpZGF0ZSksXG4gIGNhdGNoRXJyb3IoY3JlYXRlUmV2aWV3KVxuKTtcbnJvdXRlci5wYXRjaChcbiAgJy86aWQnLFxuICBpc0F1dGhlbnRpY2F0ZWQsXG4gIHJlcXVlc3RWYWxpZGF0b3IodXBkYXRlUmV2aWV3VmFsaWRhdGUpLFxuICBjYXRjaEVycm9yKHVwZGF0ZVJldmlldylcbik7XG5yb3V0ZXIuZ2V0KCcvOmlkJywgY2F0Y2hFcnJvcihnZXRSZXZpZXcpKTtcbnJvdXRlci5kZWxldGUoJy86aWQnLCBpc0F1dGhlbnRpY2F0ZWQsIGNhdGNoRXJyb3IoZGVsZXRlUmV2aWV3KSk7XG5cbmV4cG9ydCBkZWZhdWx0IHJvdXRlcjtcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBLElBQUFBLFFBQUEsR0FBQUMsT0FBQTtBQUdBLElBQUFDLFdBQUEsR0FBQUMsc0JBQUEsQ0FBQUYsT0FBQTtBQUNBLElBQUFHLGlCQUFBLEdBQUFELHNCQUFBLENBQUFGLE9BQUE7QUFDQSxJQUFBSSxZQUFBLEdBQUFGLHNCQUFBLENBQUFGLE9BQUE7QUFDQSxJQUFBSyxPQUFBLEdBQUFMLE9BQUE7QUFJQSxJQUFBTSxRQUFBLEdBQUFOLE9BQUE7QUFSQTs7QUFnQkEsTUFBTU8sTUFBTSxHQUFHLElBQUFDLGVBQU0sR0FBRTtBQUV2QkQsTUFBTSxDQUFDRSxHQUFHLENBQUMsR0FBRyxFQUFFLElBQUFDLG1CQUFVLEVBQUNDLG9CQUFXLENBQUMsQ0FBQztBQUN4Q0osTUFBTSxDQUFDSyxJQUFJLENBQ1QsR0FBRyxFQUNIQyxvQkFBZSxFQUNmLElBQUFDLHlCQUFnQixFQUFDQyw0QkFBb0IsQ0FBQyxFQUN0QyxJQUFBTCxtQkFBVSxFQUFDTSxxQkFBWSxDQUFDLENBQ3pCO0FBQ0RULE1BQU0sQ0FBQ1UsS0FBSyxDQUNWLE1BQU0sRUFDTkosb0JBQWUsRUFDZixJQUFBQyx5QkFBZ0IsRUFBQ0ksNEJBQW9CLENBQUMsRUFDdEMsSUFBQVIsbUJBQVUsRUFBQ1MscUJBQVksQ0FBQyxDQUN6QjtBQUNEWixNQUFNLENBQUNFLEdBQUcsQ0FBQyxNQUFNLEVBQUUsSUFBQUMsbUJBQVUsRUFBQ1Usa0JBQVMsQ0FBQyxDQUFDO0FBQ3pDYixNQUFNLENBQUNjLE1BQU0sQ0FBQyxNQUFNLEVBQUVSLG9CQUFlLEVBQUUsSUFBQUgsbUJBQVUsRUFBQ1kscUJBQVksQ0FBQyxDQUFDO0FBQUMsSUFBQUMsUUFBQSxHQUVsRGhCLE1BQU07QUFBQWlCLE9BQUEsQ0FBQUMsT0FBQSxHQUFBRixRQUFBO0FBQUFHLE1BQUEsQ0FBQUYsT0FBQSxHQUFBQSxPQUFBLENBQUFDLE9BQUEifQ==","map":{"version":3,"names":["_express","require","_catchError","_interopRequireDefault","_requestValidator","_verifyToken","_review","_reviews","router","Router","get","catchError","listReviews","post","isAuthenticated","requestValidator","createReviewValidate","createReview","patch","updateReviewValidate","updateReview","getReview","delete","deleteReview","_default","exports","default","module"],"sourceRoot":"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/routes/","sources":["reviews.routes.js"],"sourcesContent":["import { Router } from 'express';\n\n// eslint-disable-next-line import/named\nimport catchError from '../middlewares/catchError';\nimport requestValidator from '../middlewares/requestValidator';\nimport isAuthenticated from '../middlewares/verifyToken';\nimport {\n  createReviewValidate,\n  updateReviewValidate,\n} from '../validations/review.validation';\nimport {\n  createReview,\n  deleteReview,\n  getReview,\n  listReviews,\n  updateReview,\n} from '../controllers/reviews.contollers';\n\nconst router = Router();\n\nrouter.get('/', catchError(listReviews));\nrouter.post(\n  '/',\n  isAuthenticated,\n  requestValidator(createReviewValidate),\n  catchError(createReview)\n);\nrouter.patch(\n  '/:id',\n  isAuthenticated,\n  requestValidator(updateReviewValidate),\n  catchError(updateReview)\n);\nrouter.get('/:id', catchError(getReview));\nrouter.delete('/:id', isAuthenticated, catchError(deleteReview));\n\nexport default router;\n"],"mappings":";;;;;;;AAAA,IAAAA,QAAA,GAAAC,OAAA;AAGA,IAAAC,WAAA,GAAAC,sBAAA,CAAAF,OAAA;AACA,IAAAG,iBAAA,GAAAD,sBAAA,CAAAF,OAAA;AACA,IAAAI,YAAA,GAAAF,sBAAA,CAAAF,OAAA;AACA,IAAAK,OAAA,GAAAL,OAAA;AAIA,IAAAM,QAAA,GAAAN,OAAA;AARA;;AAgBA,MAAMO,MAAM,GAAG,IAAAC,eAAM,GAAE;AAEvBD,MAAM,CAACE,GAAG,CAAC,GAAG,EAAE,IAAAC,mBAAU,EAACC,oBAAW,CAAC,CAAC;AACxCJ,MAAM,CAACK,IAAI,CACT,GAAG,EACHC,oBAAe,EACf,IAAAC,yBAAgB,EAACC,4BAAoB,CAAC,EACtC,IAAAL,mBAAU,EAACM,qBAAY,CAAC,CACzB;AACDT,MAAM,CAACU,KAAK,CACV,MAAM,EACNJ,oBAAe,EACf,IAAAC,yBAAgB,EAACI,4BAAoB,CAAC,EACtC,IAAAR,mBAAU,EAACS,qBAAY,CAAC,CACzB;AACDZ,MAAM,CAACE,GAAG,CAAC,MAAM,EAAE,IAAAC,mBAAU,EAACU,kBAAS,CAAC,CAAC;AACzCb,MAAM,CAACc,MAAM,CAAC,MAAM,EAAER,oBAAe,EAAE,IAAAH,mBAAU,EAACY,qBAAY,CAAC,CAAC;AAAC,IAAAC,QAAA,GAElDhB,MAAM;AAAAiB,OAAA,CAAAC,OAAA,GAAAF,QAAA;AAAAG,MAAA,CAAAF,OAAA,GAAAA,OAAA,CAAAC,OAAA"}},"mtime":1682148437958},"{\"assumptions\":{},\"sourceRoot\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/validations/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"filename\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/validations/review.validation.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/node_modules/babel-plugin-add-module-exports/lib/index.js\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-runtime\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"regenerator\":true},\"externalDependencies\":[]},{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.21.0:development":{"value":{"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.createReviewValidate = createReviewValidate;\nexports.updateReviewValidate = updateReviewValidate;\nvar _joi = _interopRequireDefault(require(\"joi\"));\n/**\n * Check for new password\n * @param {*} data data\n * @returns {Object} result\n */\nfunction createReviewValidate(data) {\n  const schema = _joi.default.object({\n    feedback: _joi.default.string().required(),\n    rating: _joi.default.number().min(1).max(5).required(),\n    productId: _joi.default.string().length(36).required()\n  });\n  return schema.validate(data, {\n    abortEarly: false\n  });\n}\n/**\n * Check for new password\n * @param {*} data data\n * @returns {Object} result\n */\nfunction updateReviewValidate(data) {\n  const schema = _joi.default.object({\n    feedback: _joi.default.string().required(),\n    rating: _joi.default.number().min(1).max(5).required()\n  });\n  return schema.validate(data, {\n    abortEarly: false\n  });\n}\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfam9pIiwiX2ludGVyb3BSZXF1aXJlRGVmYXVsdCIsInJlcXVpcmUiLCJjcmVhdGVSZXZpZXdWYWxpZGF0ZSIsImRhdGEiLCJzY2hlbWEiLCJKb2kiLCJvYmplY3QiLCJmZWVkYmFjayIsInN0cmluZyIsInJlcXVpcmVkIiwicmF0aW5nIiwibnVtYmVyIiwibWluIiwibWF4IiwicHJvZHVjdElkIiwibGVuZ3RoIiwidmFsaWRhdGUiLCJhYm9ydEVhcmx5IiwidXBkYXRlUmV2aWV3VmFsaWRhdGUiXSwic291cmNlUm9vdCI6Ii9Vc2Vycy9hbmRlbGFyd2FuZGEvRGVza3RvcC9lLWNvbW0tdGVhbS1icm9ncmFtbWVycy1ibi9zcmMvdmFsaWRhdGlvbnMvIiwic291cmNlcyI6WyJyZXZpZXcudmFsaWRhdGlvbi5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgSm9pIGZyb20gJ2pvaSc7XG5cbi8qKlxuICogQ2hlY2sgZm9yIG5ldyBwYXNzd29yZFxuICogQHBhcmFtIHsqfSBkYXRhIGRhdGFcbiAqIEByZXR1cm5zIHtPYmplY3R9IHJlc3VsdFxuICovXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlUmV2aWV3VmFsaWRhdGUoZGF0YSkge1xuICBjb25zdCBzY2hlbWEgPSBKb2kub2JqZWN0KHtcbiAgICBmZWVkYmFjazogSm9pLnN0cmluZygpLnJlcXVpcmVkKCksXG4gICAgcmF0aW5nOiBKb2kubnVtYmVyKCkubWluKDEpLm1heCg1KS5yZXF1aXJlZCgpLFxuICAgIHByb2R1Y3RJZDogSm9pLnN0cmluZygpLmxlbmd0aCgzNikucmVxdWlyZWQoKSxcbiAgfSk7XG4gIHJldHVybiBzY2hlbWEudmFsaWRhdGUoZGF0YSwgeyBhYm9ydEVhcmx5OiBmYWxzZSB9KTtcbn1cbi8qKlxuICogQ2hlY2sgZm9yIG5ldyBwYXNzd29yZFxuICogQHBhcmFtIHsqfSBkYXRhIGRhdGFcbiAqIEByZXR1cm5zIHtPYmplY3R9IHJlc3VsdFxuICovXG5leHBvcnQgZnVuY3Rpb24gdXBkYXRlUmV2aWV3VmFsaWRhdGUoZGF0YSkge1xuICBjb25zdCBzY2hlbWEgPSBKb2kub2JqZWN0KHtcbiAgICBmZWVkYmFjazogSm9pLnN0cmluZygpLnJlcXVpcmVkKCksXG4gICAgcmF0aW5nOiBKb2kubnVtYmVyKCkubWluKDEpLm1heCg1KS5yZXF1aXJlZCgpLFxuICB9KTtcbiAgcmV0dXJuIHNjaGVtYS52YWxpZGF0ZShkYXRhLCB7IGFib3J0RWFybHk6IGZhbHNlIH0pO1xufVxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUFBLElBQUFBLElBQUEsR0FBQUMsc0JBQUEsQ0FBQUMsT0FBQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTyxTQUFTQyxvQkFBb0JBLENBQUNDLElBQUksRUFBRTtFQUN6QyxNQUFNQyxNQUFNLEdBQUdDLFlBQUcsQ0FBQ0MsTUFBTSxDQUFDO0lBQ3hCQyxRQUFRLEVBQUVGLFlBQUcsQ0FBQ0csTUFBTSxFQUFFLENBQUNDLFFBQVEsRUFBRTtJQUNqQ0MsTUFBTSxFQUFFTCxZQUFHLENBQUNNLE1BQU0sRUFBRSxDQUFDQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUNDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQ0osUUFBUSxFQUFFO0lBQzdDSyxTQUFTLEVBQUVULFlBQUcsQ0FBQ0csTUFBTSxFQUFFLENBQUNPLE1BQU0sQ0FBQyxFQUFFLENBQUMsQ0FBQ04sUUFBUTtFQUM3QyxDQUFDLENBQUM7RUFDRixPQUFPTCxNQUFNLENBQUNZLFFBQVEsQ0FBQ2IsSUFBSSxFQUFFO0lBQUVjLFVBQVUsRUFBRTtFQUFNLENBQUMsQ0FBQztBQUNyRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTyxTQUFTQyxvQkFBb0JBLENBQUNmLElBQUksRUFBRTtFQUN6QyxNQUFNQyxNQUFNLEdBQUdDLFlBQUcsQ0FBQ0MsTUFBTSxDQUFDO0lBQ3hCQyxRQUFRLEVBQUVGLFlBQUcsQ0FBQ0csTUFBTSxFQUFFLENBQUNDLFFBQVEsRUFBRTtJQUNqQ0MsTUFBTSxFQUFFTCxZQUFHLENBQUNNLE1BQU0sRUFBRSxDQUFDQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUNDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQ0osUUFBUTtFQUM3QyxDQUFDLENBQUM7RUFDRixPQUFPTCxNQUFNLENBQUNZLFFBQVEsQ0FBQ2IsSUFBSSxFQUFFO0lBQUVjLFVBQVUsRUFBRTtFQUFNLENBQUMsQ0FBQztBQUNyRCJ9","map":{"version":3,"names":["_joi","_interopRequireDefault","require","createReviewValidate","data","schema","Joi","object","feedback","string","required","rating","number","min","max","productId","length","validate","abortEarly","updateReviewValidate"],"sourceRoot":"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/validations/","sources":["review.validation.js"],"sourcesContent":["import Joi from 'joi';\n\n/**\n * Check for new password\n * @param {*} data data\n * @returns {Object} result\n */\nexport function createReviewValidate(data) {\n  const schema = Joi.object({\n    feedback: Joi.string().required(),\n    rating: Joi.number().min(1).max(5).required(),\n    productId: Joi.string().length(36).required(),\n  });\n  return schema.validate(data, { abortEarly: false });\n}\n/**\n * Check for new password\n * @param {*} data data\n * @returns {Object} result\n */\nexport function updateReviewValidate(data) {\n  const schema = Joi.object({\n    feedback: Joi.string().required(),\n    rating: Joi.number().min(1).max(5).required(),\n  });\n  return schema.validate(data, { abortEarly: false });\n}\n"],"mappings":";;;;;;;;AAAA,IAAAA,IAAA,GAAAC,sBAAA,CAAAC,OAAA;AAEA;AACA;AACA;AACA;AACA;AACO,SAASC,oBAAoBA,CAACC,IAAI,EAAE;EACzC,MAAMC,MAAM,GAAGC,YAAG,CAACC,MAAM,CAAC;IACxBC,QAAQ,EAAEF,YAAG,CAACG,MAAM,EAAE,CAACC,QAAQ,EAAE;IACjCC,MAAM,EAAEL,YAAG,CAACM,MAAM,EAAE,CAACC,GAAG,CAAC,CAAC,CAAC,CAACC,GAAG,CAAC,CAAC,CAAC,CAACJ,QAAQ,EAAE;IAC7CK,SAAS,EAAET,YAAG,CAACG,MAAM,EAAE,CAACO,MAAM,CAAC,EAAE,CAAC,CAACN,QAAQ;EAC7C,CAAC,CAAC;EACF,OAAOL,MAAM,CAACY,QAAQ,CAACb,IAAI,EAAE;IAAEc,UAAU,EAAE;EAAM,CAAC,CAAC;AACrD;AACA;AACA;AACA;AACA;AACA;AACO,SAASC,oBAAoBA,CAACf,IAAI,EAAE;EACzC,MAAMC,MAAM,GAAGC,YAAG,CAACC,MAAM,CAAC;IACxBC,QAAQ,EAAEF,YAAG,CAACG,MAAM,EAAE,CAACC,QAAQ,EAAE;IACjCC,MAAM,EAAEL,YAAG,CAACM,MAAM,EAAE,CAACC,GAAG,CAAC,CAAC,CAAC,CAACC,GAAG,CAAC,CAAC,CAAC,CAACJ,QAAQ;EAC7C,CAAC,CAAC;EACF,OAAOL,MAAM,CAACY,QAAQ,CAACb,IAAI,EAAE;IAAEc,UAAU,EAAE;EAAM,CAAC,CAAC;AACrD"}},"mtime":1682148437967},"{\"assumptions\":{},\"sourceRoot\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/controllers/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"filename\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/controllers/reviews.contollers.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/node_modules/babel-plugin-add-module-exports/lib/index.js\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-runtime\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"regenerator\":true},\"externalDependencies\":[]},{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.21.0:development":{"value":{"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.updateReview = exports.listReviews = exports.getReview = exports.deleteReview = exports.createReview = void 0;\nvar _dotenv = _interopRequireDefault(require(\"dotenv\"));\nvar _models = require(\"../database/models\");\nvar _mail = require(\"../helpers/mail\");\nvar _emailConfig = require(\"../helpers/emailConfig\");\nvar _mailTemplate = require(\"../helpers/mailTemplate\");\nvar _paginating = _interopRequireDefault(require(\"../middlewares/paginating\"));\nvar _review = require(\"../loggers/review.logger\");\n/* eslint-disable import/named */\n// eslint-disable-next-line import/named\n\n// eslint-disable-next-line import/named\n\n_dotenv.default.config();\nconst listReviews = async (req, res) => {\n  (0, _paginating.default)(_models.reviews)(req, res, () => res.status(200).json(res.paginatedResults));\n  (0, _review.viewReview)();\n};\nexports.listReviews = listReviews;\nconst createReview = async (req, res) => {\n  const userId = req.user.id;\n  const product = await _models.products.findOne({\n    where: {\n      id: req.body.productId\n    }\n  });\n  if (product && product.sellerId === userId) {\n    return res.status(403).json({\n      message: \"You can't review yourself\"\n    });\n  }\n  const seller = await _models.users.findOne({\n    where: {\n      id: product.sellerId\n    }\n  });\n  const review = await _models.reviews.create({\n    userId,\n    ...req.body\n  });\n  const newNotification = {\n    message: 'your product have been reviewed',\n    type: 'product review'\n  };\n  const newN = {\n    ...newNotification\n  };\n  newN.receiverId = product.sellerId;\n  const receiver = {\n    username: seller.username,\n    email: seller.email\n  };\n  const notifyEmail = (0, _mailTemplate.notificationTemplate)(receiver.username, newN.message, newN.type, `${process.env.SWAGGER_SERVER}/reviews/${review.id}`);\n  (0, _mail.sendEmail)((0, _emailConfig.emailConfig)({\n    email: receiver.email,\n    subject: 'Notification !! review',\n    content: notifyEmail\n  }));\n  await _models.notifications.create(newN);\n  (0, _review.logNewReview)(req, review);\n  const productReviews = await _models.reviews.findAll({\n    where: {\n      productId: req.body.productId\n    },\n    include: {\n      model: _models.users,\n      as: 'reviewer',\n      attributes: ['username', 'email', 'avatar']\n    }\n  });\n  const AvRate = productReviews.reduce((sum, Review) => sum + Review.rating, 0) / productReviews.length;\n  const ratingCounts = productReviews.reduce((counts, Review) => {\n    const {\n      rating\n    } = Review;\n    counts[rating] = (counts[rating] || 0) + 1;\n    return counts;\n  }, {});\n  const totalRates = {\n    1: ratingCounts[1] || 0,\n    2: ratingCounts[2] || 0,\n    3: ratingCounts[3] || 0,\n    4: ratingCounts[4] || 0,\n    5: ratingCounts[5] || 0,\n    AvRate\n  };\n  console.log(totalRates);\n  res.status(201).json({\n    ...review.dataValues,\n    reviewer: {\n      username: seller.username,\n      email: seller.email,\n      avatar: seller.avatar\n    },\n    totalRates\n  });\n};\nexports.createReview = createReview;\nconst getReview = async (req, res) => {\n  try {\n    const review = await _models.reviews.findOne({\n      where: {\n        id: req.params.id\n      }\n    });\n    if (!review) return res.status(404).json({\n      message: 'Review not found'\n    });\n    (0, _review.viewOneReview)();\n    res.status(200).json(review);\n  } catch (error) {\n    res.status(500).json({\n      message: error.message\n    });\n  }\n};\nexports.getReview = getReview;\nconst updateReview = async (req, res) => {\n  try {\n    const review = await _models.reviews.findOne({\n      where: {\n        id: req.params.id\n      }\n    });\n    if (!review) return res.status(404).json({\n      message: 'Review not found'\n    });\n    if (req.user.id !== review.userId) {\n      return res.status(403).json({\n        message: 'Only owner can update this review'\n      });\n    }\n    const product = await _models.products.findOne({\n      where: {\n        id: review.productId\n      }\n    });\n    const seller = await _models.users.findOne({\n      where: {\n        id: product.sellerId\n      }\n    });\n    const newNotification = {\n      message: 'the review on your product have been deleted',\n      type: 'product review'\n    };\n    const newN = {\n      ...newNotification\n    };\n    newN.receiverId = product.sellerId;\n    const receiver = {\n      username: seller.username,\n      email: seller.email\n    };\n    const notifyEmail = (0, _mailTemplate.notificationTemplate)(receiver.username, newN.message, newN.type, `${process.env.SWAGGER_SERVER}/reviews/${review.id}`);\n    (0, _mail.sendEmail)((0, _emailConfig.emailConfig)({\n      email: receiver.email,\n      subject: 'Notification !! review',\n      content: notifyEmail\n    }));\n    await _models.notifications.create(newN);\n    await _models.reviews.update({\n      ...req.body\n    }, {\n      where: {\n        id: review.id\n      }\n    });\n    const newReview = await _models.reviews.findOne({\n      where: {\n        id: review.id\n      }\n    });\n    (0, _review.logUpdatedReview)(req, newReview);\n    const productReviews = await _models.reviews.findAll({\n      where: {\n        productId: newReview.productId\n      },\n      include: {\n        model: _models.users,\n        as: 'reviewer',\n        attributes: ['username', 'email', 'avatar']\n      }\n    });\n    const AvRate = productReviews.reduce((sum, Review) => sum + Review.rating, 0) / productReviews.length;\n    const ratingCounts = productReviews.reduce((counts, Review) => {\n      const {\n        rating\n      } = Review;\n      counts[rating] = (counts[rating] || 0) + 1;\n      return counts;\n    }, {});\n    const totalRates = {\n      1: ratingCounts[1] || 0,\n      2: ratingCounts[2] || 0,\n      3: ratingCounts[3] || 0,\n      4: ratingCounts[4] || 0,\n      5: ratingCounts[5] || 0,\n      AvRate\n    };\n    console.log(totalRates);\n    res.status(200).json({\n      ...newReview.dataValues,\n      reviewer: {\n        username: seller.username,\n        email: seller.email,\n        avatar: seller.avatar\n      },\n      totalRates\n    });\n  } catch (error) {\n    (0, _review.logReviewError)(req, error);\n    res.status(500).json({\n      message: error.message\n    });\n  }\n};\nexports.updateReview = updateReview;\nconst deleteReview = async (req, res) => {\n  try {\n    const review = await _models.reviews.findOne({\n      where: {\n        id: req.params.id\n      }\n    });\n    if (!review) return res.status(404).json({\n      message: 'Review not found'\n    });\n    if (req.user.role !== 'admin' && req.user.id !== review.userId) {\n      return res.status(403).json({\n        message: 'Only owner or admin can delete this review'\n      });\n    }\n    const product = await _models.products.findOne({\n      where: {\n        id: review.productId\n      }\n    });\n    const seller = await _models.users.findOne({\n      where: {\n        id: product.sellerId\n      }\n    });\n    const newNotification = {\n      message: 'the review on your product have been updated',\n      type: 'product review'\n    };\n    const newN = {\n      ...newNotification\n    };\n    newN.receiverId = product.sellerId;\n    const receiver = {\n      username: seller.username,\n      email: seller.email\n    };\n    const notifyEmail = (0, _mailTemplate.notificationTemplate)(receiver.username, newN.message, newN.type, `${process.env.SWAGGER_SERVER}/reviews/${review.id}`);\n    (0, _mail.sendEmail)((0, _emailConfig.emailConfig)({\n      email: receiver.email,\n      subject: 'Notification !! review',\n      content: notifyEmail\n    }));\n    await _models.notifications.create(newN);\n    const count = await _models.reviews.destroy({\n      where: {\n        id: review.id\n      }\n    });\n    if (count === 0) {\n      return res.status(404).json({\n        message: 'Review not found'\n      });\n    }\n    (0, _review.logDeletedReview)(req, review);\n    const productReviews = await _models.reviews.findAll({\n      where: {\n        productId: product.id\n      }\n    });\n    console.log(productReviews);\n    const AvRate = productReviews.reduce((sum, Review) => sum + Review.rating, 0) / productReviews.length;\n    const ratingCounts = productReviews.reduce((counts, Review) => {\n      const {\n        rating\n      } = Review;\n      counts[rating] = (counts[rating] || 0) + 1;\n      return counts;\n    }, {});\n    const totalRates = {\n      1: ratingCounts[1] || 0,\n      2: ratingCounts[2] || 0,\n      3: ratingCounts[3] || 0,\n      4: ratingCounts[4] || 0,\n      5: ratingCounts[5] || 0,\n      AvRate\n    };\n    res.status(200).json({\n      review,\n      totalRates\n    });\n  } catch (error) {\n    (0, _review.logReviewError)(req, error);\n    res.status(500).json({\n      message: error.message\n    });\n  }\n};\nexports.deleteReview = deleteReview;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfZG90ZW52IiwiX2ludGVyb3BSZXF1aXJlRGVmYXVsdCIsInJlcXVpcmUiLCJfbW9kZWxzIiwiX21haWwiLCJfZW1haWxDb25maWciLCJfbWFpbFRlbXBsYXRlIiwiX3BhZ2luYXRpbmciLCJfcmV2aWV3IiwiZG90ZW52IiwiY29uZmlnIiwibGlzdFJldmlld3MiLCJyZXEiLCJyZXMiLCJwYWdpbmF0ZWRSZXN1bHRzIiwicmV2aWV3cyIsInN0YXR1cyIsImpzb24iLCJ2aWV3UmV2aWV3IiwiZXhwb3J0cyIsImNyZWF0ZVJldmlldyIsInVzZXJJZCIsInVzZXIiLCJpZCIsInByb2R1Y3QiLCJwcm9kdWN0cyIsImZpbmRPbmUiLCJ3aGVyZSIsImJvZHkiLCJwcm9kdWN0SWQiLCJzZWxsZXJJZCIsIm1lc3NhZ2UiLCJzZWxsZXIiLCJ1c2VycyIsInJldmlldyIsImNyZWF0ZSIsIm5ld05vdGlmaWNhdGlvbiIsInR5cGUiLCJuZXdOIiwicmVjZWl2ZXJJZCIsInJlY2VpdmVyIiwidXNlcm5hbWUiLCJlbWFpbCIsIm5vdGlmeUVtYWlsIiwibm90aWZpY2F0aW9uVGVtcGxhdGUiLCJwcm9jZXNzIiwiZW52IiwiU1dBR0dFUl9TRVJWRVIiLCJzZW5kRW1haWwiLCJlbWFpbENvbmZpZyIsInN1YmplY3QiLCJjb250ZW50Iiwibm90aWZpY2F0aW9ucyIsImxvZ05ld1JldmlldyIsInByb2R1Y3RSZXZpZXdzIiwiZmluZEFsbCIsImluY2x1ZGUiLCJtb2RlbCIsImFzIiwiYXR0cmlidXRlcyIsIkF2UmF0ZSIsInJlZHVjZSIsInN1bSIsIlJldmlldyIsInJhdGluZyIsImxlbmd0aCIsInJhdGluZ0NvdW50cyIsImNvdW50cyIsInRvdGFsUmF0ZXMiLCJjb25zb2xlIiwibG9nIiwiZGF0YVZhbHVlcyIsInJldmlld2VyIiwiYXZhdGFyIiwiZ2V0UmV2aWV3IiwicGFyYW1zIiwidmlld09uZVJldmlldyIsImVycm9yIiwidXBkYXRlUmV2aWV3IiwidXBkYXRlIiwibmV3UmV2aWV3IiwibG9nVXBkYXRlZFJldmlldyIsImxvZ1Jldmlld0Vycm9yIiwiZGVsZXRlUmV2aWV3Iiwicm9sZSIsImNvdW50IiwiZGVzdHJveSIsImxvZ0RlbGV0ZWRSZXZpZXciXSwic291cmNlUm9vdCI6Ii9Vc2Vycy9hbmRlbGFyd2FuZGEvRGVza3RvcC9lLWNvbW0tdGVhbS1icm9ncmFtbWVycy1ibi9zcmMvY29udHJvbGxlcnMvIiwic291cmNlcyI6WyJyZXZpZXdzLmNvbnRvbGxlcnMuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLyogZXNsaW50LWRpc2FibGUgaW1wb3J0L25hbWVkICovXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgaW1wb3J0L25hbWVkXG5pbXBvcnQgZG90ZW52IGZyb20gJ2RvdGVudic7XG5pbXBvcnQge1xuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgaW1wb3J0L25hbWVkXG4gIHJldmlld3MsXG4gIHByb2R1Y3RzLFxuICB1c2VycyxcbiAgbm90aWZpY2F0aW9ucyxcbn0gZnJvbSAnLi4vZGF0YWJhc2UvbW9kZWxzJztcbmltcG9ydCB7IHNlbmRFbWFpbCB9IGZyb20gJy4uL2hlbHBlcnMvbWFpbCc7XG5pbXBvcnQgeyBlbWFpbENvbmZpZyB9IGZyb20gJy4uL2hlbHBlcnMvZW1haWxDb25maWcnO1xuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGltcG9ydC9uYW1lZFxuaW1wb3J0IHsgbm90aWZpY2F0aW9uVGVtcGxhdGUgfSBmcm9tICcuLi9oZWxwZXJzL21haWxUZW1wbGF0ZSc7XG5pbXBvcnQgcGFnaW5hdGVkUmVzdWx0cyBmcm9tICcuLi9taWRkbGV3YXJlcy9wYWdpbmF0aW5nJztcbmltcG9ydCB7XG4gIGxvZ05ld1JldmlldyxcbiAgbG9nRGVsZXRlZFJldmlldyxcbiAgbG9nUmV2aWV3RXJyb3IsXG4gIGxvZ1VwZGF0ZWRSZXZpZXcsXG4gIHZpZXdSZXZpZXcsXG4gIHZpZXdPbmVSZXZpZXcsXG59IGZyb20gJy4uL2xvZ2dlcnMvcmV2aWV3LmxvZ2dlcic7XG5cbmRvdGVudi5jb25maWcoKTtcblxuZXhwb3J0IGNvbnN0IGxpc3RSZXZpZXdzID0gYXN5bmMgKHJlcSwgcmVzKSA9PiB7XG4gIHBhZ2luYXRlZFJlc3VsdHMocmV2aWV3cykocmVxLCByZXMsICgpID0+IHJlcy5zdGF0dXMoMjAwKS5qc29uKHJlcy5wYWdpbmF0ZWRSZXN1bHRzKSk7XG4gIHZpZXdSZXZpZXcoKTtcbn07XG5cbmV4cG9ydCBjb25zdCBjcmVhdGVSZXZpZXcgPSBhc3luYyAocmVxLCByZXMpID0+IHtcbiAgY29uc3QgdXNlcklkID0gcmVxLnVzZXIuaWQ7XG4gIGNvbnN0IHByb2R1Y3QgPSBhd2FpdCBwcm9kdWN0cy5maW5kT25lKHsgd2hlcmU6IHsgaWQ6IHJlcS5ib2R5LnByb2R1Y3RJZCB9IH0pO1xuICBpZiAocHJvZHVjdCAmJiBwcm9kdWN0LnNlbGxlcklkID09PSB1c2VySWQpIHtcbiAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDMpLmpzb24oeyBtZXNzYWdlOiBcIllvdSBjYW4ndCByZXZpZXcgeW91cnNlbGZcIiB9KTtcbiAgfVxuICBjb25zdCBzZWxsZXIgPSBhd2FpdCB1c2Vycy5maW5kT25lKHsgd2hlcmU6IHsgaWQ6IHByb2R1Y3Quc2VsbGVySWQgfSB9KTtcbiAgY29uc3QgcmV2aWV3ID0gYXdhaXQgcmV2aWV3cy5jcmVhdGUoeyB1c2VySWQsIC4uLnJlcS5ib2R5IH0pO1xuICBjb25zdCBuZXdOb3RpZmljYXRpb24gPSB7XG4gICAgbWVzc2FnZTogJ3lvdXIgcHJvZHVjdCBoYXZlIGJlZW4gcmV2aWV3ZWQnLFxuICAgIHR5cGU6ICdwcm9kdWN0IHJldmlldycsXG4gIH07XG4gIGNvbnN0IG5ld04gPSB7IC4uLm5ld05vdGlmaWNhdGlvbiB9O1xuICBuZXdOLnJlY2VpdmVySWQgPSBwcm9kdWN0LnNlbGxlcklkO1xuICBjb25zdCByZWNlaXZlciA9IHtcbiAgICB1c2VybmFtZTogc2VsbGVyLnVzZXJuYW1lLFxuICAgIGVtYWlsOiBzZWxsZXIuZW1haWwsXG4gIH07XG4gIGNvbnN0IG5vdGlmeUVtYWlsID0gbm90aWZpY2F0aW9uVGVtcGxhdGUoXG4gICAgcmVjZWl2ZXIudXNlcm5hbWUsXG4gICAgbmV3Ti5tZXNzYWdlLFxuICAgIG5ld04udHlwZSxcbiAgICBgJHtwcm9jZXNzLmVudi5TV0FHR0VSX1NFUlZFUn0vcmV2aWV3cy8ke3Jldmlldy5pZH1gXG4gICk7XG4gIHNlbmRFbWFpbChcbiAgICBlbWFpbENvbmZpZyh7XG4gICAgICBlbWFpbDogcmVjZWl2ZXIuZW1haWwsXG4gICAgICBzdWJqZWN0OiAnTm90aWZpY2F0aW9uICEhIHJldmlldycsXG4gICAgICBjb250ZW50OiBub3RpZnlFbWFpbCxcbiAgICB9KVxuICApO1xuICBhd2FpdCBub3RpZmljYXRpb25zLmNyZWF0ZShuZXdOKTtcbiAgbG9nTmV3UmV2aWV3KHJlcSwgcmV2aWV3KTtcbiAgY29uc3QgcHJvZHVjdFJldmlld3MgPSBhd2FpdCByZXZpZXdzLmZpbmRBbGwoe1xuICAgIHdoZXJlOiB7IHByb2R1Y3RJZDogcmVxLmJvZHkucHJvZHVjdElkIH0sXG4gICAgaW5jbHVkZToge1xuICAgICAgbW9kZWw6IHVzZXJzLFxuICAgICAgYXM6ICdyZXZpZXdlcicsXG4gICAgICBhdHRyaWJ1dGVzOiBbJ3VzZXJuYW1lJywgJ2VtYWlsJywgJ2F2YXRhciddLFxuICAgIH0sXG4gIH0pO1xuICBjb25zdCBBdlJhdGUgPSBwcm9kdWN0UmV2aWV3cy5yZWR1Y2UoKHN1bSwgUmV2aWV3KSA9PiBzdW0gKyBSZXZpZXcucmF0aW5nLCAwKVxuICAgIC8gcHJvZHVjdFJldmlld3MubGVuZ3RoO1xuICBjb25zdCByYXRpbmdDb3VudHMgPSBwcm9kdWN0UmV2aWV3cy5yZWR1Y2UoKGNvdW50cywgUmV2aWV3KSA9PiB7XG4gICAgY29uc3QgeyByYXRpbmcgfSA9IFJldmlldztcbiAgICBjb3VudHNbcmF0aW5nXSA9IChjb3VudHNbcmF0aW5nXSB8fCAwKSArIDE7XG4gICAgcmV0dXJuIGNvdW50cztcbiAgfSwge30pO1xuICBjb25zdCB0b3RhbFJhdGVzID0ge1xuICAgIDE6IHJhdGluZ0NvdW50c1sxXSB8fCAwLFxuICAgIDI6IHJhdGluZ0NvdW50c1syXSB8fCAwLFxuICAgIDM6IHJhdGluZ0NvdW50c1szXSB8fCAwLFxuICAgIDQ6IHJhdGluZ0NvdW50c1s0XSB8fCAwLFxuICAgIDU6IHJhdGluZ0NvdW50c1s1XSB8fCAwLFxuICAgIEF2UmF0ZSxcbiAgfTtcbiAgY29uc29sZS5sb2codG90YWxSYXRlcyk7XG5cbiAgcmVzLnN0YXR1cygyMDEpLmpzb24oe1xuICAgIC4uLnJldmlldy5kYXRhVmFsdWVzLFxuICAgIHJldmlld2VyOiB7XG4gICAgICB1c2VybmFtZTogc2VsbGVyLnVzZXJuYW1lLFxuICAgICAgZW1haWw6IHNlbGxlci5lbWFpbCxcbiAgICAgIGF2YXRhcjogc2VsbGVyLmF2YXRhcixcbiAgICB9LFxuICAgIHRvdGFsUmF0ZXMsXG4gIH0pO1xufTtcblxuZXhwb3J0IGNvbnN0IGdldFJldmlldyA9IGFzeW5jIChyZXEsIHJlcykgPT4ge1xuICB0cnkge1xuICAgIGNvbnN0IHJldmlldyA9IGF3YWl0IHJldmlld3MuZmluZE9uZSh7XG4gICAgICB3aGVyZTogeyBpZDogcmVxLnBhcmFtcy5pZCB9LFxuICAgIH0pO1xuICAgIGlmICghcmV2aWV3KSByZXR1cm4gcmVzLnN0YXR1cyg0MDQpLmpzb24oeyBtZXNzYWdlOiAnUmV2aWV3IG5vdCBmb3VuZCcgfSk7XG4gICAgdmlld09uZVJldmlldygpO1xuICAgIHJlcy5zdGF0dXMoMjAwKS5qc29uKHJldmlldyk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgcmVzLnN0YXR1cyg1MDApLmpzb24oeyBtZXNzYWdlOiBlcnJvci5tZXNzYWdlIH0pO1xuICB9XG59O1xuXG5leHBvcnQgY29uc3QgdXBkYXRlUmV2aWV3ID0gYXN5bmMgKHJlcSwgcmVzKSA9PiB7XG4gIHRyeSB7XG4gICAgY29uc3QgcmV2aWV3ID0gYXdhaXQgcmV2aWV3cy5maW5kT25lKHtcbiAgICAgIHdoZXJlOiB7IGlkOiByZXEucGFyYW1zLmlkIH0sXG4gICAgfSk7XG4gICAgaWYgKCFyZXZpZXcpIHJldHVybiByZXMuc3RhdHVzKDQwNCkuanNvbih7IG1lc3NhZ2U6ICdSZXZpZXcgbm90IGZvdW5kJyB9KTtcbiAgICBpZiAocmVxLnVzZXIuaWQgIT09IHJldmlldy51c2VySWQpIHtcbiAgICAgIHJldHVybiByZXNcbiAgICAgICAgLnN0YXR1cyg0MDMpXG4gICAgICAgIC5qc29uKHsgbWVzc2FnZTogJ09ubHkgb3duZXIgY2FuIHVwZGF0ZSB0aGlzIHJldmlldycgfSk7XG4gICAgfVxuICAgIGNvbnN0IHByb2R1Y3QgPSBhd2FpdCBwcm9kdWN0cy5maW5kT25lKHsgd2hlcmU6IHsgaWQ6IHJldmlldy5wcm9kdWN0SWQgfSB9KTtcbiAgICBjb25zdCBzZWxsZXIgPSBhd2FpdCB1c2Vycy5maW5kT25lKHsgd2hlcmU6IHsgaWQ6IHByb2R1Y3Quc2VsbGVySWQgfSB9KTtcbiAgICBjb25zdCBuZXdOb3RpZmljYXRpb24gPSB7XG4gICAgICBtZXNzYWdlOiAndGhlIHJldmlldyBvbiB5b3VyIHByb2R1Y3QgaGF2ZSBiZWVuIGRlbGV0ZWQnLFxuICAgICAgdHlwZTogJ3Byb2R1Y3QgcmV2aWV3JyxcbiAgICB9O1xuICAgIGNvbnN0IG5ld04gPSB7IC4uLm5ld05vdGlmaWNhdGlvbiB9O1xuICAgIG5ld04ucmVjZWl2ZXJJZCA9IHByb2R1Y3Quc2VsbGVySWQ7XG4gICAgY29uc3QgcmVjZWl2ZXIgPSB7XG4gICAgICB1c2VybmFtZTogc2VsbGVyLnVzZXJuYW1lLFxuICAgICAgZW1haWw6IHNlbGxlci5lbWFpbCxcbiAgICB9O1xuICAgIGNvbnN0IG5vdGlmeUVtYWlsID0gbm90aWZpY2F0aW9uVGVtcGxhdGUoXG4gICAgICByZWNlaXZlci51c2VybmFtZSxcbiAgICAgIG5ld04ubWVzc2FnZSxcbiAgICAgIG5ld04udHlwZSxcbiAgICAgIGAke3Byb2Nlc3MuZW52LlNXQUdHRVJfU0VSVkVSfS9yZXZpZXdzLyR7cmV2aWV3LmlkfWBcbiAgICApO1xuICAgIHNlbmRFbWFpbChcbiAgICAgIGVtYWlsQ29uZmlnKHtcbiAgICAgICAgZW1haWw6IHJlY2VpdmVyLmVtYWlsLFxuICAgICAgICBzdWJqZWN0OiAnTm90aWZpY2F0aW9uICEhIHJldmlldycsXG4gICAgICAgIGNvbnRlbnQ6IG5vdGlmeUVtYWlsLFxuICAgICAgfSlcbiAgICApO1xuICAgIGF3YWl0IG5vdGlmaWNhdGlvbnMuY3JlYXRlKG5ld04pO1xuICAgIGF3YWl0IHJldmlld3MudXBkYXRlKHsgLi4ucmVxLmJvZHkgfSwgeyB3aGVyZTogeyBpZDogcmV2aWV3LmlkIH0gfSk7XG4gICAgY29uc3QgbmV3UmV2aWV3ID0gYXdhaXQgcmV2aWV3cy5maW5kT25lKHsgd2hlcmU6IHsgaWQ6IHJldmlldy5pZCB9IH0pO1xuICAgIGxvZ1VwZGF0ZWRSZXZpZXcocmVxLCBuZXdSZXZpZXcpO1xuICAgIGNvbnN0IHByb2R1Y3RSZXZpZXdzID0gYXdhaXQgcmV2aWV3cy5maW5kQWxsKHtcbiAgICAgIHdoZXJlOiB7IHByb2R1Y3RJZDogbmV3UmV2aWV3LnByb2R1Y3RJZCB9LFxuICAgICAgaW5jbHVkZToge1xuICAgICAgICBtb2RlbDogdXNlcnMsXG4gICAgICAgIGFzOiAncmV2aWV3ZXInLFxuICAgICAgICBhdHRyaWJ1dGVzOiBbJ3VzZXJuYW1lJywgJ2VtYWlsJywgJ2F2YXRhciddLFxuICAgICAgfSxcbiAgICB9KTtcbiAgICBjb25zdCBBdlJhdGUgPSBwcm9kdWN0UmV2aWV3cy5yZWR1Y2UoKHN1bSwgUmV2aWV3KSA9PiBzdW0gKyBSZXZpZXcucmF0aW5nLCAwKVxuICAgICAgLyBwcm9kdWN0UmV2aWV3cy5sZW5ndGg7XG4gICAgY29uc3QgcmF0aW5nQ291bnRzID0gcHJvZHVjdFJldmlld3MucmVkdWNlKChjb3VudHMsIFJldmlldykgPT4ge1xuICAgICAgY29uc3QgeyByYXRpbmcgfSA9IFJldmlldztcbiAgICAgIGNvdW50c1tyYXRpbmddID0gKGNvdW50c1tyYXRpbmddIHx8IDApICsgMTtcbiAgICAgIHJldHVybiBjb3VudHM7XG4gICAgfSwge30pO1xuICAgIGNvbnN0IHRvdGFsUmF0ZXMgPSB7XG4gICAgICAxOiByYXRpbmdDb3VudHNbMV0gfHwgMCxcbiAgICAgIDI6IHJhdGluZ0NvdW50c1syXSB8fCAwLFxuICAgICAgMzogcmF0aW5nQ291bnRzWzNdIHx8IDAsXG4gICAgICA0OiByYXRpbmdDb3VudHNbNF0gfHwgMCxcbiAgICAgIDU6IHJhdGluZ0NvdW50c1s1XSB8fCAwLFxuICAgICAgQXZSYXRlLFxuICAgIH07XG4gICAgY29uc29sZS5sb2codG90YWxSYXRlcyk7XG4gICAgcmVzLnN0YXR1cygyMDApLmpzb24oe1xuICAgICAgLi4ubmV3UmV2aWV3LmRhdGFWYWx1ZXMsXG4gICAgICByZXZpZXdlcjoge1xuICAgICAgICB1c2VybmFtZTogc2VsbGVyLnVzZXJuYW1lLFxuICAgICAgICBlbWFpbDogc2VsbGVyLmVtYWlsLFxuICAgICAgICBhdmF0YXI6IHNlbGxlci5hdmF0YXIsXG4gICAgICB9LFxuICAgICAgdG90YWxSYXRlcyxcbiAgICB9KTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBsb2dSZXZpZXdFcnJvcihyZXEsIGVycm9yKTtcbiAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7IG1lc3NhZ2U6IGVycm9yLm1lc3NhZ2UgfSk7XG4gIH1cbn07XG5cbmV4cG9ydCBjb25zdCBkZWxldGVSZXZpZXcgPSBhc3luYyAocmVxLCByZXMpID0+IHtcbiAgdHJ5IHtcbiAgICBjb25zdCByZXZpZXcgPSBhd2FpdCByZXZpZXdzLmZpbmRPbmUoe1xuICAgICAgd2hlcmU6IHsgaWQ6IHJlcS5wYXJhbXMuaWQgfSxcbiAgICB9KTtcbiAgICBpZiAoIXJldmlldykgcmV0dXJuIHJlcy5zdGF0dXMoNDA0KS5qc29uKHsgbWVzc2FnZTogJ1JldmlldyBub3QgZm91bmQnIH0pO1xuICAgIGlmIChyZXEudXNlci5yb2xlICE9PSAnYWRtaW4nICYmIHJlcS51c2VyLmlkICE9PSByZXZpZXcudXNlcklkKSB7XG4gICAgICByZXR1cm4gcmVzXG4gICAgICAgIC5zdGF0dXMoNDAzKVxuICAgICAgICAuanNvbih7IG1lc3NhZ2U6ICdPbmx5IG93bmVyIG9yIGFkbWluIGNhbiBkZWxldGUgdGhpcyByZXZpZXcnIH0pO1xuICAgIH1cbiAgICBjb25zdCBwcm9kdWN0ID0gYXdhaXQgcHJvZHVjdHMuZmluZE9uZSh7IHdoZXJlOiB7IGlkOiByZXZpZXcucHJvZHVjdElkIH0gfSk7XG4gICAgY29uc3Qgc2VsbGVyID0gYXdhaXQgdXNlcnMuZmluZE9uZSh7IHdoZXJlOiB7IGlkOiBwcm9kdWN0LnNlbGxlcklkIH0gfSk7XG4gICAgY29uc3QgbmV3Tm90aWZpY2F0aW9uID0ge1xuICAgICAgbWVzc2FnZTogJ3RoZSByZXZpZXcgb24geW91ciBwcm9kdWN0IGhhdmUgYmVlbiB1cGRhdGVkJyxcbiAgICAgIHR5cGU6ICdwcm9kdWN0IHJldmlldycsXG4gICAgfTtcbiAgICBjb25zdCBuZXdOID0geyAuLi5uZXdOb3RpZmljYXRpb24gfTtcbiAgICBuZXdOLnJlY2VpdmVySWQgPSBwcm9kdWN0LnNlbGxlcklkO1xuICAgIGNvbnN0IHJlY2VpdmVyID0ge1xuICAgICAgdXNlcm5hbWU6IHNlbGxlci51c2VybmFtZSxcbiAgICAgIGVtYWlsOiBzZWxsZXIuZW1haWwsXG4gICAgfTtcbiAgICBjb25zdCBub3RpZnlFbWFpbCA9IG5vdGlmaWNhdGlvblRlbXBsYXRlKFxuICAgICAgcmVjZWl2ZXIudXNlcm5hbWUsXG4gICAgICBuZXdOLm1lc3NhZ2UsXG4gICAgICBuZXdOLnR5cGUsXG4gICAgICBgJHtwcm9jZXNzLmVudi5TV0FHR0VSX1NFUlZFUn0vcmV2aWV3cy8ke3Jldmlldy5pZH1gXG4gICAgKTtcbiAgICBzZW5kRW1haWwoXG4gICAgICBlbWFpbENvbmZpZyh7XG4gICAgICAgIGVtYWlsOiByZWNlaXZlci5lbWFpbCxcbiAgICAgICAgc3ViamVjdDogJ05vdGlmaWNhdGlvbiAhISByZXZpZXcnLFxuICAgICAgICBjb250ZW50OiBub3RpZnlFbWFpbCxcbiAgICAgIH0pXG4gICAgKTtcbiAgICBhd2FpdCBub3RpZmljYXRpb25zLmNyZWF0ZShuZXdOKTtcblxuICAgIGNvbnN0IGNvdW50ID0gYXdhaXQgcmV2aWV3cy5kZXN0cm95KHsgd2hlcmU6IHsgaWQ6IHJldmlldy5pZCB9IH0pO1xuICAgIGlmIChjb3VudCA9PT0gMCkge1xuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA0KS5qc29uKHsgbWVzc2FnZTogJ1JldmlldyBub3QgZm91bmQnIH0pO1xuICAgIH1cbiAgICBsb2dEZWxldGVkUmV2aWV3KHJlcSwgcmV2aWV3KTtcblxuICAgIGNvbnN0IHByb2R1Y3RSZXZpZXdzID0gYXdhaXQgcmV2aWV3cy5maW5kQWxsKHtcbiAgICAgIHdoZXJlOiB7IHByb2R1Y3RJZDogcHJvZHVjdC5pZCB9LFxuICAgIH0pO1xuICAgIGNvbnNvbGUubG9nKHByb2R1Y3RSZXZpZXdzKTtcbiAgICBjb25zdCBBdlJhdGUgPSBwcm9kdWN0UmV2aWV3cy5yZWR1Y2UoKHN1bSwgUmV2aWV3KSA9PiBzdW0gKyBSZXZpZXcucmF0aW5nLCAwKVxuICAgICAgLyBwcm9kdWN0UmV2aWV3cy5sZW5ndGg7XG4gICAgY29uc3QgcmF0aW5nQ291bnRzID0gcHJvZHVjdFJldmlld3MucmVkdWNlKChjb3VudHMsIFJldmlldykgPT4ge1xuICAgICAgY29uc3QgeyByYXRpbmcgfSA9IFJldmlldztcbiAgICAgIGNvdW50c1tyYXRpbmddID0gKGNvdW50c1tyYXRpbmddIHx8IDApICsgMTtcbiAgICAgIHJldHVybiBjb3VudHM7XG4gICAgfSwge30pO1xuICAgIGNvbnN0IHRvdGFsUmF0ZXMgPSB7XG4gICAgICAxOiByYXRpbmdDb3VudHNbMV0gfHwgMCxcbiAgICAgIDI6IHJhdGluZ0NvdW50c1syXSB8fCAwLFxuICAgICAgMzogcmF0aW5nQ291bnRzWzNdIHx8IDAsXG4gICAgICA0OiByYXRpbmdDb3VudHNbNF0gfHwgMCxcbiAgICAgIDU6IHJhdGluZ0NvdW50c1s1XSB8fCAwLFxuICAgICAgQXZSYXRlLFxuICAgIH07XG4gICAgcmVzLnN0YXR1cygyMDApLmpzb24oeyByZXZpZXcsIHRvdGFsUmF0ZXMgfSk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgbG9nUmV2aWV3RXJyb3IocmVxLCBlcnJvcik7XG4gICAgcmVzLnN0YXR1cyg1MDApLmpzb24oeyBtZXNzYWdlOiBlcnJvci5tZXNzYWdlIH0pO1xuICB9XG59O1xuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBRUEsSUFBQUEsT0FBQSxHQUFBQyxzQkFBQSxDQUFBQyxPQUFBO0FBQ0EsSUFBQUMsT0FBQSxHQUFBRCxPQUFBO0FBT0EsSUFBQUUsS0FBQSxHQUFBRixPQUFBO0FBQ0EsSUFBQUcsWUFBQSxHQUFBSCxPQUFBO0FBRUEsSUFBQUksYUFBQSxHQUFBSixPQUFBO0FBQ0EsSUFBQUssV0FBQSxHQUFBTixzQkFBQSxDQUFBQyxPQUFBO0FBQ0EsSUFBQU0sT0FBQSxHQUFBTixPQUFBO0FBZkE7QUFDQTs7QUFXQTs7QUFZQU8sZUFBTSxDQUFDQyxNQUFNLEVBQUU7QUFFUixNQUFNQyxXQUFXLEdBQUcsTUFBQUEsQ0FBT0MsR0FBRyxFQUFFQyxHQUFHLEtBQUs7RUFDN0MsSUFBQUMsbUJBQWdCLEVBQUNDLGVBQU8sQ0FBQyxDQUFDSCxHQUFHLEVBQUVDLEdBQUcsRUFBRSxNQUFNQSxHQUFHLENBQUNHLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQ0MsSUFBSSxDQUFDSixHQUFHLENBQUNDLGdCQUFnQixDQUFDLENBQUM7RUFDckYsSUFBQUksa0JBQVUsR0FBRTtBQUNkLENBQUM7QUFBQ0MsT0FBQSxDQUFBUixXQUFBLEdBQUFBLFdBQUE7QUFFSyxNQUFNUyxZQUFZLEdBQUcsTUFBQUEsQ0FBT1IsR0FBRyxFQUFFQyxHQUFHLEtBQUs7RUFDOUMsTUFBTVEsTUFBTSxHQUFHVCxHQUFHLENBQUNVLElBQUksQ0FBQ0MsRUFB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","map":{"version":3,"names":["_dotenv","_interopRequireDefault","require","_models","_mail","_emailConfig","_mailTemplate","_paginating","_review","dotenv","config","listReviews","req","res","paginatedResults","reviews","status","json","viewReview","exports","createReview","userId","user","id","product","products","findOne","where","body","productId","sellerId","message","seller","users","review","create","newNotification","type","newN","receiverId","receiver","username","email","notifyEmail","notificationTemplate","process","env","SWAGGER_SERVER","sendEmail","emailConfig","subject","content","notifications","logNewReview","productReviews","findAll","include","model","as","attributes","AvRate","reduce","sum","Review","rating","length","ratingCounts","counts","totalRates","console","log","dataValues","reviewer","avatar","getReview","params","viewOneReview","error","updateReview","update","newReview","logUpdatedReview","logReviewError","deleteReview","role","count","destroy","logDeletedReview"],"sourceRoot":"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/controllers/","sources":["reviews.contollers.js"],"sourcesContent":["/* eslint-disable import/named */\n// eslint-disable-next-line import/named\nimport dotenv from 'dotenv';\nimport {\n  // eslint-disable-next-line import/named\n  reviews,\n  products,\n  users,\n  notifications,\n} from '../database/models';\nimport { sendEmail } from '../helpers/mail';\nimport { emailConfig } from '../helpers/emailConfig';\n// eslint-disable-next-line import/named\nimport { notificationTemplate } from '../helpers/mailTemplate';\nimport paginatedResults from '../middlewares/paginating';\nimport {\n  logNewReview,\n  logDeletedReview,\n  logReviewError,\n  logUpdatedReview,\n  viewReview,\n  viewOneReview,\n} from '../loggers/review.logger';\n\ndotenv.config();\n\nexport const listReviews = async (req, res) => {\n  paginatedResults(reviews)(req, res, () => res.status(200).json(res.paginatedResults));\n  viewReview();\n};\n\nexport const createReview = async (req, res) => {\n  const userId = req.user.id;\n  const product = await products.findOne({ where: { id: req.body.productId } });\n  if (product && product.sellerId === userId) {\n    return res.status(403).json({ message: \"You can't review yourself\" });\n  }\n  const seller = await users.findOne({ where: { id: product.sellerId } });\n  const review = await reviews.create({ userId, ...req.body });\n  const newNotification = {\n    message: 'your product have been reviewed',\n    type: 'product review',\n  };\n  const newN = { ...newNotification };\n  newN.receiverId = product.sellerId;\n  const receiver = {\n    username: seller.username,\n    email: seller.email,\n  };\n  const notifyEmail = notificationTemplate(\n    receiver.username,\n    newN.message,\n    newN.type,\n    `${process.env.SWAGGER_SERVER}/reviews/${review.id}`\n  );\n  sendEmail(\n    emailConfig({\n      email: receiver.email,\n      subject: 'Notification !! review',\n      content: notifyEmail,\n    })\n  );\n  await notifications.create(newN);\n  logNewReview(req, review);\n  const productReviews = await reviews.findAll({\n    where: { productId: req.body.productId },\n    include: {\n      model: users,\n      as: 'reviewer',\n      attributes: ['username', 'email', 'avatar'],\n    },\n  });\n  const AvRate = productReviews.reduce((sum, Review) => sum + Review.rating, 0)\n    / productReviews.length;\n  const ratingCounts = productReviews.reduce((counts, Review) => {\n    const { rating } = Review;\n    counts[rating] = (counts[rating] || 0) + 1;\n    return counts;\n  }, {});\n  const totalRates = {\n    1: ratingCounts[1] || 0,\n    2: ratingCounts[2] || 0,\n    3: ratingCounts[3] || 0,\n    4: ratingCounts[4] || 0,\n    5: ratingCounts[5] || 0,\n    AvRate,\n  };\n  console.log(totalRates);\n\n  res.status(201).json({\n    ...review.dataValues,\n    reviewer: {\n      username: seller.username,\n      email: seller.email,\n      avatar: seller.avatar,\n    },\n    totalRates,\n  });\n};\n\nexport const getReview = async (req, res) => {\n  try {\n    const review = await reviews.findOne({\n      where: { id: req.params.id },\n    });\n    if (!review) return res.status(404).json({ message: 'Review not found' });\n    viewOneReview();\n    res.status(200).json(review);\n  } catch (error) {\n    res.status(500).json({ message: error.message });\n  }\n};\n\nexport const updateReview = async (req, res) => {\n  try {\n    const review = await reviews.findOne({\n      where: { id: req.params.id },\n    });\n    if (!review) return res.status(404).json({ message: 'Review not found' });\n    if (req.user.id !== review.userId) {\n      return res\n        .status(403)\n        .json({ message: 'Only owner can update this review' });\n    }\n    const product = await products.findOne({ where: { id: review.productId } });\n    const seller = await users.findOne({ where: { id: product.sellerId } });\n    const newNotification = {\n      message: 'the review on your product have been deleted',\n      type: 'product review',\n    };\n    const newN = { ...newNotification };\n    newN.receiverId = product.sellerId;\n    const receiver = {\n      username: seller.username,\n      email: seller.email,\n    };\n    const notifyEmail = notificationTemplate(\n      receiver.username,\n      newN.message,\n      newN.type,\n      `${process.env.SWAGGER_SERVER}/reviews/${review.id}`\n    );\n    sendEmail(\n      emailConfig({\n        email: receiver.email,\n        subject: 'Notification !! review',\n        content: notifyEmail,\n      })\n    );\n    await notifications.create(newN);\n    await reviews.update({ ...req.body }, { where: { id: review.id } });\n    const newReview = await reviews.findOne({ where: { id: review.id } });\n    logUpdatedReview(req, newReview);\n    const productReviews = await reviews.findAll({\n      where: { productId: newReview.productId },\n      include: {\n        model: users,\n        as: 'reviewer',\n        attributes: ['username', 'email', 'avatar'],\n      },\n    });\n    const AvRate = productReviews.reduce((sum, Review) => sum + Review.rating, 0)\n      / productReviews.length;\n    const ratingCounts = productReviews.reduce((counts, Review) => {\n      const { rating } = Review;\n      counts[rating] = (counts[rating] || 0) + 1;\n      return counts;\n    }, {});\n    const totalRates = {\n      1: ratingCounts[1] || 0,\n      2: ratingCounts[2] || 0,\n      3: ratingCounts[3] || 0,\n      4: ratingCounts[4] || 0,\n      5: ratingCounts[5] || 0,\n      AvRate,\n    };\n    console.log(totalRates);\n    res.status(200).json({\n      ...newReview.dataValues,\n      reviewer: {\n        username: seller.username,\n        email: seller.email,\n        avatar: seller.avatar,\n      },\n      totalRates,\n    });\n  } catch (error) {\n    logReviewError(req, error);\n    res.status(500).json({ message: error.message });\n  }\n};\n\nexport const deleteReview = async (req, res) => {\n  try {\n    const review = await reviews.findOne({\n      where: { id: req.params.id },\n    });\n    if (!review) return res.status(404).json({ message: 'Review not found' });\n    if (req.user.role !== 'admin' && req.user.id !== review.userId) {\n      return res\n        .status(403)\n        .json({ message: 'Only owner or admin can delete this review' });\n    }\n    const product = await products.findOne({ where: { id: review.productId } });\n    const seller = await users.findOne({ where: { id: product.sellerId } });\n    const newNotification = {\n      message: 'the review on your product have been updated',\n      type: 'product review',\n    };\n    const newN = { ...newNotification };\n    newN.receiverId = product.sellerId;\n    const receiver = {\n      username: seller.username,\n      email: seller.email,\n    };\n    const notifyEmail = notificationTemplate(\n      receiver.username,\n      newN.message,\n      newN.type,\n      `${process.env.SWAGGER_SERVER}/reviews/${review.id}`\n    );\n    sendEmail(\n      emailConfig({\n        email: receiver.email,\n        subject: 'Notification !! review',\n        content: notifyEmail,\n      })\n    );\n    await notifications.create(newN);\n\n    const count = await reviews.destroy({ where: { id: review.id } });\n    if (count === 0) {\n      return res.status(404).json({ message: 'Review not found' });\n    }\n    logDeletedReview(req, review);\n\n    const productReviews = await reviews.findAll({\n      where: { productId: product.id },\n    });\n    console.log(productReviews);\n    const AvRate = productReviews.reduce((sum, Review) => sum + Review.rating, 0)\n      / productReviews.length;\n    const ratingCounts = productReviews.reduce((counts, Review) => {\n      const { rating } = Review;\n      counts[rating] = (counts[rating] || 0) + 1;\n      return counts;\n    }, {});\n    const totalRates = {\n      1: ratingCounts[1] || 0,\n      2: ratingCounts[2] || 0,\n      3: ratingCounts[3] || 0,\n      4: ratingCounts[4] || 0,\n      5: ratingCounts[5] || 0,\n      AvRate,\n    };\n    res.status(200).json({ review, totalRates });\n  } catch (error) {\n    logReviewError(req, error);\n    res.status(500).json({ message: error.message });\n  }\n};\n"],"mappings":"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"}},"mtime":1685643189439},"{\"assumptions\":{},\"sourceRoot\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/loggers/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"filename\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/loggers/review.logger.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/node_modules/babel-plugin-add-module-exports/lib/index.js\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-runtime\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"regenerator\":true},\"externalDependencies\":[]},{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.21.0:development":{"value":{"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.viewReview = exports.viewOneReview = exports.logUpdatedReview = exports.logReviewError = exports.logNewReview = exports.logDeletedReview = void 0;\nvar _logger = _interopRequireDefault(require(\"../configs/logger\"));\nvar _models = require(\"../database/models\");\n/* eslint-disable import/named */\n\nconst logNewReview = async (req, data) => {\n  const logData = {\n    level: 'info',\n    message: `User ${req.user.email} created a new review`,\n    userId: req.user.id,\n    metadata: {\n      review: data\n    }\n  };\n  await _models.Log.create(logData);\n  _logger.default.info(logData.message);\n};\nexports.logNewReview = logNewReview;\nconst viewReview = async () => {\n  _logger.default.info('User  viewed all  reviews');\n};\nexports.viewReview = viewReview;\nconst viewOneReview = async () => {\n  _logger.default.info('User  viewed a single review');\n};\nexports.viewOneReview = viewOneReview;\nconst logDeletedReview = async (req, data) => {\n  const logData = {\n    level: 'info',\n    message: `User ${req.user.email} deleted review ${req.params.id}`,\n    userId: req.user.id,\n    metadata: {\n      deleteReview: data\n    }\n  };\n  await _models.Log.create(logData);\n  _logger.default.info(logData.message);\n};\nexports.logDeletedReview = logDeletedReview;\nconst logUpdatedReview = async (req, data) => {\n  const logData = {\n    level: 'info',\n    message: `User ${req.user.email} updated review ${req.params.id}`,\n    userId: req.user.id,\n    metadata: {\n      updatedWishlist: data\n    }\n  };\n  await _models.Log.create(logData);\n  _logger.default.info(logData.message);\n};\nexports.logUpdatedReview = logUpdatedReview;\nconst logReviewError = async (req, error) => {\n  const logData = {\n    level: 'error',\n    message: error.message,\n    userId: req.user.id,\n    metadata: {\n      error\n    }\n  };\n  await _models.Log.create(logData);\n  _logger.default.error(logData.message);\n};\nexports.logReviewError = logReviewError;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfbG9nZ2VyIiwiX2ludGVyb3BSZXF1aXJlRGVmYXVsdCIsInJlcXVpcmUiLCJfbW9kZWxzIiwibG9nTmV3UmV2aWV3IiwicmVxIiwiZGF0YSIsImxvZ0RhdGEiLCJsZXZlbCIsIm1lc3NhZ2UiLCJ1c2VyIiwiZW1haWwiLCJ1c2VySWQiLCJpZCIsIm1ldGFkYXRhIiwicmV2aWV3IiwiTG9nIiwiY3JlYXRlIiwibG9nZ2VyIiwiaW5mbyIsImV4cG9ydHMiLCJ2aWV3UmV2aWV3Iiwidmlld09uZVJldmlldyIsImxvZ0RlbGV0ZWRSZXZpZXciLCJwYXJhbXMiLCJkZWxldGVSZXZpZXciLCJsb2dVcGRhdGVkUmV2aWV3IiwidXBkYXRlZFdpc2hsaXN0IiwibG9nUmV2aWV3RXJyb3IiLCJlcnJvciJdLCJzb3VyY2VSb290IjoiL1VzZXJzL2FuZGVsYXJ3YW5kYS9EZXNrdG9wL2UtY29tbS10ZWFtLWJyb2dyYW1tZXJzLWJuL3NyYy9sb2dnZXJzLyIsInNvdXJjZXMiOlsicmV2aWV3LmxvZ2dlci5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKiBlc2xpbnQtZGlzYWJsZSBpbXBvcnQvbmFtZWQgKi9cblxuaW1wb3J0IGxvZ2dlciBmcm9tICcuLi9jb25maWdzL2xvZ2dlcic7XG5pbXBvcnQgeyBMb2cgfSBmcm9tICcuLi9kYXRhYmFzZS9tb2RlbHMnO1xuXG5leHBvcnQgY29uc3QgbG9nTmV3UmV2aWV3ID0gYXN5bmMgKHJlcSwgZGF0YSkgPT4ge1xuICBjb25zdCBsb2dEYXRhID0ge1xuICAgIGxldmVsOiAnaW5mbycsXG4gICAgbWVzc2FnZTogYFVzZXIgJHtyZXEudXNlci5lbWFpbH0gY3JlYXRlZCBhIG5ldyByZXZpZXdgLFxuICAgIHVzZXJJZDogcmVxLnVzZXIuaWQsXG4gICAgbWV0YWRhdGE6IHsgcmV2aWV3OiBkYXRhIH0sXG4gIH07XG4gIGF3YWl0IExvZy5jcmVhdGUobG9nRGF0YSk7XG4gIGxvZ2dlci5pbmZvKGxvZ0RhdGEubWVzc2FnZSk7XG59O1xuZXhwb3J0IGNvbnN0IHZpZXdSZXZpZXcgPSBhc3luYyAoKSA9PiB7XG4gIGxvZ2dlci5pbmZvKCdVc2VyICB2aWV3ZWQgYWxsICByZXZpZXdzJywpO1xufTtcbmV4cG9ydCBjb25zdCB2aWV3T25lUmV2aWV3ID0gYXN5bmMgKCkgPT4ge1xuICBsb2dnZXIuaW5mbygnVXNlciAgdmlld2VkIGEgc2luZ2xlIHJldmlldycsKTtcbn07XG5leHBvcnQgY29uc3QgbG9nRGVsZXRlZFJldmlldyA9IGFzeW5jIChyZXEsIGRhdGEpID0+IHtcbiAgY29uc3QgbG9nRGF0YSA9IHtcbiAgICBsZXZlbDogJ2luZm8nLFxuICAgIG1lc3NhZ2U6IGBVc2VyICR7cmVxLnVzZXIuZW1haWx9IGRlbGV0ZWQgcmV2aWV3ICR7cmVxLnBhcmFtcy5pZH1gLFxuICAgIHVzZXJJZDogcmVxLnVzZXIuaWQsXG4gICAgbWV0YWRhdGE6IHsgZGVsZXRlUmV2aWV3OiBkYXRhIH0sXG4gIH07XG4gIGF3YWl0IExvZy5jcmVhdGUobG9nRGF0YSk7XG4gIGxvZ2dlci5pbmZvKGxvZ0RhdGEubWVzc2FnZSk7XG59O1xuXG5leHBvcnQgY29uc3QgbG9nVXBkYXRlZFJldmlldyA9IGFzeW5jIChyZXEsIGRhdGEpID0+IHtcbiAgY29uc3QgbG9nRGF0YSA9IHtcbiAgICBsZXZlbDogJ2luZm8nLFxuICAgIG1lc3NhZ2U6IGBVc2VyICR7cmVxLnVzZXIuZW1haWx9IHVwZGF0ZWQgcmV2aWV3ICR7cmVxLnBhcmFtcy5pZH1gLFxuICAgIHVzZXJJZDogcmVxLnVzZXIuaWQsXG4gICAgbWV0YWRhdGE6IHsgdXBkYXRlZFdpc2hsaXN0OiBkYXRhIH0sXG4gIH07XG4gIGF3YWl0IExvZy5jcmVhdGUobG9nRGF0YSk7XG4gIGxvZ2dlci5pbmZvKGxvZ0RhdGEubWVzc2FnZSk7XG59O1xuXG5leHBvcnQgY29uc3QgbG9nUmV2aWV3RXJyb3IgPSBhc3luYyAocmVxLCBlcnJvcikgPT4ge1xuICBjb25zdCBsb2dEYXRhID0ge1xuICAgIGxldmVsOiAnZXJyb3InLFxuICAgIG1lc3NhZ2U6IGVycm9yLm1lc3NhZ2UsXG4gICAgdXNlcklkOiByZXEudXNlci5pZCxcbiAgICBtZXRhZGF0YTogeyBlcnJvciB9LFxuICB9O1xuICBhd2FpdCBMb2cuY3JlYXRlKGxvZ0RhdGEpO1xuICBsb2dnZXIuZXJyb3IobG9nRGF0YS5tZXNzYWdlKTtcbn07XG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFFQSxJQUFBQSxPQUFBLEdBQUFDLHNCQUFBLENBQUFDLE9BQUE7QUFDQSxJQUFBQyxPQUFBLEdBQUFELE9BQUE7QUFIQTs7QUFLTyxNQUFNRSxZQUFZLEdBQUcsTUFBQUEsQ0FBT0MsR0FBRyxFQUFFQyxJQUFJLEtBQUs7RUFDL0MsTUFBTUMsT0FBTyxHQUFHO0lBQ2RDLEtBQUssRUFBRSxNQUFNO0lBQ2JDLE9BQU8sRUFBRyxRQUFPSixHQUFHLENBQUNLLElBQUksQ0FBQ0MsS0FBTSx1QkFBc0I7SUFDdERDLE1BQU0sRUFBRVAsR0FBRyxDQUFDSyxJQUFJLENBQUNHLEVBQUU7SUFDbkJDLFFBQVEsRUFBRTtNQUFFQyxNQUFNLEVBQUVUO0lBQUs7RUFDM0IsQ0FBQztFQUNELE1BQU1VLFdBQUcsQ0FBQ0MsTUFBTSxDQUFDVixPQUFPLENBQUM7RUFDekJXLGVBQU0sQ0FBQ0MsSUFBSSxDQUFDWixPQUFPLENBQUNFLE9BQU8sQ0FBQztBQUM5QixDQUFDO0FBQUNXLE9BQUEsQ0FBQWhCLFlBQUEsR0FBQUEsWUFBQTtBQUNLLE1BQU1pQixVQUFVLEdBQUcsTUFBQUEsQ0FBQSxLQUFZO0VBQ3BDSCxlQUFNLENBQUNDLElBQUksQ0FBQywyQkFBMkIsQ0FBRTtBQUMzQyxDQUFDO0FBQUNDLE9BQUEsQ0FBQUMsVUFBQSxHQUFBQSxVQUFBO0FBQ0ssTUFBTUMsYUFBYSxHQUFHLE1BQUFBLENBQUEsS0FBWTtFQUN2Q0osZUFBTSxDQUFDQyxJQUFJLENBQUMsOEJBQThCLENBQUU7QUFDOUMsQ0FBQztBQUFDQyxPQUFBLENBQUFFLGFBQUEsR0FBQUEsYUFBQTtBQUNLLE1BQU1DLGdCQUFnQixHQUFHLE1BQUFBLENBQU9sQixHQUFHLEVBQUVDLElBQUksS0FBSztFQUNuRCxNQUFNQyxPQUFPLEdBQUc7SUFDZEMsS0FBSyxFQUFFLE1BQU07SUFDYkMsT0FBTyxFQUFHLFFBQU9KLEdBQUcsQ0FBQ0ssSUFBSSxDQUFDQyxLQUFNLG1CQUFrQk4sR0FBRyxDQUFDbUIsTUFBTSxDQUFDWCxFQUFHLEVBQUM7SUFDakVELE1BQU0sRUFBRVAsR0FBRyxDQUFDSyxJQUFJLENBQUNHLEVBQUU7SUFDbkJDLFFBQVEsRUFBRTtNQUFFVyxZQUFZLEVBQUVuQjtJQUFLO0VBQ2pDLENBQUM7RUFDRCxNQUFNVSxXQUFHLENBQUNDLE1BQU0sQ0FBQ1YsT0FBTyxDQUFDO0VBQ3pCVyxlQUFNLENBQUNDLElBQUksQ0FBQ1osT0FBTyxDQUFDRSxPQUFPLENBQUM7QUFDOUIsQ0FBQztBQUFDVyxPQUFBLENBQUFHLGdCQUFBLEdBQUFBLGdCQUFBO0FBRUssTUFBTUcsZ0JBQWdCLEdBQUcsTUFBQUEsQ0FBT3JCLEdBQUcsRUFBRUMsSUFBSSxLQUFLO0VBQ25ELE1BQU1DLE9BQU8sR0FBRztJQUNkQyxLQUFLLEVBQUUsTUFBTTtJQUNiQyxPQUFPLEVBQUcsUUFBT0osR0FBRyxDQUFDSyxJQUFJLENBQUNDLEtBQU0sbUJBQWtCTixHQUFHLENBQUNtQixNQUFNLENBQUNYLEVBQUcsRUFBQztJQUNqRUQsTUFBTSxFQUFFUCxHQUFHLENBQUNLLElBQUksQ0FBQ0csRUFBRTtJQUNuQkMsUUFBUSxFQUFFO01BQUVhLGVBQWUsRUFBRXJCO0lBQUs7RUFDcEMsQ0FBQztFQUNELE1BQU1VLFdBQUcsQ0FBQ0MsTUFBTSxDQUFDVixPQUFPLENBQUM7RUFDekJXLGVBQU0sQ0FBQ0MsSUFBSSxDQUFDWixPQUFPLENBQUNFLE9BQU8sQ0FBQztBQUM5QixDQUFDO0FBQUNXLE9BQUEsQ0FBQU0sZ0JBQUEsR0FBQUEsZ0JBQUE7QUFFSyxNQUFNRSxjQUFjLEdBQUcsTUFBQUEsQ0FBT3ZCLEdBQUcsRUFBRXdCLEtBQUssS0FBSztFQUNsRCxNQUFNdEIsT0FBTyxHQUFHO0lBQ2RDLEtBQUssRUFBRSxPQUFPO0lBQ2RDLE9BQU8sRUFBRW9CLEtBQUssQ0FBQ3BCLE9BQU87SUFDdEJHLE1BQU0sRUFBRVAsR0FBRyxDQUFDSyxJQUFJLENBQUNHLEVBQUU7SUFDbkJDLFFBQVEsRUFBRTtNQUFFZTtJQUFNO0VBQ3BCLENBQUM7RUFDRCxNQUFNYixXQUFHLENBQUNDLE1BQU0sQ0FBQ1YsT0FBTyxDQUFDO0VBQ3pCVyxlQUFNLENBQUNXLEtBQUssQ0FBQ3RCLE9BQU8sQ0FBQ0UsT0FBTyxDQUFDO0FBQy9CLENBQUM7QUFBQ1csT0FBQSxDQUFBUSxjQUFBLEdBQUFBLGNBQUEifQ==","map":{"version":3,"names":["_logger","_interopRequireDefault","require","_models","logNewReview","req","data","logData","level","message","user","email","userId","id","metadata","review","Log","create","logger","info","exports","viewReview","viewOneReview","logDeletedReview","params","deleteReview","logUpdatedReview","updatedWishlist","logReviewError","error"],"sourceRoot":"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/loggers/","sources":["review.logger.js"],"sourcesContent":["/* eslint-disable import/named */\n\nimport logger from '../configs/logger';\nimport { Log } from '../database/models';\n\nexport const logNewReview = async (req, data) => {\n  const logData = {\n    level: 'info',\n    message: `User ${req.user.email} created a new review`,\n    userId: req.user.id,\n    metadata: { review: data },\n  };\n  await Log.create(logData);\n  logger.info(logData.message);\n};\nexport const viewReview = async () => {\n  logger.info('User  viewed all  reviews',);\n};\nexport const viewOneReview = async () => {\n  logger.info('User  viewed a single review',);\n};\nexport const logDeletedReview = async (req, data) => {\n  const logData = {\n    level: 'info',\n    message: `User ${req.user.email} deleted review ${req.params.id}`,\n    userId: req.user.id,\n    metadata: { deleteReview: data },\n  };\n  await Log.create(logData);\n  logger.info(logData.message);\n};\n\nexport const logUpdatedReview = async (req, data) => {\n  const logData = {\n    level: 'info',\n    message: `User ${req.user.email} updated review ${req.params.id}`,\n    userId: req.user.id,\n    metadata: { updatedWishlist: data },\n  };\n  await Log.create(logData);\n  logger.info(logData.message);\n};\n\nexport const logReviewError = async (req, error) => {\n  const logData = {\n    level: 'error',\n    message: error.message,\n    userId: req.user.id,\n    metadata: { error },\n  };\n  await Log.create(logData);\n  logger.error(logData.message);\n};\n"],"mappings":";;;;;;;AAEA,IAAAA,OAAA,GAAAC,sBAAA,CAAAC,OAAA;AACA,IAAAC,OAAA,GAAAD,OAAA;AAHA;;AAKO,MAAME,YAAY,GAAG,MAAAA,CAAOC,GAAG,EAAEC,IAAI,KAAK;EAC/C,MAAMC,OAAO,GAAG;IACdC,KAAK,EAAE,MAAM;IACbC,OAAO,EAAG,QAAOJ,GAAG,CAACK,IAAI,CAACC,KAAM,uBAAsB;IACtDC,MAAM,EAAEP,GAAG,CAACK,IAAI,CAACG,EAAE;IACnBC,QAAQ,EAAE;MAAEC,MAAM,EAAET;IAAK;EAC3B,CAAC;EACD,MAAMU,WAAG,CAACC,MAAM,CAACV,OAAO,CAAC;EACzBW,eAAM,CAACC,IAAI,CAACZ,OAAO,CAACE,OAAO,CAAC;AAC9B,CAAC;AAACW,OAAA,CAAAhB,YAAA,GAAAA,YAAA;AACK,MAAMiB,UAAU,GAAG,MAAAA,CAAA,KAAY;EACpCH,eAAM,CAACC,IAAI,CAAC,2BAA2B,CAAE;AAC3C,CAAC;AAACC,OAAA,CAAAC,UAAA,GAAAA,UAAA;AACK,MAAMC,aAAa,GAAG,MAAAA,CAAA,KAAY;EACvCJ,eAAM,CAACC,IAAI,CAAC,8BAA8B,CAAE;AAC9C,CAAC;AAACC,OAAA,CAAAE,aAAA,GAAAA,aAAA;AACK,MAAMC,gBAAgB,GAAG,MAAAA,CAAOlB,GAAG,EAAEC,IAAI,KAAK;EACnD,MAAMC,OAAO,GAAG;IACdC,KAAK,EAAE,MAAM;IACbC,OAAO,EAAG,QAAOJ,GAAG,CAACK,IAAI,CAACC,KAAM,mBAAkBN,GAAG,CAACmB,MAAM,CAACX,EAAG,EAAC;IACjED,MAAM,EAAEP,GAAG,CAACK,IAAI,CAACG,EAAE;IACnBC,QAAQ,EAAE;MAAEW,YAAY,EAAEnB;IAAK;EACjC,CAAC;EACD,MAAMU,WAAG,CAACC,MAAM,CAACV,OAAO,CAAC;EACzBW,eAAM,CAACC,IAAI,CAACZ,OAAO,CAACE,OAAO,CAAC;AAC9B,CAAC;AAACW,OAAA,CAAAG,gBAAA,GAAAA,gBAAA;AAEK,MAAMG,gBAAgB,GAAG,MAAAA,CAAOrB,GAAG,EAAEC,IAAI,KAAK;EACnD,MAAMC,OAAO,GAAG;IACdC,KAAK,EAAE,MAAM;IACbC,OAAO,EAAG,QAAOJ,GAAG,CAACK,IAAI,CAACC,KAAM,mBAAkBN,GAAG,CAACmB,MAAM,CAACX,EAAG,EAAC;IACjED,MAAM,EAAEP,GAAG,CAACK,IAAI,CAACG,EAAE;IACnBC,QAAQ,EAAE;MAAEa,eAAe,EAAErB;IAAK;EACpC,CAAC;EACD,MAAMU,WAAG,CAACC,MAAM,CAACV,OAAO,CAAC;EACzBW,eAAM,CAACC,IAAI,CAACZ,OAAO,CAACE,OAAO,CAAC;AAC9B,CAAC;AAACW,OAAA,CAAAM,gBAAA,GAAAA,gBAAA;AAEK,MAAME,cAAc,GAAG,MAAAA,CAAOvB,GAAG,EAAEwB,KAAK,KAAK;EAClD,MAAMtB,OAAO,GAAG;IACdC,KAAK,EAAE,OAAO;IACdC,OAAO,EAAEoB,KAAK,CAACpB,OAAO;IACtBG,MAAM,EAAEP,GAAG,CAACK,IAAI,CAACG,EAAE;IACnBC,QAAQ,EAAE;MAAEe;IAAM;EACpB,CAAC;EACD,MAAMb,WAAG,CAACC,MAAM,CAACV,OAAO,CAAC;EACzBW,eAAM,CAACW,KAAK,CAACtB,OAAO,CAACE,OAAO,CAAC;AAC/B,CAAC;AAACW,OAAA,CAAAQ,cAAA,GAAAA,cAAA"}},"mtime":1682148437943},"{\"assumptions\":{},\"sourceRoot\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/routes/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"filename\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/routes/checkout.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/node_modules/babel-plugin-add-module-exports/lib/index.js\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-runtime\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"regenerator\":true},\"externalDependencies\":[]},{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.21.0:development":{"value":{"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _express = _interopRequireDefault(require(\"express\"));\nvar _checkout = require(\"../controllers/checkout\");\nvar _catchError = _interopRequireDefault(require(\"../middlewares/catchError\"));\nvar _verifyToken = _interopRequireDefault(require(\"../middlewares/verifyToken\"));\nvar _Checkrole = _interopRequireDefault(require(\"../middlewares/Checkrole\"));\nvar _checkoutValidate = _interopRequireDefault(require(\"../middlewares/checkoutValidate\"));\nconst router = _express.default.Router();\nrouter.get('/', _verifyToken.default, (0, _catchError.default)(_checkout.getCurrentUserOrders));\nrouter.post('/', _verifyToken.default, _checkoutValidate.default, (0, _catchError.default)(_checkout.createOrder));\nrouter.get('/orders', _verifyToken.default, (0, _Checkrole.default)(['admin']), (0, _catchError.default)(_checkout.getAllOrders));\nrouter.get('/:order_id', _verifyToken.default, _checkout.viewOrder);\nrouter.patch('/:order_id', _verifyToken.default, _checkoutValidate.default, (0, _catchError.default)(_checkout.updateOrder));\nrouter.delete('/:order_id', _verifyToken.default, (0, _catchError.default)(_checkout.deleteOrder));\nvar _default = router;\nexports.default = _default;\nmodule.exports = exports.default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfZXhwcmVzcyIsIl9pbnRlcm9wUmVxdWlyZURlZmF1bHQiLCJyZXF1aXJlIiwiX2NoZWNrb3V0IiwiX2NhdGNoRXJyb3IiLCJfdmVyaWZ5VG9rZW4iLCJfQ2hlY2tyb2xlIiwiX2NoZWNrb3V0VmFsaWRhdGUiLCJyb3V0ZXIiLCJleHByZXNzIiwiUm91dGVyIiwiZ2V0IiwiaXNBdXRoZW50aWNhdGVkIiwiY2F0Y2hFcnJvciIsImdldEN1cnJlbnRVc2VyT3JkZXJzIiwicG9zdCIsImNoZWNrb3V0VmF0aWRhdGUiLCJjcmVhdGVPcmRlciIsImNoZWNrUm9sZSIsImdldEFsbE9yZGVycyIsInZpZXdPcmRlciIsInBhdGNoIiwidXBkYXRlT3JkZXIiLCJkZWxldGUiLCJkZWxldGVPcmRlciIsIl9kZWZhdWx0IiwiZXhwb3J0cyIsImRlZmF1bHQiLCJtb2R1bGUiXSwic291cmNlUm9vdCI6Ii9Vc2Vycy9hbmRlbGFyd2FuZGEvRGVza3RvcC9lLWNvbW0tdGVhbS1icm9ncmFtbWVycy1ibi9zcmMvcm91dGVzLyIsInNvdXJjZXMiOlsiY2hlY2tvdXQuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGV4cHJlc3MgZnJvbSAnZXhwcmVzcyc7XG5pbXBvcnQge1xuICBjcmVhdGVPcmRlciwgZ2V0Q3VycmVudFVzZXJPcmRlcnMsIHVwZGF0ZU9yZGVyLCBkZWxldGVPcmRlciwgdmlld09yZGVyLCBnZXRBbGxPcmRlcnMsXG59IGZyb20gJy4uL2NvbnRyb2xsZXJzL2NoZWNrb3V0JztcbmltcG9ydCBjYXRjaEVycm9yIGZyb20gJy4uL21pZGRsZXdhcmVzL2NhdGNoRXJyb3InO1xuaW1wb3J0IGlzQXV0aGVudGljYXRlZCBmcm9tICcuLi9taWRkbGV3YXJlcy92ZXJpZnlUb2tlbic7XG5pbXBvcnQgY2hlY2tSb2xlIGZyb20gJy4uL21pZGRsZXdhcmVzL0NoZWNrcm9sZSc7XG5pbXBvcnQgY2hlY2tvdXRWYXRpZGF0ZSBmcm9tICcuLi9taWRkbGV3YXJlcy9jaGVja291dFZhbGlkYXRlJztcblxuY29uc3Qgcm91dGVyID0gZXhwcmVzcy5Sb3V0ZXIoKTtcblxucm91dGVyLmdldChcbiAgJy8nLFxuICBpc0F1dGhlbnRpY2F0ZWQsXG4gIGNhdGNoRXJyb3IoZ2V0Q3VycmVudFVzZXJPcmRlcnMpXG4pO1xuXG5yb3V0ZXIucG9zdChcbiAgJy8nLFxuICBpc0F1dGhlbnRpY2F0ZWQsXG4gIGNoZWNrb3V0VmF0aWRhdGUsXG4gIGNhdGNoRXJyb3IoY3JlYXRlT3JkZXIpXG4pO1xuXG5yb3V0ZXIuZ2V0KCcvb3JkZXJzJywgaXNBdXRoZW50aWNhdGVkLCBjaGVja1JvbGUoWydhZG1pbiddKSwgY2F0Y2hFcnJvcihnZXRBbGxPcmRlcnMpKTtcblxucm91dGVyLmdldCgnLzpvcmRlcl9pZCcsIGlzQXV0aGVudGljYXRlZCwgdmlld09yZGVyKTtcbnJvdXRlci5wYXRjaCgnLzpvcmRlcl9pZCcsIGlzQXV0aGVudGljYXRlZCwgY2hlY2tvdXRWYXRpZGF0ZSwgY2F0Y2hFcnJvcih1cGRhdGVPcmRlcikpO1xucm91dGVyLmRlbGV0ZSgnLzpvcmRlcl9pZCcsIGlzQXV0aGVudGljYXRlZCwgY2F0Y2hFcnJvcihkZWxldGVPcmRlcikpO1xuXG5leHBvcnQgZGVmYXVsdCByb3V0ZXI7XG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBQSxJQUFBQSxRQUFBLEdBQUFDLHNCQUFBLENBQUFDLE9BQUE7QUFDQSxJQUFBQyxTQUFBLEdBQUFELE9BQUE7QUFHQSxJQUFBRSxXQUFBLEdBQUFILHNCQUFBLENBQUFDLE9BQUE7QUFDQSxJQUFBRyxZQUFBLEdBQUFKLHNCQUFBLENBQUFDLE9BQUE7QUFDQSxJQUFBSSxVQUFBLEdBQUFMLHNCQUFBLENBQUFDLE9BQUE7QUFDQSxJQUFBSyxpQkFBQSxHQUFBTixzQkFBQSxDQUFBQyxPQUFBO0FBRUEsTUFBTU0sTUFBTSxHQUFHQyxnQkFBTyxDQUFDQyxNQUFNLEVBQUU7QUFFL0JGLE1BQU0sQ0FBQ0csR0FBRyxDQUNSLEdBQUcsRUFDSEMsb0JBQWUsRUFDZixJQUFBQyxtQkFBVSxFQUFDQyw4QkFBb0IsQ0FBQyxDQUNqQztBQUVETixNQUFNLENBQUNPLElBQUksQ0FDVCxHQUFHLEVBQ0hILG9CQUFlLEVBQ2ZJLHlCQUFnQixFQUNoQixJQUFBSCxtQkFBVSxFQUFDSSxxQkFBVyxDQUFDLENBQ3hCO0FBRURULE1BQU0sQ0FBQ0csR0FBRyxDQUFDLFNBQVMsRUFBRUMsb0JBQWUsRUFBRSxJQUFBTSxrQkFBUyxFQUFDLENBQUMsT0FBTyxDQUFDLENBQUMsRUFBRSxJQUFBTCxtQkFBVSxFQUFDTSxzQkFBWSxDQUFDLENBQUM7QUFFdEZYLE1BQU0sQ0FBQ0csR0FBRyxDQUFDLFlBQVksRUFBRUMsb0JBQWUsRUFBRVEsbUJBQVMsQ0FBQztBQUNwRFosTUFBTSxDQUFDYSxLQUFLLENBQUMsWUFBWSxFQUFFVCxvQkFBZSxFQUFFSSx5QkFBZ0IsRUFBRSxJQUFBSCxtQkFBVSxFQUFDUyxxQkFBVyxDQUFDLENBQUM7QUFDdEZkLE1BQU0sQ0FBQ2UsTUFBTSxDQUFDLFlBQVksRUFBRVgsb0JBQWUsRUFBRSxJQUFBQyxtQkFBVSxFQUFDVyxxQkFBVyxDQUFDLENBQUM7QUFBQyxJQUFBQyxRQUFBLEdBRXZEakIsTUFBTTtBQUFBa0IsT0FBQSxDQUFBQyxPQUFBLEdBQUFGLFFBQUE7QUFBQUcsTUFBQSxDQUFBRixPQUFBLEdBQUFBLE9BQUEsQ0FBQUMsT0FBQSJ9","map":{"version":3,"names":["_express","_interopRequireDefault","require","_checkout","_catchError","_verifyToken","_Checkrole","_checkoutValidate","router","express","Router","get","isAuthenticated","catchError","getCurrentUserOrders","post","checkoutVatidate","createOrder","checkRole","getAllOrders","viewOrder","patch","updateOrder","delete","deleteOrder","_default","exports","default","module"],"sourceRoot":"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/routes/","sources":["checkout.js"],"sourcesContent":["import express from 'express';\nimport {\n  createOrder, getCurrentUserOrders, updateOrder, deleteOrder, viewOrder, getAllOrders,\n} from '../controllers/checkout';\nimport catchError from '../middlewares/catchError';\nimport isAuthenticated from '../middlewares/verifyToken';\nimport checkRole from '../middlewares/Checkrole';\nimport checkoutVatidate from '../middlewares/checkoutValidate';\n\nconst router = express.Router();\n\nrouter.get(\n  '/',\n  isAuthenticated,\n  catchError(getCurrentUserOrders)\n);\n\nrouter.post(\n  '/',\n  isAuthenticated,\n  checkoutVatidate,\n  catchError(createOrder)\n);\n\nrouter.get('/orders', isAuthenticated, checkRole(['admin']), catchError(getAllOrders));\n\nrouter.get('/:order_id', isAuthenticated, viewOrder);\nrouter.patch('/:order_id', isAuthenticated, checkoutVatidate, catchError(updateOrder));\nrouter.delete('/:order_id', isAuthenticated, catchError(deleteOrder));\n\nexport default router;\n"],"mappings":";;;;;;;AAAA,IAAAA,QAAA,GAAAC,sBAAA,CAAAC,OAAA;AACA,IAAAC,SAAA,GAAAD,OAAA;AAGA,IAAAE,WAAA,GAAAH,sBAAA,CAAAC,OAAA;AACA,IAAAG,YAAA,GAAAJ,sBAAA,CAAAC,OAAA;AACA,IAAAI,UAAA,GAAAL,sBAAA,CAAAC,OAAA;AACA,IAAAK,iBAAA,GAAAN,sBAAA,CAAAC,OAAA;AAEA,MAAMM,MAAM,GAAGC,gBAAO,CAACC,MAAM,EAAE;AAE/BF,MAAM,CAACG,GAAG,CACR,GAAG,EACHC,oBAAe,EACf,IAAAC,mBAAU,EAACC,8BAAoB,CAAC,CACjC;AAEDN,MAAM,CAACO,IAAI,CACT,GAAG,EACHH,oBAAe,EACfI,yBAAgB,EAChB,IAAAH,mBAAU,EAACI,qBAAW,CAAC,CACxB;AAEDT,MAAM,CAACG,GAAG,CAAC,SAAS,EAAEC,oBAAe,EAAE,IAAAM,kBAAS,EAAC,CAAC,OAAO,CAAC,CAAC,EAAE,IAAAL,mBAAU,EAACM,sBAAY,CAAC,CAAC;AAEtFX,MAAM,CAACG,GAAG,CAAC,YAAY,EAAEC,oBAAe,EAAEQ,mBAAS,CAAC;AACpDZ,MAAM,CAACa,KAAK,CAAC,YAAY,EAAET,oBAAe,EAAEI,yBAAgB,EAAE,IAAAH,mBAAU,EAACS,qBAAW,CAAC,CAAC;AACtFd,MAAM,CAACe,MAAM,CAAC,YAAY,EAAEX,oBAAe,EAAE,IAAAC,mBAAU,EAACW,qBAAW,CAAC,CAAC;AAAC,IAAAC,QAAA,GAEvDjB,MAAM;AAAAkB,OAAA,CAAAC,OAAA,GAAAF,QAAA;AAAAG,MAAA,CAAAF,OAAA,GAAAA,OAAA,CAAAC,OAAA"}},"mtime":1685643189466},"{\"assumptions\":{},\"sourceRoot\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/controllers/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"filename\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/controllers/checkout.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/node_modules/babel-plugin-add-module-exports/lib/index.js\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-runtime\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"regenerator\":true},\"externalDependencies\":[]},{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.21.0:development":{"value":{"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.viewOrder = exports.updateOrder = exports.getCurrentUserOrders = exports.getAllOrders = exports.deleteOrder = exports.createOrder = void 0;\nvar _models = require(\"../database/models\");\nvar _mail = require(\"../helpers/mail\");\nvar _emailConfig = require(\"../helpers/emailConfig\");\nvar _mailTemplate = require(\"../helpers/mailTemplate\");\nvar _checkout = require(\"../loggers/checkout.logger\");\nvar _getRandom = _interopRequireDefault(require(\"../helpers/getRandom\"));\n/* eslint-disable camelcase */\n/* eslint-disable import/named */\n\nconst getCurrentUserOrders = async (req, res) => {\n  const orders = await _models.order.findAll({\n    where: {\n      buyerId: req.user.id\n    },\n    order: [['createdAt', 'DESC']],\n    include: {\n      model: _models.products,\n      as: 'products',\n      attributes: ['id', 'images', 'name', 'available', 'price'],\n      include: {\n        model: _models.users,\n        as: 'seller',\n        attributes: ['username', 'email', 'avatar']\n      }\n    }\n  });\n  (0, _checkout.viewOrderss)(req, orders);\n  res.json(orders);\n};\nexports.getCurrentUserOrders = getCurrentUserOrders;\nconst createOrder = async (req, res) => {\n  const user = await _models.users.findOne({\n    where: {\n      email: req.user.email\n    },\n    include: {\n      model: _models.carts,\n      as: 'cart'\n    }\n  });\n  const userCart = user.cart;\n  if (!userCart || userCart.products.length === 0) {\n    return res.status(400).json({\n      message: \"You cart is empty can't checkout\"\n    });\n  }\n  const cartProducts = userCart.products;\n\n  // eslint-disable-next-line object-curly-newline\n  const {\n    deliveryCountry,\n    deliveryCity,\n    deliveryStreet\n  } = req.body;\n  const userOrder = await _models.order.create({\n    deliveryCountry,\n    deliveryCity,\n    deliveryStreet,\n    orderNo: Number((0, _getRandom.default)()),\n    paymentMethod: 'card',\n    totalAmount: userCart.total,\n    buyerId: req.user.id\n  }, {\n    include: {\n      model: _models.products,\n      as: 'products',\n      attributes: ['id', 'images', 'name', 'available', 'price'],\n      include: {\n        model: _models.users,\n        as: 'seller',\n        attributes: ['username', 'email', 'avatar']\n      }\n    }\n  });\n  const orderitems = await Promise.all(cartProducts.map(async pro => {\n    const product = await _models.products.findOne({\n      where: {\n        id: pro.id\n      },\n      attributes: ['id', 'images', 'name', 'available', 'price', 'sellerId'],\n      include: {\n        model: _models.users,\n        as: 'seller',\n        attributes: ['username', 'email', 'avatar']\n      }\n    });\n    const ordered = await _models.orderitem.create({\n      quantity: pro.quantity,\n      productId: product.id,\n      orderId: userOrder.id,\n      price: pro.price\n    });\n    const useremail = await _models.users.findOne({\n      where: {\n        id: product.sellerId\n      }\n    });\n    const newNotification = {\n      message: 'your product have been ordered ',\n      type: 'Product sales update'\n    };\n    const newN = {\n      ...newNotification\n    };\n    newN.receiverId = user.id;\n    const receiver = {\n      username: useremail.username,\n      email: useremail.email\n    };\n    const notifyEmail = (0, _mailTemplate.notificationTemplate2)(receiver.username, newN.message, newN.type);\n    (0, _mail.sendEmail)((0, _emailConfig.emailConfig)({\n      email: receiver.email,\n      subject: 'Notification !! product sales update',\n      content: notifyEmail\n    }));\n    await _models.notifications.create(newN);\n    await product.save();\n    const {\n      id,\n      images,\n      name,\n      available,\n      price,\n      seller\n    } = product;\n    return {\n      id,\n      images,\n      name,\n      available,\n      price,\n      seller,\n      orderitem: ordered\n    };\n  }));\n  await userOrder.save();\n  user.cart.products = [];\n  user.cart.total = 0;\n  await user.cart.save();\n  const newNotification = {\n    message: 'you have been assigned new role which is ',\n    type: 'user role updates'\n  };\n  const newN = {\n    ...newNotification\n  };\n  newN.receiverId = user.id;\n  const receiver = {\n    username: user.username,\n    email: user.email\n  };\n  const notifyEmail = (0, _mailTemplate.notificationTemplate2)(receiver.username, newN.message, newN.type);\n  (0, _mail.sendEmail)((0, _emailConfig.emailConfig)({\n    email: receiver.email,\n    subject: 'Notification !! role updates',\n    content: notifyEmail\n  }));\n  await _models.notifications.create(newN);\n  (0, _checkout.createOrders)(req, _models.products);\n  console.log({\n    ordered: {\n      ...userOrder,\n      orderitems\n    }\n  });\n  res.json({\n    message: 'Order was created successfully',\n    order: {\n      ...userOrder.dataValues,\n      products: orderitems\n    }\n  });\n};\nexports.createOrder = createOrder;\nconst getOrderWithAccess = async (id, user) => {\n  let orders;\n  if (user.role === 'admin') {\n    orders = await _models.order.findOne({\n      where: {\n        id\n      },\n      include: [{\n        model: _models.users,\n        as: 'buyer',\n        attributes: ['avatar', 'username', 'email']\n      }, {\n        model: _models.products,\n        as: 'products',\n        attributes: ['id', 'images', 'name', 'available', 'price'],\n        include: {\n          model: _models.users,\n          as: 'seller',\n          attributes: ['username', 'email', 'avatar']\n        }\n      }],\n      attributes: {\n        exclude: ['buyerId']\n      }\n    });\n  } else {\n    orders = await _models.order.findOne({\n      where: {\n        id,\n        buyerId: user.id\n      },\n      include: {\n        model: _models.products,\n        as: 'products',\n        attributes: ['id', 'images', 'name', 'available', 'price'],\n        include: {\n          model: _models.users,\n          as: 'seller',\n          attributes: ['username', 'email', 'avatar']\n        }\n      },\n      attributes: {\n        exclude: ['buyerId']\n      }\n    });\n  }\n  return orders;\n};\nconst viewOrder = async (req, res) => {\n  try {\n    const {\n      order_id\n    } = req.params;\n    const orders = await getOrderWithAccess(order_id, req.user);\n    if (!orders) {\n      return res.status(404).json({\n        error: 'Order not found.'\n      });\n    }\n    (0, _checkout.viewOrders)(req, order_id);\n    return res.status(200).json(orders);\n  } catch (error) {\n    (0, _checkout.OrderError)(req, error);\n    return res.status(500).json({\n      error: 'Server error.'\n    });\n  }\n};\nexports.viewOrder = viewOrder;\nconst updateOrder = async (req, res) => {\n  try {\n    const {\n      order_id\n    } = req.params;\n    const {\n      id,\n      isPaid,\n      totalAmount,\n      createdAt,\n      updatedAt,\n      buyerId,\n      ...updatedOrder\n    } = req.body;\n    const orders = await getOrderWithAccess(order_id, req.user);\n    if (!orders) {\n      return res.status(404).json({\n        error: 'Order not found.'\n      });\n    }\n\n    // Update the order with the new data\n    await orders.update(updatedOrder);\n    (0, _checkout.updatedOrders)(req, order_id);\n    return res.status(200).json(orders);\n  } catch (error) {\n    (0, _checkout.OrderError)(req, error);\n    return res.status(500).json({\n      error: 'Server error.'\n    });\n  }\n};\nexports.updateOrder = updateOrder;\nconst deleteOrder = async (req, res) => {\n  try {\n    const {\n      order_id\n    } = req.params;\n    const orders = await getOrderWithAccess(order_id, req.user);\n    if (!orders) {\n      return res.status(404).json({\n        error: 'Order not found.'\n      });\n    }\n\n    // Delete the order from the database\n    await orders.destroy();\n    (0, _checkout.deletedOrders)(req, order_id);\n    return res.status(201).json({\n      message: 'Order deleted successfully!'\n    });\n  } catch (error) {\n    (0, _checkout.OrderError)(req, error);\n    return res.status(500).json({\n      error: 'Server error.'\n    });\n  }\n};\nexports.deleteOrder = deleteOrder;\nconst getAllOrders = async (req, res) => {\n  try {\n    const totalCount = await _models.order.count();\n    const page = parseInt(req.query.page, 10) || 1;\n    const limit = parseInt(req.query.limit, 10) || totalCount;\n    const startIndex = (page - 1) * limit;\n    const endIndex = page * limit;\n    const results = {};\n    if (endIndex < totalCount) {\n      results.next = {\n        page: page + 1,\n        limit\n      };\n    }\n    if (startIndex > 0) {\n      results.previous = {\n        page: page - 1,\n        limit\n      };\n    }\n    results.results = await _models.order.findAll({\n      limit,\n      include: [{\n        model: _models.users,\n        as: 'buyer',\n        attributes: ['username', 'email', 'avatar']\n      }, {\n        model: _models.products,\n        as: 'products',\n        attributes: ['id', 'images', 'name', 'available', 'price']\n      }],\n      offset: startIndex\n    });\n    const orders = results;\n    (0, _checkout.adminGetOrders)(req, orders);\n    res.status(200).json({\n      message: 'All orders retrieved successfully',\n      orders\n    });\n  } catch (error) {\n    (0, _checkout.OrderError)(req, error);\n    res.status(500).json({\n      error: error.message\n    });\n  }\n};\nexports.getAllOrders = getAllOrders;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfbW9kZWxzIiwicmVxdWlyZSIsIl9tYWlsIiwiX2VtYWlsQ29uZmlnIiwiX21haWxUZW1wbGF0ZSIsIl9jaGVja291dCIsIl9nZXRSYW5kb20iLCJfaW50ZXJvcFJlcXVpcmVEZWZhdWx0IiwiZ2V0Q3VycmVudFVzZXJPcmRlcnMiLCJyZXEiLCJyZXMiLCJvcmRlcnMiLCJvcmRlciIsImZpbmRBbGwiLCJ3aGVyZSIsImJ1eWVySWQiLCJ1c2VyIiwiaWQiLCJpbmNsdWRlIiwibW9kZWwiLCJwcm9kdWN0cyIsImFzIiwiYXR0cmlidXRlcyIsInVzZXJzIiwidmlld09yZGVyc3MiLCJqc29uIiwiZXhwb3J0cyIsImNyZWF0ZU9yZGVyIiwiZmluZE9uZSIsImVtYWlsIiwiY2FydHMiLCJ1c2VyQ2FydCIsImNhcnQiLCJsZW5ndGgiLCJzdGF0dXMiLCJtZXNzYWdlIiwiY2FydFByb2R1Y3RzIiwiZGVsaXZlcnlDb3VudHJ5IiwiZGVsaXZlcnlDaXR5IiwiZGVsaXZlcnlTdHJlZXQiLCJib2R5IiwidXNlck9yZGVyIiwiY3JlYXRlIiwib3JkZXJObyIsIk51bWJlciIsIkdlbmVyYXRlT3JkZXJzTm8iLCJwYXltZW50TWV0aG9kIiwidG90YWxBbW91bnQiLCJ0b3RhbCIsIm9yZGVyaXRlbXMiLCJQcm9taXNlIiwiYWxsIiwibWFwIiwicHJvIiwicHJvZHVjdCIsIm9yZGVyZWQiLCJvcmRlcml0ZW0iLCJxdWFudGl0eSIsInByb2R1Y3RJZCIsIm9yZGVySWQiLCJwcmljZSIsInVzZXJlbWFpbCIsInNlbGxlcklkIiwibmV3Tm90aWZpY2F0aW9uIiwidHlwZSIsIm5ld04iLCJyZWNlaXZlcklkIiwicmVjZWl2ZXIiLCJ1c2VybmFtZSIsIm5vdGlmeUVtYWlsIiwibm90aWZpY2F0aW9uVGVtcGxhdGUyIiwic2VuZEVtYWlsIiwiZW1haWxDb25maWciLCJzdWJqZWN0IiwiY29udGVudCIsIm5vdGlmaWNhdGlvbnMiLCJzYXZlIiwiaW1hZ2VzIiwibmFtZSIsImF2YWlsYWJsZSIsInNlbGxlciIsImNyZWF0ZU9yZGVycyIsImNvbnNvbGUiLCJsb2ciLCJkYXRhVmFsdWVzIiwiZ2V0T3JkZXJXaXRoQWNjZXNzIiwicm9sZSIsImV4Y2x1ZGUiLCJ2aWV3T3JkZXIiLCJvcmRlcl9pZCIsInBhcmFtcyIsImVycm9yIiwidmlld09yZGVycyIsIk9yZGVyRXJyb3IiLCJ1cGRhdGVPcmRlciIsImlzUGFpZCIsImNyZWF0ZWRBdCIsInVwZGF0ZWRBdCIsInVwZGF0ZWRPcmRlciIsInVwZGF0ZSIsInVwZGF0ZWRPcmRlcnMiLCJkZWxldGVPcmRlciIsImRlc3Ryb3kiLCJkZWxldGVkT3JkZXJzIiwiZ2V0QWxsT3JkZXJzIiwidG90YWxDb3VudCIsImNvdW50IiwicGFnZSIsInBhcnNlSW50IiwicXVlcnkiLCJsaW1pdCIsInN0YXJ0SW5kZXgiLCJlbmRJbmRleCIsInJlc3VsdHMiLCJuZXh0IiwicHJldmlvdXMiLCJvZmZzZXQiLCJhZG1pbkdldE9yZGVycyJdLCJzb3VyY2VSb290IjoiL1VzZXJzL2FuZGVsYXJ3YW5kYS9EZXNrdG9wL2UtY29tbS10ZWFtLWJyb2dyYW1tZXJzLWJuL3NyYy9jb250cm9sbGVycy8iLCJzb3VyY2VzIjpbImNoZWNrb3V0LmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qIGVzbGludC1kaXNhYmxlIGNhbWVsY2FzZSAqL1xuLyogZXNsaW50LWRpc2FibGUgaW1wb3J0L25hbWVkICovXG5pbXBvcnQge1xuICB1c2VycyxcbiAgb3JkZXIsXG4gIG9yZGVyaXRlbSxcbiAgcHJvZHVjdHMsXG4gIGNhcnRzLFxuICBub3RpZmljYXRpb25zLFxufSBmcm9tICcuLi9kYXRhYmFzZS9tb2RlbHMnO1xuaW1wb3J0IHsgc2VuZEVtYWlsIH0gZnJvbSAnLi4vaGVscGVycy9tYWlsJztcbmltcG9ydCB7IGVtYWlsQ29uZmlnIH0gZnJvbSAnLi4vaGVscGVycy9lbWFpbENvbmZpZyc7XG5pbXBvcnQgeyBub3RpZmljYXRpb25UZW1wbGF0ZTIgfSBmcm9tICcuLi9oZWxwZXJzL21haWxUZW1wbGF0ZSc7XG5pbXBvcnQge1xuICBjcmVhdGVPcmRlcnMsXG4gIHZpZXdPcmRlcnNzLFxuICBPcmRlckVycm9yLFxuICB2aWV3T3JkZXJzLFxuICB1cGRhdGVkT3JkZXJzLFxuICBkZWxldGVkT3JkZXJzLFxuICBhZG1pbkdldE9yZGVycyxcbn0gZnJvbSAnLi4vbG9nZ2Vycy9jaGVja291dC5sb2dnZXInO1xuaW1wb3J0IEdlbmVyYXRlT3JkZXJzTm8gZnJvbSAnLi4vaGVscGVycy9nZXRSYW5kb20nO1xuXG5leHBvcnQgY29uc3QgZ2V0Q3VycmVudFVzZXJPcmRlcnMgPSBhc3luYyAocmVxLCByZXMpID0+IHtcbiAgY29uc3Qgb3JkZXJzID0gYXdhaXQgb3JkZXIuZmluZEFsbCh7XG4gICAgd2hlcmU6IHsgYnV5ZXJJZDogcmVxLnVzZXIuaWQgfSxcbiAgICBvcmRlcjogW1xuICAgICAgWydjcmVhdGVkQXQnLCAnREVTQyddLFxuICAgIF0sXG4gICAgaW5jbHVkZToge1xuICAgICAgbW9kZWw6IHByb2R1Y3RzLFxuICAgICAgYXM6ICdwcm9kdWN0cycsXG4gICAgICBhdHRyaWJ1dGVzOiBbJ2lkJywgJ2ltYWdlcycsICduYW1lJywgJ2F2YWlsYWJsZScsICdwcmljZSddLFxuICAgICAgaW5jbHVkZToge1xuICAgICAgICBtb2RlbDogdXNlcnMsXG4gICAgICAgIGFzOiAnc2VsbGVyJyxcbiAgICAgICAgYXR0cmlidXRlczogWyd1c2VybmFtZScsICdlbWFpbCcsICdhdmF0YXInXSxcbiAgICAgIH0sXG4gICAgfSxcbiAgfSk7XG4gIHZpZXdPcmRlcnNzKHJlcSwgb3JkZXJzKTtcbiAgcmVzLmpzb24ob3JkZXJzKTtcbn07XG5cbmV4cG9ydCBjb25zdCBjcmVhdGVPcmRlciA9IGFzeW5jIChyZXEsIHJlcykgPT4ge1xuICBjb25zdCB1c2VyID0gYXdhaXQgdXNlcnMuZmluZE9uZSh7XG4gICAgd2hlcmU6IHsgZW1haWw6IHJlcS51c2VyLmVtYWlsIH0sXG4gICAgaW5jbHVkZTogeyBtb2RlbDogY2FydHMsIGFzOiAnY2FydCcgfSxcbiAgfSk7XG4gIGNvbnN0IHVzZXJDYXJ0ID0gdXNlci5jYXJ0O1xuICBpZiAoIXVzZXJDYXJ0IHx8IHVzZXJDYXJ0LnByb2R1Y3RzLmxlbmd0aCA9PT0gMCkge1xuICAgIHJldHVybiByZXNcbiAgICAgIC5zdGF0dXMoNDAwKVxuICAgICAgLmpzb24oeyBtZXNzYWdlOiBcIllvdSBjYXJ0IGlzIGVtcHR5IGNhbid0IGNoZWNrb3V0XCIgfSk7XG4gIH1cblxuICBjb25zdCBjYXJ0UHJvZHVjdHMgPSB1c2VyQ2FydC5wcm9kdWN0cztcblxuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgb2JqZWN0LWN1cmx5LW5ld2xpbmVcbiAgY29uc3QgeyBkZWxpdmVyeUNvdW50cnksIGRlbGl2ZXJ5Q2l0eSwgZGVsaXZlcnlTdHJlZXQgfSA9IHJlcS5ib2R5O1xuXG4gIGNvbnN0IHVzZXJPcmRlciA9IGF3YWl0IG9yZGVyLmNyZWF0ZSh7XG4gICAgZGVsaXZlcnlDb3VudHJ5LFxuICAgIGRlbGl2ZXJ5Q2l0eSxcbiAgICBkZWxpdmVyeVN0cmVldCxcbiAgICBvcmRlck5vOiBOdW1iZXIoR2VuZXJhdGVPcmRlcnNObygpKSxcbiAgICBwYXltZW50TWV0aG9kOiAnY2FyZCcsXG4gICAgdG90YWxBbW91bnQ6IHVzZXJDYXJ0LnRvdGFsLFxuICAgIGJ1eWVySWQ6IHJlcS51c2VyLmlkLFxuICB9LCB7XG4gICAgaW5jbHVkZToge1xuICAgICAgbW9kZWw6IHByb2R1Y3RzLFxuICAgICAgYXM6ICdwcm9kdWN0cycsXG4gICAgICBhdHRyaWJ1dGVzOiBbJ2lkJywgJ2ltYWdlcycsICduYW1lJywgJ2F2YWlsYWJsZScsICdwcmljZSddLFxuICAgICAgaW5jbHVkZToge1xuICAgICAgICBtb2RlbDogdXNlcnMsXG4gICAgICAgIGFzOiAnc2VsbGVyJyxcbiAgICAgICAgYXR0cmlidXRlczogWyd1c2VybmFtZScsICdlbWFpbCcsICdhdmF0YXInXSxcbiAgICAgIH0sXG4gICAgfSxcbiAgfSk7XG5cbiAgY29uc3Qgb3JkZXJpdGVtcyA9IGF3YWl0IFByb21pc2UuYWxsKGNhcnRQcm9kdWN0cy5tYXAoYXN5bmMgKHBybykgPT4ge1xuICAgIGNvbnN0IHByb2R1Y3QgPSBhd2FpdCBwcm9kdWN0cy5maW5kT25lKHtcbiAgICAgIHdoZXJlOiB7IGlkOiBwcm8uaWQgfSxcbiAgICAgIGF0dHJpYnV0ZXM6IFsnaWQnLCAnaW1hZ2VzJywgJ25hbWUnLCAnYXZhaWxhYmxlJywgJ3ByaWNlJywgJ3NlbGxlcklkJ10sXG4gICAgICBpbmNsdWRlOiB7XG4gICAgICAgIG1vZGVsOiB1c2VycyxcbiAgICAgICAgYXM6ICdzZWxsZXInLFxuICAgICAgICBhdHRyaWJ1dGVzOiBbJ3VzZXJuYW1lJywgJ2VtYWlsJywgJ2F2YXRhciddLFxuICAgICAgfVxuICAgIH0pO1xuXG4gICAgY29uc3Qgb3JkZXJlZCA9IGF3YWl0IG9yZGVyaXRlbS5jcmVhdGUoe1xuICAgICAgcXVhbnRpdHk6IHByby5xdWFudGl0eSxcbiAgICAgIHByb2R1Y3RJZDogcHJvZHVjdC5pZCxcbiAgICAgIG9yZGVySWQ6IHVzZXJPcmRlci5pZCxcbiAgICAgIHByaWNlOiBwcm8ucHJpY2UsXG4gICAgfSk7XG5cbiAgICBjb25zdCB1c2VyZW1haWwgPSBhd2FpdCB1c2Vycy5maW5kT25lKHsgd2hlcmU6IHsgaWQ6IHByb2R1Y3Quc2VsbGVySWQgfSB9KTtcbiAgICBjb25zdCBuZXdOb3RpZmljYXRpb24gPSB7XG4gICAgICBtZXNzYWdlOiAneW91ciBwcm9kdWN0IGhhdmUgYmVlbiBvcmRlcmVkICcsXG4gICAgICB0eXBlOiAnUHJvZHVjdCBzYWxlcyB1cGRhdGUnLFxuICAgIH07XG4gICAgY29uc3QgbmV3TiA9IHsgLi4ubmV3Tm90aWZpY2F0aW9uIH07XG4gICAgbmV3Ti5yZWNlaXZlcklkID0gdXNlci5pZDtcbiAgICBjb25zdCByZWNlaXZlciA9IHtcbiAgICAgIHVzZXJuYW1lOiB1c2VyZW1haWwudXNlcm5hbWUsXG4gICAgICBlbWFpbDogdXNlcmVtYWlsLmVtYWlsLFxuICAgIH07XG4gICAgY29uc3Qgbm90aWZ5RW1haWwgPSBub3RpZmljYXRpb25UZW1wbGF0ZTIoXG4gICAgICByZWNlaXZlci51c2VybmFtZSxcbiAgICAgIG5ld04ubWVzc2FnZSxcbiAgICAgIG5ld04udHlwZVxuICAgICk7XG4gICAgc2VuZEVtYWlsKFxuICAgICAgZW1haWxDb25maWcoe1xuICAgICAgICBlbWFpbDogcmVjZWl2ZXIuZW1haWwsXG4gICAgICAgIHN1YmplY3Q6ICdOb3RpZmljYXRpb24gISEgcHJvZHVjdCBzYWxlcyB1cGRhdGUnLFxuICAgICAgICBjb250ZW50OiBub3RpZnlFbWFpbCxcbiAgICAgIH0pXG4gICAgKTtcbiAgICBhd2FpdCBub3RpZmljYXRpb25zLmNyZWF0ZShuZXdOKTtcblxuICAgIGF3YWl0IHByb2R1Y3Quc2F2ZSgpO1xuICAgIGNvbnN0IHtcbiAgICAgIGlkLCBpbWFnZXMsIG5hbWUsIGF2YWlsYWJsZSwgcHJpY2UsIHNlbGxlclxuICAgIH0gPSBwcm9kdWN0O1xuXG4gICAgcmV0dXJuIHtcbiAgICAgIGlkLCBpbWFnZXMsIG5hbWUsIGF2YWlsYWJsZSwgcHJpY2UsIHNlbGxlciwgb3JkZXJpdGVtOiBvcmRlcmVkXG4gICAgfTtcbiAgfSkpO1xuXG4gIGF3YWl0IHVzZXJPcmRlci5zYXZlKCk7XG4gIHVzZXIuY2FydC5wcm9kdWN0cyA9IFtdO1xuICB1c2VyLmNhcnQudG90YWwgPSAwO1xuICBhd2FpdCB1c2VyLmNhcnQuc2F2ZSgpO1xuICBjb25zdCBuZXdOb3RpZmljYXRpb24gPSB7XG4gICAgbWVzc2FnZTogJ3lvdSBoYXZlIGJlZW4gYXNzaWduZWQgbmV3IHJvbGUgd2hpY2ggaXMgJyxcbiAgICB0eXBlOiAndXNlciByb2xlIHVwZGF0ZXMnLFxuICB9O1xuICBjb25zdCBuZXdOID0geyAuLi5uZXdOb3RpZmljYXRpb24gfTtcbiAgbmV3Ti5yZWNlaXZlcklkID0gdXNlci5pZDtcbiAgY29uc3QgcmVjZWl2ZXIgPSB7XG4gICAgdXNlcm5hbWU6IHVzZXIudXNlcm5hbWUsXG4gICAgZW1haWw6IHVzZXIuZW1haWwsXG4gIH07XG4gIGNvbnN0IG5vdGlmeUVtYWlsID0gbm90aWZpY2F0aW9uVGVtcGxhdGUyKFxuICAgIHJlY2VpdmVyLnVzZXJuYW1lLFxuICAgIG5ld04ubWVzc2FnZSxcbiAgICBuZXdOLnR5cGVcbiAgKTtcbiAgc2VuZEVtYWlsKFxuICAgIGVtYWlsQ29uZmlnKHtcbiAgICAgIGVtYWlsOiByZWNlaXZlci5lbWFpbCxcbiAgICAgIHN1YmplY3Q6ICdOb3RpZmljYXRpb24gISEgcm9sZSB1cGRhdGVzJyxcbiAgICAgIGNvbnRlbnQ6IG5vdGlmeUVtYWlsLFxuICAgIH0pXG4gICk7XG4gIGF3YWl0IG5vdGlmaWNhdGlvbnMuY3JlYXRlKG5ld04pO1xuICBjcmVhdGVPcmRlcnMocmVxLCBwcm9kdWN0cyk7XG4gIGNvbnNvbGUubG9nKHtcbiAgICBvcmRlcmVkOiB7IC4uLnVzZXJPcmRlciwgb3JkZXJpdGVtcyB9XG4gIH0pO1xuICByZXMuanNvbih7IG1lc3NhZ2U6ICdPcmRlciB3YXMgY3JlYXRlZCBzdWNjZXNzZnVsbHknLCBvcmRlcjogeyAuLi51c2VyT3JkZXIuZGF0YVZhbHVlcywgcHJvZHVjdHM6IG9yZGVyaXRlbXMgfSB9KTtcbn07XG5cbmNvbnN0IGdldE9yZGVyV2l0aEFjY2VzcyA9IGFzeW5jIChpZCwgdXNlcikgPT4ge1xuICBsZXQgb3JkZXJzO1xuICBpZiAodXNlci5yb2xlID09PSAnYWRtaW4nKSB7XG4gICAgb3JkZXJzID0gYXdhaXQgb3JkZXIuZmluZE9uZSh7XG4gICAgICB3aGVyZTogeyBpZCB9LFxuICAgICAgaW5jbHVkZTogW1xuICAgICAgICB7XG4gICAgICAgICAgbW9kZWw6IHVzZXJzLFxuICAgICAgICAgIGFzOiAnYnV5ZXInLFxuICAgICAgICAgIGF0dHJpYnV0ZXM6IFsnYXZhdGFyJywgJ3VzZXJuYW1lJywgJ2VtYWlsJ10sXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICBtb2RlbDogcHJvZHVjdHMsXG4gICAgICAgICAgYXM6ICdwcm9kdWN0cycsXG4gICAgICAgICAgYXR0cmlidXRlczogWydpZCcsICdpbWFnZXMnLCAnbmFtZScsICdhdmFpbGFibGUnLCAncHJpY2UnXSxcbiAgICAgICAgICBpbmNsdWRlOiB7XG4gICAgICAgICAgICBtb2RlbDogdXNlcnMsXG4gICAgICAgICAgICBhczogJ3NlbGxlcicsXG4gICAgICAgICAgICBhdHRyaWJ1dGVzOiBbJ3VzZXJuYW1lJywgJ2VtYWlsJywgJ2F2YXRhciddLFxuICAgICAgICAgIH0sXG4gICAgICAgIH0sXG4gICAgICBdLFxuICAgICAgYXR0cmlidXRlczoge1xuICAgICAgICBleGNsdWRlOiBbJ2J1eWVySWQnXVxuICAgICAgfVxuICAgIH0pO1xuICB9IGVsc2Uge1xuICAgIG9yZGVycyA9IGF3YWl0IG9yZGVyLmZpbmRPbmUoe1xuICAgICAgd2hlcmU6IHsgaWQsIGJ1eWVySWQ6IHVzZXIuaWQgfSxcbiAgICAgIGluY2x1ZGU6IHtcbiAgICAgICAgbW9kZWw6IHByb2R1Y3RzLFxuICAgICAgICBhczogJ3Byb2R1Y3RzJyxcbiAgICAgICAgYXR0cmlidXRlczogWydpZCcsICdpbWFnZXMnLCAnbmFtZScsICdhdmFpbGFibGUnLCAncHJpY2UnXSxcbiAgICAgICAgaW5jbHVkZToge1xuICAgICAgICAgIG1vZGVsOiB1c2VycyxcbiAgICAgICAgICBhczogJ3NlbGxlcicsXG4gICAgICAgICAgYXR0cmlidXRlczogWyd1c2VybmFtZScsICdlbWFpbCcsICdhdmF0YXInXSxcbiAgICAgICAgfSxcbiAgICAgIH0sXG4gICAgICBhdHRyaWJ1dGVzOiB7XG4gICAgICAgIGV4Y2x1ZGU6IFsnYnV5ZXJJZCddXG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICByZXR1cm4gb3JkZXJzO1xufTtcblxuZXhwb3J0IGNvbnN0IHZpZXdPcmRlciA9IGFzeW5jIChyZXEsIHJlcykgPT4ge1xuICB0cnkge1xuICAgIGNvbnN0IHsgb3JkZXJfaWQgfSA9IHJlcS5wYXJhbXM7XG4gICAgY29uc3Qgb3JkZXJzID0gYXdhaXQgZ2V0T3JkZXJXaXRoQWNjZXNzKG9yZGVyX2lkLCByZXEudXNlcik7XG5cbiAgICBpZiAoIW9yZGVycykge1xuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA0KS5qc29uKHsgZXJyb3I6ICdPcmRlciBub3QgZm91bmQuJyB9KTtcbiAgICB9XG4gICAgdmlld09yZGVycyhyZXEsIG9yZGVyX2lkKTtcbiAgICByZXR1cm4gcmVzLnN0YXR1cygyMDApLmpzb24ob3JkZXJzKTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBPcmRlckVycm9yKHJlcSwgZXJyb3IpO1xuICAgIHJldHVybiByZXMuc3RhdHVzKDUwMCkuanNvbih7IGVycm9yOiAnU2VydmVyIGVycm9yLicgfSk7XG4gIH1cbn07XG5cbmV4cG9ydCBjb25zdCB1cGRhdGVPcmRlciA9IGFzeW5jIChyZXEsIHJlcykgPT4ge1xuICB0cnkge1xuICAgIGNvbnN0IHsgb3JkZXJfaWQgfSA9IHJlcS5wYXJhbXM7XG4gICAgY29uc3Qge1xuICAgICAgaWQsIGlzUGFpZCwgdG90YWxBbW91bnQsIGNyZWF0ZWRBdCwgdXBkYXRlZEF0LCBidXllcklkLFxuICAgICAgLi4udXBkYXRlZE9yZGVyXG4gICAgfSA9IHJlcS5ib2R5O1xuICAgIGNvbnN0IG9yZGVycyA9IGF3YWl0IGdldE9yZGVyV2l0aEFjY2VzcyhvcmRlcl9pZCwgcmVxLnVzZXIpO1xuXG4gICAgaWYgKCFvcmRlcnMpIHtcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwNCkuanNvbih7IGVycm9yOiAnT3JkZXIgbm90IGZvdW5kLicgfSk7XG4gICAgfVxuXG4gICAgLy8gVXBkYXRlIHRoZSBvcmRlciB3aXRoIHRoZSBuZXcgZGF0YVxuICAgIGF3YWl0IG9yZGVycy51cGRhdGUodXBkYXRlZE9yZGVyKTtcbiAgICB1cGRhdGVkT3JkZXJzKHJlcSwgb3JkZXJfaWQpO1xuICAgIHJldHVybiByZXMuc3RhdHVzKDIwMCkuanNvbihvcmRlcnMpO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIE9yZGVyRXJyb3IocmVxLCBlcnJvcik7XG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgZXJyb3I6ICdTZXJ2ZXIgZXJyb3IuJyB9KTtcbiAgfVxufTtcblxuZXhwb3J0IGNvbnN0IGRlbGV0ZU9yZGVyID0gYXN5bmMgKHJlcSwgcmVzKSA9PiB7XG4gIHRyeSB7XG4gICAgY29uc3QgeyBvcmRlcl9pZCB9ID0gcmVxLnBhcmFtcztcbiAgICBjb25zdCBvcmRlcnMgPSBhd2FpdCBnZXRPcmRlcldpdGhBY2Nlc3Mob3JkZXJfaWQsIHJlcS51c2VyKTtcblxuICAgIGlmICghb3JkZXJzKSB7XG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDQpLmpzb24oeyBlcnJvcjogJ09yZGVyIG5vdCBmb3VuZC4nIH0pO1xuICAgIH1cblxuICAgIC8vIERlbGV0ZSB0aGUgb3JkZXIgZnJvbSB0aGUgZGF0YWJhc2VcbiAgICBhd2FpdCBvcmRlcnMuZGVzdHJveSgpO1xuICAgIGRlbGV0ZWRPcmRlcnMocmVxLCBvcmRlcl9pZCk7XG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoMjAxKS5qc29uKHsgbWVzc2FnZTogJ09yZGVyIGRlbGV0ZWQgc3VjY2Vzc2Z1bGx5IScgfSk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgT3JkZXJFcnJvcihyZXEsIGVycm9yKTtcbiAgICByZXR1cm4gcmVzLnN0YXR1cyg1MDApLmpzb24oeyBlcnJvcjogJ1NlcnZlciBlcnJvci4nIH0pO1xuICB9XG59O1xuXG5leHBvcnQgY29uc3QgZ2V0QWxsT3JkZXJzID0gYXN5bmMgKHJlcSwgcmVzKSA9PiB7XG4gIHRyeSB7XG4gICAgY29uc3QgdG90YWxDb3VudCA9IGF3YWl0IG9yZGVyLmNvdW50KCk7XG4gICAgY29uc3QgcGFnZSA9IHBhcnNlSW50KHJlcS5xdWVyeS5wYWdlLCAxMCkgfHwgMTtcbiAgICBjb25zdCBsaW1pdCA9IHBhcnNlSW50KHJlcS5xdWVyeS5saW1pdCwgMTApIHx8IHRvdGFsQ291bnQ7XG4gICAgY29uc3Qgc3RhcnRJbmRleCA9IChwYWdlIC0gMSkgKiBsaW1pdDtcbiAgICBjb25zdCBlbmRJbmRleCA9IHBhZ2UgKiBsaW1pdDtcbiAgICBjb25zdCByZXN1bHRzID0ge307XG4gICAgaWYgKGVuZEluZGV4IDwgdG90YWxDb3VudCkge1xuICAgICAgcmVzdWx0cy5uZXh0ID0ge1xuICAgICAgICBwYWdlOiBwYWdlICsgMSxcbiAgICAgICAgbGltaXQsXG4gICAgICB9O1xuICAgIH1cbiAgICBpZiAoc3RhcnRJbmRleCA+IDApIHtcbiAgICAgIHJlc3VsdHMucHJldmlvdXMgPSB7XG4gICAgICAgIHBhZ2U6IHBhZ2UgLSAxLFxuICAgICAgICBsaW1pdCxcbiAgICAgIH07XG4gICAgfVxuICAgIHJlc3VsdHMucmVzdWx0cyA9IGF3YWl0IG9yZGVyLmZpbmRBbGwoe1xuICAgICAgbGltaXQsXG4gICAgICBpbmNsdWRlOiBbXG4gICAgICAgIHtcbiAgICAgICAgICBtb2RlbDogdXNlcnMsXG4gICAgICAgICAgYXM6ICdidXllcicsXG4gICAgICAgICAgYXR0cmlidXRlczogWyd1c2VybmFtZScsICdlbWFpbCcsICdhdmF0YXInXSxcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgIG1vZGVsOiBwcm9kdWN0cyxcbiAgICAgICAgICBhczogJ3Byb2R1Y3RzJyxcbiAgICAgICAgICBhdHRyaWJ1dGVzOiBbJ2lkJywgJ2ltYWdlcycsICduYW1lJywgJ2F2YWlsYWJsZScsICdwcmljZSddLFxuICAgICAgICB9LFxuICAgICAgXSxcbiAgICAgIG9mZnNldDogc3RhcnRJbmRleCxcbiAgICB9KTtcbiAgICBjb25zdCBvcmRlcnMgPSByZXN1bHRzO1xuICAgIGFkbWluR2V0T3JkZXJzKHJlcSwgb3JkZXJzKTtcbiAgICByZXNcbiAgICAgIC5zdGF0dXMoMjAwKVxuICAgICAgLmpzb24oeyBtZXNzYWdlOiAnQWxsIG9yZGVycyByZXRyaWV2ZWQgc3VjY2Vzc2Z1bGx5Jywgb3JkZXJzIH0pO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIE9yZGVyRXJyb3IocmVxLCBlcnJvcik7XG4gICAgcmVzLnN0YXR1cyg1MDApLmpzb24oeyBlcnJvcjogZXJyb3IubWVzc2FnZSB9KTtcbiAgfVxufTtcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUVBLElBQUFBLE9BQUEsR0FBQUMsT0FBQTtBQVFBLElBQUFDLEtBQUEsR0FBQUQsT0FBQTtBQUNBLElBQUFFLFlBQUEsR0FBQUYsT0FBQTtBQUNBLElBQUFHLGFBQUEsR0FBQUgsT0FBQTtBQUNBLElBQUFJLFNBQUEsR0FBQUosT0FBQTtBQVNBLElBQUFLLFVBQUEsR0FBQUMsc0JBQUEsQ0FBQU4sT0FBQTtBQXRCQTtBQUNBOztBQXVCTyxNQUFNTyxvQkFBb0IsR0FBRyxNQUFBQSxDQUFPQyxHQUFHLEVBQUVDLEdBQUcsS0FBSztFQUN0RCxNQUFNQyxNQUFNLEdBQUcsTUFBTUMsYUFBSyxDQUFDQyxPQUFPLENBQUM7SUFDakNDLEtBQUssRUFBRTtNQUFFQyxPQUFPLEVBQUVOLEdBQUcsQ0FBQ08sSUFBSSxDQUFDQztJQUFHLENBQUM7SUFDL0JMLEtBQUssRUFBRSxDQUNMLENBQUMsV0FBVyxFQUFFLE1BQU0sQ0FBQyxDQUN0QjtJQUNETSxPQUFPLEVBQUU7TUFDUEMsS0FBSyxFQUFFQyxnQkFBUTtNQUNmQyxFQUFFLEVBQUUsVUFBVTtNQUNkQyxVQUFVLEVBQUUsQ0FBQyxJQUFJLEVBQUUsUUFBUSxFQUFFLE1BQU0sRUFBRSxXQUFXLEVBQUUsT0FBTyxDQUFDO01BQzFESixPQUFPLEVBQUU7UUFDUEMsS0FBSyxFQUFFSSxhQUFLO1FBQ1pGLEVBQUUsRUFBRSxRQUFRO1FBQ1pDLFVBQVUsRUFBRSxDQUFDLFVBQVUsRUFBRSxPQUFPLEVBQUUsUUFBUTtNQUM1QztJQUNGO0VBQ0YsQ0FBQyxDQUFDO0VBQ0YsSUFBQUUscUJBQVcsRUFBQ2YsR0FBRyxFQUFFRSxNQUFNLENB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","map":{"version":3,"names":["_models","require","_mail","_emailConfig","_mailTemplate","_checkout","_getRandom","_interopRequireDefault","getCurrentUserOrders","req","res","orders","order","findAll","where","buyerId","user","id","include","model","products","as","attributes","users","viewOrderss","json","exports","createOrder","findOne","email","carts","userCart","cart","length","status","message","cartProducts","deliveryCountry","deliveryCity","deliveryStreet","body","userOrder","create","orderNo","Number","GenerateOrdersNo","paymentMethod","totalAmount","total","orderitems","Promise","all","map","pro","product","ordered","orderitem","quantity","productId","orderId","price","useremail","sellerId","newNotification","type","newN","receiverId","receiver","username","notifyEmail","notificationTemplate2","sendEmail","emailConfig","subject","content","notifications","save","images","name","available","seller","createOrders","console","log","dataValues","getOrderWithAccess","role","exclude","viewOrder","order_id","params","error","viewOrders","OrderError","updateOrder","isPaid","createdAt","updatedAt","updatedOrder","update","updatedOrders","deleteOrder","destroy","deletedOrders","getAllOrders","totalCount","count","page","parseInt","query","limit","startIndex","endIndex","results","next","previous","offset","adminGetOrders"],"sourceRoot":"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/controllers/","sources":["checkout.js"],"sourcesContent":["/* eslint-disable camelcase */\n/* eslint-disable import/named */\nimport {\n  users,\n  order,\n  orderitem,\n  products,\n  carts,\n  notifications,\n} from '../database/models';\nimport { sendEmail } from '../helpers/mail';\nimport { emailConfig } from '../helpers/emailConfig';\nimport { notificationTemplate2 } from '../helpers/mailTemplate';\nimport {\n  createOrders,\n  viewOrderss,\n  OrderError,\n  viewOrders,\n  updatedOrders,\n  deletedOrders,\n  adminGetOrders,\n} from '../loggers/checkout.logger';\nimport GenerateOrdersNo from '../helpers/getRandom';\n\nexport const getCurrentUserOrders = async (req, res) => {\n  const orders = await order.findAll({\n    where: { buyerId: req.user.id },\n    order: [\n      ['createdAt', 'DESC'],\n    ],\n    include: {\n      model: products,\n      as: 'products',\n      attributes: ['id', 'images', 'name', 'available', 'price'],\n      include: {\n        model: users,\n        as: 'seller',\n        attributes: ['username', 'email', 'avatar'],\n      },\n    },\n  });\n  viewOrderss(req, orders);\n  res.json(orders);\n};\n\nexport const createOrder = async (req, res) => {\n  const user = await users.findOne({\n    where: { email: req.user.email },\n    include: { model: carts, as: 'cart' },\n  });\n  const userCart = user.cart;\n  if (!userCart || userCart.products.length === 0) {\n    return res\n      .status(400)\n      .json({ message: \"You cart is empty can't checkout\" });\n  }\n\n  const cartProducts = userCart.products;\n\n  // eslint-disable-next-line object-curly-newline\n  const { deliveryCountry, deliveryCity, deliveryStreet } = req.body;\n\n  const userOrder = await order.create({\n    deliveryCountry,\n    deliveryCity,\n    deliveryStreet,\n    orderNo: Number(GenerateOrdersNo()),\n    paymentMethod: 'card',\n    totalAmount: userCart.total,\n    buyerId: req.user.id,\n  }, {\n    include: {\n      model: products,\n      as: 'products',\n      attributes: ['id', 'images', 'name', 'available', 'price'],\n      include: {\n        model: users,\n        as: 'seller',\n        attributes: ['username', 'email', 'avatar'],\n      },\n    },\n  });\n\n  const orderitems = await Promise.all(cartProducts.map(async (pro) => {\n    const product = await products.findOne({\n      where: { id: pro.id },\n      attributes: ['id', 'images', 'name', 'available', 'price', 'sellerId'],\n      include: {\n        model: users,\n        as: 'seller',\n        attributes: ['username', 'email', 'avatar'],\n      }\n    });\n\n    const ordered = await orderitem.create({\n      quantity: pro.quantity,\n      productId: product.id,\n      orderId: userOrder.id,\n      price: pro.price,\n    });\n\n    const useremail = await users.findOne({ where: { id: product.sellerId } });\n    const newNotification = {\n      message: 'your product have been ordered ',\n      type: 'Product sales update',\n    };\n    const newN = { ...newNotification };\n    newN.receiverId = user.id;\n    const receiver = {\n      username: useremail.username,\n      email: useremail.email,\n    };\n    const notifyEmail = notificationTemplate2(\n      receiver.username,\n      newN.message,\n      newN.type\n    );\n    sendEmail(\n      emailConfig({\n        email: receiver.email,\n        subject: 'Notification !! product sales update',\n        content: notifyEmail,\n      })\n    );\n    await notifications.create(newN);\n\n    await product.save();\n    const {\n      id, images, name, available, price, seller\n    } = product;\n\n    return {\n      id, images, name, available, price, seller, orderitem: ordered\n    };\n  }));\n\n  await userOrder.save();\n  user.cart.products = [];\n  user.cart.total = 0;\n  await user.cart.save();\n  const newNotification = {\n    message: 'you have been assigned new role which is ',\n    type: 'user role updates',\n  };\n  const newN = { ...newNotification };\n  newN.receiverId = user.id;\n  const receiver = {\n    username: user.username,\n    email: user.email,\n  };\n  const notifyEmail = notificationTemplate2(\n    receiver.username,\n    newN.message,\n    newN.type\n  );\n  sendEmail(\n    emailConfig({\n      email: receiver.email,\n      subject: 'Notification !! role updates',\n      content: notifyEmail,\n    })\n  );\n  await notifications.create(newN);\n  createOrders(req, products);\n  console.log({\n    ordered: { ...userOrder, orderitems }\n  });\n  res.json({ message: 'Order was created successfully', order: { ...userOrder.dataValues, products: orderitems } });\n};\n\nconst getOrderWithAccess = async (id, user) => {\n  let orders;\n  if (user.role === 'admin') {\n    orders = await order.findOne({\n      where: { id },\n      include: [\n        {\n          model: users,\n          as: 'buyer',\n          attributes: ['avatar', 'username', 'email'],\n        },\n        {\n          model: products,\n          as: 'products',\n          attributes: ['id', 'images', 'name', 'available', 'price'],\n          include: {\n            model: users,\n            as: 'seller',\n            attributes: ['username', 'email', 'avatar'],\n          },\n        },\n      ],\n      attributes: {\n        exclude: ['buyerId']\n      }\n    });\n  } else {\n    orders = await order.findOne({\n      where: { id, buyerId: user.id },\n      include: {\n        model: products,\n        as: 'products',\n        attributes: ['id', 'images', 'name', 'available', 'price'],\n        include: {\n          model: users,\n          as: 'seller',\n          attributes: ['username', 'email', 'avatar'],\n        },\n      },\n      attributes: {\n        exclude: ['buyerId']\n      }\n    });\n  }\n\n  return orders;\n};\n\nexport const viewOrder = async (req, res) => {\n  try {\n    const { order_id } = req.params;\n    const orders = await getOrderWithAccess(order_id, req.user);\n\n    if (!orders) {\n      return res.status(404).json({ error: 'Order not found.' });\n    }\n    viewOrders(req, order_id);\n    return res.status(200).json(orders);\n  } catch (error) {\n    OrderError(req, error);\n    return res.status(500).json({ error: 'Server error.' });\n  }\n};\n\nexport const updateOrder = async (req, res) => {\n  try {\n    const { order_id } = req.params;\n    const {\n      id, isPaid, totalAmount, createdAt, updatedAt, buyerId,\n      ...updatedOrder\n    } = req.body;\n    const orders = await getOrderWithAccess(order_id, req.user);\n\n    if (!orders) {\n      return res.status(404).json({ error: 'Order not found.' });\n    }\n\n    // Update the order with the new data\n    await orders.update(updatedOrder);\n    updatedOrders(req, order_id);\n    return res.status(200).json(orders);\n  } catch (error) {\n    OrderError(req, error);\n    return res.status(500).json({ error: 'Server error.' });\n  }\n};\n\nexport const deleteOrder = async (req, res) => {\n  try {\n    const { order_id } = req.params;\n    const orders = await getOrderWithAccess(order_id, req.user);\n\n    if (!orders) {\n      return res.status(404).json({ error: 'Order not found.' });\n    }\n\n    // Delete the order from the database\n    await orders.destroy();\n    deletedOrders(req, order_id);\n    return res.status(201).json({ message: 'Order deleted successfully!' });\n  } catch (error) {\n    OrderError(req, error);\n    return res.status(500).json({ error: 'Server error.' });\n  }\n};\n\nexport const getAllOrders = async (req, res) => {\n  try {\n    const totalCount = await order.count();\n    const page = parseInt(req.query.page, 10) || 1;\n    const limit = parseInt(req.query.limit, 10) || totalCount;\n    const startIndex = (page - 1) * limit;\n    const endIndex = page * limit;\n    const results = {};\n    if (endIndex < totalCount) {\n      results.next = {\n        page: page + 1,\n        limit,\n      };\n    }\n    if (startIndex > 0) {\n      results.previous = {\n        page: page - 1,\n        limit,\n      };\n    }\n    results.results = await order.findAll({\n      limit,\n      include: [\n        {\n          model: users,\n          as: 'buyer',\n          attributes: ['username', 'email', 'avatar'],\n        },\n        {\n          model: products,\n          as: 'products',\n          attributes: ['id', 'images', 'name', 'available', 'price'],\n        },\n      ],\n      offset: startIndex,\n    });\n    const orders = results;\n    adminGetOrders(req, orders);\n    res\n      .status(200)\n      .json({ message: 'All orders retrieved successfully', orders });\n  } catch (error) {\n    OrderError(req, error);\n    res.status(500).json({ error: error.message });\n  }\n};\n"],"mappings":"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"}},"mtime":1685643189436},"{\"assumptions\":{},\"sourceRoot\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/loggers/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"filename\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/loggers/checkout.logger.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/node_modules/babel-plugin-add-module-exports/lib/index.js\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-runtime\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"regenerator\":true},\"externalDependencies\":[]},{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.21.0:development":{"value":{"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.viewOrderss = exports.viewOrders = exports.updatedOrders = exports.deletedOrders = exports.createOrders = exports.adminGetOrders = exports.OrderError = void 0;\nvar _logger = _interopRequireDefault(require(\"../configs/logger\"));\nvar _models = require(\"../database/models\");\n/* eslint-disable import/named */\n\nconst createOrders = async (req, products) => {\n  const logData = {\n    level: 'info',\n    message: `User ${req.user.email} created an order successfully`,\n    userId: req.user.id,\n    metadata: {\n      products\n    }\n  };\n  await _models.Log.create(logData);\n  _logger.default.info(`User ${req.user.email} created an order successfully`);\n};\nexports.createOrders = createOrders;\nconst OrderError = async (req, error) => {\n  const logData = {\n    level: 'error',\n    message: error.message,\n    userId: req.user.id,\n    metadata: {\n      error\n    }\n  };\n  await _models.Log.create(logData);\n  _logger.default.error(`User ${req.user.email} encountered an error while creating an order: ${error.message}`);\n};\nexports.OrderError = OrderError;\nconst viewOrders = async (req, order) => {\n  const logData = {\n    level: 'info',\n    message: `User ${req.user.email} viewed an order${order.id} successfully`,\n    userId: req.user.id,\n    metadata: {\n      viewOrderRequest: req.body\n    }\n  };\n  await _models.Log.create(logData);\n  _logger.default.info(`User ${req.user.email} viewed an order successfully`);\n};\nexports.viewOrders = viewOrders;\nconst viewOrderss = async (req, order) => {\n  const logData = {\n    level: 'info',\n    message: `User ${req.user.email} viewed  all his orders successfully`,\n    userId: req.user.id,\n    metadata: {\n      viewOrderRequest: order\n    }\n  };\n  await _models.Log.create(logData);\n  _logger.default.info(`User ${req.user.email} viewed  all his orders successfully`);\n};\nexports.viewOrderss = viewOrderss;\nconst updatedOrders = async (req, order) => {\n  const logData = {\n    level: 'info',\n    message: `User ${req.user.email} updated an order${order.id} successfully`,\n    userId: req.user.id,\n    metadata: {\n      cancelOrderRequest: req.body\n    }\n  };\n  await _models.Log.create(logData);\n  _logger.default.info(`User ${req.user.email} updated an order${order.id} successfully`);\n};\nexports.updatedOrders = updatedOrders;\nconst deletedOrders = async (req, order) => {\n  const logData = {\n    level: 'info',\n    message: `User ${req.user.email} deleted an order${order.id} successfully`,\n    userId: req.user.id,\n    metadata: {\n      cancelOrderRequest: req.body\n    }\n  };\n  await _models.Log.create(logData);\n  _logger.default.info(`User ${req.user.email} deleted an order${order.id} successfully`);\n};\nexports.deletedOrders = deletedOrders;\nconst adminGetOrders = async (req, order) => {\n  const logData = {\n    level: 'info',\n    message: `User ${req.user.email} get all  orders successfully`,\n    userId: req.user.id,\n    metadata: {\n      AllOrderRequest: order\n    }\n  };\n  await _models.Log.create(logData);\n  _logger.default.info(`User ${req.user.email} get all  orders successfully`);\n};\nexports.adminGetOrders = adminGetOrders;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfbG9nZ2VyIiwiX2ludGVyb3BSZXF1aXJlRGVmYXVsdCIsInJlcXVpcmUiLCJfbW9kZWxzIiwiY3JlYXRlT3JkZXJzIiwicmVxIiwicHJvZHVjdHMiLCJsb2dEYXRhIiwibGV2ZWwiLCJtZXNzYWdlIiwidXNlciIsImVtYWlsIiwidXNlcklkIiwiaWQiLCJtZXRhZGF0YSIsIkxvZyIsImNyZWF0ZSIsImxvZ2dlciIsImluZm8iLCJleHBvcnRzIiwiT3JkZXJFcnJvciIsImVycm9yIiwidmlld09yZGVycyIsIm9yZGVyIiwidmlld09yZGVyUmVxdWVzdCIsImJvZHkiLCJ2aWV3T3JkZXJzcyIsInVwZGF0ZWRPcmRlcnMiLCJjYW5jZWxPcmRlclJlcXVlc3QiLCJkZWxldGVkT3JkZXJzIiwiYWRtaW5HZXRPcmRlcnMiLCJBbGxPcmRlclJlcXVlc3QiXSwic291cmNlUm9vdCI6Ii9Vc2Vycy9hbmRlbGFyd2FuZGEvRGVza3RvcC9lLWNvbW0tdGVhbS1icm9ncmFtbWVycy1ibi9zcmMvbG9nZ2Vycy8iLCJzb3VyY2VzIjpbImNoZWNrb3V0LmxvZ2dlci5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKiBlc2xpbnQtZGlzYWJsZSBpbXBvcnQvbmFtZWQgKi9cbmltcG9ydCBsb2dnZXIgZnJvbSAnLi4vY29uZmlncy9sb2dnZXInO1xuaW1wb3J0IHsgTG9nIH0gZnJvbSAnLi4vZGF0YWJhc2UvbW9kZWxzJztcblxuZXhwb3J0IGNvbnN0IGNyZWF0ZU9yZGVycyA9IGFzeW5jIChyZXEsIHByb2R1Y3RzKSA9PiB7XG4gIGNvbnN0IGxvZ0RhdGEgPSB7XG4gICAgbGV2ZWw6ICdpbmZvJyxcbiAgICBtZXNzYWdlOiBgVXNlciAke3JlcS51c2VyLmVtYWlsfSBjcmVhdGVkIGFuIG9yZGVyIHN1Y2Nlc3NmdWxseWAsXG4gICAgdXNlcklkOiByZXEudXNlci5pZCxcbiAgICBtZXRhZGF0YTogeyBwcm9kdWN0cyB9LFxuICB9O1xuICBhd2FpdCBMb2cuY3JlYXRlKGxvZ0RhdGEpO1xuICBsb2dnZXIuaW5mbyhgVXNlciAke3JlcS51c2VyLmVtYWlsfSBjcmVhdGVkIGFuIG9yZGVyIHN1Y2Nlc3NmdWxseWApO1xufTtcblxuZXhwb3J0IGNvbnN0IE9yZGVyRXJyb3IgPSBhc3luYyAocmVxLCBlcnJvcikgPT4ge1xuICBjb25zdCBsb2dEYXRhID0ge1xuICAgIGxldmVsOiAnZXJyb3InLFxuICAgIG1lc3NhZ2U6IGVycm9yLm1lc3NhZ2UsXG4gICAgdXNlcklkOiByZXEudXNlci5pZCxcbiAgICBtZXRhZGF0YTogeyBlcnJvciB9LFxuICB9O1xuICBhd2FpdCBMb2cuY3JlYXRlKGxvZ0RhdGEpO1xuICBsb2dnZXIuZXJyb3IoYFVzZXIgJHtyZXEudXNlci5lbWFpbH0gZW5jb3VudGVyZWQgYW4gZXJyb3Igd2hpbGUgY3JlYXRpbmcgYW4gb3JkZXI6ICR7ZXJyb3IubWVzc2FnZX1gKTtcbn07XG5cbmV4cG9ydCBjb25zdCB2aWV3T3JkZXJzID0gYXN5bmMgKHJlcSwgb3JkZXIpID0+IHtcbiAgY29uc3QgbG9nRGF0YSA9IHtcbiAgICBsZXZlbDogJ2luZm8nLFxuICAgIG1lc3NhZ2U6IGBVc2VyICR7cmVxLnVzZXIuZW1haWx9IHZpZXdlZCBhbiBvcmRlciR7b3JkZXIuaWR9IHN1Y2Nlc3NmdWxseWAsXG4gICAgdXNlcklkOiByZXEudXNlci5pZCxcbiAgICBtZXRhZGF0YTogeyB2aWV3T3JkZXJSZXF1ZXN0OiByZXEuYm9keSB9LFxuICB9O1xuICBhd2FpdCBMb2cuY3JlYXRlKGxvZ0RhdGEpO1xuICBsb2dnZXIuaW5mbyhgVXNlciAke3JlcS51c2VyLmVtYWlsfSB2aWV3ZWQgYW4gb3JkZXIgc3VjY2Vzc2Z1bGx5YCk7XG59O1xuZXhwb3J0IGNvbnN0IHZpZXdPcmRlcnNzID0gYXN5bmMgKHJlcSwgb3JkZXIpID0+IHtcbiAgY29uc3QgbG9nRGF0YSA9IHtcbiAgICBsZXZlbDogJ2luZm8nLFxuICAgIG1lc3NhZ2U6IGBVc2VyICR7cmVxLnVzZXIuZW1haWx9IHZpZXdlZCAgYWxsIGhpcyBvcmRlcnMgc3VjY2Vzc2Z1bGx5YCxcbiAgICB1c2VySWQ6IHJlcS51c2VyLmlkLFxuICAgIG1ldGFkYXRhOiB7IHZpZXdPcmRlclJlcXVlc3Q6IG9yZGVyIH0sXG4gIH07XG4gIGF3YWl0IExvZy5jcmVhdGUobG9nRGF0YSk7XG4gIGxvZ2dlci5pbmZvKGBVc2VyICR7cmVxLnVzZXIuZW1haWx9IHZpZXdlZCAgYWxsIGhpcyBvcmRlcnMgc3VjY2Vzc2Z1bGx5YCk7XG59O1xuZXhwb3J0IGNvbnN0IHVwZGF0ZWRPcmRlcnMgPSBhc3luYyAocmVxLCBvcmRlcikgPT4ge1xuICBjb25zdCBsb2dEYXRhID0ge1xuICAgIGxldmVsOiAnaW5mbycsXG4gICAgbWVzc2FnZTogYFVzZXIgJHtyZXEudXNlci5lbWFpbH0gdXBkYXRlZCBhbiBvcmRlciR7b3JkZXIuaWR9IHN1Y2Nlc3NmdWxseWAsXG4gICAgdXNlcklkOiByZXEudXNlci5pZCxcbiAgICBtZXRhZGF0YTogeyBjYW5jZWxPcmRlclJlcXVlc3Q6IHJlcS5ib2R5IH0sXG4gIH07XG4gIGF3YWl0IExvZy5jcmVhdGUobG9nRGF0YSk7XG4gIGxvZ2dlci5pbmZvKGBVc2VyICR7cmVxLnVzZXIuZW1haWx9IHVwZGF0ZWQgYW4gb3JkZXIke29yZGVyLmlkfSBzdWNjZXNzZnVsbHlgKTtcbn07XG5leHBvcnQgY29uc3QgZGVsZXRlZE9yZGVycyA9IGFzeW5jIChyZXEsIG9yZGVyKSA9PiB7XG4gIGNvbnN0IGxvZ0RhdGEgPSB7XG4gICAgbGV2ZWw6ICdpbmZvJyxcbiAgICBtZXNzYWdlOiBgVXNlciAke3JlcS51c2VyLmVtYWlsfSBkZWxldGVkIGFuIG9yZGVyJHtvcmRlci5pZH0gc3VjY2Vzc2Z1bGx5YCxcbiAgICB1c2VySWQ6IHJlcS51c2VyLmlkLFxuICAgIG1ldGFkYXRhOiB7IGNhbmNlbE9yZGVyUmVxdWVzdDogcmVxLmJvZHkgfSxcbiAgfTtcbiAgYXdhaXQgTG9nLmNyZWF0ZShsb2dEYXRhKTtcbiAgbG9nZ2VyLmluZm8oYFVzZXIgJHtyZXEudXNlci5lbWFpbH0gZGVsZXRlZCBhbiBvcmRlciR7b3JkZXIuaWR9IHN1Y2Nlc3NmdWxseWApO1xufTtcbmV4cG9ydCBjb25zdCBhZG1pbkdldE9yZGVycyA9IGFzeW5jIChyZXEsIG9yZGVyKSA9PiB7XG4gIGNvbnN0IGxvZ0RhdGEgPSB7XG4gICAgbGV2ZWw6ICdpbmZvJyxcbiAgICBtZXNzYWdlOiBgVXNlciAke3JlcS51c2VyLmVtYWlsfSBnZXQgYWxsICBvcmRlcnMgc3VjY2Vzc2Z1bGx5YCxcbiAgICB1c2VySWQ6IHJlcS51c2VyLmlkLFxuICAgIG1ldGFkYXRhOiB7IEFsbE9yZGVyUmVxdWVzdDogb3JkZXIgfSxcbiAgfTtcbiAgYXdhaXQgTG9nLmNyZWF0ZShsb2dEYXRhKTtcbiAgbG9nZ2VyLmluZm8oYFVzZXIgJHtyZXEudXNlci5lbWFpbH0gZ2V0IGFsbCAgb3JkZXJzIHN1Y2Nlc3NmdWxseWApO1xufTtcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUNBLElBQUFBLE9BQUEsR0FBQUMsc0JBQUEsQ0FBQUMsT0FBQTtBQUNBLElBQUFDLE9BQUEsR0FBQUQsT0FBQTtBQUZBOztBQUlPLE1BQU1FLFlBQVksR0FBRyxNQUFBQSxDQUFPQyxHQUFHLEVBQUVDLFFBQVEsS0FBSztFQUNuRCxNQUFNQyxPQUFPLEdBQUc7SUFDZEMsS0FBSyxFQUFFLE1BQU07SUFDYkMsT0FBTyxFQUFHLFFBQU9KLEdBQUcsQ0FBQ0ssSUFBSSxDQUFDQyxLQUFNLGdDQUErQjtJQUMvREMsTUFBTSxFQUFFUCxHQUFHLENBQUNLLElBQUksQ0FBQ0csRUFBRTtJQUNuQkMsUUFBUSxFQUFFO01BQUVSO0lBQVM7RUFDdkIsQ0FBQztFQUNELE1BQU1TLFdBQUcsQ0FBQ0MsTUFBTSxDQUFDVCxPQUFPLENBQUM7RUFDekJVLGVBQU0sQ0FBQ0MsSUFBSSxDQUFFLFFBQU9iLEdBQUcsQ0FBQ0ssSUFBSSxDQUFDQyxLQUFNLGdDQUErQixDQUFDO0FBQ3JFLENBQUM7QUFBQ1EsT0FBQSxDQUFBZixZQUFBLEdBQUFBLFlBQUE7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","map":{"version":3,"names":["_logger","_interopRequireDefault","require","_models","createOrders","req","products","logData","level","message","user","email","userId","id","metadata","Log","create","logger","info","exports","OrderError","error","viewOrders","order","viewOrderRequest","body","viewOrderss","updatedOrders","cancelOrderRequest","deletedOrders","adminGetOrders","AllOrderRequest"],"sourceRoot":"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/loggers/","sources":["checkout.logger.js"],"sourcesContent":["/* eslint-disable import/named */\nimport logger from '../configs/logger';\nimport { Log } from '../database/models';\n\nexport const createOrders = async (req, products) => {\n  const logData = {\n    level: 'info',\n    message: `User ${req.user.email} created an order successfully`,\n    userId: req.user.id,\n    metadata: { products },\n  };\n  await Log.create(logData);\n  logger.info(`User ${req.user.email} created an order successfully`);\n};\n\nexport const OrderError = async (req, error) => {\n  const logData = {\n    level: 'error',\n    message: error.message,\n    userId: req.user.id,\n    metadata: { error },\n  };\n  await Log.create(logData);\n  logger.error(`User ${req.user.email} encountered an error while creating an order: ${error.message}`);\n};\n\nexport const viewOrders = async (req, order) => {\n  const logData = {\n    level: 'info',\n    message: `User ${req.user.email} viewed an order${order.id} successfully`,\n    userId: req.user.id,\n    metadata: { viewOrderRequest: req.body },\n  };\n  await Log.create(logData);\n  logger.info(`User ${req.user.email} viewed an order successfully`);\n};\nexport const viewOrderss = async (req, order) => {\n  const logData = {\n    level: 'info',\n    message: `User ${req.user.email} viewed  all his orders successfully`,\n    userId: req.user.id,\n    metadata: { viewOrderRequest: order },\n  };\n  await Log.create(logData);\n  logger.info(`User ${req.user.email} viewed  all his orders successfully`);\n};\nexport const updatedOrders = async (req, order) => {\n  const logData = {\n    level: 'info',\n    message: `User ${req.user.email} updated an order${order.id} successfully`,\n    userId: req.user.id,\n    metadata: { cancelOrderRequest: req.body },\n  };\n  await Log.create(logData);\n  logger.info(`User ${req.user.email} updated an order${order.id} successfully`);\n};\nexport const deletedOrders = async (req, order) => {\n  const logData = {\n    level: 'info',\n    message: `User ${req.user.email} deleted an order${order.id} successfully`,\n    userId: req.user.id,\n    metadata: { cancelOrderRequest: req.body },\n  };\n  await Log.create(logData);\n  logger.info(`User ${req.user.email} deleted an order${order.id} successfully`);\n};\nexport const adminGetOrders = async (req, order) => {\n  const logData = {\n    level: 'info',\n    message: `User ${req.user.email} get all  orders successfully`,\n    userId: req.user.id,\n    metadata: { AllOrderRequest: order },\n  };\n  await Log.create(logData);\n  logger.info(`User ${req.user.email} get all  orders successfully`);\n};\n"],"mappings":"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"}},"mtime":1682148437942},"{\"assumptions\":{},\"sourceRoot\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/validations/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"filename\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/validations/checkout.validation.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/node_modules/babel-plugin-add-module-exports/lib/index.js\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-runtime\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"regenerator\":true},\"externalDependencies\":[]},{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.21.0:development":{"value":{"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = orderValidation;\nvar _joi = _interopRequireDefault(require(\"joi\"));\n/**\n * Check for new password\n * @param {*} data data\n * @returns {Object} result\n */\nasync function orderValidation(data) {\n  const schema = _joi.default.object({\n    deliveryCountry: _joi.default.string().min(2).required().label('country'),\n    deliveryCity: _joi.default.string().min(1).required().label('city'),\n    deliveryStreet: _joi.default.string().min(2).required().label('street'),\n    paymentMethod: _joi.default.string().min(2)\n  });\n  const out = schema.validate(data, {\n    abortEarly: false\n  });\n  return out;\n}\nmodule.exports = exports.default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfam9pIiwiX2ludGVyb3BSZXF1aXJlRGVmYXVsdCIsInJlcXVpcmUiLCJvcmRlclZhbGlkYXRpb24iLCJkYXRhIiwic2NoZW1hIiwiSm9pIiwib2JqZWN0IiwiZGVsaXZlcnlDb3VudHJ5Iiwic3RyaW5nIiwibWluIiwicmVxdWlyZWQiLCJsYWJlbCIsImRlbGl2ZXJ5Q2l0eSIsImRlbGl2ZXJ5U3RyZWV0IiwicGF5bWVudE1ldGhvZCIsIm91dCIsInZhbGlkYXRlIiwiYWJvcnRFYXJseSIsIm1vZHVsZSIsImV4cG9ydHMiLCJkZWZhdWx0Il0sInNvdXJjZVJvb3QiOiIvVXNlcnMvYW5kZWxhcndhbmRhL0Rlc2t0b3AvZS1jb21tLXRlYW0tYnJvZ3JhbW1lcnMtYm4vc3JjL3ZhbGlkYXRpb25zLyIsInNvdXJjZXMiOlsiY2hlY2tvdXQudmFsaWRhdGlvbi5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgSm9pIGZyb20gJ2pvaSc7XG5cbi8qKlxuICogQ2hlY2sgZm9yIG5ldyBwYXNzd29yZFxuICogQHBhcmFtIHsqfSBkYXRhIGRhdGFcbiAqIEByZXR1cm5zIHtPYmplY3R9IHJlc3VsdFxuICovXG5leHBvcnQgZGVmYXVsdCBhc3luYyBmdW5jdGlvbiBvcmRlclZhbGlkYXRpb24oZGF0YSkge1xuICBjb25zdCBzY2hlbWEgPSBKb2kub2JqZWN0KHtcbiAgICBkZWxpdmVyeUNvdW50cnk6IEpvaS5zdHJpbmcoKS5taW4oMikucmVxdWlyZWQoKS5sYWJlbCgnY291bnRyeScpLFxuICAgIGRlbGl2ZXJ5Q2l0eTogSm9pLnN0cmluZygpLm1pbigxKS5yZXF1aXJlZCgpLmxhYmVsKCdjaXR5JyksXG4gICAgZGVsaXZlcnlTdHJlZXQ6IEpvaS5zdHJpbmcoKS5taW4oMikucmVxdWlyZWQoKS5sYWJlbCgnc3RyZWV0JyksXG4gICAgcGF5bWVudE1ldGhvZDogSm9pLnN0cmluZygpLm1pbigyKSxcbiAgfSk7XG4gIGNvbnN0IG91dCA9IHNjaGVtYS52YWxpZGF0ZShkYXRhLCB7XG4gICAgYWJvcnRFYXJseTogZmFsc2VcbiAgfSk7XG4gIHJldHVybiBvdXQ7XG59XG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBQSxJQUFBQSxJQUFBLEdBQUFDLHNCQUFBLENBQUFDLE9BQUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ2UsZUFBZUMsZUFBZUEsQ0FBQ0MsSUFBSSxFQUFFO0VBQ2xELE1BQU1DLE1BQU0sR0FBR0MsWUFBRyxDQUFDQyxNQUFNLENBQUM7SUFDeEJDLGVBQWUsRUFBRUYsWUFBRyxDQUFDRyxNQUFNLEVBQUUsQ0FBQ0MsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDQyxRQUFRLEVBQUUsQ0FBQ0MsS0FBSyxDQUFDLFNBQVMsQ0FBQztJQUNoRUMsWUFBWSxFQUFFUCxZQUFHLENBQUNHLE1BQU0sRUFBRSxDQUFDQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUNDLFFBQVEsRUFBRSxDQUFDQyxLQUFLLENBQUMsTUFBTSxDQUFDO0lBQzFERSxjQUFjLEVBQUVSLFlBQUcsQ0FBQ0csTUFBTSxFQUFFLENBQUNDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQ0MsUUFBUSxFQUFFLENBQUNDLEtBQUssQ0FBQyxRQUFRLENBQUM7SUFDOURHLGFBQWEsRUFBRVQsWUFBRyxDQUFDRyxNQUFNLEVBQUUsQ0FBQ0MsR0FBRyxDQUFDLENBQUM7RUFDbkMsQ0FBQyxDQUFDO0VBQ0YsTUFBTU0sR0FBRyxHQUFHWCxNQUFNLENBQUNZLFFBQVEsQ0FBQ2IsSUFBSSxFQUFFO0lBQ2hDYyxVQUFVLEVBQUU7RUFDZCxDQUFDLENBQUM7RUFDRixPQUFPRixHQUFHO0FBQ1o7QUFBQ0csTUFBQSxDQUFBQyxPQUFBLEdBQUFBLE9BQUEsQ0FBQUMsT0FBQSJ9","map":{"version":3,"names":["_joi","_interopRequireDefault","require","orderValidation","data","schema","Joi","object","deliveryCountry","string","min","required","label","deliveryCity","deliveryStreet","paymentMethod","out","validate","abortEarly","module","exports","default"],"sourceRoot":"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/validations/","sources":["checkout.validation.js"],"sourcesContent":["import Joi from 'joi';\n\n/**\n * Check for new password\n * @param {*} data data\n * @returns {Object} result\n */\nexport default async function orderValidation(data) {\n  const schema = Joi.object({\n    deliveryCountry: Joi.string().min(2).required().label('country'),\n    deliveryCity: Joi.string().min(1).required().label('city'),\n    deliveryStreet: Joi.string().min(2).required().label('street'),\n    paymentMethod: Joi.string().min(2),\n  });\n  const out = schema.validate(data, {\n    abortEarly: false\n  });\n  return out;\n}\n"],"mappings":";;;;;;;AAAA,IAAAA,IAAA,GAAAC,sBAAA,CAAAC,OAAA;AAEA;AACA;AACA;AACA;AACA;AACe,eAAeC,eAAeA,CAACC,IAAI,EAAE;EAClD,MAAMC,MAAM,GAAGC,YAAG,CAACC,MAAM,CAAC;IACxBC,eAAe,EAAEF,YAAG,CAACG,MAAM,EAAE,CAACC,GAAG,CAAC,CAAC,CAAC,CAACC,QAAQ,EAAE,CAACC,KAAK,CAAC,SAAS,CAAC;IAChEC,YAAY,EAAEP,YAAG,CAACG,MAAM,EAAE,CAACC,GAAG,CAAC,CAAC,CAAC,CAACC,QAAQ,EAAE,CAACC,KAAK,CAAC,MAAM,CAAC;IAC1DE,cAAc,EAAER,YAAG,CAACG,MAAM,EAAE,CAACC,GAAG,CAAC,CAAC,CAAC,CAACC,QAAQ,EAAE,CAACC,KAAK,CAAC,QAAQ,CAAC;IAC9DG,aAAa,EAAET,YAAG,CAACG,MAAM,EAAE,CAACC,GAAG,CAAC,CAAC;EACnC,CAAC,CAAC;EACF,MAAMM,GAAG,GAAGX,MAAM,CAACY,QAAQ,CAACb,IAAI,EAAE;IAChCc,UAAU,EAAE;EACd,CAAC,CAAC;EACF,OAAOF,GAAG;AACZ;AAACG,MAAA,CAAAC,OAAA,GAAAA,OAAA,CAAAC,OAAA"}},"mtime":1685643189474},"{\"assumptions\":{},\"sourceRoot\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/routes/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"filename\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/routes/chat.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/node_modules/babel-plugin-add-module-exports/lib/index.js\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-runtime\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"regenerator\":true},\"externalDependencies\":[]},{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.21.0:development":{"value":{"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nvar _express = _interopRequireDefault(require(\"express\"));\nvar _chat = require(\"../controllers/chat.controller\");\nvar _verifyToken = _interopRequireDefault(require(\"../middlewares/verifyToken\"));\n/* eslint-disable import/no-import-module-exports */\n\nconst routes = _express.default.Router();\nroutes.post('/message', _verifyToken.default, _chat.ChatController.addSingleMessage);\nroutes.get('/all', _verifyToken.default, _chat.ChatController.getAllMessages);\nmodule.exports = routes;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfZXhwcmVzcyIsIl9pbnRlcm9wUmVxdWlyZURlZmF1bHQiLCJyZXF1aXJlIiwiX2NoYXQiLCJfdmVyaWZ5VG9rZW4iLCJyb3V0ZXMiLCJleHByZXNzIiwiUm91dGVyIiwicG9zdCIsImlzQXV0aGVudGljYXRlZCIsIkNoYXRDb250cm9sbGVyIiwiYWRkU2luZ2xlTWVzc2FnZSIsImdldCIsImdldEFsbE1lc3NhZ2VzIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJzb3VyY2VSb290IjoiL1VzZXJzL2FuZGVsYXJ3YW5kYS9EZXNrdG9wL2UtY29tbS10ZWFtLWJyb2dyYW1tZXJzLWJuL3NyYy9yb3V0ZXMvIiwic291cmNlcyI6WyJjaGF0LmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qIGVzbGludC1kaXNhYmxlIGltcG9ydC9uby1pbXBvcnQtbW9kdWxlLWV4cG9ydHMgKi9cbmltcG9ydCBleHByZXNzIGZyb20gJ2V4cHJlc3MnO1xuaW1wb3J0IHsgQ2hhdENvbnRyb2xsZXIgfSBmcm9tICcuLi9jb250cm9sbGVycy9jaGF0LmNvbnRyb2xsZXInO1xuaW1wb3J0IGlzQXV0aGVudGljYXRlZCBmcm9tICcuLi9taWRkbGV3YXJlcy92ZXJpZnlUb2tlbic7XG5cbmNvbnN0IHJvdXRlcyA9IGV4cHJlc3MuUm91dGVyKCk7XG5cbnJvdXRlcy5wb3N0KCcvbWVzc2FnZScsIGlzQXV0aGVudGljYXRlZCwgQ2hhdENvbnRyb2xsZXIuYWRkU2luZ2xlTWVzc2FnZSk7XG5yb3V0ZXMuZ2V0KCcvYWxsJywgaXNBdXRoZW50aWNhdGVkLCBDaGF0Q29udHJvbGxlci5nZXRBbGxNZXNzYWdlcyk7XG5cbm1vZHVsZS5leHBvcnRzID0gcm91dGVzO1xuIl0sIm1hcHBpbmdzIjoiOzs7QUFDQSxJQUFBQSxRQUFBLEdBQUFDLHNCQUFBLENBQUFDLE9BQUE7QUFDQSxJQUFBQyxLQUFBLEdBQUFELE9BQUE7QUFDQSxJQUFBRSxZQUFBLEdBQUFILHNCQUFBLENBQUFDLE9BQUE7QUFIQTs7QUFLQSxNQUFNRyxNQUFNLEdBQUdDLGdCQUFPLENBQUNDLE1BQU0sRUFBRTtBQUUvQkYsTUFBTSxDQUFDRyxJQUFJLENBQUMsVUFBVSxFQUFFQyxvQkFBZSxFQUFFQyxvQkFBYyxDQUFDQyxnQkFBZ0IsQ0FBQztBQUN6RU4sTUFBTSxDQUFDTyxHQUFHLENBQUMsTUFBTSxFQUFFSCxvQkFBZSxFQUFFQyxvQkFBYyxDQUFDRyxjQUFjLENBQUM7QUFFbEVDLE1BQU0sQ0FBQ0MsT0FBTyxHQUFHVixNQUFNIn0=","map":{"version":3,"names":["_express","_interopRequireDefault","require","_chat","_verifyToken","routes","express","Router","post","isAuthenticated","ChatController","addSingleMessage","get","getAllMessages","module","exports"],"sourceRoot":"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/routes/","sources":["chat.js"],"sourcesContent":["/* eslint-disable import/no-import-module-exports */\nimport express from 'express';\nimport { ChatController } from '../controllers/chat.controller';\nimport isAuthenticated from '../middlewares/verifyToken';\n\nconst routes = express.Router();\n\nroutes.post('/message', isAuthenticated, ChatController.addSingleMessage);\nroutes.get('/all', isAuthenticated, ChatController.getAllMessages);\n\nmodule.exports = routes;\n"],"mappings":";;;AACA,IAAAA,QAAA,GAAAC,sBAAA,CAAAC,OAAA;AACA,IAAAC,KAAA,GAAAD,OAAA;AACA,IAAAE,YAAA,GAAAH,sBAAA,CAAAC,OAAA;AAHA;;AAKA,MAAMG,MAAM,GAAGC,gBAAO,CAACC,MAAM,EAAE;AAE/BF,MAAM,CAACG,IAAI,CAAC,UAAU,EAAEC,oBAAe,EAAEC,oBAAc,CAACC,gBAAgB,CAAC;AACzEN,MAAM,CAACO,GAAG,CAAC,MAAM,EAAEH,oBAAe,EAAEC,oBAAc,CAACG,cAAc,CAAC;AAElEC,MAAM,CAACC,OAAO,GAAGV,MAAM"}},"mtime":1682148437957},"{\"assumptions\":{},\"sourceRoot\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/controllers/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"filename\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/controllers/chat.controller.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/node_modules/babel-plugin-add-module-exports/lib/index.js\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-runtime\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"regenerator\":true},\"externalDependencies\":[]},{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.21.0:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.ChatController = void 0;\nvar _socket = require(\"../helpers/socket\");\nvar _chat = require(\"../services/chat.services\");\n/* eslint-disable require-jsdoc */\n/* eslint-disable import/prefer-default-export */\n\n// import { getMessages, addMessage } from '../services/chat.services';\n\nclass ChatController {\n  static async getAllMessages(req, res) {\n    try {\n      const messages = await _chat.ChatService.getMessages('brogrammers');\n      return res.status(200).json({\n        message: 'Fetched  messages',\n        messages\n      });\n    } catch (err) {\n      return res.status(500).json({\n        error: err.message,\n        message: 'Failed to fetch messages'\n      });\n    }\n  }\n  static async addSingleMessage(req, res) {\n    try {\n      const messages = await _chat.ChatService.saveMessage({\n        room: 'brogrammers',\n        userId: req.user.id,\n        message: req.body.message\n      });\n      const sentMessage = await _chat.ChatService.getOneMessage(messages.id);\n      _socket.SocketUtil.socketEmit('message', sentMessage);\n      return res.status(200).json({\n        message: 'Message sent.',\n        messages\n      });\n    } catch (err) {\n      return res.status(500).json({\n        error: err.message,\n        message: 'Failed to send a new message'\n      });\n    }\n  }\n}\nexports.ChatController = ChatController;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfc29ja2V0IiwicmVxdWlyZSIsIl9jaGF0IiwiQ2hhdENvbnRyb2xsZXIiLCJnZXRBbGxNZXNzYWdlcyIsInJlcSIsInJlcyIsIm1lc3NhZ2VzIiwiQ2hhdFNlcnZpY2UiLCJnZXRNZXNzYWdlcyIsInN0YXR1cyIsImpzb24iLCJtZXNzYWdlIiwiZXJyIiwiZXJyb3IiLCJhZGRTaW5nbGVNZXNzYWdlIiwic2F2ZU1lc3NhZ2UiLCJyb29tIiwidXNlcklkIiwidXNlciIsImlkIiwiYm9keSIsInNlbnRNZXNzYWdlIiwiZ2V0T25lTWVzc2FnZSIsIlNvY2tldFV0aWwiLCJzb2NrZXRFbWl0IiwiZXhwb3J0cyJdLCJzb3VyY2VSb290IjoiL1VzZXJzL2FuZGVsYXJ3YW5kYS9EZXNrdG9wL2UtY29tbS10ZWFtLWJyb2dyYW1tZXJzLWJuL3NyYy9jb250cm9sbGVycy8iLCJzb3VyY2VzIjpbImNoYXQuY29udHJvbGxlci5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKiBlc2xpbnQtZGlzYWJsZSByZXF1aXJlLWpzZG9jICovXG4vKiBlc2xpbnQtZGlzYWJsZSBpbXBvcnQvcHJlZmVyLWRlZmF1bHQtZXhwb3J0ICovXG5cbi8vIGltcG9ydCB7IGdldE1lc3NhZ2VzLCBhZGRNZXNzYWdlIH0gZnJvbSAnLi4vc2VydmljZXMvY2hhdC5zZXJ2aWNlcyc7XG5pbXBvcnQgeyBTb2NrZXRVdGlsIH0gZnJvbSAnLi4vaGVscGVycy9zb2NrZXQnO1xuaW1wb3J0IHsgQ2hhdFNlcnZpY2UgfSBmcm9tICcuLi9zZXJ2aWNlcy9jaGF0LnNlcnZpY2VzJztcblxuZXhwb3J0IGNsYXNzIENoYXRDb250cm9sbGVyIHtcbiAgc3RhdGljIGFzeW5jIGdldEFsbE1lc3NhZ2VzKHJlcSwgcmVzKSB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IG1lc3NhZ2VzID0gYXdhaXQgQ2hhdFNlcnZpY2UuZ2V0TWVzc2FnZXMoJ2Jyb2dyYW1tZXJzJyk7XG4gICAgICByZXR1cm4gcmVzXG4gICAgICAgIC5zdGF0dXMoMjAwKVxuICAgICAgICAuanNvbih7IG1lc3NhZ2U6ICdGZXRjaGVkICBtZXNzYWdlcycsIG1lc3NhZ2VzIH0pO1xuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNTAwKS5qc29uKHtcbiAgICAgICAgZXJyb3I6IGVyci5tZXNzYWdlLFxuICAgICAgICBtZXNzYWdlOiAnRmFpbGVkIHRvIGZldGNoIG1lc3NhZ2VzJyxcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyBhc3luYyBhZGRTaW5nbGVNZXNzYWdlKHJlcSwgcmVzKSB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IG1lc3NhZ2VzID0gYXdhaXQgQ2hhdFNlcnZpY2Uuc2F2ZU1lc3NhZ2Uoe1xuICAgICAgICByb29tOiAnYnJvZ3JhbW1lcnMnLFxuICAgICAgICB1c2VySWQ6IHJlcS51c2VyLmlkLFxuICAgICAgICBtZXNzYWdlOiByZXEuYm9keS5tZXNzYWdlLFxuICAgICAgfSk7XG4gICAgICBjb25zdCBzZW50TWVzc2FnZSA9IGF3YWl0IENoYXRTZXJ2aWNlLmdldE9uZU1lc3NhZ2UobWVzc2FnZXMuaWQpO1xuICAgICAgU29ja2V0VXRpbC5zb2NrZXRFbWl0KCdtZXNzYWdlJywgc2VudE1lc3NhZ2UpO1xuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoMjAwKS5qc29uKHsgbWVzc2FnZTogJ01lc3NhZ2Ugc2VudC4nLCBtZXNzYWdlcyB9KTtcbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDUwMCkuanNvbih7XG4gICAgICAgIGVycm9yOiBlcnIubWVzc2FnZSxcbiAgICAgICAgbWVzc2FnZTogJ0ZhaWxlZCB0byBzZW5kIGEgbmV3IG1lc3NhZ2UnLFxuICAgICAgfSk7XG4gICAgfVxuICB9XG59XG4iXSwibWFwcGluZ3MiOiI7Ozs7OztBQUlBLElBQUFBLE9BQUEsR0FBQUMsT0FBQTtBQUNBLElBQUFDLEtBQUEsR0FBQUQsT0FBQTtBQUxBO0FBQ0E7O0FBRUE7O0FBSU8sTUFBTUUsY0FBYyxDQUFDO0VBQzFCLGFBQWFDLGNBQWNBLENBQUNDLEdBQUcsRUFBRUMsR0FBRyxFQUFFO0lBQ3BDLElBQUk7TUFDRixNQUFNQyxRQUFRLEdBQUcsTUFBTUMsaUJBQVcsQ0FBQ0MsV0FBVyxDQUFDLGFBQWEsQ0FBQztNQUM3RCxPQUFPSCxHQUFHLENBQ1BJLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FDWEMsSUFBSSxDQUFDO1FBQUVDLE9BQU8sRUFBRSxtQkFBbUI7UUFBRUw7TUFBUyxDQUFDLENBQUM7SUFDckQsQ0FBQyxDQUFDLE9BQU9NLEdBQUcsRUFBRTtNQUNaLE9BQU9QLEdBQUcsQ0FBQ0ksTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDQyxJQUFJLENBQUM7UUFDMUJHLEtBQUssRUFBRUQsR0FBRyxDQUFDRCxPQUFPO1FBQ2xCQSxPQUFPLEVBQUU7TUFDWCxDQUFDLENBQUM7SUFDSjtFQUNGO0VBRUEsYUFBYUcsZ0JBQWdCQSxDQUFDVixHQUFHLEVBQUVDLEdBQUcsRUFBRTtJQUN0QyxJQUFJO01BQ0YsTUFBTUMsUUFBUSxHQUFHLE1BQU1DLGlCQUFXLENBQUNRLFdBQVcsQ0FBQztRQUM3Q0MsSUFBSSxFQUFFLGFBQWE7UUFDbkJDLE1BQU0sRUFBRWIsR0FBRyxDQUFDYyxJQUFJLENBQUNDLEVBQUU7UUFDbkJSLE9BQU8sRUFBRVAsR0FBRyxDQUFDZ0IsSUFBSSxDQUFDVDtNQUNwQixDQUFDLENBQUM7TUFDRixNQUFNVSxXQUFXLEdBQUcsTUFBTWQsaUJBQVcsQ0FBQ2UsYUFBYSxDQUFDaEIsUUFBUSxDQUFDYSxFQUFFLENBQUM7TUFDaEVJLGtCQUFVLENBQUNDLFVBQVUsQ0FBQyxTQUFTLEVBQUVILFdBQVcsQ0FBQztNQUM3QyxPQUFPaEIsR0FBRyxDQUFDSSxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUNDLElBQUksQ0FBQztRQUFFQyxPQUFPLEVBQUUsZUFBZTtRQUFFTDtNQUFTLENBQUMsQ0FBQztJQUNyRSxDQUFDLENBQUMsT0FBT00sR0FBRyxFQUFFO01BQ1osT0FBT1AsR0FBRyxDQUFDSSxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUNDLElBQUksQ0FBQztRQUMxQkcsS0FBSyxFQUFFRCxHQUFHLENBQUNELE9BQU87UUFDbEJBLE9BQU8sRUFBRTtNQUNYLENBQUMsQ0FBQztJQUNKO0VBQ0Y7QUFDRjtBQUFDYyxPQUFBLENBQUF2QixjQUFBLEdBQUFBLGNBQUEifQ==","map":{"version":3,"names":["_socket","require","_chat","ChatController","getAllMessages","req","res","messages","ChatService","getMessages","status","json","message","err","error","addSingleMessage","saveMessage","room","userId","user","id","body","sentMessage","getOneMessage","SocketUtil","socketEmit","exports"],"sourceRoot":"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/controllers/","sources":["chat.controller.js"],"sourcesContent":["/* eslint-disable require-jsdoc */\n/* eslint-disable import/prefer-default-export */\n\n// import { getMessages, addMessage } from '../services/chat.services';\nimport { SocketUtil } from '../helpers/socket';\nimport { ChatService } from '../services/chat.services';\n\nexport class ChatController {\n  static async getAllMessages(req, res) {\n    try {\n      const messages = await ChatService.getMessages('brogrammers');\n      return res\n        .status(200)\n        .json({ message: 'Fetched  messages', messages });\n    } catch (err) {\n      return res.status(500).json({\n        error: err.message,\n        message: 'Failed to fetch messages',\n      });\n    }\n  }\n\n  static async addSingleMessage(req, res) {\n    try {\n      const messages = await ChatService.saveMessage({\n        room: 'brogrammers',\n        userId: req.user.id,\n        message: req.body.message,\n      });\n      const sentMessage = await ChatService.getOneMessage(messages.id);\n      SocketUtil.socketEmit('message', sentMessage);\n      return res.status(200).json({ message: 'Message sent.', messages });\n    } catch (err) {\n      return res.status(500).json({\n        error: err.message,\n        message: 'Failed to send a new message',\n      });\n    }\n  }\n}\n"],"mappings":";;;;;;AAIA,IAAAA,OAAA,GAAAC,OAAA;AACA,IAAAC,KAAA,GAAAD,OAAA;AALA;AACA;;AAEA;;AAIO,MAAME,cAAc,CAAC;EAC1B,aAAaC,cAAcA,CAACC,GAAG,EAAEC,GAAG,EAAE;IACpC,IAAI;MACF,MAAMC,QAAQ,GAAG,MAAMC,iBAAW,CAACC,WAAW,CAAC,aAAa,CAAC;MAC7D,OAAOH,GAAG,CACPI,MAAM,CAAC,GAAG,CAAC,CACXC,IAAI,CAAC;QAAEC,OAAO,EAAE,mBAAmB;QAAEL;MAAS,CAAC,CAAC;IACrD,CAAC,CAAC,OAAOM,GAAG,EAAE;MACZ,OAAOP,GAAG,CAACI,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;QAC1BG,KAAK,EAAED,GAAG,CAACD,OAAO;QAClBA,OAAO,EAAE;MACX,CAAC,CAAC;IACJ;EACF;EAEA,aAAaG,gBAAgBA,CAACV,GAAG,EAAEC,GAAG,EAAE;IACtC,IAAI;MACF,MAAMC,QAAQ,GAAG,MAAMC,iBAAW,CAACQ,WAAW,CAAC;QAC7CC,IAAI,EAAE,aAAa;QACnBC,MAAM,EAAEb,GAAG,CAACc,IAAI,CAACC,EAAE;QACnBR,OAAO,EAAEP,GAAG,CAACgB,IAAI,CAACT;MACpB,CAAC,CAAC;MACF,MAAMU,WAAW,GAAG,MAAMd,iBAAW,CAACe,aAAa,CAAChB,QAAQ,CAACa,EAAE,CAAC;MAChEI,kBAAU,CAACC,UAAU,CAAC,SAAS,EAAEH,WAAW,CAAC;MAC7C,OAAOhB,GAAG,CAACI,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;QAAEC,OAAO,EAAE,eAAe;QAAEL;MAAS,CAAC,CAAC;IACrE,CAAC,CAAC,OAAOM,GAAG,EAAE;MACZ,OAAOP,GAAG,CAACI,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;QAC1BG,KAAK,EAAED,GAAG,CAACD,OAAO;QAClBA,OAAO,EAAE;MACX,CAAC,CAAC;IACJ;EACF;AACF;AAACc,OAAA,CAAAvB,cAAA,GAAAA,cAAA"}},"mtime":1685643189435},"{\"assumptions\":{},\"sourceRoot\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/services/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"filename\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/services/chat.services.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/node_modules/babel-plugin-add-module-exports/lib/index.js\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-runtime\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"regenerator\":true},\"externalDependencies\":[]},{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.21.0:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.ChatService = void 0;\nvar _models = require(\"../database/models\");\n/* eslint-disable import/named */\n/* eslint-disable import/prefer-default-export */\n/* eslint-disable require-jsdoc */\n\nclass ChatService {\n  static async saveMessage(newMessage) {\n    const message = await _models.Chat.create(newMessage);\n    return message;\n  }\n  static async getOneMessage(id) {\n    const newMessage = await _models.Chat.findOne({\n      where: {\n        id\n      },\n      include: [{\n        model: _models.users,\n        as: 'user',\n        attributes: ['username']\n      }]\n    });\n    return newMessage;\n  }\n  static async getMessages(room) {\n    try {\n      return _models.Chat.findAll({\n        where: {\n          room\n        },\n        include: [{\n          model: _models.users,\n          as: 'user',\n          attributes: ['username']\n        }],\n        order: [['createdAt', 'DESC']]\n      });\n    } catch (error) {\n      return {\n        error\n      };\n    }\n  }\n}\nexports.ChatService = ChatService;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfbW9kZWxzIiwicmVxdWlyZSIsIkNoYXRTZXJ2aWNlIiwic2F2ZU1lc3NhZ2UiLCJuZXdNZXNzYWdlIiwibWVzc2FnZSIsIkNoYXQiLCJjcmVhdGUiLCJnZXRPbmVNZXNzYWdlIiwiaWQiLCJmaW5kT25lIiwid2hlcmUiLCJpbmNsdWRlIiwibW9kZWwiLCJ1c2VycyIsImFzIiwiYXR0cmlidXRlcyIsImdldE1lc3NhZ2VzIiwicm9vbSIsImZpbmRBbGwiLCJvcmRlciIsImVycm9yIiwiZXhwb3J0cyJdLCJzb3VyY2VSb290IjoiL1VzZXJzL2FuZGVsYXJ3YW5kYS9EZXNrdG9wL2UtY29tbS10ZWFtLWJyb2dyYW1tZXJzLWJuL3NyYy9zZXJ2aWNlcy8iLCJzb3VyY2VzIjpbImNoYXQuc2VydmljZXMuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLyogZXNsaW50LWRpc2FibGUgaW1wb3J0L25hbWVkICovXG4vKiBlc2xpbnQtZGlzYWJsZSBpbXBvcnQvcHJlZmVyLWRlZmF1bHQtZXhwb3J0ICovXG4vKiBlc2xpbnQtZGlzYWJsZSByZXF1aXJlLWpzZG9jICovXG5pbXBvcnQgeyBDaGF0LCB1c2VycyB9IGZyb20gJy4uL2RhdGFiYXNlL21vZGVscyc7XG5cbmV4cG9ydCBjbGFzcyBDaGF0U2VydmljZSB7XG4gIHN0YXRpYyBhc3luYyBzYXZlTWVzc2FnZShuZXdNZXNzYWdlKSB7XG4gICAgY29uc3QgbWVzc2FnZSA9IGF3YWl0IENoYXQuY3JlYXRlKG5ld01lc3NhZ2UpO1xuICAgIHJldHVybiBtZXNzYWdlO1xuICB9XG5cbiAgc3RhdGljIGFzeW5jIGdldE9uZU1lc3NhZ2UoaWQpIHtcbiAgICBjb25zdCBuZXdNZXNzYWdlID0gYXdhaXQgQ2hhdC5maW5kT25lKHtcbiAgICAgIHdoZXJlOiB7XG4gICAgICAgIGlkLFxuICAgICAgfSxcbiAgICAgIGluY2x1ZGU6IFtcbiAgICAgICAge1xuICAgICAgICAgIG1vZGVsOiB1c2VycyxcbiAgICAgICAgICBhczogJ3VzZXInLFxuICAgICAgICAgIGF0dHJpYnV0ZXM6IFsndXNlcm5hbWUnXSxcbiAgICAgICAgfSxcbiAgICAgIF0sXG4gICAgfSk7XG4gICAgcmV0dXJuIG5ld01lc3NhZ2U7XG4gIH1cblxuICBzdGF0aWMgYXN5bmMgZ2V0TWVzc2FnZXMocm9vbSkge1xuICAgIHRyeSB7XG4gICAgICByZXR1cm4gQ2hhdC5maW5kQWxsKHtcbiAgICAgICAgd2hlcmU6IHsgcm9vbSB9LFxuICAgICAgICBpbmNsdWRlOiBbXG4gICAgICAgICAge1xuICAgICAgICAgICAgbW9kZWw6IHVzZXJzLFxuICAgICAgICAgICAgYXM6ICd1c2VyJyxcbiAgICAgICAgICAgIGF0dHJpYnV0ZXM6IFsndXNlcm5hbWUnXSxcbiAgICAgICAgICB9LFxuICAgICAgICBdLFxuICAgICAgICBvcmRlcjogW1snY3JlYXRlZEF0JywgJ0RFU0MnXV0sXG4gICAgICB9KTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgcmV0dXJuIHsgZXJyb3IgfTtcbiAgICB9XG4gIH1cbn1cbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBR0EsSUFBQUEsT0FBQSxHQUFBQyxPQUFBO0FBSEE7QUFDQTtBQUNBOztBQUdPLE1BQU1DLFdBQVcsQ0FBQztFQUN2QixhQUFhQyxXQUFXQSxDQUFDQyxVQUFVLEVBQUU7SUFDbkMsTUFBTUMsT0FBTyxHQUFHLE1BQU1DLFlBQUksQ0FBQ0MsTUFBTSxDQUFDSCxVQUFVLENBQUM7SUFDN0MsT0FBT0MsT0FBTztFQUNoQjtFQUVBLGFBQWFHLGFBQWFBLENBQUNDLEVBQUUsRUFBRTtJQUM3QixNQUFNTCxVQUFVLEdBQUcsTUFBTUUsWUFBSSxDQUFDSSxPQUFPLENBQUM7TUFDcENDLEtBQUssRUFBRTtRQUNMRjtNQUNGLENBQUM7TUFDREcsT0FBTyxFQUFFLENBQ1A7UUFDRUMsS0FBSyxFQUFFQyxhQUFLO1FBQ1pDLEVBQUUsRUFBRSxNQUFNO1FBQ1ZDLFVBQVUsRUFBRSxDQUFDLFVBQVU7TUFDekIsQ0FBQztJQUVMLENBQUMsQ0FBQztJQUNGLE9BQU9aLFVBQVU7RUFDbkI7RUFFQSxhQUFhYSxXQUFXQSxDQUFDQyxJQUFJLEVBQUU7SUFDN0IsSUFBSTtNQUNGLE9BQU9aLFlBQUksQ0FBQ2EsT0FBTyxDQUFDO1FBQ2xCUixLQUFLLEVBQUU7VUFBRU87UUFBSyxDQUFDO1FBQ2ZOLE9BQU8sRUFBRSxDQUNQO1VBQ0VDLEtBQUssRUFBRUMsYUFBSztVQUNaQyxFQUFFLEVBQUUsTUFBTTtVQUNWQyxVQUFVLEVBQUUsQ0FBQyxVQUFVO1FBQ3pCLENBQUMsQ0FDRjtRQUNESSxLQUFLLEVBQUUsQ0FBQyxDQUFDLFdBQVcsRUFBRSxNQUFNLENBQUM7TUFDL0IsQ0FBQyxDQUFDO0lBQ0osQ0FBQyxDQUFDLE9BQU9DLEtBQUssRUFBRTtNQUNkLE9BQU87UUFBRUE7TUFBTSxDQUFDO0lBQ2xCO0VBQ0Y7QUFDRjtBQUFDQyxPQUFBLENBQUFwQixXQUFBLEdBQUFBLFdBQUEifQ==","map":{"version":3,"names":["_models","require","ChatService","saveMessage","newMessage","message","Chat","create","getOneMessage","id","findOne","where","include","model","users","as","attributes","getMessages","room","findAll","order","error","exports"],"sourceRoot":"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/services/","sources":["chat.services.js"],"sourcesContent":["/* eslint-disable import/named */\n/* eslint-disable import/prefer-default-export */\n/* eslint-disable require-jsdoc */\nimport { Chat, users } from '../database/models';\n\nexport class ChatService {\n  static async saveMessage(newMessage) {\n    const message = await Chat.create(newMessage);\n    return message;\n  }\n\n  static async getOneMessage(id) {\n    const newMessage = await Chat.findOne({\n      where: {\n        id,\n      },\n      include: [\n        {\n          model: users,\n          as: 'user',\n          attributes: ['username'],\n        },\n      ],\n    });\n    return newMessage;\n  }\n\n  static async getMessages(room) {\n    try {\n      return Chat.findAll({\n        where: { room },\n        include: [\n          {\n            model: users,\n            as: 'user',\n            attributes: ['username'],\n          },\n        ],\n        order: [['createdAt', 'DESC']],\n      });\n    } catch (error) {\n      return { error };\n    }\n  }\n}\n"],"mappings":";;;;;;AAGA,IAAAA,OAAA,GAAAC,OAAA;AAHA;AACA;AACA;;AAGO,MAAMC,WAAW,CAAC;EACvB,aAAaC,WAAWA,CAACC,UAAU,EAAE;IACnC,MAAMC,OAAO,GAAG,MAAMC,YAAI,CAACC,MAAM,CAACH,UAAU,CAAC;IAC7C,OAAOC,OAAO;EAChB;EAEA,aAAaG,aAAaA,CAACC,EAAE,EAAE;IAC7B,MAAML,UAAU,GAAG,MAAME,YAAI,CAACI,OAAO,CAAC;MACpCC,KAAK,EAAE;QACLF;MACF,CAAC;MACDG,OAAO,EAAE,CACP;QACEC,KAAK,EAAEC,aAAK;QACZC,EAAE,EAAE,MAAM;QACVC,UAAU,EAAE,CAAC,UAAU;MACzB,CAAC;IAEL,CAAC,CAAC;IACF,OAAOZ,UAAU;EACnB;EAEA,aAAaa,WAAWA,CAACC,IAAI,EAAE;IAC7B,IAAI;MACF,OAAOZ,YAAI,CAACa,OAAO,CAAC;QAClBR,KAAK,EAAE;UAAEO;QAAK,CAAC;QACfN,OAAO,EAAE,CACP;UACEC,KAAK,EAAEC,aAAK;UACZC,EAAE,EAAE,MAAM;UACVC,UAAU,EAAE,CAAC,UAAU;QACzB,CAAC,CACF;QACDI,KAAK,EAAE,CAAC,CAAC,WAAW,EAAE,MAAM,CAAC;MAC/B,CAAC,CAAC;IACJ,CAAC,CAAC,OAAOC,KAAK,EAAE;MACd,OAAO;QAAEA;MAAM,CAAC;IAClB;EACF;AACF;AAACC,OAAA,CAAApB,WAAA,GAAAA,WAAA"}},"mtime":1685643189471},"{\"assumptions\":{},\"sourceRoot\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/routes/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"filename\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/routes/notification.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/node_modules/babel-plugin-add-module-exports/lib/index.js\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-runtime\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"regenerator\":true},\"externalDependencies\":[]},{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.21.0:development":{"value":{"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _express = _interopRequireDefault(require(\"express\"));\nvar _notification = _interopRequireDefault(require(\"../controllers/notification.controller\"));\nvar _verifyToken = _interopRequireDefault(require(\"../middlewares/verifyToken\"));\nvar _catchError = _interopRequireDefault(require(\"../middlewares/catchError\"));\n// eslint-disable-next-line import/no-named-as-default, import/no-named-as-default-member\n\nconst router = _express.default.Router();\nrouter.get('/', _verifyToken.default, _notification.default.getAllNotifications);\nrouter.delete('/:id', _verifyToken.default, _notification.default.deleteNotification);\nrouter.patch('/clear', _verifyToken.default, _notification.default.clearNotifications);\nrouter.post('/read/all', _verifyToken.default, (0, _catchError.default)(_notification.default.markAllAsRead));\nrouter.post('/read/:notificationId', _verifyToken.default, (0, _catchError.default)(_notification.default.markAsRead));\nrouter.post('/unread/:notificationId', _verifyToken.default, (0, _catchError.default)(_notification.default.markAsUnread));\nvar _default = router;\nexports.default = _default;\nmodule.exports = exports.default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfZXhwcmVzcyIsIl9pbnRlcm9wUmVxdWlyZURlZmF1bHQiLCJyZXF1aXJlIiwiX25vdGlmaWNhdGlvbiIsIl92ZXJpZnlUb2tlbiIsIl9jYXRjaEVycm9yIiwicm91dGVyIiwiZXhwcmVzcyIsIlJvdXRlciIsImdldCIsImlzQXV0aGVudGljYXRlZCIsIk5vdGlmaWNhdGlvbkNvbnRyb2xsZXIiLCJnZXRBbGxOb3RpZmljYXRpb25zIiwiZGVsZXRlIiwiZGVsZXRlTm90aWZpY2F0aW9uIiwicGF0Y2giLCJjbGVhck5vdGlmaWNhdGlvbnMiLCJwb3N0IiwiY2F0Y2hFcnJvciIsIm1hcmtBbGxBc1JlYWQiLCJtYXJrQXNSZWFkIiwibWFya0FzVW5yZWFkIiwiX2RlZmF1bHQiLCJleHBvcnRzIiwiZGVmYXVsdCIsIm1vZHVsZSJdLCJzb3VyY2VSb290IjoiL1VzZXJzL2FuZGVsYXJ3YW5kYS9EZXNrdG9wL2UtY29tbS10ZWFtLWJyb2dyYW1tZXJzLWJuL3NyYy9yb3V0ZXMvIiwic291cmNlcyI6WyJub3RpZmljYXRpb24uanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGV4cHJlc3MgZnJvbSAnZXhwcmVzcyc7XG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgaW1wb3J0L25vLW5hbWVkLWFzLWRlZmF1bHQsIGltcG9ydC9uby1uYW1lZC1hcy1kZWZhdWx0LW1lbWJlclxuaW1wb3J0IE5vdGlmaWNhdGlvbkNvbnRyb2xsZXIgZnJvbSAnLi4vY29udHJvbGxlcnMvbm90aWZpY2F0aW9uLmNvbnRyb2xsZXInO1xuaW1wb3J0IGlzQXV0aGVudGljYXRlZCBmcm9tICcuLi9taWRkbGV3YXJlcy92ZXJpZnlUb2tlbic7XG5pbXBvcnQgY2F0Y2hFcnJvciBmcm9tICcuLi9taWRkbGV3YXJlcy9jYXRjaEVycm9yJztcblxuY29uc3Qgcm91dGVyID0gZXhwcmVzcy5Sb3V0ZXIoKTtcbnJvdXRlci5nZXQoJy8nLCBpc0F1dGhlbnRpY2F0ZWQsIE5vdGlmaWNhdGlvbkNvbnRyb2xsZXIuZ2V0QWxsTm90aWZpY2F0aW9ucyk7XG5yb3V0ZXIuZGVsZXRlKCcvOmlkJywgaXNBdXRoZW50aWNhdGVkLCBOb3RpZmljYXRpb25Db250cm9sbGVyLmRlbGV0ZU5vdGlmaWNhdGlvbik7XG5yb3V0ZXIucGF0Y2goJy9jbGVhcicsIGlzQXV0aGVudGljYXRlZCwgTm90aWZpY2F0aW9uQ29udHJvbGxlci5jbGVhck5vdGlmaWNhdGlvbnMpO1xucm91dGVyLnBvc3QoXG4gICcvcmVhZC9hbGwnLFxuICBpc0F1dGhlbnRpY2F0ZWQsXG4gIGNhdGNoRXJyb3IoTm90aWZpY2F0aW9uQ29udHJvbGxlci5tYXJrQWxsQXNSZWFkKVxuKTtcbnJvdXRlci5wb3N0KFxuICAnL3JlYWQvOm5vdGlmaWNhdGlvbklkJyxcbiAgaXNBdXRoZW50aWNhdGVkLFxuICBjYXRjaEVycm9yKE5vdGlmaWNhdGlvbkNvbnRyb2xsZXIubWFya0FzUmVhZClcbik7XG5yb3V0ZXIucG9zdChcbiAgJy91bnJlYWQvOm5vdGlmaWNhdGlvbklkJyxcbiAgaXNBdXRoZW50aWNhdGVkLFxuICBjYXRjaEVycm9yKE5vdGlmaWNhdGlvbkNvbnRyb2xsZXIubWFya0FzVW5yZWFkKVxuKTtcbmV4cG9ydCBkZWZhdWx0IHJvdXRlcjtcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBLElBQUFBLFFBQUEsR0FBQUMsc0JBQUEsQ0FBQUMsT0FBQTtBQUVBLElBQUFDLGFBQUEsR0FBQUYsc0JBQUEsQ0FBQUMsT0FBQTtBQUNBLElBQUFFLFlBQUEsR0FBQUgsc0JBQUEsQ0FBQUMsT0FBQTtBQUNBLElBQUFHLFdBQUEsR0FBQUosc0JBQUEsQ0FBQUMsT0FBQTtBQUhBOztBQUtBLE1BQU1JLE1BQU0sR0FBR0MsZ0JBQU8sQ0FBQ0MsTUFBTSxFQUFFO0FBQy9CRixNQUFNLENBQUNHLEdBQUcsQ0FBQyxHQUFHLEVBQUVDLG9CQUFlLEVBQUVDLHFCQUFzQixDQUFDQyxtQkFBbUIsQ0FBQztBQUM1RU4sTUFBTSxDQUFDTyxNQUFNLENBQUMsTUFBTSxFQUFFSCxvQkFBZSxFQUFFQyxxQkFBc0IsQ0FBQ0csa0JBQWtCLENBQUM7QUFDakZSLE1BQU0sQ0FBQ1MsS0FBSyxDQUFDLFFBQVEsRUFBRUwsb0JBQWUsRUFBRUMscUJBQXNCLENBQUNLLGtCQUFrQixDQUFDO0FBQ2xGVixNQUFNLENBQUNXLElBQUksQ0FDVCxXQUFXLEVBQ1hQLG9CQUFlLEVBQ2YsSUFBQVEsbUJBQVUsRUFBQ1AscUJBQXNCLENBQUNRLGFBQWEsQ0FBQyxDQUNqRDtBQUNEYixNQUFNLENBQUNXLElBQUksQ0FDVCx1QkFBdUIsRUFDdkJQLG9CQUFlLEVBQ2YsSUFBQVEsbUJBQVUsRUFBQ1AscUJBQXNCLENBQUNTLFVBQVUsQ0FBQyxDQUM5QztBQUNEZCxNQUFNLENBQUNXLElBQUksQ0FDVCx5QkFBeUIsRUFDekJQLG9CQUFlLEVBQ2YsSUFBQVEsbUJBQVUsRUFBQ1AscUJBQXNCLENBQUNVLFlBQVksQ0FBQyxDQUNoRDtBQUFDLElBQUFDLFFBQUEsR0FDYWhCLE1BQU07QUFBQWlCLE9BQUEsQ0FBQUMsT0FBQSxHQUFBRixRQUFBO0FBQUFHLE1BQUEsQ0FBQUYsT0FBQSxHQUFBQSxPQUFBLENBQUFDLE9BQUEifQ==","map":{"version":3,"names":["_express","_interopRequireDefault","require","_notification","_verifyToken","_catchError","router","express","Router","get","isAuthenticated","NotificationController","getAllNotifications","delete","deleteNotification","patch","clearNotifications","post","catchError","markAllAsRead","markAsRead","markAsUnread","_default","exports","default","module"],"sourceRoot":"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/routes/","sources":["notification.js"],"sourcesContent":["import express from 'express';\n// eslint-disable-next-line import/no-named-as-default, import/no-named-as-default-member\nimport NotificationController from '../controllers/notification.controller';\nimport isAuthenticated from '../middlewares/verifyToken';\nimport catchError from '../middlewares/catchError';\n\nconst router = express.Router();\nrouter.get('/', isAuthenticated, NotificationController.getAllNotifications);\nrouter.delete('/:id', isAuthenticated, NotificationController.deleteNotification);\nrouter.patch('/clear', isAuthenticated, NotificationController.clearNotifications);\nrouter.post(\n  '/read/all',\n  isAuthenticated,\n  catchError(NotificationController.markAllAsRead)\n);\nrouter.post(\n  '/read/:notificationId',\n  isAuthenticated,\n  catchError(NotificationController.markAsRead)\n);\nrouter.post(\n  '/unread/:notificationId',\n  isAuthenticated,\n  catchError(NotificationController.markAsUnread)\n);\nexport default router;\n"],"mappings":";;;;;;;AAAA,IAAAA,QAAA,GAAAC,sBAAA,CAAAC,OAAA;AAEA,IAAAC,aAAA,GAAAF,sBAAA,CAAAC,OAAA;AACA,IAAAE,YAAA,GAAAH,sBAAA,CAAAC,OAAA;AACA,IAAAG,WAAA,GAAAJ,sBAAA,CAAAC,OAAA;AAHA;;AAKA,MAAMI,MAAM,GAAGC,gBAAO,CAACC,MAAM,EAAE;AAC/BF,MAAM,CAACG,GAAG,CAAC,GAAG,EAAEC,oBAAe,EAAEC,qBAAsB,CAACC,mBAAmB,CAAC;AAC5EN,MAAM,CAACO,MAAM,CAAC,MAAM,EAAEH,oBAAe,EAAEC,qBAAsB,CAACG,kBAAkB,CAAC;AACjFR,MAAM,CAACS,KAAK,CAAC,QAAQ,EAAEL,oBAAe,EAAEC,qBAAsB,CAACK,kBAAkB,CAAC;AAClFV,MAAM,CAACW,IAAI,CACT,WAAW,EACXP,oBAAe,EACf,IAAAQ,mBAAU,EAACP,qBAAsB,CAACQ,aAAa,CAAC,CACjD;AACDb,MAAM,CAACW,IAAI,CACT,uBAAuB,EACvBP,oBAAe,EACf,IAAAQ,mBAAU,EAACP,qBAAsB,CAACS,UAAU,CAAC,CAC9C;AACDd,MAAM,CAACW,IAAI,CACT,yBAAyB,EACzBP,oBAAe,EACf,IAAAQ,mBAAU,EAACP,qBAAsB,CAACU,YAAY,CAAC,CAChD;AAAC,IAAAC,QAAA,GACahB,MAAM;AAAAiB,OAAA,CAAAC,OAAA,GAAAF,QAAA;AAAAG,MAAA,CAAAF,OAAA,GAAAA,OAAA,CAAAC,OAAA"}},"mtime":1682148437957},"{\"assumptions\":{},\"sourceRoot\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/controllers/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"filename\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/controllers/notification.controller.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/node_modules/babel-plugin-add-module-exports/lib/index.js\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-runtime\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"regenerator\":true},\"externalDependencies\":[]},{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.21.0:development":{"value":{"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _notification = _interopRequireDefault(require(\"../services/notification.services\"));\nvar _models = require(\"../database/models\");\n/* eslint-disable require-jsdoc */\n\n// eslint-disable-next-line import/named\n\nclass NotificationController {\n  static async getAllNotifications(req, res) {\n    try {\n      const totalCount = await _models.notifications.count({\n        where: {\n          receiverId: req.user.id\n        }\n      });\n      // eslint-disable-next-line radix\n      const page = parseInt(req.query.page) || 1;\n      // eslint-disable-next-line radix\n      const limit = parseInt(req.query.limit) || totalCount;\n      const startIndex = (page - 1) * limit;\n      const endIndex = page * limit;\n      const results = {};\n      if (endIndex < totalCount) {\n        results.next = {\n          page: page + 1,\n          limit\n        };\n      }\n      if (startIndex > 0) {\n        results.previous = {\n          page: page - 1,\n          limit\n        };\n      }\n      results.results = await _models.notifications.findAll({\n        where: {\n          receiverId: req.user.id\n        },\n        limit,\n        attributes: {\n          exclude: ['reciverId']\n        },\n        include: [{\n          model: _models.users,\n          as: 'receiver',\n          attributes: ['username', 'email']\n        }],\n        offset: startIndex\n      });\n      const allNotifications = results;\n      res.status(200).json({\n        message: 'All notifications retrieved successfully',\n        allNotifications\n      });\n    } catch (error) {\n      return res.status(500).json({\n        status: 500,\n        error: error.message\n      });\n    }\n  }\n  static async markAllAsRead(req, res) {\n    return _notification.default.markAllNotificationAsRead(req.user.id, res);\n  }\n  static async markAsRead(req, res) {\n    return _notification.default.markNotificationAsReadOrUnread(req.params.notificationId, res, true);\n  }\n  static async markAsUnread(req, res) {\n    return _notification.default.markNotificationAsReadOrUnread(req.params.notificationId, res, false);\n  }\n  static async deleteNotification(req, res) {\n    try {\n      const response = await _notification.default.deleteNotification({\n        notId: req.params.id,\n        userId: req.user.id\n      });\n      if (response === 'not exist') {\n        return res.status(404).json({\n          status: 404,\n          error: \"Notification doesn't exist\"\n        });\n      }\n      if (response === 'forbidden') {\n        return res.status(403).json({\n          status: 403,\n          error: 'You are not the recipient of the notification'\n        });\n      }\n      return res.status(202).json({\n        status: 202,\n        message: 'Notification deleted'\n      });\n    } catch (error) {\n      return res.status(500).json({\n        status: 500,\n        error: 'Server error'\n      });\n    }\n  }\n\n  /**\n   * @param {Object} req\n   * @param {Object} res\n   * @returns {res} response\n   */\n  static async clearNotifications(req, res) {\n    try {\n      const response = await _notification.default.clearNotifications({\n        userId: req.user.id\n      });\n      if (response === 'not exist') {\n        return res.status(404).json({\n          status: 404,\n          error: 'no notification to clear'\n        });\n      }\n      return res.status(202).json({\n        status: 202,\n        message: 'Notification cleared'\n      });\n    } catch (error) {\n      return res.status(500).json({\n        status: 500,\n        error: error.message\n      });\n    }\n  }\n}\nexports.default = NotificationController;\nmodule.exports = exports.default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfbm90aWZpY2F0aW9uIiwiX2ludGVyb3BSZXF1aXJlRGVmYXVsdCIsInJlcXVpcmUiLCJfbW9kZWxzIiwiTm90aWZpY2F0aW9uQ29udHJvbGxlciIsImdldEFsbE5vdGlmaWNhdGlvbnMiLCJyZXEiLCJyZXMiLCJ0b3RhbENvdW50Iiwibm90aWZpY2F0aW9ucyIsImNvdW50Iiwid2hlcmUiLCJyZWNlaXZlcklkIiwidXNlciIsImlkIiwicGFnZSIsInBhcnNlSW50IiwicXVlcnkiLCJsaW1pdCIsInN0YXJ0SW5kZXgiLCJlbmRJbmRleCIsInJlc3VsdHMiLCJuZXh0IiwicHJldmlvdXMiLCJmaW5kQWxsIiwiYXR0cmlidXRlcyIsImV4Y2x1ZGUiLCJpbmNsdWRlIiwibW9kZWwiLCJ1c2VycyIsImFzIiwib2Zmc2V0IiwiYWxsTm90aWZpY2F0aW9ucyIsInN0YXR1cyIsImpzb24iLCJtZXNzYWdlIiwiZXJyb3IiLCJtYXJrQWxsQXNSZWFkIiwiTm90aWZpY2F0aW9uU2VydmljZXMiLCJtYXJrQWxsTm90aWZpY2F0aW9uQXNSZWFkIiwibWFya0FzUmVhZCIsIm1hcmtOb3RpZmljYXRpb25Bc1JlYWRPclVucmVhZCIsInBhcmFtcyIsIm5vdGlmaWNhdGlvbklkIiwibWFya0FzVW5yZWFkIiwiZGVsZXRlTm90aWZpY2F0aW9uIiwicmVzcG9uc2UiLCJub3RJZCIsInVzZXJJZCIsImNsZWFyTm90aWZpY2F0aW9ucyIsImV4cG9ydHMiLCJkZWZhdWx0IiwibW9kdWxlIl0sInNvdXJjZVJvb3QiOiIvVXNlcnMvYW5kZWxhcndhbmRhL0Rlc2t0b3AvZS1jb21tLXRlYW0tYnJvZ3JhbW1lcnMtYm4vc3JjL2NvbnRyb2xsZXJzLyIsInNvdXJjZXMiOlsibm90aWZpY2F0aW9uLmNvbnRyb2xsZXIuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLyogZXNsaW50LWRpc2FibGUgcmVxdWlyZS1qc2RvYyAqL1xuaW1wb3J0IE5vdGlmaWNhdGlvblNlcnZpY2VzIGZyb20gJy4uL3NlcnZpY2VzL25vdGlmaWNhdGlvbi5zZXJ2aWNlcyc7XG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgaW1wb3J0L25hbWVkXG5pbXBvcnQgeyB1c2Vycywgbm90aWZpY2F0aW9ucyB9IGZyb20gJy4uL2RhdGFiYXNlL21vZGVscyc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIE5vdGlmaWNhdGlvbkNvbnRyb2xsZXIge1xuICBzdGF0aWMgYXN5bmMgZ2V0QWxsTm90aWZpY2F0aW9ucyhyZXEsIHJlcykge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCB0b3RhbENvdW50ID0gYXdhaXQgbm90aWZpY2F0aW9ucy5jb3VudCh7IHdoZXJlOiB7IHJlY2VpdmVySWQ6IHJlcS51c2VyLmlkIH0gfSk7XG4gICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgcmFkaXhcbiAgICAgIGNvbnN0IHBhZ2UgPSBwYXJzZUludChyZXEucXVlcnkucGFnZSkgfHwgMTtcbiAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSByYWRpeFxuICAgICAgY29uc3QgbGltaXQgPSBwYXJzZUludChyZXEucXVlcnkubGltaXQpIHx8IHRvdGFsQ291bnQ7XG4gICAgICBjb25zdCBzdGFydEluZGV4ID0gKHBhZ2UgLSAxKSAqIGxpbWl0O1xuICAgICAgY29uc3QgZW5kSW5kZXggPSBwYWdlICogbGltaXQ7XG4gICAgICBjb25zdCByZXN1bHRzID0ge307XG4gICAgICBpZiAoZW5kSW5kZXggPCB0b3RhbENvdW50KSB7XG4gICAgICAgIHJlc3VsdHMubmV4dCA9IHtcbiAgICAgICAgICBwYWdlOiBwYWdlICsgMSxcbiAgICAgICAgICBsaW1pdCxcbiAgICAgICAgfTtcbiAgICAgIH1cbiAgICAgIGlmIChzdGFydEluZGV4ID4gMCkge1xuICAgICAgICByZXN1bHRzLnByZXZpb3VzID0ge1xuICAgICAgICAgIHBhZ2U6IHBhZ2UgLSAxLFxuICAgICAgICAgIGxpbWl0LFxuICAgICAgICB9O1xuICAgICAgfVxuICAgICAgcmVzdWx0cy5yZXN1bHRzID0gYXdhaXQgbm90aWZpY2F0aW9ucy5maW5kQWxsKHtcbiAgICAgICAgd2hlcmU6IHsgcmVjZWl2ZXJJZDogcmVxLnVzZXIuaWQgfSxcbiAgICAgICAgbGltaXQsXG4gICAgICAgIGF0dHJpYnV0ZXM6IHsgZXhjbHVkZTogWydyZWNpdmVySWQnXSB9LFxuICAgICAgICBpbmNsdWRlOiBbXG4gICAgICAgICAge1xuICAgICAgICAgICAgbW9kZWw6IHVzZXJzLFxuICAgICAgICAgICAgYXM6ICdyZWNlaXZlcicsXG4gICAgICAgICAgICBhdHRyaWJ1dGVzOiBbJ3VzZXJuYW1lJywgJ2VtYWlsJ10sXG4gICAgICAgICAgfVxuICAgICAgICBdLFxuICAgICAgICBvZmZzZXQ6IHN0YXJ0SW5kZXgsXG4gICAgICB9KTtcbiAgICAgIGNvbnN0IGFsbE5vdGlmaWNhdGlvbnMgPSByZXN1bHRzO1xuICAgICAgcmVzXG4gICAgICAgIC5zdGF0dXMoMjAwKVxuICAgICAgICAuanNvbih7IG1lc3NhZ2U6ICdBbGwgbm90aWZpY2F0aW9ucyByZXRyaWV2ZWQgc3VjY2Vzc2Z1bGx5JywgYWxsTm90aWZpY2F0aW9ucyB9KTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgc3RhdHVzOiA1MDAsIGVycm9yOiBlcnJvci5tZXNzYWdlIH0pO1xuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyBhc3luYyBtYXJrQWxsQXNSZWFkKHJlcSwgcmVzKSB7XG4gICAgcmV0dXJuIE5vdGlmaWNhdGlvblNlcnZpY2VzLm1hcmtBbGxOb3RpZmljYXRpb25Bc1JlYWQocmVxLnVzZXIuaWQsIHJlcyk7XG4gIH1cblxuICBzdGF0aWMgYXN5bmMgbWFya0FzUmVhZChyZXEsIHJlcykge1xuICAgIHJldHVybiBOb3RpZmljYXRpb25TZXJ2aWNlcy5tYXJrTm90aWZpY2F0aW9uQXNSZWFkT3JVbnJlYWQoXG4gICAgICByZXEucGFyYW1zLm5vdGlmaWNhdGlvbklkLFxuICAgICAgcmVzLFxuICAgICAgdHJ1ZVxuICAgICk7XG4gIH1cblxuICBzdGF0aWMgYXN5bmMgbWFya0FzVW5yZWFkKHJlcSwgcmVzKSB7XG4gICAgcmV0dXJuIE5vdGlmaWNhdGlvblNlcnZpY2VzLm1hcmtOb3RpZmljYXRpb25Bc1JlYWRPclVucmVhZChcbiAgICAgIHJlcS5wYXJhbXMubm90aWZpY2F0aW9uSWQsXG4gICAgICByZXMsXG4gICAgICBmYWxzZVxuICAgICk7XG4gIH1cblxuICBzdGF0aWMgYXN5bmMgZGVsZXRlTm90aWZpY2F0aW9uKHJlcSwgcmVzKSB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgTm90aWZpY2F0aW9uU2VydmljZXMuZGVsZXRlTm90aWZpY2F0aW9uKHtcbiAgICAgICAgbm90SWQ6IHJlcS5wYXJhbXMuaWQsXG4gICAgICAgIHVzZXJJZDogcmVxLnVzZXIuaWQsXG4gICAgICB9KTtcbiAgICAgIGlmIChyZXNwb25zZSA9PT0gJ25vdCBleGlzdCcpIHtcbiAgICAgICAgcmV0dXJuIHJlc1xuICAgICAgICAgIC5zdGF0dXMoNDA0KVxuICAgICAgICAgIC5qc29uKHsgc3RhdHVzOiA0MDQsIGVycm9yOiBcIk5vdGlmaWNhdGlvbiBkb2Vzbid0IGV4aXN0XCIgfSk7XG4gICAgICB9XG4gICAgICBpZiAocmVzcG9uc2UgPT09ICdmb3JiaWRkZW4nKSB7XG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMykuanNvbih7XG4gICAgICAgICAgc3RhdHVzOiA0MDMsXG4gICAgICAgICAgZXJyb3I6ICdZb3UgYXJlIG5vdCB0aGUgcmVjaXBpZW50IG9mIHRoZSBub3RpZmljYXRpb24nLFxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIHJldHVybiByZXNcbiAgICAgICAgLnN0YXR1cygyMDIpXG4gICAgICAgIC5qc29uKHsgc3RhdHVzOiAyMDIsIG1lc3NhZ2U6ICdOb3RpZmljYXRpb24gZGVsZXRlZCcgfSk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDUwMCkuanNvbih7IHN0YXR1czogNTAwLCBlcnJvcjogJ1NlcnZlciBlcnJvcicgfSk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7T2JqZWN0fSByZXFcbiAgICogQHBhcmFtIHtPYmplY3R9IHJlc1xuICAgKiBAcmV0dXJucyB7cmVzfSByZXNwb25zZVxuICAgKi9cbiAgc3RhdGljIGFzeW5jIGNsZWFyTm90aWZpY2F0aW9ucyhyZXEsIHJlcykge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IE5vdGlmaWNhdGlvblNlcnZpY2VzLmNsZWFyTm90aWZpY2F0aW9ucyh7XG4gICAgICAgIHVzZXJJZDogcmVxLnVzZXIuaWQsXG4gICAgICB9KTtcbiAgICAgIGlmIChyZXNwb25zZSA9PT0gJ25vdCBleGlzdCcpIHtcbiAgICAgICAgcmV0dXJuIHJlc1xuICAgICAgICAgIC5zdGF0dXMoNDA0KVxuICAgICAgICAgIC5qc29uKHsgc3RhdHVzOiA0MDQsIGVycm9yOiAnbm8gbm90aWZpY2F0aW9uIHRvIGNsZWFyJyB9KTtcbiAgICAgIH1cbiAgICAgIHJldHVybiByZXNcbiAgICAgICAgLnN0YXR1cygyMDIpXG4gICAgICAgIC5qc29uKHsgc3RhdHVzOiAyMDIsIG1lc3NhZ2U6ICdOb3RpZmljYXRpb24gY2xlYXJlZCcgfSk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDUwMCkuanNvbih7IHN0YXR1czogNTAwLCBlcnJvcjogZXJyb3IubWVzc2FnZSB9KTtcbiAgICB9XG4gIH1cbn1cbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUNBLElBQUFBLGFBQUEsR0FBQUMsc0JBQUEsQ0FBQUMsT0FBQTtBQUVBLElBQUFDLE9BQUEsR0FBQUQsT0FBQTtBQUhBOztBQUVBOztBQUdlLE1BQU1FLHNCQUFzQixDQUFDO0VBQzFDLGFBQWFDLG1CQUFtQkEsQ0FBQ0MsR0FB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","map":{"version":3,"names":["_notification","_interopRequireDefault","require","_models","NotificationController","getAllNotifications","req","res","totalCount","notifications","count","where","receiverId","user","id","page","parseInt","query","limit","startIndex","endIndex","results","next","previous","findAll","attributes","exclude","include","model","users","as","offset","allNotifications","status","json","message","error","markAllAsRead","NotificationServices","markAllNotificationAsRead","markAsRead","markNotificationAsReadOrUnread","params","notificationId","markAsUnread","deleteNotification","response","notId","userId","clearNotifications","exports","default","module"],"sourceRoot":"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/controllers/","sources":["notification.controller.js"],"sourcesContent":["/* eslint-disable require-jsdoc */\nimport NotificationServices from '../services/notification.services';\n// eslint-disable-next-line import/named\nimport { users, notifications } from '../database/models';\n\nexport default class NotificationController {\n  static async getAllNotifications(req, res) {\n    try {\n      const totalCount = await notifications.count({ where: { receiverId: req.user.id } });\n      // eslint-disable-next-line radix\n      const page = parseInt(req.query.page) || 1;\n      // eslint-disable-next-line radix\n      const limit = parseInt(req.query.limit) || totalCount;\n      const startIndex = (page - 1) * limit;\n      const endIndex = page * limit;\n      const results = {};\n      if (endIndex < totalCount) {\n        results.next = {\n          page: page + 1,\n          limit,\n        };\n      }\n      if (startIndex > 0) {\n        results.previous = {\n          page: page - 1,\n          limit,\n        };\n      }\n      results.results = await notifications.findAll({\n        where: { receiverId: req.user.id },\n        limit,\n        attributes: { exclude: ['reciverId'] },\n        include: [\n          {\n            model: users,\n            as: 'receiver',\n            attributes: ['username', 'email'],\n          }\n        ],\n        offset: startIndex,\n      });\n      const allNotifications = results;\n      res\n        .status(200)\n        .json({ message: 'All notifications retrieved successfully', allNotifications });\n    } catch (error) {\n      return res.status(500).json({ status: 500, error: error.message });\n    }\n  }\n\n  static async markAllAsRead(req, res) {\n    return NotificationServices.markAllNotificationAsRead(req.user.id, res);\n  }\n\n  static async markAsRead(req, res) {\n    return NotificationServices.markNotificationAsReadOrUnread(\n      req.params.notificationId,\n      res,\n      true\n    );\n  }\n\n  static async markAsUnread(req, res) {\n    return NotificationServices.markNotificationAsReadOrUnread(\n      req.params.notificationId,\n      res,\n      false\n    );\n  }\n\n  static async deleteNotification(req, res) {\n    try {\n      const response = await NotificationServices.deleteNotification({\n        notId: req.params.id,\n        userId: req.user.id,\n      });\n      if (response === 'not exist') {\n        return res\n          .status(404)\n          .json({ status: 404, error: \"Notification doesn't exist\" });\n      }\n      if (response === 'forbidden') {\n        return res.status(403).json({\n          status: 403,\n          error: 'You are not the recipient of the notification',\n        });\n      }\n      return res\n        .status(202)\n        .json({ status: 202, message: 'Notification deleted' });\n    } catch (error) {\n      return res.status(500).json({ status: 500, error: 'Server error' });\n    }\n  }\n\n  /**\n   * @param {Object} req\n   * @param {Object} res\n   * @returns {res} response\n   */\n  static async clearNotifications(req, res) {\n    try {\n      const response = await NotificationServices.clearNotifications({\n        userId: req.user.id,\n      });\n      if (response === 'not exist') {\n        return res\n          .status(404)\n          .json({ status: 404, error: 'no notification to clear' });\n      }\n      return res\n        .status(202)\n        .json({ status: 202, message: 'Notification cleared' });\n    } catch (error) {\n      return res.status(500).json({ status: 500, error: error.message });\n    }\n  }\n}\n"],"mappings":"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"}},"mtime":1685643189437},"{\"assumptions\":{},\"sourceRoot\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/services/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"filename\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/services/notification.services.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/node_modules/babel-plugin-add-module-exports/lib/index.js\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-runtime\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"regenerator\":true},\"externalDependencies\":[]},{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.21.0:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _models = require(\"../database/models\");\n/* eslint-disable require-jsdoc */\n// eslint-disable-next-line import/named\n\nclass NotificationServices {\n  static async getAllNotifications(id) {\n    const notificationz = await _models.notifications.findAll({\n      where: {\n        receiverId: id\n      }\n    });\n    return notificationz;\n  }\n  static async markAllNotificationAsRead(userId, res) {\n    await _models.notifications.update({\n      isRead: true\n    }, {\n      where: {\n        receiverId: userId\n      }\n    });\n    return res.status(200).json({\n      message: 'All notifications are read'\n    });\n  }\n  static async markNotificationAsReadOrUnread(notificationId, res, isRead = true) {\n    const notification = await _models.notifications.findOne({\n      where: {\n        id: notificationId\n      }\n    });\n    if (!notification) {\n      return res.status(404).json({\n        message: 'Notification not found'\n      });\n    }\n    notification.isRead = isRead;\n    await notification.save();\n    return res.json(notification);\n  }\n  static async deleteNotification(data) {\n    const notification = await _models.notifications.findOne({\n      where: {\n        id: data.notId\n      }\n    });\n    if (!notification) {\n      return 'not exist';\n    }\n    if (notification.receiverId !== data.userId) {\n      return 'forbidden';\n    }\n    await notification.destroy({\n      where: {\n        id: data.notId,\n        receiverId: data.userId\n      }\n    });\n  }\n\n  // eslint-disable-next-line require-jsdoc\n  static async clearNotifications(data) {\n    const notification = await _models.notifications.findAll({\n      where: {\n        id: data.userId\n      }\n    });\n    if (!notification) {\n      return 'no notifications to clear';\n    }\n    await _models.notifications.destroy({\n      where: {\n        receiverId: data.userId\n      }\n    });\n  }\n}\nexports.default = NotificationServices;\nmodule.exports = exports.default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfbW9kZWxzIiwicmVxdWlyZSIsIk5vdGlmaWNhdGlvblNlcnZpY2VzIiwiZ2V0QWxsTm90aWZpY2F0aW9ucyIsImlkIiwibm90aWZpY2F0aW9ueiIsIm5vdGlmaWNhdGlvbnMiLCJmaW5kQWxsIiwid2hlcmUiLCJyZWNlaXZlcklkIiwibWFya0FsbE5vdGlmaWNhdGlvbkFzUmVhZCIsInVzZXJJZCIsInJlcyIsInVwZGF0ZSIsImlzUmVhZCIsInN0YXR1cyIsImpzb24iLCJtZXNzYWdlIiwibWFya05vdGlmaWNhdGlvbkFzUmVhZE9yVW5yZWFkIiwibm90aWZpY2F0aW9uSWQiLCJub3RpZmljYXRpb24iLCJmaW5kT25lIiwic2F2ZSIsImRlbGV0ZU5vdGlmaWNhdGlvbiIsImRhdGEiLCJub3RJZCIsImRlc3Ryb3kiLCJjbGVhck5vdGlmaWNhdGlvbnMiLCJleHBvcnRzIiwiZGVmYXVsdCIsIm1vZHVsZSJdLCJzb3VyY2VSb290IjoiL1VzZXJzL2FuZGVsYXJ3YW5kYS9EZXNrdG9wL2UtY29tbS10ZWFtLWJyb2dyYW1tZXJzLWJuL3NyYy9zZXJ2aWNlcy8iLCJzb3VyY2VzIjpbIm5vdGlmaWNhdGlvbi5zZXJ2aWNlcy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKiBlc2xpbnQtZGlzYWJsZSByZXF1aXJlLWpzZG9jICovXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgaW1wb3J0L25hbWVkXG5pbXBvcnQgeyBub3RpZmljYXRpb25zIH0gZnJvbSAnLi4vZGF0YWJhc2UvbW9kZWxzJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgTm90aWZpY2F0aW9uU2VydmljZXMge1xuICBzdGF0aWMgYXN5bmMgZ2V0QWxsTm90aWZpY2F0aW9ucyhpZCkge1xuICAgIGNvbnN0IG5vdGlmaWNhdGlvbnogPSBhd2FpdCBub3RpZmljYXRpb25zLmZpbmRBbGwoe1xuICAgICAgd2hlcmU6IHsgcmVjZWl2ZXJJZDogaWQgfSxcbiAgICB9KTtcbiAgICByZXR1cm4gbm90aWZpY2F0aW9uejtcbiAgfVxuXG4gIHN0YXRpYyBhc3luYyBtYXJrQWxsTm90aWZpY2F0aW9uQXNSZWFkKHVzZXJJZCwgcmVzKSB7XG4gICAgYXdhaXQgbm90aWZpY2F0aW9ucy51cGRhdGUoXG4gICAgICB7XG4gICAgICAgIGlzUmVhZDogdHJ1ZSxcbiAgICAgIH0sXG4gICAgICB7IHdoZXJlOiB7IHJlY2VpdmVySWQ6IHVzZXJJZCB9IH1cbiAgICApO1xuICAgIHJldHVybiByZXMuc3RhdHVzKDIwMCkuanNvbih7IG1lc3NhZ2U6ICdBbGwgbm90aWZpY2F0aW9ucyBhcmUgcmVhZCcgfSk7XG4gIH1cblxuICBzdGF0aWMgYXN5bmMgbWFya05vdGlmaWNhdGlvbkFzUmVhZE9yVW5yZWFkKFxuICAgIG5vdGlmaWNhdGlvbklkLFxuICAgIHJlcyxcbiAgICBpc1JlYWQgPSB0cnVlXG4gICkge1xuICAgIGNvbnN0IG5vdGlmaWNhdGlvbiA9IGF3YWl0IG5vdGlmaWNhdGlvbnMuZmluZE9uZSh7XG4gICAgICB3aGVyZTogeyBpZDogbm90aWZpY2F0aW9uSWQgfSxcbiAgICB9KTtcbiAgICBpZiAoIW5vdGlmaWNhdGlvbikge1xuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA0KS5qc29uKHsgbWVzc2FnZTogJ05vdGlmaWNhdGlvbiBub3QgZm91bmQnIH0pO1xuICAgIH1cbiAgICBub3RpZmljYXRpb24uaXNSZWFkID0gaXNSZWFkO1xuICAgIGF3YWl0IG5vdGlmaWNhdGlvbi5zYXZlKCk7XG4gICAgcmV0dXJuIHJlcy5qc29uKG5vdGlmaWNhdGlvbik7XG4gIH1cblxuICBzdGF0aWMgYXN5bmMgZGVsZXRlTm90aWZpY2F0aW9uKGRhdGEpIHtcbiAgICBjb25zdCBub3RpZmljYXRpb24gPSBhd2FpdCBub3RpZmljYXRpb25zLmZpbmRPbmUoe1xuICAgICAgd2hlcmU6IHsgaWQ6IGRhdGEubm90SWQgfSxcbiAgICB9KTtcbiAgICBpZiAoIW5vdGlmaWNhdGlvbikge1xuICAgICAgcmV0dXJuICdub3QgZXhpc3QnO1xuICAgIH1cbiAgICBpZiAobm90aWZpY2F0aW9uLnJlY2VpdmVySWQgIT09IGRhdGEudXNlcklkKSB7XG4gICAgICByZXR1cm4gJ2ZvcmJpZGRlbic7XG4gICAgfVxuICAgIGF3YWl0IG5vdGlmaWNhdGlvbi5kZXN0cm95KHtcbiAgICAgIHdoZXJlOiB7IGlkOiBkYXRhLm5vdElkLCByZWNlaXZlcklkOiBkYXRhLnVzZXJJZCB9LFxuICAgIH0pO1xuICB9XG5cbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIHJlcXVpcmUtanNkb2NcbiAgc3RhdGljIGFzeW5jIGNsZWFyTm90aWZpY2F0aW9ucyhkYXRhKSB7XG4gICAgY29uc3Qgbm90aWZpY2F0aW9uID0gYXdhaXQgbm90aWZpY2F0aW9ucy5maW5kQWxsKHtcbiAgICAgIHdoZXJlOiB7IGlkOiBkYXRhLnVzZXJJZCB9LFxuICAgIH0pO1xuICAgIGlmICghbm90aWZpY2F0aW9uKSB7XG4gICAgICByZXR1cm4gJ25vIG5vdGlmaWNhdGlvbnMgdG8gY2xlYXInO1xuICAgIH1cbiAgICBhd2FpdCBub3RpZmljYXRpb25zLmRlc3Ryb3koe1xuICAgICAgd2hlcmU6IHsgcmVjZWl2ZXJJZDogZGF0YS51c2VySWQgfSxcbiAgICB9KTtcbiAgfVxufVxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7QUFFQSxJQUFBQSxPQUFBLEdBQUFDLE9BQUE7QUFGQTtBQUNBOztBQUdlLE1BQU1DLG9CQUFvQixDQUFDO0VBQ3hDLGFBQWFDLG1CQUFtQkEsQ0FBQ0MsRUFBRSxFQUFFO0lBQ25DLE1BQU1DLGFBQWEsR0FBRyxNQUFNQyxxQkFBYSxDQUFDQyxPQUFPLENBQUM7TUFDaERDLEtBQUssRUFBRTtRQUFFQyxVQUFVLEVBQUVMO01BQUc7SUFDMUIsQ0FBQyxDQUFDO0lBQ0YsT0FBT0MsYUFBYTtFQUN0QjtFQUVBLGFBQWFLLHlCQUF5QkEsQ0FBQ0MsTUFBTSxFQUFFQyxHQUFHLEVBQUU7SUFDbEQsTUFBTU4scUJBQWEsQ0FBQ08sTUFBTSxDQUN4QjtNQUNFQyxNQUFNLEVBQUU7SUFDVixDQUFDLEVBQ0Q7TUFBRU4sS0FBSyxFQUFFO1FBQUVDLFVBQVUsRUFBRUU7TUFBTztJQUFFLENBQUMsQ0FDbEM7SUFDRCxPQUFPQyxHQUFHLENBQUNHLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQ0MsSUFBSSxDQUFDO01BQUVDLE9BQU8sRUFBRTtJQUE2QixDQUFDLENBQUM7RUFDeEU7RUFFQSxhQUFhQyw4QkFBOEJBLENBQ3pDQyxjQUFjLEVBQ2RQLEdBQUcsRUFDSEUsTUFBTSxHQUFHLElBQUksRUFDYjtJQUNBLE1BQU1NLFlBQVksR0FBRyxNQUFNZCxxQkFBYSxDQUFDZSxPQUFPLENBQUM7TUFDL0NiLEtBQUssRUFBRTtRQUFFSixFQUFFLEVBQUVlO01BQWU7SUFDOUIsQ0FBQyxDQUFDO0lBQ0YsSUFBSSxDQUFDQyxZQUFZLEVBQUU7TUFDakIsT0FBT1IsR0FBRyxDQUFDRyxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUNDLElBQUksQ0FBQztRQUFFQyxPQUFPLEVBQUU7TUFBeUIsQ0FBQyxDQUFDO0lBQ3BFO0lBQ0FHLFlBQVksQ0FBQ04sTUFBTSxHQUFHQSxNQUFNO0lBQzVCLE1BQU1NLFlBQVksQ0FBQ0UsSUFBSSxFQUFFO0lBQ3pCLE9BQU9WLEdBQUcsQ0FBQ0ksSUFBSSxDQUFDSSxZQUFZLENBQUM7RUFDL0I7RUFFQSxhQUFhRyxrQkFBa0JBLENBQUNDLElBQUksRUFBRTtJQUNwQyxNQUFNSixZQUFZLEdBQUcsTUFBTWQscUJBQWEsQ0FBQ2UsT0FBTyxDQUFDO01BQy9DYixLQUFLLEVBQUU7UUFBRUosRUFBRSxFQUFFb0IsSUFBSSxDQUFDQztNQUFNO0lBQzFCLENBQUMsQ0FBQztJQUNGLElBQUksQ0FBQ0wsWUFBWSxFQUFFO01BQ2pCLE9BQU8sV0FBVztJQUNwQjtJQUNBLElBQUlBLFlBQVksQ0FBQ1gsVUFBVSxLQUFLZSxJQUFJLENBQUNiLE1BQU0sRUFBRTtNQUMzQyxPQUFPLFdBQVc7SUFDcEI7SUFDQSxNQUFNUyxZQUFZLENBQUNNLE9BQU8sQ0FBQztNQUN6QmxCLEtBQUssRUFBRTtRQUFFSixFQUFFLEVBQUVvQixJQUFJLENBQUNDLEtBQUs7UUFBRWhCLFVBQVUsRUFBRWUsSUFBSSxDQUFDYjtNQUFPO0lBQ25ELENBQUMsQ0FBQztFQUNKOztFQUVBO0VBQ0EsYUFBYWdCLGtCQUFrQkEsQ0FBQ0gsSUFBSSxFQUFFO0lBQ3BDLE1BQU1KLFlBQVksR0FBRyxNQUFNZCxxQkFBYSxDQUFDQyxPQUFPLENBQUM7TUFDL0NDLEtBQUssRUFBRTtRQUFFSixFQUFFLEVBQUVvQixJQUFJLENBQUNiO01BQU87SUFDM0IsQ0FBQyxDQUFDO0lBQ0YsSUFBSSxDQUFDUyxZQUFZLEVBQUU7TUFDakIsT0FBTywyQkFBMkI7SUFDcEM7SUFDQSxNQUFNZCxxQkFBYSxDQUFDb0IsT0FBTyxDQUFDO01BQzFCbEIsS0FBSyxFQUFFO1FBQUVDLFVBQVUsRUFBRWUsSUFBSSxDQUFDYjtNQUFPO0lBQ25DLENBQUMsQ0FBQztFQUNKO0FBQ0Y7QUFBQ2lCLE9BQUEsQ0FBQUMsT0FBQSxHQUFBM0Isb0JBQUE7QUFBQTRCLE1BQUEsQ0FBQUYsT0FBQSxHQUFBQSxPQUFBLENBQUFDLE9BQUEifQ==","map":{"version":3,"names":["_models","require","NotificationServices","getAllNotifications","id","notificationz","notifications","findAll","where","receiverId","markAllNotificationAsRead","userId","res","update","isRead","status","json","message","markNotificationAsReadOrUnread","notificationId","notification","findOne","save","deleteNotification","data","notId","destroy","clearNotifications","exports","default","module"],"sourceRoot":"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/services/","sources":["notification.services.js"],"sourcesContent":["/* eslint-disable require-jsdoc */\n// eslint-disable-next-line import/named\nimport { notifications } from '../database/models';\n\nexport default class NotificationServices {\n  static async getAllNotifications(id) {\n    const notificationz = await notifications.findAll({\n      where: { receiverId: id },\n    });\n    return notificationz;\n  }\n\n  static async markAllNotificationAsRead(userId, res) {\n    await notifications.update(\n      {\n        isRead: true,\n      },\n      { where: { receiverId: userId } }\n    );\n    return res.status(200).json({ message: 'All notifications are read' });\n  }\n\n  static async markNotificationAsReadOrUnread(\n    notificationId,\n    res,\n    isRead = true\n  ) {\n    const notification = await notifications.findOne({\n      where: { id: notificationId },\n    });\n    if (!notification) {\n      return res.status(404).json({ message: 'Notification not found' });\n    }\n    notification.isRead = isRead;\n    await notification.save();\n    return res.json(notification);\n  }\n\n  static async deleteNotification(data) {\n    const notification = await notifications.findOne({\n      where: { id: data.notId },\n    });\n    if (!notification) {\n      return 'not exist';\n    }\n    if (notification.receiverId !== data.userId) {\n      return 'forbidden';\n    }\n    await notification.destroy({\n      where: { id: data.notId, receiverId: data.userId },\n    });\n  }\n\n  // eslint-disable-next-line require-jsdoc\n  static async clearNotifications(data) {\n    const notification = await notifications.findAll({\n      where: { id: data.userId },\n    });\n    if (!notification) {\n      return 'no notifications to clear';\n    }\n    await notifications.destroy({\n      where: { receiverId: data.userId },\n    });\n  }\n}\n"],"mappings":";;;;;;AAEA,IAAAA,OAAA,GAAAC,OAAA;AAFA;AACA;;AAGe,MAAMC,oBAAoB,CAAC;EACxC,aAAaC,mBAAmBA,CAACC,EAAE,EAAE;IACnC,MAAMC,aAAa,GAAG,MAAMC,qBAAa,CAACC,OAAO,CAAC;MAChDC,KAAK,EAAE;QAAEC,UAAU,EAAEL;MAAG;IAC1B,CAAC,CAAC;IACF,OAAOC,aAAa;EACtB;EAEA,aAAaK,yBAAyBA,CAACC,MAAM,EAAEC,GAAG,EAAE;IAClD,MAAMN,qBAAa,CAACO,MAAM,CACxB;MACEC,MAAM,EAAE;IACV,CAAC,EACD;MAAEN,KAAK,EAAE;QAAEC,UAAU,EAAEE;MAAO;IAAE,CAAC,CAClC;IACD,OAAOC,GAAG,CAACG,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;MAAEC,OAAO,EAAE;IAA6B,CAAC,CAAC;EACxE;EAEA,aAAaC,8BAA8BA,CACzCC,cAAc,EACdP,GAAG,EACHE,MAAM,GAAG,IAAI,EACb;IACA,MAAMM,YAAY,GAAG,MAAMd,qBAAa,CAACe,OAAO,CAAC;MAC/Cb,KAAK,EAAE;QAAEJ,EAAE,EAAEe;MAAe;IAC9B,CAAC,CAAC;IACF,IAAI,CAACC,YAAY,EAAE;MACjB,OAAOR,GAAG,CAACG,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;QAAEC,OAAO,EAAE;MAAyB,CAAC,CAAC;IACpE;IACAG,YAAY,CAACN,MAAM,GAAGA,MAAM;IAC5B,MAAMM,YAAY,CAACE,IAAI,EAAE;IACzB,OAAOV,GAAG,CAACI,IAAI,CAACI,YAAY,CAAC;EAC/B;EAEA,aAAaG,kBAAkBA,CAACC,IAAI,EAAE;IACpC,MAAMJ,YAAY,GAAG,MAAMd,qBAAa,CAACe,OAAO,CAAC;MAC/Cb,KAAK,EAAE;QAAEJ,EAAE,EAAEoB,IAAI,CAACC;MAAM;IAC1B,CAAC,CAAC;IACF,IAAI,CAACL,YAAY,EAAE;MACjB,OAAO,WAAW;IACpB;IACA,IAAIA,YAAY,CAACX,UAAU,KAAKe,IAAI,CAACb,MAAM,EAAE;MAC3C,OAAO,WAAW;IACpB;IACA,MAAMS,YAAY,CAACM,OAAO,CAAC;MACzBlB,KAAK,EAAE;QAAEJ,EAAE,EAAEoB,IAAI,CAACC,KAAK;QAAEhB,UAAU,EAAEe,IAAI,CAACb;MAAO;IACnD,CAAC,CAAC;EACJ;;EAEA;EACA,aAAagB,kBAAkBA,CAACH,IAAI,EAAE;IACpC,MAAMJ,YAAY,GAAG,MAAMd,qBAAa,CAACC,OAAO,CAAC;MAC/CC,KAAK,EAAE;QAAEJ,EAAE,EAAEoB,IAAI,CAACb;MAAO;IAC3B,CAAC,CAAC;IACF,IAAI,CAACS,YAAY,EAAE;MACjB,OAAO,2BAA2B;IACpC;IACA,MAAMd,qBAAa,CAACoB,OAAO,CAAC;MAC1BlB,KAAK,EAAE;QAAEC,UAAU,EAAEe,IAAI,CAACb;MAAO;IACnC,CAAC,CAAC;EACJ;AACF;AAACiB,OAAA,CAAAC,OAAA,GAAA3B,oBAAA;AAAA4B,MAAA,CAAAF,OAAA,GAAAA,OAAA,CAAAC,OAAA"}},"mtime":1682148437962},"{\"assumptions\":{},\"sourceRoot\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/routes/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"filename\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/routes/payment.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/node_modules/babel-plugin-add-module-exports/lib/index.js\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-runtime\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"regenerator\":true},\"externalDependencies\":[]},{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.21.0:development":{"value":{"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _express = _interopRequireDefault(require(\"express\"));\nvar _payment = _interopRequireDefault(require(\"../controllers/payment.controllers\"));\nvar _verifyToken = _interopRequireDefault(require(\"../middlewares/verifyToken\"));\nconst routes = _express.default.Router();\nroutes.get('/success', _payment.default.success);\nroutes.get('/fail', _payment.default.fail);\nroutes.post('/order/:id', _verifyToken.default, _payment.default.pay);\nvar _default = routes;\nexports.default = _default;\nmodule.exports = exports.default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfZXhwcmVzcyIsIl9pbnRlcm9wUmVxdWlyZURlZmF1bHQiLCJyZXF1aXJlIiwiX3BheW1lbnQiLCJfdmVyaWZ5VG9rZW4iLCJyb3V0ZXMiLCJleHByZXNzIiwiUm91dGVyIiwiZ2V0IiwiUGF5bWVudENvbnRyb2xsZXJzIiwic3VjY2VzcyIsImZhaWwiLCJwb3N0IiwiaXNBdXRoZW50aWNhdGVkIiwicGF5IiwiX2RlZmF1bHQiLCJleHBvcnRzIiwiZGVmYXVsdCIsIm1vZHVsZSJdLCJzb3VyY2VSb290IjoiL1VzZXJzL2FuZGVsYXJ3YW5kYS9EZXNrdG9wL2UtY29tbS10ZWFtLWJyb2dyYW1tZXJzLWJuL3NyYy9yb3V0ZXMvIiwic291cmNlcyI6WyJwYXltZW50LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBleHByZXNzIGZyb20gJ2V4cHJlc3MnO1xuaW1wb3J0IFBheW1lbnRDb250cm9sbGVycyBmcm9tICcuLi9jb250cm9sbGVycy9wYXltZW50LmNvbnRyb2xsZXJzJztcbmltcG9ydCBpc0F1dGhlbnRpY2F0ZWQgZnJvbSAnLi4vbWlkZGxld2FyZXMvdmVyaWZ5VG9rZW4nO1xuXG5jb25zdCByb3V0ZXMgPSBleHByZXNzLlJvdXRlcigpO1xuXG5yb3V0ZXMuZ2V0KCcvc3VjY2VzcycsIFBheW1lbnRDb250cm9sbGVycy5zdWNjZXNzKTtcbnJvdXRlcy5nZXQoJy9mYWlsJywgUGF5bWVudENvbnRyb2xsZXJzLmZhaWwpO1xucm91dGVzLnBvc3QoJy9vcmRlci86aWQnLCBpc0F1dGhlbnRpY2F0ZWQsIFBheW1lbnRDb250cm9sbGVycy5wYXkpO1xuXG5leHBvcnQgZGVmYXVsdCByb3V0ZXM7XG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBQSxJQUFBQSxRQUFBLEdBQUFDLHNCQUFBLENBQUFDLE9BQUE7QUFDQSxJQUFBQyxRQUFBLEdBQUFGLHNCQUFBLENBQUFDLE9BQUE7QUFDQSxJQUFBRSxZQUFBLEdBQUFILHNCQUFBLENBQUFDLE9BQUE7QUFFQSxNQUFNRyxNQUFNLEdBQUdDLGdCQUFPLENBQUNDLE1BQU0sRUFBRTtBQUUvQkYsTUFBTSxDQUFDRyxHQUFHLENBQUMsVUFBVSxFQUFFQyxnQkFBa0IsQ0FBQ0MsT0FBTyxDQUFDO0FBQ2xETCxNQUFNLENBQUNHLEdBQUcsQ0FBQyxPQUFPLEVBQUVDLGdCQUFrQixDQUFDRSxJQUFJLENBQUM7QUFDNUNOLE1BQU0sQ0FBQ08sSUFBSSxDQUFDLFlBQVksRUFBRUMsb0JBQWUsRUFBRUosZ0JBQWtCLENBQUNLLEdBQUcsQ0FBQztBQUFDLElBQUFDLFFBQUEsR0FFcERWLE1BQU07QUFBQVcsT0FBQSxDQUFBQyxPQUFBLEdBQUFGLFFBQUE7QUFBQUcsTUFBQSxDQUFBRixPQUFBLEdBQUFBLE9BQUEsQ0FBQUMsT0FBQSJ9","map":{"version":3,"names":["_express","_interopRequireDefault","require","_payment","_verifyToken","routes","express","Router","get","PaymentControllers","success","fail","post","isAuthenticated","pay","_default","exports","default","module"],"sourceRoot":"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/routes/","sources":["payment.js"],"sourcesContent":["import express from 'express';\nimport PaymentControllers from '../controllers/payment.controllers';\nimport isAuthenticated from '../middlewares/verifyToken';\n\nconst routes = express.Router();\n\nroutes.get('/success', PaymentControllers.success);\nroutes.get('/fail', PaymentControllers.fail);\nroutes.post('/order/:id', isAuthenticated, PaymentControllers.pay);\n\nexport default routes;\n"],"mappings":";;;;;;;AAAA,IAAAA,QAAA,GAAAC,sBAAA,CAAAC,OAAA;AACA,IAAAC,QAAA,GAAAF,sBAAA,CAAAC,OAAA;AACA,IAAAE,YAAA,GAAAH,sBAAA,CAAAC,OAAA;AAEA,MAAMG,MAAM,GAAGC,gBAAO,CAACC,MAAM,EAAE;AAE/BF,MAAM,CAACG,GAAG,CAAC,UAAU,EAAEC,gBAAkB,CAACC,OAAO,CAAC;AAClDL,MAAM,CAACG,GAAG,CAAC,OAAO,EAAEC,gBAAkB,CAACE,IAAI,CAAC;AAC5CN,MAAM,CAACO,IAAI,CAAC,YAAY,EAAEC,oBAAe,EAAEJ,gBAAkB,CAACK,GAAG,CAAC;AAAC,IAAAC,QAAA,GAEpDV,MAAM;AAAAW,OAAA,CAAAC,OAAA,GAAAF,QAAA;AAAAG,MAAA,CAAAF,OAAA,GAAAA,OAAA,CAAAC,OAAA"}},"mtime":1682148437958},"{\"assumptions\":{},\"sourceRoot\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/controllers/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"filename\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/controllers/payment.controllers.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/node_modules/babel-plugin-add-module-exports/lib/index.js\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-runtime\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"regenerator\":true},\"externalDependencies\":[]},{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.21.0:development":{"value":{"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _jwt = require(\"../helpers/jwt\");\nvar _payment = _interopRequireDefault(require(\"../services/payment.services\"));\nvar _mail = require(\"../helpers/mail\");\nvar _emailConfig = require(\"../helpers/emailConfig\");\nvar _mailTemplate = require(\"../helpers/mailTemplate\");\nvar _payment2 = require(\"../loggers/payment.logger\");\n/**\n * payment controllers class\n */\nclass PaymentControllers {\n  /**\n   * @param {*} req\n   * @param {*} res\n   * @returns {res} response\n   */\n  static async success(req, res) {\n    try {\n      const {\n        redirect,\n        user,\n        products\n      } = await _payment.default.success(req);\n      const email = (0, _mailTemplate.paymentComplete)(user, products);\n      (0, _mail.sendEmail)((0, _emailConfig.emailConfig)({\n        email: user.email,\n        subject: 'Thank you for purchasing our products!',\n        content: email\n      }));\n      if (redirect) return res.redirect(301, redirect);\n      (0, _payment2.logPaymentSuccess)(user, products);\n      return res.status(200).json({\n        message: 'payment successfully',\n        url: redirect\n      });\n    } catch (err) {\n      (0, _payment2.logPaymentError)(req, err);\n      return res.status(500).json({\n        message: 'server error'\n      });\n    }\n  }\n\n  /**\n   * @param {*} req\n   * @param {*} res\n   * @returns {res} response\n   */\n  static async fail(req, res) {\n    const {\n      info\n    } = req.query;\n    const {\n      value\n    } = _jwt.Jwt.verifyToken(info);\n    const {\n      redirect\n    } = value;\n    if (redirect) return res.redirect(301, redirect);\n    (0, _payment2.logPaymentFail)(req);\n    res.status(400).json({\n      message: 'payment failed'\n    });\n  }\n\n  /**\n   * @param {*} req\n   * @param {*} res\n   * @returns {res} response\n   */\n  static async pay(req, res) {\n    try {\n      const {\n        items,\n        redirect,\n        error\n      } = await _payment.default.payOrder(req);\n      if (error) return res.status(400).json({\n        error,\n        url: redirect\n      });\n      const email = (0, _mailTemplate.paymentEmail)(req.user, items, redirect);\n      (0, _mail.sendEmail)((0, _emailConfig.emailConfig)({\n        email: req.user.email,\n        subject: 'Thanks for your interest in our products!',\n        content: email\n      }));\n      return res.status(200).json({\n        items,\n        url: redirect\n      });\n    } catch (error) {\n      (0, _payment2.logPaymentError)(req, error);\n      return res.status(500).json({\n        message: 'server error',\n        error\n      });\n    }\n  }\n}\nexports.default = PaymentControllers;\nmodule.exports = exports.default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfand0IiwicmVxdWlyZSIsIl9wYXltZW50IiwiX2ludGVyb3BSZXF1aXJlRGVmYXVsdCIsIl9tYWlsIiwiX2VtYWlsQ29uZmlnIiwiX21haWxUZW1wbGF0ZSIsIl9wYXltZW50MiIsIlBheW1lbnRDb250cm9sbGVycyIsInN1Y2Nlc3MiLCJyZXEiLCJyZXMiLCJyZWRpcmVjdCIsInVzZXIiLCJwcm9kdWN0cyIsIlBheW1lbnRzIiwiZW1haWwiLCJwYXltZW50Q29tcGxldGUiLCJzZW5kRW1haWwiLCJlbWFpbENvbmZpZyIsInN1YmplY3QiLCJjb250ZW50IiwibG9nUGF5bWVudFN1Y2Nlc3MiLCJzdGF0dXMiLCJqc29uIiwibWVzc2FnZSIsInVybCIsImVyciIsImxvZ1BheW1lbnRFcnJvciIsImZhaWwiLCJpbmZvIiwicXVlcnkiLCJ2YWx1ZSIsIkp3dCIsInZlcmlmeVRva2VuIiwibG9nUGF5bWVudEZhaWwiLCJwYXkiLCJpdGVtcyIsImVycm9yIiwicGF5T3JkZXIiLCJwYXltZW50RW1haWwiLCJleHBvcnRzIiwiZGVmYXVsdCIsIm1vZHVsZSJdLCJzb3VyY2VSb290IjoiL1VzZXJzL2FuZGVsYXJ3YW5kYS9EZXNrdG9wL2UtY29tbS10ZWFtLWJyb2dyYW1tZXJzLWJuL3NyYy9jb250cm9sbGVycy8iLCJzb3VyY2VzIjpbInBheW1lbnQuY29udHJvbGxlcnMuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgSnd0IH0gZnJvbSAnLi4vaGVscGVycy9qd3QnO1xuaW1wb3J0IFBheW1lbnRzIGZyb20gJy4uL3NlcnZpY2VzL3BheW1lbnQuc2VydmljZXMnO1xuaW1wb3J0IHsgc2VuZEVtYWlsIH0gZnJvbSAnLi4vaGVscGVycy9tYWlsJztcbmltcG9ydCB7IGVtYWlsQ29uZmlnIH0gZnJvbSAnLi4vaGVscGVycy9lbWFpbENvbmZpZyc7XG5pbXBvcnQge1xuICBwYXltZW50Q29tcGxldGUsIHBheW1lbnRFbWFpbFxufSBmcm9tICcuLi9oZWxwZXJzL21haWxUZW1wbGF0ZSc7XG5pbXBvcnQgeyBsb2dQYXltZW50RXJyb3IsIGxvZ1BheW1lbnRGYWlsLCBsb2dQYXltZW50U3VjY2VzcyB9IGZyb20gJy4uL2xvZ2dlcnMvcGF5bWVudC5sb2dnZXInO1xuXG4vKipcbiAqIHBheW1lbnQgY29udHJvbGxlcnMgY2xhc3NcbiAqL1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUGF5bWVudENvbnRyb2xsZXJzIHtcbiAgLyoqXG4gICAqIEBwYXJhbSB7Kn0gcmVxXG4gICAqIEBwYXJhbSB7Kn0gcmVzXG4gICAqIEByZXR1cm5zIHtyZXN9IHJlc3BvbnNlXG4gICAqL1xuICBzdGF0aWMgYXN5bmMgc3VjY2VzcyhyZXEsIHJlcykge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCB7IHJlZGlyZWN0LCB1c2VyLCBwcm9kdWN0cyB9ID0gYXdhaXQgUGF5bWVudHMuc3VjY2VzcyhyZXEpO1xuXG4gICAgICBjb25zdCBlbWFpbCA9IHBheW1lbnRDb21wbGV0ZSh1c2VyLCBwcm9kdWN0cyk7XG4gICAgICBzZW5kRW1haWwoXG4gICAgICAgIGVtYWlsQ29uZmlnKHtcbiAgICAgICAgICBlbWFpbDogdXNlci5lbWFpbCxcbiAgICAgICAgICBzdWJqZWN0OiAnVGhhbmsgeW91IGZvciBwdXJjaGFzaW5nIG91ciBwcm9kdWN0cyEnLFxuICAgICAgICAgIGNvbnRlbnQ6IGVtYWlsLFxuICAgICAgICB9KVxuICAgICAgKTtcbiAgICAgIGlmIChyZWRpcmVjdCkgcmV0dXJuIHJlcy5yZWRpcmVjdCgzMDEsIHJlZGlyZWN0KTtcbiAgICAgIGxvZ1BheW1lbnRTdWNjZXNzKHVzZXIsIHByb2R1Y3RzKTtcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDIwMCkuanNvbih7IG1lc3NhZ2U6ICdwYXltZW50IHN1Y2Nlc3NmdWxseScsIHVybDogcmVkaXJlY3QgfSk7XG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICBsb2dQYXltZW50RXJyb3IocmVxLCBlcnIpO1xuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgbWVzc2FnZTogJ3NlcnZlciBlcnJvcicgfSk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7Kn0gcmVxXG4gICAqIEBwYXJhbSB7Kn0gcmVzXG4gICAqIEByZXR1cm5zIHtyZXN9IHJlc3BvbnNlXG4gICAqL1xuICBzdGF0aWMgYXN5bmMgZmFpbChyZXEsIHJlcykge1xuICAgIGNvbnN0IHsgaW5mbyB9ID0gcmVxLnF1ZXJ5O1xuICAgIGNvbnN0IHsgdmFsdWUgfSA9IEp3dC52ZXJpZnlUb2tlbihpbmZvKTtcbiAgICBjb25zdCB7IHJlZGlyZWN0IH0gPSB2YWx1ZTtcblxuICAgIGlmIChyZWRpcmVjdCkgcmV0dXJuIHJlcy5yZWRpcmVjdCgzMDEsIHJlZGlyZWN0KTtcbiAgICBsb2dQYXltZW50RmFpbChyZXEpO1xuICAgIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgbWVzc2FnZTogJ3BheW1lbnQgZmFpbGVkJyB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0geyp9IHJlcVxuICAgKiBAcGFyYW0geyp9IHJlc1xuICAgKiBAcmV0dXJucyB7cmVzfSByZXNwb25zZVxuICAgKi9cbiAgc3RhdGljIGFzeW5jIHBheShyZXEsIHJlcykge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCB7IGl0ZW1zLCByZWRpcmVjdCwgZXJyb3IgfSA9IGF3YWl0IFBheW1lbnRzLnBheU9yZGVyKHJlcSk7XG5cbiAgICAgIGlmIChlcnJvcikgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3IsIHVybDogcmVkaXJlY3QgfSk7XG5cbiAgICAgIGNvbnN0IGVtYWlsID0gcGF5bWVudEVtYWlsKHJlcS51c2VyLCBpdGVtcywgcmVkaXJlY3QpO1xuICAgICAgc2VuZEVtYWlsKFxuICAgICAgICBlbWFpbENvbmZpZyh7XG4gICAgICAgICAgZW1haWw6IHJlcS51c2VyLmVtYWlsLFxuICAgICAgICAgIHN1YmplY3Q6ICdUaGFua3MgZm9yIHlvdXIgaW50ZXJlc3QgaW4gb3VyIHByb2R1Y3RzIScsXG4gICAgICAgICAgY29udGVudDogZW1haWwsXG4gICAgICAgIH0pXG4gICAgICApO1xuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoMjAwKS5qc29uKHsgaXRlbXMsIHVybDogcmVkaXJlY3QgfSk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGxvZ1BheW1lbnRFcnJvcihyZXEsIGVycm9yKTtcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDUwMCkuanNvbih7IG1lc3NhZ2U6ICdzZXJ2ZXIgZXJyb3InLCBlcnJvciB9KTtcbiAgICB9XG4gIH1cbn1cbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBLElBQUFBLElBQUEsR0FBQUMsT0FBQTtBQUNBLElBQUFDLFFBQUEsR0FBQUMsc0JBQUEsQ0FBQUYsT0FBQTtBQUNBLElBQUFHLEtBQUEsR0FBQUgsT0FBQTtBQUNBLElBQUFJLFlBQUEsR0FBQUosT0FBQTtBQUNBLElBQUFLLGFBQUEsR0FBQUwsT0FBQTtBQUdBLElBQUFNLFNBQUEsR0FBQU4sT0FBQTtBQUVBO0FBQ0E7QUFDQTtBQUNlLE1BQU1PLGtCQUFrQixDQUFDO0VBQ3RDO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7RUFDRSxhQUFhQyxPQUFPQSxDQUFDQyxHQUFHLEVBQUVDLEdBQUcsRUFBRTtJQUM3QixJQUFJO01BQ0YsTUFBTTtRQUFFQyxRQUFRO1FBQUVDLElBQUk7UUFBRUM7TUFBUyxDQUFDLEdBQUcsTUFBTUMsZ0JBQVEsQ0FBQ04sT0FBTyxDQUFDQyxHQUFHLENBQUM7TUFFaEUsTUFBTU0sS0FBSyxHQUFHLElBQUFDLDZCQUFlLEVBQUNKLElBQUksRUFBRUMsUUFBUSxDQUFDO01BQzdDLElBQUFJLGVBQVMsRUFDUCxJQUFBQyx3QkFBVyxFQUFDO1FBQ1ZILEtBQUssRUFBRUgsSUFBSSxDQUFDRyxLQUFLO1FBQ2pCSSxPQUFPLEVBQUUsd0NBQXdDO1FBQ2pEQyxPQUFPLEVBQUVMO01BQ1gsQ0FBQyxDQUFDLENBQ0g7TUFDRCxJQUFJSixRQUFRLEVB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","map":{"version":3,"names":["_jwt","require","_payment","_interopRequireDefault","_mail","_emailConfig","_mailTemplate","_payment2","PaymentControllers","success","req","res","redirect","user","products","Payments","email","paymentComplete","sendEmail","emailConfig","subject","content","logPaymentSuccess","status","json","message","url","err","logPaymentError","fail","info","query","value","Jwt","verifyToken","logPaymentFail","pay","items","error","payOrder","paymentEmail","exports","default","module"],"sourceRoot":"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/controllers/","sources":["payment.controllers.js"],"sourcesContent":["import { Jwt } from '../helpers/jwt';\nimport Payments from '../services/payment.services';\nimport { sendEmail } from '../helpers/mail';\nimport { emailConfig } from '../helpers/emailConfig';\nimport {\n  paymentComplete, paymentEmail\n} from '../helpers/mailTemplate';\nimport { logPaymentError, logPaymentFail, logPaymentSuccess } from '../loggers/payment.logger';\n\n/**\n * payment controllers class\n */\nexport default class PaymentControllers {\n  /**\n   * @param {*} req\n   * @param {*} res\n   * @returns {res} response\n   */\n  static async success(req, res) {\n    try {\n      const { redirect, user, products } = await Payments.success(req);\n\n      const email = paymentComplete(user, products);\n      sendEmail(\n        emailConfig({\n          email: user.email,\n          subject: 'Thank you for purchasing our products!',\n          content: email,\n        })\n      );\n      if (redirect) return res.redirect(301, redirect);\n      logPaymentSuccess(user, products);\n      return res.status(200).json({ message: 'payment successfully', url: redirect });\n    } catch (err) {\n      logPaymentError(req, err);\n      return res.status(500).json({ message: 'server error' });\n    }\n  }\n\n  /**\n   * @param {*} req\n   * @param {*} res\n   * @returns {res} response\n   */\n  static async fail(req, res) {\n    const { info } = req.query;\n    const { value } = Jwt.verifyToken(info);\n    const { redirect } = value;\n\n    if (redirect) return res.redirect(301, redirect);\n    logPaymentFail(req);\n    res.status(400).json({ message: 'payment failed' });\n  }\n\n  /**\n   * @param {*} req\n   * @param {*} res\n   * @returns {res} response\n   */\n  static async pay(req, res) {\n    try {\n      const { items, redirect, error } = await Payments.payOrder(req);\n\n      if (error) return res.status(400).json({ error, url: redirect });\n\n      const email = paymentEmail(req.user, items, redirect);\n      sendEmail(\n        emailConfig({\n          email: req.user.email,\n          subject: 'Thanks for your interest in our products!',\n          content: email,\n        })\n      );\n      return res.status(200).json({ items, url: redirect });\n    } catch (error) {\n      logPaymentError(req, error);\n      return res.status(500).json({ message: 'server error', error });\n    }\n  }\n}\n"],"mappings":"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"}},"mtime":1682148437922},"{\"assumptions\":{},\"sourceRoot\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/services/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"filename\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/services/payment.services.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/node_modules/babel-plugin-add-module-exports/lib/index.js\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-runtime\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"regenerator\":true},\"externalDependencies\":[]},{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.21.0:development":{"value":{"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _stripe = _interopRequireDefault(require(\"stripe\"));\nvar _jwt = require(\"../helpers/jwt\");\nvar _models = require(\"../database/models\");\n/* eslint-disable no-await-in-loop */\n/* eslint-disable import/named */\n\nconst secretKey = process.env.STRIPE_SECRET_KEY;\nconst stripe = new _stripe.default(secretKey);\n\n/**\n * payment\n */\nclass Payments {\n  /**\n   * @param {Object} req\n   * @returns {message} success\n   */\n  static async success(req) {\n    const {\n      info,\n      session: sessionId\n    } = req.query;\n    const {\n      value\n    } = _jwt.Jwt.verifyToken(info);\n    const {\n      user,\n      redirect,\n      orderId\n    } = value;\n    const session = await stripe.checkout.sessions.retrieve(sessionId);\n    const ordered = await _models.order.findOne({\n      where: {\n        id: orderId\n      },\n      include: {\n        model: _models.products,\n        as: 'products',\n        attributes: ['id', 'images', 'name', 'available', 'price']\n      }\n    });\n    const pay = {\n      amount: session.amount_total,\n      orderId,\n      method: ordered.paymentMethod,\n      discount: session.total_details.amount_discount,\n      stripeId: session.id\n    };\n    const delivery = new Date().setDate(new Date().getDate() + 14);\n    const payment = await _models.payments.create(pay);\n    await _models.order.update({\n      status: 'Processing',\n      isPaid: true,\n      expectedDeliveryDate: delivery\n    }, {\n      where: {\n        id: ordered.id\n      }\n    });\n    // eslint-disable-next-line no-restricted-syntax\n    for (const item of ordered.products) {\n      const product = await _models.products.findOne({\n        where: {\n          id: item.id\n        }\n      });\n      product.quantity -= item.orderitem.quantity;\n      product.save();\n    }\n    const red = new URL(redirect);\n    const par = new URLSearchParams(red.search);\n    par.set('paymentID', payment.id);\n    return {\n      redirect: `${red.origin}${red.pathname}?${par}`,\n      user,\n      products: ordered.products\n    };\n  }\n\n  /**\n   * @param {Object} req\n   * @returns {object} message\n   */\n  static async payOrder(req) {\n    const ordered = await _models.order.findOne({\n      where: {\n        id: req.params.id\n      },\n      include: {\n        model: _models.products,\n        as: 'products',\n        attributes: ['id', 'images', 'name', 'available', 'price']\n      }\n    });\n    const serverURL = `${req.protocol}://${req.get('host')}`;\n    const {\n      success\n    } = req.body;\n    let {\n      fail\n    } = req.body;\n    if (!fail) {\n      fail = req.headers.referrer || req.headers.referer;\n    }\n    if (!ordered || ordered === null) return {\n      error: {\n        message: 'no such order'\n      },\n      redirect: fail\n    };\n    if (ordered.isPaid) {\n      return {\n        error: {\n          message: 'order is already paid'\n        },\n        redirect: fail\n      };\n    }\n    const successInfo = _jwt.Jwt.generateToken({\n      user: req.user,\n      orderId: req.params.id,\n      redirect: success\n    });\n    const failInfo = _jwt.Jwt.generateToken({\n      user: req.user,\n      redirect: fail\n    });\n    const items = ordered.products.map(item => ({\n      price_data: {\n        product_data: {\n          name: item.name,\n          images: item.images\n        },\n        unit_amount: item.price,\n        currency: 'rwf'\n      },\n      quantity: item.orderitem.quantity\n    })).filter(item => item && item !== null);\n    const exp = new Date();\n    exp.setHours(exp.getHours + 2);\n    let session;\n    try {\n      session = await stripe.checkout.sessions.create({\n        customer_email: req.user.email,\n        line_items: items,\n        mode: 'payment',\n        payment_method_types: ['card'],\n        success_url: `${serverURL}/payment/success?info=${successInfo}&session={CHECKOUT_SESSION_ID}`,\n        cancel_url: `${serverURL}/payment/fail?info=${failInfo}`\n      });\n    } catch (e) {\n      return {\n        error: e\n      };\n    }\n    return {\n      items: ordered.products,\n      redirect: session.url\n    };\n  }\n}\nexports.default = Payments;\nmodule.exports = exports.default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfc3RyaXBlIiwiX2ludGVyb3BSZXF1aXJlRGVmYXVsdCIsInJlcXVpcmUiLCJfand0IiwiX21vZGVscyIsInNlY3JldEtleSIsInByb2Nlc3MiLCJlbnYiLCJTVFJJUEVfU0VDUkVUX0tFWSIsInN0cmlwZSIsIlN0cmlwZSIsIlBheW1lbnRzIiwic3VjY2VzcyIsInJlcSIsImluZm8iLCJzZXNzaW9uIiwic2Vzc2lvbklkIiwicXVlcnkiLCJ2YWx1ZSIsIkp3dCIsInZlcmlmeVRva2VuIiwidXNlciIsInJlZGlyZWN0Iiwib3JkZXJJZCIsImNoZWNrb3V0Iiwic2Vzc2lvbnMiLCJyZXRyaWV2ZSIsIm9yZGVyZWQiLCJvcmRlciIsImZpbmRPbmUiLCJ3aGVyZSIsImlkIiwiaW5jbHVkZSIsIm1vZGVsIiwicHJvZHVjdHMiLCJhcyIsImF0dHJpYnV0ZXMiLCJwYXkiLCJhbW91bnQiLCJhbW91bnRfdG90YWwiLCJtZXRob2QiLCJwYXltZW50TWV0aG9kIiwiZGlzY291bnQiLCJ0b3RhbF9kZXRhaWxzIiwiYW1vdW50X2Rpc2NvdW50Iiwic3RyaXBlSWQiLCJkZWxpdmVyeSIsIkRhdGUiLCJzZXREYXRlIiwiZ2V0RGF0ZSIsInBheW1lbnQiLCJwYXltZW50cyIsImNyZWF0ZSIsInVwZGF0ZSIsInN0YXR1cyIsImlzUGFpZCIsImV4cGVjdGVkRGVsaXZlcnlEYXRlIiwiaXRlbSIsInByb2R1Y3QiLCJxdWFudGl0eSIsIm9yZGVyaXRlbSIsInNhdmUiLCJyZWQiLCJVUkwiLCJwYXIiLCJVUkxTZWFyY2hQYXJhbXMiLCJzZWFyY2giLCJzZXQiLCJvcmlnaW4iLCJwYXRobmFtZSIsInBheU9yZGVyIiwicGFyYW1zIiwic2VydmVyVVJMIiwicHJvdG9jb2wiLCJnZXQiLCJib2R5IiwiZmFpbCIsImhlYWRlcnMiLCJyZWZlcnJlciIsInJlZmVyZXIiLCJlcnJvciIsIm1lc3NhZ2UiLCJzdWNjZXNzSW5mbyIsImdlbmVyYXRlVG9rZW4iLCJmYWlsSW5mbyIsIml0ZW1zIiwibWFwIiwicHJpY2VfZGF0YSIsInByb2R1Y3RfZGF0YSIsIm5hbWUiLCJpbWFnZXMiLCJ1bml0X2Ftb3VudCIsInByaWNlIiwiY3VycmVuY3kiLCJmaWx0ZXIiLCJleHAiLCJzZXRIb3VycyIsImdldEhvdXJzIiwiY3VzdG9tZXJfZW1haWwiLCJlbWFpbCIsImxpbmVfaXRlbXMiLCJtb2RlIiwicGF5bWVudF9tZXRob2RfdHlwZXMiLCJzdWNjZXNzX3VybCIsImNhbmNlbF91cmwiLCJlIiwidXJsIiwiZXhwb3J0cyIsImRlZmF1bHQiLCJtb2R1bGUiXSwic291cmNlUm9vdCI6Ii9Vc2Vycy9hbmRlbGFyd2FuZGEvRGVza3RvcC9lLWNvbW0tdGVhbS1icm9ncmFtbWVycy1ibi9zcmMvc2VydmljZXMvIiwic291cmNlcyI6WyJwYXltZW50LnNlcnZpY2VzLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qIGVzbGludC1kaXNhYmxlIG5vLWF3YWl0LWluLWxvb3AgKi9cbi8qIGVzbGludC1kaXNhYmxlIGltcG9ydC9uYW1lZCAqL1xuaW1wb3J0IFN0cmlwZSBmcm9tICdzdHJpcGUnO1xuaW1wb3J0IHsgSnd0IH0gZnJvbSAnLi4vaGVscGVycy9qd3QnO1xuaW1wb3J0IHtcbiAgb3JkZXIsIHByb2R1Y3RzLCBwYXltZW50c1xufSBmcm9tICcuLi9kYXRhYmFzZS9tb2RlbHMnO1xuXG5jb25zdCBzZWNyZXRLZXkgPSBwcm9jZXNzLmVudi5TVFJJUEVfU0VDUkVUX0tFWTtcbmNvbnN0IHN0cmlwZSA9IG5ldyBTdHJpcGUoc2VjcmV0S2V5KTtcblxuLyoqXG4gKiBwYXltZW50XG4gKi9cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBheW1lbnRzIHtcbiAgLyoqXG4gICAqIEBwYXJhbSB7T2JqZWN0fSByZXFcbiAgICogQHJldHVybnMge21lc3NhZ2V9IHN1Y2Nlc3NcbiAgICovXG4gIHN0YXRpYyBhc3luYyBzdWNjZXNzKHJlcSkge1xuICAgIGNvbnN0IHsgaW5mbywgc2Vzc2lvbjogc2Vzc2lvbklkIH0gPSByZXEucXVlcnk7XG4gICAgY29uc3QgeyB2YWx1ZSB9ID0gSnd0LnZlcmlmeVRva2VuKGluZm8pO1xuICAgIGNvbnN0IHsgdXNlciwgcmVkaXJlY3QsIG9yZGVySWQgfSA9IHZhbHVlO1xuXG4gICAgY29uc3Qgc2Vzc2lvbiA9IGF3YWl0IHN0cmlwZS5jaGVja291dC5zZXNzaW9ucy5yZXRyaWV2ZShzZXNzaW9uSWQpO1xuICAgIGNvbnN0IG9yZGVyZWQgPSBhd2FpdCBvcmRlci5maW5kT25lKHtcbiAgICAgIHdoZXJlOiB7IGlkOiBvcmRlcklkIH0sXG4gICAgICBpbmNsdWRlOiB7XG4gICAgICAgIG1vZGVsOiBwcm9kdWN0cyxcbiAgICAgICAgYXM6ICdwcm9kdWN0cycsXG4gICAgICAgIGF0dHJpYnV0ZXM6IFsnaWQnLCAnaW1hZ2VzJywgJ25hbWUnLCAnYXZhaWxhYmxlJywgJ3ByaWNlJ11cbiAgICAgIH1cbiAgICB9KTtcblxuICAgIGNvbnN0IHBheSA9IHtcbiAgICAgIGFtb3VudDogc2Vzc2lvbi5hbW91bnRfdG90YWwsXG4gICAgICBvcmRlcklkLFxuICAgICAgbWV0aG9kOiBvcmRlcmVkLnBheW1lbnRNZXRob2QsXG4gICAgICBkaXNjb3VudDogc2Vzc2lvbi50b3RhbF9kZXRhaWxzLmFtb3VudF9kaXNjb3VudCxcbiAgICAgIHN0cmlwZUlkOiBzZXNzaW9uLmlkXG4gICAgfTtcbiAgICBjb25zdCBkZWxpdmVyeSA9IChuZXcgRGF0ZSgpKS5zZXREYXRlKChuZXcgRGF0ZSgpKS5nZXREYXRlKCkgKyAxNCk7XG4gICAgY29uc3QgcGF5bWVudCA9IGF3YWl0IHBheW1lbnRzLmNyZWF0ZShwYXkpO1xuICAgIGF3YWl0IG9yZGVyLnVwZGF0ZShcbiAgICAgIHsgc3RhdHVzOiAnUHJvY2Vzc2luZycsIGlzUGFpZDogdHJ1ZSwgZXhwZWN0ZWREZWxpdmVyeURhdGU6IGRlbGl2ZXJ5IH0sXG4gICAgICB7IHdoZXJlOiB7IGlkOiBvcmRlcmVkLmlkIH0gfVxuICAgICk7XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXJlc3RyaWN0ZWQtc3ludGF4XG4gICAgZm9yIChjb25zdCBpdGVtIG9mIG9yZGVyZWQucHJvZHVjdHMpIHtcbiAgICAgIGNvbnN0IHByb2R1Y3QgPSBhd2FpdCBwcm9kdWN0cy5maW5kT25lKHtcbiAgICAgICAgd2hlcmU6IHsgaWQ6IGl0ZW0uaWQgfVxuICAgICAgfSk7XG4gICAgICBwcm9kdWN0LnF1YW50aXR5IC09IGl0ZW0ub3JkZXJpdGVtLnF1YW50aXR5O1xuICAgICAgcHJvZHVjdC5zYXZlKCk7XG4gICAgfVxuXG4gICAgY29uc3QgcmVkID0gbmV3IFVSTChyZWRpcmVjdCk7XG4gICAgY29uc3QgcGFyID0gbmV3IFVSTFNlYXJjaFBhcmFtcyhyZWQuc2VhcmNoKTtcbiAgICBwYXIuc2V0KCdwYXltZW50SUQnLCBwYXltZW50LmlkKTtcblxuICAgIHJldHVybiB7IHJlZGlyZWN0OiBgJHtyZWQub3JpZ2lufSR7cmVkLnBhdGhuYW1lfT8ke3Bhcn1gLCB1c2VyLCBwcm9kdWN0czogb3JkZXJlZC5wcm9kdWN0cyB9O1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7T2JqZWN0fSByZXFcbiAgICogQHJldHVybnMge29iamVjdH0gbWVzc2FnZVxuICAgKi9cbiAgc3RhdGljIGFzeW5jIHBheU9yZGVyKHJlcSkge1xuICAgIGNvbnN0IG9yZGVyZWQgPSBhd2FpdCBvcmRlci5maW5kT25lKHtcbiAgICAgIHdoZXJlOiB7IGlkOiByZXEucGFyYW1zLmlkIH0sXG4gICAgICBpbmNsdWRlOiB7XG4gICAgICAgIG1vZGVsOiBwcm9kdWN0cyxcbiAgICAgICAgYXM6ICdwcm9kdWN0cycsXG4gICAgICAgIGF0dHJpYnV0ZXM6IFsnaWQnLCAnaW1hZ2VzJywgJ25hbWUnLCAnYXZhaWxhYmxlJywgJ3ByaWNlJ11cbiAgICAgIH1cbiAgICB9KTtcblxuICAgIGNvbnN0IHNlcnZlclVSTCA9IGAke3JlcS5wcm90b2NvbH06Ly8ke3JlcS5nZXQoJ2hvc3QnKX1gO1xuICAgIGNvbnN0IHsgc3VjY2VzcyB9ID0gcmVxLmJvZHk7XG4gICAgbGV0IHsgZmFpbCB9ID0gcmVxLmJvZHk7XG5cbiAgICBpZiAoIWZhaWwpIHtcbiAgICAgIGZhaWwgPSByZXEuaGVhZGVycy5yZWZlcnJlciB8fCByZXEuaGVhZGVycy5yZWZlcmVyO1xuICAgIH1cblxuICAgIGlmICghb3JkZXJlZCB8fCBvcmRlcmVkID09PSBudWxsKSByZXR1cm4geyBlcnJvcjogeyBtZXNzYWdlOiAnbm8gc3VjaCBvcmRlcicgfSwgcmVkaXJlY3Q6IGZhaWwgfTtcblxuICAgIGlmIChvcmRlcmVkLmlzUGFpZCkge1xuICAgICAgcmV0dXJuIHsgZXJyb3I6IHsgbWVzc2FnZTogJ29yZGVyIGlzIGFscmVhZHkgcGFpZCcgfSwgcmVkaXJlY3Q6IGZhaWwgfTtcbiAgICB9XG5cbiAgICBjb25zdCBzdWNjZXNzSW5mbyA9IEp3dC5nZW5lcmF0ZVRva2VuKHtcbiAgICAgIHVzZXI6IHJlcS51c2VyLFxuICAgICAgb3JkZXJJZDogcmVxLnBhcmFtcy5pZCxcbiAgICAgIHJlZGlyZWN0OiBzdWNjZXNzXG4gICAgfSk7XG4gICAgY29uc3QgZmFpbEluZm8gPSBKd3QuZ2VuZXJhdGVUb2tlbih7IHVzZXI6IHJlcS51c2VyLCByZWRpcmVjdDogZmFpbCB9KTtcblxuICAgIGNvbnN0IGl0ZW1zID0gb3JkZXJlZC5wcm9kdWN0cy5tYXAoKGl0ZW0pID0+ICh7XG4gICAgICBwcmljZV9kYXRhOiB7XG4gICAgICAgIHByb2R1Y3RfZGF0YToge1xuICAgICAgICAgIG5hbWU6IGl0ZW0ubmFtZSxcbiAgICAgICAgICBpbWFnZXM6IGl0ZW0uaW1hZ2VzXG4gICAgICAgIH0sXG4gICAgICAgIHVuaXRfYW1vdW50OiBpdGVtLnByaWNlLFxuICAgICAgICBjdXJyZW5jeTogJ3J3ZicsXG4gICAgICB9LFxuICAgICAgcXVhbnRpdHk6IGl0ZW0ub3JkZXJpdGVtLnF1YW50aXR5XG4gICAgfSkpLmZpbHRlcigoaXRlbSkgPT4gKGl0ZW0gJiYgaXRlbSAhPT0gbnVsbCkpO1xuXG4gICAgY29uc3QgZXhwID0gbmV3IERhdGUoKTtcbiAgICBleHAuc2V0SG91cnMoZXhwLmdldEhvdXJzICsgMik7XG4gICAgbGV0IHNlc3Npb247XG4gICAgdHJ5IHtcbiAgICAgIHNlc3Npb24gPSBhd2FpdCBzdHJpcGUuY2hlY2tvdXQuc2Vzc2lvbnMuY3JlYXRlKHtcbiAgICAgICAgY3VzdG9tZXJfZW1haWw6IHJlcS51c2VyLmVtYWlsLFxuICAgICAgICBsaW5lX2l0ZW1zOiBpdGVtcyxcbiAgICAgICAgbW9kZTogJ3BheW1lbnQnLFxuICAgICAgICBwYXltZW50X21ldGhvZF90eXBlczogWydjYXJkJ10sXG4gICAgICAgIHN1Y2Nlc3NfdXJsOiBgJHtzZXJ2ZXJVUkx9L3BheW1lbnQvc3VjY2Vzcz9pbmZvPSR7c3VjY2Vzc0luZm99JnNlc3Npb249e0NIRUNLT1VUX1NFU1NJT05fSUR9YCxcbiAgICAgICAgY2FuY2VsX3VybDogYCR7c2VydmVyVVJMfS9wYXltZW50L2ZhaWw/aW5mbz0ke2ZhaWxJbmZvfWAsXG4gICAgICB9KTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICByZXR1cm4geyBlcnJvcjogZSB9O1xuICAgIH1cbiAgICByZXR1cm4geyBpdGVtczogb3JkZXJlZC5wcm9kdWN0cywgcmVkaXJlY3Q6IHNlc3Npb24udXJsIH07XG4gIH1cbn1cbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUVBLElBQUFBLE9BQUEsR0FBQUMsc0JBQUEsQ0FBQUMsT0FBQTtBQUNBLElBQUFDLElBQUEsR0FBQUQsT0FBQTtBQUNBLElBQUFFLE9BQUEsR0FBQUYsT0FBQTtBQUpBO0FBQ0E7O0FBT0EsTUFBTUcsU0FBUyxHQUFHQyxPQUFPLENBQUNDLEdBQUcsQ0FBQ0MsaUJBQWlCO0FBQy9DLE1BQU1DLE1BQU0sR0FBRyxJQUFJQyxlQUFNLENBQUNMLFNBQVMsQ0FBQzs7QUFFcEM7QUFDQTtBQUNBO0FBQ2UsTUFBTU0sUUFBUSxDQUFDO0VBQzVCO0FBQ0Y7QUFDQTtBQUNBO0VBQ0UsYUFB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","map":{"version":3,"names":["_stripe","_interopRequireDefault","require","_jwt","_models","secretKey","process","env","STRIPE_SECRET_KEY","stripe","Stripe","Payments","success","req","info","session","sessionId","query","value","Jwt","verifyToken","user","redirect","orderId","checkout","sessions","retrieve","ordered","order","findOne","where","id","include","model","products","as","attributes","pay","amount","amount_total","method","paymentMethod","discount","total_details","amount_discount","stripeId","delivery","Date","setDate","getDate","payment","payments","create","update","status","isPaid","expectedDeliveryDate","item","product","quantity","orderitem","save","red","URL","par","URLSearchParams","search","set","origin","pathname","payOrder","params","serverURL","protocol","get","body","fail","headers","referrer","referer","error","message","successInfo","generateToken","failInfo","items","map","price_data","product_data","name","images","unit_amount","price","currency","filter","exp","setHours","getHours","customer_email","email","line_items","mode","payment_method_types","success_url","cancel_url","e","url","exports","default","module"],"sourceRoot":"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/services/","sources":["payment.services.js"],"sourcesContent":["/* eslint-disable no-await-in-loop */\n/* eslint-disable import/named */\nimport Stripe from 'stripe';\nimport { Jwt } from '../helpers/jwt';\nimport {\n  order, products, payments\n} from '../database/models';\n\nconst secretKey = process.env.STRIPE_SECRET_KEY;\nconst stripe = new Stripe(secretKey);\n\n/**\n * payment\n */\nexport default class Payments {\n  /**\n   * @param {Object} req\n   * @returns {message} success\n   */\n  static async success(req) {\n    const { info, session: sessionId } = req.query;\n    const { value } = Jwt.verifyToken(info);\n    const { user, redirect, orderId } = value;\n\n    const session = await stripe.checkout.sessions.retrieve(sessionId);\n    const ordered = await order.findOne({\n      where: { id: orderId },\n      include: {\n        model: products,\n        as: 'products',\n        attributes: ['id', 'images', 'name', 'available', 'price']\n      }\n    });\n\n    const pay = {\n      amount: session.amount_total,\n      orderId,\n      method: ordered.paymentMethod,\n      discount: session.total_details.amount_discount,\n      stripeId: session.id\n    };\n    const delivery = (new Date()).setDate((new Date()).getDate() + 14);\n    const payment = await payments.create(pay);\n    await order.update(\n      { status: 'Processing', isPaid: true, expectedDeliveryDate: delivery },\n      { where: { id: ordered.id } }\n    );\n    // eslint-disable-next-line no-restricted-syntax\n    for (const item of ordered.products) {\n      const product = await products.findOne({\n        where: { id: item.id }\n      });\n      product.quantity -= item.orderitem.quantity;\n      product.save();\n    }\n\n    const red = new URL(redirect);\n    const par = new URLSearchParams(red.search);\n    par.set('paymentID', payment.id);\n\n    return { redirect: `${red.origin}${red.pathname}?${par}`, user, products: ordered.products };\n  }\n\n  /**\n   * @param {Object} req\n   * @returns {object} message\n   */\n  static async payOrder(req) {\n    const ordered = await order.findOne({\n      where: { id: req.params.id },\n      include: {\n        model: products,\n        as: 'products',\n        attributes: ['id', 'images', 'name', 'available', 'price']\n      }\n    });\n\n    const serverURL = `${req.protocol}://${req.get('host')}`;\n    const { success } = req.body;\n    let { fail } = req.body;\n\n    if (!fail) {\n      fail = req.headers.referrer || req.headers.referer;\n    }\n\n    if (!ordered || ordered === null) return { error: { message: 'no such order' }, redirect: fail };\n\n    if (ordered.isPaid) {\n      return { error: { message: 'order is already paid' }, redirect: fail };\n    }\n\n    const successInfo = Jwt.generateToken({\n      user: req.user,\n      orderId: req.params.id,\n      redirect: success\n    });\n    const failInfo = Jwt.generateToken({ user: req.user, redirect: fail });\n\n    const items = ordered.products.map((item) => ({\n      price_data: {\n        product_data: {\n          name: item.name,\n          images: item.images\n        },\n        unit_amount: item.price,\n        currency: 'rwf',\n      },\n      quantity: item.orderitem.quantity\n    })).filter((item) => (item && item !== null));\n\n    const exp = new Date();\n    exp.setHours(exp.getHours + 2);\n    let session;\n    try {\n      session = await stripe.checkout.sessions.create({\n        customer_email: req.user.email,\n        line_items: items,\n        mode: 'payment',\n        payment_method_types: ['card'],\n        success_url: `${serverURL}/payment/success?info=${successInfo}&session={CHECKOUT_SESSION_ID}`,\n        cancel_url: `${serverURL}/payment/fail?info=${failInfo}`,\n      });\n    } catch (e) {\n      return { error: e };\n    }\n    return { items: ordered.products, redirect: session.url };\n  }\n}\n"],"mappings":"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"}},"mtime":1685643189471},"{\"assumptions\":{},\"sourceRoot\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/loggers/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"filename\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/loggers/payment.logger.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/node_modules/babel-plugin-add-module-exports/lib/index.js\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-runtime\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"regenerator\":true},\"externalDependencies\":[]},{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.21.0:development":{"value":{"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.logPaymentSuccess = exports.logPaymentFail = exports.logPaymentError = void 0;\nvar _logger = _interopRequireDefault(require(\"../configs/logger\"));\nvar _models = require(\"../database/models\");\n/* eslint-disable import/named */\n\nconst logPaymentSuccess = async (user, products) => {\n  const logData = {\n    level: 'info',\n    message: `User ${user.email} completed a payment`,\n    userId: user.id,\n    metadata: {\n      products\n    }\n  };\n  await _models.Log.create(logData);\n  _logger.default.info(`User ${user.email} completed a payment`);\n};\nexports.logPaymentSuccess = logPaymentSuccess;\nconst logPaymentFail = async req => {\n  const logData = {\n    level: 'info',\n    message: `Payment failed for user ${req.user.email}`,\n    userId: req.user.id,\n    metadata: {\n      redirect: {}\n    }\n  };\n  await _models.Log.create(logData);\n  _logger.default.info(`Payment failed for user ${req.user.email}`);\n};\nexports.logPaymentFail = logPaymentFail;\nconst logPaymentError = async (req, error) => {\n  const logData = {\n    level: 'error',\n    message: `Error processing payment for user ${req.user.email}: ${error.message}`,\n    userId: req.user.id,\n    metadata: {\n      error\n    }\n  };\n  await _models.Log.create(logData);\n  _logger.default.error(`Error processing payment for user ${req.user.email}: ${error.message}`);\n};\nexports.logPaymentError = logPaymentError;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfbG9nZ2VyIiwiX2ludGVyb3BSZXF1aXJlRGVmYXVsdCIsInJlcXVpcmUiLCJfbW9kZWxzIiwibG9nUGF5bWVudFN1Y2Nlc3MiLCJ1c2VyIiwicHJvZHVjdHMiLCJsb2dEYXRhIiwibGV2ZWwiLCJtZXNzYWdlIiwiZW1haWwiLCJ1c2VySWQiLCJpZCIsIm1ldGFkYXRhIiwiTG9nIiwiY3JlYXRlIiwibG9nZ2VyIiwiaW5mbyIsImV4cG9ydHMiLCJsb2dQYXltZW50RmFpbCIsInJlcSIsInJlZGlyZWN0IiwibG9nUGF5bWVudEVycm9yIiwiZXJyb3IiXSwic291cmNlUm9vdCI6Ii9Vc2Vycy9hbmRlbGFyd2FuZGEvRGVza3RvcC9lLWNvbW0tdGVhbS1icm9ncmFtbWVycy1ibi9zcmMvbG9nZ2Vycy8iLCJzb3VyY2VzIjpbInBheW1lbnQubG9nZ2VyLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qIGVzbGludC1kaXNhYmxlIGltcG9ydC9uYW1lZCAqL1xuXG5pbXBvcnQgbG9nZ2VyIGZyb20gJy4uL2NvbmZpZ3MvbG9nZ2VyJztcbmltcG9ydCB7IExvZyB9IGZyb20gJy4uL2RhdGFiYXNlL21vZGVscyc7XG5cbmV4cG9ydCBjb25zdCBsb2dQYXltZW50U3VjY2VzcyA9IGFzeW5jICh1c2VyLCBwcm9kdWN0cykgPT4ge1xuICBjb25zdCBsb2dEYXRhID0ge1xuICAgIGxldmVsOiAnaW5mbycsXG4gICAgbWVzc2FnZTogYFVzZXIgJHt1c2VyLmVtYWlsfSBjb21wbGV0ZWQgYSBwYXltZW50YCxcbiAgICB1c2VySWQ6IHVzZXIuaWQsXG4gICAgbWV0YWRhdGE6IHsgcHJvZHVjdHMgfSxcbiAgfTtcbiAgYXdhaXQgTG9nLmNyZWF0ZShsb2dEYXRhKTtcbiAgbG9nZ2VyLmluZm8oYFVzZXIgJHt1c2VyLmVtYWlsfSBjb21wbGV0ZWQgYSBwYXltZW50YCk7XG59O1xuXG5leHBvcnQgY29uc3QgbG9nUGF5bWVudEZhaWwgPSBhc3luYyAocmVxKSA9PiB7XG4gIGNvbnN0IGxvZ0RhdGEgPSB7XG4gICAgbGV2ZWw6ICdpbmZvJyxcbiAgICBtZXNzYWdlOiBgUGF5bWVudCBmYWlsZWQgZm9yIHVzZXIgJHtyZXEudXNlci5lbWFpbH1gLFxuICAgIHVzZXJJZDogcmVxLnVzZXIuaWQsXG4gICAgbWV0YWRhdGE6IHsgcmVkaXJlY3Q6IHsgfSB9LFxuICB9O1xuICBhd2FpdCBMb2cuY3JlYXRlKGxvZ0RhdGEpO1xuICBsb2dnZXIuaW5mbyhgUGF5bWVudCBmYWlsZWQgZm9yIHVzZXIgJHtyZXEudXNlci5lbWFpbH1gKTtcbn07XG5cbmV4cG9ydCBjb25zdCBsb2dQYXltZW50RXJyb3IgPSBhc3luYyAocmVxLCBlcnJvcikgPT4ge1xuICBjb25zdCBsb2dEYXRhID0ge1xuICAgIGxldmVsOiAnZXJyb3InLFxuICAgIG1lc3NhZ2U6IGBFcnJvciBwcm9jZXNzaW5nIHBheW1lbnQgZm9yIHVzZXIgJHtyZXEudXNlci5lbWFpbH06ICR7ZXJyb3IubWVzc2FnZX1gLFxuICAgIHVzZXJJZDogcmVxLnVzZXIuaWQsXG4gICAgbWV0YWRhdGE6IHsgZXJyb3IgfSxcbiAgfTtcbiAgYXdhaXQgTG9nLmNyZWF0ZShsb2dEYXRhKTtcbiAgbG9nZ2VyLmVycm9yKGBFcnJvciBwcm9jZXNzaW5nIHBheW1lbnQgZm9yIHVzZXIgJHtyZXEudXNlci5lbWFpbH06ICR7ZXJyb3IubWVzc2FnZX1gKTtcbn07XG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFFQSxJQUFBQSxPQUFBLEdBQUFDLHNCQUFBLENBQUFDLE9BQUE7QUFDQSxJQUFBQyxPQUFBLEdBQUFELE9BQUE7QUFIQTs7QUFLTyxNQUFNRSxpQkFBaUIsR0FBRyxNQUFBQSxDQUFPQyxJQUFJLEVBQUVDLFFBQVEsS0FBSztFQUN6RCxNQUFNQyxPQUFPLEdBQUc7SUFDZEMsS0FBSyxFQUFFLE1BQU07SUFDYkMsT0FBTyxFQUFHLFFBQU9KLElBQUksQ0FBQ0ssS0FBTSxzQkFBcUI7SUFDakRDLE1BQU0sRUFBRU4sSUFBSSxDQUFDTyxFQUFFO0lBQ2ZDLFFBQVEsRUFBRTtNQUFFUDtJQUFTO0VBQ3ZCLENBQUM7RUFDRCxNQUFNUSxXQUFHLENBQUNDLE1BQU0sQ0FBQ1IsT0FBTyxDQUFDO0VBQ3pCUyxlQUFNLENBQUNDLElBQUksQ0FBRSxRQUFPWixJQUFJLENBQUNLLEtBQU0sc0JBQXFCLENBQUM7QUFDdkQsQ0FBQztBQUFDUSxPQUFBLENBQUFkLGlCQUFBLEdBQUFBLGlCQUFBO0FBRUssTUFBTWUsY0FBYyxHQUFHLE1BQU9DLEdBQUcsSUFBSztFQUMzQyxNQUFNYixPQUFPLEdBQUc7SUFDZEMsS0FBSyxFQUFFLE1BQU07SUFDYkMsT0FBTyxFQUFHLDJCQUEwQlcsR0FBRyxDQUFDZixJQUFJLENBQUNLLEtBQU0sRUFBQztJQUNwREMsTUFBTSxFQUFFUyxHQUFHLENBQUNmLElBQUksQ0FBQ08sRUFBRTtJQUNuQkMsUUFBUSxFQUFFO01BQUVRLFFBQVEsRUFBRSxDQUFFO0lBQUU7RUFDNUIsQ0FBQztFQUNELE1BQU1QLFdBQUcsQ0FBQ0MsTUFBTSxDQUFDUixPQUFPLENBQUM7RUFDekJTLGVBQU0sQ0FBQ0MsSUFBSSxDQUFFLDJCQUEwQkcsR0FBRyxDQUFDZixJQUFJLENBQUNLLEtBQU0sRUFBQyxDQUFDO0FBQzFELENBQUM7QUFBQ1EsT0FBQSxDQUFBQyxjQUFBLEdBQUFBLGNBQUE7QUFFSyxNQUFNRyxlQUFlLEdBQUcsTUFBQUEsQ0FBT0YsR0FBRyxFQUFFRyxLQUFLLEtBQUs7RUFDbkQsTUFBTWhCLE9BQU8sR0FBRztJQUNkQyxLQUFLLEVBQUUsT0FBTztJQUNkQyxPQUFPLEVBQUcscUNBQW9DVyxHQUFHLENBQUNmLElBQUksQ0FBQ0ssS0FBTSxLQUFJYSxLQUFLLENBQUNkLE9BQVEsRUFBQztJQUNoRkUsTUFBTSxFQUFFUyxHQUFHLENBQUNmLElBQUksQ0FBQ08sRUFBRTtJQUNuQkMsUUFBUSxFQUFFO01BQUVVO0lBQU07RUFDcEIsQ0FBQztFQUNELE1BQU1ULFdBQUcsQ0FBQ0MsTUFBTSxDQUFDUixPQUFPLENBQUM7RUFDekJTLGVBQU0sQ0FBQ08sS0FBSyxDQUFFLHFDQUFvQ0gsR0FBRyxDQUFDZixJQUFJLENBQUNLLEtBQU0sS0FBSWEsS0FBSyxDQUFDZCxPQUFRLEVBQUMsQ0FBQztBQUN2RixDQUFDO0FBQUNTLE9BQUEsQ0FBQUksZUFBQSxHQUFBQSxlQUFBIn0=","map":{"version":3,"names":["_logger","_interopRequireDefault","require","_models","logPaymentSuccess","user","products","logData","level","message","email","userId","id","metadata","Log","create","logger","info","exports","logPaymentFail","req","redirect","logPaymentError","error"],"sourceRoot":"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/loggers/","sources":["payment.logger.js"],"sourcesContent":["/* eslint-disable import/named */\n\nimport logger from '../configs/logger';\nimport { Log } from '../database/models';\n\nexport const logPaymentSuccess = async (user, products) => {\n  const logData = {\n    level: 'info',\n    message: `User ${user.email} completed a payment`,\n    userId: user.id,\n    metadata: { products },\n  };\n  await Log.create(logData);\n  logger.info(`User ${user.email} completed a payment`);\n};\n\nexport const logPaymentFail = async (req) => {\n  const logData = {\n    level: 'info',\n    message: `Payment failed for user ${req.user.email}`,\n    userId: req.user.id,\n    metadata: { redirect: { } },\n  };\n  await Log.create(logData);\n  logger.info(`Payment failed for user ${req.user.email}`);\n};\n\nexport const logPaymentError = async (req, error) => {\n  const logData = {\n    level: 'error',\n    message: `Error processing payment for user ${req.user.email}: ${error.message}`,\n    userId: req.user.id,\n    metadata: { error },\n  };\n  await Log.create(logData);\n  logger.error(`Error processing payment for user ${req.user.email}: ${error.message}`);\n};\n"],"mappings":";;;;;;;AAEA,IAAAA,OAAA,GAAAC,sBAAA,CAAAC,OAAA;AACA,IAAAC,OAAA,GAAAD,OAAA;AAHA;;AAKO,MAAME,iBAAiB,GAAG,MAAAA,CAAOC,IAAI,EAAEC,QAAQ,KAAK;EACzD,MAAMC,OAAO,GAAG;IACdC,KAAK,EAAE,MAAM;IACbC,OAAO,EAAG,QAAOJ,IAAI,CAACK,KAAM,sBAAqB;IACjDC,MAAM,EAAEN,IAAI,CAACO,EAAE;IACfC,QAAQ,EAAE;MAAEP;IAAS;EACvB,CAAC;EACD,MAAMQ,WAAG,CAACC,MAAM,CAACR,OAAO,CAAC;EACzBS,eAAM,CAACC,IAAI,CAAE,QAAOZ,IAAI,CAACK,KAAM,sBAAqB,CAAC;AACvD,CAAC;AAACQ,OAAA,CAAAd,iBAAA,GAAAA,iBAAA;AAEK,MAAMe,cAAc,GAAG,MAAOC,GAAG,IAAK;EAC3C,MAAMb,OAAO,GAAG;IACdC,KAAK,EAAE,MAAM;IACbC,OAAO,EAAG,2BAA0BW,GAAG,CAACf,IAAI,CAACK,KAAM,EAAC;IACpDC,MAAM,EAAES,GAAG,CAACf,IAAI,CAACO,EAAE;IACnBC,QAAQ,EAAE;MAAEQ,QAAQ,EAAE,CAAE;IAAE;EAC5B,CAAC;EACD,MAAMP,WAAG,CAACC,MAAM,CAACR,OAAO,CAAC;EACzBS,eAAM,CAACC,IAAI,CAAE,2BAA0BG,GAAG,CAACf,IAAI,CAACK,KAAM,EAAC,CAAC;AAC1D,CAAC;AAACQ,OAAA,CAAAC,cAAA,GAAAA,cAAA;AAEK,MAAMG,eAAe,GAAG,MAAAA,CAAOF,GAAG,EAAEG,KAAK,KAAK;EACnD,MAAMhB,OAAO,GAAG;IACdC,KAAK,EAAE,OAAO;IACdC,OAAO,EAAG,qCAAoCW,GAAG,CAACf,IAAI,CAACK,KAAM,KAAIa,KAAK,CAACd,OAAQ,EAAC;IAChFE,MAAM,EAAES,GAAG,CAACf,IAAI,CAACO,EAAE;IACnBC,QAAQ,EAAE;MAAEU;IAAM;EACpB,CAAC;EACD,MAAMT,WAAG,CAACC,MAAM,CAACR,OAAO,CAAC;EACzBS,eAAM,CAACO,KAAK,CAAE,qCAAoCH,GAAG,CAACf,IAAI,CAACK,KAAM,KAAIa,KAAK,CAACd,OAAQ,EAAC,CAAC;AACvF,CAAC;AAACS,OAAA,CAAAI,eAAA,GAAAA,eAAA"}},"mtime":1682148437942},"{\"assumptions\":{},\"sourceRoot\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/routes/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"filename\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/routes/order.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/node_modules/babel-plugin-add-module-exports/lib/index.js\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-runtime\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"regenerator\":true},\"externalDependencies\":[]},{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.21.0:development":{"value":{"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _express = _interopRequireDefault(require(\"express\"));\nvar _verifyToken = _interopRequireDefault(require(\"../middlewares/verifyToken\"));\nvar _Checkrole = _interopRequireDefault(require(\"../middlewares/Checkrole\"));\nvar _order = require(\"../controllers/order.controller\");\nvar _models = require(\"../database/models\");\n// eslint-disable-next-line import/no-named-as-default, import/no-named-as-default-member\n\n// eslint-disable-next-line import/named\n\nconst router = _express.default.Router();\nconst ckeckOrderExist = async (req, res, next) => {\n  try {\n    const {\n      orderId\n    } = req.params;\n    const orderData = await _models.order.findByPk(orderId, {});\n    if (!orderData) {\n      return res.status(401).json({\n        message: 'This order does not exist'\n      });\n    }\n    next();\n  } catch (error) {\n    return res.status(500).json({\n      message: 'UNknown error',\n      error: error.message\n    });\n  }\n};\n\n// eslint-disable-next-line no-use-before-define\nrouter.get('/status', _verifyToken.default, _order.getOrderStatus);\nrouter.get('/', _order.getOrderStatuses);\nrouter.get('/sse', _order.getOrderStatusEvents);\n// eslint-disable-next-line no-use-before-define\nrouter.patch('/:orderId', _verifyToken.default, (0, _Checkrole.default)(['admin']), ckeckOrderExist, _order.updateOrderStatus);\nvar _default = router;\nexports.default = _default;\nmodule.exports = exports.default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfZXhwcmVzcyIsIl9pbnRlcm9wUmVxdWlyZURlZmF1bHQiLCJyZXF1aXJlIiwiX3ZlcmlmeVRva2VuIiwiX0NoZWNrcm9sZSIsIl9vcmRlciIsIl9tb2RlbHMiLCJyb3V0ZXIiLCJleHByZXNzIiwiUm91dGVyIiwiY2tlY2tPcmRlckV4aXN0IiwicmVxIiwicmVzIiwibmV4dCIsIm9yZGVySWQiLCJwYXJhbXMiLCJvcmRlckRhdGEiLCJvcmRlciIsImZpbmRCeVBrIiwic3RhdHVzIiwianNvbiIsIm1lc3NhZ2UiLCJlcnJvciIsImdldCIsImlzQXV0aGVudGljYXRlZCIsImdldE9yZGVyU3RhdHVzIiwiZ2V0T3JkZXJTdGF0dXNlcyIsImdldE9yZGVyU3RhdHVzRXZlbnRzIiwicGF0Y2giLCJjaGVja1JvbGUiLCJ1cGRhdGVPcmRlclN0YXR1cyIsIl9kZWZhdWx0IiwiZXhwb3J0cyIsImRlZmF1bHQiLCJtb2R1bGUiXSwic291cmNlUm9vdCI6Ii9Vc2Vycy9hbmRlbGFyd2FuZGEvRGVza3RvcC9lLWNvbW0tdGVhbS1icm9ncmFtbWVycy1ibi9zcmMvcm91dGVzLyIsInNvdXJjZXMiOlsib3JkZXIuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGV4cHJlc3MgZnJvbSAnZXhwcmVzcyc7XG5pbXBvcnQgaXNBdXRoZW50aWNhdGVkIGZyb20gJy4uL21pZGRsZXdhcmVzL3ZlcmlmeVRva2VuJztcbmltcG9ydCBjaGVja1JvbGUgZnJvbSAnLi4vbWlkZGxld2FyZXMvQ2hlY2tyb2xlJztcblxuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGltcG9ydC9uby1uYW1lZC1hcy1kZWZhdWx0LCBpbXBvcnQvbm8tbmFtZWQtYXMtZGVmYXVsdC1tZW1iZXJcbmltcG9ydCB7XG4gIGdldE9yZGVyU3RhdHVzLFxuICB1cGRhdGVPcmRlclN0YXR1cyxcbiAgZ2V0T3JkZXJTdGF0dXNlcyxcbiAgZ2V0T3JkZXJTdGF0dXNFdmVudHMsXG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBpbXBvcnQvbm8tdW5yZXNvbHZlZFxufSBmcm9tICcuLi9jb250cm9sbGVycy9vcmRlci5jb250cm9sbGVyJztcbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBpbXBvcnQvbmFtZWRcbmltcG9ydCB7IG9yZGVyIH0gZnJvbSAnLi4vZGF0YWJhc2UvbW9kZWxzJztcblxuY29uc3Qgcm91dGVyID0gZXhwcmVzcy5Sb3V0ZXIoKTtcblxuY29uc3QgY2tlY2tPcmRlckV4aXN0ID0gYXN5bmMgKHJlcSwgcmVzLCBuZXh0KSA9PiB7XG4gIHRyeSB7XG4gICAgY29uc3QgeyBvcmRlcklkIH0gPSByZXEucGFyYW1zO1xuICAgIGNvbnN0IG9yZGVyRGF0YSA9IGF3YWl0IG9yZGVyLmZpbmRCeVBrKG9yZGVySWQsIHt9KTtcbiAgICBpZiAoIW9yZGVyRGF0YSkge1xuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAxKS5qc29uKHsgbWVzc2FnZTogJ1RoaXMgb3JkZXIgZG9lcyBub3QgZXhpc3QnIH0pO1xuICAgIH1cblxuICAgIG5leHQoKTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICByZXR1cm4gcmVzLnN0YXR1cyg1MDApLmpzb24oe1xuICAgICAgbWVzc2FnZTogJ1VOa25vd24gZXJyb3InLFxuICAgICAgZXJyb3I6IGVycm9yLm1lc3NhZ2UsXG4gICAgfSk7XG4gIH1cbn07XG5cbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby11c2UtYmVmb3JlLWRlZmluZVxucm91dGVyLmdldCgnL3N0YXR1cycsIGlzQXV0aGVudGljYXRlZCwgZ2V0T3JkZXJTdGF0dXMpO1xucm91dGVyLmdldCgnLycsIGdldE9yZGVyU3RhdHVzZXMpO1xucm91dGVyLmdldCgnL3NzZScsIGdldE9yZGVyU3RhdHVzRXZlbnRzKTtcbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby11c2UtYmVmb3JlLWRlZmluZVxucm91dGVyLnBhdGNoKFxuICAnLzpvcmRlcklkJyxcbiAgaXNBdXRoZW50aWNhdGVkLFxuICBjaGVja1JvbGUoWydhZG1pbiddKSxcbiAgY2tlY2tPcmRlckV4aXN0LFxuICB1cGRhdGVPcmRlclN0YXR1c1xuKTtcblxuZXhwb3J0IGRlZmF1bHQgcm91dGVyO1xuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQUEsSUFBQUEsUUFBQSxHQUFBQyxzQkFBQSxDQUFBQyxPQUFBO0FBQ0EsSUFBQUMsWUFBQSxHQUFBRixzQkFBQSxDQUFBQyxPQUFBO0FBQ0EsSUFBQUUsVUFBQSxHQUFBSCxzQkFBQSxDQUFBQyxPQUFBO0FBR0EsSUFBQUcsTUFBQSxHQUFBSCxPQUFBO0FBUUEsSUFBQUksT0FBQSxHQUFBSixPQUFBO0FBVEE7O0FBUUE7O0FBR0EsTUFBTUssTUFBTSxHQUFHQyxnQkFBTyxDQUFDQyxNQUFNLEVBQUU7QUFFL0IsTUFBTUMsZUFBZSxHQUFHLE1BQUFBLENBQU9DLEdBQUcsRUFBRUMsR0FBRyxFQUFFQyxJQUFJLEtBQUs7RUFDaEQsSUFBSTtJQUNGLE1BQU07TUFBRUM7SUFBUSxDQUFDLEdBQUdILEdBQUcsQ0FBQ0ksTUFBTTtJQUM5QixNQUFNQyxTQUFTLEdBQUcsTUFBTUMsYUFBSyxDQUFDQyxRQUFRLENBQUNKLE9BQU8sRUFBRSxDQUFDLENBQUMsQ0FBQztJQUNuRCxJQUFJLENBQUNFLFNBQVMsRUFBRTtNQUNkLE9BQU9KLEdBQUcsQ0FBQ08sTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDQyxJQUFJLENBQUM7UUFBRUMsT0FBTyxFQUFFO01BQTRCLENBQUMsQ0FBQztJQUN2RTtJQUVBUixJQUFJLEVBQUU7RUFDUixDQUFDLENBQUMsT0FBT1MsS0FBSyxFQUFFO0lBQ2QsT0FBT1YsR0FBRyxDQUFDTyxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUNDLElBQUksQ0FBQztNQUMxQkMsT0FBTyxFQUFFLGVBQWU7TUFDeEJDLEtBQUssRUFBRUEsS0FBSyxDQUFDRDtJQUNmLENBQUMsQ0FBQztFQUNKO0FBQ0YsQ0FBQzs7QUFFRDtBQUNBZCxNQUFNLENBQUNnQixHQUFHLENBQUMsU0FBUyxFQUFFQyxvQkFBZSxFQUFFQyxxQkFBYyxDQUFDO0FBQ3REbEIsTUFBTSxDQUFDZ0IsR0FBRyxDQUFDLEdBQUcsRUFBRUcsdUJBQWdCLENBQUM7QUFDakNuQixNQUFNLENBQUNnQixHQUFHLENBQUMsTUFBTSxFQUFFSSwyQkFBb0IsQ0FBQztBQUN4QztBQUNBcEIsTUFBTSxDQUFDcUIsS0FBSyxDQUNWLFdBQVcsRUFDWEosb0JBQWUsRUFDZixJQUFBSyxrQkFBUyxFQUFDLENBQUMsT0FBTyxDQUFDLENBQUMsRUFDcEJuQixlQUFlLEVBQ2ZvQix3QkFBaUIsQ0FDbEI7QUFBQyxJQUFBQyxRQUFBLEdBRWF4QixNQUFNO0FBQUF5QixPQUFBLENBQUFDLE9BQUEsR0FBQUYsUUFBQTtBQUFBRyxNQUFBLENBQUFGLE9BQUEsR0FBQUEsT0FBQSxDQUFBQyxPQUFBIn0=","map":{"version":3,"names":["_express","_interopRequireDefault","require","_verifyToken","_Checkrole","_order","_models","router","express","Router","ckeckOrderExist","req","res","next","orderId","params","orderData","order","findByPk","status","json","message","error","get","isAuthenticated","getOrderStatus","getOrderStatuses","getOrderStatusEvents","patch","checkRole","updateOrderStatus","_default","exports","default","module"],"sourceRoot":"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/routes/","sources":["order.js"],"sourcesContent":["import express from 'express';\nimport isAuthenticated from '../middlewares/verifyToken';\nimport checkRole from '../middlewares/Checkrole';\n\n// eslint-disable-next-line import/no-named-as-default, import/no-named-as-default-member\nimport {\n  getOrderStatus,\n  updateOrderStatus,\n  getOrderStatuses,\n  getOrderStatusEvents,\n  // eslint-disable-next-line import/no-unresolved\n} from '../controllers/order.controller';\n// eslint-disable-next-line import/named\nimport { order } from '../database/models';\n\nconst router = express.Router();\n\nconst ckeckOrderExist = async (req, res, next) => {\n  try {\n    const { orderId } = req.params;\n    const orderData = await order.findByPk(orderId, {});\n    if (!orderData) {\n      return res.status(401).json({ message: 'This order does not exist' });\n    }\n\n    next();\n  } catch (error) {\n    return res.status(500).json({\n      message: 'UNknown error',\n      error: error.message,\n    });\n  }\n};\n\n// eslint-disable-next-line no-use-before-define\nrouter.get('/status', isAuthenticated, getOrderStatus);\nrouter.get('/', getOrderStatuses);\nrouter.get('/sse', getOrderStatusEvents);\n// eslint-disable-next-line no-use-before-define\nrouter.patch(\n  '/:orderId',\n  isAuthenticated,\n  checkRole(['admin']),\n  ckeckOrderExist,\n  updateOrderStatus\n);\n\nexport default router;\n"],"mappings":";;;;;;;AAAA,IAAAA,QAAA,GAAAC,sBAAA,CAAAC,OAAA;AACA,IAAAC,YAAA,GAAAF,sBAAA,CAAAC,OAAA;AACA,IAAAE,UAAA,GAAAH,sBAAA,CAAAC,OAAA;AAGA,IAAAG,MAAA,GAAAH,OAAA;AAQA,IAAAI,OAAA,GAAAJ,OAAA;AATA;;AAQA;;AAGA,MAAMK,MAAM,GAAGC,gBAAO,CAACC,MAAM,EAAE;AAE/B,MAAMC,eAAe,GAAG,MAAAA,CAAOC,GAAG,EAAEC,GAAG,EAAEC,IAAI,KAAK;EAChD,IAAI;IACF,MAAM;MAAEC;IAAQ,CAAC,GAAGH,GAAG,CAACI,MAAM;IAC9B,MAAMC,SAAS,GAAG,MAAMC,aAAK,CAACC,QAAQ,CAACJ,OAAO,EAAE,CAAC,CAAC,CAAC;IACnD,IAAI,CAACE,SAAS,EAAE;MACd,OAAOJ,GAAG,CAACO,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;QAAEC,OAAO,EAAE;MAA4B,CAAC,CAAC;IACvE;IAEAR,IAAI,EAAE;EACR,CAAC,CAAC,OAAOS,KAAK,EAAE;IACd,OAAOV,GAAG,CAACO,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;MAC1BC,OAAO,EAAE,eAAe;MACxBC,KAAK,EAAEA,KAAK,CAACD;IACf,CAAC,CAAC;EACJ;AACF,CAAC;;AAED;AACAd,MAAM,CAACgB,GAAG,CAAC,SAAS,EAAEC,oBAAe,EAAEC,qBAAc,CAAC;AACtDlB,MAAM,CAACgB,GAAG,CAAC,GAAG,EAAEG,uBAAgB,CAAC;AACjCnB,MAAM,CAACgB,GAAG,CAAC,MAAM,EAAEI,2BAAoB,CAAC;AACxC;AACApB,MAAM,CAACqB,KAAK,CACV,WAAW,EACXJ,oBAAe,EACf,IAAAK,kBAAS,EAAC,CAAC,OAAO,CAAC,CAAC,EACpBnB,eAAe,EACfoB,wBAAiB,CAClB;AAAC,IAAAC,QAAA,GAEaxB,MAAM;AAAAyB,OAAA,CAAAC,OAAA,GAAAF,QAAA;AAAAG,MAAA,CAAAF,OAAA,GAAAA,OAAA,CAAAC,OAAA"}},"mtime":1682148437958},"{\"assumptions\":{},\"sourceRoot\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/controllers/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"filename\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/controllers/order.controller.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/node_modules/babel-plugin-add-module-exports/lib/index.js\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-runtime\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"regenerator\":true},\"externalDependencies\":[]},{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.21.0:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.updateOrderStatus = exports.getOrderStatuses = exports.getOrderStatusEvents = exports.getOrderStatus = void 0;\nvar _models = require(\"../database/models\");\n// orderController.js\n// eslint-disable-next-line import/no-unresolved, import/named\n\nconst getOrderStatuses = async (req, res) => {\n  try {\n    const orders = await _models.order.findAll({\n      include: [{\n        model: _models.users,\n        attributes: ['id', 'username', 'role'],\n        as: 'buyer'\n      }]\n    });\n    return res.status(200).json({\n      message: 'Fetch success',\n      data: orders\n    });\n  } catch (error) {\n    return res.status(500).json({\n      message: 'error!!!!',\n      error: error.message\n    });\n  }\n};\nexports.getOrderStatuses = getOrderStatuses;\nconst getOrderStatusEvents = async (req, res) => {\n  res.statusCode = 200;\n  res.setHeader('Access-Control-Allow-Origin', '*');\n  res.setHeader('Cache-Control', 'no-cache');\n  res.setHeader('connection', 'keep-alive');\n  res.setHeader('Content-Type', 'text/event-stream');\n  res.write('event: ping\\n');\n\n  // Set up interval to send update events to the client\n  const intervalId = setInterval(async () => {\n    const orders = await _models.order.findAll({\n      where: {\n        statusUpdated: true\n      },\n      include: [{\n        model: _models.users,\n        attributes: ['id', 'username', 'role'],\n        as: 'buyer'\n      }]\n    });\n    if (!orders.length > 0) {\n      return;\n    }\n    const data = {\n      orders\n    };\n    res.write('event: update\\n');\n    res.write(`data: ${JSON.stringify(data)}\\n\\n`);\n    await orders.forEach(async item => {\n      item.statusUpdated = false;\n      await item.save();\n    });\n  }, 3000);\n\n  // Handle client disconnect by clearing interval\n  req.on('close', () => {\n    clearInterval(intervalId);\n    res.end();\n  });\n};\nexports.getOrderStatusEvents = getOrderStatusEvents;\nconst getOrderStatus = async (req, res) => {\n  try {\n    const user = await _models.users.findOne({\n      where: {\n        email: req.user.email\n      },\n      include: {\n        model: _models.order,\n        as: 'orders',\n        include: {\n          model: _models.products,\n          as: 'products',\n          attributes: ['id', 'images', 'name', 'available', 'price']\n        }\n      }\n    });\n    return res.status(200).json({\n      message: `Fetched all orders of the user ${user.username}`,\n      // eslint-disable-next-line no-undef\n      data: {\n        orders: user.orders\n      }\n    });\n  } catch (err) {\n    return res.status(500).json({\n      message: 'We have an error',\n      error: err.message\n    });\n  }\n};\nexports.getOrderStatus = getOrderStatus;\nconst updateOrderStatus = async (req, res) => {\n  try {\n    // eslint-disable-next-line prefer-destructuring\n    const {\n      orderId\n    } = req.params;\n    const newOrder = await _models.order.findOne({\n      where: {\n        id: orderId\n      }\n    });\n    newOrder.status = req.body.status;\n    newOrder.statusUpdated = true;\n    await newOrder.save();\n    return res.status(200).json({\n      message: 'Updated success',\n      data: newOrder\n    });\n  } catch (error) {\n    return res.status(500).json({\n      message: 'We have an error',\n      error: error.message\n    });\n  }\n};\nexports.updateOrderStatus = updateOrderStatus;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfbW9kZWxzIiwicmVxdWlyZSIsImdldE9yZGVyU3RhdHVzZXMiLCJyZXEiLCJyZXMiLCJvcmRlcnMiLCJvcmRlciIsImZpbmRBbGwiLCJpbmNsdWRlIiwibW9kZWwiLCJ1c2VycyIsImF0dHJpYnV0ZXMiLCJhcyIsInN0YXR1cyIsImpzb24iLCJtZXNzYWdlIiwiZGF0YSIsImVycm9yIiwiZXhwb3J0cyIsImdldE9yZGVyU3RhdHVzRXZlbnRzIiwic3RhdHVzQ29kZSIsInNldEhlYWRlciIsIndyaXRlIiwiaW50ZXJ2YWxJZCIsInNldEludGVydmFsIiwid2hlcmUiLCJzdGF0dXNVcGRhdGVkIiwibGVuZ3RoIiwiSlNPTiIsInN0cmluZ2lmeSIsImZvckVhY2giLCJpdGVtIiwic2F2ZSIsIm9uIiwiY2xlYXJJbnRlcnZhbCIsImVuZCIsImdldE9yZGVyU3RhdHVzIiwidXNlciIsImZpbmRPbmUiLCJlbWFpbCIsInByb2R1Y3RzIiwidXNlcm5hbWUiLCJlcnIiLCJ1cGRhdGVPcmRlclN0YXR1cyIsIm9yZGVySWQiLCJwYXJhbXMiLCJuZXdPcmRlciIsImlkIiwiYm9keSJdLCJzb3VyY2VSb290IjoiL1VzZXJzL2FuZGVsYXJ3YW5kYS9EZXNrdG9wL2UtY29tbS10ZWFtLWJyb2dyYW1tZXJzLWJuL3NyYy9jb250cm9sbGVycy8iLCJzb3VyY2VzIjpbIm9yZGVyLmNvbnRyb2xsZXIuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gb3JkZXJDb250cm9sbGVyLmpzXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgaW1wb3J0L25vLXVucmVzb2x2ZWQsIGltcG9ydC9uYW1lZFxuaW1wb3J0IHsgb3JkZXIsIHVzZXJzLCBwcm9kdWN0cyB9IGZyb20gJy4uL2RhdGFiYXNlL21vZGVscyc7XG5cbmNvbnN0IGdldE9yZGVyU3RhdHVzZXMgPSBhc3luYyAocmVxLCByZXMpID0+IHtcbiAgdHJ5IHtcbiAgICBjb25zdCBvcmRlcnMgPSBhd2FpdCBvcmRlci5maW5kQWxsKHtcbiAgICAgIGluY2x1ZGU6IFtcbiAgICAgICAge1xuICAgICAgICAgIG1vZGVsOiB1c2VycyxcbiAgICAgICAgICBhdHRyaWJ1dGVzOiBbJ2lkJywgJ3VzZXJuYW1lJywgJ3JvbGUnXSxcbiAgICAgICAgICBhczogJ2J1eWVyJyxcbiAgICAgICAgfSxcbiAgICAgIF0sXG4gICAgfSk7XG5cbiAgICByZXR1cm4gcmVzLnN0YXR1cygyMDApLmpzb24oe1xuICAgICAgbWVzc2FnZTogJ0ZldGNoIHN1Y2Nlc3MnLFxuICAgICAgZGF0YTogb3JkZXJzLFxuICAgIH0pO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIHJldHVybiByZXMuc3RhdHVzKDUwMCkuanNvbih7XG4gICAgICBtZXNzYWdlOiAnZXJyb3IhISEhJyxcbiAgICAgIGVycm9yOiBlcnJvci5tZXNzYWdlLFxuICAgIH0pO1xuICB9XG59O1xuXG5jb25zdCBnZXRPcmRlclN0YXR1c0V2ZW50cyA9IGFzeW5jIChyZXEsIHJlcykgPT4ge1xuICByZXMuc3RhdHVzQ29kZSA9IDIwMDtcbiAgcmVzLnNldEhlYWRlcignQWNjZXNzLUNvbnRyb2wtQWxsb3ctT3JpZ2luJywgJyonKTtcbiAgcmVzLnNldEhlYWRlcignQ2FjaGUtQ29udHJvbCcsICduby1jYWNoZScpO1xuICByZXMuc2V0SGVhZGVyKCdjb25uZWN0aW9uJywgJ2tlZXAtYWxpdmUnKTtcbiAgcmVzLnNldEhlYWRlcignQ29udGVudC1UeXBlJywgJ3RleHQvZXZlbnQtc3RyZWFtJyk7XG5cbiAgcmVzLndyaXRlKCdldmVudDogcGluZ1xcbicpO1xuXG4gIC8vIFNldCB1cCBpbnRlcnZhbCB0byBzZW5kIHVwZGF0ZSBldmVudHMgdG8gdGhlIGNsaWVudFxuICBjb25zdCBpbnRlcnZhbElkID0gc2V0SW50ZXJ2YWwoYXN5bmMgKCkgPT4ge1xuICAgIGNvbnN0IG9yZGVycyA9IGF3YWl0IG9yZGVyLmZpbmRBbGwoe1xuICAgICAgd2hlcmU6IHtcbiAgICAgICAgc3RhdHVzVXBkYXRlZDogdHJ1ZSxcbiAgICAgIH0sXG4gICAgICBpbmNsdWRlOiBbXG4gICAgICAgIHtcbiAgICAgICAgICBtb2RlbDogdXNlcnMsXG4gICAgICAgICAgYXR0cmlidXRlczogWydpZCcsICd1c2VybmFtZScsICdyb2xlJ10sXG4gICAgICAgICAgYXM6ICdidXllcicsXG4gICAgICAgIH0sXG4gICAgICBdLFxuICAgIH0pO1xuICAgIGlmICghb3JkZXJzLmxlbmd0aCA+IDApIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3QgZGF0YSA9IHsgb3JkZXJzIH07XG4gICAgcmVzLndyaXRlKCdldmVudDogdXBkYXRlXFxuJyk7XG4gICAgcmVzLndyaXRlKGBkYXRhOiAke0pTT04uc3RyaW5naWZ5KGRhdGEpfVxcblxcbmApO1xuICAgIGF3YWl0IG9yZGVycy5mb3JFYWNoKGFzeW5jIChpdGVtKSA9PiB7XG4gICAgICBpdGVtLnN0YXR1c1VwZGF0ZWQgPSBmYWxzZTtcbiAgICAgIGF3YWl0IGl0ZW0uc2F2ZSgpO1xuICAgIH0pO1xuICB9LCAzMDAwKTtcblxuICAvLyBIYW5kbGUgY2xpZW50IGRpc2Nvbm5lY3QgYnkgY2xlYXJpbmcgaW50ZXJ2YWxcbiAgcmVxLm9uKCdjbG9zZScsICgpID0+IHtcbiAgICBjbGVhckludGVydmFsKGludGVydmFsSWQpO1xuICAgIHJlcy5lbmQoKTtcbiAgfSk7XG59O1xuXG5jb25zdCBnZXRPcmRlclN0YXR1cyA9IGFzeW5jIChyZXEsIHJlcykgPT4ge1xuICB0cnkge1xuICAgIGNvbnN0IHVzZXIgPSBhd2FpdCB1c2Vycy5maW5kT25lKHtcbiAgICAgIHdoZXJlOiB7IGVtYWlsOiByZXEudXNlci5lbWFpbCB9LFxuICAgICAgaW5jbHVkZToge1xuICAgICAgICBtb2RlbDogb3JkZXIsXG4gICAgICAgIGFzOiAnb3JkZXJzJyxcbiAgICAgICAgaW5jbHVkZToge1xuICAgICAgICAgIG1vZGVsOiBwcm9kdWN0cyxcbiAgICAgICAgICBhczogJ3Byb2R1Y3RzJyxcbiAgICAgICAgICBhdHRyaWJ1dGVzOiBbJ2lkJywgJ2ltYWdlcycsICduYW1lJywgJ2F2YWlsYWJsZScsICdwcmljZSddLFxuICAgICAgICB9LFxuICAgICAgfSxcbiAgICB9KTtcbiAgICByZXR1cm4gcmVzLnN0YXR1cygyMDApLmpzb24oe1xuICAgICAgbWVzc2FnZTogYEZldGNoZWQgYWxsIG9yZGVycyBvZiB0aGUgdXNlciAke3VzZXIudXNlcm5hbWV9YCxcbiAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby11bmRlZlxuICAgICAgZGF0YTogeyBvcmRlcnM6IHVzZXIub3JkZXJzIH0sXG4gICAgfSk7XG4gIH0gY2F0Y2ggKGVycikge1xuICAgIHJldHVybiByZXMuc3RhdHVzKDUwMCkuanNvbih7XG4gICAgICBtZXNzYWdlOiAnV2UgaGF2ZSBhbiBlcnJvcicsXG4gICAgICBlcnJvcjogZXJyLm1lc3NhZ2UsXG4gICAgfSk7XG4gIH1cbn07XG5cbmNvbnN0IHVwZGF0ZU9yZGVyU3RhdHVzID0gYXN5bmMgKHJlcSwgcmVzKSA9PiB7XG4gIHRyeSB7XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIHByZWZlci1kZXN0cnVjdHVyaW5nXG4gICAgY29uc3QgeyBvcmRlcklkIH0gPSByZXEucGFyYW1zO1xuICAgIGNvbnN0IG5ld09yZGVyID0gYXdhaXQgb3JkZXIuZmluZE9uZSh7XG4gICAgICB3aGVyZToge1xuICAgICAgICBpZDogb3JkZXJJZCxcbiAgICAgIH0sXG4gICAgfSk7XG4gICAgbmV3T3JkZXIuc3RhdHVzID0gcmVxLmJvZHkuc3RhdHVzO1xuICAgIG5ld09yZGVyLnN0YXR1c1VwZGF0ZWQgPSB0cnVlO1xuICAgIGF3YWl0IG5ld09yZGVyLnNhdmUoKTtcblxuICAgIHJldHVybiByZXMuc3RhdHVzKDIwMCkuanNvbih7XG4gICAgICBtZXNzYWdlOiAnVXBkYXRlZCBzdWNjZXNzJyxcbiAgICAgIGRhdGE6IG5ld09yZGVyLFxuICAgIH0pO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIHJldHVybiByZXMuc3RhdHVzKDUwMCkuanNvbih7XG4gICAgICBtZXNzYWdlOiAnV2UgaGF2ZSBhbiBlcnJvcicsXG4gICAgICBlcnJvcjogZXJyb3IubWVzc2FnZSxcbiAgICB9KTtcbiAgfVxufTtcblxuZXhwb3J0IHtcbiAgZ2V0T3JkZXJTdGF0dXMsXG4gIHVwZGF0ZU9yZGVyU3RhdHVzLFxuICBnZXRPcmRlclN0YXR1c2VzLFxuICBnZXRPcmRlclN0YXR1c0V2ZW50cyxcbn07XG4iXSwibWFwcGluZ3MiOiI7Ozs7OztBQUVBLElBQUFBLE9BQUEsR0FBQUMsT0FBQTtBQUZBO0FBQ0E7O0FBR0EsTUFBTUMsZ0JBQWdCLEdBQUcsTUFBQUEsQ0FBT0MsR0FBRyxFQUFFQyxHQUFHLEtBQUs7RUFDM0MsSUFBSTtJQUNGLE1BQU1DLE1BQU0sR0FBRyxNQUFNQyxhQUFLLENBQUNDLE9BQU8sQ0FBQztNQUNqQ0MsT0FBTyxFQUFFLENBQ1A7UUFDRUMsS0FBSyxFQUFFQyxhQUFLO1FBQ1pDLFVBQVUsRUFBRSxDQUFDLElBQUksRUFBRSxVQUFVLEVBQUUsTUFBTSxDQUFDO1FBQ3RDQyxFQUFFLEVBQUU7TUFDTixDQUFDO0lBRUwsQ0FBQyxDQUFDO0lBRUYsT0FBT1IsR0FBRyxDQUFDUyxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUNDLElBQUksQ0FBQztNQUMxQkMsT0FBTyxFQUFFLGVBQWU7TUFDeEJDLElBQUksRUFBRVg7SUFDUixDQUFDLENBQUM7RUFDSixDQUFDLENBQUMsT0FBT1ksS0FBSyxFQUFFO0lBQ2QsT0FBT2IsR0FBRyxDQUFDUyxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUNDLElBQUksQ0FBQztNQUMxQkMsT0FBTyxFQUFFLFdBQVc7TUFDcEJFLEtBQUssRUFBRUEsS0FBSyxDQUFDRjtJQUNmLENBQUMsQ0FBQztFQUNKO0FBQ0YsQ0FBQztBQUFDRyxPQUFBLENBQUFoQixnQkFBQSxHQUFBQSxnQkFBQTtBQUVGLE1BQU1pQixvQkFBb0IsR0FBRyxNQUFBQSxDQUFPaEIsR0FBRyxF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","map":{"version":3,"names":["_models","require","getOrderStatuses","req","res","orders","order","findAll","include","model","users","attributes","as","status","json","message","data","error","exports","getOrderStatusEvents","statusCode","setHeader","write","intervalId","setInterval","where","statusUpdated","length","JSON","stringify","forEach","item","save","on","clearInterval","end","getOrderStatus","user","findOne","email","products","username","err","updateOrderStatus","orderId","params","newOrder","id","body"],"sourceRoot":"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/controllers/","sources":["order.controller.js"],"sourcesContent":["// orderController.js\n// eslint-disable-next-line import/no-unresolved, import/named\nimport { order, users, products } from '../database/models';\n\nconst getOrderStatuses = async (req, res) => {\n  try {\n    const orders = await order.findAll({\n      include: [\n        {\n          model: users,\n          attributes: ['id', 'username', 'role'],\n          as: 'buyer',\n        },\n      ],\n    });\n\n    return res.status(200).json({\n      message: 'Fetch success',\n      data: orders,\n    });\n  } catch (error) {\n    return res.status(500).json({\n      message: 'error!!!!',\n      error: error.message,\n    });\n  }\n};\n\nconst getOrderStatusEvents = async (req, res) => {\n  res.statusCode = 200;\n  res.setHeader('Access-Control-Allow-Origin', '*');\n  res.setHeader('Cache-Control', 'no-cache');\n  res.setHeader('connection', 'keep-alive');\n  res.setHeader('Content-Type', 'text/event-stream');\n\n  res.write('event: ping\\n');\n\n  // Set up interval to send update events to the client\n  const intervalId = setInterval(async () => {\n    const orders = await order.findAll({\n      where: {\n        statusUpdated: true,\n      },\n      include: [\n        {\n          model: users,\n          attributes: ['id', 'username', 'role'],\n          as: 'buyer',\n        },\n      ],\n    });\n    if (!orders.length > 0) {\n      return;\n    }\n    const data = { orders };\n    res.write('event: update\\n');\n    res.write(`data: ${JSON.stringify(data)}\\n\\n`);\n    await orders.forEach(async (item) => {\n      item.statusUpdated = false;\n      await item.save();\n    });\n  }, 3000);\n\n  // Handle client disconnect by clearing interval\n  req.on('close', () => {\n    clearInterval(intervalId);\n    res.end();\n  });\n};\n\nconst getOrderStatus = async (req, res) => {\n  try {\n    const user = await users.findOne({\n      where: { email: req.user.email },\n      include: {\n        model: order,\n        as: 'orders',\n        include: {\n          model: products,\n          as: 'products',\n          attributes: ['id', 'images', 'name', 'available', 'price'],\n        },\n      },\n    });\n    return res.status(200).json({\n      message: `Fetched all orders of the user ${user.username}`,\n      // eslint-disable-next-line no-undef\n      data: { orders: user.orders },\n    });\n  } catch (err) {\n    return res.status(500).json({\n      message: 'We have an error',\n      error: err.message,\n    });\n  }\n};\n\nconst updateOrderStatus = async (req, res) => {\n  try {\n    // eslint-disable-next-line prefer-destructuring\n    const { orderId } = req.params;\n    const newOrder = await order.findOne({\n      where: {\n        id: orderId,\n      },\n    });\n    newOrder.status = req.body.status;\n    newOrder.statusUpdated = true;\n    await newOrder.save();\n\n    return res.status(200).json({\n      message: 'Updated success',\n      data: newOrder,\n    });\n  } catch (error) {\n    return res.status(500).json({\n      message: 'We have an error',\n      error: error.message,\n    });\n  }\n};\n\nexport {\n  getOrderStatus,\n  updateOrderStatus,\n  getOrderStatuses,\n  getOrderStatusEvents,\n};\n"],"mappings":"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"}},"mtime":1682148437922},"{\"assumptions\":{},\"sourceRoot\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/routes/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"filename\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/routes/logs.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/node_modules/babel-plugin-add-module-exports/lib/index.js\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-runtime\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"regenerator\":true},\"externalDependencies\":[]},{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.21.0:development":{"value":{"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nvar _express = _interopRequireDefault(require(\"express\"));\nvar _logs = require(\"../controllers/logs.controller\");\nvar _verifyToken = _interopRequireDefault(require(\"../middlewares/verifyToken\"));\n/* eslint-disable import/no-import-module-exports */\n\nconst logsroutes = _express.default.Router();\nlogsroutes.get('/all', _verifyToken.default, _logs.getUserLogs);\nlogsroutes.get('/:id', _verifyToken.default, _logs.getLogById);\nmodule.exports = logsroutes;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfZXhwcmVzcyIsIl9pbnRlcm9wUmVxdWlyZURlZmF1bHQiLCJyZXF1aXJlIiwiX2xvZ3MiLCJfdmVyaWZ5VG9rZW4iLCJsb2dzcm91dGVzIiwiZXhwcmVzcyIsIlJvdXRlciIsImdldCIsImlzQXV0aGVudGljYXRlZCIsImdldFVzZXJMb2dzIiwiZ2V0TG9nQnlJZCIsIm1vZHVsZSIsImV4cG9ydHMiXSwic291cmNlUm9vdCI6Ii9Vc2Vycy9hbmRlbGFyd2FuZGEvRGVza3RvcC9lLWNvbW0tdGVhbS1icm9ncmFtbWVycy1ibi9zcmMvcm91dGVzLyIsInNvdXJjZXMiOlsibG9ncy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKiBlc2xpbnQtZGlzYWJsZSBpbXBvcnQvbm8taW1wb3J0LW1vZHVsZS1leHBvcnRzICovXG5pbXBvcnQgZXhwcmVzcyBmcm9tICdleHByZXNzJztcbmltcG9ydCB7IGdldExvZ0J5SWQsIGdldFVzZXJMb2dzIH0gZnJvbSAnLi4vY29udHJvbGxlcnMvbG9ncy5jb250cm9sbGVyJztcbmltcG9ydCBpc0F1dGhlbnRpY2F0ZWQgZnJvbSAnLi4vbWlkZGxld2FyZXMvdmVyaWZ5VG9rZW4nO1xuXG5jb25zdCBsb2dzcm91dGVzID0gZXhwcmVzcy5Sb3V0ZXIoKTtcblxubG9nc3JvdXRlcy5nZXQoJy9hbGwnLCBpc0F1dGhlbnRpY2F0ZWQsIGdldFVzZXJMb2dzKTtcbmxvZ3Nyb3V0ZXMuZ2V0KCcvOmlkJywgaXNBdXRoZW50aWNhdGVkLCBnZXRMb2dCeUlkKTtcblxubW9kdWxlLmV4cG9ydHMgPSBsb2dzcm91dGVzO1xuIl0sIm1hcHBpbmdzIjoiOzs7QUFDQSxJQUFBQSxRQUFBLEdBQUFDLHNCQUFBLENBQUFDLE9BQUE7QUFDQSxJQUFBQyxLQUFBLEdBQUFELE9BQUE7QUFDQSxJQUFBRSxZQUFBLEdBQUFILHNCQUFBLENBQUFDLE9BQUE7QUFIQTs7QUFLQSxNQUFNRyxVQUFVLEdBQUdDLGdCQUFPLENBQUNDLE1BQU0sRUFBRTtBQUVuQ0YsVUFBVSxDQUFDRyxHQUFHLENBQUMsTUFBTSxFQUFFQyxvQkFBZSxFQUFFQyxpQkFBVyxDQUFDO0FBQ3BETCxVQUFVLENBQUNHLEdBQUcsQ0FBQyxNQUFNLEVBQUVDLG9CQUFlLEVBQUVFLGdCQUFVLENBQUM7QUFFbkRDLE1BQU0sQ0FBQ0MsT0FBTyxHQUFHUixVQUFVIn0=","map":{"version":3,"names":["_express","_interopRequireDefault","require","_logs","_verifyToken","logsroutes","express","Router","get","isAuthenticated","getUserLogs","getLogById","module","exports"],"sourceRoot":"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/routes/","sources":["logs.js"],"sourcesContent":["/* eslint-disable import/no-import-module-exports */\nimport express from 'express';\nimport { getLogById, getUserLogs } from '../controllers/logs.controller';\nimport isAuthenticated from '../middlewares/verifyToken';\n\nconst logsroutes = express.Router();\n\nlogsroutes.get('/all', isAuthenticated, getUserLogs);\nlogsroutes.get('/:id', isAuthenticated, getLogById);\n\nmodule.exports = logsroutes;\n"],"mappings":";;;AACA,IAAAA,QAAA,GAAAC,sBAAA,CAAAC,OAAA;AACA,IAAAC,KAAA,GAAAD,OAAA;AACA,IAAAE,YAAA,GAAAH,sBAAA,CAAAC,OAAA;AAHA;;AAKA,MAAMG,UAAU,GAAGC,gBAAO,CAACC,MAAM,EAAE;AAEnCF,UAAU,CAACG,GAAG,CAAC,MAAM,EAAEC,oBAAe,EAAEC,iBAAW,CAAC;AACpDL,UAAU,CAACG,GAAG,CAAC,MAAM,EAAEC,oBAAe,EAAEE,gBAAU,CAAC;AAEnDC,MAAM,CAACC,OAAO,GAAGR,UAAU"}},"mtime":1682148437957},"{\"assumptions\":{},\"sourceRoot\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/routes/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"filename\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/routes/subscribe.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/node_modules/babel-plugin-add-module-exports/lib/index.js\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-runtime\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"regenerator\":true},\"externalDependencies\":[]},{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.21.0:development":{"value":{"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _express = _interopRequireDefault(require(\"express\"));\nvar _subscriber = require(\"../controllers/subscriber.controller\");\nvar _Checkrole = _interopRequireDefault(require(\"../middlewares/Checkrole\"));\nvar _verifyToken = _interopRequireDefault(require(\"../middlewares/verifyToken\"));\nvar _subscribeValidate = _interopRequireDefault(require(\"../middlewares/subscribeValidate\"));\nvar _checkUserExist = require(\"../middlewares/checkUserExist\");\n// eslint-disable-next-line import/no-unresolved, import/extensions\n\nconst subroutes = _express.default.Router();\nsubroutes.post('/', _subscribeValidate.default, _checkUserExist.checkSubscriberExist, _subscriber.SubscriberController.subscribe);\nsubroutes.get('/unsubscribe/:id', _subscriber.SubscriberController.unsubscribe);\nsubroutes.get('/verify/:token', _subscriber.SubscriberController.verify);\nsubroutes.get('/all', _verifyToken.default, (0, _Checkrole.default)(['admin']), _subscriber.SubscriberController.getAllSubscribers);\nsubroutes.delete('/:id', _verifyToken.default, (0, _Checkrole.default)(['admin']), _subscriber.SubscriberController.deleteSubscriber);\nvar _default = subroutes;\nexports.default = _default;\nmodule.exports = exports.default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfZXhwcmVzcyIsIl9pbnRlcm9wUmVxdWlyZURlZmF1bHQiLCJyZXF1aXJlIiwiX3N1YnNjcmliZXIiLCJfQ2hlY2tyb2xlIiwiX3ZlcmlmeVRva2VuIiwiX3N1YnNjcmliZVZhbGlkYXRlIiwiX2NoZWNrVXNlckV4aXN0Iiwic3Vicm91dGVzIiwiZXhwcmVzcyIsIlJvdXRlciIsInBvc3QiLCJzdWJzY3JpYmVWYWxpZGF0ZSIsImNoZWNrU3Vic2NyaWJlckV4aXN0IiwiU3Vic2NyaWJlckNvbnRyb2xsZXIiLCJzdWJzY3JpYmUiLCJnZXQiLCJ1bnN1YnNjcmliZSIsInZlcmlmeSIsImlzQXV0aGVudGljYXRlZCIsImNoZWNrUm9sZSIsImdldEFsbFN1YnNjcmliZXJzIiwiZGVsZXRlIiwiZGVsZXRlU3Vic2NyaWJlciIsIl9kZWZhdWx0IiwiZXhwb3J0cyIsImRlZmF1bHQiLCJtb2R1bGUiXSwic291cmNlUm9vdCI6Ii9Vc2Vycy9hbmRlbGFyd2FuZGEvRGVza3RvcC9lLWNvbW0tdGVhbS1icm9ncmFtbWVycy1ibi9zcmMvcm91dGVzLyIsInNvdXJjZXMiOlsic3Vic2NyaWJlLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBleHByZXNzIGZyb20gJ2V4cHJlc3MnO1xuaW1wb3J0IHsgU3Vic2NyaWJlckNvbnRyb2xsZXIgfSBmcm9tICcuLi9jb250cm9sbGVycy9zdWJzY3JpYmVyLmNvbnRyb2xsZXInO1xuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGltcG9ydC9uby11bnJlc29sdmVkLCBpbXBvcnQvZXh0ZW5zaW9uc1xuaW1wb3J0IGNoZWNrUm9sZSBmcm9tICcuLi9taWRkbGV3YXJlcy9DaGVja3JvbGUnO1xuaW1wb3J0IGlzQXV0aGVudGljYXRlZCBmcm9tICcuLi9taWRkbGV3YXJlcy92ZXJpZnlUb2tlbic7XG5pbXBvcnQgc3Vic2NyaWJlVmFsaWRhdGUgZnJvbSAnLi4vbWlkZGxld2FyZXMvc3Vic2NyaWJlVmFsaWRhdGUnO1xuaW1wb3J0IHsgY2hlY2tTdWJzY3JpYmVyRXhpc3QgfSBmcm9tICcuLi9taWRkbGV3YXJlcy9jaGVja1VzZXJFeGlzdCc7XG5cbmNvbnN0IHN1YnJvdXRlcyA9IGV4cHJlc3MuUm91dGVyKCk7XG5cbnN1YnJvdXRlcy5wb3N0KCcvJywgc3Vic2NyaWJlVmFsaWRhdGUsIGNoZWNrU3Vic2NyaWJlckV4aXN0LCBTdWJzY3JpYmVyQ29udHJvbGxlci5zdWJzY3JpYmUpO1xuc3Vicm91dGVzLmdldCgnL3Vuc3Vic2NyaWJlLzppZCcsIFN1YnNjcmliZXJDb250cm9sbGVyLnVuc3Vic2NyaWJlKTtcbnN1YnJvdXRlcy5nZXQoJy92ZXJpZnkvOnRva2VuJywgU3Vic2NyaWJlckNvbnRyb2xsZXIudmVyaWZ5KTtcbnN1YnJvdXRlcy5nZXQoJy9hbGwnLCBpc0F1dGhlbnRpY2F0ZWQsIGNoZWNrUm9sZShbJ2FkbWluJ10pLCBTdWJzY3JpYmVyQ29udHJvbGxlci5nZXRBbGxTdWJzY3JpYmVycyk7XG5zdWJyb3V0ZXMuZGVsZXRlKCcvOmlkJywgaXNBdXRoZW50aWNhdGVkLCBjaGVja1JvbGUoWydhZG1pbiddKSwgU3Vic2NyaWJlckNvbnRyb2xsZXIuZGVsZXRlU3Vic2NyaWJlcik7XG5cbmV4cG9ydCBkZWZhdWx0IHN1YnJvdXRlcztcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBLElBQUFBLFFBQUEsR0FBQUMsc0JBQUEsQ0FBQUMsT0FBQTtBQUNBLElBQUFDLFdBQUEsR0FBQUQsT0FBQTtBQUVBLElBQUFFLFVBQUEsR0FBQUgsc0JBQUEsQ0FBQUMsT0FBQTtBQUNBLElBQUFHLFlBQUEsR0FBQUosc0JBQUEsQ0FBQUMsT0FBQTtBQUNBLElBQUFJLGtCQUFBLEdBQUFMLHNCQUFBLENBQUFDLE9BQUE7QUFDQSxJQUFBSyxlQUFBLEdBQUFMLE9BQUE7QUFKQTs7QUFNQSxNQUFNTSxTQUFTLEdBQUdDLGdCQUFPLENBQUNDLE1BQU0sRUFBRTtBQUVsQ0YsU0FBUyxDQUFDRyxJQUFJLENBQUMsR0FBRyxFQUFFQywwQkFBaUIsRUFBRUMsb0NBQW9CLEVBQUVDLGdDQUFvQixDQUFDQyxTQUFTLENBQUM7QUFDNUZQLFNBQVMsQ0FBQ1EsR0FBRyxDQUFDLGtCQUFrQixFQUFFRixnQ0FBb0IsQ0FBQ0csV0FBVyxDQUFDO0FBQ25FVCxTQUFTLENBQUNRLEdBQUcsQ0FBQyxnQkFBZ0IsRUFBRUYsZ0NBQW9CLENBQUNJLE1BQU0sQ0FBQztBQUM1RFYsU0FBUyxDQUFDUSxHQUFHLENBQUMsTUFBTSxFQUFFRyxvQkFBZSxFQUFFLElBQUFDLGtCQUFTLEVBQUMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxFQUFFTixnQ0FBb0IsQ0FBQ08saUJBQWlCLENBQUM7QUFDcEdiLFNBQVMsQ0FBQ2MsTUFBTSxDQUFDLE1BQU0sRUFBRUgsb0JBQWUsRUFBRSxJQUFBQyxrQkFBUyxFQUFDLENBQUMsT0FBTyxDQUFDLENBQUMsRUFBRU4sZ0NBQW9CLENBQUNTLGdCQUFnQixDQUFDO0FBQUMsSUFBQUMsUUFBQSxHQUV4RmhCLFNBQVM7QUFBQWlCLE9BQUEsQ0FBQUMsT0FBQSxHQUFBRixRQUFBO0FBQUFHLE1BQUEsQ0FBQUYsT0FBQSxHQUFBQSxPQUFBLENBQUFDLE9BQUEifQ==","map":{"version":3,"names":["_express","_interopRequireDefault","require","_subscriber","_Checkrole","_verifyToken","_subscribeValidate","_checkUserExist","subroutes","express","Router","post","subscribeValidate","checkSubscriberExist","SubscriberController","subscribe","get","unsubscribe","verify","isAuthenticated","checkRole","getAllSubscribers","delete","deleteSubscriber","_default","exports","default","module"],"sourceRoot":"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/routes/","sources":["subscribe.js"],"sourcesContent":["import express from 'express';\nimport { SubscriberController } from '../controllers/subscriber.controller';\n// eslint-disable-next-line import/no-unresolved, import/extensions\nimport checkRole from '../middlewares/Checkrole';\nimport isAuthenticated from '../middlewares/verifyToken';\nimport subscribeValidate from '../middlewares/subscribeValidate';\nimport { checkSubscriberExist } from '../middlewares/checkUserExist';\n\nconst subroutes = express.Router();\n\nsubroutes.post('/', subscribeValidate, checkSubscriberExist, SubscriberController.subscribe);\nsubroutes.get('/unsubscribe/:id', SubscriberController.unsubscribe);\nsubroutes.get('/verify/:token', SubscriberController.verify);\nsubroutes.get('/all', isAuthenticated, checkRole(['admin']), SubscriberController.getAllSubscribers);\nsubroutes.delete('/:id', isAuthenticated, checkRole(['admin']), SubscriberController.deleteSubscriber);\n\nexport default subroutes;\n"],"mappings":";;;;;;;AAAA,IAAAA,QAAA,GAAAC,sBAAA,CAAAC,OAAA;AACA,IAAAC,WAAA,GAAAD,OAAA;AAEA,IAAAE,UAAA,GAAAH,sBAAA,CAAAC,OAAA;AACA,IAAAG,YAAA,GAAAJ,sBAAA,CAAAC,OAAA;AACA,IAAAI,kBAAA,GAAAL,sBAAA,CAAAC,OAAA;AACA,IAAAK,eAAA,GAAAL,OAAA;AAJA;;AAMA,MAAMM,SAAS,GAAGC,gBAAO,CAACC,MAAM,EAAE;AAElCF,SAAS,CAACG,IAAI,CAAC,GAAG,EAAEC,0BAAiB,EAAEC,oCAAoB,EAAEC,gCAAoB,CAACC,SAAS,CAAC;AAC5FP,SAAS,CAACQ,GAAG,CAAC,kBAAkB,EAAEF,gCAAoB,CAACG,WAAW,CAAC;AACnET,SAAS,CAACQ,GAAG,CAAC,gBAAgB,EAAEF,gCAAoB,CAACI,MAAM,CAAC;AAC5DV,SAAS,CAACQ,GAAG,CAAC,MAAM,EAAEG,oBAAe,EAAE,IAAAC,kBAAS,EAAC,CAAC,OAAO,CAAC,CAAC,EAAEN,gCAAoB,CAACO,iBAAiB,CAAC;AACpGb,SAAS,CAACc,MAAM,CAAC,MAAM,EAAEH,oBAAe,EAAE,IAAAC,kBAAS,EAAC,CAAC,OAAO,CAAC,CAAC,EAAEN,gCAAoB,CAACS,gBAAgB,CAAC;AAAC,IAAAC,QAAA,GAExFhB,SAAS;AAAAiB,OAAA,CAAAC,OAAA,GAAAF,QAAA;AAAAG,MAAA,CAAAF,OAAA,GAAAA,OAAA,CAAAC,OAAA"}},"mtime":1685643189468},"{\"assumptions\":{},\"sourceRoot\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/controllers/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"filename\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/controllers/subscriber.controller.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/node_modules/babel-plugin-add-module-exports/lib/index.js\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-runtime\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"regenerator\":true},\"externalDependencies\":[]},{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.21.0:development":{"value":{"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.SubscriberController = void 0;\nvar _nodeCron = _interopRequireDefault(require(\"node-cron\"));\nvar _dotenv = _interopRequireDefault(require(\"dotenv\"));\nvar _emailConfig = require(\"../helpers/emailConfig\");\nvar _mailTemplate = require(\"../helpers/mailTemplate\");\nvar _mail = require(\"../helpers/mail\");\nvar _subscriber = _interopRequireDefault(require(\"../services/subscriber.services\"));\nvar _Admin = require(\"../loggers/Admin.logger\");\nvar _jwt = require(\"../helpers/jwt\");\n/* eslint-disable require-jsdoc */\n/* eslint-disable import/prefer-default-export */\n\n_dotenv.default.config();\nconst {\n  CRON_SCHEDULE\n} = process.env;\nclass SubscriberController {\n  static async subscribe(req, res) {\n    try {\n      const {\n        data\n      } = await _subscriber.default.register(req.body);\n      console.log({\n        redirect: req.headers.success\n      });\n      const redirect = await _jwt.Jwt.generateToken({\n        redirect: req.headers.success\n      });\n      const SubscriberTemplate = (0, _mailTemplate.verifyEmailSubscriberTemplate)(data.verificationToken, redirect);\n      (0, _mail.sendEmail)((0, _emailConfig.emailConfig)({\n        email: data.email,\n        subject: 'Brogrammers NewsLetter Signup',\n        content: SubscriberTemplate\n      }));\n      res.status(201).json(data);\n    } catch (err) {\n      (0, _Admin.UserError)(req, err);\n      res.status(500).json({\n        message: err.message\n      });\n    }\n  }\n  static async verify(req, res) {\n    try {\n      const {\n        token\n      } = req.params;\n      const {\n        r\n      } = req.query;\n      const {\n        value\n      } = _jwt.Jwt.verifyToken(r);\n      const {\n        redirect\n      } = value;\n      const subscribers = await _subscriber.default.findByVerificationToken(token);\n      if (!subscribers) {\n        return res.status(404).json({\n          error: 'Invalid verification token'\n        });\n      }\n      if (subscribers.verified) {\n        return res.status(400).json({\n          error: 'Subscriber already verified'\n        });\n      }\n      await _subscriber.default.verifySubscriber(subscribers);\n      const SubscriberTemplate = (0, _mailTemplate.thankYouSubscriberTemplate)(subscribers.firstName, subscribers.id);\n      (0, _mail.sendEmail)((0, _emailConfig.emailConfig)({\n        email: subscribers.email,\n        subject: 'Brogrammers NewsLetter Signup',\n        content: SubscriberTemplate\n      }));\n      if (redirect) return res.status(301).redirect(redirect);\n      return res.status(200).send({\n        message: 'Email Subscribed successfully!',\n        subscribed: true\n      });\n    } catch (err) {\n      (0, _Admin.UserError)(req, err);\n      res.status(500).json({\n        message: err.message\n      });\n    }\n  }\n  static async unsubscribe(req, res) {\n    try {\n      const {\n        id\n      } = req.params;\n      const subscriber = await _subscriber.default.findById(id);\n      if (subscriber) {\n        subscriber.subscribed = false;\n        await subscriber.save();\n        res.status(200).send({\n          message: 'Unsubscribed successfully!',\n          subscribed: false\n        });\n      } else {\n        res.status(404).json({\n          message: 'Subscriber not found'\n        });\n      }\n    } catch (err) {\n      (0, _Admin.UserError)(req, err);\n      res.status(500).json({\n        message: err.message\n      });\n    }\n  }\n  static async uploadNewsletter(res) {\n    try {\n      const subscribers = await _subscriber.default.getAllSubscribersTrue();\n      const product = await _subscriber.default.getProducts();\n      if (subscribers.length === 0) {\n        res.status(404).json({\n          message: 'There are no subscribers to send newsletter to'\n        });\n      }\n      subscribers.forEach(subscriber => {\n        const newsletterHeader = 'New Products Alert!';\n        const newsletterInfo = 'Here are some new products we want to share with you.';\n        const newsletterContent = (0, _mailTemplate.newsletterTemplate)(subscriber.firstName, product[0].dataValues, subscriber.id, newsletterHeader, newsletterInfo);\n        (0, _mail.sendEmail)((0, _emailConfig.emailConfig)({\n          email: subscriber.email,\n          subject: 'New Products Alert!',\n          content: newsletterContent\n        }));\n      });\n    } catch (err) {\n      res.status(500).json({\n        message: err.message\n      });\n    }\n  }\n  static sendNewsletter(res) {\n    _nodeCron.default.schedule(CRON_SCHEDULE, async () => {\n      try {\n        await SubscriberController.uploadNewsletter();\n      } catch (err) {\n        res.status(500).json({\n          message: err.message\n        });\n      }\n    });\n  }\n  static async getAllSubscribers(req, res) {\n    try {\n      const {\n        limit,\n        page\n      } = req.query;\n      const subscribers = await _subscriber.default.getAllSubscribers(page, limit);\n      if (subscribers.totalCount === 0) {\n        res.status(200).json({\n          message: 'There are no subscribers',\n          subscribers\n        });\n      } else {\n        (0, _Admin.getAllSubscribersLog)(req, subscribers);\n        res.status(200).json({\n          message: 'All subscribers Retrieved Successfully',\n          subscribers\n        });\n      }\n    } catch (err) {\n      (0, _Admin.UserError)(req, err);\n      res.status(500).json({\n        message: err.message\n      });\n    }\n  }\n  static async deleteSubscriber(req, res) {\n    try {\n      const {\n        id\n      } = req.params;\n      const subscriber = await _subscriber.default.findById(id);\n      if (subscriber) {\n        await subscriber.destroy();\n        (0, _Admin.deleteSubscriberLog)(req, subscriber);\n        res.status(200).json({\n          message: 'Subscriber deleted successfully',\n          subscriber\n        });\n      } else {\n        res.status(404).json({\n          message: 'Subscriber not found'\n        });\n      }\n    } catch (err) {\n      (0, _Admin.UserError)(req, err);\n      res.status(500).json({\n        message: err.message\n      });\n    }\n  }\n}\nexports.SubscriberController = SubscriberController;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfbm9kZUNyb24iLCJfaW50ZXJvcFJlcXVpcmVEZWZhdWx0IiwicmVxdWlyZSIsIl9kb3RlbnYiLCJfZW1haWxDb25maWciLCJfbWFpbFRlbXBsYXRlIiwiX21haWwiLCJfc3Vic2NyaWJlciIsIl9BZG1pbiIsIl9qd3QiLCJkb3RlbnYiLCJjb25maWciLCJDUk9OX1NDSEVEVUxFIiwicHJvY2VzcyIsImVudiIsIlN1YnNjcmliZXJDb250cm9sbGVyIiwic3Vic2NyaWJlIiwicmVxIiwicmVzIiwiZGF0YSIsIlN1YnNjcmliZXJzIiwicmVnaXN0ZXIiLCJib2R5IiwiY29uc29sZSIsImxvZyIsInJlZGlyZWN0IiwiaGVhZGVycyIsInN1Y2Nlc3MiLCJKd3QiLCJnZW5lcmF0ZVRva2VuIiwiU3Vic2NyaWJlclRlbXBsYXRlIiwidmVyaWZ5RW1haWxTdWJzY3JpYmVyVGVtcGxhdGUiLCJ2ZXJpZmljYXRpb25Ub2tlbiIsInNlbmRFbWFpbCIsImVtYWlsQ29uZmlnIiwiZW1haWwiLCJzdWJqZWN0IiwiY29udGVudCIsInN0YXR1cyIsImpzb24iLCJlcnIiLCJVc2VyRXJyb3IiLCJtZXNzYWdlIiwidmVyaWZ5IiwidG9rZW4iLCJwYXJhbXMiLCJyIiwicXVlcnkiLCJ2YWx1ZSIsInZlcmlmeVRva2VuIiwic3Vic2NyaWJlcnMiLCJmaW5kQnlWZXJpZmljYXRpb25Ub2tlbiIsImVycm9yIiwidmVyaWZpZWQiLCJ2ZXJpZnlTdWJzY3JpYmVyIiwidGhhbmtZb3VTdWJzY3JpYmVyVGVtcGxhdGUiLCJmaXJzdE5hbWUiLCJpZCIsInNlbmQiLCJzdWJzY3JpYmVkIiwidW5zdWJzY3JpYmUiLCJzdWJzY3JpYmVyIiwiZmluZEJ5SWQiLCJzYXZlIiwidXBsb2FkTmV3c2xldHRlciIsImdldEFsbFN1YnNjcmliZXJzVHJ1ZSIsInByb2R1Y3QiLCJnZXRQcm9kdWN0cyIsImxlbmd0aCIsImZvckVhY2giLCJuZXdzbGV0dGVySGVhZGVyIiwibmV3c2xldHRlckluZm8iLCJuZXdzbGV0dGVyQ29udGVudCIsIm5ld3NsZXR0ZXJUZW1wbGF0ZSIsImRhdGFWYWx1ZXMiLCJzZW5kTmV3c2xldHRlciIsImNyb24iLCJzY2hlZHVsZSIsImdldEFsbFN1YnNjcmliZXJzIiwibGltaXQiLCJwYWdlIiwidG90YWxDb3VudCIsImdldEFsbFN1YnNjcmliZXJzTG9nIiwiZGVsZXRlU3Vic2NyaWJlciIsImRlc3Ryb3kiLCJkZWxldGVTdWJzY3JpYmVyTG9nIiwiZXhwb3J0cyJdLCJzb3VyY2VSb290IjoiL1VzZXJzL2FuZGVsYXJ3YW5kYS9EZXNrdG9wL2UtY29tbS10ZWFtLWJyb2dyYW1tZXJzLWJuL3NyYy9jb250cm9sbGVycy8iLCJzb3VyY2VzIjpbInN1YnNjcmliZXIuY29udHJvbGxlci5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKiBlc2xpbnQtZGlzYWJsZSByZXF1aXJlLWpzZG9jICovXG4vKiBlc2xpbnQtZGlzYWJsZSBpbXBvcnQvcHJlZmVyLWRlZmF1bHQtZXhwb3J0ICovXG5pbXBvcnQgY3JvbiBmcm9tICdub2RlLWNyb24nO1xuaW1wb3J0IGRvdGVudiBmcm9tICdkb3RlbnYnO1xuaW1wb3J0IHsgZW1haWxDb25maWcgfSBmcm9tICcuLi9oZWxwZXJzL2VtYWlsQ29uZmlnJztcbmltcG9ydCB7XG4gIHZlcmlmeUVtYWlsU3Vic2NyaWJlclRlbXBsYXRlLFxuICB0aGFua1lvdVN1YnNjcmliZXJUZW1wbGF0ZSxcbiAgbmV3c2xldHRlclRlbXBsYXRlLFxufSBmcm9tICcuLi9oZWxwZXJzL21haWxUZW1wbGF0ZSc7XG5pbXBvcnQgeyBzZW5kRW1haWwgfSBmcm9tICcuLi9oZWxwZXJzL21haWwnO1xuaW1wb3J0IFN1YnNjcmliZXJzIGZyb20gJy4uL3NlcnZpY2VzL3N1YnNjcmliZXIuc2VydmljZXMnO1xuaW1wb3J0IHsgZGVsZXRlU3Vic2NyaWJlckxvZywgZ2V0QWxsU3Vic2NyaWJlcnNMb2csIFVzZXJFcnJvciB9IGZyb20gJy4uL2xvZ2dlcnMvQWRtaW4ubG9nZ2VyJztcbmltcG9ydCB7IEp3dCB9IGZyb20gJy4uL2hlbHBlcnMvand0JztcblxuZG90ZW52LmNvbmZpZygpO1xuXG5jb25zdCB7IENST05fU0NIRURVTEUgfSA9IHByb2Nlc3MuZW52O1xuXG5leHBvcnQgY2xhc3MgU3Vic2NyaWJlckNvbnRyb2xsZXIge1xuICBzdGF0aWMgYXN5bmMgc3Vic2NyaWJlKHJlcSwgcmVzKSB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHsgZGF0YSB9ID0gYXdhaXQgU3Vic2NyaWJlcnMucmVnaXN0ZXIocmVxLmJvZHkpO1xuICAgICAgY29uc29sZS5sb2coeyByZWRpcmVjdDogcmVxLmhlYWRlcnMuc3VjY2VzcyB9KTtcbiAgICAgIGNvbnN0IHJlZGlyZWN0ID0gYXdhaXQgSnd0LmdlbmVyYXRlVG9rZW4oeyByZWRpcmVjdDogcmVxLmhlYWRlcnMuc3VjY2VzcyB9KTtcbiAgICAgIGNvbnN0IFN1YnNjcmliZXJUZW1wbGF0ZSA9IHZlcmlmeUVtYWlsU3Vic2NyaWJlclRlbXBsYXRlKGRhdGEudmVyaWZpY2F0aW9uVG9rZW4sIHJlZGlyZWN0KTtcbiAgICAgIHNlbmRFbWFpbChcbiAgICAgICAgZW1haWxDb25maWcoe1xuICAgICAgICAgIGVtYWlsOiBkYXRhLmVtYWlsLFxuICAgICAgICAgIHN1YmplY3Q6ICdCcm9ncmFtbWVycyBOZXdzTGV0dGVyIFNpZ251cCcsXG4gICAgICAgICAgY29udGVudDogU3Vic2NyaWJlclRlbXBsYXRlLFxuICAgICAgICB9KVxuICAgICAgKTtcbiAgICAgIHJlcy5zdGF0dXMoMjAxKS5qc29uKGRhdGEpO1xuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgVXNlckVycm9yKHJlcSwgZXJyKTtcbiAgICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHtcbiAgICAgICAgbWVzc2FnZTogZXJyLm1lc3NhZ2UsXG4gICAgICB9KTtcbiAgICB9XG4gIH1cblxuICBzdGF0aWMgYXN5bmMgdmVyaWZ5KHJlcSwgcmVzKSB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHsgdG9rZW4gfSA9IHJlcS5wYXJhbXM7XG4gICAgICBjb25zdCB7IHIgfSA9IHJlcS5xdWVyeTtcbiAgICAgIGNvbnN0IHsgdmFsdWUgfSA9IEp3dC52ZXJpZnlUb2tlbihyKTtcbiAgICAgIGNvbnN0IHsgcmVkaXJlY3QgfSA9IHZhbHVlO1xuICAgICAgY29uc3Qgc3Vic2NyaWJlcnMgPSBhd2FpdCBTdWJzY3JpYmVycy5maW5kQnlWZXJpZmljYXRpb25Ub2tlbih0b2tlbik7XG4gICAgICBpZiAoIXN1YnNjcmliZXJzKSB7XG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwNCkuanNvbih7IGVycm9yOiAnSW52YWxpZCB2ZXJpZmljYXRpb24gdG9rZW4nIH0pO1xuICAgICAgfVxuICAgICAgaWYgKHN1YnNjcmliZXJzLnZlcmlmaWVkKSB7XG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IGVycm9yOiAnU3Vic2NyaWJlciBhbHJlYWR5IHZlcmlmaWVkJyB9KTtcbiAgICAgIH1cbiAgICAgIGF3YWl0IFN1YnNjcmliZXJzLnZlcmlmeVN1YnNjcmliZXIoc3Vic2NyaWJlcnMpO1xuICAgICAgY29uc3QgU3Vic2NyaWJlclRlbXBsYXRlID0gdGhhbmtZb3VTdWJzY3JpYmVyVGVtcGxhdGUoXG4gICAgICAgIHN1YnNjcmliZXJzLmZpcnN0TmFtZSxcbiAgICAgICAgc3Vic2NyaWJlcnMuaWRcbiAgICAgICk7XG4gICAgICBzZW5kRW1haWwoXG4gICAgICAgIGVtYWlsQ29uZmlnKHtcbiAgICAgICAgICBlbWFpbDogc3Vic2NyaWJlcnMuZW1haWwsXG4gICAgICAgICAgc3ViamVjdDogJ0Jyb2dyYW1tZXJzIE5ld3NMZXR0ZXIgU2lnbnVwJyxcbiAgICAgICAgICBjb250ZW50OiBTdWJzY3JpYmVyVGVtcGxhdGUsXG4gICAgICAgIH0pXG4gICAgICApO1xuICAgICAgaWYgKHJlZGlyZWN0KSByZXR1cm4gcmVzLnN0YXR1cygzMDEpLnJlZGlyZWN0KHJlZGlyZWN0KTtcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDIwMCkuc2VuZCh7XG4gICAgICAgIG1lc3NhZ2U6ICdFbWFpbCBTdWJzY3JpYmVkIHN1Y2Nlc3NmdWxseSEnLFxuICAgICAgICBzdWJzY3JpYmVkOiB0cnVlLFxuICAgICAgfSk7XG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICBVc2VyRXJyb3IocmVxLCBlcnIpO1xuICAgICAgcmVzLnN0YXR1cyg1MDApLmpzb24oe1xuICAgICAgICBtZXNzYWdlOiBlcnIubWVzc2FnZSxcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyBhc3luYyB1bnN1YnNjcmliZShyZXEsIHJlcykge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCB7IGlkIH0gPSByZXEucGFyYW1zO1xuICAgICAgY29uc3Qgc3Vic2NyaWJlciA9IGF3YWl0IFN1YnNjcmliZXJzLmZpbmRCeUlkKGlkKTtcbiAgICAgIGlmIChzdWJzY3JpYmVyKSB7XG4gICAgICAgIHN1YnNjcmliZXIuc3Vic2NyaWJlZCA9IGZhbHNlO1xuICAgICAgICBhd2FpdCBzdWJzY3JpYmVyLnNhdmUoKTtcbiAgICAgICAgcmVzLnN0YXR1cygyMDApLnNlbmQoe1xuICAgICAgICAgIG1lc3NhZ2U6ICdVbnN1YnNjcmliZWQgc3VjY2Vzc2Z1bGx5IScsXG4gICAgICAgICAgc3Vic2NyaWJlZDogZmFsc2UsXG4gICAgICAgIH0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmVzLnN0YXR1cyg0MDQpLmpzb24oeyBtZXNzYWdlOiAnU3Vic2NyaWJlciBub3QgZm91bmQnIH0pO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgVXNlckVycm9yKHJlcSwgZXJyKTtcbiAgICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHtcbiAgICAgICAgbWVzc2FnZTogZXJyLm1lc3NhZ2UsXG4gICAgICB9KTtcbiAgICB9XG4gIH1cblxuICBzdGF0aWMgYXN5bmMgdXBsb2FkTmV3c2xldHRlcihyZXMpIHtcbiAgICB0cnkge1xuICAgICAgY29uc3Qgc3Vic2NyaWJlcnMgPSBhd2FpdCBTdWJzY3JpYmVycy5nZXRBbGxTdWJzY3JpYmVyc1RydWUoKTtcbiAgICAgIGNvbnN0IHByb2R1Y3QgPSBhd2FpdCBTdWJzY3JpYmVycy5nZXRQcm9kdWN0cygpO1xuICAgICAgaWYgKHN1YnNjcmliZXJzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICByZXMuc3RhdHVzKDQwNCkuanNvbih7XG4gICAgICAgICAgbWVzc2FnZTogJ1RoZXJlIGFyZSBubyBzdWJzY3JpYmVycyB0byBzZW5kIG5ld3NsZXR0ZXIgdG8nLFxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIHN1YnNjcmliZXJzLmZvckVhY2goKHN1YnNjcmliZXIpID0+IHtcbiAgICAgICAgY29uc3QgbmV3c2xldHRlckhlYWRlciA9ICdOZXcgUHJvZHVjdHMgQWxlcnQhJztcbiAgICAgICAgY29uc3QgbmV3c2xldHRlckluZm8gPSAnSGVyZSBhcmUgc29tZSBuZXcgcHJvZHVjdHMgd2Ugd2FudCB0byBzaGFyZSB3aXRoIHlvdS4nO1xuICAgICAgICBjb25zdCBuZXdzbGV0dGVyQ29udGVudCA9IG5ld3NsZXR0ZXJUZW1wbGF0ZShcbiAgICAgICAgICBzdWJzY3JpYmVyLmZpcnN0TmFtZSxcbiAgICAgICAgICBwcm9kdWN0WzBdLmRhdGFWYWx1ZXMsXG4gICAgICAgICAgc3Vic2NyaWJlci5pZCxcbiAgICAgICAgICBuZXdzbGV0dGVySGVhZGVyLFxuICAgICAgICAgIG5ld3NsZXR0ZXJJbmZvXG4gICAgICAgICk7XG4gICAgICAgIHNlbmRFbWFpbChcbiAgICAgICAgICBlbWFpbENvbmZpZyh7XG4gICAgICAgICAgICBlbWFpbDogc3Vic2NyaWJlci5lbWFpbCxcbiAgICAgICAgICAgIHN1YmplY3Q6ICdOZXcgUHJvZHVjdHMgQWxlcnQhJyxcbiAgICAgICAgICAgIGNvbnRlbnQ6IG5ld3NsZXR0ZXJDb250ZW50LFxuICAgICAgICAgIH0pXG4gICAgICAgICk7XG4gICAgICB9KTtcbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHtcbiAgICAgICAgbWVzc2FnZTogZXJyLm1lc3NhZ2UsXG4gICAgICB9KTtcbiAgICB9XG4gIH1cblxuICBzdGF0aWMgc2VuZE5ld3NsZXR0ZXIocmVzKSB7XG4gICAgY3Jvbi5zY2hlZHVsZShDUk9OX1NDSEVEVUxFLCBhc3luYyAoKSA9PiB7XG4gICAgICB0cnkge1xuICAgICAgICBhd2FpdCBTdWJzY3JpYmVyQ29udHJvbGxlci51cGxvYWROZXdzbGV0dGVyKCk7XG4gICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgcmVzLnN0YXR1cyg1MDApLmpzb24oe1xuICAgICAgICAgIG1lc3NhZ2U6IGVyci5tZXNzYWdlLFxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIHN0YXRpYyBhc3luYyBnZXRBbGxTdWJzY3JpYmVycyhyZXEsIHJlcykge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCB7IGxpbWl0LCBwYWdlIH0gPSByZXEucXVlcnk7XG4gICAgICBjb25zdCBzdWJzY3JpYmVycyA9IGF3YWl0IFN1YnNjcmliZXJzLmdldEFsbFN1YnNjcmliZXJzKHBhZ2UsIGxpbWl0KTtcbiAgICAgIGlmIChzdWJzY3JpYmVycy50b3RhbENvdW50ID09PSAwKSB7XG4gICAgICAgIHJlcy5zdGF0dXMoMjAwKS5qc29uKHtcbiAgICAgICAgICBtZXNzYWdlOiAnVGhlcmUgYXJlIG5vIHN1YnNjcmliZXJzJyxcbiAgICAgICAgICBzdWJzY3JpYmVyc1xuICAgICAgICB9KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGdldEFsbFN1YnNjcmliZXJzTG9nKHJlcSwgc3Vic2NyaWJlcnMpO1xuICAgICAgICByZXMuc3RhdHVzKDIwMCkuanNvbih7XG4gICAgICAgICAgbWVzc2FnZTogJ0FsbCBzdWJzY3JpYmVycyBSZXRyaWV2ZWQgU3VjY2Vzc2Z1bGx5JyxcbiAgICAgICAgICBzdWJzY3JpYmVyc1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgIFVzZXJFcnJvcihyZXEsIGVycik7XG4gICAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7XG4gICAgICAgIG1lc3NhZ2U6IGVyci5tZXNzYWdlLFxuICAgICAgfSk7XG4gICAgfVxuICB9XG5cbiAgc3RhdGljIGFzeW5jIGRlbGV0ZVN1YnNjcmliZXIocmVxLCByZXMpIHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgeyBpZCB9ID0gcmVxLnBhcmFtcztcbiAgICAgIGNvbnN0IHN1YnNjcmliZXIgPSBhd2FpdCBTdWJzY3JpYmVycy5maW5kQnlJZChpZCk7XG4gICAgICBpZiAoc3Vic2NyaWJlcikge1xuICAgICAgICBhd2FpdCBzdWJzY3JpYmVyLmRlc3Ryb3koKTtcbiAgICAgICAgZGVsZXRlU3Vic2NyaWJlckxvZyhyZXEsIHN1YnNjcmliZXIpO1xuICAgICAgICByZXNcbiAgICAgICAgICAuc3RhdHVzKDIwMClcbiAgICAgICAgICAuanNvbih7IG1lc3NhZ2U6ICdTdWJzY3JpYmVyIGRlbGV0ZWQgc3VjY2Vzc2Z1bGx5Jywgc3Vic2NyaWJlciB9KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJlcy5zdGF0dXMoNDA0KS5qc29uKHsgbWVzc2FnZTogJ1N1YnNjcmliZXIgbm90IGZvdW5kJyB9KTtcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgIFVzZXJFcnJvcihyZXEsIGVycik7XG4gICAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7XG4gICAgICAgIG1lc3NhZ2U6IGVyci5tZXNzYWdlLFxuICAgICAgfSk7XG4gICAgfVxuICB9XG59XG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFFQSxJQUFBQSxTQUFBLEdBQUFDLHNCQUFBLENBQUFDLE9BQUE7QUFDQSxJQUFBQyxPQUFBLEdBQUFGLHNCQUFBLENBQUFDLE9BQUE7QUFDQSxJQUFBRSxZQUFBLEdBQUFGLE9BQUE7QUFDQSxJQUFB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","map":{"version":3,"names":["_nodeCron","_interopRequireDefault","require","_dotenv","_emailConfig","_mailTemplate","_mail","_subscriber","_Admin","_jwt","dotenv","config","CRON_SCHEDULE","process","env","SubscriberController","subscribe","req","res","data","Subscribers","register","body","console","log","redirect","headers","success","Jwt","generateToken","SubscriberTemplate","verifyEmailSubscriberTemplate","verificationToken","sendEmail","emailConfig","email","subject","content","status","json","err","UserError","message","verify","token","params","r","query","value","verifyToken","subscribers","findByVerificationToken","error","verified","verifySubscriber","thankYouSubscriberTemplate","firstName","id","send","subscribed","unsubscribe","subscriber","findById","save","uploadNewsletter","getAllSubscribersTrue","product","getProducts","length","forEach","newsletterHeader","newsletterInfo","newsletterContent","newsletterTemplate","dataValues","sendNewsletter","cron","schedule","getAllSubscribers","limit","page","totalCount","getAllSubscribersLog","deleteSubscriber","destroy","deleteSubscriberLog","exports"],"sourceRoot":"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/controllers/","sources":["subscriber.controller.js"],"sourcesContent":["/* eslint-disable require-jsdoc */\n/* eslint-disable import/prefer-default-export */\nimport cron from 'node-cron';\nimport dotenv from 'dotenv';\nimport { emailConfig } from '../helpers/emailConfig';\nimport {\n  verifyEmailSubscriberTemplate,\n  thankYouSubscriberTemplate,\n  newsletterTemplate,\n} from '../helpers/mailTemplate';\nimport { sendEmail } from '../helpers/mail';\nimport Subscribers from '../services/subscriber.services';\nimport { deleteSubscriberLog, getAllSubscribersLog, UserError } from '../loggers/Admin.logger';\nimport { Jwt } from '../helpers/jwt';\n\ndotenv.config();\n\nconst { CRON_SCHEDULE } = process.env;\n\nexport class SubscriberController {\n  static async subscribe(req, res) {\n    try {\n      const { data } = await Subscribers.register(req.body);\n      console.log({ redirect: req.headers.success });\n      const redirect = await Jwt.generateToken({ redirect: req.headers.success });\n      const SubscriberTemplate = verifyEmailSubscriberTemplate(data.verificationToken, redirect);\n      sendEmail(\n        emailConfig({\n          email: data.email,\n          subject: 'Brogrammers NewsLetter Signup',\n          content: SubscriberTemplate,\n        })\n      );\n      res.status(201).json(data);\n    } catch (err) {\n      UserError(req, err);\n      res.status(500).json({\n        message: err.message,\n      });\n    }\n  }\n\n  static async verify(req, res) {\n    try {\n      const { token } = req.params;\n      const { r } = req.query;\n      const { value } = Jwt.verifyToken(r);\n      const { redirect } = value;\n      const subscribers = await Subscribers.findByVerificationToken(token);\n      if (!subscribers) {\n        return res.status(404).json({ error: 'Invalid verification token' });\n      }\n      if (subscribers.verified) {\n        return res.status(400).json({ error: 'Subscriber already verified' });\n      }\n      await Subscribers.verifySubscriber(subscribers);\n      const SubscriberTemplate = thankYouSubscriberTemplate(\n        subscribers.firstName,\n        subscribers.id\n      );\n      sendEmail(\n        emailConfig({\n          email: subscribers.email,\n          subject: 'Brogrammers NewsLetter Signup',\n          content: SubscriberTemplate,\n        })\n      );\n      if (redirect) return res.status(301).redirect(redirect);\n      return res.status(200).send({\n        message: 'Email Subscribed successfully!',\n        subscribed: true,\n      });\n    } catch (err) {\n      UserError(req, err);\n      res.status(500).json({\n        message: err.message,\n      });\n    }\n  }\n\n  static async unsubscribe(req, res) {\n    try {\n      const { id } = req.params;\n      const subscriber = await Subscribers.findById(id);\n      if (subscriber) {\n        subscriber.subscribed = false;\n        await subscriber.save();\n        res.status(200).send({\n          message: 'Unsubscribed successfully!',\n          subscribed: false,\n        });\n      } else {\n        res.status(404).json({ message: 'Subscriber not found' });\n      }\n    } catch (err) {\n      UserError(req, err);\n      res.status(500).json({\n        message: err.message,\n      });\n    }\n  }\n\n  static async uploadNewsletter(res) {\n    try {\n      const subscribers = await Subscribers.getAllSubscribersTrue();\n      const product = await Subscribers.getProducts();\n      if (subscribers.length === 0) {\n        res.status(404).json({\n          message: 'There are no subscribers to send newsletter to',\n        });\n      }\n      subscribers.forEach((subscriber) => {\n        const newsletterHeader = 'New Products Alert!';\n        const newsletterInfo = 'Here are some new products we want to share with you.';\n        const newsletterContent = newsletterTemplate(\n          subscriber.firstName,\n          product[0].dataValues,\n          subscriber.id,\n          newsletterHeader,\n          newsletterInfo\n        );\n        sendEmail(\n          emailConfig({\n            email: subscriber.email,\n            subject: 'New Products Alert!',\n            content: newsletterContent,\n          })\n        );\n      });\n    } catch (err) {\n      res.status(500).json({\n        message: err.message,\n      });\n    }\n  }\n\n  static sendNewsletter(res) {\n    cron.schedule(CRON_SCHEDULE, async () => {\n      try {\n        await SubscriberController.uploadNewsletter();\n      } catch (err) {\n        res.status(500).json({\n          message: err.message,\n        });\n      }\n    });\n  }\n\n  static async getAllSubscribers(req, res) {\n    try {\n      const { limit, page } = req.query;\n      const subscribers = await Subscribers.getAllSubscribers(page, limit);\n      if (subscribers.totalCount === 0) {\n        res.status(200).json({\n          message: 'There are no subscribers',\n          subscribers\n        });\n      } else {\n        getAllSubscribersLog(req, subscribers);\n        res.status(200).json({\n          message: 'All subscribers Retrieved Successfully',\n          subscribers\n        });\n      }\n    } catch (err) {\n      UserError(req, err);\n      res.status(500).json({\n        message: err.message,\n      });\n    }\n  }\n\n  static async deleteSubscriber(req, res) {\n    try {\n      const { id } = req.params;\n      const subscriber = await Subscribers.findById(id);\n      if (subscriber) {\n        await subscriber.destroy();\n        deleteSubscriberLog(req, subscriber);\n        res\n          .status(200)\n          .json({ message: 'Subscriber deleted successfully', subscriber });\n      } else {\n        res.status(404).json({ message: 'Subscriber not found' });\n      }\n    } catch (err) {\n      UserError(req, err);\n      res.status(500).json({\n        message: err.message,\n      });\n    }\n  }\n}\n"],"mappings":"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"}},"mtime":1685643189439},"{\"assumptions\":{},\"sourceRoot\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/services/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"filename\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/services/subscriber.services.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/node_modules/babel-plugin-add-module-exports/lib/index.js\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-runtime\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"regenerator\":true},\"externalDependencies\":[]},{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.21.0:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _models = require(\"../database/models\");\n/* eslint-disable object-curly-newline */\n/* eslint-disable camelcase */\n/* eslint-disable no-unused-vars */\n/* eslint-disable object-shorthand */\n/* eslint-disable require-jsdoc */\n// eslint-disable-next-line import/named\n\n/**\n * class for all user services\n */\nclass Subscribers {\n  /**\n   * function to register user\n   * @param {Object} data the information for user to be created\n   * @returns {data} for the created user\n   */\n  static async register(data) {\n    const {\n      email,\n      firstName,\n      lastName\n    } = data;\n    // eslint-disable-next-line max-len\n    const verificationToken = Math.random().toString(36).substring(2, 15) + Math.random().toString(36).substring(2, 15);\n    const subscribe = await _models.Subscriber.create({\n      firstName,\n      email,\n      lastName,\n      verificationToken\n    });\n    return {\n      data: subscribe\n    };\n  }\n  static async findByVerificationToken(verificationToken) {\n    const subscriber = await _models.Subscriber.findOne({\n      where: {\n        verificationToken\n      }\n    });\n    return subscriber;\n  }\n  static async verifySubscriber(subscriber) {\n    subscriber.subscribed = true;\n    subscriber.verificationToken = null;\n    await subscriber.save();\n  }\n  static async findById(id) {\n    const subscriber = await _models.Subscriber.findOne({\n      where: {\n        id: `${id}`\n      }\n    });\n    return subscriber;\n  }\n  static async getAllSubscribers(pageNumber, limitNumber) {\n    const totalCount = await _models.Subscriber.count();\n    const page = Number(pageNumber) || 1;\n    const limit = Number(limitNumber) || totalCount;\n    const startIndex = (page - 1) * limit;\n    const endIndex = page * limit;\n    const out = {\n      totalCount,\n      totalPages: Math.ceil(totalCount / limit)\n    };\n    if (endIndex < totalCount) {\n      out.next = {\n        page: page + 1,\n        limit\n      };\n    }\n    if (startIndex > 0) {\n      out.previous = {\n        page: page - 1,\n        limit\n      };\n    }\n    const allSubscribers = await _models.Subscriber.findAll({\n      limit,\n      offset: startIndex\n    });\n    return {\n      ...out,\n      results: allSubscribers\n    };\n  }\n  static async getAllSubscribersTrue() {\n    const allSubscribers = await _models.Subscriber.findAll({\n      where: {\n        subscribed: true\n      }\n    });\n    return allSubscribers;\n  }\n  static async getProducts() {\n    const product = await _models.products.findAll({\n      limit: 1,\n      order: [['createdAt', 'DESC']]\n    });\n    return product;\n  }\n}\nexports.default = Subscribers;\nmodule.exports = exports.default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfbW9kZWxzIiwicmVxdWlyZSIsIlN1YnNjcmliZXJzIiwicmVnaXN0ZXIiLCJkYXRhIiwiZW1haWwiLCJmaXJzdE5hbWUiLCJsYXN0TmFtZSIsInZlcmlmaWNhdGlvblRva2VuIiwiTWF0aCIsInJhbmRvbSIsInRvU3RyaW5nIiwic3Vic3RyaW5nIiwic3Vic2NyaWJlIiwiU3Vic2NyaWJlciIsImNyZWF0ZSIsImZpbmRCeVZlcmlmaWNhdGlvblRva2VuIiwic3Vic2NyaWJlciIsImZpbmRPbmUiLCJ3aGVyZSIsInZlcmlmeVN1YnNjcmliZXIiLCJzdWJzY3JpYmVkIiwic2F2ZSIsImZpbmRCeUlkIiwiaWQiLCJnZXRBbGxTdWJzY3JpYmVycyIsInBhZ2VOdW1iZXIiLCJsaW1pdE51bWJlciIsInRvdGFsQ291bnQiLCJjb3VudCIsInBhZ2UiLCJOdW1iZXIiLCJsaW1pdCIsInN0YXJ0SW5kZXgiLCJlbmRJbmRleCIsIm91dCIsInRvdGFsUGFnZXMiLCJjZWlsIiwibmV4dCIsInByZXZpb3VzIiwiYWxsU3Vic2NyaWJlcnMiLCJmaW5kQWxsIiwib2Zmc2V0IiwicmVzdWx0cyIsImdldEFsbFN1YnNjcmliZXJzVHJ1ZSIsImdldFByb2R1Y3RzIiwicHJvZHVjdCIsInByb2R1Y3RzIiwib3JkZXIiLCJleHBvcnRzIiwiZGVmYXVsdCIsIm1vZHVsZSJdLCJzb3VyY2VSb290IjoiL1VzZXJzL2FuZGVsYXJ3YW5kYS9EZXNrdG9wL2UtY29tbS10ZWFtLWJyb2dyYW1tZXJzLWJuL3NyYy9zZXJ2aWNlcy8iLCJzb3VyY2VzIjpbInN1YnNjcmliZXIuc2VydmljZXMuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLyogZXNsaW50LWRpc2FibGUgb2JqZWN0LWN1cmx5LW5ld2xpbmUgKi9cbi8qIGVzbGludC1kaXNhYmxlIGNhbWVsY2FzZSAqL1xuLyogZXNsaW50LWRpc2FibGUgbm8tdW51c2VkLXZhcnMgKi9cbi8qIGVzbGludC1kaXNhYmxlIG9iamVjdC1zaG9ydGhhbmQgKi9cbi8qIGVzbGludC1kaXNhYmxlIHJlcXVpcmUtanNkb2MgKi9cbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBpbXBvcnQvbmFtZWRcbmltcG9ydCB7IFN1YnNjcmliZXIsIHByb2R1Y3RzIH0gZnJvbSAnLi4vZGF0YWJhc2UvbW9kZWxzJztcblxuLyoqXG4gKiBjbGFzcyBmb3IgYWxsIHVzZXIgc2VydmljZXNcbiAqL1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgU3Vic2NyaWJlcnMge1xuICAvKipcbiAgICogZnVuY3Rpb24gdG8gcmVnaXN0ZXIgdXNlclxuICAgKiBAcGFyYW0ge09iamVjdH0gZGF0YSB0aGUgaW5mb3JtYXRpb24gZm9yIHVzZXIgdG8gYmUgY3JlYXRlZFxuICAgKiBAcmV0dXJucyB7ZGF0YX0gZm9yIHRoZSBjcmVhdGVkIHVzZXJcbiAgICovXG4gIHN0YXRpYyBhc3luYyByZWdpc3RlcihkYXRhKSB7XG4gICAgY29uc3QgeyBlbWFpbCwgZmlyc3ROYW1lLCBsYXN0TmFtZSB9ID0gZGF0YTtcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbWF4LWxlblxuICAgIGNvbnN0IHZlcmlmaWNhdGlvblRva2VuID0gTWF0aC5yYW5kb20oKS50b1N0cmluZygzNikuc3Vic3RyaW5nKDIsIDE1KSArIE1hdGgucmFuZG9tKCkudG9TdHJpbmcoMzYpLnN1YnN0cmluZygyLCAxNSk7XG4gICAgY29uc3Qgc3Vic2NyaWJlID0gYXdhaXQgU3Vic2NyaWJlci5jcmVhdGUoe1xuICAgICAgZmlyc3ROYW1lLFxuICAgICAgZW1haWwsXG4gICAgICBsYXN0TmFtZSxcbiAgICAgIHZlcmlmaWNhdGlvblRva2VuXG4gICAgfSk7XG5cbiAgICByZXR1cm4geyBkYXRhOiBzdWJzY3JpYmUgfTtcbiAgfVxuXG4gIHN0YXRpYyBhc3luYyBmaW5kQnlWZXJpZmljYXRpb25Ub2tlbih2ZXJpZmljYXRpb25Ub2tlbikge1xuICAgIGNvbnN0IHN1YnNjcmliZXIgPSBhd2FpdCBTdWJzY3JpYmVyLmZpbmRPbmUoe1xuICAgICAgd2hlcmU6IHtcbiAgICAgICAgdmVyaWZpY2F0aW9uVG9rZW4sXG4gICAgICB9LFxuICAgIH0pO1xuICAgIHJldHVybiBzdWJzY3JpYmVyO1xuICB9XG5cbiAgc3RhdGljIGFzeW5jIHZlcmlmeVN1YnNjcmliZXIoc3Vic2NyaWJlcikge1xuICAgIHN1YnNjcmliZXIuc3Vic2NyaWJlZCA9IHRydWU7XG4gICAgc3Vic2NyaWJlci52ZXJpZmljYXRpb25Ub2tlbiA9IG51bGw7XG4gICAgYXdhaXQgc3Vic2NyaWJlci5zYXZlKCk7XG4gIH1cblxuICBzdGF0aWMgYXN5bmMgZmluZEJ5SWQoaWQpIHtcbiAgICBjb25zdCBzdWJzY3JpYmVyID0gYXdhaXQgU3Vic2NyaWJlci5maW5kT25lKHsgd2hlcmU6IHsgaWQ6IGAke2lkfWAgfSB9KTtcbiAgICByZXR1cm4gc3Vic2NyaWJlcjtcbiAgfVxuXG4gIHN0YXRpYyBhc3luYyBnZXRBbGxTdWJzY3JpYmVycyhwYWdlTnVtYmVyLCBsaW1pdE51bWJlcikge1xuICAgIGNvbnN0IHRvdGFsQ291bnQgPSBhd2FpdCBTdWJzY3JpYmVyLmNvdW50KCk7XG4gICAgY29uc3QgcGFnZSA9IE51bWJlcihwYWdlTnVtYmVyKSB8fCAxO1xuICAgIGNvbnN0IGxpbWl0ID0gTnVtYmVyKGxpbWl0TnVtYmVyKSB8fCB0b3RhbENvdW50O1xuICAgIGNvbnN0IHN0YXJ0SW5kZXggPSAocGFnZSAtIDEpICogbGltaXQ7XG4gICAgY29uc3QgZW5kSW5kZXggPSBwYWdlICogbGltaXQ7XG4gICAgY29uc3Qgb3V0ID0ge1xuICAgICAgdG90YWxDb3VudCxcbiAgICAgIHRvdGFsUGFnZXM6IE1hdGguY2VpbCh0b3RhbENvdW50IC8gbGltaXQpXG4gICAgfTtcbiAgICBpZiAoZW5kSW5kZXggPCB0b3RhbENvdW50KSB7XG4gICAgICBvdXQubmV4dCA9IHtcbiAgICAgICAgcGFnZTogcGFnZSArIDEsXG4gICAgICAgIGxpbWl0LFxuICAgICAgfTtcbiAgICB9XG4gICAgaWYgKHN0YXJ0SW5kZXggPiAwKSB7XG4gICAgICBvdXQucHJldmlvdXMgPSB7XG4gICAgICAgIHBhZ2U6IHBhZ2UgLSAxLFxuICAgICAgICBsaW1pdCxcbiAgICAgIH07XG4gICAgfVxuXG4gICAgY29uc3QgYWxsU3Vic2NyaWJlcnMgPSBhd2FpdCBTdWJzY3JpYmVyLmZpbmRBbGwoe1xuICAgICAgbGltaXQsXG4gICAgICBvZmZzZXQ6IHN0YXJ0SW5kZXgsXG4gICAgfSk7XG4gICAgcmV0dXJuIHsgLi4ub3V0LCByZXN1bHRzOiBhbGxTdWJzY3JpYmVycyB9O1xuICB9XG5cbiAgc3RhdGljIGFzeW5jIGdldEFsbFN1YnNjcmliZXJzVHJ1ZSgpIHtcbiAgICBjb25zdCBhbGxTdWJzY3JpYmVycyA9IGF3YWl0IFN1YnNjcmliZXIuZmluZEFsbCh7XG4gICAgICB3aGVyZToge1xuICAgICAgICBzdWJzY3JpYmVkOiB0cnVlLFxuICAgICAgfSxcbiAgICB9KTtcbiAgICByZXR1cm4gYWxsU3Vic2NyaWJlcnM7XG4gIH1cblxuICBzdGF0aWMgYXN5bmMgZ2V0UHJvZHVjdHMoKSB7XG4gICAgY29uc3QgcHJvZHVjdCA9IGF3YWl0IHByb2R1Y3RzLmZpbmRBbGwoe1xuICAgICAgbGltaXQ6IDEsXG4gICAgICBvcmRlcjogW1snY3JlYXRlZEF0JywgJ0RFU0MnXV0sXG4gICAgfSk7XG4gICAgcmV0dXJuIHByb2R1Y3Q7XG4gIH1cbn1cbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBTUEsSUFBQUEsT0FBQSxHQUFBQyxPQUFBO0FBTkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUdBO0FBQ0E7QUFDQTtBQUNlLE1BQU1DLFdBQVcsQ0FBQztFQUMvQjtBQUNGO0FBQ0E7QUFDQTtBQUNBO0VBQ0UsYUFBYUMsUUFBUUEsQ0FBQ0MsSUFBSSxFQUFFO0lBQzFCLE1BQU07TUFBRUMsS0FBSztNQUFFQyxTQUFTO01BQUVDO0lBQVMsQ0FBQyxHQUFHSCxJQUFJO0lBQzNDO0lBQ0EsTUFBTUksaUJBQWlCLEdBQUdD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","map":{"version":3,"names":["_models","require","Subscribers","register","data","email","firstName","lastName","verificationToken","Math","random","toString","substring","subscribe","Subscriber","create","findByVerificationToken","subscriber","findOne","where","verifySubscriber","subscribed","save","findById","id","getAllSubscribers","pageNumber","limitNumber","totalCount","count","page","Number","limit","startIndex","endIndex","out","totalPages","ceil","next","previous","allSubscribers","findAll","offset","results","getAllSubscribersTrue","getProducts","product","products","order","exports","default","module"],"sourceRoot":"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/services/","sources":["subscriber.services.js"],"sourcesContent":["/* eslint-disable object-curly-newline */\n/* eslint-disable camelcase */\n/* eslint-disable no-unused-vars */\n/* eslint-disable object-shorthand */\n/* eslint-disable require-jsdoc */\n// eslint-disable-next-line import/named\nimport { Subscriber, products } from '../database/models';\n\n/**\n * class for all user services\n */\nexport default class Subscribers {\n  /**\n   * function to register user\n   * @param {Object} data the information for user to be created\n   * @returns {data} for the created user\n   */\n  static async register(data) {\n    const { email, firstName, lastName } = data;\n    // eslint-disable-next-line max-len\n    const verificationToken = Math.random().toString(36).substring(2, 15) + Math.random().toString(36).substring(2, 15);\n    const subscribe = await Subscriber.create({\n      firstName,\n      email,\n      lastName,\n      verificationToken\n    });\n\n    return { data: subscribe };\n  }\n\n  static async findByVerificationToken(verificationToken) {\n    const subscriber = await Subscriber.findOne({\n      where: {\n        verificationToken,\n      },\n    });\n    return subscriber;\n  }\n\n  static async verifySubscriber(subscriber) {\n    subscriber.subscribed = true;\n    subscriber.verificationToken = null;\n    await subscriber.save();\n  }\n\n  static async findById(id) {\n    const subscriber = await Subscriber.findOne({ where: { id: `${id}` } });\n    return subscriber;\n  }\n\n  static async getAllSubscribers(pageNumber, limitNumber) {\n    const totalCount = await Subscriber.count();\n    const page = Number(pageNumber) || 1;\n    const limit = Number(limitNumber) || totalCount;\n    const startIndex = (page - 1) * limit;\n    const endIndex = page * limit;\n    const out = {\n      totalCount,\n      totalPages: Math.ceil(totalCount / limit)\n    };\n    if (endIndex < totalCount) {\n      out.next = {\n        page: page + 1,\n        limit,\n      };\n    }\n    if (startIndex > 0) {\n      out.previous = {\n        page: page - 1,\n        limit,\n      };\n    }\n\n    const allSubscribers = await Subscriber.findAll({\n      limit,\n      offset: startIndex,\n    });\n    return { ...out, results: allSubscribers };\n  }\n\n  static async getAllSubscribersTrue() {\n    const allSubscribers = await Subscriber.findAll({\n      where: {\n        subscribed: true,\n      },\n    });\n    return allSubscribers;\n  }\n\n  static async getProducts() {\n    const product = await products.findAll({\n      limit: 1,\n      order: [['createdAt', 'DESC']],\n    });\n    return product;\n  }\n}\n"],"mappings":"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"}},"mtime":1685643189473},"{\"assumptions\":{},\"sourceRoot\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/middlewares/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"filename\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/middlewares/subscribeValidate.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/node_modules/babel-plugin-add-module-exports/lib/index.js\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-runtime\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"regenerator\":true},\"externalDependencies\":[]},{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.21.0:development":{"value":{"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = subscribeValidate;\nvar _subscribe = _interopRequireDefault(require(\"../validations/subscribe.validation\"));\n/**\n * validation function\n * @param {Object} req\n * @param {Object} res\n * @param {Object} next next to other function\n * @returns {Object} response if error\n */\nasync function subscribeValidate(req, res, next) {\n  const {\n    body\n  } = req;\n  const {\n    error\n  } = await (0, _subscribe.default)(body);\n  if (error) {\n    return res.status(400).json({\n      message: error.message\n    });\n  }\n  next();\n}\nmodule.exports = exports.default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfc3Vic2NyaWJlIiwiX2ludGVyb3BSZXF1aXJlRGVmYXVsdCIsInJlcXVpcmUiLCJzdWJzY3JpYmVWYWxpZGF0ZSIsInJlcSIsInJlcyIsIm5leHQiLCJib2R5IiwiZXJyb3IiLCJzdWJzY3JpYmVWYWxpZGF0aW9uIiwic3RhdHVzIiwianNvbiIsIm1lc3NhZ2UiLCJtb2R1bGUiLCJleHBvcnRzIiwiZGVmYXVsdCJdLCJzb3VyY2VSb290IjoiL1VzZXJzL2FuZGVsYXJ3YW5kYS9EZXNrdG9wL2UtY29tbS10ZWFtLWJyb2dyYW1tZXJzLWJuL3NyYy9taWRkbGV3YXJlcy8iLCJzb3VyY2VzIjpbInN1YnNjcmliZVZhbGlkYXRlLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBzdWJzY3JpYmVWYWxpZGF0aW9uIGZyb20gJy4uL3ZhbGlkYXRpb25zL3N1YnNjcmliZS52YWxpZGF0aW9uJztcblxuLyoqXG4gKiB2YWxpZGF0aW9uIGZ1bmN0aW9uXG4gKiBAcGFyYW0ge09iamVjdH0gcmVxXG4gKiBAcGFyYW0ge09iamVjdH0gcmVzXG4gKiBAcGFyYW0ge09iamVjdH0gbmV4dCBuZXh0IHRvIG90aGVyIGZ1bmN0aW9uXG4gKiBAcmV0dXJucyB7T2JqZWN0fSByZXNwb25zZSBpZiBlcnJvclxuICovXG5leHBvcnQgZGVmYXVsdCBhc3luYyBmdW5jdGlvbiBzdWJzY3JpYmVWYWxpZGF0ZShyZXEsIHJlcywgbmV4dCkge1xuICBjb25zdCB7IGJvZHkgfSA9IHJlcTtcbiAgY29uc3QgeyBlcnJvciB9ID0gYXdhaXQgc3Vic2NyaWJlVmFsaWRhdGlvbihib2R5KTtcbiAgaWYgKGVycm9yKSB7XG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgbWVzc2FnZTogZXJyb3IubWVzc2FnZSB9KTtcbiAgfVxuICBuZXh0KCk7XG59XG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBQSxJQUFBQSxVQUFBLEdBQUFDLHNCQUFBLENBQUFDLE9BQUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNlLGVBQWVDLGlCQUFpQkEsQ0FBQ0MsR0FBRyxFQUFFQyxHQUFHLEVBQUVDLElBQUksRUFBRTtFQUM5RCxNQUFNO0lBQUVDO0VBQUssQ0FBQyxHQUFHSCxHQUFHO0VBQ3BCLE1BQU07SUFBRUk7RUFBTSxDQUFDLEdBQUcsTUFBTSxJQUFBQyxrQkFBbUIsRUFBQ0YsSUFBSSxDQUFDO0VBQ2pELElBQUlDLEtBQUssRUFBRTtJQUNULE9BQU9ILEdBQUcsQ0FBQ0ssTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDQyxJQUFJLENBQUM7TUFBRUMsT0FBTyxFQUFFSixLQUFLLENBQUNJO0lBQVEsQ0FBQyxDQUFDO0VBQ3pEO0VBQ0FOLElBQUksRUFBRTtBQUNSO0FBQUNPLE1BQUEsQ0FBQUMsT0FBQSxHQUFBQSxPQUFBLENBQUFDLE9BQUEifQ==","map":{"version":3,"names":["_subscribe","_interopRequireDefault","require","subscribeValidate","req","res","next","body","error","subscribeValidation","status","json","message","module","exports","default"],"sourceRoot":"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/middlewares/","sources":["subscribeValidate.js"],"sourcesContent":["import subscribeValidation from '../validations/subscribe.validation';\n\n/**\n * validation function\n * @param {Object} req\n * @param {Object} res\n * @param {Object} next next to other function\n * @returns {Object} response if error\n */\nexport default async function subscribeValidate(req, res, next) {\n  const { body } = req;\n  const { error } = await subscribeValidation(body);\n  if (error) {\n    return res.status(400).json({ message: error.message });\n  }\n  next();\n}\n"],"mappings":";;;;;;;AAAA,IAAAA,UAAA,GAAAC,sBAAA,CAAAC,OAAA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACe,eAAeC,iBAAiBA,CAACC,GAAG,EAAEC,GAAG,EAAEC,IAAI,EAAE;EAC9D,MAAM;IAAEC;EAAK,CAAC,GAAGH,GAAG;EACpB,MAAM;IAAEI;EAAM,CAAC,GAAG,MAAM,IAAAC,kBAAmB,EAACF,IAAI,CAAC;EACjD,IAAIC,KAAK,EAAE;IACT,OAAOH,GAAG,CAACK,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;MAAEC,OAAO,EAAEJ,KAAK,CAACI;IAAQ,CAAC,CAAC;EACzD;EACAN,IAAI,EAAE;AACR;AAACO,MAAA,CAAAC,OAAA,GAAAA,OAAA,CAAAC,OAAA"}},"mtime":1682148437953},"{\"assumptions\":{},\"sourceRoot\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/validations/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"filename\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/validations/subscribe.validation.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/node_modules/babel-plugin-add-module-exports/lib/index.js\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-runtime\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"regenerator\":true},\"externalDependencies\":[]},{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.21.0:development":{"value":{"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = subscribeValidation;\nvar _joi = _interopRequireDefault(require(\"joi\"));\n/**\n * validating user info\n * @param {Object} data data to be validated\n * @returns {Schema} output for validation\n */\nfunction subscribeValidation(data) {\n  const subscriberSchema = _joi.default.object({\n    email: _joi.default.string().email().required(),\n    firstName: _joi.default.string().required(),\n    lastName: _joi.default.string().required(),\n    subscribed: _joi.default.boolean(),\n    verificationToken: _joi.default.string()\n  });\n  return subscriberSchema.validate(data, {\n    abortEarly: false\n  });\n}\nmodule.exports = exports.default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfam9pIiwiX2ludGVyb3BSZXF1aXJlRGVmYXVsdCIsInJlcXVpcmUiLCJzdWJzY3JpYmVWYWxpZGF0aW9uIiwiZGF0YSIsInN1YnNjcmliZXJTY2hlbWEiLCJqb2kiLCJvYmplY3QiLCJlbWFpbCIsInN0cmluZyIsInJlcXVpcmVkIiwiZmlyc3ROYW1lIiwibGFzdE5hbWUiLCJzdWJzY3JpYmVkIiwiYm9vbGVhbiIsInZlcmlmaWNhdGlvblRva2VuIiwidmFsaWRhdGUiLCJhYm9ydEVhcmx5IiwibW9kdWxlIiwiZXhwb3J0cyIsImRlZmF1bHQiXSwic291cmNlUm9vdCI6Ii9Vc2Vycy9hbmRlbGFyd2FuZGEvRGVza3RvcC9lLWNvbW0tdGVhbS1icm9ncmFtbWVycy1ibi9zcmMvdmFsaWRhdGlvbnMvIiwic291cmNlcyI6WyJzdWJzY3JpYmUudmFsaWRhdGlvbi5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgam9pIGZyb20gJ2pvaSc7XG5cbi8qKlxuICogdmFsaWRhdGluZyB1c2VyIGluZm9cbiAqIEBwYXJhbSB7T2JqZWN0fSBkYXRhIGRhdGEgdG8gYmUgdmFsaWRhdGVkXG4gKiBAcmV0dXJucyB7U2NoZW1hfSBvdXRwdXQgZm9yIHZhbGlkYXRpb25cbiAqL1xuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gc3Vic2NyaWJlVmFsaWRhdGlvbihkYXRhKSB7XG4gIGNvbnN0IHN1YnNjcmliZXJTY2hlbWEgPSBqb2kub2JqZWN0KHtcbiAgICBlbWFpbDogam9pLnN0cmluZygpLmVtYWlsKCkucmVxdWlyZWQoKSxcbiAgICBmaXJzdE5hbWU6IGpvaS5zdHJpbmcoKS5yZXF1aXJlZCgpLFxuICAgIGxhc3ROYW1lOiBqb2kuc3RyaW5nKCkucmVxdWlyZWQoKSxcbiAgICBzdWJzY3JpYmVkOiBqb2kuYm9vbGVhbigpLFxuICAgIHZlcmlmaWNhdGlvblRva2VuOiBqb2kuc3RyaW5nKCksXG4gIH0pO1xuXG4gIHJldHVybiBzdWJzY3JpYmVyU2NoZW1hLnZhbGlkYXRlKGRhdGEsIHtcbiAgICBhYm9ydEVhcmx5OiBmYWxzZSxcbiAgfSk7XG59XG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBQSxJQUFBQSxJQUFBLEdBQUFDLHNCQUFBLENBQUFDLE9BQUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ2UsU0FBU0MsbUJBQW1CQSxDQUFDQyxJQUFJLEVBQUU7RUFDaEQsTUFBTUMsZ0JBQWdCLEdBQUdDLFlBQUcsQ0FBQ0MsTUFBTSxDQUFDO0lBQ2xDQyxLQUFLLEVBQUVGLFlBQUcsQ0FBQ0csTUFBTSxFQUFFLENBQUNELEtBQUssRUFBRSxDQUFDRSxRQUFRLEVBQUU7SUFDdENDLFNBQVMsRUFBRUwsWUFBRyxDQUFDRyxNQUFNLEVBQUUsQ0FBQ0MsUUFBUSxFQUFFO0lBQ2xDRSxRQUFRLEVBQUVOLFlBQUcsQ0FBQ0csTUFBTSxFQUFFLENBQUNDLFFBQVEsRUFBRTtJQUNqQ0csVUFBVSxFQUFFUCxZQUFHLENBQUNRLE9BQU8sRUFBRTtJQUN6QkMsaUJBQWlCLEVBQUVULFlBQUcsQ0FBQ0csTUFBTTtFQUMvQixDQUFDLENBQUM7RUFFRixPQUFPSixnQkFBZ0IsQ0FBQ1csUUFBUSxDQUFDWixJQUFJLEVBQUU7SUFDckNhLFVBQVUsRUFBRTtFQUNkLENBQUMsQ0FBQztBQUNKO0FBQUNDLE1BQUEsQ0FBQUMsT0FBQSxHQUFBQSxPQUFBLENBQUFDLE9BQUEifQ==","map":{"version":3,"names":["_joi","_interopRequireDefault","require","subscribeValidation","data","subscriberSchema","joi","object","email","string","required","firstName","lastName","subscribed","boolean","verificationToken","validate","abortEarly","module","exports","default"],"sourceRoot":"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/validations/","sources":["subscribe.validation.js"],"sourcesContent":["import joi from 'joi';\n\n/**\n * validating user info\n * @param {Object} data data to be validated\n * @returns {Schema} output for validation\n */\nexport default function subscribeValidation(data) {\n  const subscriberSchema = joi.object({\n    email: joi.string().email().required(),\n    firstName: joi.string().required(),\n    lastName: joi.string().required(),\n    subscribed: joi.boolean(),\n    verificationToken: joi.string(),\n  });\n\n  return subscriberSchema.validate(data, {\n    abortEarly: false,\n  });\n}\n"],"mappings":";;;;;;;AAAA,IAAAA,IAAA,GAAAC,sBAAA,CAAAC,OAAA;AAEA;AACA;AACA;AACA;AACA;AACe,SAASC,mBAAmBA,CAACC,IAAI,EAAE;EAChD,MAAMC,gBAAgB,GAAGC,YAAG,CAACC,MAAM,CAAC;IAClCC,KAAK,EAAEF,YAAG,CAACG,MAAM,EAAE,CAACD,KAAK,EAAE,CAACE,QAAQ,EAAE;IACtCC,SAAS,EAAEL,YAAG,CAACG,MAAM,EAAE,CAACC,QAAQ,EAAE;IAClCE,QAAQ,EAAEN,YAAG,CAACG,MAAM,EAAE,CAACC,QAAQ,EAAE;IACjCG,UAAU,EAAEP,YAAG,CAACQ,OAAO,EAAE;IACzBC,iBAAiB,EAAET,YAAG,CAACG,MAAM;EAC/B,CAAC,CAAC;EAEF,OAAOJ,gBAAgB,CAACW,QAAQ,CAACZ,IAAI,EAAE;IACrCa,UAAU,EAAE;EACd,CAAC,CAAC;AACJ;AAACC,MAAA,CAAAC,OAAA,GAAAA,OAAA,CAAAC,OAAA"}},"mtime":1682148437968},"{\"assumptions\":{},\"sourceRoot\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/configs/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"filename\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/configs/swagger.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/node_modules/babel-plugin-add-module-exports/lib/index.js\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-runtime\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"regenerator\":true},\"externalDependencies\":[]},{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.21.0:development":{"value":{"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _swaggerJsdoc = _interopRequireDefault(require(\"swagger-jsdoc\"));\nvar _dotenv = _interopRequireDefault(require(\"dotenv\"));\n/* eslint-disable import/no-extraneous-dependencies */\n\n_dotenv.default.config();\nconst swaggerServer = process.env.SWAGGER_SERVER;\nconst options = {\n  definition: {\n    openapi: '3.0.1',\n    info: {\n      title: 'Brogrammers E-COMMERCE PROJECT',\n      version: '1.0.0',\n      description: 'ATLP Rwanda, Brogrammers team, E-commerce project'\n    },\n    servers: [{\n      url: swaggerServer\n    }],\n    components: {\n      securitySchemes: {\n        google_auth: {\n          type: 'oauth2',\n          flows: {\n            authorizationCode: {\n              authorizationUrl: process.env.GOOGLE_SERVER\n            }\n          }\n        },\n        bearerAuth: {\n          type: 'http',\n          scheme: 'bearer',\n          bearerFormat: 'JWT'\n        }\n      }\n    }\n  },\n  apis: ['./src/docs/*.js', './src/docs/*.yml']\n};\nconst swagger = (0, _swaggerJsdoc.default)(options);\nvar _default = swagger;\nexports.default = _default;\nmodule.exports = exports.default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfc3dhZ2dlckpzZG9jIiwiX2ludGVyb3BSZXF1aXJlRGVmYXVsdCIsInJlcXVpcmUiLCJfZG90ZW52IiwiZW52IiwiY29uZmlnIiwic3dhZ2dlclNlcnZlciIsInByb2Nlc3MiLCJTV0FHR0VSX1NFUlZFUiIsIm9wdGlvbnMiLCJkZWZpbml0aW9uIiwib3BlbmFwaSIsImluZm8iLCJ0aXRsZSIsInZlcnNpb24iLCJkZXNjcmlwdGlvbiIsInNlcnZlcnMiLCJ1cmwiLCJjb21wb25lbnRzIiwic2VjdXJpdHlTY2hlbWVzIiwiZ29vZ2xlX2F1dGgiLCJ0eXBlIiwiZmxvd3MiLCJhdXRob3JpemF0aW9uQ29kZSIsImF1dGhvcml6YXRpb25VcmwiLCJHT09HTEVfU0VSVkVSIiwiYmVhcmVyQXV0aCIsInNjaGVtZSIsImJlYXJlckZvcm1hdCIsImFwaXMiLCJzd2FnZ2VyIiwic3dhZ2dlckpTRG9jIiwiX2RlZmF1bHQiLCJleHBvcnRzIiwiZGVmYXVsdCIsIm1vZHVsZSJdLCJzb3VyY2VSb290IjoiL1VzZXJzL2FuZGVsYXJ3YW5kYS9EZXNrdG9wL2UtY29tbS10ZWFtLWJyb2dyYW1tZXJzLWJuL3NyYy9jb25maWdzLyIsInNvdXJjZXMiOlsic3dhZ2dlci5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKiBlc2xpbnQtZGlzYWJsZSBpbXBvcnQvbm8tZXh0cmFuZW91cy1kZXBlbmRlbmNpZXMgKi9cbmltcG9ydCBzd2FnZ2VySlNEb2MgZnJvbSAnc3dhZ2dlci1qc2RvYyc7XG5pbXBvcnQgZW52IGZyb20gJ2RvdGVudic7XG5cbmVudi5jb25maWcoKTtcblxuY29uc3Qgc3dhZ2dlclNlcnZlciA9IHByb2Nlc3MuZW52LlNXQUdHRVJfU0VSVkVSO1xuXG5jb25zdCBvcHRpb25zID0ge1xuICBkZWZpbml0aW9uOiB7XG4gICAgb3BlbmFwaTogJzMuMC4xJyxcbiAgICBpbmZvOiB7XG4gICAgICB0aXRsZTogJ0Jyb2dyYW1tZXJzIEUtQ09NTUVSQ0UgUFJPSkVDVCcsXG4gICAgICB2ZXJzaW9uOiAnMS4wLjAnLFxuICAgICAgZGVzY3JpcHRpb246ICdBVExQIFJ3YW5kYSwgQnJvZ3JhbW1lcnMgdGVhbSwgRS1jb21tZXJjZSBwcm9qZWN0JyxcbiAgICB9LFxuICAgIHNlcnZlcnM6IFt7IHVybDogc3dhZ2dlclNlcnZlciB9XSxcbiAgICBjb21wb25lbnRzOiB7XG4gICAgICBzZWN1cml0eVNjaGVtZXM6IHtcbiAgICAgICAgZ29vZ2xlX2F1dGg6IHtcbiAgICAgICAgICB0eXBlOiAnb2F1dGgyJyxcbiAgICAgICAgICBmbG93czoge1xuICAgICAgICAgICAgYXV0aG9yaXphdGlvbkNvZGU6IHtcbiAgICAgICAgICAgICAgYXV0aG9yaXphdGlvblVybDogcHJvY2Vzcy5lbnYuR09PR0xFX1NFUlZFUixcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgfSxcbiAgICAgICAgfSxcbiAgICAgICAgYmVhcmVyQXV0aDoge1xuICAgICAgICAgIHR5cGU6ICdodHRwJyxcbiAgICAgICAgICBzY2hlbWU6ICdiZWFyZXInLFxuICAgICAgICAgIGJlYXJlckZvcm1hdDogJ0pXVCcsXG4gICAgICAgIH0sXG4gICAgICB9LFxuICAgIH0sXG4gIH0sXG4gIGFwaXM6IFsnLi9zcmMvZG9jcy8qLmpzJywgJy4vc3JjL2RvY3MvKi55bWwnXSxcbn07XG5cbmNvbnN0IHN3YWdnZXIgPSBzd2FnZ2VySlNEb2Mob3B0aW9ucyk7XG5cbmV4cG9ydCBkZWZhdWx0IHN3YWdnZXI7XG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFDQSxJQUFBQSxhQUFBLEdBQUFDLHNCQUFBLENBQUFDLE9BQUE7QUFDQSxJQUFBQyxPQUFBLEdBQUFGLHNCQUFBLENBQUFDLE9BQUE7QUFGQTs7QUFJQUUsZUFBRyxDQUFDQyxNQUFNLEVBQUU7QUFFWixNQUFNQyxhQUFhLEdBQUdDLE9BQU8sQ0FBQ0gsR0FBRyxDQUFDSSxjQUFjO0FBRWhELE1BQU1DLE9BQU8sR0FBRztFQUNkQyxVQUFVLEVBQUU7SUFDVkMsT0FBTyxFQUFFLE9BQU87SUFDaEJDLElBQUksRUFBRTtNQUNKQyxLQUFLLEVBQUUsZ0NBQWdDO01BQ3ZDQyxPQUFPLEVBQUUsT0FBTztNQUNoQkMsV0FBVyxFQUFFO0lBQ2YsQ0FBQztJQUNEQyxPQUFPLEVBQUUsQ0FBQztNQUFFQyxHQUFHLEVBQUVYO0lBQWMsQ0FBQyxDQUFDO0lBQ2pDWSxVQUFVLEVBQUU7TUFDVkMsZUFBZSxFQUFFO1FBQ2ZDLFdBQVcsRUFBRTtVQUNYQyxJQUFJLEVBQUUsUUFBUTtVQUNkQyxLQUFLLEVBQUU7WUFDTEMsaUJBQWlCLEVBQUU7Y0FDakJDLGdCQUFnQixFQUFFakIsT0FBTyxDQUFDSCxHQUFHLENBQUNxQjtZQUNoQztVQUNGO1FBQ0YsQ0FBQztRQUNEQyxVQUFVLEVBQUU7VUFDVkwsSUFBSSxFQUFFLE1BQU07VUFDWk0sTUFBTSxFQUFFLFFBQVE7VUFDaEJDLFlBQVksRUFBRTtRQUNoQjtNQUNGO0lBQ0Y7RUFDRixDQUFDO0VBQ0RDLElBQUksRUFBRSxDQUFDLGlCQUFpQixFQUFFLGtCQUFrQjtBQUM5QyxDQUFDO0FBRUQsTUFBTUMsT0FBTyxHQUFHLElBQUFDLHFCQUFZLEVBQUN0QixPQUFPLENBQUM7QUFBQyxJQUFBdUIsUUFBQSxHQUV2QkYsT0FBTztBQUFBRyxPQUFBLENBQUFDLE9BQUEsR0FBQUYsUUFBQTtBQUFBRyxNQUFBLENBQUFGLE9BQUEsR0FBQUEsT0FBQSxDQUFBQyxPQUFBIn0=","map":{"version":3,"names":["_swaggerJsdoc","_interopRequireDefault","require","_dotenv","env","config","swaggerServer","process","SWAGGER_SERVER","options","definition","openapi","info","title","version","description","servers","url","components","securitySchemes","google_auth","type","flows","authorizationCode","authorizationUrl","GOOGLE_SERVER","bearerAuth","scheme","bearerFormat","apis","swagger","swaggerJSDoc","_default","exports","default","module"],"sourceRoot":"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/configs/","sources":["swagger.js"],"sourcesContent":["/* eslint-disable import/no-extraneous-dependencies */\nimport swaggerJSDoc from 'swagger-jsdoc';\nimport env from 'dotenv';\n\nenv.config();\n\nconst swaggerServer = process.env.SWAGGER_SERVER;\n\nconst options = {\n  definition: {\n    openapi: '3.0.1',\n    info: {\n      title: 'Brogrammers E-COMMERCE PROJECT',\n      version: '1.0.0',\n      description: 'ATLP Rwanda, Brogrammers team, E-commerce project',\n    },\n    servers: [{ url: swaggerServer }],\n    components: {\n      securitySchemes: {\n        google_auth: {\n          type: 'oauth2',\n          flows: {\n            authorizationCode: {\n              authorizationUrl: process.env.GOOGLE_SERVER,\n            },\n          },\n        },\n        bearerAuth: {\n          type: 'http',\n          scheme: 'bearer',\n          bearerFormat: 'JWT',\n        },\n      },\n    },\n  },\n  apis: ['./src/docs/*.js', './src/docs/*.yml'],\n};\n\nconst swagger = swaggerJSDoc(options);\n\nexport default swagger;\n"],"mappings":";;;;;;;AACA,IAAAA,aAAA,GAAAC,sBAAA,CAAAC,OAAA;AACA,IAAAC,OAAA,GAAAF,sBAAA,CAAAC,OAAA;AAFA;;AAIAE,eAAG,CAACC,MAAM,EAAE;AAEZ,MAAMC,aAAa,GAAGC,OAAO,CAACH,GAAG,CAACI,cAAc;AAEhD,MAAMC,OAAO,GAAG;EACdC,UAAU,EAAE;IACVC,OAAO,EAAE,OAAO;IAChBC,IAAI,EAAE;MACJC,KAAK,EAAE,gCAAgC;MACvCC,OAAO,EAAE,OAAO;MAChBC,WAAW,EAAE;IACf,CAAC;IACDC,OAAO,EAAE,CAAC;MAAEC,GAAG,EAAEX;IAAc,CAAC,CAAC;IACjCY,UAAU,EAAE;MACVC,eAAe,EAAE;QACfC,WAAW,EAAE;UACXC,IAAI,EAAE,QAAQ;UACdC,KAAK,EAAE;YACLC,iBAAiB,EAAE;cACjBC,gBAAgB,EAAEjB,OAAO,CAACH,GAAG,CAACqB;YAChC;UACF;QACF,CAAC;QACDC,UAAU,EAAE;UACVL,IAAI,EAAE,MAAM;UACZM,MAAM,EAAE,QAAQ;UAChBC,YAAY,EAAE;QAChB;MACF;IACF;EACF,CAAC;EACDC,IAAI,EAAE,CAAC,iBAAiB,EAAE,kBAAkB;AAC9C,CAAC;AAED,MAAMC,OAAO,GAAG,IAAAC,qBAAY,EAACtB,OAAO,CAAC;AAAC,IAAAuB,QAAA,GAEvBF,OAAO;AAAAG,OAAA,CAAAC,OAAA,GAAAF,QAAA;AAAAG,MAAA,CAAAF,OAAA,GAAAA,OAAA,CAAAC,OAAA"}},"mtime":1682148437920},"{\"assumptions\":{},\"sourceRoot\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/middlewares/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"filename\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/middlewares/passwordExpiration.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/node_modules/babel-plugin-add-module-exports/lib/index.js\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-runtime\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"regenerator\":true},\"externalDependencies\":[]},{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.21.0:development":{"value":{"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _cron = require(\"cron\");\nvar _moment = _interopRequireDefault(require(\"moment\"));\nvar _eventEmitter = _interopRequireDefault(require(\"../helpers/eventEmitter\"));\nvar _models = _interopRequireDefault(require(\"../database/models\"));\nvar _mailTemplate = require(\"../helpers/mailTemplate\");\nvar _emailConfig = require(\"../helpers/emailConfig\");\nvar _mail = require(\"../helpers/mail\");\n/* eslint-disable no-unused-vars */\n/* eslint-disable import/no-extraneous-dependencies */\n// eslint-disable-next-line import/no-unresolved\n\nconst passwordExpirationTime = process.env.PASSWORD_EXPIRATION_TIME || 60 * 24;\nconst sendPasswordUpdateEmail = user => {\n  const emailContent = (0, _mailTemplate.changePasswordTemplate)(user, passwordExpirationTime);\n  (0, _mail.sendEmail)((0, _emailConfig.emailConfig)({\n    email: user.email,\n    subject: 'Password update required',\n    content: emailContent\n  }));\n};\nconst sendPasswordExpredEmail = user => {\n  const emailContents = (0, _mailTemplate.expiredPasswordTemplate)(user);\n  (0, _mail.sendEmail)((0, _emailConfig.emailConfig)({\n    email: user.email,\n    subject: 'Your Password has Expired',\n    content: emailContents\n  }));\n};\nconst hasPasswordExpired = user => {\n  if (!user.lastTimePasswordUpdated) {\n    return true;\n  }\n  const lastPasswordUpdateTime = (0, _moment.default)(user.lastTimePasswordUpdated);\n  const passwordExpirationTimeInMs = passwordExpirationTime * 60 * 1000;\n  const now = (0, _moment.default)();\n  return now.diff(lastPasswordUpdateTime, 'milliseconds') > passwordExpirationTimeInMs;\n};\nconst updateUserMustUpdatePasswordField = (user, mustUpdatePassword) => {\n  user.mustUpdatePassword = mustUpdatePassword;\n  user.save();\n};\nconst promptPasswordUpdate = user => {\n  updateUserMustUpdatePasswordField(user, true);\n  if (hasPasswordExpired(user)) {\n    sendPasswordExpredEmail(user);\n  } else {\n    sendPasswordUpdateEmail(user);\n  }\n};\n\n// eslint-disable-next-line arrow-body-style\nconst hasUserIgnoredPasswordUpdatePrompt = user => {\n  return user.mustUpdatePassword === true && hasPasswordExpired(user);\n};\nconst checkPasswordExpirationCronJob = new _cron.CronJob(process.env.CRON, async (req, res) => {\n  try {\n    const usersk = await _models.default.users.findAll();\n    usersk.forEach(async user => {\n      if (hasPasswordExpired(user)) {\n        promptPasswordUpdate(user);\n      } else if (hasUserIgnoredPasswordUpdatePrompt(user)) {\n        updateUserMustUpdatePasswordField(user, false);\n      }\n    });\n  } catch (error) {\n    return res.status(500).json({\n      error: error.message,\n      message: 'Error checking password expiration'\n    });\n  }\n});\n_eventEmitter.default.on('passwordUpdated', user => {\n  updateUserMustUpdatePasswordField(user, false);\n});\nvar _default = checkPasswordExpirationCronJob;\nexports.default = _default;\nmodule.exports = exports.default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfY3JvbiIsInJlcXVpcmUiLCJfbW9tZW50IiwiX2ludGVyb3BSZXF1aXJlRGVmYXVsdCIsIl9ldmVudEVtaXR0ZXIiLCJfbW9kZWxzIiwiX21haWxUZW1wbGF0ZSIsIl9lbWFpbENvbmZpZyIsIl9tYWlsIiwicGFzc3dvcmRFeHBpcmF0aW9uVGltZSIsInByb2Nlc3MiLCJlbnYiLCJQQVNTV09SRF9FWFBJUkFUSU9OX1RJTUUiLCJzZW5kUGFzc3dvcmRVcGRhdGVFbWFpbCIsInVzZXIiLCJlbWFpbENvbnRlbnQiLCJjaGFuZ2VQYXNzd29yZFRlbXBsYXRlIiwic2VuZEVtYWlsIiwiZW1haWxDb25maWciLCJlbWFpbCIsInN1YmplY3QiLCJjb250ZW50Iiwic2VuZFBhc3N3b3JkRXhwcmVkRW1haWwiLCJlbWFpbENvbnRlbnRzIiwiZXhwaXJlZFBhc3N3b3JkVGVtcGxhdGUiLCJoYXNQYXNzd29yZEV4cGlyZWQiLCJsYXN0VGltZVBhc3N3b3JkVXBkYXRlZCIsImxhc3RQYXNzd29yZFVwZGF0ZVRpbWUiLCJtb21lbnQiLCJwYXNzd29yZEV4cGlyYXRpb25UaW1lSW5NcyIsIm5vdyIsImRpZmYiLCJ1cGRhdGVVc2VyTXVzdFVwZGF0ZVBhc3N3b3JkRmllbGQiLCJtdXN0VXBkYXRlUGFzc3dvcmQiLCJzYXZlIiwicHJvbXB0UGFzc3dvcmRVcGRhdGUiLCJoYXNVc2VySWdub3JlZFBhc3N3b3JkVXBkYXRlUHJvbXB0IiwiY2hlY2tQYXNzd29yZEV4cGlyYXRpb25Dcm9uSm9iIiwiQ3JvbkpvYiIsIkNST04iLCJyZXEiLCJyZXMiLCJ1c2Vyc2siLCJkYiIsInVzZXJzIiwiZmluZEFsbCIsImZvckVhY2giLCJlcnJvciIsInN0YXR1cyIsImpzb24iLCJtZXNzYWdlIiwiZXZlbnRFbWl0dGVyIiwib24iLCJfZGVmYXVsdCIsImV4cG9ydHMiLCJkZWZhdWx0IiwibW9kdWxlIl0sInNvdXJjZVJvb3QiOiIvVXNlcnMvYW5kZWxhcndhbmRhL0Rlc2t0b3AvZS1jb21tLXRlYW0tYnJvZ3JhbW1lcnMtYm4vc3JjL21pZGRsZXdhcmVzLyIsInNvdXJjZXMiOlsicGFzc3dvcmRFeHBpcmF0aW9uLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qIGVzbGludC1kaXNhYmxlIG5vLXVudXNlZC12YXJzICovXG4vKiBlc2xpbnQtZGlzYWJsZSBpbXBvcnQvbm8tZXh0cmFuZW91cy1kZXBlbmRlbmNpZXMgKi9cbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBpbXBvcnQvbm8tdW5yZXNvbHZlZFxuaW1wb3J0IHsgQ3JvbkpvYiB9IGZyb20gJ2Nyb24nO1xuaW1wb3J0IG1vbWVudCBmcm9tICdtb21lbnQnO1xuaW1wb3J0IGV2ZW50RW1pdHRlciBmcm9tICcuLi9oZWxwZXJzL2V2ZW50RW1pdHRlcic7XG5pbXBvcnQgZGIgZnJvbSAnLi4vZGF0YWJhc2UvbW9kZWxzJztcbmltcG9ydCB7IGNoYW5nZVBhc3N3b3JkVGVtcGxhdGUsIGV4cGlyZWRQYXNzd29yZFRlbXBsYXRlIH0gZnJvbSAnLi4vaGVscGVycy9tYWlsVGVtcGxhdGUnO1xuaW1wb3J0IHsgZW1haWxDb25maWcgfSBmcm9tICcuLi9oZWxwZXJzL2VtYWlsQ29uZmlnJztcbmltcG9ydCB7IHNlbmRFbWFpbCB9IGZyb20gJy4uL2hlbHBlcnMvbWFpbCc7XG5cbmNvbnN0IHBhc3N3b3JkRXhwaXJhdGlvblRpbWUgPSBwcm9jZXNzLmVudi5QQVNTV09SRF9FWFBJUkFUSU9OX1RJTUUgfHwgNjAgKiAyNDtcblxuY29uc3Qgc2VuZFBhc3N3b3JkVXBkYXRlRW1haWwgPSAodXNlcikgPT4ge1xuICBjb25zdCBlbWFpbENvbnRlbnQgPSBjaGFuZ2VQYXNzd29yZFRlbXBsYXRlKHVzZXIsIHBhc3N3b3JkRXhwaXJhdGlvblRpbWUpO1xuICBzZW5kRW1haWwoXG4gICAgZW1haWxDb25maWcoe1xuICAgICAgZW1haWw6IHVzZXIuZW1haWwsXG4gICAgICBzdWJqZWN0OiAnUGFzc3dvcmQgdXBkYXRlIHJlcXVpcmVkJyxcbiAgICAgIGNvbnRlbnQ6IGVtYWlsQ29udGVudCxcbiAgICB9KVxuICApO1xufTtcbmNvbnN0IHNlbmRQYXNzd29yZEV4cHJlZEVtYWlsID0gKHVzZXIpID0+IHtcbiAgY29uc3QgZW1haWxDb250ZW50cyA9IGV4cGlyZWRQYXNzd29yZFRlbXBsYXRlKHVzZXIpO1xuICBzZW5kRW1haWwoXG4gICAgZW1haWxDb25maWcoe1xuICAgICAgZW1haWw6IHVzZXIuZW1haWwsXG4gICAgICBzdWJqZWN0OiAnWW91ciBQYXNzd29yZCBoYXMgRXhwaXJlZCcsXG4gICAgICBjb250ZW50OiBlbWFpbENvbnRlbnRzLFxuICAgIH0pXG4gICk7XG59O1xuY29uc3QgaGFzUGFzc3dvcmRFeHBpcmVkID0gKHVzZXIpID0+IHtcbiAgaWYgKCF1c2VyLmxhc3RUaW1lUGFzc3dvcmRVcGRhdGVkKSB7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cbiAgY29uc3QgbGFzdFBhc3N3b3JkVXBkYXRlVGltZSA9IG1vbWVudCh1c2VyLmxhc3RUaW1lUGFzc3dvcmRVcGRhdGVkKTtcbiAgY29uc3QgcGFzc3dvcmRFeHBpcmF0aW9uVGltZUluTXMgPSBwYXNzd29yZEV4cGlyYXRpb25UaW1lICogNjAgKiAxMDAwO1xuICBjb25zdCBub3cgPSBtb21lbnQoKTtcbiAgcmV0dXJuIG5vdy5kaWZmKGxhc3RQYXNzd29yZFVwZGF0ZVRpbWUsICdtaWxsaXNlY29uZHMnKSA+IHBhc3N3b3JkRXhwaXJhdGlvblRpbWVJbk1zO1xufTtcblxuY29uc3QgdXBkYXRlVXNlck11c3RVcGRhdGVQYXNzd29yZEZpZWxkID0gKHVzZXIsIG11c3RVcGRhdGVQYXNzd29yZCkgPT4ge1xuICB1c2VyLm11c3RVcGRhdGVQYXNzd29yZCA9IG11c3RVcGRhdGVQYXNzd29yZDtcbiAgdXNlci5zYXZlKCk7XG59O1xuXG5jb25zdCBwcm9tcHRQYXNzd29yZFVwZGF0ZSA9ICh1c2VyKSA9PiB7XG4gIHVwZGF0ZVVzZXJNdXN0VXBkYXRlUGFzc3dvcmRGaWVsZCh1c2VyLCB0cnVlKTtcbiAgaWYgKGhhc1Bhc3N3b3JkRXhwaXJlZCh1c2VyKSkge1xuICAgIHNlbmRQYXNzd29yZEV4cHJlZEVtYWlsKHVzZXIpO1xuICB9IGVsc2Uge1xuICAgIHNlbmRQYXNzd29yZFVwZGF0ZUVtYWlsKHVzZXIpO1xuICB9XG59O1xuXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgYXJyb3ctYm9keS1zdHlsZVxuY29uc3QgaGFzVXNlcklnbm9yZWRQYXNzd29yZFVwZGF0ZVByb21wdCA9ICh1c2VyKSA9PiB7XG4gIHJldHVybiB1c2VyLm11c3RVcGRhdGVQYXNzd29yZCA9PT0gdHJ1ZSAmJiBoYXNQYXNzd29yZEV4cGlyZWQodXNlcik7XG59O1xuXG5jb25zdCBjaGVja1Bhc3N3b3JkRXhwaXJhdGlvbkNyb25Kb2IgPSBuZXcgQ3JvbkpvYihwcm9jZXNzLmVudi5DUk9OLCBhc3luYyAocmVxLCByZXMpID0+IHtcbiAgdHJ5IHtcbiAgICBjb25zdCB1c2Vyc2sgPSBhd2FpdCBkYi51c2Vycy5maW5kQWxsKCk7XG5cbiAgICB1c2Vyc2suZm9yRWFjaChhc3luYyAodXNlcikgPT4ge1xuICAgICAgaWYgKGhhc1Bhc3N3b3JkRXhwaXJlZCh1c2VyKSkge1xuICAgICAgICBwcm9tcHRQYXNzd29yZFVwZGF0ZSh1c2VyKTtcbiAgICAgIH0gZWxzZSBpZiAoaGFzVXNlcklnbm9yZWRQYXNzd29yZFVwZGF0ZVByb21wdCh1c2VyKSkge1xuICAgICAgICB1cGRhdGVVc2VyTXVzdFVwZGF0ZVBhc3N3b3JkRmllbGQodXNlciwgZmFsc2UpO1xuICAgICAgfVxuICAgIH0pO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIHJldHVybiByZXMuc3RhdHVzKDUwMCkuanNvbih7XG4gICAgICBlcnJvcjogZXJyb3IubWVzc2FnZSxcbiAgICAgIG1lc3NhZ2U6ICdFcnJvciBjaGVja2luZyBwYXNzd29yZCBleHBpcmF0aW9uJyxcbiAgICB9KTtcbiAgfVxufSk7XG5cbmV2ZW50RW1pdHRlci5vbigncGFzc3dvcmRVcGRhdGVkJywgKHVzZXIpID0+IHtcbiAgdXBkYXRlVXNlck11c3RVcGRhdGVQYXNzd29yZEZpZWxkKHVzZXIsIGZhbHNlKTtcbn0pO1xuXG5leHBvcnQgZGVmYXVsdCBjaGVja1Bhc3N3b3JkRXhwaXJhdGlvbkNyb25Kb2I7XG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFHQSxJQUFBQSxLQUFBLEdBQUFDLE9BQUE7QUFDQSxJQUFBQyxPQUFBLEdBQUFDLHNCQUFBLENBQUFGLE9BQUE7QUFDQSxJQUFBRyxhQUFBLEdBQUFELHNCQUFBLENBQUFGLE9BQUE7QUFDQSxJQUFBSSxPQUFBLEdBQUFGLHNCQUFBLENBQUFGLE9BQUE7QUFDQSxJQUFBSyxhQUFBLEdBQUFMLE9BQUE7QUFDQSxJQUFBTSxZQUFBLEdBQUFOLE9BQUE7QUFDQSxJQUFBTyxLQUFBLEdBQUFQLE9BQUE7QUFUQTtBQUNBO0FBQ0E7O0FBU0EsTUFBTVEsc0JBQXNCLEdBQUdDLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDQyx3QkFBd0IsSUFBSSxFQUFFLEdBQUcsRUFBRTtBQUU5RSxNQUFNQyx1QkFBdUIsR0FBSUMsSUFBSSxJQUFLO0VBQ3hDLE1BQU1DLFlBQVksR0FBRyxJQUFBQyxvQ0FBc0IsRUFBQ0YsSUFBSSxFQUFFTCxzQkFBc0IsQ0FBQztFQUN6RSxJQUFBUSxlQUFTLEVBQ1AsSUFBQUMsd0JBQVcsRUFBQztJQUNWQyxLQUFLLEVBQUVMLElBQUksQ0FBQ0ssS0FBSztJQUNqQkMsT0FBTyxFQUFFLDBCQUEwQjtJQUNuQ0MsT0FBTyxFQUFFTjtFQUNYLENBQUMsQ0FBQyxDQUNIO0FBQ0gsQ0FBQztBQUNELE1BQU1PLHVCQUF1QixHQUFJUixJQUFJLElBQUs7RUFDeEMsTUFBTVMsYUFBYSxHQUFHLElBQUFDLHFDQUF1QixFQUFDVixJQUFJLENBQUM7RUFDbkQsSUFBQUcsZUFBUyxFQUNQLElBQUFDLHdCQUFXLEVBQUM7SUFDVkMsS0FBSyxFQUFFTCxJQUFJLENBQUNLLEtBQUs7SUFDakJDLE9BQU8sRUFBRSwyQkFBMkI7SUFDcENDLE9BQU8sRUFB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","map":{"version":3,"names":["_cron","require","_moment","_interopRequireDefault","_eventEmitter","_models","_mailTemplate","_emailConfig","_mail","passwordExpirationTime","process","env","PASSWORD_EXPIRATION_TIME","sendPasswordUpdateEmail","user","emailContent","changePasswordTemplate","sendEmail","emailConfig","email","subject","content","sendPasswordExpredEmail","emailContents","expiredPasswordTemplate","hasPasswordExpired","lastTimePasswordUpdated","lastPasswordUpdateTime","moment","passwordExpirationTimeInMs","now","diff","updateUserMustUpdatePasswordField","mustUpdatePassword","save","promptPasswordUpdate","hasUserIgnoredPasswordUpdatePrompt","checkPasswordExpirationCronJob","CronJob","CRON","req","res","usersk","db","users","findAll","forEach","error","status","json","message","eventEmitter","on","_default","exports","default","module"],"sourceRoot":"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/middlewares/","sources":["passwordExpiration.js"],"sourcesContent":["/* eslint-disable no-unused-vars */\n/* eslint-disable import/no-extraneous-dependencies */\n// eslint-disable-next-line import/no-unresolved\nimport { CronJob } from 'cron';\nimport moment from 'moment';\nimport eventEmitter from '../helpers/eventEmitter';\nimport db from '../database/models';\nimport { changePasswordTemplate, expiredPasswordTemplate } from '../helpers/mailTemplate';\nimport { emailConfig } from '../helpers/emailConfig';\nimport { sendEmail } from '../helpers/mail';\n\nconst passwordExpirationTime = process.env.PASSWORD_EXPIRATION_TIME || 60 * 24;\n\nconst sendPasswordUpdateEmail = (user) => {\n  const emailContent = changePasswordTemplate(user, passwordExpirationTime);\n  sendEmail(\n    emailConfig({\n      email: user.email,\n      subject: 'Password update required',\n      content: emailContent,\n    })\n  );\n};\nconst sendPasswordExpredEmail = (user) => {\n  const emailContents = expiredPasswordTemplate(user);\n  sendEmail(\n    emailConfig({\n      email: user.email,\n      subject: 'Your Password has Expired',\n      content: emailContents,\n    })\n  );\n};\nconst hasPasswordExpired = (user) => {\n  if (!user.lastTimePasswordUpdated) {\n    return true;\n  }\n  const lastPasswordUpdateTime = moment(user.lastTimePasswordUpdated);\n  const passwordExpirationTimeInMs = passwordExpirationTime * 60 * 1000;\n  const now = moment();\n  return now.diff(lastPasswordUpdateTime, 'milliseconds') > passwordExpirationTimeInMs;\n};\n\nconst updateUserMustUpdatePasswordField = (user, mustUpdatePassword) => {\n  user.mustUpdatePassword = mustUpdatePassword;\n  user.save();\n};\n\nconst promptPasswordUpdate = (user) => {\n  updateUserMustUpdatePasswordField(user, true);\n  if (hasPasswordExpired(user)) {\n    sendPasswordExpredEmail(user);\n  } else {\n    sendPasswordUpdateEmail(user);\n  }\n};\n\n// eslint-disable-next-line arrow-body-style\nconst hasUserIgnoredPasswordUpdatePrompt = (user) => {\n  return user.mustUpdatePassword === true && hasPasswordExpired(user);\n};\n\nconst checkPasswordExpirationCronJob = new CronJob(process.env.CRON, async (req, res) => {\n  try {\n    const usersk = await db.users.findAll();\n\n    usersk.forEach(async (user) => {\n      if (hasPasswordExpired(user)) {\n        promptPasswordUpdate(user);\n      } else if (hasUserIgnoredPasswordUpdatePrompt(user)) {\n        updateUserMustUpdatePasswordField(user, false);\n      }\n    });\n  } catch (error) {\n    return res.status(500).json({\n      error: error.message,\n      message: 'Error checking password expiration',\n    });\n  }\n});\n\neventEmitter.on('passwordUpdated', (user) => {\n  updateUserMustUpdatePasswordField(user, false);\n});\n\nexport default checkPasswordExpirationCronJob;\n"],"mappings":"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"}},"mtime":1685643189464},"{\"assumptions\":{},\"sourceRoot\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/middlewares/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"filename\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/middlewares/productExpAll.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/node_modules/babel-plugin-add-module-exports/lib/index.js\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-runtime\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"regenerator\":true},\"externalDependencies\":[]},{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.21.0:development":{"value":{"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = beforeCheckExpiredProduct;\nvar _models = require(\"../database/models\");\nvar _expiredProduct = _interopRequireDefault(require(\"../helpers/expiredProduct\"));\n/* eslint-disable import/named */\n/* eslint-disable require-jsdoc */\n\nasync function beforeCheckExpiredProduct() {\n  try {\n    const allProducts = await _models.products.findAll();\n    allProducts.forEach(async product => {\n      (0, _expiredProduct.default)(product);\n    });\n    return {\n      value: 'checked'\n    };\n  } catch (error) {\n    return {\n      error\n    };\n  }\n}\nmodule.exports = exports.default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfbW9kZWxzIiwicmVxdWlyZSIsIl9leHBpcmVkUHJvZHVjdCIsIl9pbnRlcm9wUmVxdWlyZURlZmF1bHQiLCJiZWZvcmVDaGVja0V4cGlyZWRQcm9kdWN0IiwiYWxsUHJvZHVjdHMiLCJwcm9kdWN0cyIsImZpbmRBbGwiLCJmb3JFYWNoIiwicHJvZHVjdCIsImNoZWNrRXhwaXJlZFByb2R1Y3QiLCJ2YWx1ZSIsImVycm9yIiwibW9kdWxlIiwiZXhwb3J0cyIsImRlZmF1bHQiXSwic291cmNlUm9vdCI6Ii9Vc2Vycy9hbmRlbGFyd2FuZGEvRGVza3RvcC9lLWNvbW0tdGVhbS1icm9ncmFtbWVycy1ibi9zcmMvbWlkZGxld2FyZXMvIiwic291cmNlcyI6WyJwcm9kdWN0RXhwQWxsLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qIGVzbGludC1kaXNhYmxlIGltcG9ydC9uYW1lZCAqL1xuLyogZXNsaW50LWRpc2FibGUgcmVxdWlyZS1qc2RvYyAqL1xuaW1wb3J0IHsgcHJvZHVjdHMgfSBmcm9tICcuLi9kYXRhYmFzZS9tb2RlbHMnO1xuaW1wb3J0IGNoZWNrRXhwaXJlZFByb2R1Y3QgZnJvbSAnLi4vaGVscGVycy9leHBpcmVkUHJvZHVjdCc7XG5cbmV4cG9ydCBkZWZhdWx0IGFzeW5jIGZ1bmN0aW9uIGJlZm9yZUNoZWNrRXhwaXJlZFByb2R1Y3QoKSB7XG4gIHRyeSB7XG4gICAgY29uc3QgYWxsUHJvZHVjdHMgPSBhd2FpdCBwcm9kdWN0cy5maW5kQWxsKCk7XG4gICAgYWxsUHJvZHVjdHMuZm9yRWFjaChhc3luYyAocHJvZHVjdCkgPT4ge1xuICAgICAgY2hlY2tFeHBpcmVkUHJvZHVjdChwcm9kdWN0KTtcbiAgICB9KTtcbiAgICByZXR1cm4geyB2YWx1ZTogJ2NoZWNrZWQnIH07XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgcmV0dXJuIHsgZXJyb3IgfTtcbiAgfVxufVxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBRUEsSUFBQUEsT0FBQSxHQUFBQyxPQUFBO0FBQ0EsSUFBQUMsZUFBQSxHQUFBQyxzQkFBQSxDQUFBRixPQUFBO0FBSEE7QUFDQTs7QUFJZSxlQUFlRyx5QkFBeUJBLENBQUEsRUFBRztFQUN4RCxJQUFJO0lBQ0YsTUFBTUMsV0FBVyxHQUFHLE1BQU1DLGdCQUFRLENBQUNDLE9BQU8sRUFBRTtJQUM1Q0YsV0FBVyxDQUFDRyxPQUFPLENBQUMsTUFBT0MsT0FBTyxJQUFLO01BQ3JDLElBQUFDLHVCQUFtQixFQUFDRCxPQUFPLENBQUM7SUFDOUIsQ0FBQyxDQUFDO0lBQ0YsT0FBTztNQUFFRSxLQUFLLEVBQUU7SUFBVSxDQUFDO0VBQzdCLENBQUMsQ0FBQyxPQUFPQyxLQUFLLEVBQUU7SUFDZCxPQUFPO01BQUVBO0lBQU0sQ0FBQztFQUNsQjtBQUNGO0FBQUNDLE1BQUEsQ0FBQUMsT0FBQSxHQUFBQSxPQUFBLENBQUFDLE9BQUEifQ==","map":{"version":3,"names":["_models","require","_expiredProduct","_interopRequireDefault","beforeCheckExpiredProduct","allProducts","products","findAll","forEach","product","checkExpiredProduct","value","error","module","exports","default"],"sourceRoot":"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/middlewares/","sources":["productExpAll.js"],"sourcesContent":["/* eslint-disable import/named */\n/* eslint-disable require-jsdoc */\nimport { products } from '../database/models';\nimport checkExpiredProduct from '../helpers/expiredProduct';\n\nexport default async function beforeCheckExpiredProduct() {\n  try {\n    const allProducts = await products.findAll();\n    allProducts.forEach(async (product) => {\n      checkExpiredProduct(product);\n    });\n    return { value: 'checked' };\n  } catch (error) {\n    return { error };\n  }\n}\n"],"mappings":";;;;;;;AAEA,IAAAA,OAAA,GAAAC,OAAA;AACA,IAAAC,eAAA,GAAAC,sBAAA,CAAAF,OAAA;AAHA;AACA;;AAIe,eAAeG,yBAAyBA,CAAA,EAAG;EACxD,IAAI;IACF,MAAMC,WAAW,GAAG,MAAMC,gBAAQ,CAACC,OAAO,EAAE;IAC5CF,WAAW,CAACG,OAAO,CAAC,MAAOC,OAAO,IAAK;MACrC,IAAAC,uBAAmB,EAACD,OAAO,CAAC;IAC9B,CAAC,CAAC;IACF,OAAO;MAAEE,KAAK,EAAE;IAAU,CAAC;EAC7B,CAAC,CAAC,OAAOC,KAAK,EAAE;IACd,OAAO;MAAEA;IAAM,CAAC;EAClB;AACF;AAACC,MAAA,CAAAC,OAAA,GAAAA,OAAA,CAAAC,OAAA"}},"mtime":1682148437951},"{\"assumptions\":{},\"sourceRoot\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/pgbackup/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"filename\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/pgbackup/route.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/node_modules/babel-plugin-add-module-exports/lib/index.js\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-runtime\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"regenerator\":true},\"externalDependencies\":[]},{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.21.0:development":{"value":{"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _express = _interopRequireDefault(require(\"express\"));\nvar _fs = _interopRequireDefault(require(\"fs\"));\nvar _backupconfig = _interopRequireDefault(require(\"./backupconfig\"));\nvar _backup = _interopRequireDefault(require(\"./backup.restore\"));\nvar _verifyToken = _interopRequireDefault(require(\"../middlewares/verifyToken\"));\nvar _Checkrole = _interopRequireDefault(require(\"../middlewares/Checkrole\"));\nconst routes = _express.default.Router();\nconst getTime = file => _fs.default.statSync(`${file}`).mtime.getTime();\nconst getFiles = folder => _fs.default.readdirSync(folder).sort((a, b) => getTime(`${folder}/${b}`) - getTime(`${folder}/${a}`));\nroutes.get('/backups', _verifyToken.default, (0, _Checkrole.default)(['admin']), (req, res) => {\n  const backupPath = _backupconfig.default.storage.path;\n  const files = getFiles(backupPath);\n  return res.json({\n    message: 'here is your backups',\n    files\n  });\n});\nroutes.get('/restore', _verifyToken.default, (0, _Checkrole.default)(['admin']), (req, res) => {\n  try {\n    const backupPath = _backupconfig.default.storage.path;\n    const backup = getFiles(backupPath)[0];\n    if (!backup) return res.status(400).json({\n      message: 'no backup exist'\n    });\n    return (0, _backup.default)(backup, () => res.json({\n      message: 'backups restored',\n      backup\n    }), e => res.status(500).json({\n      message: 'restore database fail',\n      error: e\n    }));\n  } catch (error) {\n    return res.status(500).json({\n      message: 'restore database fail'\n    });\n  }\n});\nroutes.get('/restore/:filename', _verifyToken.default, (0, _Checkrole.default)(['admin']), (req, res) => {\n  try {\n    const {\n      filename\n    } = req.params;\n    const backupPath = _backupconfig.default.storage.path;\n    const file = `${backupPath}/${filename}`;\n    if (!_fs.default.existsSync(file)) {\n      return res.status(400).json({\n        message: 'backup don\\'t exist',\n        filename\n      });\n    }\n    return (0, _backup.default)(filename, () => res.json({\n      message: 'backups restored',\n      backup: file\n    }), e => res.status(500).json({\n      message: 'restore database fail',\n      error: e\n    }));\n  } catch (error) {\n    return res.status(500).json({\n      message: 'restore database fail'\n    });\n  }\n});\nvar _default = routes;\nexports.default = _default;\nmodule.exports = exports.default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfZXhwcmVzcyIsIl9pbnRlcm9wUmVxdWlyZURlZmF1bHQiLCJyZXF1aXJlIiwiX2ZzIiwiX2JhY2t1cGNvbmZpZyIsIl9iYWNrdXAiLCJfdmVyaWZ5VG9rZW4iLCJfQ2hlY2tyb2xlIiwicm91dGVzIiwiZXhwcmVzcyIsIlJvdXRlciIsImdldFRpbWUiLCJmaWxlIiwiZnMiLCJzdGF0U3luYyIsIm10aW1lIiwiZ2V0RmlsZXMiLCJmb2xkZXIiLCJyZWFkZGlyU3luYyIsInNvcnQiLCJhIiwiYiIsImdldCIsImlzQXV0aGVudGljYXRlZCIsImNoZWNrUm9sZSIsInJlcSIsInJlcyIsImJhY2t1cFBhdGgiLCJiYWNrdXBjb25maWciLCJzdG9yYWdlIiwicGF0aCIsImZpbGVzIiwianNvbiIsIm1lc3NhZ2UiLCJiYWNrdXAiLCJzdGF0dXMiLCJyZXN0b3JlIiwiZSIsImVycm9yIiwiZmlsZW5hbWUiLCJwYXJhbXMiLCJleGlzdHNTeW5jIiwiX2RlZmF1bHQiLCJleHBvcnRzIiwiZGVmYXVsdCIsIm1vZHVsZSJdLCJzb3VyY2VSb290IjoiL1VzZXJzL2FuZGVsYXJ3YW5kYS9EZXNrdG9wL2UtY29tbS10ZWFtLWJyb2dyYW1tZXJzLWJuL3NyYy9wZ2JhY2t1cC8iLCJzb3VyY2VzIjpbInJvdXRlLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBleHByZXNzIGZyb20gJ2V4cHJlc3MnO1xuaW1wb3J0IGZzIGZyb20gJ2ZzJztcbmltcG9ydCBiYWNrdXBjb25maWcgZnJvbSAnLi9iYWNrdXBjb25maWcnO1xuaW1wb3J0IHJlc3RvcmUgZnJvbSAnLi9iYWNrdXAucmVzdG9yZSc7XG5pbXBvcnQgaXNBdXRoZW50aWNhdGVkIGZyb20gJy4uL21pZGRsZXdhcmVzL3ZlcmlmeVRva2VuJztcbmltcG9ydCBjaGVja1JvbGUgZnJvbSAnLi4vbWlkZGxld2FyZXMvQ2hlY2tyb2xlJztcblxuY29uc3Qgcm91dGVzID0gZXhwcmVzcy5Sb3V0ZXIoKTtcblxuY29uc3QgZ2V0VGltZSA9IChmaWxlKSA9PiBmcy5zdGF0U3luYyhgJHtmaWxlfWApLm10aW1lLmdldFRpbWUoKTtcbmNvbnN0IGdldEZpbGVzID0gKGZvbGRlcikgPT4gKGZzLnJlYWRkaXJTeW5jKGZvbGRlcikpLnNvcnQoKGEsIGIpID0+IGdldFRpbWUoYCR7Zm9sZGVyfS8ke2J9YCkgLSBnZXRUaW1lKGAke2ZvbGRlcn0vJHthfWApKTtcblxucm91dGVzLmdldChcbiAgJy9iYWNrdXBzJyxcbiAgaXNBdXRoZW50aWNhdGVkLFxuICBjaGVja1JvbGUoWydhZG1pbiddKSxcbiAgKHJlcSwgcmVzKSA9PiB7XG4gICAgY29uc3QgYmFja3VwUGF0aCA9IGJhY2t1cGNvbmZpZy5zdG9yYWdlLnBhdGg7XG4gICAgY29uc3QgZmlsZXMgPSBnZXRGaWxlcyhiYWNrdXBQYXRoKTtcbiAgICByZXR1cm4gcmVzLmpzb24oeyBtZXNzYWdlOiAnaGVyZSBpcyB5b3VyIGJhY2t1cHMnLCBmaWxlcyB9KTtcbiAgfVxuKTtcblxucm91dGVzLmdldChcbiAgJy9yZXN0b3JlJyxcbiAgaXNBdXRoZW50aWNhdGVkLFxuICBjaGVja1JvbGUoWydhZG1pbiddKSxcbiAgKHJlcSwgcmVzKSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGJhY2t1cFBhdGggPSBiYWNrdXBjb25maWcuc3RvcmFnZS5wYXRoO1xuICAgICAgY29uc3QgYmFja3VwID0gZ2V0RmlsZXMoYmFja3VwUGF0aClbMF07XG5cbiAgICAgIGlmICghYmFja3VwKSByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBtZXNzYWdlOiAnbm8gYmFja3VwIGV4aXN0JyB9KTtcbiAgICAgIHJldHVybiByZXN0b3JlKFxuICAgICAgICBiYWNrdXAsXG4gICAgICAgICgpID0+IHJlcy5qc29uKHsgbWVzc2FnZTogJ2JhY2t1cHMgcmVzdG9yZWQnLCBiYWNrdXAgfSksXG4gICAgICAgIChlKSA9PiByZXMuc3RhdHVzKDUwMCkuanNvbih7IG1lc3NhZ2U6ICdyZXN0b3JlIGRhdGFiYXNlIGZhaWwnLCBlcnJvcjogZSB9KVxuICAgICAgKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgbWVzc2FnZTogJ3Jlc3RvcmUgZGF0YWJhc2UgZmFpbCcgfSk7XG4gICAgfVxuICB9XG4pO1xuXG5yb3V0ZXMuZ2V0KFxuICAnL3Jlc3RvcmUvOmZpbGVuYW1lJyxcbiAgaXNBdXRoZW50aWNhdGVkLFxuICBjaGVja1JvbGUoWydhZG1pbiddKSxcbiAgKHJlcSwgcmVzKSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHsgZmlsZW5hbWUgfSA9IHJlcS5wYXJhbXM7XG4gICAgICBjb25zdCBiYWNrdXBQYXRoID0gYmFja3VwY29uZmlnLnN0b3JhZ2UucGF0aDtcbiAgICAgIGNvbnN0IGZpbGUgPSBgJHtiYWNrdXBQYXRofS8ke2ZpbGVuYW1lfWA7XG4gICAgICBpZiAoIWZzLmV4aXN0c1N5bmMoZmlsZSkpIHtcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgbWVzc2FnZTogJ2JhY2t1cCBkb25cXCd0IGV4aXN0JywgZmlsZW5hbWUgfSk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiByZXN0b3JlKFxuICAgICAgICBmaWxlbmFtZSxcbiAgICAgICAgKCkgPT4gcmVzLmpzb24oeyBtZXNzYWdlOiAnYmFja3VwcyByZXN0b3JlZCcsIGJhY2t1cDogZmlsZSB9KSxcbiAgICAgICAgKGUpID0+IHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgbWVzc2FnZTogJ3Jlc3RvcmUgZGF0YWJhc2UgZmFpbCcsIGVycm9yOiBlIH0pXG4gICAgICApO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg1MDApLmpzb24oeyBtZXNzYWdlOiAncmVzdG9yZSBkYXRhYmFzZSBmYWlsJyB9KTtcbiAgICB9XG4gIH1cbik7XG5cbmV4cG9ydCBkZWZhdWx0IHJvdXRlcztcbiJdLCJtYXBwaW5ncyI6Ijs7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","map":{"version":3,"names":["_express","_interopRequireDefault","require","_fs","_backupconfig","_backup","_verifyToken","_Checkrole","routes","express","Router","getTime","file","fs","statSync","mtime","getFiles","folder","readdirSync","sort","a","b","get","isAuthenticated","checkRole","req","res","backupPath","backupconfig","storage","path","files","json","message","backup","status","restore","e","error","filename","params","existsSync","_default","exports","default","module"],"sourceRoot":"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/pgbackup/","sources":["route.js"],"sourcesContent":["import express from 'express';\nimport fs from 'fs';\nimport backupconfig from './backupconfig';\nimport restore from './backup.restore';\nimport isAuthenticated from '../middlewares/verifyToken';\nimport checkRole from '../middlewares/Checkrole';\n\nconst routes = express.Router();\n\nconst getTime = (file) => fs.statSync(`${file}`).mtime.getTime();\nconst getFiles = (folder) => (fs.readdirSync(folder)).sort((a, b) => getTime(`${folder}/${b}`) - getTime(`${folder}/${a}`));\n\nroutes.get(\n  '/backups',\n  isAuthenticated,\n  checkRole(['admin']),\n  (req, res) => {\n    const backupPath = backupconfig.storage.path;\n    const files = getFiles(backupPath);\n    return res.json({ message: 'here is your backups', files });\n  }\n);\n\nroutes.get(\n  '/restore',\n  isAuthenticated,\n  checkRole(['admin']),\n  (req, res) => {\n    try {\n      const backupPath = backupconfig.storage.path;\n      const backup = getFiles(backupPath)[0];\n\n      if (!backup) return res.status(400).json({ message: 'no backup exist' });\n      return restore(\n        backup,\n        () => res.json({ message: 'backups restored', backup }),\n        (e) => res.status(500).json({ message: 'restore database fail', error: e })\n      );\n    } catch (error) {\n      return res.status(500).json({ message: 'restore database fail' });\n    }\n  }\n);\n\nroutes.get(\n  '/restore/:filename',\n  isAuthenticated,\n  checkRole(['admin']),\n  (req, res) => {\n    try {\n      const { filename } = req.params;\n      const backupPath = backupconfig.storage.path;\n      const file = `${backupPath}/${filename}`;\n      if (!fs.existsSync(file)) {\n        return res.status(400).json({ message: 'backup don\\'t exist', filename });\n      }\n\n      return restore(\n        filename,\n        () => res.json({ message: 'backups restored', backup: file }),\n        (e) => res.status(500).json({ message: 'restore database fail', error: e })\n      );\n    } catch (error) {\n      return res.status(500).json({ message: 'restore database fail' });\n    }\n  }\n);\n\nexport default routes;\n"],"mappings":"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"}},"mtime":1682148437956},"{\"assumptions\":{},\"sourceRoot\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/pgbackup/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"filename\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/pgbackup/backupconfig.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/node_modules/babel-plugin-add-module-exports/lib/index.js\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-runtime\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"regenerator\":true},\"externalDependencies\":[]},{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.21.0:development":{"value":{"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _dotenv = _interopRequireDefault(require(\"dotenv\"));\n_dotenv.default.config();\nvar _default = {\n  schedule: process.env.DB_BACKUP_CLONE,\n  // daily at midnight\n  retention: 7,\n  // number of backups to keep\n  storage: {\n    type: 'local',\n    // can be 'local' or 'cloud'\n    path: 'backups',\n    // local path for backup files\n    bucket: 'my-bucket',\n    // S3 bucket for cloud storage\n    region: 'us-east-1' // S3 region\n  },\n\n  db: {\n    url: process.env.DATABASE_URL,\n    host: process.env.POSTGRES_HOST,\n    port: process.env.POSTGRES_PORT,\n    database: process.env.POSTGRES_DB,\n    user: process.env.POSTGRES_USER\n  }\n};\nexports.default = _default;\nmodule.exports = exports.default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfZG90ZW52IiwiX2ludGVyb3BSZXF1aXJlRGVmYXVsdCIsInJlcXVpcmUiLCJlbnYiLCJjb25maWciLCJfZGVmYXVsdCIsInNjaGVkdWxlIiwicHJvY2VzcyIsIkRCX0JBQ0tVUF9DTE9ORSIsInJldGVudGlvbiIsInN0b3JhZ2UiLCJ0eXBlIiwicGF0aCIsImJ1Y2tldCIsInJlZ2lvbiIsImRiIiwidXJsIiwiREFUQUJBU0VfVVJMIiwiaG9zdCIsIlBPU1RHUkVTX0hPU1QiLCJwb3J0IiwiUE9TVEdSRVNfUE9SVCIsImRhdGFiYXNlIiwiUE9TVEdSRVNfREIiLCJ1c2VyIiwiUE9TVEdSRVNfVVNFUiIsImV4cG9ydHMiLCJkZWZhdWx0IiwibW9kdWxlIl0sInNvdXJjZVJvb3QiOiIvVXNlcnMvYW5kZWxhcndhbmRhL0Rlc2t0b3AvZS1jb21tLXRlYW0tYnJvZ3JhbW1lcnMtYm4vc3JjL3BnYmFja3VwLyIsInNvdXJjZXMiOlsiYmFja3VwY29uZmlnLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBlbnYgZnJvbSAnZG90ZW52JztcblxuZW52LmNvbmZpZygpO1xuXG5leHBvcnQgZGVmYXVsdCB7XG4gIHNjaGVkdWxlOiBwcm9jZXNzLmVudi5EQl9CQUNLVVBfQ0xPTkUsIC8vIGRhaWx5IGF0IG1pZG5pZ2h0XG4gIHJldGVudGlvbjogNywgLy8gbnVtYmVyIG9mIGJhY2t1cHMgdG8ga2VlcFxuICBzdG9yYWdlOiB7XG4gICAgdHlwZTogJ2xvY2FsJywgLy8gY2FuIGJlICdsb2NhbCcgb3IgJ2Nsb3VkJ1xuICAgIHBhdGg6ICdiYWNrdXBzJywgLy8gbG9jYWwgcGF0aCBmb3IgYmFja3VwIGZpbGVzXG4gICAgYnVja2V0OiAnbXktYnVja2V0JywgLy8gUzMgYnVja2V0IGZvciBjbG91ZCBzdG9yYWdlXG4gICAgcmVnaW9uOiAndXMtZWFzdC0xJywgLy8gUzMgcmVnaW9uXG4gIH0sXG4gIGRiOiB7XG4gICAgdXJsOiBwcm9jZXNzLmVudi5EQVRBQkFTRV9VUkwsXG4gICAgaG9zdDogcHJvY2Vzcy5lbnYuUE9TVEdSRVNfSE9TVCxcbiAgICBwb3J0OiBwcm9jZXNzLmVudi5QT1NUR1JFU19QT1JULFxuICAgIGRhdGFiYXNlOiBwcm9jZXNzLmVudi5QT1NUR1JFU19EQixcbiAgICB1c2VyOiBwcm9jZXNzLmVudi5QT1NUR1JFU19VU0VSLFxuICB9LFxufTtcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBLElBQUFBLE9BQUEsR0FBQUMsc0JBQUEsQ0FBQUMsT0FBQTtBQUVBQyxlQUFHLENBQUNDLE1BQU0sRUFBRTtBQUFDLElBQUFDLFFBQUEsR0FFRTtFQUNiQyxRQUFRLEVBQUVDLE9BQU8sQ0FBQ0osR0FBRyxDQUFDSyxlQUFlO0VBQUU7RUFDdkNDLFNBQVMsRUFBRSxDQUFDO0VBQUU7RUFDZEMsT0FBTyxFQUFFO0lBQ1BDLElBQUksRUFBRSxPQUFPO0lBQUU7SUFDZkMsSUFBSSxFQUFFLFNBQVM7SUFBRTtJQUNqQkMsTUFBTSxFQUFFLFdBQVc7SUFBRTtJQUNyQkMsTUFBTSxFQUFFLFdBQVcsQ0FBRTtFQUN2QixDQUFDOztFQUNEQyxFQUFFLEVBQUU7SUFDRkMsR0FBRyxFQUFFVCxPQUFPLENBQUNKLEdBQUcsQ0FBQ2MsWUFBWTtJQUM3QkMsSUFBSSxFQUFFWCxPQUFPLENBQUNKLEdBQUcsQ0FBQ2dCLGFBQWE7SUFDL0JDLElBQUksRUFBRWIsT0FBTyxDQUFDSixHQUFHLENBQUNrQixhQUFhO0lBQy9CQyxRQUFRLEVBQUVmLE9BQU8sQ0FBQ0osR0FBRyxDQUFDb0IsV0FBVztJQUNqQ0MsSUFBSSxFQUFFakIsT0FBTyxDQUFDSixHQUFHLENBQUNzQjtFQUNwQjtBQUNGLENBQUM7QUFBQUMsT0FBQSxDQUFBQyxPQUFBLEdBQUF0QixRQUFBO0FBQUF1QixNQUFBLENBQUFGLE9BQUEsR0FBQUEsT0FBQSxDQUFBQyxPQUFBIn0=","map":{"version":3,"names":["_dotenv","_interopRequireDefault","require","env","config","_default","schedule","process","DB_BACKUP_CLONE","retention","storage","type","path","bucket","region","db","url","DATABASE_URL","host","POSTGRES_HOST","port","POSTGRES_PORT","database","POSTGRES_DB","user","POSTGRES_USER","exports","default","module"],"sourceRoot":"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/pgbackup/","sources":["backupconfig.js"],"sourcesContent":["import env from 'dotenv';\n\nenv.config();\n\nexport default {\n  schedule: process.env.DB_BACKUP_CLONE, // daily at midnight\n  retention: 7, // number of backups to keep\n  storage: {\n    type: 'local', // can be 'local' or 'cloud'\n    path: 'backups', // local path for backup files\n    bucket: 'my-bucket', // S3 bucket for cloud storage\n    region: 'us-east-1', // S3 region\n  },\n  db: {\n    url: process.env.DATABASE_URL,\n    host: process.env.POSTGRES_HOST,\n    port: process.env.POSTGRES_PORT,\n    database: process.env.POSTGRES_DB,\n    user: process.env.POSTGRES_USER,\n  },\n};\n"],"mappings":";;;;;;;AAAA,IAAAA,OAAA,GAAAC,sBAAA,CAAAC,OAAA;AAEAC,eAAG,CAACC,MAAM,EAAE;AAAC,IAAAC,QAAA,GAEE;EACbC,QAAQ,EAAEC,OAAO,CAACJ,GAAG,CAACK,eAAe;EAAE;EACvCC,SAAS,EAAE,CAAC;EAAE;EACdC,OAAO,EAAE;IACPC,IAAI,EAAE,OAAO;IAAE;IACfC,IAAI,EAAE,SAAS;IAAE;IACjBC,MAAM,EAAE,WAAW;IAAE;IACrBC,MAAM,EAAE,WAAW,CAAE;EACvB,CAAC;;EACDC,EAAE,EAAE;IACFC,GAAG,EAAET,OAAO,CAACJ,GAAG,CAACc,YAAY;IAC7BC,IAAI,EAAEX,OAAO,CAACJ,GAAG,CAACgB,aAAa;IAC/BC,IAAI,EAAEb,OAAO,CAACJ,GAAG,CAACkB,aAAa;IAC/BC,QAAQ,EAAEf,OAAO,CAACJ,GAAG,CAACoB,WAAW;IACjCC,IAAI,EAAEjB,OAAO,CAACJ,GAAG,CAACsB;EACpB;AACF,CAAC;AAAAC,OAAA,CAAAC,OAAA,GAAAtB,QAAA;AAAAuB,MAAA,CAAAF,OAAA,GAAAA,OAAA,CAAAC,OAAA"}},"mtime":1682148437955},"{\"assumptions\":{},\"sourceRoot\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/pgbackup/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"filename\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/pgbackup/backup.restore.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/node_modules/babel-plugin-add-module-exports/lib/index.js\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-runtime\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"regenerator\":true},\"externalDependencies\":[]},{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.21.0:development":{"value":{"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _child_process = require(\"child_process\");\nvar _backupconfig = _interopRequireDefault(require(\"./backupconfig\"));\n/* eslint-disable no-unused-vars */\n\nconst restore = (filename, cb, ecb) => {\n  if (filename) {\n    let cmd;\n    if (_backupconfig.default.db.url && _backupconfig.default.db.url !== null) {\n      cmd = `psql -d ${_backupconfig.default.db.url} < ./${_backupconfig.default.storage.path}/${filename}`;\n    } else {\n      cmd = `psql -h ${_backupconfig.default.db.host} -p ${_backupconfig.default.db.port} -U ${_backupconfig.default.db.user} -d ${_backupconfig.default.db.database} < ./${_backupconfig.default.storage.path}/${filename}`;\n    }\n    (0, _child_process.exec)(cmd, (error, stdout, stderr) => {\n      if (error) {\n        if (ecb) ecb(`Restore failed: ${error.message}`);\n      } else if (cb) cb();\n    });\n  }\n};\nvar _default = restore;\n/**\n * restore a specific backup file\n * in terminal run:\n *   - npm run pgrestore <backup file>\n*/\nexports.default = _default;\nrestore(process.argv.splice(2).join(' '));\nmodule.exports = exports.default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfY2hpbGRfcHJvY2VzcyIsInJlcXVpcmUiLCJfYmFja3VwY29uZmlnIiwiX2ludGVyb3BSZXF1aXJlRGVmYXVsdCIsInJlc3RvcmUiLCJmaWxlbmFtZSIsImNiIiwiZWNiIiwiY21kIiwiY29uZmlnIiwiZGIiLCJ1cmwiLCJzdG9yYWdlIiwicGF0aCIsImhvc3QiLCJwb3J0IiwidXNlciIsImRhdGFiYXNlIiwiZXhlYyIsImVycm9yIiwic3Rkb3V0Iiwic3RkZXJyIiwibWVzc2FnZSIsIl9kZWZhdWx0IiwiZXhwb3J0cyIsImRlZmF1bHQiLCJwcm9jZXNzIiwiYXJndiIsInNwbGljZSIsImpvaW4iLCJtb2R1bGUiXSwic291cmNlUm9vdCI6Ii9Vc2Vycy9hbmRlbGFyd2FuZGEvRGVza3RvcC9lLWNvbW0tdGVhbS1icm9ncmFtbWVycy1ibi9zcmMvcGdiYWNrdXAvIiwic291cmNlcyI6WyJiYWNrdXAucmVzdG9yZS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKiBlc2xpbnQtZGlzYWJsZSBuby11bnVzZWQtdmFycyAqL1xuaW1wb3J0IHsgZXhlYyB9IGZyb20gJ2NoaWxkX3Byb2Nlc3MnO1xuaW1wb3J0IGNvbmZpZyBmcm9tICcuL2JhY2t1cGNvbmZpZyc7XG5cbmNvbnN0IHJlc3RvcmUgPSAoZmlsZW5hbWUsIGNiLCBlY2IpID0+IHtcbiAgaWYgKGZpbGVuYW1lKSB7XG4gICAgbGV0IGNtZDtcbiAgICBpZiAoY29uZmlnLmRiLnVybCAmJiBjb25maWcuZGIudXJsICE9PSBudWxsKSB7XG4gICAgICBjbWQgPSBgcHNxbCAtZCAke2NvbmZpZy5kYi51cmx9IDwgLi8ke2NvbmZpZy5zdG9yYWdlLnBhdGh9LyR7ZmlsZW5hbWV9YDtcbiAgICB9IGVsc2Uge1xuICAgICAgY21kID0gYHBzcWwgLWggJHtjb25maWcuZGIuaG9zdH0gLXAgJHtjb25maWcuZGIucG9ydH0gLVUgJHtjb25maWcuZGIudXNlcn0gLWQgJHtjb25maWcuZGIuZGF0YWJhc2V9IDwgLi8ke2NvbmZpZy5zdG9yYWdlLnBhdGh9LyR7ZmlsZW5hbWV9YDtcbiAgICB9XG5cbiAgICBleGVjKGNtZCwgKGVycm9yLCBzdGRvdXQsIHN0ZGVycikgPT4ge1xuICAgICAgaWYgKGVycm9yKSB7XG4gICAgICAgIGlmIChlY2IpIGVjYihgUmVzdG9yZSBmYWlsZWQ6ICR7ZXJyb3IubWVzc2FnZX1gKTtcbiAgICAgIH0gZWxzZSBpZiAoY2IpIGNiKCk7XG4gICAgfSk7XG4gIH1cbn07XG5cbmV4cG9ydCBkZWZhdWx0IHJlc3RvcmU7XG5cbi8qKlxuICogcmVzdG9yZSBhIHNwZWNpZmljIGJhY2t1cCBmaWxlXG4gKiBpbiB0ZXJtaW5hbCBydW46XG4gKiAgIC0gbnBtIHJ1biBwZ3Jlc3RvcmUgPGJhY2t1cCBmaWxlPlxuKi9cbnJlc3RvcmUocHJvY2Vzcy5hcmd2LnNwbGljZSgyKS5qb2luKCcgJykpO1xuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQ0EsSUFBQUEsY0FBQSxHQUFBQyxPQUFBO0FBQ0EsSUFBQUMsYUFBQSxHQUFBQyxzQkFBQSxDQUFBRixPQUFBO0FBRkE7O0FBSUEsTUFBTUcsT0FBTyxHQUFHQSxDQUFDQyxRQUFRLEVBQUVDLEVBQUUsRUFBRUMsR0FBRyxLQUFLO0VBQ3JDLElBQUlGLFFBQVEsRUFBRTtJQUNaLElBQUlHLEdBQUc7SUFDUCxJQUFJQyxxQkFBTSxDQUFDQyxFQUFFLENBQUNDLEdBQUcsSUFBSUYscUJBQU0sQ0FBQ0MsRUFBRSxDQUFDQyxHQUFHLEtBQUssSUFBSSxFQUFFO01BQzNDSCxHQUFHLEdBQUksV0FBVUMscUJBQU0sQ0FBQ0MsRUFBRSxDQUFDQyxHQUFJLFFBQU9GLHFCQUFNLENBQUNHLE9BQU8sQ0FBQ0MsSUFBSyxJQUFHUixRQUFTLEVBQUM7SUFDekUsQ0FBQyxNQUFNO01BQ0xHLEdBQUcsR0FBSSxXQUFVQyxxQkFBTSxDQUFDQyxFQUFFLENBQUNJLElBQUssT0FBTUwscUJBQU0sQ0FBQ0MsRUFBRSxDQUFDSyxJQUFLLE9BQU1OLHFCQUFNLENBQUNDLEVBQUUsQ0FBQ00sSUFBSyxPQUFNUCxxQkFBTSxDQUFDQyxFQUFFLENBQUNPLFFBQVMsUUFBT1IscUJBQU0sQ0FBQ0csT0FBTyxDQUFDQyxJQUFLLElBQUdSLFFBQVMsRUFBQztJQUM3STtJQUVBLElBQUFhLG1CQUFJLEVBQUNWLEdBQUcsRUFBRSxDQUFDVyxLQUFLLEVBQUVDLE1BQU0sRUFBRUMsTUFBTSxLQUFLO01BQ25DLElBQUlGLEtBQUssRUFBRTtRQUNULElBQUlaLEdBQUcsRUFBRUEsR0FBRyxDQUFFLG1CQUFrQlksS0FBSyxDQUFDRyxPQUFRLEVBQUMsQ0FBQztNQUNsRCxDQUFDLE1BQU0sSUFBSWhCLEVBQUUsRUFBRUEsRUFBRSxFQUFFO0lBQ3JCLENBQUMsQ0FBQztFQUNKO0FBQ0YsQ0FBQztBQUFDLElBQUFpQixRQUFBLEdBRWFuQixPQUFPO0FBRXRCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFKQW9CLE9BQUEsQ0FBQUMsT0FBQSxHQUFBRixRQUFBO0FBS0FuQixPQUFPLENBQUNzQixPQUFPLENBQUNDLElBQUksQ0FBQ0MsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDQyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUM7QUFBQ0MsTUFBQSxDQUFBTixPQUFBLEdBQUFBLE9BQUEsQ0FBQUMsT0FBQSJ9","map":{"version":3,"names":["_child_process","require","_backupconfig","_interopRequireDefault","restore","filename","cb","ecb","cmd","config","db","url","storage","path","host","port","user","database","exec","error","stdout","stderr","message","_default","exports","default","process","argv","splice","join","module"],"sourceRoot":"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/pgbackup/","sources":["backup.restore.js"],"sourcesContent":["/* eslint-disable no-unused-vars */\nimport { exec } from 'child_process';\nimport config from './backupconfig';\n\nconst restore = (filename, cb, ecb) => {\n  if (filename) {\n    let cmd;\n    if (config.db.url && config.db.url !== null) {\n      cmd = `psql -d ${config.db.url} < ./${config.storage.path}/${filename}`;\n    } else {\n      cmd = `psql -h ${config.db.host} -p ${config.db.port} -U ${config.db.user} -d ${config.db.database} < ./${config.storage.path}/${filename}`;\n    }\n\n    exec(cmd, (error, stdout, stderr) => {\n      if (error) {\n        if (ecb) ecb(`Restore failed: ${error.message}`);\n      } else if (cb) cb();\n    });\n  }\n};\n\nexport default restore;\n\n/**\n * restore a specific backup file\n * in terminal run:\n *   - npm run pgrestore <backup file>\n*/\nrestore(process.argv.splice(2).join(' '));\n"],"mappings":";;;;;;;AACA,IAAAA,cAAA,GAAAC,OAAA;AACA,IAAAC,aAAA,GAAAC,sBAAA,CAAAF,OAAA;AAFA;;AAIA,MAAMG,OAAO,GAAGA,CAACC,QAAQ,EAAEC,EAAE,EAAEC,GAAG,KAAK;EACrC,IAAIF,QAAQ,EAAE;IACZ,IAAIG,GAAG;IACP,IAAIC,qBAAM,CAACC,EAAE,CAACC,GAAG,IAAIF,qBAAM,CAACC,EAAE,CAACC,GAAG,KAAK,IAAI,EAAE;MAC3CH,GAAG,GAAI,WAAUC,qBAAM,CAACC,EAAE,CAACC,GAAI,QAAOF,qBAAM,CAACG,OAAO,CAACC,IAAK,IAAGR,QAAS,EAAC;IACzE,CAAC,MAAM;MACLG,GAAG,GAAI,WAAUC,qBAAM,CAACC,EAAE,CAACI,IAAK,OAAML,qBAAM,CAACC,EAAE,CAACK,IAAK,OAAMN,qBAAM,CAACC,EAAE,CAACM,IAAK,OAAMP,qBAAM,CAACC,EAAE,CAACO,QAAS,QAAOR,qBAAM,CAACG,OAAO,CAACC,IAAK,IAAGR,QAAS,EAAC;IAC7I;IAEA,IAAAa,mBAAI,EAACV,GAAG,EAAE,CAACW,KAAK,EAAEC,MAAM,EAAEC,MAAM,KAAK;MACnC,IAAIF,KAAK,EAAE;QACT,IAAIZ,GAAG,EAAEA,GAAG,CAAE,mBAAkBY,KAAK,CAACG,OAAQ,EAAC,CAAC;MAClD,CAAC,MAAM,IAAIhB,EAAE,EAAEA,EAAE,EAAE;IACrB,CAAC,CAAC;EACJ;AACF,CAAC;AAAC,IAAAiB,QAAA,GAEanB,OAAO;AAEtB;AACA;AACA;AACA;AACA;AAJAoB,OAAA,CAAAC,OAAA,GAAAF,QAAA;AAKAnB,OAAO,CAACsB,OAAO,CAACC,IAAI,CAACC,MAAM,CAAC,CAAC,CAAC,CAACC,IAAI,CAAC,GAAG,CAAC,CAAC;AAACC,MAAA,CAAAN,OAAA,GAAAA,OAAA,CAAAC,OAAA"}},"mtime":1682148437955},"{\"assumptions\":{},\"sourceRoot\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/pgbackup/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"filename\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/pgbackup/backup.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/node_modules/babel-plugin-add-module-exports/lib/index.js\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-runtime\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"regenerator\":true},\"externalDependencies\":[]},{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.21.0:development":{"value":{"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nvar _child_process = require(\"child_process\");\nvar _cron = require(\"cron\");\nvar _moment = _interopRequireDefault(require(\"moment\"));\nvar _backupconfig = _interopRequireDefault(require(\"./backupconfig\"));\n/* eslint-disable no-unused-vars */\n\nconst backup = () => {\n  const date = (0, _moment.default)().format('YYYYMMDD-HHmmss');\n  const filename = `${_backupconfig.default.storage.path}/backup-${date}.sql`;\n  let cmd;\n  if (_backupconfig.default.db.url && _backupconfig.default.db.url !== null) {\n    cmd = `pg_dump -d ${_backupconfig.default.db.url} -f ${filename}`;\n  } else {\n    cmd = `pg_dump -h ${_backupconfig.default.db.host} -p ${_backupconfig.default.db.port} -U ${_backupconfig.default.db.user} -F c -b -v -f ${filename} ${_backupconfig.default.db.database}`;\n  }\n  return (0, _child_process.exec)(cmd, (error, stdout, stderr) => {\n    if (error) {\n      console.error(`Backup failed: ${error.message}`);\n    }\n  });\n};\nconst job = new _cron.CronJob(_backupconfig.default.schedule, backup, null, true, 'UTC');\njob.start();\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfY2hpbGRfcHJvY2VzcyIsInJlcXVpcmUiLCJfY3JvbiIsIl9tb21lbnQiLCJfaW50ZXJvcFJlcXVpcmVEZWZhdWx0IiwiX2JhY2t1cGNvbmZpZyIsImJhY2t1cCIsImRhdGUiLCJtb21lbnQiLCJmb3JtYXQiLCJmaWxlbmFtZSIsImNvbmZpZyIsInN0b3JhZ2UiLCJwYXRoIiwiY21kIiwiZGIiLCJ1cmwiLCJob3N0IiwicG9ydCIsInVzZXIiLCJkYXRhYmFzZSIsImV4ZWMiLCJlcnJvciIsInN0ZG91dCIsInN0ZGVyciIsImNvbnNvbGUiLCJtZXNzYWdlIiwiam9iIiwiQ3JvbkpvYiIsInNjaGVkdWxlIiwic3RhcnQiXSwic291cmNlUm9vdCI6Ii9Vc2Vycy9hbmRlbGFyd2FuZGEvRGVza3RvcC9lLWNvbW0tdGVhbS1icm9ncmFtbWVycy1ibi9zcmMvcGdiYWNrdXAvIiwic291cmNlcyI6WyJiYWNrdXAuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLyogZXNsaW50LWRpc2FibGUgbm8tdW51c2VkLXZhcnMgKi9cbmltcG9ydCB7IGV4ZWMgfSBmcm9tICdjaGlsZF9wcm9jZXNzJztcbmltcG9ydCB7IENyb25Kb2IgfSBmcm9tICdjcm9uJztcbmltcG9ydCBtb21lbnQgZnJvbSAnbW9tZW50JztcbmltcG9ydCBjb25maWcgZnJvbSAnLi9iYWNrdXBjb25maWcnO1xuXG5jb25zdCBiYWNrdXAgPSAoKSA9PiB7XG4gIGNvbnN0IGRhdGUgPSBtb21lbnQoKS5mb3JtYXQoJ1lZWVlNTURELUhIbW1zcycpO1xuICBjb25zdCBmaWxlbmFtZSA9IGAke2NvbmZpZy5zdG9yYWdlLnBhdGh9L2JhY2t1cC0ke2RhdGV9LnNxbGA7XG5cbiAgbGV0IGNtZDtcbiAgaWYgKGNvbmZpZy5kYi51cmwgJiYgY29uZmlnLmRiLnVybCAhPT0gbnVsbCkge1xuICAgIGNtZCA9IGBwZ19kdW1wIC1kICR7Y29uZmlnLmRiLnVybH0gLWYgJHtmaWxlbmFtZX1gO1xuICB9IGVsc2Uge1xuICAgIGNtZCA9IGBwZ19kdW1wIC1oICR7Y29uZmlnLmRiLmhvc3R9IC1wICR7Y29uZmlnLmRiLnBvcnR9IC1VICR7Y29uZmlnLmRiLnVzZXJ9IC1GIGMgLWIgLXYgLWYgJHtmaWxlbmFtZX0gJHtjb25maWcuZGIuZGF0YWJhc2V9YDtcbiAgfVxuICByZXR1cm4gZXhlYyhjbWQsIChlcnJvciwgc3Rkb3V0LCBzdGRlcnIpID0+IHtcbiAgICBpZiAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoYEJhY2t1cCBmYWlsZWQ6ICR7ZXJyb3IubWVzc2FnZX1gKTtcbiAgICB9XG4gIH0pO1xufTtcblxuY29uc3Qgam9iID0gbmV3IENyb25Kb2IoY29uZmlnLnNjaGVkdWxlLCBiYWNrdXAsIG51bGwsIHRydWUsICdVVEMnKTtcblxuam9iLnN0YXJ0KCk7XG4iXSwibWFwcGluZ3MiOiI7OztBQUNBLElBQUFBLGNBQUEsR0FBQUMsT0FBQTtBQUNBLElBQUFDLEtBQUEsR0FBQUQsT0FBQTtBQUNBLElBQUFFLE9BQUEsR0FBQUMsc0JBQUEsQ0FBQUgsT0FBQTtBQUNBLElBQUFJLGFBQUEsR0FBQUQsc0JBQUEsQ0FBQUgsT0FBQTtBQUpBOztBQU1BLE1BQU1LLE1BQU0sR0FBR0EsQ0FBQSxLQUFNO0VBQ25CLE1BQU1DLElBQUksR0FBRyxJQUFBQyxlQUFNLEdBQUUsQ0FBQ0MsTUFBTSxDQUFDLGlCQUFpQixDQUFDO0VBQy9DLE1BQU1DLFFBQVEsR0FBSSxHQUFFQyxxQkFBTSxDQUFDQyxPQUFPLENBQUNDLElBQUssV0FBVU4sSUFBSyxNQUFLO0VBRTVELElBQUlPLEdBQUc7RUFDUCxJQUFJSCxxQkFBTSxDQUFDSSxFQUFFLENBQUNDLEdBQUcsSUFBSUwscUJBQU0sQ0FBQ0ksRUFBRSxDQUFDQyxHQUFHLEtBQUssSUFBSSxFQUFFO0lBQzNDRixHQUFHLEdBQUksY0FBYUgscUJBQU0sQ0FBQ0ksRUFBRSxDQUFDQyxHQUFJLE9BQU1OLFFBQVMsRUFBQztFQUNwRCxDQUFDLE1BQU07SUFDTEksR0FBRyxHQUFJLGNBQWFILHFCQUFNLENBQUNJLEVBQUUsQ0FBQ0UsSUFBSyxPQUFNTixxQkFBTSxDQUFDSSxFQUFFLENBQUNHLElBQUssT0FBTVAscUJBQU0sQ0FBQ0ksRUFBRSxDQUFDSSxJQUFLLGtCQUFpQlQsUUFBUyxJQUFHQyxxQkFBTSxDQUFDSSxFQUFFLENBQUNLLFFBQVMsRUFBQztFQUNoSTtFQUNBLE9BQU8sSUFBQUMsbUJBQUksRUFBQ1AsR0FBRyxFQUFFLENBQUNRLEtBQUssRUFBRUMsTUFBTSxFQUFFQyxNQUFNLEtBQUs7SUFDMUMsSUFBSUYsS0FBSyxFQUFFO01BQ1RHLE9BQU8sQ0FBQ0gsS0FBSyxDQUFFLGtCQUFpQkEsS0FBSyxDQUFDSSxPQUFRLEVBQUMsQ0FBQztJQUNsRDtFQUNGLENBQUMsQ0FBQztBQUNKLENBQUM7QUFFRCxNQUFNQyxHQUFHLEdBQUcsSUFBSUMsYUFBTyxDQUFDakIscUJBQU0sQ0FBQ2tCLFFBQVEsRUFBRXZCLE1BQU0sRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLEtBQUssQ0FBQztBQUVuRXFCLEdBQUcsQ0FBQ0csS0FBSyxFQUFFIn0=","map":{"version":3,"names":["_child_process","require","_cron","_moment","_interopRequireDefault","_backupconfig","backup","date","moment","format","filename","config","storage","path","cmd","db","url","host","port","user","database","exec","error","stdout","stderr","console","message","job","CronJob","schedule","start"],"sourceRoot":"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/pgbackup/","sources":["backup.js"],"sourcesContent":["/* eslint-disable no-unused-vars */\nimport { exec } from 'child_process';\nimport { CronJob } from 'cron';\nimport moment from 'moment';\nimport config from './backupconfig';\n\nconst backup = () => {\n  const date = moment().format('YYYYMMDD-HHmmss');\n  const filename = `${config.storage.path}/backup-${date}.sql`;\n\n  let cmd;\n  if (config.db.url && config.db.url !== null) {\n    cmd = `pg_dump -d ${config.db.url} -f ${filename}`;\n  } else {\n    cmd = `pg_dump -h ${config.db.host} -p ${config.db.port} -U ${config.db.user} -F c -b -v -f ${filename} ${config.db.database}`;\n  }\n  return exec(cmd, (error, stdout, stderr) => {\n    if (error) {\n      console.error(`Backup failed: ${error.message}`);\n    }\n  });\n};\n\nconst job = new CronJob(config.schedule, backup, null, true, 'UTC');\n\njob.start();\n"],"mappings":";;;AACA,IAAAA,cAAA,GAAAC,OAAA;AACA,IAAAC,KAAA,GAAAD,OAAA;AACA,IAAAE,OAAA,GAAAC,sBAAA,CAAAH,OAAA;AACA,IAAAI,aAAA,GAAAD,sBAAA,CAAAH,OAAA;AAJA;;AAMA,MAAMK,MAAM,GAAGA,CAAA,KAAM;EACnB,MAAMC,IAAI,GAAG,IAAAC,eAAM,GAAE,CAACC,MAAM,CAAC,iBAAiB,CAAC;EAC/C,MAAMC,QAAQ,GAAI,GAAEC,qBAAM,CAACC,OAAO,CAACC,IAAK,WAAUN,IAAK,MAAK;EAE5D,IAAIO,GAAG;EACP,IAAIH,qBAAM,CAACI,EAAE,CAACC,GAAG,IAAIL,qBAAM,CAACI,EAAE,CAACC,GAAG,KAAK,IAAI,EAAE;IAC3CF,GAAG,GAAI,cAAaH,qBAAM,CAACI,EAAE,CAACC,GAAI,OAAMN,QAAS,EAAC;EACpD,CAAC,MAAM;IACLI,GAAG,GAAI,cAAaH,qBAAM,CAACI,EAAE,CAACE,IAAK,OAAMN,qBAAM,CAACI,EAAE,CAACG,IAAK,OAAMP,qBAAM,CAACI,EAAE,CAACI,IAAK,kBAAiBT,QAAS,IAAGC,qBAAM,CAACI,EAAE,CAACK,QAAS,EAAC;EAChI;EACA,OAAO,IAAAC,mBAAI,EAACP,GAAG,EAAE,CAACQ,KAAK,EAAEC,MAAM,EAAEC,MAAM,KAAK;IAC1C,IAAIF,KAAK,EAAE;MACTG,OAAO,CAACH,KAAK,CAAE,kBAAiBA,KAAK,CAACI,OAAQ,EAAC,CAAC;IAClD;EACF,CAAC,CAAC;AACJ,CAAC;AAED,MAAMC,GAAG,GAAG,IAAIC,aAAO,CAACjB,qBAAM,CAACkB,QAAQ,EAAEvB,MAAM,EAAE,IAAI,EAAE,IAAI,EAAE,KAAK,CAAC;AAEnEqB,GAAG,CAACG,KAAK,EAAE"}},"mtime":1682148437955},"{\"assumptions\":{},\"sourceRoot\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/database/models/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"filename\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/database/models/index.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/node_modules/babel-plugin-add-module-exports/lib/index.js\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-runtime\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"regenerator\":true},\"externalDependencies\":[]},{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.21.0:development":{"value":{"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _fs = _interopRequireDefault(require(\"fs\"));\nvar _path = _interopRequireDefault(require(\"path\"));\nvar _sequelize = _interopRequireDefault(require(\"sequelize\"));\nvar _process = _interopRequireDefault(require(\"process\"));\nvar _config = _interopRequireDefault(require(\"../config/config\"));\nconst basename = _path.default.basename(__filename);\nconst env = _process.default.env.NODE_ENV || 'development';\nconst config = _config.default[env];\nconst db = {};\nlet sequelize;\nif (config.use_env_variable) {\n  sequelize = new _sequelize.default(_process.default.env[config.use_env_variable], config);\n} else if (config.url) {\n  sequelize = new _sequelize.default(config.url, config);\n} else {\n  sequelize = new _sequelize.default(config.database, config.username, config.password, config);\n}\n_fs.default.readdirSync(__dirname).filter(file => file.indexOf('.') !== 0 && file !== basename && file.slice(-3) === '.js' && file.indexOf('.test.js') === -1).forEach(file => {\n  // eslint-disable-next-line global-require, import/no-dynamic-require\n  const model = require(_path.default.join(__dirname, file))(sequelize, _sequelize.default.DataTypes);\n  db[model.name] = model;\n});\nObject.keys(db).forEach(modelName => {\n  if (db[modelName].associate) {\n    db[modelName].associate(db);\n  }\n});\ndb.sequelize = sequelize;\ndb.Sequelize = _sequelize.default;\nvar _default = db;\nexports.default = _default;\nmodule.exports = exports.default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfZnMiLCJfaW50ZXJvcFJlcXVpcmVEZWZhdWx0IiwicmVxdWlyZSIsIl9wYXRoIiwiX3NlcXVlbGl6ZSIsIl9wcm9jZXNzIiwiX2NvbmZpZyIsImJhc2VuYW1lIiwicGF0aCIsIl9fZmlsZW5hbWUiLCJlbnYiLCJwcm9jZXNzIiwiTk9ERV9FTlYiLCJjb25maWciLCJjb25maWdGaWxlIiwiZGIiLCJzZXF1ZWxpemUiLCJ1c2VfZW52X3ZhcmlhYmxlIiwiU2VxdWVsaXplIiwidXJsIiwiZGF0YWJhc2UiLCJ1c2VybmFtZSIsInBhc3N3b3JkIiwiZnMiLCJyZWFkZGlyU3luYyIsIl9fZGlybmFtZSIsImZpbHRlciIsImZpbGUiLCJpbmRleE9mIiwic2xpY2UiLCJmb3JFYWNoIiwibW9kZWwiLCJqb2luIiwiRGF0YVR5cGVzIiwibmFtZSIsIk9iamVjdCIsImtleXMiLCJtb2RlbE5hbWUiLCJhc3NvY2lhdGUiLCJfZGVmYXVsdCIsImV4cG9ydHMiLCJkZWZhdWx0IiwibW9kdWxlIl0sInNvdXJjZVJvb3QiOiIvVXNlcnMvYW5kZWxhcndhbmRhL0Rlc2t0b3AvZS1jb21tLXRlYW0tYnJvZ3JhbW1lcnMtYm4vc3JjL2RhdGFiYXNlL21vZGVscy8iLCJzb3VyY2VzIjpbImluZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBmcyBmcm9tICdmcyc7XG5pbXBvcnQgcGF0aCBmcm9tICdwYXRoJztcbmltcG9ydCBTZXF1ZWxpemUgZnJvbSAnc2VxdWVsaXplJztcbmltcG9ydCBwcm9jZXNzIGZyb20gJ3Byb2Nlc3MnO1xuaW1wb3J0IGNvbmZpZ0ZpbGUgZnJvbSAnLi4vY29uZmlnL2NvbmZpZyc7XG5cbmNvbnN0IGJhc2VuYW1lID0gcGF0aC5iYXNlbmFtZShfX2ZpbGVuYW1lKTtcbmNvbnN0IGVudiA9IHByb2Nlc3MuZW52Lk5PREVfRU5WIHx8ICdkZXZlbG9wbWVudCc7XG5jb25zdCBjb25maWcgPSBjb25maWdGaWxlW2Vudl07XG5jb25zdCBkYiA9IHt9O1xuXG5sZXQgc2VxdWVsaXplO1xuaWYgKGNvbmZpZy51c2VfZW52X3ZhcmlhYmxlKSB7XG4gIHNlcXVlbGl6ZSA9IG5ldyBTZXF1ZWxpemUocHJvY2Vzcy5lbnZbY29uZmlnLnVzZV9lbnZfdmFyaWFibGVdLCBjb25maWcpO1xufSBlbHNlIGlmIChjb25maWcudXJsKSB7XG4gIHNlcXVlbGl6ZSA9IG5ldyBTZXF1ZWxpemUoY29uZmlnLnVybCwgY29uZmlnKTtcbn0gZWxzZSB7XG4gIHNlcXVlbGl6ZSA9IG5ldyBTZXF1ZWxpemUoY29uZmlnLmRhdGFiYXNlLCBjb25maWcudXNlcm5hbWUsIGNvbmZpZy5wYXNzd29yZCwgY29uZmlnKTtcbn1cblxuZnNcbiAgLnJlYWRkaXJTeW5jKF9fZGlybmFtZSlcbiAgLmZpbHRlcigoZmlsZSkgPT4gKFxuICAgIGZpbGUuaW5kZXhPZignLicpICE9PSAwXG4gICAgICAmJiBmaWxlICE9PSBiYXNlbmFtZVxuICAgICAgJiYgZmlsZS5zbGljZSgtMykgPT09ICcuanMnXG4gICAgICAmJiBmaWxlLmluZGV4T2YoJy50ZXN0LmpzJykgPT09IC0xXG4gICkpXG4gIC5mb3JFYWNoKChmaWxlKSA9PiB7XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGdsb2JhbC1yZXF1aXJlLCBpbXBvcnQvbm8tZHluYW1pYy1yZXF1aXJlXG4gICAgY29uc3QgbW9kZWwgPSByZXF1aXJlKHBhdGguam9pbihfX2Rpcm5hbWUsIGZpbGUpKShzZXF1ZWxpemUsIFNlcXVlbGl6ZS5EYXRhVHlwZXMpO1xuICAgIGRiW21vZGVsLm5hbWVdID0gbW9kZWw7XG4gIH0pO1xuXG5PYmplY3Qua2V5cyhkYikuZm9yRWFjaCgobW9kZWxOYW1lKSA9PiB7XG4gIGlmIChkYlttb2RlbE5hbWVdLmFzc29jaWF0ZSkge1xuICAgIGRiW21vZGVsTmFtZV0uYXNzb2NpYXRlKGRiKTtcbiAgfVxufSk7XG5cbmRiLnNlcXVlbGl6ZSA9IHNlcXVlbGl6ZTtcbmRiLlNlcXVlbGl6ZSA9IFNlcXVlbGl6ZTtcblxuZXhwb3J0IGRlZmF1bHQgZGI7XG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBQSxJQUFBQSxHQUFBLEdBQUFDLHNCQUFBLENBQUFDLE9BQUE7QUFDQSxJQUFBQyxLQUFBLEdBQUFGLHNCQUFBLENBQUFDLE9BQUE7QUFDQSxJQUFBRSxVQUFBLEdBQUFILHNCQUFBLENBQUFDLE9BQUE7QUFDQSxJQUFBRyxRQUFBLEdBQUFKLHNCQUFBLENBQUFDLE9BQUE7QUFDQSxJQUFBSSxPQUFBLEdBQUFMLHNCQUFBLENBQUFDLE9BQUE7QUFFQSxNQUFNSyxRQUFRLEdBQUdDLGFBQUksQ0FBQ0QsUUFBUSxDQUFDRSxVQUFVLENBQUM7QUFDMUMsTUFBTUMsR0FBRyxHQUFHQyxnQkFBTyxDQUFDRCxHQUFHLENBQUNFLFFBQVEsSUFBSSxhQUFhO0FBQ2pELE1BQU1DLE1BQU0sR0FBR0MsZUFBVSxDQUFDSixHQUFHLENBQUM7QUFDOUIsTUFBTUssRUFBRSxHQUFHLENBQUMsQ0FBQztBQUViLElBQUlDLFNBQVM7QUFDYixJQUFJSCxNQUFNLENBQUNJLGdCQUFnQixFQUFFO0VBQzNCRCxTQUFTLEdBQUcsSUFBSUUsa0JBQVMsQ0FBQ1AsZ0JBQU8sQ0FBQ0QsR0FBRyxDQUFDRyxNQUFNLENBQUNJLGdCQUFnQixDQUFDLEVBQUVKLE1BQU0sQ0FBQztBQUN6RSxDQUFDLE1BQU0sSUFBSUEsTUFBTSxDQUFDTSxHQUFHLEVBQUU7RUFDckJILFNBQVMsR0FBRyxJQUFJRSxrQkFBUyxDQUFDTCxNQUFNLENBQUNNLEdBQUcsRUFBRU4sTUFBTSxDQUFDO0FBQy9DLENBQUMsTUFBTTtFQUNMRyxTQUFTLEdBQUcsSUFBSUUsa0JBQVMsQ0FBQ0wsTUFBTSxDQUFDTyxRQUFRLEVBQUVQLE1BQU0sQ0FBQ1EsUUFBUSxFQUFFUixNQUFNLENBQUNTLFFBQVEsRUFBRVQsTUFBTSxDQUFDO0FBQ3RGO0FBRUFVLFdBQUUsQ0FDQ0MsV0FBVyxDQUFDQyxTQUFTLENBQUMsQ0FDdEJDLE1BQU0sQ0FBRUMsSUFBSSxJQUNYQSxJQUFJLENBQUNDLE9BQU8sQ0FBQyxHQUFHLENBQUMsS0FBSyxDQUFDLElBQ2xCRCxJQUFJLEtBQUtwQixRQUFRLElBQ2pCb0IsSUFBSSxDQUFDRSxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsS0FBSyxLQUFLLElBQ3hCRixJQUFJLENBQUNDLE9BQU8sQ0FBQyxVQUFVLENBQUMsS0FBSyxDQUFDLENBQ3BDLENBQUMsQ0FDREUsT0FBTyxDQUFFSCxJQUFJLElBQUs7RUFDakI7RUFDQSxNQUFNSSxLQUFLLEdBQUc3QixPQUFPLENBQUNNLGFBQUksQ0FBQ3dCLElBQUksQ0FBQ1AsU0FBUyxFQUFFRSxJQUFJLENBQUMsQ0FBQyxDQUFDWCxTQUFTLEVBQUVFLGtCQUFTLENBQUNlLFNBQVMsQ0FBQztFQUNqRmxCLEVBQUUsQ0FBQ2dCLEtBQUssQ0FBQ0csSUFBSSxDQUFDLEdBQUdILEtBQUs7QUFDeEIsQ0FBQyxDQUFDO0FBRUpJLE1BQU0sQ0FBQ0MsSUFBSSxDQUFDckIsRUFBRSxDQUFDLENBQUNlLE9BQU8sQ0FBRU8sU0FBUyxJQUFLO0VBQ3JDLElBQUl0QixFQUFFLENBQUNzQixTQUFTLENBQUMsQ0FBQ0MsU0FBUyxFQUFFO0lBQzNCdkIsRUFBRSxDQUFDc0IsU0FBUyxDQUFDLENBQUNDLFNBQVMsQ0FBQ3ZCLEVBQUUsQ0FBQztFQUM3QjtBQUNGLENBQUMsQ0FBQztBQUVGQSxFQUFFLENBQUNDLFNBQVMsR0FBR0EsU0FBUztBQUN4QkQsRUFBRSxDQUFDRyxTQUFTLEdBQUdBLGtCQUFTO0FBQUMsSUFBQXFCLFFBQUEsR0FFVnhCLEVBQUU7QUFBQXlCLE9BQUEsQ0FBQUMsT0FBQSxHQUFBRixRQUFBO0FBQUFHLE1BQUEsQ0FBQUYsT0FBQSxHQUFBQSxPQUFBLENBQUFDLE9BQUEifQ==","map":{"version":3,"names":["_fs","_interopRequireDefault","require","_path","_sequelize","_process","_config","basename","path","__filename","env","process","NODE_ENV","config","configFile","db","sequelize","use_env_variable","Sequelize","url","database","username","password","fs","readdirSync","__dirname","filter","file","indexOf","slice","forEach","model","join","DataTypes","name","Object","keys","modelName","associate","_default","exports","default","module"],"sourceRoot":"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/database/models/","sources":["index.js"],"sourcesContent":["import fs from 'fs';\nimport path from 'path';\nimport Sequelize from 'sequelize';\nimport process from 'process';\nimport configFile from '../config/config';\n\nconst basename = path.basename(__filename);\nconst env = process.env.NODE_ENV || 'development';\nconst config = configFile[env];\nconst db = {};\n\nlet sequelize;\nif (config.use_env_variable) {\n  sequelize = new Sequelize(process.env[config.use_env_variable], config);\n} else if (config.url) {\n  sequelize = new Sequelize(config.url, config);\n} else {\n  sequelize = new Sequelize(config.database, config.username, config.password, config);\n}\n\nfs\n  .readdirSync(__dirname)\n  .filter((file) => (\n    file.indexOf('.') !== 0\n      && file !== basename\n      && file.slice(-3) === '.js'\n      && file.indexOf('.test.js') === -1\n  ))\n  .forEach((file) => {\n    // eslint-disable-next-line global-require, import/no-dynamic-require\n    const model = require(path.join(__dirname, file))(sequelize, Sequelize.DataTypes);\n    db[model.name] = model;\n  });\n\nObject.keys(db).forEach((modelName) => {\n  if (db[modelName].associate) {\n    db[modelName].associate(db);\n  }\n});\n\ndb.sequelize = sequelize;\ndb.Sequelize = Sequelize;\n\nexport default db;\n"],"mappings":";;;;;;;AAAA,IAAAA,GAAA,GAAAC,sBAAA,CAAAC,OAAA;AACA,IAAAC,KAAA,GAAAF,sBAAA,CAAAC,OAAA;AACA,IAAAE,UAAA,GAAAH,sBAAA,CAAAC,OAAA;AACA,IAAAG,QAAA,GAAAJ,sBAAA,CAAAC,OAAA;AACA,IAAAI,OAAA,GAAAL,sBAAA,CAAAC,OAAA;AAEA,MAAMK,QAAQ,GAAGC,aAAI,CAACD,QAAQ,CAACE,UAAU,CAAC;AAC1C,MAAMC,GAAG,GAAGC,gBAAO,CAACD,GAAG,CAACE,QAAQ,IAAI,aAAa;AACjD,MAAMC,MAAM,GAAGC,eAAU,CAACJ,GAAG,CAAC;AAC9B,MAAMK,EAAE,GAAG,CAAC,CAAC;AAEb,IAAIC,SAAS;AACb,IAAIH,MAAM,CAACI,gBAAgB,EAAE;EAC3BD,SAAS,GAAG,IAAIE,kBAAS,CAACP,gBAAO,CAACD,GAAG,CAACG,MAAM,CAACI,gBAAgB,CAAC,EAAEJ,MAAM,CAAC;AACzE,CAAC,MAAM,IAAIA,MAAM,CAACM,GAAG,EAAE;EACrBH,SAAS,GAAG,IAAIE,kBAAS,CAACL,MAAM,CAACM,GAAG,EAAEN,MAAM,CAAC;AAC/C,CAAC,MAAM;EACLG,SAAS,GAAG,IAAIE,kBAAS,CAACL,MAAM,CAACO,QAAQ,EAAEP,MAAM,CAACQ,QAAQ,EAAER,MAAM,CAACS,QAAQ,EAAET,MAAM,CAAC;AACtF;AAEAU,WAAE,CACCC,WAAW,CAACC,SAAS,CAAC,CACtBC,MAAM,CAAEC,IAAI,IACXA,IAAI,CAACC,OAAO,CAAC,GAAG,CAAC,KAAK,CAAC,IAClBD,IAAI,KAAKpB,QAAQ,IACjBoB,IAAI,CAACE,KAAK,CAAC,CAAC,CAAC,CAAC,KAAK,KAAK,IACxBF,IAAI,CAACC,OAAO,CAAC,UAAU,CAAC,KAAK,CAAC,CACpC,CAAC,CACDE,OAAO,CAAEH,IAAI,IAAK;EACjB;EACA,MAAMI,KAAK,GAAG7B,OAAO,CAACM,aAAI,CAACwB,IAAI,CAACP,SAAS,EAAEE,IAAI,CAAC,CAAC,CAACX,SAAS,EAAEE,kBAAS,CAACe,SAAS,CAAC;EACjFlB,EAAE,CAACgB,KAAK,CAACG,IAAI,CAAC,GAAGH,KAAK;AACxB,CAAC,CAAC;AAEJI,MAAM,CAACC,IAAI,CAACrB,EAAE,CAAC,CAACe,OAAO,CAAEO,SAAS,IAAK;EACrC,IAAItB,EAAE,CAACsB,SAAS,CAAC,CAACC,SAAS,EAAE;IAC3BvB,EAAE,CAACsB,SAAS,CAAC,CAACC,SAAS,CAACvB,EAAE,CAAC;EAC7B;AACF,CAAC,CAAC;AAEFA,EAAE,CAACC,SAAS,GAAGA,SAAS;AACxBD,EAAE,CAACG,SAAS,GAAGA,kBAAS;AAAC,IAAAqB,QAAA,GAEVxB,EAAE;AAAAyB,OAAA,CAAAC,OAAA,GAAAF,QAAA;AAAAG,MAAA,CAAAF,OAAA,GAAAA,OAAA,CAAAC,OAAA"}},"mtime":1682148437927},"{\"assumptions\":{},\"sourceRoot\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/helpers/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"filename\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/helpers/socket.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/node_modules/babel-plugin-add-module-exports/lib/index.js\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-runtime\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"regenerator\":true},\"externalDependencies\":[]},{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.21.0:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.SocketUtil = void 0;\nvar _socket = require(\"socket.io\");\nvar _chat = require(\"../services/chat.services\");\n/* eslint-disable require-jsdoc */\n\n// eslint-disable-next-line import/prefer-default-export\nclass SocketUtil {\n  static socketEmit(key, data) {\n    this.io.sockets.emit(key, data);\n  }\n  static config(server) {\n    this.io = new _socket.Server(server, {\n      cors: {\n        origin: '*'\n      }\n    });\n    this.io.on('connection', socket => {\n      socket.on('join_room', data => {\n        socket.join(data);\n      });\n      socket.on('send_message', async newMessage => {\n        const sentMessage = await _chat.ChatService.getOneMessage(newMessage.data.user.id);\n        socket.to(newMessage.room).emit('receive_message', sentMessage);\n      });\n      socket.on('typing', data => {\n        socket.broadcast.emit('istyping', data);\n      });\n      socket.on('disconnect', () => {});\n    });\n  }\n}\nexports.SocketUtil = SocketUtil;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfc29ja2V0IiwicmVxdWlyZSIsIl9jaGF0IiwiU29ja2V0VXRpbCIsInNvY2tldEVtaXQiLCJrZXkiLCJkYXRhIiwiaW8iLCJzb2NrZXRzIiwiZW1pdCIsImNvbmZpZyIsInNlcnZlciIsIlNlcnZlciIsImNvcnMiLCJvcmlnaW4iLCJvbiIsInNvY2tldCIsImpvaW4iLCJuZXdNZXNzYWdlIiwic2VudE1lc3NhZ2UiLCJDaGF0U2VydmljZSIsImdldE9uZU1lc3NhZ2UiLCJ1c2VyIiwiaWQiLCJ0byIsInJvb20iLCJicm9hZGNhc3QiLCJleHBvcnRzIl0sInNvdXJjZVJvb3QiOiIvVXNlcnMvYW5kZWxhcndhbmRhL0Rlc2t0b3AvZS1jb21tLXRlYW0tYnJvZ3JhbW1lcnMtYm4vc3JjL2hlbHBlcnMvIiwic291cmNlcyI6WyJzb2NrZXQuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLyogZXNsaW50LWRpc2FibGUgcmVxdWlyZS1qc2RvYyAqL1xuXG5pbXBvcnQgeyBTZXJ2ZXIgfSBmcm9tICdzb2NrZXQuaW8nO1xuaW1wb3J0IHsgQ2hhdFNlcnZpY2UgfSBmcm9tICcuLi9zZXJ2aWNlcy9jaGF0LnNlcnZpY2VzJztcblxuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGltcG9ydC9wcmVmZXItZGVmYXVsdC1leHBvcnRcbmV4cG9ydCBjbGFzcyBTb2NrZXRVdGlsIHtcbiAgc3RhdGljIHNvY2tldEVtaXQoa2V5LCBkYXRhKSB7XG4gICAgdGhpcy5pby5zb2NrZXRzLmVtaXQoa2V5LCBkYXRhKTtcbiAgfVxuXG4gIHN0YXRpYyBjb25maWcoc2VydmVyKSB7XG4gICAgdGhpcy5pbyA9IG5ldyBTZXJ2ZXIoc2VydmVyLCB7IGNvcnM6IHsgb3JpZ2luOiAnKicgfSB9KTtcblxuICAgIHRoaXMuaW8ub24oJ2Nvbm5lY3Rpb24nLCAoc29ja2V0KSA9PiB7XG4gICAgICBzb2NrZXQub24oJ2pvaW5fcm9vbScsIChkYXRhKSA9PiB7XG4gICAgICAgIHNvY2tldC5qb2luKGRhdGEpO1xuICAgICAgfSk7XG4gICAgICBzb2NrZXQub24oJ3NlbmRfbWVzc2FnZScsIGFzeW5jIChuZXdNZXNzYWdlKSA9PiB7XG4gICAgICAgIGNvbnN0IHNlbnRNZXNzYWdlID0gYXdhaXQgQ2hhdFNlcnZpY2UuZ2V0T25lTWVzc2FnZShuZXdNZXNzYWdlLmRhdGEudXNlci5pZCk7XG4gICAgICAgIHNvY2tldC50byhuZXdNZXNzYWdlLnJvb20pLmVtaXQoJ3JlY2VpdmVfbWVzc2FnZScsIHNlbnRNZXNzYWdlKTtcbiAgICAgIH0pO1xuICAgICAgc29ja2V0Lm9uKCd0eXBpbmcnLCAoZGF0YSkgPT4ge1xuICAgICAgICBzb2NrZXQuYnJvYWRjYXN0LmVtaXQoJ2lzdHlwaW5nJywgZGF0YSk7XG4gICAgICB9KTtcblxuICAgICAgc29ja2V0Lm9uKCdkaXNjb25uZWN0JywgKCkgPT4ge1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH1cbn1cbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBRUEsSUFBQUEsT0FBQSxHQUFBQyxPQUFBO0FBQ0EsSUFBQUMsS0FBQSxHQUFBRCxPQUFBO0FBSEE7O0FBS0E7QUFDTyxNQUFNRSxVQUFVLENBQUM7RUFDdEIsT0FBT0MsVUFBVUEsQ0FBQ0MsR0FBRyxFQUFFQyxJQUFJLEVBQUU7SUFDM0IsSUFBSSxDQUFDQyxFQUFFLENBQUNDLE9BQU8sQ0FBQ0MsSUFBSSxDQUFDSixHQUFHLEVBQUVDLElBQUksQ0FBQztFQUNqQztFQUVBLE9BQU9JLE1BQU1BLENBQUNDLE1BQU0sRUFBRTtJQUNwQixJQUFJLENBQUNKLEVBQUUsR0FBRyxJQUFJSyxjQUFNLENBQUNELE1BQU0sRUFBRTtNQUFFRSxJQUFJLEVBQUU7UUFBRUMsTUFBTSxFQUFFO01BQUk7SUFBRSxDQUFDLENBQUM7SUFFdkQsSUFBSSxDQUFDUCxFQUFFLENBQUNRLEVBQUUsQ0FBQyxZQUFZLEVBQUdDLE1BQU0sSUFBSztNQUNuQ0EsTUFBTSxDQUFDRCxFQUFFLENBQUMsV0FBVyxFQUFHVCxJQUFJLElBQUs7UUFDL0JVLE1BQU0sQ0FBQ0MsSUFBSSxDQUFDWCxJQUFJLENBQUM7TUFDbkIsQ0FBQyxDQUFDO01BQ0ZVLE1BQU0sQ0FBQ0QsRUFBRSxDQUFDLGNBQWMsRUFBRSxNQUFPRyxVQUFVLElBQUs7UUFDOUMsTUFBTUMsV0FBVyxHQUFHLE1BQU1DLGlCQUFXLENBQUNDLGFBQWEsQ0FBQ0gsVUFBVSxDQUFDWixJQUFJLENBQUNnQixJQUFJLENBQUNDLEVBQUUsQ0FBQztRQUM1RVAsTUFBTSxDQUFDUSxFQUFFLENBQUNOLFVBQVUsQ0FBQ08sSUFBSSxDQUFDLENBQUNoQixJQUFJLENBQUMsaUJBQWlCLEVBQUVVLFdBQVcsQ0FBQztNQUNqRSxDQUFDLENBQUM7TUFDRkgsTUFBTSxDQUFDRCxFQUFFLENBQUMsUUFBUSxFQUFHVCxJQUFJLElBQUs7UUFDNUJVLE1BQU0sQ0FBQ1UsU0FBUyxDQUFDakIsSUFBSSxDQUFDLFVBQVUsRUFBRUgsSUFBSSxDQUFDO01BQ3pDLENBQUMsQ0FBQztNQUVGVSxNQUFNLENBQUNELEVBQUUsQ0FBQyxZQUFZLEVBQUUsTUFBTSxDQUM5QixDQUFDLENBQUM7SUFDSixDQUFDLENBQUM7RUFDSjtBQUNGO0FBQUNZLE9BQUEsQ0FBQXhCLFVBQUEsR0FBQUEsVUFBQSJ9","map":{"version":3,"names":["_socket","require","_chat","SocketUtil","socketEmit","key","data","io","sockets","emit","config","server","Server","cors","origin","on","socket","join","newMessage","sentMessage","ChatService","getOneMessage","user","id","to","room","broadcast","exports"],"sourceRoot":"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/helpers/","sources":["socket.js"],"sourcesContent":["/* eslint-disable require-jsdoc */\n\nimport { Server } from 'socket.io';\nimport { ChatService } from '../services/chat.services';\n\n// eslint-disable-next-line import/prefer-default-export\nexport class SocketUtil {\n  static socketEmit(key, data) {\n    this.io.sockets.emit(key, data);\n  }\n\n  static config(server) {\n    this.io = new Server(server, { cors: { origin: '*' } });\n\n    this.io.on('connection', (socket) => {\n      socket.on('join_room', (data) => {\n        socket.join(data);\n      });\n      socket.on('send_message', async (newMessage) => {\n        const sentMessage = await ChatService.getOneMessage(newMessage.data.user.id);\n        socket.to(newMessage.room).emit('receive_message', sentMessage);\n      });\n      socket.on('typing', (data) => {\n        socket.broadcast.emit('istyping', data);\n      });\n\n      socket.on('disconnect', () => {\n      });\n    });\n  }\n}\n"],"mappings":";;;;;;AAEA,IAAAA,OAAA,GAAAC,OAAA;AACA,IAAAC,KAAA,GAAAD,OAAA;AAHA;;AAKA;AACO,MAAME,UAAU,CAAC;EACtB,OAAOC,UAAUA,CAACC,GAAG,EAAEC,IAAI,EAAE;IAC3B,IAAI,CAACC,EAAE,CAACC,OAAO,CAACC,IAAI,CAACJ,GAAG,EAAEC,IAAI,CAAC;EACjC;EAEA,OAAOI,MAAMA,CAACC,MAAM,EAAE;IACpB,IAAI,CAACJ,EAAE,GAAG,IAAIK,cAAM,CAACD,MAAM,EAAE;MAAEE,IAAI,EAAE;QAAEC,MAAM,EAAE;MAAI;IAAE,CAAC,CAAC;IAEvD,IAAI,CAACP,EAAE,CAACQ,EAAE,CAAC,YAAY,EAAGC,MAAM,IAAK;MACnCA,MAAM,CAACD,EAAE,CAAC,WAAW,EAAGT,IAAI,IAAK;QAC/BU,MAAM,CAACC,IAAI,CAACX,IAAI,CAAC;MACnB,CAAC,CAAC;MACFU,MAAM,CAACD,EAAE,CAAC,cAAc,EAAE,MAAOG,UAAU,IAAK;QAC9C,MAAMC,WAAW,GAAG,MAAMC,iBAAW,CAACC,aAAa,CAACH,UAAU,CAACZ,IAAI,CAACgB,IAAI,CAACC,EAAE,CAAC;QAC5EP,MAAM,CAACQ,EAAE,CAACN,UAAU,CAACO,IAAI,CAAC,CAAChB,IAAI,CAAC,iBAAiB,EAAEU,WAAW,CAAC;MACjE,CAAC,CAAC;MACFH,MAAM,CAACD,EAAE,CAAC,QAAQ,EAAGT,IAAI,IAAK;QAC5BU,MAAM,CAACU,SAAS,CAACjB,IAAI,CAAC,UAAU,EAAEH,IAAI,CAAC;MACzC,CAAC,CAAC;MAEFU,MAAM,CAACD,EAAE,CAAC,YAAY,EAAE,MAAM,CAC9B,CAAC,CAAC;IACJ,CAAC,CAAC;EACJ;AACF;AAACY,OAAA,CAAAxB,UAAA,GAAAA,UAAA"}},"mtime":1685643189456},"{\"assumptions\":{},\"sourceRoot\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/helpers/chat/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"filename\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/helpers/chat/message.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/node_modules/babel-plugin-add-module-exports/lib/index.js\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-runtime\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"regenerator\":true},\"externalDependencies\":[]},{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.21.0:development":{"value":{"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.formatMessage = formatMessage;\nvar _moment = _interopRequireDefault(require(\"moment\"));\n/* eslint-disable import/prefer-default-export */\n/* eslint-disable require-jsdoc */\n\nfunction formatMessage(room, message, username) {\n  return {\n    room,\n    message,\n    username,\n    createdAt: (0, _moment.default)().format('h:mm a')\n  };\n}\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfbW9tZW50IiwiX2ludGVyb3BSZXF1aXJlRGVmYXVsdCIsInJlcXVpcmUiLCJmb3JtYXRNZXNzYWdlIiwicm9vbSIsIm1lc3NhZ2UiLCJ1c2VybmFtZSIsImNyZWF0ZWRBdCIsIm1vbWVudCIsImZvcm1hdCJdLCJzb3VyY2VSb290IjoiL1VzZXJzL2FuZGVsYXJ3YW5kYS9EZXNrdG9wL2UtY29tbS10ZWFtLWJyb2dyYW1tZXJzLWJuL3NyYy9oZWxwZXJzL2NoYXQvIiwic291cmNlcyI6WyJtZXNzYWdlLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qIGVzbGludC1kaXNhYmxlIGltcG9ydC9wcmVmZXItZGVmYXVsdC1leHBvcnQgKi9cbi8qIGVzbGludC1kaXNhYmxlIHJlcXVpcmUtanNkb2MgKi9cbmltcG9ydCBtb21lbnQgZnJvbSAnbW9tZW50JztcblxuZnVuY3Rpb24gZm9ybWF0TWVzc2FnZShyb29tLCBtZXNzYWdlLCB1c2VybmFtZSkge1xuICByZXR1cm4ge1xuICAgIHJvb20sXG4gICAgbWVzc2FnZSxcbiAgICB1c2VybmFtZSxcbiAgICBjcmVhdGVkQXQ6IG1vbWVudCgpLmZvcm1hdCgnaDptbSBhJylcbiAgfTtcbn1cblxuZXhwb3J0IHsgZm9ybWF0TWVzc2FnZSB9O1xuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBRUEsSUFBQUEsT0FBQSxHQUFBQyxzQkFBQSxDQUFBQyxPQUFBO0FBRkE7QUFDQTs7QUFHQSxTQUFTQyxhQUFhQSxDQUFDQyxJQUFJLEVBQUVDLE9BQU8sRUFBRUMsUUFBUSxFQUFFO0VBQzlDLE9BQU87SUFDTEYsSUFBSTtJQUNKQyxPQUFPO0lBQ1BDLFFBQVE7SUFDUkMsU0FBUyxFQUFFLElBQUFDLGVBQU0sR0FBRSxDQUFDQyxNQUFNLENBQUMsUUFBUTtFQUNyQyxDQUFDO0FBQ0gifQ==","map":{"version":3,"names":["_moment","_interopRequireDefault","require","formatMessage","room","message","username","createdAt","moment","format"],"sourceRoot":"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/helpers/chat/","sources":["message.js"],"sourcesContent":["/* eslint-disable import/prefer-default-export */\n/* eslint-disable require-jsdoc */\nimport moment from 'moment';\n\nfunction formatMessage(room, message, username) {\n  return {\n    room,\n    message,\n    username,\n    createdAt: moment().format('h:mm a')\n  };\n}\n\nexport { formatMessage };\n"],"mappings":";;;;;;;AAEA,IAAAA,OAAA,GAAAC,sBAAA,CAAAC,OAAA;AAFA;AACA;;AAGA,SAASC,aAAaA,CAACC,IAAI,EAAEC,OAAO,EAAEC,QAAQ,EAAE;EAC9C,OAAO;IACLF,IAAI;IACJC,OAAO;IACPC,QAAQ;IACRC,SAAS,EAAE,IAAAC,eAAM,GAAE,CAACC,MAAM,CAAC,QAAQ;EACrC,CAAC;AACH"}},"mtime":1682148437939},"{\"assumptions\":{},\"sourceRoot\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/helpers/chat/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"filename\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/helpers/chat/user.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/node_modules/babel-plugin-add-module-exports/lib/index.js\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-runtime\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"regenerator\":true},\"externalDependencies\":[]},{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.21.0:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.userLeave = exports.userJoin = exports.getRoomUsers = exports.getCurrentUser = void 0;\n/* eslint-disable require-jsdoc */\nconst users = [];\n\n// Join user to chat\nconst userJoin = (id, username, room) => {\n  const user = {\n    id,\n    username,\n    room\n  };\n  if (users.length === 0 || users.filter(u => u.id === user.id).length === 0) {\n    users.push(user);\n  }\n  return user;\n};\n\n// Get current user\nexports.userJoin = userJoin;\nconst getCurrentUser = id => users.find(user => user.id === id);\n\n// User leaves chat\nexports.getCurrentUser = getCurrentUser;\nconst userLeave = id => {\n  const index = users.findIndex(user => user.id === id);\n  if (index !== -1) {\n    return users.splice(index, 1)[0];\n  }\n};\n\n// Get room users\nexports.userLeave = userLeave;\nconst getRoomUsers = room => users.filter(user => user.room === room);\nexports.getRoomUsers = getRoomUsers;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJ1c2VycyIsInVzZXJKb2luIiwiaWQiLCJ1c2VybmFtZSIsInJvb20iLCJ1c2VyIiwibGVuZ3RoIiwiZmlsdGVyIiwidSIsInB1c2giLCJleHBvcnRzIiwiZ2V0Q3VycmVudFVzZXIiLCJmaW5kIiwidXNlckxlYXZlIiwiaW5kZXgiLCJmaW5kSW5kZXgiLCJzcGxpY2UiLCJnZXRSb29tVXNlcnMiXSwic291cmNlUm9vdCI6Ii9Vc2Vycy9hbmRlbGFyd2FuZGEvRGVza3RvcC9lLWNvbW0tdGVhbS1icm9ncmFtbWVycy1ibi9zcmMvaGVscGVycy9jaGF0LyIsInNvdXJjZXMiOlsidXNlci5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKiBlc2xpbnQtZGlzYWJsZSByZXF1aXJlLWpzZG9jICovXG5jb25zdCB1c2VycyA9IFtdO1xuXG4vLyBKb2luIHVzZXIgdG8gY2hhdFxuY29uc3QgdXNlckpvaW4gPSAoaWQsIHVzZXJuYW1lLCByb29tKSA9PiB7XG4gIGNvbnN0IHVzZXIgPSB7IGlkLCB1c2VybmFtZSwgcm9vbSB9O1xuICBpZiAoXG4gICAgdXNlcnMubGVuZ3RoID09PSAwIHx8IHVzZXJzLmZpbHRlcigodSkgPT4gdS5pZCA9PT0gdXNlci5pZCkubGVuZ3RoID09PSAwXG4gICkge1xuICAgIHVzZXJzLnB1c2godXNlcik7XG4gIH1cbiAgcmV0dXJuIHVzZXI7XG59O1xuXG4vLyBHZXQgY3VycmVudCB1c2VyXG5jb25zdCBnZXRDdXJyZW50VXNlciA9IChpZCkgPT4gdXNlcnMuZmluZCgodXNlcikgPT4gdXNlci5pZCA9PT0gaWQpO1xuXG4vLyBVc2VyIGxlYXZlcyBjaGF0XG5jb25zdCB1c2VyTGVhdmUgPSAoaWQpID0+IHtcbiAgY29uc3QgaW5kZXggPSB1c2Vycy5maW5kSW5kZXgoKHVzZXIpID0+IHVzZXIuaWQgPT09IGlkKTtcblxuICBpZiAoaW5kZXggIT09IC0xKSB7XG4gICAgcmV0dXJuIHVzZXJzLnNwbGljZShpbmRleCwgMSlbMF07XG4gIH1cbn07XG5cbi8vIEdldCByb29tIHVzZXJzXG5jb25zdCBnZXRSb29tVXNlcnMgPSAocm9vbSkgPT4gdXNlcnMuZmlsdGVyKCh1c2VyKSA9PiB1c2VyLnJvb20gPT09IHJvb20pO1xuXG5leHBvcnQge1xuICB1c2VySm9pbiwgZ2V0Q3VycmVudFVzZXIsIHVzZXJMZWF2ZSwgZ2V0Um9vbVVzZXJzXG59O1xuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7QUFBQTtBQUNBLE1BQU1BLEtBQUssR0FBRyxFQUFFOztBQUVoQjtBQUNBLE1BQU1DLFFBQVEsR0FBR0EsQ0FBQ0MsRUFBRSxFQUFFQyxRQUFRLEVBQUVDLElBQUksS0FBSztFQUN2QyxNQUFNQyxJQUFJLEdBQUc7SUFBRUgsRUFBRTtJQUFFQyxRQUFRO0lBQUVDO0VBQUssQ0FBQztFQUNuQyxJQUNFSixLQUFLLENBQUNNLE1BQU0sS0FBSyxDQUFDLElBQUlOLEtBQUssQ0FBQ08sTUFBTSxDQUFFQyxDQUFDLElBQUtBLENBQUMsQ0FBQ04sRUFBRSxLQUFLRyxJQUFJLENBQUNILEVBQUUsQ0FBQyxDQUFDSSxNQUFNLEtBQUssQ0FBQyxFQUN4RTtJQUNBTixLQUFLLENBQUNTLElBQUksQ0FBQ0osSUFBSSxDQUFDO0VBQ2xCO0VBQ0EsT0FBT0EsSUFBSTtBQUNiLENBQUM7O0FBRUQ7QUFBQUssT0FBQSxDQUFBVCxRQUFBLEdBQUFBLFFBQUE7QUFDQSxNQUFNVSxjQUFjLEdBQUlULEVBQUUsSUFBS0YsS0FBSyxDQUFDWSxJQUFJLENBQUVQLElBQUksSUFBS0EsSUFBSSxDQUFDSCxFQUFFLEtBQUtBLEVBQUUsQ0FBQzs7QUFFbkU7QUFBQVEsT0FBQSxDQUFBQyxjQUFBLEdBQUFBLGNBQUE7QUFDQSxNQUFNRSxTQUFTLEdBQUlYLEVBQUUsSUFBSztFQUN4QixNQUFNWSxLQUFLLEdBQUdkLEtBQUssQ0FBQ2UsU0FBUyxDQUFFVixJQUFJLElBQUtBLElBQUksQ0FBQ0gsRUFBRSxLQUFLQSxFQUFFLENBQUM7RUFFdkQsSUFBSVksS0FBSyxLQUFLLENBQUMsQ0FBQyxFQUFFO0lBQ2hCLE9BQU9kLEtBQUssQ0FBQ2dCLE1BQU0sQ0FBQ0YsS0FBSyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztFQUNsQztBQUNGLENBQUM7O0FBRUQ7QUFBQUosT0FBQSxDQUFBRyxTQUFBLEdBQUFBLFNBQUE7QUFDQSxNQUFNSSxZQUFZLEdBQUliLElBQUksSUFBS0osS0FBSyxDQUFDTyxNQUFNLENBQUVGLElBQUksSUFBS0EsSUFBSSxDQUFDRCxJQUFJLEtBQUtBLElBQUksQ0FBQztBQUFDTSxPQUFBLENBQUFPLFlBQUEsR0FBQUEsWUFBQSJ9","map":{"version":3,"names":["users","userJoin","id","username","room","user","length","filter","u","push","exports","getCurrentUser","find","userLeave","index","findIndex","splice","getRoomUsers"],"sourceRoot":"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/helpers/chat/","sources":["user.js"],"sourcesContent":["/* eslint-disable require-jsdoc */\nconst users = [];\n\n// Join user to chat\nconst userJoin = (id, username, room) => {\n  const user = { id, username, room };\n  if (\n    users.length === 0 || users.filter((u) => u.id === user.id).length === 0\n  ) {\n    users.push(user);\n  }\n  return user;\n};\n\n// Get current user\nconst getCurrentUser = (id) => users.find((user) => user.id === id);\n\n// User leaves chat\nconst userLeave = (id) => {\n  const index = users.findIndex((user) => user.id === id);\n\n  if (index !== -1) {\n    return users.splice(index, 1)[0];\n  }\n};\n\n// Get room users\nconst getRoomUsers = (room) => users.filter((user) => user.room === room);\n\nexport {\n  userJoin, getCurrentUser, userLeave, getRoomUsers\n};\n"],"mappings":";;;;;;AAAA;AACA,MAAMA,KAAK,GAAG,EAAE;;AAEhB;AACA,MAAMC,QAAQ,GAAGA,CAACC,EAAE,EAAEC,QAAQ,EAAEC,IAAI,KAAK;EACvC,MAAMC,IAAI,GAAG;IAAEH,EAAE;IAAEC,QAAQ;IAAEC;EAAK,CAAC;EACnC,IACEJ,KAAK,CAACM,MAAM,KAAK,CAAC,IAAIN,KAAK,CAACO,MAAM,CAAEC,CAAC,IAAKA,CAAC,CAACN,EAAE,KAAKG,IAAI,CAACH,EAAE,CAAC,CAACI,MAAM,KAAK,CAAC,EACxE;IACAN,KAAK,CAACS,IAAI,CAACJ,IAAI,CAAC;EAClB;EACA,OAAOA,IAAI;AACb,CAAC;;AAED;AAAAK,OAAA,CAAAT,QAAA,GAAAA,QAAA;AACA,MAAMU,cAAc,GAAIT,EAAE,IAAKF,KAAK,CAACY,IAAI,CAAEP,IAAI,IAAKA,IAAI,CAACH,EAAE,KAAKA,EAAE,CAAC;;AAEnE;AAAAQ,OAAA,CAAAC,cAAA,GAAAA,cAAA;AACA,MAAME,SAAS,GAAIX,EAAE,IAAK;EACxB,MAAMY,KAAK,GAAGd,KAAK,CAACe,SAAS,CAAEV,IAAI,IAAKA,IAAI,CAACH,EAAE,KAAKA,EAAE,CAAC;EAEvD,IAAIY,KAAK,KAAK,CAAC,CAAC,EAAE;IAChB,OAAOd,KAAK,CAACgB,MAAM,CAACF,KAAK,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC;EAClC;AACF,CAAC;;AAED;AAAAJ,OAAA,CAAAG,SAAA,GAAAA,SAAA;AACA,MAAMI,YAAY,GAAIb,IAAI,IAAKJ,KAAK,CAACO,MAAM,CAAEF,IAAI,IAAKA,IAAI,CAACD,IAAI,KAAKA,IAAI,CAAC;AAACM,OAAA,CAAAO,YAAA,GAAAA,YAAA"}},"mtime":1682148437939},"{\"assumptions\":{},\"sourceRoot\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/database/config/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"filename\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/database/config/config.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/node_modules/babel-plugin-add-module-exports/lib/index.js\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-runtime\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"regenerator\":true},\"externalDependencies\":[]},{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.21.0:development":{"value":{"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _dotenv = _interopRequireDefault(require(\"dotenv\"));\n_dotenv.default.config();\nvar _default = {\n  development: {\n    url: process.env.DATABASE_URL,\n    dialect: 'postgres',\n    logging: false\n  },\n  test: {\n    url: process.env.TEST_DATABASE_URL,\n    dialect: 'postgres',\n    logging: false\n  }\n};\nexports.default = _default;\nmodule.exports = exports.default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfZG90ZW52IiwiX2ludGVyb3BSZXF1aXJlRGVmYXVsdCIsInJlcXVpcmUiLCJkb3RlbnYiLCJjb25maWciLCJfZGVmYXVsdCIsImRldmVsb3BtZW50IiwidXJsIiwicHJvY2VzcyIsImVudiIsIkRBVEFCQVNFX1VSTCIsImRpYWxlY3QiLCJsb2dnaW5nIiwidGVzdCIsIlRFU1RfREFUQUJBU0VfVVJMIiwiZXhwb3J0cyIsImRlZmF1bHQiLCJtb2R1bGUiXSwic291cmNlUm9vdCI6Ii9Vc2Vycy9hbmRlbGFyd2FuZGEvRGVza3RvcC9lLWNvbW0tdGVhbS1icm9ncmFtbWVycy1ibi9zcmMvZGF0YWJhc2UvY29uZmlnLyIsInNvdXJjZXMiOlsiY29uZmlnLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBkb3RlbnYgZnJvbSAnZG90ZW52JztcblxuZG90ZW52LmNvbmZpZygpO1xuZXhwb3J0IGRlZmF1bHQge1xuICBkZXZlbG9wbWVudDoge1xuICAgIHVybDogcHJvY2Vzcy5lbnYuREFUQUJBU0VfVVJMLFxuICAgIGRpYWxlY3Q6ICdwb3N0Z3JlcycsXG4gICAgbG9nZ2luZzogZmFsc2UsXG4gIH0sXG4gIHRlc3Q6IHtcbiAgICB1cmw6IHByb2Nlc3MuZW52LlRFU1RfREFUQUJBU0VfVVJMLFxuICAgIGRpYWxlY3Q6ICdwb3N0Z3JlcycsXG4gICAgbG9nZ2luZzogZmFsc2UsXG4gIH0sXG59O1xuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQUEsSUFBQUEsT0FBQSxHQUFBQyxzQkFBQSxDQUFBQyxPQUFBO0FBRUFDLGVBQU0sQ0FBQ0MsTUFBTSxFQUFFO0FBQUMsSUFBQUMsUUFBQSxHQUNEO0VBQ2JDLFdBQVcsRUFBRTtJQUNYQyxHQUFHLEVBQUVDLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDQyxZQUFZO0lBQzdCQyxPQUFPLEVBQUUsVUFBVTtJQUNuQkMsT0FBTyxFQUFFO0VBQ1gsQ0FBQztFQUNEQyxJQUFJLEVBQUU7SUFDSk4sR0FBRyxFQUFFQyxPQUFPLENBQUNDLEdBQUcsQ0FBQ0ssaUJBQWlCO0lBQ2xDSCxPQUFPLEVBQUUsVUFBVTtJQUNuQkMsT0FBTyxFQUFFO0VBQ1g7QUFDRixDQUFDO0FBQUFHLE9BQUEsQ0FBQUMsT0FBQSxHQUFBWCxRQUFBO0FBQUFZLE1BQUEsQ0FBQUYsT0FBQSxHQUFBQSxPQUFBLENBQUFDLE9BQUEifQ==","map":{"version":3,"names":["_dotenv","_interopRequireDefault","require","dotenv","config","_default","development","url","process","env","DATABASE_URL","dialect","logging","test","TEST_DATABASE_URL","exports","default","module"],"sourceRoot":"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/database/config/","sources":["config.js"],"sourcesContent":["import dotenv from 'dotenv';\n\ndotenv.config();\nexport default {\n  development: {\n    url: process.env.DATABASE_URL,\n    dialect: 'postgres',\n    logging: false,\n  },\n  test: {\n    url: process.env.TEST_DATABASE_URL,\n    dialect: 'postgres',\n    logging: false,\n  },\n};\n"],"mappings":";;;;;;;AAAA,IAAAA,OAAA,GAAAC,sBAAA,CAAAC,OAAA;AAEAC,eAAM,CAACC,MAAM,EAAE;AAAC,IAAAC,QAAA,GACD;EACbC,WAAW,EAAE;IACXC,GAAG,EAAEC,OAAO,CAACC,GAAG,CAACC,YAAY;IAC7BC,OAAO,EAAE,UAAU;IACnBC,OAAO,EAAE;EACX,CAAC;EACDC,IAAI,EAAE;IACJN,GAAG,EAAEC,OAAO,CAACC,GAAG,CAACK,iBAAiB;IAClCH,OAAO,EAAE,UAAU;IACnBC,OAAO,EAAE;EACX;AACF,CAAC;AAAAG,OAAA,CAAAC,OAAA,GAAAX,QAAA;AAAAY,MAAA,CAAAF,OAAA,GAAAA,OAAA,CAAAC,OAAA"}},"mtime":1682148437924},"{\"assumptions\":{},\"sourceRoot\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/database/models/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"filename\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/database/models/blockedtoken.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/node_modules/babel-plugin-add-module-exports/lib/index.js\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-runtime\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"regenerator\":true},\"externalDependencies\":[]},{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.21.0:development":{"value":{"code":"\"use strict\";\n\nconst {\n  Model\n} = require('sequelize');\nmodule.exports = (sequelize, DataTypes) => {\n  // eslint-disable-next-line require-jsdoc\n  class Blockedtoken extends Model {\n    // eslint-disable-next-line valid-jsdoc\n    /**\n     * Helper method for defining associations.\n     * This method is not a part of Sequelize lifecycle.\n     * The `models/index` file will call this method automatically.\n     */\n    static associate() {\n      // define association here\n    }\n  }\n  Blockedtoken.init({\n    token: DataTypes.STRING(10000)\n  }, {\n    sequelize,\n    modelName: 'Blockedtoken'\n  });\n  return Blockedtoken;\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJNb2RlbCIsInJlcXVpcmUiLCJtb2R1bGUiLCJleHBvcnRzIiwic2VxdWVsaXplIiwiRGF0YVR5cGVzIiwiQmxvY2tlZHRva2VuIiwiYXNzb2NpYXRlIiwiaW5pdCIsInRva2VuIiwiU1RSSU5HIiwibW9kZWxOYW1lIl0sInNvdXJjZVJvb3QiOiIvVXNlcnMvYW5kZWxhcndhbmRhL0Rlc2t0b3AvZS1jb21tLXRlYW0tYnJvZ3JhbW1lcnMtYm4vc3JjL2RhdGFiYXNlL21vZGVscy8iLCJzb3VyY2VzIjpbImJsb2NrZWR0b2tlbi5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCB7XG4gIE1vZGVsXG59ID0gcmVxdWlyZSgnc2VxdWVsaXplJyk7XG5cbm1vZHVsZS5leHBvcnRzID0gKHNlcXVlbGl6ZSwgRGF0YVR5cGVzKSA9PiB7XG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSByZXF1aXJlLWpzZG9jXG4gIGNsYXNzIEJsb2NrZWR0b2tlbiBleHRlbmRzIE1vZGVsIHtcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgdmFsaWQtanNkb2NcbiAgICAvKipcbiAgICAgKiBIZWxwZXIgbWV0aG9kIGZvciBkZWZpbmluZyBhc3NvY2lhdGlvbnMuXG4gICAgICogVGhpcyBtZXRob2QgaXMgbm90IGEgcGFydCBvZiBTZXF1ZWxpemUgbGlmZWN5Y2xlLlxuICAgICAqIFRoZSBgbW9kZWxzL2luZGV4YCBmaWxlIHdpbGwgY2FsbCB0aGlzIG1ldGhvZCBhdXRvbWF0aWNhbGx5LlxuICAgICAqL1xuICAgIHN0YXRpYyBhc3NvY2lhdGUoKSB7XG4gICAgICAvLyBkZWZpbmUgYXNzb2NpYXRpb24gaGVyZVxuICAgIH1cbiAgfVxuICBCbG9ja2VkdG9rZW4uaW5pdCh7XG4gICAgdG9rZW46IERhdGFUeXBlcy5TVFJJTkcoMTAwMDApXG4gIH0sIHtcbiAgICBzZXF1ZWxpemUsXG4gICAgbW9kZWxOYW1lOiAnQmxvY2tlZHRva2VuJyxcbiAgfSk7XG4gIHJldHVybiBCbG9ja2VkdG9rZW47XG59O1xuIl0sIm1hcHBpbmdzIjoiOztBQUFBLE1BQU07RUFDSkE7QUFDRixDQUFDLEdBQUdDLE9BQU8sQ0FBQyxXQUFXLENBQUM7QUFFeEJDLE1BQU0sQ0FBQ0MsT0FBTyxHQUFHLENBQUNDLFNBQVMsRUFBRUMsU0FBUyxLQUFLO0VBQ3pDO0VBQ0EsTUFBTUMsWUFBWSxTQUFTTixLQUFLLENBQUM7SUFDL0I7SUFDQTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0lBQ0ksT0FBT08sU0FBU0EsQ0FBQSxFQUFHO01BQ2pCO0lBQUE7RUFFSjtFQUNBRCxZQUFZLENBQUNFLElBQUksQ0FBQztJQUNoQkMsS0FBSyxFQUFFSixTQUFTLENBQUNLLE1BQU0sQ0FBQyxLQUFLO0VBQy9CLENBQUMsRUFBRTtJQUNETixTQUFTO0lBQ1RPLFNBQVMsRUFBRTtFQUNiLENBQUMsQ0FBQztFQUNGLE9BQU9MLFlBQVk7QUFDckIsQ0FBQyJ9","map":{"version":3,"names":["Model","require","module","exports","sequelize","DataTypes","Blockedtoken","associate","init","token","STRING","modelName"],"sourceRoot":"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/database/models/","sources":["blockedtoken.js"],"sourcesContent":["const {\n  Model\n} = require('sequelize');\n\nmodule.exports = (sequelize, DataTypes) => {\n  // eslint-disable-next-line require-jsdoc\n  class Blockedtoken extends Model {\n    // eslint-disable-next-line valid-jsdoc\n    /**\n     * Helper method for defining associations.\n     * This method is not a part of Sequelize lifecycle.\n     * The `models/index` file will call this method automatically.\n     */\n    static associate() {\n      // define association here\n    }\n  }\n  Blockedtoken.init({\n    token: DataTypes.STRING(10000)\n  }, {\n    sequelize,\n    modelName: 'Blockedtoken',\n  });\n  return Blockedtoken;\n};\n"],"mappings":";;AAAA,MAAM;EACJA;AACF,CAAC,GAAGC,OAAO,CAAC,WAAW,CAAC;AAExBC,MAAM,CAACC,OAAO,GAAG,CAACC,SAAS,EAAEC,SAAS,KAAK;EACzC;EACA,MAAMC,YAAY,SAASN,KAAK,CAAC;IAC/B;IACA;AACJ;AACA;AACA;AACA;IACI,OAAOO,SAASA,CAAA,EAAG;MACjB;IAAA;EAEJ;EACAD,YAAY,CAACE,IAAI,CAAC;IAChBC,KAAK,EAAEJ,SAAS,CAACK,MAAM,CAAC,KAAK;EAC/B,CAAC,EAAE;IACDN,SAAS;IACTO,SAAS,EAAE;EACb,CAAC,CAAC;EACF,OAAOL,YAAY;AACrB,CAAC"}},"mtime":1685643189444},"{\"assumptions\":{},\"sourceRoot\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/database/models/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"filename\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/database/models/cart.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/node_modules/babel-plugin-add-module-exports/lib/index.js\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-runtime\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"regenerator\":true},\"externalDependencies\":[]},{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.21.0:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _sequelize = require(\"sequelize\");\n/**\n * exporting the user model and it's features.\n * @param {Object} sequelize\n * @param {Object} DataTypes\n * @returns {Object} the model for user\n */\nvar _default = (sequelize, DataTypes) => {\n  // eslint-disable-next-line require-jsdoc\n  class carts extends _sequelize.Model {\n    // eslint-disable-next-line valid-jsdoc\n    /**\n     * Helper method for defining associations.\n     * This method is not a part of Sequelize lifecycle.\n     * The `models/index` file will call this method automatically.\n     */\n    static associate(models) {\n      // define association here\n      carts.belongsTo(models.users, {\n        as: 'owner',\n        foreignKey: 'userId'\n      });\n    }\n  }\n  carts.init({\n    id: {\n      allowNull: false,\n      primaryKey: true,\n      type: DataTypes.UUID,\n      defaultValue: DataTypes.UUIDV4\n    },\n    userId: {\n      type: DataTypes.UUID,\n      allowNull: false\n    },\n    products: DataTypes.ARRAY(DataTypes.JSONB),\n    total: DataTypes.FLOAT\n  }, {\n    sequelize,\n    modelName: 'carts'\n  });\n  // eslint-disable-next-line no-undef\n  return carts;\n};\nexports.default = _default;\nmodule.exports = exports.default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfc2VxdWVsaXplIiwicmVxdWlyZSIsIl9kZWZhdWx0Iiwic2VxdWVsaXplIiwiRGF0YVR5cGVzIiwiY2FydHMiLCJNb2RlbCIsImFzc29jaWF0ZSIsIm1vZGVscyIsImJlbG9uZ3NUbyIsInVzZXJzIiwiYXMiLCJmb3JlaWduS2V5IiwiaW5pdCIsImlkIiwiYWxsb3dOdWxsIiwicHJpbWFyeUtleSIsInR5cGUiLCJVVUlEIiwiZGVmYXVsdFZhbHVlIiwiVVVJRFY0IiwidXNlcklkIiwicHJvZHVjdHMiLCJBUlJBWSIsIkpTT05CIiwidG90YWwiLCJGTE9BVCIsIm1vZGVsTmFtZSIsImV4cG9ydHMiLCJkZWZhdWx0IiwibW9kdWxlIl0sInNvdXJjZVJvb3QiOiIvVXNlcnMvYW5kZWxhcndhbmRhL0Rlc2t0b3AvZS1jb21tLXRlYW0tYnJvZ3JhbW1lcnMtYm4vc3JjL2RhdGFiYXNlL21vZGVscy8iLCJzb3VyY2VzIjpbImNhcnQuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTW9kZWwgfSBmcm9tICdzZXF1ZWxpemUnO1xuXG4vKipcbiAqIGV4cG9ydGluZyB0aGUgdXNlciBtb2RlbCBhbmQgaXQncyBmZWF0dXJlcy5cbiAqIEBwYXJhbSB7T2JqZWN0fSBzZXF1ZWxpemVcbiAqIEBwYXJhbSB7T2JqZWN0fSBEYXRhVHlwZXNcbiAqIEByZXR1cm5zIHtPYmplY3R9IHRoZSBtb2RlbCBmb3IgdXNlclxuICovXG5leHBvcnQgZGVmYXVsdCAoc2VxdWVsaXplLCBEYXRhVHlwZXMpID0+IHtcbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIHJlcXVpcmUtanNkb2NcbiAgY2xhc3MgY2FydHMgZXh0ZW5kcyBNb2RlbCB7XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIHZhbGlkLWpzZG9jXG4gICAgLyoqXG4gICAgICogSGVscGVyIG1ldGhvZCBmb3IgZGVmaW5pbmcgYXNzb2NpYXRpb25zLlxuICAgICAqIFRoaXMgbWV0aG9kIGlzIG5vdCBhIHBhcnQgb2YgU2VxdWVsaXplIGxpZmVjeWNsZS5cbiAgICAgKiBUaGUgYG1vZGVscy9pbmRleGAgZmlsZSB3aWxsIGNhbGwgdGhpcyBtZXRob2QgYXV0b21hdGljYWxseS5cbiAgICAgKi9cbiAgICBzdGF0aWMgYXNzb2NpYXRlKG1vZGVscykge1xuICAgICAgLy8gZGVmaW5lIGFzc29jaWF0aW9uIGhlcmVcbiAgICAgIGNhcnRzLmJlbG9uZ3NUbyhtb2RlbHMudXNlcnMsIHsgYXM6ICdvd25lcicsIGZvcmVpZ25LZXk6ICd1c2VySWQnIH0pO1xuICAgIH1cbiAgfVxuICBjYXJ0cy5pbml0KFxuICAgIHtcbiAgICAgIGlkOiB7XG4gICAgICAgIGFsbG93TnVsbDogZmFsc2UsXG4gICAgICAgIHByaW1hcnlLZXk6IHRydWUsXG4gICAgICAgIHR5cGU6IERhdGFUeXBlcy5VVUlELFxuICAgICAgICBkZWZhdWx0VmFsdWU6IERhdGFUeXBlcy5VVUlEVjQsXG4gICAgICB9LFxuICAgICAgdXNlcklkOiB7XG4gICAgICAgIHR5cGU6IERhdGFUeXBlcy5VVUlELFxuICAgICAgICBhbGxvd051bGw6IGZhbHNlLFxuICAgICAgfSxcbiAgICAgIHByb2R1Y3RzOiBEYXRhVHlwZXMuQVJSQVkoRGF0YVR5cGVzLkpTT05CKSxcbiAgICAgIHRvdGFsOiBEYXRhVHlwZXMuRkxPQVQsXG4gICAgfSxcbiAgICB7XG4gICAgICBzZXF1ZWxpemUsXG4gICAgICBtb2RlbE5hbWU6ICdjYXJ0cycsXG4gICAgfVxuICApO1xuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tdW5kZWZcbiAgcmV0dXJuIGNhcnRzO1xufTtcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQUEsSUFBQUEsVUFBQSxHQUFBQyxPQUFBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTEEsSUFBQUMsUUFBQSxHQU1lQSxDQUFDQyxTQUFTLEVBQUVDLFNBQVMsS0FBSztFQUN2QztFQUNBLE1BQU1DLEtBQUssU0FBU0MsZ0JBQUssQ0FBQztJQUN4QjtJQUNBO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7SUFDSSxPQUFPQyxTQUFTQSxDQUFDQyxNQUFNLEVBQUU7TUFDdkI7TUFDQUgsS0FBSyxDQUFDSSxTQUFTLENBQUNELE1BQU0sQ0FBQ0UsS0FBSyxFQUFFO1FBQUVDLEVBQUUsRUFBRSxPQUFPO1FBQUVDLFVBQVUsRUFBRTtNQUFTLENBQUMsQ0FBQztJQUN0RTtFQUNGO0VBQ0FQLEtBQUssQ0FBQ1EsSUFBSSxDQUNSO0lBQ0VDLEVBQUUsRUFBRTtNQUNGQyxTQUFTLEVBQUUsS0FBSztNQUNoQkMsVUFBVSxFQUFFLElBQUk7TUFDaEJDLElBQUksRUFBRWIsU0FBUyxDQUFDYyxJQUFJO01BQ3BCQyxZQUFZLEVBQUVmLFNBQVMsQ0FBQ2dCO0lBQzFCLENBQUM7SUFDREMsTUFBTSxFQUFFO01BQ05KLElBQUksRUFBRWIsU0FBUyxDQUFDYyxJQUFJO01BQ3BCSCxTQUFTLEVBQUU7SUFDYixDQUFDO0lBQ0RPLFFBQVEsRUFBRWxCLFNBQVMsQ0FBQ21CLEtBQUssQ0FBQ25CLFNBQVMsQ0FBQ29CLEtBQUssQ0FBQztJQUMxQ0MsS0FBSyxFQUFFckIsU0FBUyxDQUFDc0I7RUFDbkIsQ0FBQyxFQUNEO0lBQ0V2QixTQUFTO0lBQ1R3QixTQUFTLEVBQUU7RUFDYixDQUFDLENBQ0Y7RUFDRDtFQUNBLE9BQU90QixLQUFLO0FBQ2QsQ0FBQztBQUFBdUIsT0FBQSxDQUFBQyxPQUFBLEdBQUEzQixRQUFBO0FBQUE0QixNQUFBLENBQUFGLE9BQUEsR0FBQUEsT0FBQSxDQUFBQyxPQUFBIn0=","map":{"version":3,"names":["_sequelize","require","_default","sequelize","DataTypes","carts","Model","associate","models","belongsTo","users","as","foreignKey","init","id","allowNull","primaryKey","type","UUID","defaultValue","UUIDV4","userId","products","ARRAY","JSONB","total","FLOAT","modelName","exports","default","module"],"sourceRoot":"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/database/models/","sources":["cart.js"],"sourcesContent":["import { Model } from 'sequelize';\n\n/**\n * exporting the user model and it's features.\n * @param {Object} sequelize\n * @param {Object} DataTypes\n * @returns {Object} the model for user\n */\nexport default (sequelize, DataTypes) => {\n  // eslint-disable-next-line require-jsdoc\n  class carts extends Model {\n    // eslint-disable-next-line valid-jsdoc\n    /**\n     * Helper method for defining associations.\n     * This method is not a part of Sequelize lifecycle.\n     * The `models/index` file will call this method automatically.\n     */\n    static associate(models) {\n      // define association here\n      carts.belongsTo(models.users, { as: 'owner', foreignKey: 'userId' });\n    }\n  }\n  carts.init(\n    {\n      id: {\n        allowNull: false,\n        primaryKey: true,\n        type: DataTypes.UUID,\n        defaultValue: DataTypes.UUIDV4,\n      },\n      userId: {\n        type: DataTypes.UUID,\n        allowNull: false,\n      },\n      products: DataTypes.ARRAY(DataTypes.JSONB),\n      total: DataTypes.FLOAT,\n    },\n    {\n      sequelize,\n      modelName: 'carts',\n    }\n  );\n  // eslint-disable-next-line no-undef\n  return carts;\n};\n"],"mappings":";;;;;;AAAA,IAAAA,UAAA,GAAAC,OAAA;AAEA;AACA;AACA;AACA;AACA;AACA;AALA,IAAAC,QAAA,GAMeA,CAACC,SAAS,EAAEC,SAAS,KAAK;EACvC;EACA,MAAMC,KAAK,SAASC,gBAAK,CAAC;IACxB;IACA;AACJ;AACA;AACA;AACA;IACI,OAAOC,SAASA,CAACC,MAAM,EAAE;MACvB;MACAH,KAAK,CAACI,SAAS,CAACD,MAAM,CAACE,KAAK,EAAE;QAAEC,EAAE,EAAE,OAAO;QAAEC,UAAU,EAAE;MAAS,CAAC,CAAC;IACtE;EACF;EACAP,KAAK,CAACQ,IAAI,CACR;IACEC,EAAE,EAAE;MACFC,SAAS,EAAE,KAAK;MAChBC,UAAU,EAAE,IAAI;MAChBC,IAAI,EAAEb,SAAS,CAACc,IAAI;MACpBC,YAAY,EAAEf,SAAS,CAACgB;IAC1B,CAAC;IACDC,MAAM,EAAE;MACNJ,IAAI,EAAEb,SAAS,CAACc,IAAI;MACpBH,SAAS,EAAE;IACb,CAAC;IACDO,QAAQ,EAAElB,SAAS,CAACmB,KAAK,CAACnB,SAAS,CAACoB,KAAK,CAAC;IAC1CC,KAAK,EAAErB,SAAS,CAACsB;EACnB,CAAC,EACD;IACEvB,SAAS;IACTwB,SAAS,EAAE;EACb,CAAC,CACF;EACD;EACA,OAAOtB,KAAK;AACd,CAAC;AAAAuB,OAAA,CAAAC,OAAA,GAAA3B,QAAA;AAAA4B,MAAA,CAAAF,OAAA,GAAAA,OAAA,CAAAC,OAAA"}},"mtime":1682148437927},"{\"assumptions\":{},\"sourceRoot\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/database/models/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"filename\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/database/models/category.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/node_modules/babel-plugin-add-module-exports/lib/index.js\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-runtime\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"regenerator\":true},\"externalDependencies\":[]},{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.21.0:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _sequelize = require(\"sequelize\");\nvar _default = (sequelize, DataTypes) => {\n  /**\n   * class for model functions\n   */\n  class category extends _sequelize.Model {\n    // eslint-disable-next-line valid-jsdoc\n    /**\n     * Helper method for defining associations.\n     * This method is not a part of Sequelize lifecycle.\n     * The `models/index` file will call this method automatically.\n     */\n    static associate() {\n      // define association here\n    }\n  }\n  category.init({\n    id: {\n      type: DataTypes.INTEGER,\n      autoIncrement: true,\n      primaryKey: true\n    },\n    title: {\n      type: DataTypes.STRING,\n      allowNull: false\n    },\n    description: {\n      type: DataTypes.STRING(2000),\n      allowNull: false\n    }\n  }, {\n    sequelize,\n    modelName: 'category'\n  });\n  return category;\n};\nexports.default = _default;\nmodule.exports = exports.default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfc2VxdWVsaXplIiwicmVxdWlyZSIsIl9kZWZhdWx0Iiwic2VxdWVsaXplIiwiRGF0YVR5cGVzIiwiY2F0ZWdvcnkiLCJNb2RlbCIsImFzc29jaWF0ZSIsImluaXQiLCJpZCIsInR5cGUiLCJJTlRFR0VSIiwiYXV0b0luY3JlbWVudCIsInByaW1hcnlLZXkiLCJ0aXRsZSIsIlNUUklORyIsImFsbG93TnVsbCIsImRlc2NyaXB0aW9uIiwibW9kZWxOYW1lIiwiZXhwb3J0cyIsImRlZmF1bHQiLCJtb2R1bGUiXSwic291cmNlUm9vdCI6Ii9Vc2Vycy9hbmRlbGFyd2FuZGEvRGVza3RvcC9lLWNvbW0tdGVhbS1icm9ncmFtbWVycy1ibi9zcmMvZGF0YWJhc2UvbW9kZWxzLyIsInNvdXJjZXMiOlsiY2F0ZWdvcnkuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTW9kZWwgfSBmcm9tICdzZXF1ZWxpemUnO1xuXG5leHBvcnQgZGVmYXVsdCAoc2VxdWVsaXplLCBEYXRhVHlwZXMpID0+IHtcbiAgLyoqXG4gICAqIGNsYXNzIGZvciBtb2RlbCBmdW5jdGlvbnNcbiAgICovXG4gIGNsYXNzIGNhdGVnb3J5IGV4dGVuZHMgTW9kZWwge1xuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSB2YWxpZC1qc2RvY1xuICAgIC8qKlxuICAgICAqIEhlbHBlciBtZXRob2QgZm9yIGRlZmluaW5nIGFzc29jaWF0aW9ucy5cbiAgICAgKiBUaGlzIG1ldGhvZCBpcyBub3QgYSBwYXJ0IG9mIFNlcXVlbGl6ZSBsaWZlY3ljbGUuXG4gICAgICogVGhlIGBtb2RlbHMvaW5kZXhgIGZpbGUgd2lsbCBjYWxsIHRoaXMgbWV0aG9kIGF1dG9tYXRpY2FsbHkuXG4gICAgICovXG4gICAgc3RhdGljIGFzc29jaWF0ZSgpIHtcbiAgICAgIC8vIGRlZmluZSBhc3NvY2lhdGlvbiBoZXJlXG4gICAgfVxuICB9XG4gIGNhdGVnb3J5LmluaXQoXG4gICAge1xuICAgICAgaWQ6IHtcbiAgICAgICAgdHlwZTogRGF0YVR5cGVzLklOVEVHRVIsXG4gICAgICAgIGF1dG9JbmNyZW1lbnQ6IHRydWUsXG4gICAgICAgIHByaW1hcnlLZXk6IHRydWUsXG4gICAgICB9LFxuICAgICAgdGl0bGU6IHtcbiAgICAgICAgdHlwZTogRGF0YVR5cGVzLlNUUklORyxcbiAgICAgICAgYWxsb3dOdWxsOiBmYWxzZSxcbiAgICAgIH0sXG4gICAgICBkZXNjcmlwdGlvbjoge1xuICAgICAgICB0eXBlOiBEYXRhVHlwZXMuU1RSSU5HKDIwMDApLFxuICAgICAgICBhbGxvd051bGw6IGZhbHNlLFxuICAgICAgfSxcbiAgICB9LFxuICAgIHtcbiAgICAgIHNlcXVlbGl6ZSxcbiAgICAgIG1vZGVsTmFtZTogJ2NhdGVnb3J5JyxcbiAgICB9XG4gICk7XG4gIHJldHVybiBjYXRlZ29yeTtcbn07XG4iXSwibWFwcGluZ3MiOiI7Ozs7OztBQUFBLElBQUFBLFVBQUEsR0FBQUMsT0FBQTtBQUFrQyxJQUFBQyxRQUFBLEdBRW5CQSxDQUFDQyxTQUFTLEVBQUVDLFNBQVMsS0FBSztFQUN2QztBQUNGO0FBQ0E7RUFDRSxNQUFNQyxRQUFRLFNBQVNDLGdCQUFLLENBQUM7SUFDM0I7SUFDQTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0lBQ0ksT0FBT0MsU0FBU0EsQ0FBQSxFQUFHO01BQ2pCO0lBQUE7RUFFSjtFQUNBRixRQUFRLENBQUNHLElBQUksQ0FDWDtJQUNFQyxFQUFFLEVBQUU7TUFDRkMsSUFBSSxFQUFFTixTQUFTLENBQUNPLE9BQU87TUFDdkJDLGFBQWEsRUFBRSxJQUFJO01BQ25CQyxVQUFVLEVBQUU7SUFDZCxDQUFDO0lBQ0RDLEtBQUssRUFBRTtNQUNMSixJQUFJLEVBQUVOLFNBQVMsQ0FBQ1csTUFBTTtNQUN0QkMsU0FBUyxFQUFFO0lBQ2IsQ0FBQztJQUNEQyxXQUFXLEVBQUU7TUFDWFAsSUFBSSxFQUFFTixTQUFTLENBQUNXLE1BQU0sQ0FBQyxJQUFJLENBQUM7TUFDNUJDLFNBQVMsRUFBRTtJQUNiO0VBQ0YsQ0FBQyxFQUNEO0lBQ0ViLFNBQVM7SUFDVGUsU0FBUyxFQUFFO0VBQ2IsQ0FBQyxDQUNGO0VBQ0QsT0FBT2IsUUFBUTtBQUNqQixDQUFDO0FBQUFjLE9BQUEsQ0FBQUMsT0FBQSxHQUFBbEIsUUFBQTtBQUFBbUIsTUFBQSxDQUFBRixPQUFBLEdBQUFBLE9BQUEsQ0FBQUMsT0FBQSJ9","map":{"version":3,"names":["_sequelize","require","_default","sequelize","DataTypes","category","Model","associate","init","id","type","INTEGER","autoIncrement","primaryKey","title","STRING","allowNull","description","modelName","exports","default","module"],"sourceRoot":"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/database/models/","sources":["category.js"],"sourcesContent":["import { Model } from 'sequelize';\n\nexport default (sequelize, DataTypes) => {\n  /**\n   * class for model functions\n   */\n  class category extends Model {\n    // eslint-disable-next-line valid-jsdoc\n    /**\n     * Helper method for defining associations.\n     * This method is not a part of Sequelize lifecycle.\n     * The `models/index` file will call this method automatically.\n     */\n    static associate() {\n      // define association here\n    }\n  }\n  category.init(\n    {\n      id: {\n        type: DataTypes.INTEGER,\n        autoIncrement: true,\n        primaryKey: true,\n      },\n      title: {\n        type: DataTypes.STRING,\n        allowNull: false,\n      },\n      description: {\n        type: DataTypes.STRING(2000),\n        allowNull: false,\n      },\n    },\n    {\n      sequelize,\n      modelName: 'category',\n    }\n  );\n  return category;\n};\n"],"mappings":";;;;;;AAAA,IAAAA,UAAA,GAAAC,OAAA;AAAkC,IAAAC,QAAA,GAEnBA,CAACC,SAAS,EAAEC,SAAS,KAAK;EACvC;AACF;AACA;EACE,MAAMC,QAAQ,SAASC,gBAAK,CAAC;IAC3B;IACA;AACJ;AACA;AACA;AACA;IACI,OAAOC,SAASA,CAAA,EAAG;MACjB;IAAA;EAEJ;EACAF,QAAQ,CAACG,IAAI,CACX;IACEC,EAAE,EAAE;MACFC,IAAI,EAAEN,SAAS,CAACO,OAAO;MACvBC,aAAa,EAAE,IAAI;MACnBC,UAAU,EAAE;IACd,CAAC;IACDC,KAAK,EAAE;MACLJ,IAAI,EAAEN,SAAS,CAACW,MAAM;MACtBC,SAAS,EAAE;IACb,CAAC;IACDC,WAAW,EAAE;MACXP,IAAI,EAAEN,SAAS,CAACW,MAAM,CAAC,IAAI,CAAC;MAC5BC,SAAS,EAAE;IACb;EACF,CAAC,EACD;IACEb,SAAS;IACTe,SAAS,EAAE;EACb,CAAC,CACF;EACD,OAAOb,QAAQ;AACjB,CAAC;AAAAc,OAAA,CAAAC,OAAA,GAAAlB,QAAA;AAAAmB,MAAA,CAAAF,OAAA,GAAAA,OAAA,CAAAC,OAAA"}},"mtime":1682148437927},"{\"assumptions\":{},\"sourceRoot\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/database/models/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"filename\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/database/models/chat.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/node_modules/babel-plugin-add-module-exports/lib/index.js\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-runtime\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"regenerator\":true},\"externalDependencies\":[]},{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.21.0:development":{"value":{"code":"\"use strict\";\n\n/* eslint-disable require-jsdoc */\n/* eslint-disable valid-jsdoc */\nconst {\n  Model\n} = require('sequelize');\nmodule.exports = (sequelize, DataTypes) => {\n  class Chat extends Model {\n    /**\n     * Helper method for defining associations.\n     * This method is not a part of Sequelize lifecycle.\n     * The `models/index` file will call this method automatically.\n     */\n    static associate(models) {\n      models.users.hasMany(Chat, {\n        foreignKey: 'userId',\n        onDelete: 'CASCADE'\n      });\n      Chat.belongsTo(models.users, {\n        foreignKey: 'userId',\n        as: 'user'\n      });\n    }\n  }\n  Chat.init({\n    id: {\n      allowNull: false,\n      primaryKey: true,\n      type: DataTypes.UUID,\n      defaultValue: DataTypes.UUIDV4\n    },\n    room: {\n      type: DataTypes.STRING,\n      default: 'brogrammers',\n      allowNull: false\n    },\n    message: {\n      type: DataTypes.STRING(10000),\n      allowNull: false\n    }\n  }, {\n    sequelize,\n    freezeTableName: true,\n    modelName: 'Chat'\n  });\n  return Chat;\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJNb2RlbCIsInJlcXVpcmUiLCJtb2R1bGUiLCJleHBvcnRzIiwic2VxdWVsaXplIiwiRGF0YVR5cGVzIiwiQ2hhdCIsImFzc29jaWF0ZSIsIm1vZGVscyIsInVzZXJzIiwiaGFzTWFueSIsImZvcmVpZ25LZXkiLCJvbkRlbGV0ZSIsImJlbG9uZ3NUbyIsImFzIiwiaW5pdCIsImlkIiwiYWxsb3dOdWxsIiwicHJpbWFyeUtleSIsInR5cGUiLCJVVUlEIiwiZGVmYXVsdFZhbHVlIiwiVVVJRFY0Iiwicm9vbSIsIlNUUklORyIsImRlZmF1bHQiLCJtZXNzYWdlIiwiZnJlZXplVGFibGVOYW1lIiwibW9kZWxOYW1lIl0sInNvdXJjZVJvb3QiOiIvVXNlcnMvYW5kZWxhcndhbmRhL0Rlc2t0b3AvZS1jb21tLXRlYW0tYnJvZ3JhbW1lcnMtYm4vc3JjL2RhdGFiYXNlL21vZGVscy8iLCJzb3VyY2VzIjpbImNoYXQuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLyogZXNsaW50LWRpc2FibGUgcmVxdWlyZS1qc2RvYyAqL1xuLyogZXNsaW50LWRpc2FibGUgdmFsaWQtanNkb2MgKi9cbmNvbnN0IHsgTW9kZWwgfSA9IHJlcXVpcmUoJ3NlcXVlbGl6ZScpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IChzZXF1ZWxpemUsIERhdGFUeXBlcykgPT4ge1xuICBjbGFzcyBDaGF0IGV4dGVuZHMgTW9kZWwge1xuICAgIC8qKlxuICAgICAqIEhlbHBlciBtZXRob2QgZm9yIGRlZmluaW5nIGFzc29jaWF0aW9ucy5cbiAgICAgKiBUaGlzIG1ldGhvZCBpcyBub3QgYSBwYXJ0IG9mIFNlcXVlbGl6ZSBsaWZlY3ljbGUuXG4gICAgICogVGhlIGBtb2RlbHMvaW5kZXhgIGZpbGUgd2lsbCBjYWxsIHRoaXMgbWV0aG9kIGF1dG9tYXRpY2FsbHkuXG4gICAgICovXG4gICAgc3RhdGljIGFzc29jaWF0ZShtb2RlbHMpIHtcbiAgICAgIG1vZGVscy51c2Vycy5oYXNNYW55KENoYXQsIHtcbiAgICAgICAgZm9yZWlnbktleTogJ3VzZXJJZCcsXG4gICAgICAgIG9uRGVsZXRlOiAnQ0FTQ0FERScsXG4gICAgICB9KTtcbiAgICAgIENoYXQuYmVsb25nc1RvKG1vZGVscy51c2Vycywge1xuICAgICAgICBmb3JlaWduS2V5OiAndXNlcklkJyxcbiAgICAgICAgYXM6ICd1c2VyJyxcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuICBDaGF0LmluaXQoXG4gICAge1xuICAgICAgaWQ6IHtcbiAgICAgICAgYWxsb3dOdWxsOiBmYWxzZSxcbiAgICAgICAgcHJpbWFyeUtleTogdHJ1ZSxcbiAgICAgICAgdHlwZTogRGF0YVR5cGVzLlVVSUQsXG4gICAgICAgIGRlZmF1bHRWYWx1ZTogRGF0YVR5cGVzLlVVSURWNCxcbiAgICAgIH0sXG4gICAgICByb29tOiB7XG4gICAgICAgIHR5cGU6IERhdGFUeXBlcy5TVFJJTkcsXG4gICAgICAgIGRlZmF1bHQ6ICdicm9ncmFtbWVycycsXG4gICAgICAgIGFsbG93TnVsbDogZmFsc2UsXG4gICAgICB9LFxuICAgICAgbWVzc2FnZToge1xuICAgICAgICB0eXBlOiBEYXRhVHlwZXMuU1RSSU5HKDEwMDAwKSxcbiAgICAgICAgYWxsb3dOdWxsOiBmYWxzZSxcbiAgICAgIH0sXG4gICAgfSxcbiAgICB7XG4gICAgICBzZXF1ZWxpemUsXG4gICAgICBmcmVlemVUYWJsZU5hbWU6IHRydWUsXG4gICAgICBtb2RlbE5hbWU6ICdDaGF0JyxcbiAgICB9XG4gICk7XG4gIHJldHVybiBDaGF0O1xufTtcbiJdLCJtYXBwaW5ncyI6Ijs7QUFBQTtBQUNBO0FBQ0EsTUFBTTtFQUFFQTtBQUFNLENBQUMsR0FBR0MsT0FBTyxDQUFDLFdBQVcsQ0FBQztBQUV0Q0MsTUFBTSxDQUFDQyxPQUFPLEdBQUcsQ0FBQ0MsU0FBUyxFQUFFQyxTQUFTLEtBQUs7RUFDekMsTUFBTUMsSUFBSSxTQUFTTixLQUFLLENBQUM7SUFDdkI7QUFDSjtBQUNBO0FBQ0E7QUFDQTtJQUNJLE9BQU9PLFNBQVNBLENBQUNDLE1BQU0sRUFBRTtNQUN2QkEsTUFBTSxDQUFDQyxLQUFLLENBQUNDLE9BQU8sQ0FBQ0osSUFBSSxFQUFFO1FBQ3pCSyxVQUFVLEVBQUUsUUFBUTtRQUNwQkMsUUFBUSxFQUFFO01BQ1osQ0FBQyxDQUFDO01BQ0ZOLElBQUksQ0FBQ08sU0FBUyxDQUFDTCxNQUFNLENBQUNDLEtBQUssRUFBRTtRQUMzQkUsVUFBVSxFQUFFLFFBQVE7UUFDcEJHLEVBQUUsRUFBRTtNQUNOLENBQUMsQ0FBQztJQUNKO0VBQ0Y7RUFDQVIsSUFBSSxDQUFDUyxJQUFJLENBQ1A7SUFDRUMsRUFBRSxFQUFFO01BQ0ZDLFNBQVMsRUFBRSxLQUFLO01BQ2hCQyxVQUFVLEVBQUUsSUFBSTtNQUNoQkMsSUFBSSxFQUFFZCxTQUFTLENBQUNlLElBQUk7TUFDcEJDLFlBQVksRUFBRWhCLFNBQVMsQ0FBQ2lCO0lBQzFCLENBQUM7SUFDREMsSUFBSSxFQUFFO01BQ0pKLElBQUksRUFBRWQsU0FBUyxDQUFDbUIsTUFBTTtNQUN0QkMsT0FBTyxFQUFFLGFBQWE7TUFDdEJSLFNBQVMsRUFBRTtJQUNiLENBQUM7SUFDRFMsT0FBTyxFQUFFO01BQ1BQLElBQUksRUFBRWQsU0FBUyxDQUFDbUIsTUFBTSxDQUFDLEtBQUssQ0FBQztNQUM3QlAsU0FBUyxFQUFFO0lBQ2I7RUFDRixDQUFDLEVBQ0Q7SUFDRWIsU0FBUztJQUNUdUIsZUFBZSxFQUFFLElBQUk7SUFDckJDLFNBQVMsRUFBRTtFQUNiLENBQUMsQ0FDRjtFQUNELE9BQU90QixJQUFJO0FBQ2IsQ0FBQyJ9","map":{"version":3,"names":["Model","require","module","exports","sequelize","DataTypes","Chat","associate","models","users","hasMany","foreignKey","onDelete","belongsTo","as","init","id","allowNull","primaryKey","type","UUID","defaultValue","UUIDV4","room","STRING","default","message","freezeTableName","modelName"],"sourceRoot":"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/database/models/","sources":["chat.js"],"sourcesContent":["/* eslint-disable require-jsdoc */\n/* eslint-disable valid-jsdoc */\nconst { Model } = require('sequelize');\n\nmodule.exports = (sequelize, DataTypes) => {\n  class Chat extends Model {\n    /**\n     * Helper method for defining associations.\n     * This method is not a part of Sequelize lifecycle.\n     * The `models/index` file will call this method automatically.\n     */\n    static associate(models) {\n      models.users.hasMany(Chat, {\n        foreignKey: 'userId',\n        onDelete: 'CASCADE',\n      });\n      Chat.belongsTo(models.users, {\n        foreignKey: 'userId',\n        as: 'user',\n      });\n    }\n  }\n  Chat.init(\n    {\n      id: {\n        allowNull: false,\n        primaryKey: true,\n        type: DataTypes.UUID,\n        defaultValue: DataTypes.UUIDV4,\n      },\n      room: {\n        type: DataTypes.STRING,\n        default: 'brogrammers',\n        allowNull: false,\n      },\n      message: {\n        type: DataTypes.STRING(10000),\n        allowNull: false,\n      },\n    },\n    {\n      sequelize,\n      freezeTableName: true,\n      modelName: 'Chat',\n    }\n  );\n  return Chat;\n};\n"],"mappings":";;AAAA;AACA;AACA,MAAM;EAAEA;AAAM,CAAC,GAAGC,OAAO,CAAC,WAAW,CAAC;AAEtCC,MAAM,CAACC,OAAO,GAAG,CAACC,SAAS,EAAEC,SAAS,KAAK;EACzC,MAAMC,IAAI,SAASN,KAAK,CAAC;IACvB;AACJ;AACA;AACA;AACA;IACI,OAAOO,SAASA,CAACC,MAAM,EAAE;MACvBA,MAAM,CAACC,KAAK,CAACC,OAAO,CAACJ,IAAI,EAAE;QACzBK,UAAU,EAAE,QAAQ;QACpBC,QAAQ,EAAE;MACZ,CAAC,CAAC;MACFN,IAAI,CAACO,SAAS,CAACL,MAAM,CAACC,KAAK,EAAE;QAC3BE,UAAU,EAAE,QAAQ;QACpBG,EAAE,EAAE;MACN,CAAC,CAAC;IACJ;EACF;EACAR,IAAI,CAACS,IAAI,CACP;IACEC,EAAE,EAAE;MACFC,SAAS,EAAE,KAAK;MAChBC,UAAU,EAAE,IAAI;MAChBC,IAAI,EAAEd,SAAS,CAACe,IAAI;MACpBC,YAAY,EAAEhB,SAAS,CAACiB;IAC1B,CAAC;IACDC,IAAI,EAAE;MACJJ,IAAI,EAAEd,SAAS,CAACmB,MAAM;MACtBC,OAAO,EAAE,aAAa;MACtBR,SAAS,EAAE;IACb,CAAC;IACDS,OAAO,EAAE;MACPP,IAAI,EAAEd,SAAS,CAACmB,MAAM,CAAC,KAAK,CAAC;MAC7BP,SAAS,EAAE;IACb;EACF,CAAC,EACD;IACEb,SAAS;IACTuB,eAAe,EAAE,IAAI;IACrBC,SAAS,EAAE;EACb,CAAC,CACF;EACD,OAAOtB,IAAI;AACb,CAAC"}},"mtime":1682148437927},"{\"assumptions\":{},\"sourceRoot\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/database/models/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"filename\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/database/models/log.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/node_modules/babel-plugin-add-module-exports/lib/index.js\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-runtime\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"regenerator\":true},\"externalDependencies\":[]},{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.21.0:development":{"value":{"code":"\"use strict\";\n\n/* eslint-disable require-jsdoc */\n/* eslint-disable valid-jsdoc */\nconst {\n  Model\n} = require('sequelize');\nmodule.exports = (sequelize, DataTypes) => {\n  class Log extends Model {\n    /**\n     * Helper method for defining associations.\n     * This method is not a part of Sequelize lifecycle.\n     * The `models/index` file will call this method automatically.\n     */\n    static associate(models) {\n      // define association here\n      models.users.hasMany(Log, {\n        foreignKey: 'userId',\n        onDelete: 'CASCADE'\n      });\n      Log.belongsTo(models.users, {\n        foreignKey: 'userId',\n        as: 'user'\n      });\n    }\n  }\n  Log.init({\n    id: {\n      allowNull: false,\n      primaryKey: true,\n      type: DataTypes.UUID,\n      defaultValue: DataTypes.UUIDV4\n    },\n    level: DataTypes.STRING,\n    message: DataTypes.STRING,\n    userId: {\n      type: DataTypes.UUID,\n      allowNull: false\n    },\n    metadata: DataTypes.JSON\n  }, {\n    sequelize,\n    freezeTableName: true,\n    modelName: 'Log'\n  });\n  return Log;\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJNb2RlbCIsInJlcXVpcmUiLCJtb2R1bGUiLCJleHBvcnRzIiwic2VxdWVsaXplIiwiRGF0YVR5cGVzIiwiTG9nIiwiYXNzb2NpYXRlIiwibW9kZWxzIiwidXNlcnMiLCJoYXNNYW55IiwiZm9yZWlnbktleSIsIm9uRGVsZXRlIiwiYmVsb25nc1RvIiwiYXMiLCJpbml0IiwiaWQiLCJhbGxvd051bGwiLCJwcmltYXJ5S2V5IiwidHlwZSIsIlVVSUQiLCJkZWZhdWx0VmFsdWUiLCJVVUlEVjQiLCJsZXZlbCIsIlNUUklORyIsIm1lc3NhZ2UiLCJ1c2VySWQiLCJtZXRhZGF0YSIsIkpTT04iLCJmcmVlemVUYWJsZU5hbWUiLCJtb2RlbE5hbWUiXSwic291cmNlUm9vdCI6Ii9Vc2Vycy9hbmRlbGFyd2FuZGEvRGVza3RvcC9lLWNvbW0tdGVhbS1icm9ncmFtbWVycy1ibi9zcmMvZGF0YWJhc2UvbW9kZWxzLyIsInNvdXJjZXMiOlsibG9nLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qIGVzbGludC1kaXNhYmxlIHJlcXVpcmUtanNkb2MgKi9cbi8qIGVzbGludC1kaXNhYmxlIHZhbGlkLWpzZG9jICovXG5jb25zdCB7XG4gIE1vZGVsXG59ID0gcmVxdWlyZSgnc2VxdWVsaXplJyk7XG5cbm1vZHVsZS5leHBvcnRzID0gKHNlcXVlbGl6ZSwgRGF0YVR5cGVzKSA9PiB7XG4gIGNsYXNzIExvZyBleHRlbmRzIE1vZGVsIHtcbiAgICAvKipcbiAgICAgKiBIZWxwZXIgbWV0aG9kIGZvciBkZWZpbmluZyBhc3NvY2lhdGlvbnMuXG4gICAgICogVGhpcyBtZXRob2QgaXMgbm90IGEgcGFydCBvZiBTZXF1ZWxpemUgbGlmZWN5Y2xlLlxuICAgICAqIFRoZSBgbW9kZWxzL2luZGV4YCBmaWxlIHdpbGwgY2FsbCB0aGlzIG1ldGhvZCBhdXRvbWF0aWNhbGx5LlxuICAgICAqL1xuICAgIHN0YXRpYyBhc3NvY2lhdGUobW9kZWxzKSB7XG4gICAgICAvLyBkZWZpbmUgYXNzb2NpYXRpb24gaGVyZVxuICAgICAgbW9kZWxzLnVzZXJzLmhhc01hbnkoTG9nLCB7XG4gICAgICAgIGZvcmVpZ25LZXk6ICd1c2VySWQnLFxuICAgICAgICBvbkRlbGV0ZTogJ0NBU0NBREUnLFxuICAgICAgfSk7XG4gICAgICBMb2cuYmVsb25nc1RvKG1vZGVscy51c2Vycywge1xuICAgICAgICBmb3JlaWduS2V5OiAndXNlcklkJyxcbiAgICAgICAgYXM6ICd1c2VyJyxcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuICBMb2cuaW5pdCh7XG4gICAgaWQ6IHtcbiAgICAgIGFsbG93TnVsbDogZmFsc2UsXG4gICAgICBwcmltYXJ5S2V5OiB0cnVlLFxuICAgICAgdHlwZTogRGF0YVR5cGVzLlVVSUQsXG4gICAgICBkZWZhdWx0VmFsdWU6IERhdGFUeXBlcy5VVUlEVjQsXG4gICAgfSxcbiAgICBsZXZlbDogRGF0YVR5cGVzLlNUUklORyxcbiAgICBtZXNzYWdlOiBEYXRhVHlwZXMuU1RSSU5HLFxuICAgIHVzZXJJZDoge1xuICAgICAgdHlwZTogRGF0YVR5cGVzLlVVSUQsXG4gICAgICBhbGxvd051bGw6IGZhbHNlLFxuICAgIH0sXG4gICAgbWV0YWRhdGE6IERhdGFUeXBlcy5KU09OLFxuICB9LCB7XG4gICAgc2VxdWVsaXplLFxuICAgIGZyZWV6ZVRhYmxlTmFtZTogdHJ1ZSxcbiAgICBtb2RlbE5hbWU6ICdMb2cnLFxuICB9KTtcbiAgcmV0dXJuIExvZztcbn07XG4iXSwibWFwcGluZ3MiOiI7O0FBQUE7QUFDQTtBQUNBLE1BQU07RUFDSkE7QUFDRixDQUFDLEdBQUdDLE9BQU8sQ0FBQyxXQUFXLENBQUM7QUFFeEJDLE1BQU0sQ0FBQ0MsT0FBTyxHQUFHLENBQUNDLFNBQVMsRUFBRUMsU0FBUyxLQUFLO0VBQ3pDLE1BQU1DLEdBQUcsU0FBU04sS0FBSyxDQUFDO0lBQ3RCO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7SUFDSSxPQUFPTyxTQUFTQSxDQUFDQyxNQUFNLEVBQUU7TUFDdkI7TUFDQUEsTUFBTSxDQUFDQyxLQUFLLENBQUNDLE9BQU8sQ0FBQ0osR0FBRyxFQUFFO1FBQ3hCSyxVQUFVLEVBQUUsUUFBUTtRQUNwQkMsUUFBUSxFQUFFO01BQ1osQ0FBQyxDQUFDO01BQ0ZOLEdBQUcsQ0FBQ08sU0FBUyxDQUFDTCxNQUFNLENBQUNDLEtBQUssRUFBRTtRQUMxQkUsVUFBVSxFQUFFLFFBQVE7UUFDcEJHLEVBQUUsRUFBRTtNQUNOLENBQUMsQ0FBQztJQUNKO0VBQ0Y7RUFDQVIsR0FBRyxDQUFDUyxJQUFJLENBQUM7SUFDUEMsRUFBRSxFQUFFO01BQ0ZDLFNBQVMsRUFBRSxLQUFLO01BQ2hCQyxVQUFVLEVBQUUsSUFBSTtNQUNoQkMsSUFBSSxFQUFFZCxTQUFTLENBQUNlLElBQUk7TUFDcEJDLFlBQVksRUFBRWhCLFNBQVMsQ0FBQ2lCO0lBQzFCLENBQUM7SUFDREMsS0FBSyxFQUFFbEIsU0FBUyxDQUFDbUIsTUFBTTtJQUN2QkMsT0FBTyxFQUFFcEIsU0FBUyxDQUFDbUIsTUFBTTtJQUN6QkUsTUFBTSxFQUFFO01BQ05QLElBQUksRUFBRWQsU0FBUyxDQUFDZSxJQUFJO01BQ3BCSCxTQUFTLEVBQUU7SUFDYixDQUFDO0lBQ0RVLFFBQVEsRUFBRXRCLFNBQVMsQ0FBQ3VCO0VBQ3RCLENBQUMsRUFBRTtJQUNEeEIsU0FBUztJQUNUeUIsZUFBZSxFQUFFLElBQUk7SUFDckJDLFNBQVMsRUFBRTtFQUNiLENBQUMsQ0FBQztFQUNGLE9BQU94QixHQUFHO0FBQ1osQ0FBQyJ9","map":{"version":3,"names":["Model","require","module","exports","sequelize","DataTypes","Log","associate","models","users","hasMany","foreignKey","onDelete","belongsTo","as","init","id","allowNull","primaryKey","type","UUID","defaultValue","UUIDV4","level","STRING","message","userId","metadata","JSON","freezeTableName","modelName"],"sourceRoot":"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/database/models/","sources":["log.js"],"sourcesContent":["/* eslint-disable require-jsdoc */\n/* eslint-disable valid-jsdoc */\nconst {\n  Model\n} = require('sequelize');\n\nmodule.exports = (sequelize, DataTypes) => {\n  class Log extends Model {\n    /**\n     * Helper method for defining associations.\n     * This method is not a part of Sequelize lifecycle.\n     * The `models/index` file will call this method automatically.\n     */\n    static associate(models) {\n      // define association here\n      models.users.hasMany(Log, {\n        foreignKey: 'userId',\n        onDelete: 'CASCADE',\n      });\n      Log.belongsTo(models.users, {\n        foreignKey: 'userId',\n        as: 'user',\n      });\n    }\n  }\n  Log.init({\n    id: {\n      allowNull: false,\n      primaryKey: true,\n      type: DataTypes.UUID,\n      defaultValue: DataTypes.UUIDV4,\n    },\n    level: DataTypes.STRING,\n    message: DataTypes.STRING,\n    userId: {\n      type: DataTypes.UUID,\n      allowNull: false,\n    },\n    metadata: DataTypes.JSON,\n  }, {\n    sequelize,\n    freezeTableName: true,\n    modelName: 'Log',\n  });\n  return Log;\n};\n"],"mappings":";;AAAA;AACA;AACA,MAAM;EACJA;AACF,CAAC,GAAGC,OAAO,CAAC,WAAW,CAAC;AAExBC,MAAM,CAACC,OAAO,GAAG,CAACC,SAAS,EAAEC,SAAS,KAAK;EACzC,MAAMC,GAAG,SAASN,KAAK,CAAC;IACtB;AACJ;AACA;AACA;AACA;IACI,OAAOO,SAASA,CAACC,MAAM,EAAE;MACvB;MACAA,MAAM,CAACC,KAAK,CAACC,OAAO,CAACJ,GAAG,EAAE;QACxBK,UAAU,EAAE,QAAQ;QACpBC,QAAQ,EAAE;MACZ,CAAC,CAAC;MACFN,GAAG,CAACO,SAAS,CAACL,MAAM,CAACC,KAAK,EAAE;QAC1BE,UAAU,EAAE,QAAQ;QACpBG,EAAE,EAAE;MACN,CAAC,CAAC;IACJ;EACF;EACAR,GAAG,CAACS,IAAI,CAAC;IACPC,EAAE,EAAE;MACFC,SAAS,EAAE,KAAK;MAChBC,UAAU,EAAE,IAAI;MAChBC,IAAI,EAAEd,SAAS,CAACe,IAAI;MACpBC,YAAY,EAAEhB,SAAS,CAACiB;IAC1B,CAAC;IACDC,KAAK,EAAElB,SAAS,CAACmB,MAAM;IACvBC,OAAO,EAAEpB,SAAS,CAACmB,MAAM;IACzBE,MAAM,EAAE;MACNP,IAAI,EAAEd,SAAS,CAACe,IAAI;MACpBH,SAAS,EAAE;IACb,CAAC;IACDU,QAAQ,EAAEtB,SAAS,CAACuB;EACtB,CAAC,EAAE;IACDxB,SAAS;IACTyB,eAAe,EAAE,IAAI;IACrBC,SAAS,EAAE;EACb,CAAC,CAAC;EACF,OAAOxB,GAAG;AACZ,CAAC"}},"mtime":1682148437928},"{\"assumptions\":{},\"sourceRoot\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/database/models/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"filename\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/database/models/notification.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/node_modules/babel-plugin-add-module-exports/lib/index.js\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-runtime\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"regenerator\":true},\"externalDependencies\":[]},{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.21.0:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _sequelize = require(\"sequelize\");\n/**\n * exporting the user model and it's features.\n * @param {Object} sequelize\n * @param {Object} DataTypes\n * @returns {Object} the model for user\n */\nvar _default = (sequelize, DataTypes) => {\n  // eslint-disable-next-line require-jsdoc\n  class notifications extends _sequelize.Model {\n    // eslint-disable-next-line valid-jsdoc\n    /**\n     * Helper method for defining associations.\n     * This method is not a part of Sequelize lifecycle.\n     * The `models/index` file will call this method automatically.\n     */\n    static associate(models) {\n      notifications.belongsTo(models.users, {\n        as: 'receiver',\n        foreignKey: 'receiverId'\n      });\n    }\n    // define association here\n  }\n\n  notifications.init({\n    id: {\n      type: DataTypes.UUID,\n      defaultValue: DataTypes.UUIDV4,\n      allowNull: false,\n      primaryKey: true\n    },\n    isRead: {\n      type: DataTypes.BOOLEAN,\n      defaultValue: false\n    },\n    receiverId: {\n      type: DataTypes.UUID,\n      allowNull: false,\n      references: {\n        model: 'users',\n        key: 'id'\n      }\n    },\n    message: DataTypes.STRING,\n    type: DataTypes.STRING\n  }, {\n    sequelize,\n    modelName: 'notifications'\n  });\n  return notifications;\n};\nexports.default = _default;\nmodule.exports = exports.default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfc2VxdWVsaXplIiwicmVxdWlyZSIsIl9kZWZhdWx0Iiwic2VxdWVsaXplIiwiRGF0YVR5cGVzIiwibm90aWZpY2F0aW9ucyIsIk1vZGVsIiwiYXNzb2NpYXRlIiwibW9kZWxzIiwiYmVsb25nc1RvIiwidXNlcnMiLCJhcyIsImZvcmVpZ25LZXkiLCJpbml0IiwiaWQiLCJ0eXBlIiwiVVVJRCIsImRlZmF1bHRWYWx1ZSIsIlVVSURWNCIsImFsbG93TnVsbCIsInByaW1hcnlLZXkiLCJpc1JlYWQiLCJCT09MRUFOIiwicmVjZWl2ZXJJZCIsInJlZmVyZW5jZXMiLCJtb2RlbCIsImtleSIsIm1lc3NhZ2UiLCJTVFJJTkciLCJtb2RlbE5hbWUiLCJleHBvcnRzIiwiZGVmYXVsdCIsIm1vZHVsZSJdLCJzb3VyY2VSb290IjoiL1VzZXJzL2FuZGVsYXJ3YW5kYS9EZXNrdG9wL2UtY29tbS10ZWFtLWJyb2dyYW1tZXJzLWJuL3NyYy9kYXRhYmFzZS9tb2RlbHMvIiwic291cmNlcyI6WyJub3RpZmljYXRpb24uanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTW9kZWwgfSBmcm9tICdzZXF1ZWxpemUnO1xuXG4vKipcbiAqIGV4cG9ydGluZyB0aGUgdXNlciBtb2RlbCBhbmQgaXQncyBmZWF0dXJlcy5cbiAqIEBwYXJhbSB7T2JqZWN0fSBzZXF1ZWxpemVcbiAqIEBwYXJhbSB7T2JqZWN0fSBEYXRhVHlwZXNcbiAqIEByZXR1cm5zIHtPYmplY3R9IHRoZSBtb2RlbCBmb3IgdXNlclxuICovXG5leHBvcnQgZGVmYXVsdCAoc2VxdWVsaXplLCBEYXRhVHlwZXMpID0+IHtcbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIHJlcXVpcmUtanNkb2NcbiAgY2xhc3Mgbm90aWZpY2F0aW9ucyBleHRlbmRzIE1vZGVsIHtcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgdmFsaWQtanNkb2NcbiAgICAvKipcbiAgICAgKiBIZWxwZXIgbWV0aG9kIGZvciBkZWZpbmluZyBhc3NvY2lhdGlvbnMuXG4gICAgICogVGhpcyBtZXRob2QgaXMgbm90IGEgcGFydCBvZiBTZXF1ZWxpemUgbGlmZWN5Y2xlLlxuICAgICAqIFRoZSBgbW9kZWxzL2luZGV4YCBmaWxlIHdpbGwgY2FsbCB0aGlzIG1ldGhvZCBhdXRvbWF0aWNhbGx5LlxuICAgICAqL1xuICAgIHN0YXRpYyBhc3NvY2lhdGUobW9kZWxzKSB7XG4gICAgICBub3RpZmljYXRpb25zLmJlbG9uZ3NUbyhtb2RlbHMudXNlcnMsIHtcbiAgICAgICAgYXM6ICdyZWNlaXZlcicsXG4gICAgICAgIGZvcmVpZ25LZXk6ICdyZWNlaXZlcklkJyxcbiAgICAgIH0pO1xuICAgIH1cbiAgICAvLyBkZWZpbmUgYXNzb2NpYXRpb24gaGVyZVxuICB9XG4gIG5vdGlmaWNhdGlvbnMuaW5pdChcbiAgICB7XG4gICAgICBpZDoge1xuICAgICAgICB0eXBlOiBEYXRhVHlwZXMuVVVJRCxcbiAgICAgICAgZGVmYXVsdFZhbHVlOiBEYXRhVHlwZXMuVVVJRFY0LFxuICAgICAgICBhbGxvd051bGw6IGZhbHNlLFxuICAgICAgICBwcmltYXJ5S2V5OiB0cnVlLFxuICAgICAgfSxcbiAgICAgIGlzUmVhZDoge1xuICAgICAgICB0eXBlOiBEYXRhVHlwZXMuQk9PTEVBTixcbiAgICAgICAgZGVmYXVsdFZhbHVlOiBmYWxzZSxcbiAgICAgIH0sXG4gICAgICByZWNlaXZlcklkOiB7XG4gICAgICAgIHR5cGU6IERhdGFUeXBlcy5VVUlELFxuICAgICAgICBhbGxvd051bGw6IGZhbHNlLFxuICAgICAgICByZWZlcmVuY2VzOiB7XG4gICAgICAgICAgbW9kZWw6ICd1c2VycycsXG4gICAgICAgICAga2V5OiAnaWQnLFxuICAgICAgICB9LFxuICAgICAgfSxcbiAgICAgIG1lc3NhZ2U6IERhdGFUeXBlcy5TVFJJTkcsXG4gICAgICB0eXBlOiBEYXRhVHlwZXMuU1RSSU5HLFxuICAgIH0sXG4gICAge1xuICAgICAgc2VxdWVsaXplLFxuICAgICAgbW9kZWxOYW1lOiAnbm90aWZpY2F0aW9ucycsXG4gICAgfVxuICApO1xuICByZXR1cm4gbm90aWZpY2F0aW9ucztcbn07XG4iXSwibWFwcGluZ3MiOiI7Ozs7OztBQUFBLElBQUFBLFVBQUEsR0FBQUMsT0FBQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUxBLElBQUFDLFFBQUEsR0FNZUEsQ0FBQ0MsU0FBUyxFQUFFQyxTQUFTLEtBQUs7RUFDdkM7RUFDQSxNQUFNQyxhQUFhLFNBQVNDLGdCQUFLLENBQUM7SUFDaEM7SUFDQTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0lBQ0ksT0FBT0MsU0FBU0EsQ0FBQ0MsTUFBTSxFQUFFO01BQ3ZCSCxhQUFhLENBQUNJLFNBQVMsQ0FBQ0QsTUFBTSxDQUFDRSxLQUFLLEVBQUU7UUFDcENDLEVBQUUsRUFBRSxVQUFVO1FBQ2RDLFVBQVUsRUFBRTtNQUNkLENBQUMsQ0FBQztJQUNKO0lBQ0E7RUFDRjs7RUFDQVAsYUFBYSxDQUFDUSxJQUFJLENBQ2hCO0lBQ0VDLEVBQUUsRUFBRTtNQUNGQyxJQUFJLEVBQUVYLFNBQVMsQ0FBQ1ksSUFBSTtNQUNwQkMsWUFBWSxFQUFFYixTQUFTLENBQUNjLE1BQU07TUFDOUJDLFNBQVMsRUFBRSxLQUFLO01BQ2hCQyxVQUFVLEVBQUU7SUFDZCxDQUFDO0lBQ0RDLE1BQU0sRUFBRTtNQUNOTixJQUFJLEVBQUVYLFNBQVMsQ0FBQ2tCLE9BQU87TUFDdkJMLFlBQVksRUFBRTtJQUNoQixDQUFDO0lBQ0RNLFVBQVUsRUFBRTtNQUNWUixJQUFJLEVBQUVYLFNBQVMsQ0FBQ1ksSUFBSTtNQUNwQkcsU0FBUyxFQUFFLEtBQUs7TUFDaEJLLFVBQVUsRUFBRTtRQUNWQyxLQUFLLEVBQUUsT0FBTztRQUNkQyxHQUFHLEVBQUU7TUFDUDtJQUNGLENBQUM7SUFDREMsT0FBTyxFQUFFdkIsU0FBUyxDQUFDd0IsTUFBTTtJQUN6QmIsSUFBSSxFQUFFWCxTQUFTLENBQUN3QjtFQUNsQixDQUFDLEVBQ0Q7SUFDRXpCLFNBQVM7SUFDVDBCLFNBQVMsRUFBRTtFQUNiLENBQUMsQ0FDRjtFQUNELE9BQU94QixhQUFhO0FBQ3RCLENBQUM7QUFBQXlCLE9BQUEsQ0FBQUMsT0FBQSxHQUFBN0IsUUFBQTtBQUFBOEIsTUFBQSxDQUFBRixPQUFBLEdBQUFBLE9BQUEsQ0FBQUMsT0FBQSJ9","map":{"version":3,"names":["_sequelize","require","_default","sequelize","DataTypes","notifications","Model","associate","models","belongsTo","users","as","foreignKey","init","id","type","UUID","defaultValue","UUIDV4","allowNull","primaryKey","isRead","BOOLEAN","receiverId","references","model","key","message","STRING","modelName","exports","default","module"],"sourceRoot":"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/database/models/","sources":["notification.js"],"sourcesContent":["import { Model } from 'sequelize';\n\n/**\n * exporting the user model and it's features.\n * @param {Object} sequelize\n * @param {Object} DataTypes\n * @returns {Object} the model for user\n */\nexport default (sequelize, DataTypes) => {\n  // eslint-disable-next-line require-jsdoc\n  class notifications extends Model {\n    // eslint-disable-next-line valid-jsdoc\n    /**\n     * Helper method for defining associations.\n     * This method is not a part of Sequelize lifecycle.\n     * The `models/index` file will call this method automatically.\n     */\n    static associate(models) {\n      notifications.belongsTo(models.users, {\n        as: 'receiver',\n        foreignKey: 'receiverId',\n      });\n    }\n    // define association here\n  }\n  notifications.init(\n    {\n      id: {\n        type: DataTypes.UUID,\n        defaultValue: DataTypes.UUIDV4,\n        allowNull: false,\n        primaryKey: true,\n      },\n      isRead: {\n        type: DataTypes.BOOLEAN,\n        defaultValue: false,\n      },\n      receiverId: {\n        type: DataTypes.UUID,\n        allowNull: false,\n        references: {\n          model: 'users',\n          key: 'id',\n        },\n      },\n      message: DataTypes.STRING,\n      type: DataTypes.STRING,\n    },\n    {\n      sequelize,\n      modelName: 'notifications',\n    }\n  );\n  return notifications;\n};\n"],"mappings":";;;;;;AAAA,IAAAA,UAAA,GAAAC,OAAA;AAEA;AACA;AACA;AACA;AACA;AACA;AALA,IAAAC,QAAA,GAMeA,CAACC,SAAS,EAAEC,SAAS,KAAK;EACvC;EACA,MAAMC,aAAa,SAASC,gBAAK,CAAC;IAChC;IACA;AACJ;AACA;AACA;AACA;IACI,OAAOC,SAASA,CAACC,MAAM,EAAE;MACvBH,aAAa,CAACI,SAAS,CAACD,MAAM,CAACE,KAAK,EAAE;QACpCC,EAAE,EAAE,UAAU;QACdC,UAAU,EAAE;MACd,CAAC,CAAC;IACJ;IACA;EACF;;EACAP,aAAa,CAACQ,IAAI,CAChB;IACEC,EAAE,EAAE;MACFC,IAAI,EAAEX,SAAS,CAACY,IAAI;MACpBC,YAAY,EAAEb,SAAS,CAACc,MAAM;MAC9BC,SAAS,EAAE,KAAK;MAChBC,UAAU,EAAE;IACd,CAAC;IACDC,MAAM,EAAE;MACNN,IAAI,EAAEX,SAAS,CAACkB,OAAO;MACvBL,YAAY,EAAE;IAChB,CAAC;IACDM,UAAU,EAAE;MACVR,IAAI,EAAEX,SAAS,CAACY,IAAI;MACpBG,SAAS,EAAE,KAAK;MAChBK,UAAU,EAAE;QACVC,KAAK,EAAE,OAAO;QACdC,GAAG,EAAE;MACP;IACF,CAAC;IACDC,OAAO,EAAEvB,SAAS,CAACwB,MAAM;IACzBb,IAAI,EAAEX,SAAS,CAACwB;EAClB,CAAC,EACD;IACEzB,SAAS;IACT0B,SAAS,EAAE;EACb,CAAC,CACF;EACD,OAAOxB,aAAa;AACtB,CAAC;AAAAyB,OAAA,CAAAC,OAAA,GAAA7B,QAAA;AAAA8B,MAAA,CAAAF,OAAA,GAAAA,OAAA,CAAAC,OAAA"}},"mtime":1682148437928},"{\"assumptions\":{},\"sourceRoot\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/database/models/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"filename\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/database/models/order.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/node_modules/babel-plugin-add-module-exports/lib/index.js\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-runtime\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"regenerator\":true},\"externalDependencies\":[]},{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.21.0:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _sequelize = require(\"sequelize\");\nvar _default = (sequelize, DataTypes) => {\n  // eslint-disable-next-line require-jsdoc\n  class order extends _sequelize.Model {\n    // eslint-disable-next-line require-jsdoc\n    static associate(models) {\n      order.belongsToMany(models.products, {\n        as: 'products',\n        through: 'orderitem',\n        foreignKey: 'orderId',\n        onDelete: 'cascade'\n      });\n      order.belongsTo(models.users, {\n        as: 'buyer',\n        foreignKey: 'buyerId',\n        onDelete: 'cascade'\n      });\n      order.hasOne(models.payments, {\n        as: 'payment',\n        foreignKey: 'orderId'\n      });\n    }\n  }\n  order.init({\n    id: {\n      type: DataTypes.UUID,\n      defaultValue: DataTypes.UUIDV4,\n      allowNull: false,\n      primaryKey: true\n    },\n    deliveryCountry: DataTypes.STRING,\n    deliveryCity: DataTypes.STRING,\n    deliveryStreet: {\n      type: DataTypes.STRING,\n      allowNull: false\n    },\n    orderNo: {\n      type: DataTypes.FLOAT,\n      allowNull: false\n    },\n    paymentMethod: {\n      type: DataTypes.STRING,\n      allowNull: false\n    },\n    isPaid: {\n      type: DataTypes.BOOLEAN,\n      defaultValue: false\n    },\n    status: {\n      type: DataTypes.STRING,\n      enum: ['Pending', 'Processing', 'Shipped', 'Delivered'],\n      defaultValue: 'Pending'\n    },\n    statusUpdated: {\n      type: DataTypes.BOOLEAN,\n      defaultValue: false\n    },\n    expectedDeliveryDate: {\n      type: DataTypes.DATE,\n      allowNull: true\n    },\n    totalAmount: {\n      type: DataTypes.DOUBLE,\n      allowNull: false\n    },\n    buyerId: {\n      type: DataTypes.UUID,\n      allowNull: false\n    }\n  }, {\n    sequelize,\n    freezeTableName: true,\n    modelName: 'order'\n  });\n  return order;\n};\nexports.default = _default;\nmodule.exports = exports.default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfc2VxdWVsaXplIiwicmVxdWlyZSIsIl9kZWZhdWx0Iiwic2VxdWVsaXplIiwiRGF0YVR5cGVzIiwib3JkZXIiLCJNb2RlbCIsImFzc29jaWF0ZSIsIm1vZGVscyIsImJlbG9uZ3NUb01hbnkiLCJwcm9kdWN0cyIsImFzIiwidGhyb3VnaCIsImZvcmVpZ25LZXkiLCJvbkRlbGV0ZSIsImJlbG9uZ3NUbyIsInVzZXJzIiwiaGFzT25lIiwicGF5bWVudHMiLCJpbml0IiwiaWQiLCJ0eXBlIiwiVVVJRCIsImRlZmF1bHRWYWx1ZSIsIlVVSURWNCIsImFsbG93TnVsbCIsInByaW1hcnlLZXkiLCJkZWxpdmVyeUNvdW50cnkiLCJTVFJJTkciLCJkZWxpdmVyeUNpdHkiLCJkZWxpdmVyeVN0cmVldCIsIm9yZGVyTm8iLCJGTE9BVCIsInBheW1lbnRNZXRob2QiLCJpc1BhaWQiLCJCT09MRUFOIiwic3RhdHVzIiwiZW51bSIsInN0YXR1c1VwZGF0ZWQiLCJleHBlY3RlZERlbGl2ZXJ5RGF0ZSIsIkRBVEUiLCJ0b3RhbEFtb3VudCIsIkRPVUJMRSIsImJ1eWVySWQiLCJmcmVlemVUYWJsZU5hbWUiLCJtb2RlbE5hbWUiLCJleHBvcnRzIiwiZGVmYXVsdCIsIm1vZHVsZSJdLCJzb3VyY2VSb290IjoiL1VzZXJzL2FuZGVsYXJ3YW5kYS9EZXNrdG9wL2UtY29tbS10ZWFtLWJyb2dyYW1tZXJzLWJuL3NyYy9kYXRhYmFzZS9tb2RlbHMvIiwic291cmNlcyI6WyJvcmRlci5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBNb2RlbCB9IGZyb20gJ3NlcXVlbGl6ZSc7XG5cbmV4cG9ydCBkZWZhdWx0IChzZXF1ZWxpemUsIERhdGFUeXBlcykgPT4ge1xuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgcmVxdWlyZS1qc2RvY1xuICBjbGFzcyBvcmRlciBleHRlbmRzIE1vZGVsIHtcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgcmVxdWlyZS1qc2RvY1xuICAgIHN0YXRpYyBhc3NvY2lhdGUobW9kZWxzKSB7XG4gICAgICBvcmRlci5iZWxvbmdzVG9NYW55KG1vZGVscy5wcm9kdWN0cywge1xuICAgICAgICBhczogJ3Byb2R1Y3RzJyxcbiAgICAgICAgdGhyb3VnaDogJ29yZGVyaXRlbScsXG4gICAgICAgIGZvcmVpZ25LZXk6ICdvcmRlcklkJyxcbiAgICAgICAgb25EZWxldGU6ICdjYXNjYWRlJyxcbiAgICAgIH0pO1xuICAgICAgb3JkZXIuYmVsb25nc1RvKG1vZGVscy51c2Vycywge1xuICAgICAgICBhczogJ2J1eWVyJyxcbiAgICAgICAgZm9yZWlnbktleTogJ2J1eWVySWQnLFxuICAgICAgICBvbkRlbGV0ZTogJ2Nhc2NhZGUnLFxuICAgICAgfSk7XG4gICAgICBvcmRlci5oYXNPbmUobW9kZWxzLnBheW1lbnRzLCB7IGFzOiAncGF5bWVudCcsIGZvcmVpZ25LZXk6ICdvcmRlcklkJyB9KTtcbiAgICB9XG4gIH1cbiAgb3JkZXIuaW5pdChcbiAgICB7XG4gICAgICBpZDoge1xuICAgICAgICB0eXBlOiBEYXRhVHlwZXMuVVVJRCxcbiAgICAgICAgZGVmYXVsdFZhbHVlOiBEYXRhVHlwZXMuVVVJRFY0LFxuICAgICAgICBhbGxvd051bGw6IGZhbHNlLFxuICAgICAgICBwcmltYXJ5S2V5OiB0cnVlLFxuICAgICAgfSxcbiAgICAgIGRlbGl2ZXJ5Q291bnRyeTogRGF0YVR5cGVzLlNUUklORyxcbiAgICAgIGRlbGl2ZXJ5Q2l0eTogRGF0YVR5cGVzLlNUUklORyxcbiAgICAgIGRlbGl2ZXJ5U3RyZWV0OiB7XG4gICAgICAgIHR5cGU6IERhdGFUeXBlcy5TVFJJTkcsXG4gICAgICAgIGFsbG93TnVsbDogZmFsc2UsXG4gICAgICB9LFxuICAgICAgb3JkZXJObzoge1xuICAgICAgICB0eXBlOiBEYXRhVHlwZXMuRkxPQVQsXG4gICAgICAgIGFsbG93TnVsbDogZmFsc2UsXG4gICAgICB9LFxuICAgICAgcGF5bWVudE1ldGhvZDoge1xuICAgICAgICB0eXBlOiBEYXRhVHlwZXMuU1RSSU5HLFxuICAgICAgICBhbGxvd051bGw6IGZhbHNlLFxuICAgICAgfSxcbiAgICAgIGlzUGFpZDoge1xuICAgICAgICB0eXBlOiBEYXRhVHlwZXMuQk9PTEVBTixcbiAgICAgICAgZGVmYXVsdFZhbHVlOiBmYWxzZSxcbiAgICAgIH0sXG4gICAgICBzdGF0dXM6IHtcbiAgICAgICAgdHlwZTogRGF0YVR5cGVzLlNUUklORyxcbiAgICAgICAgZW51bTogWydQZW5kaW5nJywgJ1Byb2Nlc3NpbmcnLCAnU2hpcHBlZCcsICdEZWxpdmVyZWQnXSxcbiAgICAgICAgZGVmYXVsdFZhbHVlOiAnUGVuZGluZycsXG4gICAgICB9LFxuICAgICAgc3RhdHVzVXBkYXRlZDoge1xuICAgICAgICB0eXBlOiBEYXRhVHlwZXMuQk9PTEVBTixcbiAgICAgICAgZGVmYXVsdFZhbHVlOiBmYWxzZSxcbiAgICAgIH0sXG4gICAgICBleHBlY3RlZERlbGl2ZXJ5RGF0ZToge1xuICAgICAgICB0eXBlOiBEYXRhVHlwZXMuREFURSxcbiAgICAgICAgYWxsb3dOdWxsOiB0cnVlLFxuICAgICAgfSxcbiAgICAgIHRvdGFsQW1vdW50OiB7XG4gICAgICAgIHR5cGU6IERhdGFUeXBlcy5ET1VCTEUsXG4gICAgICAgIGFsbG93TnVsbDogZmFsc2UsXG4gICAgICB9LFxuICAgICAgYnV5ZXJJZDoge1xuICAgICAgICB0eXBlOiBEYXRhVHlwZXMuVVVJRCxcbiAgICAgICAgYWxsb3dOdWxsOiBmYWxzZSxcbiAgICAgIH0sXG4gICAgfSxcbiAgICB7XG4gICAgICBzZXF1ZWxpemUsXG4gICAgICBmcmVlemVUYWJsZU5hbWU6IHRydWUsXG4gICAgICBtb2RlbE5hbWU6ICdvcmRlcicsXG4gICAgfVxuICApO1xuICByZXR1cm4gb3JkZXI7XG59O1xuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7QUFBQSxJQUFBQSxVQUFBLEdBQUFDLE9BQUE7QUFBa0MsSUFBQUMsUUFBQSxHQUVuQkEsQ0FBQ0MsU0FBUyxFQUFF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","map":{"version":3,"names":["_sequelize","require","_default","sequelize","DataTypes","order","Model","associate","models","belongsToMany","products","as","through","foreignKey","onDelete","belongsTo","users","hasOne","payments","init","id","type","UUID","defaultValue","UUIDV4","allowNull","primaryKey","deliveryCountry","STRING","deliveryCity","deliveryStreet","orderNo","FLOAT","paymentMethod","isPaid","BOOLEAN","status","enum","statusUpdated","expectedDeliveryDate","DATE","totalAmount","DOUBLE","buyerId","freezeTableName","modelName","exports","default","module"],"sourceRoot":"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/database/models/","sources":["order.js"],"sourcesContent":["import { Model } from 'sequelize';\n\nexport default (sequelize, DataTypes) => {\n  // eslint-disable-next-line require-jsdoc\n  class order extends Model {\n    // eslint-disable-next-line require-jsdoc\n    static associate(models) {\n      order.belongsToMany(models.products, {\n        as: 'products',\n        through: 'orderitem',\n        foreignKey: 'orderId',\n        onDelete: 'cascade',\n      });\n      order.belongsTo(models.users, {\n        as: 'buyer',\n        foreignKey: 'buyerId',\n        onDelete: 'cascade',\n      });\n      order.hasOne(models.payments, { as: 'payment', foreignKey: 'orderId' });\n    }\n  }\n  order.init(\n    {\n      id: {\n        type: DataTypes.UUID,\n        defaultValue: DataTypes.UUIDV4,\n        allowNull: false,\n        primaryKey: true,\n      },\n      deliveryCountry: DataTypes.STRING,\n      deliveryCity: DataTypes.STRING,\n      deliveryStreet: {\n        type: DataTypes.STRING,\n        allowNull: false,\n      },\n      orderNo: {\n        type: DataTypes.FLOAT,\n        allowNull: false,\n      },\n      paymentMethod: {\n        type: DataTypes.STRING,\n        allowNull: false,\n      },\n      isPaid: {\n        type: DataTypes.BOOLEAN,\n        defaultValue: false,\n      },\n      status: {\n        type: DataTypes.STRING,\n        enum: ['Pending', 'Processing', 'Shipped', 'Delivered'],\n        defaultValue: 'Pending',\n      },\n      statusUpdated: {\n        type: DataTypes.BOOLEAN,\n        defaultValue: false,\n      },\n      expectedDeliveryDate: {\n        type: DataTypes.DATE,\n        allowNull: true,\n      },\n      totalAmount: {\n        type: DataTypes.DOUBLE,\n        allowNull: false,\n      },\n      buyerId: {\n        type: DataTypes.UUID,\n        allowNull: false,\n      },\n    },\n    {\n      sequelize,\n      freezeTableName: true,\n      modelName: 'order',\n    }\n  );\n  return order;\n};\n"],"mappings":";;;;;;AAAA,IAAAA,UAAA,GAAAC,OAAA;AAAkC,IAAAC,QAAA,GAEnBA,CAACC,SAAS,EAAEC,SAAS,KAAK;EACvC;EACA,MAAMC,KAAK,SAASC,gBAAK,CAAC;IACxB;IACA,OAAOC,SAASA,CAACC,MAAM,EAAE;MACvBH,KAAK,CAACI,aAAa,CAACD,MAAM,CAACE,QAAQ,EAAE;QACnCC,EAAE,EAAE,UAAU;QACdC,OAAO,EAAE,WAAW;QACpBC,UAAU,EAAE,SAAS;QACrBC,QAAQ,EAAE;MACZ,CAAC,CAAC;MACFT,KAAK,CAACU,SAAS,CAACP,MAAM,CAACQ,KAAK,EAAE;QAC5BL,EAAE,EAAE,OAAO;QACXE,UAAU,EAAE,SAAS;QACrBC,QAAQ,EAAE;MACZ,CAAC,CAAC;MACFT,KAAK,CAACY,MAAM,CAACT,MAAM,CAACU,QAAQ,EAAE;QAAEP,EAAE,EAAE,SAAS;QAAEE,UAAU,EAAE;MAAU,CAAC,CAAC;IACzE;EACF;EACAR,KAAK,CAACc,IAAI,CACR;IACEC,EAAE,EAAE;MACFC,IAAI,EAAEjB,SAAS,CAACkB,IAAI;MACpBC,YAAY,EAAEnB,SAAS,CAACoB,MAAM;MAC9BC,SAAS,EAAE,KAAK;MAChBC,UAAU,EAAE;IACd,CAAC;IACDC,eAAe,EAAEvB,SAAS,CAACwB,MAAM;IACjCC,YAAY,EAAEzB,SAAS,CAACwB,MAAM;IAC9BE,cAAc,EAAE;MACdT,IAAI,EAAEjB,SAAS,CAACwB,MAAM;MACtBH,SAAS,EAAE;IACb,CAAC;IACDM,OAAO,EAAE;MACPV,IAAI,EAAEjB,SAAS,CAAC4B,KAAK;MACrBP,SAAS,EAAE;IACb,CAAC;IACDQ,aAAa,EAAE;MACbZ,IAAI,EAAEjB,SAAS,CAACwB,MAAM;MACtBH,SAAS,EAAE;IACb,CAAC;IACDS,MAAM,EAAE;MACNb,IAAI,EAAEjB,SAAS,CAAC+B,OAAO;MACvBZ,YAAY,EAAE;IAChB,CAAC;IACDa,MAAM,EAAE;MACNf,IAAI,EAAEjB,SAAS,CAACwB,MAAM;MACtBS,IAAI,EAAE,CAAC,SAAS,EAAE,YAAY,EAAE,SAAS,EAAE,WAAW,CAAC;MACvDd,YAAY,EAAE;IAChB,CAAC;IACDe,aAAa,EAAE;MACbjB,IAAI,EAAEjB,SAAS,CAAC+B,OAAO;MACvBZ,YAAY,EAAE;IAChB,CAAC;IACDgB,oBAAoB,EAAE;MACpBlB,IAAI,EAAEjB,SAAS,CAACoC,IAAI;MACpBf,SAAS,EAAE;IACb,CAAC;IACDgB,WAAW,EAAE;MACXpB,IAAI,EAAEjB,SAAS,CAACsC,MAAM;MACtBjB,SAAS,EAAE;IACb,CAAC;IACDkB,OAAO,EAAE;MACPtB,IAAI,EAAEjB,SAAS,CAACkB,IAAI;MACpBG,SAAS,EAAE;IACb;EACF,CAAC,EACD;IACEtB,SAAS;IACTyC,eAAe,EAAE,IAAI;IACrBC,SAAS,EAAE;EACb,CAAC,CACF;EACD,OAAOxC,KAAK;AACd,CAAC;AAAAyC,OAAA,CAAAC,OAAA,GAAA7C,QAAA;AAAA8C,MAAA,CAAAF,OAAA,GAAAA,OAAA,CAAAC,OAAA"}},"mtime":1685643189445},"{\"assumptions\":{},\"sourceRoot\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/database/models/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"filename\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/database/models/orderitem.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/node_modules/babel-plugin-add-module-exports/lib/index.js\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-runtime\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"regenerator\":true},\"externalDependencies\":[]},{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.21.0:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _sequelize = require(\"sequelize\");\nvar _default = (sequelize, DataTypes) => {\n  /**\n   * Order Item\n   */\n  class orderitem extends _sequelize.Model {\n    // eslint-disable-next-line require-jsdoc\n    static associate(models) {\n      // define association here\n\n      orderitem.belongsTo(models.products, {\n        as: 'product',\n        foreignKey: 'productId'\n      });\n      orderitem.belongsTo(models.order, {\n        as: 'order',\n        foreignKey: 'orderId'\n      });\n    }\n  }\n  orderitem.init({\n    id: {\n      type: DataTypes.UUID,\n      defaultValue: DataTypes.UUIDV4,\n      allowNull: false,\n      primaryKey: true\n    },\n    quantity: {\n      type: DataTypes.INTEGER,\n      allowNull: false,\n      defaultValue: 1\n    },\n    productId: {\n      type: DataTypes.UUID,\n      allowNull: false\n    },\n    orderId: {\n      type: DataTypes.UUID,\n      allowNull: false\n    },\n    statusUpdated: {\n      type: DataTypes.BOOLEAN,\n      defaultValue: false\n    },\n    expectedDeliveryDate: {\n      type: DataTypes.DATE,\n      allowNull: true\n    },\n    price: {\n      type: DataTypes.DOUBLE,\n      allowNull: false\n    }\n  }, {\n    sequelize,\n    freezeTableName: true,\n    modelName: 'orderitem',\n    timestamps: false\n  });\n  return orderitem;\n};\nexports.default = _default;\nmodule.exports = exports.default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfc2VxdWVsaXplIiwicmVxdWlyZSIsIl9kZWZhdWx0Iiwic2VxdWVsaXplIiwiRGF0YVR5cGVzIiwib3JkZXJpdGVtIiwiTW9kZWwiLCJhc3NvY2lhdGUiLCJtb2RlbHMiLCJiZWxvbmdzVG8iLCJwcm9kdWN0cyIsImFzIiwiZm9yZWlnbktleSIsIm9yZGVyIiwiaW5pdCIsImlkIiwidHlwZSIsIlVVSUQiLCJkZWZhdWx0VmFsdWUiLCJVVUlEVjQiLCJhbGxvd051bGwiLCJwcmltYXJ5S2V5IiwicXVhbnRpdHkiLCJJTlRFR0VSIiwicHJvZHVjdElkIiwib3JkZXJJZCIsInN0YXR1c1VwZGF0ZWQiLCJCT09MRUFOIiwiZXhwZWN0ZWREZWxpdmVyeURhdGUiLCJEQVRFIiwicHJpY2UiLCJET1VCTEUiLCJmcmVlemVUYWJsZU5hbWUiLCJtb2RlbE5hbWUiLCJ0aW1lc3RhbXBzIiwiZXhwb3J0cyIsImRlZmF1bHQiLCJtb2R1bGUiXSwic291cmNlUm9vdCI6Ii9Vc2Vycy9hbmRlbGFyd2FuZGEvRGVza3RvcC9lLWNvbW0tdGVhbS1icm9ncmFtbWVycy1ibi9zcmMvZGF0YWJhc2UvbW9kZWxzLyIsInNvdXJjZXMiOlsib3JkZXJpdGVtLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE1vZGVsIH0gZnJvbSAnc2VxdWVsaXplJztcblxuZXhwb3J0IGRlZmF1bHQgKHNlcXVlbGl6ZSwgRGF0YVR5cGVzKSA9PiB7XG4gIC8qKlxuICAgKiBPcmRlciBJdGVtXG4gICAqL1xuICBjbGFzcyBvcmRlcml0ZW0gZXh0ZW5kcyBNb2RlbCB7XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIHJlcXVpcmUtanNkb2NcbiAgICBzdGF0aWMgYXNzb2NpYXRlKG1vZGVscykge1xuICAgICAgLy8gZGVmaW5lIGFzc29jaWF0aW9uIGhlcmVcblxuICAgICAgb3JkZXJpdGVtLmJlbG9uZ3NUbyhtb2RlbHMucHJvZHVjdHMsIHtcbiAgICAgICAgYXM6ICdwcm9kdWN0JyxcbiAgICAgICAgZm9yZWlnbktleTogJ3Byb2R1Y3RJZCcsXG4gICAgICB9KTtcbiAgICAgIG9yZGVyaXRlbS5iZWxvbmdzVG8obW9kZWxzLm9yZGVyLCB7IGFzOiAnb3JkZXInLCBmb3JlaWduS2V5OiAnb3JkZXJJZCcgfSk7XG4gICAgfVxuICB9XG4gIG9yZGVyaXRlbS5pbml0KFxuICAgIHtcbiAgICAgIGlkOiB7XG4gICAgICAgIHR5cGU6IERhdGFUeXBlcy5VVUlELFxuICAgICAgICBkZWZhdWx0VmFsdWU6IERhdGFUeXBlcy5VVUlEVjQsXG4gICAgICAgIGFsbG93TnVsbDogZmFsc2UsXG4gICAgICAgIHByaW1hcnlLZXk6IHRydWUsXG4gICAgICB9LFxuICAgICAgcXVhbnRpdHk6IHtcbiAgICAgICAgdHlwZTogRGF0YVR5cGVzLklOVEVHRVIsXG4gICAgICAgIGFsbG93TnVsbDogZmFsc2UsXG4gICAgICAgIGRlZmF1bHRWYWx1ZTogMSxcbiAgICAgIH0sXG4gICAgICBwcm9kdWN0SWQ6IHtcbiAgICAgICAgdHlwZTogRGF0YVR5cGVzLlVVSUQsXG4gICAgICAgIGFsbG93TnVsbDogZmFsc2UsXG4gICAgICB9LFxuICAgICAgb3JkZXJJZDoge1xuICAgICAgICB0eXBlOiBEYXRhVHlwZXMuVVVJRCxcbiAgICAgICAgYWxsb3dOdWxsOiBmYWxzZSxcbiAgICAgIH0sXG4gICAgICBzdGF0dXNVcGRhdGVkOiB7XG4gICAgICAgIHR5cGU6IERhdGFUeXBlcy5CT09MRUFOLFxuICAgICAgICBkZWZhdWx0VmFsdWU6IGZhbHNlLFxuICAgICAgfSxcbiAgICAgIGV4cGVjdGVkRGVsaXZlcnlEYXRlOiB7XG4gICAgICAgIHR5cGU6IERhdGFUeXBlcy5EQVRFLFxuICAgICAgICBhbGxvd051bGw6IHRydWUsXG4gICAgICB9LFxuXG4gICAgICBwcmljZToge1xuICAgICAgICB0eXBlOiBEYXRhVHlwZXMuRE9VQkxFLFxuICAgICAgICBhbGxvd051bGw6IGZhbHNlLFxuICAgICAgfSxcbiAgICB9LFxuICAgIHtcbiAgICAgIHNlcXVlbGl6ZSxcbiAgICAgIGZyZWV6ZVRhYmxlTmFtZTogdHJ1ZSxcbiAgICAgIG1vZGVsTmFtZTogJ29yZGVyaXRlbScsXG4gICAgICB0aW1lc3RhbXBzOiBmYWxzZSxcbiAgICB9XG4gICk7XG4gIHJldHVybiBvcmRlcml0ZW07XG59O1xuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7QUFBQSxJQUFBQSxVQUFBLEdBQUFDLE9BQUE7QUFBa0MsSUFBQUMsUUFBQSxHQUVuQkEsQ0FBQ0MsU0FBUyxFQUFFQyxTQUFTLEtBQUs7RUFDdkM7QUFDRjtBQUNBO0VBQ0UsTUFBTUMsU0FBUyxTQUFTQyxnQkFBSyxDQUFDO0lBQzVCO0lBQ0EsT0FBT0MsU0FBU0EsQ0FBQ0MsTUFBTSxFQUFFO01BQ3ZCOztNQUVBSCxTQUFTLENBQUNJLFNBQVMsQ0FBQ0QsTUFBTSxDQUFDRSxRQUFRLEVBQUU7UUFDbkNDLEVBQUUsRUFBRSxTQUFTO1FBQ2JDLFVBQVUsRUFBRTtNQUNkLENBQUMsQ0FBQztNQUNGUCxTQUFTLENBQUNJLFNBQVMsQ0FBQ0QsTUFBTSxDQUFDSyxLQUFLLEVBQUU7UUFBRUYsRUFBRSxFQUFFLE9BQU87UUFBRUMsVUFBVSxFQUFFO01BQVUsQ0FBQyxDQUFDO0lBQzNFO0VBQ0Y7RUFDQVAsU0FBUyxDQUFDUyxJQUFJLENBQ1o7SUFDRUMsRUFBRSxFQUFFO01BQ0ZDLElBQUksRUFBRVosU0FBUyxDQUFDYSxJQUFJO01BQ3BCQyxZQUFZLEVBQUVkLFNBQVMsQ0FBQ2UsTUFBTTtNQUM5QkMsU0FBUyxFQUFFLEtBQUs7TUFDaEJDLFVBQVUsRUFBRTtJQUNkLENBQUM7SUFDREMsUUFBUSxFQUFFO01BQ1JOLElBQUksRUFBRVosU0FBUyxDQUFDbUIsT0FBTztNQUN2QkgsU0FBUyxFQUFFLEtBQUs7TUFDaEJGLFlBQVksRUFBRTtJQUNoQixDQUFDO0lBQ0RNLFNBQVMsRUFBRTtNQUNUUixJQUFJLEVBQUVaLFNBQVMsQ0FBQ2EsSUFBSTtNQUNwQkcsU0FBUyxFQUFFO0lBQ2IsQ0FBQztJQUNESyxPQUFPLEVBQUU7TUFDUFQsSUFBSSxFQUFFWixTQUFTLENBQUNhLElBQUk7TUFDcEJHLFNBQVMsRUFBRTtJQUNiLENBQUM7SUFDRE0sYUFBYSxFQUFFO01BQ2JWLElBQUksRUFBRVosU0FBUyxDQUFDdUIsT0FBTztNQUN2QlQsWUFBWSxFQUFFO0lBQ2hCLENBQUM7SUFDRFUsb0JBQW9CLEVBQUU7TUFDcEJaLElBQUksRUFBRVosU0FBUyxDQUFDeUIsSUFBSTtNQUNwQlQsU0FBUyxFQUFFO0lBQ2IsQ0FBQztJQUVEVSxLQUFLLEVBQUU7TUFDTGQsSUFBSSxFQUFFWixTQUFTLENBQUMyQixNQUFNO01BQ3RCWCxTQUFTLEVBQUU7SUFDYjtFQUNGLENBQUMsRUFDRDtJQUNFakIsU0FBUztJQUNUNkIsZUFBZSxFQUFFLElBQUk7SUFDckJDLFNBQVMsRUFBRSxXQUFXO0lBQ3RCQyxVQUFVLEVBQUU7RUFDZCxDQUFDLENBQ0Y7RUFDRCxPQUFPN0IsU0FBUztBQUNsQixDQUFDO0FBQUE4QixPQUFBLENBQUFDLE9BQUEsR0FBQWxDLFFBQUE7QUFBQW1DLE1BQUEsQ0FBQUYsT0FBQSxHQUFBQSxPQUFBLENBQUFDLE9BQUEifQ==","map":{"version":3,"names":["_sequelize","require","_default","sequelize","DataTypes","orderitem","Model","associate","models","belongsTo","products","as","foreignKey","order","init","id","type","UUID","defaultValue","UUIDV4","allowNull","primaryKey","quantity","INTEGER","productId","orderId","statusUpdated","BOOLEAN","expectedDeliveryDate","DATE","price","DOUBLE","freezeTableName","modelName","timestamps","exports","default","module"],"sourceRoot":"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/database/models/","sources":["orderitem.js"],"sourcesContent":["import { Model } from 'sequelize';\n\nexport default (sequelize, DataTypes) => {\n  /**\n   * Order Item\n   */\n  class orderitem extends Model {\n    // eslint-disable-next-line require-jsdoc\n    static associate(models) {\n      // define association here\n\n      orderitem.belongsTo(models.products, {\n        as: 'product',\n        foreignKey: 'productId',\n      });\n      orderitem.belongsTo(models.order, { as: 'order', foreignKey: 'orderId' });\n    }\n  }\n  orderitem.init(\n    {\n      id: {\n        type: DataTypes.UUID,\n        defaultValue: DataTypes.UUIDV4,\n        allowNull: false,\n        primaryKey: true,\n      },\n      quantity: {\n        type: DataTypes.INTEGER,\n        allowNull: false,\n        defaultValue: 1,\n      },\n      productId: {\n        type: DataTypes.UUID,\n        allowNull: false,\n      },\n      orderId: {\n        type: DataTypes.UUID,\n        allowNull: false,\n      },\n      statusUpdated: {\n        type: DataTypes.BOOLEAN,\n        defaultValue: false,\n      },\n      expectedDeliveryDate: {\n        type: DataTypes.DATE,\n        allowNull: true,\n      },\n\n      price: {\n        type: DataTypes.DOUBLE,\n        allowNull: false,\n      },\n    },\n    {\n      sequelize,\n      freezeTableName: true,\n      modelName: 'orderitem',\n      timestamps: false,\n    }\n  );\n  return orderitem;\n};\n"],"mappings":";;;;;;AAAA,IAAAA,UAAA,GAAAC,OAAA;AAAkC,IAAAC,QAAA,GAEnBA,CAACC,SAAS,EAAEC,SAAS,KAAK;EACvC;AACF;AACA;EACE,MAAMC,SAAS,SAASC,gBAAK,CAAC;IAC5B;IACA,OAAOC,SAASA,CAACC,MAAM,EAAE;MACvB;;MAEAH,SAAS,CAACI,SAAS,CAACD,MAAM,CAACE,QAAQ,EAAE;QACnCC,EAAE,EAAE,SAAS;QACbC,UAAU,EAAE;MACd,CAAC,CAAC;MACFP,SAAS,CAACI,SAAS,CAACD,MAAM,CAACK,KAAK,EAAE;QAAEF,EAAE,EAAE,OAAO;QAAEC,UAAU,EAAE;MAAU,CAAC,CAAC;IAC3E;EACF;EACAP,SAAS,CAACS,IAAI,CACZ;IACEC,EAAE,EAAE;MACFC,IAAI,EAAEZ,SAAS,CAACa,IAAI;MACpBC,YAAY,EAAEd,SAAS,CAACe,MAAM;MAC9BC,SAAS,EAAE,KAAK;MAChBC,UAAU,EAAE;IACd,CAAC;IACDC,QAAQ,EAAE;MACRN,IAAI,EAAEZ,SAAS,CAACmB,OAAO;MACvBH,SAAS,EAAE,KAAK;MAChBF,YAAY,EAAE;IAChB,CAAC;IACDM,SAAS,EAAE;MACTR,IAAI,EAAEZ,SAAS,CAACa,IAAI;MACpBG,SAAS,EAAE;IACb,CAAC;IACDK,OAAO,EAAE;MACPT,IAAI,EAAEZ,SAAS,CAACa,IAAI;MACpBG,SAAS,EAAE;IACb,CAAC;IACDM,aAAa,EAAE;MACbV,IAAI,EAAEZ,SAAS,CAACuB,OAAO;MACvBT,YAAY,EAAE;IAChB,CAAC;IACDU,oBAAoB,EAAE;MACpBZ,IAAI,EAAEZ,SAAS,CAACyB,IAAI;MACpBT,SAAS,EAAE;IACb,CAAC;IAEDU,KAAK,EAAE;MACLd,IAAI,EAAEZ,SAAS,CAAC2B,MAAM;MACtBX,SAAS,EAAE;IACb;EACF,CAAC,EACD;IACEjB,SAAS;IACT6B,eAAe,EAAE,IAAI;IACrBC,SAAS,EAAE,WAAW;IACtBC,UAAU,EAAE;EACd,CAAC,CACF;EACD,OAAO7B,SAAS;AAClB,CAAC;AAAA8B,OAAA,CAAAC,OAAA,GAAAlC,QAAA;AAAAmC,MAAA,CAAAF,OAAA,GAAAA,OAAA,CAAAC,OAAA"}},"mtime":1682148437929},"{\"assumptions\":{},\"sourceRoot\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/database/models/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"filename\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/database/models/payment.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/node_modules/babel-plugin-add-module-exports/lib/index.js\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-runtime\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"regenerator\":true},\"externalDependencies\":[]},{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.21.0:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _sequelize = require(\"sequelize\");\nvar _default = (sequelize, DataTypes) => {\n  /**\n   * payment\n   */\n  class payment extends _sequelize.Model {\n    /**\n     * @param {*} models\n     * @returns {null} empty\n     */\n    static associate(models) {\n      payment.belongsTo(models.order, {\n        as: 'order',\n        foreignKey: 'orderId',\n        onDelete: 'cascade'\n      });\n    }\n  }\n  payment.init({\n    id: {\n      type: DataTypes.UUID,\n      defaultValue: DataTypes.UUIDV4,\n      allowNull: false,\n      primaryKey: true\n    },\n    amount: {\n      type: DataTypes.DOUBLE,\n      allowNull: false\n    },\n    orderId: {\n      type: DataTypes.UUID,\n      allowNull: false\n    },\n    method: DataTypes.STRING,\n    discount: {\n      type: DataTypes.DOUBLE,\n      defaultValue: 0\n    },\n    stripeId: DataTypes.STRING\n  }, {\n    sequelize,\n    modelName: 'payments'\n  });\n  return payment;\n};\nexports.default = _default;\nmodule.exports = exports.default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfc2VxdWVsaXplIiwicmVxdWlyZSIsIl9kZWZhdWx0Iiwic2VxdWVsaXplIiwiRGF0YVR5cGVzIiwicGF5bWVudCIsIk1vZGVsIiwiYXNzb2NpYXRlIiwibW9kZWxzIiwiYmVsb25nc1RvIiwib3JkZXIiLCJhcyIsImZvcmVpZ25LZXkiLCJvbkRlbGV0ZSIsImluaXQiLCJpZCIsInR5cGUiLCJVVUlEIiwiZGVmYXVsdFZhbHVlIiwiVVVJRFY0IiwiYWxsb3dOdWxsIiwicHJpbWFyeUtleSIsImFtb3VudCIsIkRPVUJMRSIsIm9yZGVySWQiLCJtZXRob2QiLCJTVFJJTkciLCJkaXNjb3VudCIsInN0cmlwZUlkIiwibW9kZWxOYW1lIiwiZXhwb3J0cyIsImRlZmF1bHQiLCJtb2R1bGUiXSwic291cmNlUm9vdCI6Ii9Vc2Vycy9hbmRlbGFyd2FuZGEvRGVza3RvcC9lLWNvbW0tdGVhbS1icm9ncmFtbWVycy1ibi9zcmMvZGF0YWJhc2UvbW9kZWxzLyIsInNvdXJjZXMiOlsicGF5bWVudC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBNb2RlbCB9IGZyb20gJ3NlcXVlbGl6ZSc7XG5cbmV4cG9ydCBkZWZhdWx0IChzZXF1ZWxpemUsIERhdGFUeXBlcykgPT4ge1xuICAvKipcbiAgICogcGF5bWVudFxuICAgKi9cbiAgY2xhc3MgcGF5bWVudCBleHRlbmRzIE1vZGVsIHtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0geyp9IG1vZGVsc1xuICAgICAqIEByZXR1cm5zIHtudWxsfSBlbXB0eVxuICAgICAqL1xuICAgIHN0YXRpYyBhc3NvY2lhdGUobW9kZWxzKSB7XG4gICAgICBwYXltZW50LmJlbG9uZ3NUbyhtb2RlbHMub3JkZXIsIHsgYXM6ICdvcmRlcicsIGZvcmVpZ25LZXk6ICdvcmRlcklkJywgb25EZWxldGU6ICdjYXNjYWRlJyB9KTtcbiAgICB9XG4gIH1cbiAgcGF5bWVudC5pbml0KHtcbiAgICBpZDoge1xuICAgICAgdHlwZTogRGF0YVR5cGVzLlVVSUQsXG4gICAgICBkZWZhdWx0VmFsdWU6IERhdGFUeXBlcy5VVUlEVjQsXG4gICAgICBhbGxvd051bGw6IGZhbHNlLFxuICAgICAgcHJpbWFyeUtleTogdHJ1ZSxcbiAgICB9LFxuICAgIGFtb3VudDoge1xuICAgICAgdHlwZTogRGF0YVR5cGVzLkRPVUJMRSxcbiAgICAgIGFsbG93TnVsbDogZmFsc2VcbiAgICB9LFxuICAgIG9yZGVySWQ6IHtcbiAgICAgIHR5cGU6IERhdGFUeXBlcy5VVUlELFxuICAgICAgYWxsb3dOdWxsOiBmYWxzZVxuICAgIH0sXG4gICAgbWV0aG9kOiBEYXRhVHlwZXMuU1RSSU5HLFxuICAgIGRpc2NvdW50OiB7XG4gICAgICB0eXBlOiBEYXRhVHlwZXMuRE9VQkxFLFxuICAgICAgZGVmYXVsdFZhbHVlOiAwXG4gICAgfSxcbiAgICBzdHJpcGVJZDogRGF0YVR5cGVzLlNUUklOR1xuICB9LCB7XG4gICAgc2VxdWVsaXplLFxuICAgIG1vZGVsTmFtZTogJ3BheW1lbnRzJyxcbiAgfSk7XG4gIHJldHVybiBwYXltZW50O1xufTtcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQUEsSUFBQUEsVUFBQSxHQUFBQyxPQUFBO0FBQWtDLElBQUFDLFFBQUEsR0FFbkJBLENBQUNDLFNBQVMsRUFBRUMsU0FBUyxLQUFLO0VBQ3ZDO0FBQ0Y7QUFDQTtFQUNFLE1BQU1DLE9BQU8sU0FBU0MsZ0JBQUssQ0FBQztJQUMxQjtBQUNKO0FBQ0E7QUFDQTtJQUNJLE9BQU9DLFNBQVNBLENBQUNDLE1BQU0sRUFBRTtNQUN2QkgsT0FBTyxDQUFDSSxTQUFTLENBQUNELE1BQU0sQ0FBQ0UsS0FBSyxFQUFFO1FBQUVDLEVBQUUsRUFBRSxPQUFPO1FBQUVDLFVBQVUsRUFBRSxTQUFTO1FBQUVDLFFBQVEsRUFBRTtNQUFVLENBQUMsQ0FBQztJQUM5RjtFQUNGO0VBQ0FSLE9BQU8sQ0FBQ1MsSUFBSSxDQUFDO0lBQ1hDLEVBQUUsRUFBRTtNQUNGQyxJQUFJLEVBQUVaLFNBQVMsQ0FBQ2EsSUFBSTtNQUNwQkMsWUFBWSxFQUFFZCxTQUFTLENBQUNlLE1BQU07TUFDOUJDLFNBQVMsRUFBRSxLQUFLO01BQ2hCQyxVQUFVLEVBQUU7SUFDZCxDQUFDO0lBQ0RDLE1BQU0sRUFBRTtNQUNOTixJQUFJLEVBQUVaLFNBQVMsQ0FBQ21CLE1BQU07TUFDdEJILFNBQVMsRUFBRTtJQUNiLENBQUM7SUFDREksT0FBTyxFQUFFO01BQ1BSLElBQUksRUFBRVosU0FBUyxDQUFDYSxJQUFJO01BQ3BCRyxTQUFTLEVBQUU7SUFDYixDQUFDO0lBQ0RLLE1BQU0sRUFBRXJCLFNBQVMsQ0FBQ3NCLE1BQU07SUFDeEJDLFFBQVEsRUFBRTtNQUNSWCxJQUFJLEVBQUVaLFNBQVMsQ0FBQ21CLE1BQU07TUFDdEJMLFlBQVksRUFBRTtJQUNoQixDQUFDO0lBQ0RVLFFBQVEsRUFBRXhCLFNBQVMsQ0FBQ3NCO0VBQ3RCLENBQUMsRUFBRTtJQUNEdkIsU0FBUztJQUNUMEIsU0FBUyxFQUFFO0VBQ2IsQ0FBQyxDQUFDO0VBQ0YsT0FBT3hCLE9BQU87QUFDaEIsQ0FBQztBQUFBeUIsT0FBQSxDQUFBQyxPQUFBLEdBQUE3QixRQUFBO0FBQUE4QixNQUFBLENBQUFGLE9BQUEsR0FBQUEsT0FBQSxDQUFBQyxPQUFBIn0=","map":{"version":3,"names":["_sequelize","require","_default","sequelize","DataTypes","payment","Model","associate","models","belongsTo","order","as","foreignKey","onDelete","init","id","type","UUID","defaultValue","UUIDV4","allowNull","primaryKey","amount","DOUBLE","orderId","method","STRING","discount","stripeId","modelName","exports","default","module"],"sourceRoot":"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/database/models/","sources":["payment.js"],"sourcesContent":["import { Model } from 'sequelize';\n\nexport default (sequelize, DataTypes) => {\n  /**\n   * payment\n   */\n  class payment extends Model {\n    /**\n     * @param {*} models\n     * @returns {null} empty\n     */\n    static associate(models) {\n      payment.belongsTo(models.order, { as: 'order', foreignKey: 'orderId', onDelete: 'cascade' });\n    }\n  }\n  payment.init({\n    id: {\n      type: DataTypes.UUID,\n      defaultValue: DataTypes.UUIDV4,\n      allowNull: false,\n      primaryKey: true,\n    },\n    amount: {\n      type: DataTypes.DOUBLE,\n      allowNull: false\n    },\n    orderId: {\n      type: DataTypes.UUID,\n      allowNull: false\n    },\n    method: DataTypes.STRING,\n    discount: {\n      type: DataTypes.DOUBLE,\n      defaultValue: 0\n    },\n    stripeId: DataTypes.STRING\n  }, {\n    sequelize,\n    modelName: 'payments',\n  });\n  return payment;\n};\n"],"mappings":";;;;;;AAAA,IAAAA,UAAA,GAAAC,OAAA;AAAkC,IAAAC,QAAA,GAEnBA,CAACC,SAAS,EAAEC,SAAS,KAAK;EACvC;AACF;AACA;EACE,MAAMC,OAAO,SAASC,gBAAK,CAAC;IAC1B;AACJ;AACA;AACA;IACI,OAAOC,SAASA,CAACC,MAAM,EAAE;MACvBH,OAAO,CAACI,SAAS,CAACD,MAAM,CAACE,KAAK,EAAE;QAAEC,EAAE,EAAE,OAAO;QAAEC,UAAU,EAAE,SAAS;QAAEC,QAAQ,EAAE;MAAU,CAAC,CAAC;IAC9F;EACF;EACAR,OAAO,CAACS,IAAI,CAAC;IACXC,EAAE,EAAE;MACFC,IAAI,EAAEZ,SAAS,CAACa,IAAI;MACpBC,YAAY,EAAEd,SAAS,CAACe,MAAM;MAC9BC,SAAS,EAAE,KAAK;MAChBC,UAAU,EAAE;IACd,CAAC;IACDC,MAAM,EAAE;MACNN,IAAI,EAAEZ,SAAS,CAACmB,MAAM;MACtBH,SAAS,EAAE;IACb,CAAC;IACDI,OAAO,EAAE;MACPR,IAAI,EAAEZ,SAAS,CAACa,IAAI;MACpBG,SAAS,EAAE;IACb,CAAC;IACDK,MAAM,EAAErB,SAAS,CAACsB,MAAM;IACxBC,QAAQ,EAAE;MACRX,IAAI,EAAEZ,SAAS,CAACmB,MAAM;MACtBL,YAAY,EAAE;IAChB,CAAC;IACDU,QAAQ,EAAExB,SAAS,CAACsB;EACtB,CAAC,EAAE;IACDvB,SAAS;IACT0B,SAAS,EAAE;EACb,CAAC,CAAC;EACF,OAAOxB,OAAO;AAChB,CAAC;AAAAyB,OAAA,CAAAC,OAAA,GAAA7B,QAAA;AAAA8B,MAAA,CAAAF,OAAA,GAAAA,OAAA,CAAAC,OAAA"}},"mtime":1682148437929},"{\"assumptions\":{},\"sourceRoot\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/database/models/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"filename\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/database/models/products.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/node_modules/babel-plugin-add-module-exports/lib/index.js\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-runtime\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"regenerator\":true},\"externalDependencies\":[]},{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.21.0:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _sequelize = require(\"sequelize\");\n/**\n * exporting the user model and it's features.\n * @param {Object} sequelize\n * @param {Object} DataTypes\n * @returns {Object} the model for user\n */\nvar _default = (sequelize, DataTypes) => {\n  // eslint-disable-next-line require-jsdoc\n  class products extends _sequelize.Model {\n    // eslint-disable-next-line valid-jsdoc\n    /**\n     * Helper method for defining associations.\n     * This method is not a part of Sequelize lifecycle.\n     * The `models/index` file will call this method automatically.\n     */\n    static associate(models) {\n      products.hasMany(models.orderitem, {\n        as: 'orderitems',\n        foreignKey: 'productId'\n      });\n      products.belongsTo(models.users, {\n        as: 'seller',\n        foreignKey: 'sellerId'\n      });\n      products.hasMany(models.reviews, {\n        as: 'reviews',\n        foreignKey: 'productId'\n      });\n    }\n  }\n  products.init({\n    id: {\n      allowNull: false,\n      primaryKey: true,\n      type: DataTypes.UUID,\n      defaultValue: DataTypes.UUIDV4\n    },\n    images: {\n      type: DataTypes.ARRAY(DataTypes.STRING)\n    },\n    name: {\n      allowNull: false,\n      type: DataTypes.STRING\n    },\n    description: {\n      type: DataTypes.STRING(2000)\n    },\n    quantity: {\n      type: DataTypes.INTEGER,\n      allowNull: false\n    },\n    sellerId: {\n      type: DataTypes.UUID,\n      allowNull: false,\n      references: {\n        model: 'users',\n        key: 'id'\n      }\n    },\n    exp_date: {\n      type: DataTypes.DATE,\n      allowNull: false\n    },\n    available: {\n      type: DataTypes.BOOLEAN,\n      defaultValue: true\n    },\n    price: {\n      type: DataTypes.DOUBLE,\n      allowNull: false,\n      defaultValue: 0\n    },\n    category: {\n      type: DataTypes.INTEGER,\n      references: {\n        model: 'categories',\n        key: 'id'\n      }\n    }\n  }, {\n    sequelize,\n    modelName: 'products'\n  });\n  return products;\n};\nexports.default = _default;\nmodule.exports = exports.default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfc2VxdWVsaXplIiwicmVxdWlyZSIsIl9kZWZhdWx0Iiwic2VxdWVsaXplIiwiRGF0YVR5cGVzIiwicHJvZHVjdHMiLCJNb2RlbCIsImFzc29jaWF0ZSIsIm1vZGVscyIsImhhc01hbnkiLCJvcmRlcml0ZW0iLCJhcyIsImZvcmVpZ25LZXkiLCJiZWxvbmdzVG8iLCJ1c2VycyIsInJldmlld3MiLCJpbml0IiwiaWQiLCJhbGxvd051bGwiLCJwcmltYXJ5S2V5IiwidHlwZSIsIlVVSUQiLCJkZWZhdWx0VmFsdWUiLCJVVUlEVjQiLCJpbWFnZXMiLCJBUlJBWSIsIlNUUklORyIsIm5hbWUiLCJkZXNjcmlwdGlvbiIsInF1YW50aXR5IiwiSU5URUdFUiIsInNlbGxlcklkIiwicmVmZXJlbmNlcyIsIm1vZGVsIiwia2V5IiwiZXhwX2RhdGUiLCJEQVRFIiwiYXZhaWxhYmxlIiwiQk9PTEVBTiIsInByaWNlIiwiRE9VQkxFIiwiY2F0ZWdvcnkiLCJtb2RlbE5hbWUiLCJleHBvcnRzIiwiZGVmYXVsdCIsIm1vZHVsZSJdLCJzb3VyY2VSb290IjoiL1VzZXJzL2FuZGVsYXJ3YW5kYS9EZXNrdG9wL2UtY29tbS10ZWFtLWJyb2dyYW1tZXJzLWJuL3NyYy9kYXRhYmFzZS9tb2RlbHMvIiwic291cmNlcyI6WyJwcm9kdWN0cy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBNb2RlbCB9IGZyb20gJ3NlcXVlbGl6ZSc7XG5cbi8qKlxuICogZXhwb3J0aW5nIHRoZSB1c2VyIG1vZGVsIGFuZCBpdCdzIGZlYXR1cmVzLlxuICogQHBhcmFtIHtPYmplY3R9IHNlcXVlbGl6ZVxuICogQHBhcmFtIHtPYmplY3R9IERhdGFUeXBlc1xuICogQHJldHVybnMge09iamVjdH0gdGhlIG1vZGVsIGZvciB1c2VyXG4gKi9cbmV4cG9ydCBkZWZhdWx0IChzZXF1ZWxpemUsIERhdGFUeXBlcykgPT4ge1xuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgcmVxdWlyZS1qc2RvY1xuICBjbGFzcyBwcm9kdWN0cyBleHRlbmRzIE1vZGVsIHtcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgdmFsaWQtanNkb2NcbiAgICAvKipcbiAgICAgKiBIZWxwZXIgbWV0aG9kIGZvciBkZWZpbmluZyBhc3NvY2lhdGlvbnMuXG4gICAgICogVGhpcyBtZXRob2QgaXMgbm90IGEgcGFydCBvZiBTZXF1ZWxpemUgbGlmZWN5Y2xlLlxuICAgICAqIFRoZSBgbW9kZWxzL2luZGV4YCBmaWxlIHdpbGwgY2FsbCB0aGlzIG1ldGhvZCBhdXRvbWF0aWNhbGx5LlxuICAgICAqL1xuICAgIHN0YXRpYyBhc3NvY2lhdGUobW9kZWxzKSB7XG4gICAgICBwcm9kdWN0cy5oYXNNYW55KG1vZGVscy5vcmRlcml0ZW0sIHtcbiAgICAgICAgYXM6ICdvcmRlcml0ZW1zJyxcbiAgICAgICAgZm9yZWlnbktleTogJ3Byb2R1Y3RJZCcsXG4gICAgICB9KTtcbiAgICAgIHByb2R1Y3RzLmJlbG9uZ3NUbyhtb2RlbHMudXNlcnMsIHtcbiAgICAgICAgYXM6ICdzZWxsZXInLFxuICAgICAgICBmb3JlaWduS2V5OiAnc2VsbGVySWQnLFxuICAgICAgfSk7XG4gICAgICBwcm9kdWN0cy5oYXNNYW55KG1vZGVscy5yZXZpZXdzLCB7XG4gICAgICAgIGFzOiAncmV2aWV3cycsXG4gICAgICAgIGZvcmVpZ25LZXk6ICdwcm9kdWN0SWQnLFxuICAgICAgfSk7XG4gICAgfVxuICB9XG4gIHByb2R1Y3RzLmluaXQoXG4gICAge1xuICAgICAgaWQ6IHtcbiAgICAgICAgYWxsb3dOdWxsOiBmYWxzZSxcbiAgICAgICAgcHJpbWFyeUtleTogdHJ1ZSxcbiAgICAgICAgdHlwZTogRGF0YVR5cGVzLlVVSUQsXG4gICAgICAgIGRlZmF1bHRWYWx1ZTogRGF0YVR5cGVzLlVVSURWNCxcbiAgICAgIH0sXG4gICAgICBpbWFnZXM6IHtcbiAgICAgICAgdHlwZTogRGF0YVR5cGVzLkFSUkFZKERhdGFUeXBlcy5TVFJJTkcpLFxuICAgICAgfSxcbiAgICAgIG5hbWU6IHtcbiAgICAgICAgYWxsb3dOdWxsOiBmYWxzZSxcbiAgICAgICAgdHlwZTogRGF0YVR5cGVzLlNUUklORyxcbiAgICAgIH0sXG4gICAgICBkZXNjcmlwdGlvbjoge1xuICAgICAgICB0eXBlOiBEYXRhVHlwZXMuU1RSSU5HKDIwMDApLFxuICAgICAgfSxcbiAgICAgIHF1YW50aXR5OiB7XG4gICAgICAgIHR5cGU6IERhdGFUeXBlcy5JTlRFR0VSLFxuICAgICAgICBhbGxvd051bGw6IGZhbHNlLFxuICAgICAgfSxcbiAgICAgIHNlbGxlcklkOiB7XG4gICAgICAgIHR5cGU6IERhdGFUeXBlcy5VVUlELFxuICAgICAgICBhbGxvd051bGw6IGZhbHNlLFxuICAgICAgICByZWZlcmVuY2VzOiB7XG4gICAgICAgICAgbW9kZWw6ICd1c2VycycsXG4gICAgICAgICAga2V5OiAnaWQnLFxuICAgICAgICB9LFxuICAgICAgfSxcbiAgICAgIGV4cF9kYXRlOiB7XG4gICAgICAgIHR5cGU6IERhdGFUeXBlcy5EQVRFLFxuICAgICAgICBhbGxvd051bGw6IGZhbHNlLFxuICAgICAgfSxcbiAgICAgIGF2YWlsYWJsZToge1xuICAgICAgICB0eXBlOiBEYXRhVHlwZXMuQk9PTEVBTixcbiAgICAgICAgZGVmYXVsdFZhbHVlOiB0cnVlLFxuICAgICAgfSxcbiAgICAgIHByaWNlOiB7XG4gICAgICAgIHR5cGU6IERhdGFUeXBlcy5ET1VCTEUsXG4gICAgICAgIGFsbG93TnVsbDogZmFsc2UsXG4gICAgICAgIGRlZmF1bHRWYWx1ZTogMCxcbiAgICAgIH0sXG4gICAgICBjYXRlZ29yeToge1xuICAgICAgICB0eXBlOiBEYXRhVHlwZXMuSU5URUdFUixcbiAgICAgICAgcmVmZXJlbmNlczoge1xuICAgICAgICAgIG1vZGVsOiAnY2F0ZWdvcmllcycsXG4gICAgICAgICAga2V5OiAnaWQnLFxuICAgICAgICB9LFxuICAgICAgfSxcbiAgICB9LFxuICAgIHtcbiAgICAgIHNlcXVlbGl6ZSxcbiAgICAgIG1vZGVsTmFtZTogJ3Byb2R1Y3RzJyxcbiAgICB9XG4gICk7XG4gIHJldHVybiBwcm9kdWN0cztcbn07XG4iXSwibWFwcGluZ3MiOiI7Ozs7OztBQUFBLElBQUFBLFVBQUEsR0FBQUMsT0FBQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUxBLElBQUFDLFFBQUEsR0FNZUEsQ0FBQ0MsU0FBUyxFQUFFQyxTQUFTLEtBQUs7RUFDdkM7RUFDQSxNQUFNQyxRQUFRLFNBQVNDLGdCQUFLLENBQUM7SUFDM0I7SUFDQTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0lBQ0ksT0FBT0MsU0FBU0EsQ0FBQ0MsTUFBTSxFQUFFO01BQ3ZCSCxRQUFRLENBQUNJLE9BQU8sQ0FBQ0QsTUFBTSxDQUFDRSxTQUFTLEVBQUU7UUFDakNDLEVBQUUsRUFBRSxZQUFZO1FBQ2hCQyxVQUFVLEVBQUU7TUFDZCxDQUFDLENBQUM7TUFDRlAsUUFBUSxDQUFDUSxTQUFTLENBQUNMLE1BQU0sQ0FBQ00sS0FBSyxFQUFFO1FBQy9CSCxFQUFFLEVBQUUsUUFBUTtRQUNaQyxVQUFVLEVBQUU7TUFDZCxDQUFDLENBQUM7TUFDRlAsUUFBUSxDQUFDSSxPQUFPLENBQUNELE1BQU0sQ0FBQ08sT0FBTyxFQUFFO1FBQy9CSixFQUFFLEVBQUUsU0FBUztRQUNiQyxVQUFVLEVBQUU7TUFDZCxDQUFDLENBQUM7SUFDSjtFQUNGO0VBQ0FQLFFBQVEsQ0FBQ1csSUFBSSxDQUNYO0lBQ0VDLEVBQUUsRUFBRTtNQUNGQyxTQUFTLEVBQUUsS0FBSztNQUNoQkMsVUFBVSxFQUFFLElBQUk7TUFDaEJDLElBQUksRUFBRWhCLFNBQVMsQ0FBQ2lCLElBQUk7TUFDcEJDLFlBQVksRUFBRWxCLFNBQVMsQ0FBQ21CO0lBQzFCLENBQUM7SUFDREMsTUFBTSxFQUFFO01BQ05KLElBQUksRUFBRWhCLFNBQVMsQ0FBQ3FCLEtBQUssQ0FBQ3JCLFNBQVMsQ0FBQ3NCLE1BQU07SUFDeEMsQ0FBQztJQUNEQyxJQUFJLEVBQUU7TUFDSlQsU0FBUyxFQUFFLEtBQUs7TUFDaEJFLElBQUksRUFBRWhCLFNBQVMsQ0FBQ3NCO0lBQ2xCLENBQUM7SUFDREUsV0FBVyxFQUFFO01BQ1hSLElBQUksRUFBRWhCLFNBQVMsQ0FBQ3NCLE1BQU0sQ0FBQyxJQUFJO0lBQzdCLENBQUM7SUFDREcsUUFBUSxFQUFFO01BQ1JULElBQUksRUFBRWhCLFNBQVMsQ0FBQzBCLE9BQU87TUFDdkJaLFNBQVMsRUFBRTtJQUNiLENBQUM7SUFDRGEsUUFBUSxFQUFFO01BQ1JYLElBQUksRUFBRWhCLFNBQVMsQ0FBQ2lCLElBQUk7TUFDcEJILFNBQVMsRUFBRSxLQUFLO01BQ2hCYyxVQUFVLEVBQUU7UUFDVkMsS0FBSyxFQUFFLE9BQU87UUFDZEMsR0FBRyxFQUFFO01BQ1A7SUFDRixDQUFDO0lBQ0RDLFFBQVEsRUFBRTtNQUNSZixJQUFJLEVBQUVoQixTQUFTLENBQUNnQyxJQUFJO01BQ3BCbEIsU0FBUyxFQUFFO0lBQ2IsQ0FBQztJQUNEbUIsU0FBUyxFQUFFO01BQ1RqQixJQUFJLEVBQUVoQixTQUFTLENBQUNrQyxPQUFPO01BQ3ZCaEIsWUFBWSxFQUFFO0lBQ2hCLENBQUM7SUFDRGlCLEtBQUssRUFBRTtNQUNMbkIsSUFBSSxFQUFFaEIsU0FBUyxDQUFDb0MsTUFBTTtNQUN0QnRCLFNBQVMsRUFBRSxLQUFLO01BQ2hCSSxZQUFZLEVBQUU7SUFDaEIsQ0FBQztJQUNEbUIsUUFBUSxFQUFFO01BQ1JyQixJQUFJLEVBQUVoQixTQUFTLENBQUMwQixPQUFPO01BQ3ZCRSxVQUFVLEVBQUU7UUFDVkMsS0FBSyxFQUFFLFlBQVk7UUFDbkJDLEdBQUcsRUFBRTtNQUNQO0lBQ0Y7RUFDRixDQUFDLEVBQ0Q7SUFDRS9CLFNBQVM7SUFDVHVDLFNBQVMsRUFBRTtFQUNiLENBQUMsQ0FDRjtFQUNELE9BQU9yQyxRQUFRO0FBQ2pCLENBQUM7QUFBQXNDLE9BQUEsQ0FBQUMsT0FBQSxHQUFBMUMsUUFBQTtBQUFBMkMsTUFBQSxDQUFBRixPQUFBLEdBQUFBLE9BQUEsQ0FBQUMsT0FBQSJ9","map":{"version":3,"names":["_sequelize","require","_default","sequelize","DataTypes","products","Model","associate","models","hasMany","orderitem","as","foreignKey","belongsTo","users","reviews","init","id","allowNull","primaryKey","type","UUID","defaultValue","UUIDV4","images","ARRAY","STRING","name","description","quantity","INTEGER","sellerId","references","model","key","exp_date","DATE","available","BOOLEAN","price","DOUBLE","category","modelName","exports","default","module"],"sourceRoot":"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/database/models/","sources":["products.js"],"sourcesContent":["import { Model } from 'sequelize';\n\n/**\n * exporting the user model and it's features.\n * @param {Object} sequelize\n * @param {Object} DataTypes\n * @returns {Object} the model for user\n */\nexport default (sequelize, DataTypes) => {\n  // eslint-disable-next-line require-jsdoc\n  class products extends Model {\n    // eslint-disable-next-line valid-jsdoc\n    /**\n     * Helper method for defining associations.\n     * This method is not a part of Sequelize lifecycle.\n     * The `models/index` file will call this method automatically.\n     */\n    static associate(models) {\n      products.hasMany(models.orderitem, {\n        as: 'orderitems',\n        foreignKey: 'productId',\n      });\n      products.belongsTo(models.users, {\n        as: 'seller',\n        foreignKey: 'sellerId',\n      });\n      products.hasMany(models.reviews, {\n        as: 'reviews',\n        foreignKey: 'productId',\n      });\n    }\n  }\n  products.init(\n    {\n      id: {\n        allowNull: false,\n        primaryKey: true,\n        type: DataTypes.UUID,\n        defaultValue: DataTypes.UUIDV4,\n      },\n      images: {\n        type: DataTypes.ARRAY(DataTypes.STRING),\n      },\n      name: {\n        allowNull: false,\n        type: DataTypes.STRING,\n      },\n      description: {\n        type: DataTypes.STRING(2000),\n      },\n      quantity: {\n        type: DataTypes.INTEGER,\n        allowNull: false,\n      },\n      sellerId: {\n        type: DataTypes.UUID,\n        allowNull: false,\n        references: {\n          model: 'users',\n          key: 'id',\n        },\n      },\n      exp_date: {\n        type: DataTypes.DATE,\n        allowNull: false,\n      },\n      available: {\n        type: DataTypes.BOOLEAN,\n        defaultValue: true,\n      },\n      price: {\n        type: DataTypes.DOUBLE,\n        allowNull: false,\n        defaultValue: 0,\n      },\n      category: {\n        type: DataTypes.INTEGER,\n        references: {\n          model: 'categories',\n          key: 'id',\n        },\n      },\n    },\n    {\n      sequelize,\n      modelName: 'products',\n    }\n  );\n  return products;\n};\n"],"mappings":";;;;;;AAAA,IAAAA,UAAA,GAAAC,OAAA;AAEA;AACA;AACA;AACA;AACA;AACA;AALA,IAAAC,QAAA,GAMeA,CAACC,SAAS,EAAEC,SAAS,KAAK;EACvC;EACA,MAAMC,QAAQ,SAASC,gBAAK,CAAC;IAC3B;IACA;AACJ;AACA;AACA;AACA;IACI,OAAOC,SAASA,CAACC,MAAM,EAAE;MACvBH,QAAQ,CAACI,OAAO,CAACD,MAAM,CAACE,SAAS,EAAE;QACjCC,EAAE,EAAE,YAAY;QAChBC,UAAU,EAAE;MACd,CAAC,CAAC;MACFP,QAAQ,CAACQ,SAAS,CAACL,MAAM,CAACM,KAAK,EAAE;QAC/BH,EAAE,EAAE,QAAQ;QACZC,UAAU,EAAE;MACd,CAAC,CAAC;MACFP,QAAQ,CAACI,OAAO,CAACD,MAAM,CAACO,OAAO,EAAE;QAC/BJ,EAAE,EAAE,SAAS;QACbC,UAAU,EAAE;MACd,CAAC,CAAC;IACJ;EACF;EACAP,QAAQ,CAACW,IAAI,CACX;IACEC,EAAE,EAAE;MACFC,SAAS,EAAE,KAAK;MAChBC,UAAU,EAAE,IAAI;MAChBC,IAAI,EAAEhB,SAAS,CAACiB,IAAI;MACpBC,YAAY,EAAElB,SAAS,CAACmB;IAC1B,CAAC;IACDC,MAAM,EAAE;MACNJ,IAAI,EAAEhB,SAAS,CAACqB,KAAK,CAACrB,SAAS,CAACsB,MAAM;IACxC,CAAC;IACDC,IAAI,EAAE;MACJT,SAAS,EAAE,KAAK;MAChBE,IAAI,EAAEhB,SAAS,CAACsB;IAClB,CAAC;IACDE,WAAW,EAAE;MACXR,IAAI,EAAEhB,SAAS,CAACsB,MAAM,CAAC,IAAI;IAC7B,CAAC;IACDG,QAAQ,EAAE;MACRT,IAAI,EAAEhB,SAAS,CAAC0B,OAAO;MACvBZ,SAAS,EAAE;IACb,CAAC;IACDa,QAAQ,EAAE;MACRX,IAAI,EAAEhB,SAAS,CAACiB,IAAI;MACpBH,SAAS,EAAE,KAAK;MAChBc,UAAU,EAAE;QACVC,KAAK,EAAE,OAAO;QACdC,GAAG,EAAE;MACP;IACF,CAAC;IACDC,QAAQ,EAAE;MACRf,IAAI,EAAEhB,SAAS,CAACgC,IAAI;MACpBlB,SAAS,EAAE;IACb,CAAC;IACDmB,SAAS,EAAE;MACTjB,IAAI,EAAEhB,SAAS,CAACkC,OAAO;MACvBhB,YAAY,EAAE;IAChB,CAAC;IACDiB,KAAK,EAAE;MACLnB,IAAI,EAAEhB,SAAS,CAACoC,MAAM;MACtBtB,SAAS,EAAE,KAAK;MAChBI,YAAY,EAAE;IAChB,CAAC;IACDmB,QAAQ,EAAE;MACRrB,IAAI,EAAEhB,SAAS,CAAC0B,OAAO;MACvBE,UAAU,EAAE;QACVC,KAAK,EAAE,YAAY;QACnBC,GAAG,EAAE;MACP;IACF;EACF,CAAC,EACD;IACE/B,SAAS;IACTuC,SAAS,EAAE;EACb,CAAC,CACF;EACD,OAAOrC,QAAQ;AACjB,CAAC;AAAAsC,OAAA,CAAAC,OAAA,GAAA1C,QAAA;AAAA2C,MAAA,CAAAF,OAAA,GAAAA,OAAA,CAAAC,OAAA"}},"mtime":1685643189445},"{\"assumptions\":{},\"sourceRoot\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/database/models/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"filename\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/database/models/reviews.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/node_modules/babel-plugin-add-module-exports/lib/index.js\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-runtime\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"regenerator\":true},\"externalDependencies\":[]},{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.21.0:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _sequelize = require(\"sequelize\");\n// const {\n//   Model\n// } = require('sequelize');\n// eslint-disable-next-line valid-jsdoc\n/**\n * Review model\n * @param {import('sequelize').Sequelize} sequelize\n * @param {import('sequelize').DataType} DataTypes\n *\n * @returns {import('sequelize').Model}\n */\nvar _default = (sequelize, DataTypes) => {\n  /**\n   * Revie Model\n   */\n  class reviews extends _sequelize.Model {\n    /**\n     * Helper method for defining associations.\n     * @param {*} models\n     * @returns {void}\n     */\n    static associate(models) {\n      reviews.belongsTo(models.products, {\n        as: 'reviews',\n        foreignKey: 'productId'\n      }, reviews.belongsTo(models.users, {\n        as: 'reviewer',\n        foreignKey: 'userId'\n      }));\n    }\n  }\n  reviews.init({\n    id: {\n      type: DataTypes.UUID,\n      defaultValue: DataTypes.UUIDV4,\n      primaryKey: true\n    },\n    productId: {\n      type: DataTypes.UUID,\n      references: {\n        model: 'products',\n        key: 'id'\n      }\n    },\n    userId: {\n      type: DataTypes.UUID,\n      references: {\n        model: 'users',\n        key: 'id'\n      }\n    },\n    feedback: DataTypes.TEXT,\n    rating: DataTypes.INTEGER\n  }, {\n    sequelize,\n    modelName: 'reviews'\n  });\n  return reviews;\n};\nexports.default = _default;\nmodule.exports = exports.default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfc2VxdWVsaXplIiwicmVxdWlyZSIsIl9kZWZhdWx0Iiwic2VxdWVsaXplIiwiRGF0YVR5cGVzIiwicmV2aWV3cyIsIk1vZGVsIiwiYXNzb2NpYXRlIiwibW9kZWxzIiwiYmVsb25nc1RvIiwicHJvZHVjdHMiLCJhcyIsImZvcmVpZ25LZXkiLCJ1c2VycyIsImluaXQiLCJpZCIsInR5cGUiLCJVVUlEIiwiZGVmYXVsdFZhbHVlIiwiVVVJRFY0IiwicHJpbWFyeUtleSIsInByb2R1Y3RJZCIsInJlZmVyZW5jZXMiLCJtb2RlbCIsImtleSIsInVzZXJJZCIsImZlZWRiYWNrIiwiVEVYVCIsInJhdGluZyIsIklOVEVHRVIiLCJtb2RlbE5hbWUiLCJleHBvcnRzIiwiZGVmYXVsdCIsIm1vZHVsZSJdLCJzb3VyY2VSb290IjoiL1VzZXJzL2FuZGVsYXJ3YW5kYS9EZXNrdG9wL2UtY29tbS10ZWFtLWJyb2dyYW1tZXJzLWJuL3NyYy9kYXRhYmFzZS9tb2RlbHMvIiwic291cmNlcyI6WyJyZXZpZXdzLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIGNvbnN0IHtcbi8vICAgTW9kZWxcbi8vIH0gPSByZXF1aXJlKCdzZXF1ZWxpemUnKTtcbmltcG9ydCB7IE1vZGVsIH0gZnJvbSAnc2VxdWVsaXplJztcblxuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIHZhbGlkLWpzZG9jXG4vKipcbiAqIFJldmlldyBtb2RlbFxuICogQHBhcmFtIHtpbXBvcnQoJ3NlcXVlbGl6ZScpLlNlcXVlbGl6ZX0gc2VxdWVsaXplXG4gKiBAcGFyYW0ge2ltcG9ydCgnc2VxdWVsaXplJykuRGF0YVR5cGV9IERhdGFUeXBlc1xuICpcbiAqIEByZXR1cm5zIHtpbXBvcnQoJ3NlcXVlbGl6ZScpLk1vZGVsfVxuICovXG5leHBvcnQgZGVmYXVsdCAoc2VxdWVsaXplLCBEYXRhVHlwZXMpID0+IHtcbiAgLyoqXG4gICAqIFJldmllIE1vZGVsXG4gICAqL1xuICBjbGFzcyByZXZpZXdzIGV4dGVuZHMgTW9kZWwge1xuICAgIC8qKlxuICAgICAqIEhlbHBlciBtZXRob2QgZm9yIGRlZmluaW5nIGFzc29jaWF0aW9ucy5cbiAgICAgKiBAcGFyYW0geyp9IG1vZGVsc1xuICAgICAqIEByZXR1cm5zIHt2b2lkfVxuICAgICAqL1xuICAgIHN0YXRpYyBhc3NvY2lhdGUobW9kZWxzKSB7XG4gICAgICByZXZpZXdzLmJlbG9uZ3NUbyhtb2RlbHMucHJvZHVjdHMsIHtcbiAgICAgICAgYXM6ICdyZXZpZXdzJyxcbiAgICAgICAgZm9yZWlnbktleTogJ3Byb2R1Y3RJZCcsXG4gICAgICB9LCByZXZpZXdzLmJlbG9uZ3NUbyhtb2RlbHMudXNlcnMsIHtcbiAgICAgICAgYXM6ICdyZXZpZXdlcicsXG4gICAgICAgIGZvcmVpZ25LZXk6ICd1c2VySWQnLFxuICAgICAgfSkpO1xuICAgIH1cbiAgfVxuICByZXZpZXdzLmluaXQoXG4gICAge1xuICAgICAgaWQ6IHtcbiAgICAgICAgdHlwZTogRGF0YVR5cGVzLlVVSUQsXG4gICAgICAgIGRlZmF1bHRWYWx1ZTogRGF0YVR5cGVzLlVVSURWNCxcbiAgICAgICAgcHJpbWFyeUtleTogdHJ1ZSxcbiAgICAgIH0sXG4gICAgICBwcm9kdWN0SWQ6IHtcbiAgICAgICAgdHlwZTogRGF0YVR5cGVzLlVVSUQsXG4gICAgICAgIHJlZmVyZW5jZXM6IHtcbiAgICAgICAgICBtb2RlbDogJ3Byb2R1Y3RzJyxcbiAgICAgICAgICBrZXk6ICdpZCcsXG4gICAgICAgIH0sXG4gICAgICB9LFxuICAgICAgdXNlcklkOiB7XG4gICAgICAgIHR5cGU6IERhdGFUeXBlcy5VVUlELFxuICAgICAgICByZWZlcmVuY2VzOiB7XG4gICAgICAgICAgbW9kZWw6ICd1c2VycycsXG4gICAgICAgICAga2V5OiAnaWQnLFxuICAgICAgICB9LFxuICAgICAgfSxcbiAgICAgIGZlZWRiYWNrOiBEYXRhVHlwZXMuVEVYVCxcbiAgICAgIHJhdGluZzogRGF0YVR5cGVzLklOVEVHRVIsXG4gICAgfSxcbiAgICB7XG4gICAgICBzZXF1ZWxpemUsXG4gICAgICBtb2RlbE5hbWU6ICdyZXZpZXdzJyxcbiAgICB9XG4gICk7XG4gIHJldHVybiByZXZpZXdzO1xufTtcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBR0EsSUFBQUEsVUFBQSxHQUFBQyxPQUFBO0FBSEE7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQU5BLElBQUFDLFFBQUEsR0FPZUEsQ0FBQ0MsU0FBUyxFQUFFQyxTQUFTLEtBQUs7RUFDdkM7QUFDRjtBQUNBO0VBQ0UsTUFBTUMsT0FBTyxTQUFTQyxnQkFBSyxDQUFDO0lBQzFCO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7SUFDSSxPQUFPQyxTQUFTQSxDQUFDQyxNQUFNLEVBQUU7TUFDdkJILE9BQU8sQ0FBQ0ksU0FBUyxDQUFDRCxNQUFNLENBQUNFLFFBQVEsRUFBRTtRQUNqQ0MsRUFBRSxFQUFFLFNBQVM7UUFDYkMsVUFBVSxFQUFFO01BQ2QsQ0FBQyxFQUFFUCxPQUFPLENBQUNJLFNBQVMsQ0FBQ0QsTUFBTSxDQUFDSyxLQUFLLEVBQUU7UUFDakNGLEVBQUUsRUFBRSxVQUFVO1FBQ2RDLFVBQVUsRUFBRTtNQUNkLENBQUMsQ0FBQyxDQUFDO0lBQ0w7RUFDRjtFQUNBUCxPQUFPLENBQUNTLElBQUksQ0FDVjtJQUNFQyxFQUFFLEVBQUU7TUFDRkMsSUFBSSxFQUFFWixTQUFTLENBQUNhLElBQUk7TUFDcEJDLFlBQVksRUFBRWQsU0FBUyxDQUFDZSxNQUFNO01BQzlCQyxVQUFVLEVBQUU7SUFDZCxDQUFDO0lBQ0RDLFNBQVMsRUFBRTtNQUNUTCxJQUFJLEVBQUVaLFNBQVMsQ0FBQ2EsSUFBSTtNQUNwQkssVUFBVSxFQUFFO1FBQ1ZDLEtBQUssRUFBRSxVQUFVO1FBQ2pCQyxHQUFHLEVBQUU7TUFDUDtJQUNGLENBQUM7SUFDREMsTUFBTSxFQUFFO01BQ05ULElBQUksRUFBRVosU0FBUyxDQUFDYSxJQUFJO01BQ3BCSyxVQUFVLEVBQUU7UUFDVkMsS0FBSyxFQUFFLE9BQU87UUFDZEMsR0FBRyxFQUFFO01BQ1A7SUFDRixDQUFDO0lBQ0RFLFFBQVEsRUFBRXRCLFNBQVMsQ0FBQ3VCLElBQUk7SUFDeEJDLE1BQU0sRUFBRXhCLFNBQVMsQ0FBQ3lCO0VBQ3BCLENBQUMsRUFDRDtJQUNFMUIsU0FBUztJQUNUMkIsU0FBUyxFQUFFO0VBQ2IsQ0FBQyxDQUNGO0VBQ0QsT0FBT3pCLE9BQU87QUFDaEIsQ0FBQztBQUFBMEIsT0FBQSxDQUFBQyxPQUFBLEdBQUE5QixRQUFBO0FBQUErQixNQUFBLENBQUFGLE9BQUEsR0FBQUEsT0FBQSxDQUFBQyxPQUFBIn0=","map":{"version":3,"names":["_sequelize","require","_default","sequelize","DataTypes","reviews","Model","associate","models","belongsTo","products","as","foreignKey","users","init","id","type","UUID","defaultValue","UUIDV4","primaryKey","productId","references","model","key","userId","feedback","TEXT","rating","INTEGER","modelName","exports","default","module"],"sourceRoot":"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/database/models/","sources":["reviews.js"],"sourcesContent":["// const {\n//   Model\n// } = require('sequelize');\nimport { Model } from 'sequelize';\n\n// eslint-disable-next-line valid-jsdoc\n/**\n * Review model\n * @param {import('sequelize').Sequelize} sequelize\n * @param {import('sequelize').DataType} DataTypes\n *\n * @returns {import('sequelize').Model}\n */\nexport default (sequelize, DataTypes) => {\n  /**\n   * Revie Model\n   */\n  class reviews extends Model {\n    /**\n     * Helper method for defining associations.\n     * @param {*} models\n     * @returns {void}\n     */\n    static associate(models) {\n      reviews.belongsTo(models.products, {\n        as: 'reviews',\n        foreignKey: 'productId',\n      }, reviews.belongsTo(models.users, {\n        as: 'reviewer',\n        foreignKey: 'userId',\n      }));\n    }\n  }\n  reviews.init(\n    {\n      id: {\n        type: DataTypes.UUID,\n        defaultValue: DataTypes.UUIDV4,\n        primaryKey: true,\n      },\n      productId: {\n        type: DataTypes.UUID,\n        references: {\n          model: 'products',\n          key: 'id',\n        },\n      },\n      userId: {\n        type: DataTypes.UUID,\n        references: {\n          model: 'users',\n          key: 'id',\n        },\n      },\n      feedback: DataTypes.TEXT,\n      rating: DataTypes.INTEGER,\n    },\n    {\n      sequelize,\n      modelName: 'reviews',\n    }\n  );\n  return reviews;\n};\n"],"mappings":";;;;;;AAGA,IAAAA,UAAA,GAAAC,OAAA;AAHA;AACA;AACA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AANA,IAAAC,QAAA,GAOeA,CAACC,SAAS,EAAEC,SAAS,KAAK;EACvC;AACF;AACA;EACE,MAAMC,OAAO,SAASC,gBAAK,CAAC;IAC1B;AACJ;AACA;AACA;AACA;IACI,OAAOC,SAASA,CAACC,MAAM,EAAE;MACvBH,OAAO,CAACI,SAAS,CAACD,MAAM,CAACE,QAAQ,EAAE;QACjCC,EAAE,EAAE,SAAS;QACbC,UAAU,EAAE;MACd,CAAC,EAAEP,OAAO,CAACI,SAAS,CAACD,MAAM,CAACK,KAAK,EAAE;QACjCF,EAAE,EAAE,UAAU;QACdC,UAAU,EAAE;MACd,CAAC,CAAC,CAAC;IACL;EACF;EACAP,OAAO,CAACS,IAAI,CACV;IACEC,EAAE,EAAE;MACFC,IAAI,EAAEZ,SAAS,CAACa,IAAI;MACpBC,YAAY,EAAEd,SAAS,CAACe,MAAM;MAC9BC,UAAU,EAAE;IACd,CAAC;IACDC,SAAS,EAAE;MACTL,IAAI,EAAEZ,SAAS,CAACa,IAAI;MACpBK,UAAU,EAAE;QACVC,KAAK,EAAE,UAAU;QACjBC,GAAG,EAAE;MACP;IACF,CAAC;IACDC,MAAM,EAAE;MACNT,IAAI,EAAEZ,SAAS,CAACa,IAAI;MACpBK,UAAU,EAAE;QACVC,KAAK,EAAE,OAAO;QACdC,GAAG,EAAE;MACP;IACF,CAAC;IACDE,QAAQ,EAAEtB,SAAS,CAACuB,IAAI;IACxBC,MAAM,EAAExB,SAAS,CAACyB;EACpB,CAAC,EACD;IACE1B,SAAS;IACT2B,SAAS,EAAE;EACb,CAAC,CACF;EACD,OAAOzB,OAAO;AAChB,CAAC;AAAA0B,OAAA,CAAAC,OAAA,GAAA9B,QAAA;AAAA+B,MAAA,CAAAF,OAAA,GAAAA,OAAA,CAAAC,OAAA"}},"mtime":1685643189445},"{\"assumptions\":{},\"sourceRoot\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/database/models/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"filename\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/database/models/subscriber.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/node_modules/babel-plugin-add-module-exports/lib/index.js\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-runtime\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"regenerator\":true},\"externalDependencies\":[]},{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.21.0:development":{"value":{"code":"\"use strict\";\n\n/* eslint-disable no-unused-vars */\n/* eslint-disable valid-jsdoc */\n/* eslint-disable require-jsdoc */\nconst {\n  Model\n} = require('sequelize');\nmodule.exports = (sequelize, DataTypes) => {\n  class Subscriber extends Model {\n    /**\n     * Helper method for defining associations.\n     * This method is not a part of Sequelize lifecycle.\n     * The `models/index` file will call this method automatically.\n     */\n    static associate(models) {\n      // define association here\n    }\n  }\n  Subscriber.init({\n    id: {\n      allowNull: false,\n      primaryKey: true,\n      type: DataTypes.UUID,\n      defaultValue: DataTypes.UUIDV4\n    },\n    verificationToken: {\n      type: DataTypes.STRING,\n      allowNull: true\n    },\n    email: DataTypes.STRING,\n    firstName: DataTypes.STRING,\n    lastName: DataTypes.STRING,\n    subscribed: DataTypes.BOOLEAN\n  }, {\n    sequelize,\n    modelName: 'Subscriber'\n  });\n  return Subscriber;\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJNb2RlbCIsInJlcXVpcmUiLCJtb2R1bGUiLCJleHBvcnRzIiwic2VxdWVsaXplIiwiRGF0YVR5cGVzIiwiU3Vic2NyaWJlciIsImFzc29jaWF0ZSIsIm1vZGVscyIsImluaXQiLCJpZCIsImFsbG93TnVsbCIsInByaW1hcnlLZXkiLCJ0eXBlIiwiVVVJRCIsImRlZmF1bHRWYWx1ZSIsIlVVSURWNCIsInZlcmlmaWNhdGlvblRva2VuIiwiU1RSSU5HIiwiZW1haWwiLCJmaXJzdE5hbWUiLCJsYXN0TmFtZSIsInN1YnNjcmliZWQiLCJCT09MRUFOIiwibW9kZWxOYW1lIl0sInNvdXJjZVJvb3QiOiIvVXNlcnMvYW5kZWxhcndhbmRhL0Rlc2t0b3AvZS1jb21tLXRlYW0tYnJvZ3JhbW1lcnMtYm4vc3JjL2RhdGFiYXNlL21vZGVscy8iLCJzb3VyY2VzIjpbInN1YnNjcmliZXIuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLyogZXNsaW50LWRpc2FibGUgbm8tdW51c2VkLXZhcnMgKi9cbi8qIGVzbGludC1kaXNhYmxlIHZhbGlkLWpzZG9jICovXG4vKiBlc2xpbnQtZGlzYWJsZSByZXF1aXJlLWpzZG9jICovXG5jb25zdCB7XG4gIE1vZGVsXG59ID0gcmVxdWlyZSgnc2VxdWVsaXplJyk7XG5cbm1vZHVsZS5leHBvcnRzID0gKHNlcXVlbGl6ZSwgRGF0YVR5cGVzKSA9PiB7XG4gIGNsYXNzIFN1YnNjcmliZXIgZXh0ZW5kcyBNb2RlbCB7XG4gICAgLyoqXG4gICAgICogSGVscGVyIG1ldGhvZCBmb3IgZGVmaW5pbmcgYXNzb2NpYXRpb25zLlxuICAgICAqIFRoaXMgbWV0aG9kIGlzIG5vdCBhIHBhcnQgb2YgU2VxdWVsaXplIGxpZmVjeWNsZS5cbiAgICAgKiBUaGUgYG1vZGVscy9pbmRleGAgZmlsZSB3aWxsIGNhbGwgdGhpcyBtZXRob2QgYXV0b21hdGljYWxseS5cbiAgICAgKi9cbiAgICBzdGF0aWMgYXNzb2NpYXRlKG1vZGVscykge1xuICAgICAgLy8gZGVmaW5lIGFzc29jaWF0aW9uIGhlcmVcbiAgICB9XG4gIH1cbiAgU3Vic2NyaWJlci5pbml0KHtcbiAgICBpZDoge1xuICAgICAgYWxsb3dOdWxsOiBmYWxzZSxcbiAgICAgIHByaW1hcnlLZXk6IHRydWUsXG4gICAgICB0eXBlOiBEYXRhVHlwZXMuVVVJRCxcbiAgICAgIGRlZmF1bHRWYWx1ZTogRGF0YVR5cGVzLlVVSURWNCxcbiAgICB9LFxuICAgIHZlcmlmaWNhdGlvblRva2VuOiB7XG4gICAgICB0eXBlOiBEYXRhVHlwZXMuU1RSSU5HLFxuICAgICAgYWxsb3dOdWxsOiB0cnVlXG4gICAgfSxcbiAgICBlbWFpbDogRGF0YVR5cGVzLlNUUklORyxcbiAgICBmaXJzdE5hbWU6IERhdGFUeXBlcy5TVFJJTkcsXG4gICAgbGFzdE5hbWU6IERhdGFUeXBlcy5TVFJJTkcsXG4gICAgc3Vic2NyaWJlZDogRGF0YVR5cGVzLkJPT0xFQU5cbiAgfSwge1xuICAgIHNlcXVlbGl6ZSxcbiAgICBtb2RlbE5hbWU6ICdTdWJzY3JpYmVyJyxcbiAgfSk7XG4gIHJldHVybiBTdWJzY3JpYmVyO1xufTtcbiJdLCJtYXBwaW5ncyI6Ijs7QUFBQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0VBQ0pBO0FBQ0YsQ0FBQyxHQUFHQyxPQUFPLENBQUMsV0FBVyxDQUFDO0FBRXhCQyxNQUFNLENBQUNDLE9BQU8sR0FBRyxDQUFDQyxTQUFTLEVBQUVDLFNBQVMsS0FBSztFQUN6QyxNQUFNQyxVQUFVLFNBQVNOLEtBQUssQ0FBQztJQUM3QjtBQUNKO0FBQ0E7QUFDQTtBQUNBO0lBQ0ksT0FBT08sU0FBU0EsQ0FBQ0MsTUFBTSxFQUFFO01BQ3ZCO0lBQUE7RUFFSjtFQUNBRixVQUFVLENBQUNHLElBQUksQ0FBQztJQUNkQyxFQUFFLEVBQUU7TUFDRkMsU0FBUyxFQUFFLEtBQUs7TUFDaEJDLFVBQVUsRUFBRSxJQUFJO01BQ2hCQyxJQUFJLEVBQUVSLFNBQVMsQ0FBQ1MsSUFBSTtNQUNwQkMsWUFBWSxFQUFFVixTQUFTLENBQUNXO0lBQzFCLENBQUM7SUFDREMsaUJBQWlCLEVBQUU7TUFDakJKLElBQUksRUFBRVIsU0FBUyxDQUFDYSxNQUFNO01BQ3RCUCxTQUFTLEVBQUU7SUFDYixDQUFDO0lBQ0RRLEtBQUssRUFBRWQsU0FBUyxDQUFDYSxNQUFNO0lBQ3ZCRSxTQUFTLEVBQUVmLFNBQVMsQ0FBQ2EsTUFBTTtJQUMzQkcsUUFBUSxFQUFFaEIsU0FBUyxDQUFDYSxNQUFNO0lBQzFCSSxVQUFVLEVBQUVqQixTQUFTLENBQUNrQjtFQUN4QixDQUFDLEVBQUU7SUFDRG5CLFNBQVM7SUFDVG9CLFNBQVMsRUFBRTtFQUNiLENBQUMsQ0FBQztFQUNGLE9BQU9sQixVQUFVO0FBQ25CLENBQUMifQ==","map":{"version":3,"names":["Model","require","module","exports","sequelize","DataTypes","Subscriber","associate","models","init","id","allowNull","primaryKey","type","UUID","defaultValue","UUIDV4","verificationToken","STRING","email","firstName","lastName","subscribed","BOOLEAN","modelName"],"sourceRoot":"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/database/models/","sources":["subscriber.js"],"sourcesContent":["/* eslint-disable no-unused-vars */\n/* eslint-disable valid-jsdoc */\n/* eslint-disable require-jsdoc */\nconst {\n  Model\n} = require('sequelize');\n\nmodule.exports = (sequelize, DataTypes) => {\n  class Subscriber extends Model {\n    /**\n     * Helper method for defining associations.\n     * This method is not a part of Sequelize lifecycle.\n     * The `models/index` file will call this method automatically.\n     */\n    static associate(models) {\n      // define association here\n    }\n  }\n  Subscriber.init({\n    id: {\n      allowNull: false,\n      primaryKey: true,\n      type: DataTypes.UUID,\n      defaultValue: DataTypes.UUIDV4,\n    },\n    verificationToken: {\n      type: DataTypes.STRING,\n      allowNull: true\n    },\n    email: DataTypes.STRING,\n    firstName: DataTypes.STRING,\n    lastName: DataTypes.STRING,\n    subscribed: DataTypes.BOOLEAN\n  }, {\n    sequelize,\n    modelName: 'Subscriber',\n  });\n  return Subscriber;\n};\n"],"mappings":";;AAAA;AACA;AACA;AACA,MAAM;EACJA;AACF,CAAC,GAAGC,OAAO,CAAC,WAAW,CAAC;AAExBC,MAAM,CAACC,OAAO,GAAG,CAACC,SAAS,EAAEC,SAAS,KAAK;EACzC,MAAMC,UAAU,SAASN,KAAK,CAAC;IAC7B;AACJ;AACA;AACA;AACA;IACI,OAAOO,SAASA,CAACC,MAAM,EAAE;MACvB;IAAA;EAEJ;EACAF,UAAU,CAACG,IAAI,CAAC;IACdC,EAAE,EAAE;MACFC,SAAS,EAAE,KAAK;MAChBC,UAAU,EAAE,IAAI;MAChBC,IAAI,EAAER,SAAS,CAACS,IAAI;MACpBC,YAAY,EAAEV,SAAS,CAACW;IAC1B,CAAC;IACDC,iBAAiB,EAAE;MACjBJ,IAAI,EAAER,SAAS,CAACa,MAAM;MACtBP,SAAS,EAAE;IACb,CAAC;IACDQ,KAAK,EAAEd,SAAS,CAACa,MAAM;IACvBE,SAAS,EAAEf,SAAS,CAACa,MAAM;IAC3BG,QAAQ,EAAEhB,SAAS,CAACa,MAAM;IAC1BI,UAAU,EAAEjB,SAAS,CAACkB;EACxB,CAAC,EAAE;IACDnB,SAAS;IACToB,SAAS,EAAE;EACb,CAAC,CAAC;EACF,OAAOlB,UAAU;AACnB,CAAC"}},"mtime":1682148437930},"{\"assumptions\":{},\"sourceRoot\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/database/models/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"filename\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/database/models/users.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/node_modules/babel-plugin-add-module-exports/lib/index.js\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-runtime\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"regenerator\":true},\"externalDependencies\":[]},{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.21.0:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _sequelize = require(\"sequelize\");\n/**\n * exporting the user model and it's features.\n * @param {Object} sequelize\n * @param {Object} DataTypes\n * @returns {Object} the model for user\n */\nvar _default = (sequelize, DataTypes) => {\n  // eslint-disable-next-line require-jsdoc\n  class users extends _sequelize.Model {\n    // eslint-disable-next-line valid-jsdoc\n    /**\n     * Helper method for defining associations.\n     * This method is not a part of Sequelize lifecycle.\n     * The `models/index` file will call this method automatically.\n     */\n    static associate(models) {\n      users.hasMany(models.notifications, {\n        as: 'notifications',\n        foreignKey: 'receiverId'\n      });\n      users.hasOne(models.carts, {\n        as: 'cart',\n        foreignKey: 'userId'\n      });\n      users.hasMany(models.order, {\n        as: 'orders',\n        foreignKey: 'buyerId'\n      });\n      users.hasMany(models.Chat, {\n        foreignKey: 'userId',\n        as: 'chats'\n      });\n      users.hasMany(models.Log, {\n        foreignKey: 'userId',\n        as: 'Log',\n        onDelete: 'CASCADE'\n      });\n    }\n  }\n  users.init({\n    id: {\n      allowNull: false,\n      primaryKey: true,\n      type: DataTypes.UUID,\n      defaultValue: DataTypes.UUIDV4\n    },\n    avatar: {\n      type: DataTypes.STRING(1000),\n      defaultValue: 'https://t3.ftcdn.net/jpg/01/28/56/34/360_F_128563455_bGrVZnfDCL0PxH1sU33NpOhGcCc1M7qo.jpg'\n    },\n    cover_image: {\n      type: DataTypes.STRING(1000),\n      defaultValue: 'https://cdn.conceptartempire.com/images/360/01-concept-art-video-game-item-shop.jpg'\n    },\n    username: {\n      type: DataTypes.STRING,\n      allowNull: false\n    },\n    email: {\n      type: DataTypes.STRING,\n      unique: true,\n      allowNull: false\n    },\n    password: {\n      type: DataTypes.STRING,\n      allowNull: false\n    },\n    role: {\n      type: DataTypes.STRING,\n      defaultValue: 'buyer'\n    },\n    verified: {\n      type: DataTypes.BOOLEAN,\n      defaultValue: false\n    },\n    email_token: {\n      type: DataTypes.STRING,\n      defaultValue: false\n    },\n    gender: {\n      type: DataTypes.STRING,\n      defaultValue: 'none'\n    },\n    mfa_enabled: {\n      type: DataTypes.BOOLEAN,\n      defaultValue: false\n    },\n    disabledUser: {\n      type: DataTypes.BOOLEAN,\n      defaultValue: false\n    },\n    mfa_code: {\n      type: DataTypes.INTEGER,\n      allowNull: true\n    },\n    mfa_timeout: {\n      type: DataTypes.DATE,\n      defaultValue: DataTypes.NOW\n    },\n    mustUpdatePassword: {\n      type: DataTypes.BOOLEAN,\n      defaultValue: false\n    },\n    lastTimePasswordUpdated: {\n      type: DataTypes.DATE,\n      defaultValue: Date.now()\n    }\n  }, {\n    sequelize,\n    modelName: 'users'\n  });\n  return users;\n};\nexports.default = _default;\nmodule.exports = exports.default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfc2VxdWVsaXplIiwicmVxdWlyZSIsIl9kZWZhdWx0Iiwic2VxdWVsaXplIiwiRGF0YVR5cGVzIiwidXNlcnMiLCJNb2RlbCIsImFzc29jaWF0ZSIsIm1vZGVscyIsImhhc01hbnkiLCJub3RpZmljYXRpb25zIiwiYXMiLCJmb3JlaWduS2V5IiwiaGFzT25lIiwiY2FydHMiLCJvcmRlciIsIkNoYXQiLCJMb2ciLCJvbkRlbGV0ZSIsImluaXQiLCJpZCIsImFsbG93TnVsbCIsInByaW1hcnlLZXkiLCJ0eXBlIiwiVVVJRCIsImRlZmF1bHRWYWx1ZSIsIlVVSURWNCIsImF2YXRhciIsIlNUUklORyIsImNvdmVyX2ltYWdlIiwidXNlcm5hbWUiLCJlbWFpbCIsInVuaXF1ZSIsInBhc3N3b3JkIiwicm9sZSIsInZlcmlmaWVkIiwiQk9PTEVBTiIsImVtYWlsX3Rva2VuIiwiZ2VuZGVyIiwibWZhX2VuYWJsZWQiLCJkaXNhYmxlZFVzZXIiLCJtZmFfY29kZSIsIklOVEVHRVIiLCJtZmFfdGltZW91dCIsIkRBVEUiLCJOT1ciLCJtdXN0VXBkYXRlUGFzc3dvcmQiLCJsYXN0VGltZVBhc3N3b3JkVXBkYXRlZCIsIkRhdGUiLCJub3ciLCJtb2RlbE5hbWUiLCJleHBvcnRzIiwiZGVmYXVsdCIsIm1vZHVsZSJdLCJzb3VyY2VSb290IjoiL1VzZXJzL2FuZGVsYXJ3YW5kYS9EZXNrdG9wL2UtY29tbS10ZWFtLWJyb2dyYW1tZXJzLWJuL3NyYy9kYXRhYmFzZS9tb2RlbHMvIiwic291cmNlcyI6WyJ1c2Vycy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBNb2RlbCB9IGZyb20gJ3NlcXVlbGl6ZSc7XG5cbi8qKlxuICogZXhwb3J0aW5nIHRoZSB1c2VyIG1vZGVsIGFuZCBpdCdzIGZlYXR1cmVzLlxuICogQHBhcmFtIHtPYmplY3R9IHNlcXVlbGl6ZVxuICogQHBhcmFtIHtPYmplY3R9IERhdGFUeXBlc1xuICogQHJldHVybnMge09iamVjdH0gdGhlIG1vZGVsIGZvciB1c2VyXG4gKi9cbmV4cG9ydCBkZWZhdWx0IChzZXF1ZWxpemUsIERhdGFUeXBlcykgPT4ge1xuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgcmVxdWlyZS1qc2RvY1xuICBjbGFzcyB1c2VycyBleHRlbmRzIE1vZGVsIHtcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgdmFsaWQtanNkb2NcbiAgICAvKipcbiAgICAgKiBIZWxwZXIgbWV0aG9kIGZvciBkZWZpbmluZyBhc3NvY2lhdGlvbnMuXG4gICAgICogVGhpcyBtZXRob2QgaXMgbm90IGEgcGFydCBvZiBTZXF1ZWxpemUgbGlmZWN5Y2xlLlxuICAgICAqIFRoZSBgbW9kZWxzL2luZGV4YCBmaWxlIHdpbGwgY2FsbCB0aGlzIG1ldGhvZCBhdXRvbWF0aWNhbGx5LlxuICAgICAqL1xuICAgIHN0YXRpYyBhc3NvY2lhdGUobW9kZWxzKSB7XG4gICAgICB1c2Vycy5oYXNNYW55KG1vZGVscy5ub3RpZmljYXRpb25zLCB7IGFzOiAnbm90aWZpY2F0aW9ucycsIGZvcmVpZ25LZXk6ICdyZWNlaXZlcklkJyB9KTtcbiAgICAgIHVzZXJzLmhhc09uZShtb2RlbHMuY2FydHMsIHsgYXM6ICdjYXJ0JywgZm9yZWlnbktleTogJ3VzZXJJZCcgfSk7XG4gICAgICB1c2Vycy5oYXNNYW55KG1vZGVscy5vcmRlciwgeyBhczogJ29yZGVycycsIGZvcmVpZ25LZXk6ICdidXllcklkJyB9KTtcbiAgICAgIHVzZXJzLmhhc01hbnkobW9kZWxzLkNoYXQsIHtcbiAgICAgICAgZm9yZWlnbktleTogJ3VzZXJJZCcsXG4gICAgICAgIGFzOiAnY2hhdHMnLFxuICAgICAgfSk7XG4gICAgICB1c2Vycy5oYXNNYW55KG1vZGVscy5Mb2csIHtcbiAgICAgICAgZm9yZWlnbktleTogJ3VzZXJJZCcsXG4gICAgICAgIGFzOiAnTG9nJyxcbiAgICAgICAgb25EZWxldGU6ICdDQVNDQURFJyxcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuICB1c2Vycy5pbml0KFxuICAgIHtcbiAgICAgIGlkOiB7XG4gICAgICAgIGFsbG93TnVsbDogZmFsc2UsXG4gICAgICAgIHByaW1hcnlLZXk6IHRydWUsXG4gICAgICAgIHR5cGU6IERhdGFUeXBlcy5VVUlELFxuICAgICAgICBkZWZhdWx0VmFsdWU6IERhdGFUeXBlcy5VVUlEVjQsXG4gICAgICB9LFxuICAgICAgYXZhdGFyOiB7XG4gICAgICAgIHR5cGU6IERhdGFUeXBlcy5TVFJJTkcoMTAwMCksXG4gICAgICAgIGRlZmF1bHRWYWx1ZTogJ2h0dHBzOi8vdDMuZnRjZG4ubmV0L2pwZy8wMS8yOC81Ni8zNC8zNjBfRl8xMjg1NjM0NTVfYkdyVlpuZkRDTDBQeEgxc1UzM05wT2hHY0NjMU03cW8uanBnJ1xuICAgICAgfSxcbiAgICAgIGNvdmVyX2ltYWdlOiB7XG4gICAgICAgIHR5cGU6IERhdGFUeXBlcy5TVFJJTkcoMTAwMCksXG4gICAgICAgIGRlZmF1bHRWYWx1ZTogJ2h0dHBzOi8vY2RuLmNvbmNlcHRhcnRlbXBpcmUuY29tL2ltYWdlcy8zNjAvMDEtY29uY2VwdC1hcnQtdmlkZW8tZ2FtZS1pdGVtLXNob3AuanBnJ1xuICAgICAgfSxcbiAgICAgIHVzZXJuYW1lOiB7XG4gICAgICAgIHR5cGU6IERhdGFUeXBlcy5TVFJJTkcsXG4gICAgICAgIGFsbG93TnVsbDogZmFsc2UsXG4gICAgICB9LFxuICAgICAgZW1haWw6IHtcbiAgICAgICAgdHlwZTogRGF0YVR5cGVzLlNUUklORyxcbiAgICAgICAgdW5pcXVlOiB0cnVlLFxuICAgICAgICBhbGxvd051bGw6IGZhbHNlLFxuICAgICAgfSxcbiAgICAgIHBhc3N3b3JkOiB7XG4gICAgICAgIHR5cGU6IERhdGFUeXBlcy5TVFJJTkcsXG4gICAgICAgIGFsbG93TnVsbDogZmFsc2UsXG4gICAgICB9LFxuICAgICAgcm9sZToge1xuICAgICAgICB0eXBlOiBEYXRhVHlwZXMuU1RSSU5HLFxuICAgICAgICBkZWZhdWx0VmFsdWU6ICdidXllcicsXG4gICAgICB9LFxuICAgICAgdmVyaWZpZWQ6IHtcbiAgICAgICAgdHlwZTogRGF0YVR5cGVzLkJPT0xFQU4sXG4gICAgICAgIGRlZmF1bHRWYWx1ZTogZmFsc2UsXG4gICAgICB9LFxuICAgICAgZW1haWxfdG9rZW46IHtcbiAgICAgICAgdHlwZTogRGF0YVR5cGVzLlNUUklORyxcbiAgICAgICAgZGVmYXVsdFZhbHVlOiBmYWxzZSxcbiAgICAgIH0sXG4gICAgICBnZW5kZXI6IHtcbiAgICAgICAgdHlwZTogRGF0YVR5cGVzLlNUUklORyxcbiAgICAgICAgZGVmYXVsdFZhbHVlOiAnbm9uZScsXG4gICAgICB9LFxuICAgICAgbWZhX2VuYWJsZWQ6IHtcbiAgICAgICAgdHlwZTogRGF0YVR5cGVzLkJPT0xFQU4sXG4gICAgICAgIGRlZmF1bHRWYWx1ZTogZmFsc2UsXG4gICAgICB9LFxuICAgICAgZGlzYWJsZWRVc2VyOiB7XG4gICAgICAgIHR5cGU6IERhdGFUeXBlcy5CT09MRUFOLFxuICAgICAgICBkZWZhdWx0VmFsdWU6IGZhbHNlLFxuICAgICAgfSxcbiAgICAgIG1mYV9jb2RlOiB7XG4gICAgICAgIHR5cGU6IERhdGFUeXBlcy5JTlRFR0VSLFxuICAgICAgICBhbGxvd051bGw6IHRydWUsXG4gICAgICB9LFxuICAgICAgbWZhX3RpbWVvdXQ6IHtcbiAgICAgICAgdHlwZTogRGF0YVR5cGVzLkRBVEUsXG4gICAgICAgIGRlZmF1bHRWYWx1ZTogRGF0YVR5cGVzLk5PVyxcbiAgICAgIH0sXG4gICAgICBtdXN0VXBkYXRlUGFzc3dvcmQ6IHtcbiAgICAgICAgdHlwZTogRGF0YVR5cGVzLkJPT0xFQU4sXG4gICAgICAgIGRlZmF1bHRWYWx1ZTogZmFsc2UsXG4gICAgICB9LFxuICAgICAgbGFzdFRpbWVQYXNzd29yZFVwZGF0ZWQ6IHtcbiAgICAgICAgdHlwZTogRGF0YVR5cGVzLkRBVEUsXG4gICAgICAgIGRlZmF1bHRWYWx1ZTogRGF0ZS5ub3coKSxcbiAgICAgIH1cbiAgICB9LFxuICAgIHtcbiAgICAgIHNlcXVl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","map":{"version":3,"names":["_sequelize","require","_default","sequelize","DataTypes","users","Model","associate","models","hasMany","notifications","as","foreignKey","hasOne","carts","order","Chat","Log","onDelete","init","id","allowNull","primaryKey","type","UUID","defaultValue","UUIDV4","avatar","STRING","cover_image","username","email","unique","password","role","verified","BOOLEAN","email_token","gender","mfa_enabled","disabledUser","mfa_code","INTEGER","mfa_timeout","DATE","NOW","mustUpdatePassword","lastTimePasswordUpdated","Date","now","modelName","exports","default","module"],"sourceRoot":"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/database/models/","sources":["users.js"],"sourcesContent":["import { Model } from 'sequelize';\n\n/**\n * exporting the user model and it's features.\n * @param {Object} sequelize\n * @param {Object} DataTypes\n * @returns {Object} the model for user\n */\nexport default (sequelize, DataTypes) => {\n  // eslint-disable-next-line require-jsdoc\n  class users extends Model {\n    // eslint-disable-next-line valid-jsdoc\n    /**\n     * Helper method for defining associations.\n     * This method is not a part of Sequelize lifecycle.\n     * The `models/index` file will call this method automatically.\n     */\n    static associate(models) {\n      users.hasMany(models.notifications, { as: 'notifications', foreignKey: 'receiverId' });\n      users.hasOne(models.carts, { as: 'cart', foreignKey: 'userId' });\n      users.hasMany(models.order, { as: 'orders', foreignKey: 'buyerId' });\n      users.hasMany(models.Chat, {\n        foreignKey: 'userId',\n        as: 'chats',\n      });\n      users.hasMany(models.Log, {\n        foreignKey: 'userId',\n        as: 'Log',\n        onDelete: 'CASCADE',\n      });\n    }\n  }\n  users.init(\n    {\n      id: {\n        allowNull: false,\n        primaryKey: true,\n        type: DataTypes.UUID,\n        defaultValue: DataTypes.UUIDV4,\n      },\n      avatar: {\n        type: DataTypes.STRING(1000),\n        defaultValue: 'https://t3.ftcdn.net/jpg/01/28/56/34/360_F_128563455_bGrVZnfDCL0PxH1sU33NpOhGcCc1M7qo.jpg'\n      },\n      cover_image: {\n        type: DataTypes.STRING(1000),\n        defaultValue: 'https://cdn.conceptartempire.com/images/360/01-concept-art-video-game-item-shop.jpg'\n      },\n      username: {\n        type: DataTypes.STRING,\n        allowNull: false,\n      },\n      email: {\n        type: DataTypes.STRING,\n        unique: true,\n        allowNull: false,\n      },\n      password: {\n        type: DataTypes.STRING,\n        allowNull: false,\n      },\n      role: {\n        type: DataTypes.STRING,\n        defaultValue: 'buyer',\n      },\n      verified: {\n        type: DataTypes.BOOLEAN,\n        defaultValue: false,\n      },\n      email_token: {\n        type: DataTypes.STRING,\n        defaultValue: false,\n      },\n      gender: {\n        type: DataTypes.STRING,\n        defaultValue: 'none',\n      },\n      mfa_enabled: {\n        type: DataTypes.BOOLEAN,\n        defaultValue: false,\n      },\n      disabledUser: {\n        type: DataTypes.BOOLEAN,\n        defaultValue: false,\n      },\n      mfa_code: {\n        type: DataTypes.INTEGER,\n        allowNull: true,\n      },\n      mfa_timeout: {\n        type: DataTypes.DATE,\n        defaultValue: DataTypes.NOW,\n      },\n      mustUpdatePassword: {\n        type: DataTypes.BOOLEAN,\n        defaultValue: false,\n      },\n      lastTimePasswordUpdated: {\n        type: DataTypes.DATE,\n        defaultValue: Date.now(),\n      }\n    },\n    {\n      sequelize,\n      modelName: 'users',\n    }\n  );\n  return users;\n};\n"],"mappings":"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"}},"mtime":1682148437930},"{\"assumptions\":{},\"sourceRoot\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/database/models/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"filename\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/database/models/wishlist.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/node_modules/babel-plugin-add-module-exports/lib/index.js\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-runtime\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"regenerator\":true},\"externalDependencies\":[]},{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.21.0:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _sequelize = require(\"sequelize\");\n/**\n * exporting the user model and it's features.\n * @param {Object} sequelize\n * @param {Object} DataTypes\n * @returns {Object} the model for wish\n */\nvar _default = (sequelize, DataTypes) => {\n  // eslint-disable-next-line require-jsdoc\n  class wishlists extends _sequelize.Model {\n    // eslint-disable-next-line valid-jsdoc\n    /**\n     * Helper method for defining associations.\n     * This method is not a part of Sequelize lifecycle.\n     * The `models/index` file will call this method automatically.\n     */\n    static associate() {\n      // define association here\n    }\n  }\n  wishlists.init({\n    id: {\n      allowNull: false,\n      primaryKey: true,\n      type: DataTypes.UUID,\n      defaultValue: DataTypes.UUIDV4\n    },\n    userId: {\n      type: DataTypes.UUID,\n      allowNull: false,\n      references: {\n        model: 'users',\n        key: 'id'\n      }\n    },\n    productId: {\n      type: DataTypes.INTEGER,\n      references: {\n        model: 'products',\n        key: 'id'\n      }\n    }\n  }, {\n    sequelize,\n    modelName: 'wishlists'\n  });\n  return wishlists;\n};\nexports.default = _default;\nmodule.exports = exports.default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfc2VxdWVsaXplIiwicmVxdWlyZSIsIl9kZWZhdWx0Iiwic2VxdWVsaXplIiwiRGF0YVR5cGVzIiwid2lzaGxpc3RzIiwiTW9kZWwiLCJhc3NvY2lhdGUiLCJpbml0IiwiaWQiLCJhbGxvd051bGwiLCJwcmltYXJ5S2V5IiwidHlwZSIsIlVVSUQiLCJkZWZhdWx0VmFsdWUiLCJVVUlEVjQiLCJ1c2VySWQiLCJyZWZlcmVuY2VzIiwibW9kZWwiLCJrZXkiLCJwcm9kdWN0SWQiLCJJTlRFR0VSIiwibW9kZWxOYW1lIiwiZXhwb3J0cyIsImRlZmF1bHQiLCJtb2R1bGUiXSwic291cmNlUm9vdCI6Ii9Vc2Vycy9hbmRlbGFyd2FuZGEvRGVza3RvcC9lLWNvbW0tdGVhbS1icm9ncmFtbWVycy1ibi9zcmMvZGF0YWJhc2UvbW9kZWxzLyIsInNvdXJjZXMiOlsid2lzaGxpc3QuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTW9kZWwgfSBmcm9tICdzZXF1ZWxpemUnO1xuXG4vKipcbiAqIGV4cG9ydGluZyB0aGUgdXNlciBtb2RlbCBhbmQgaXQncyBmZWF0dXJlcy5cbiAqIEBwYXJhbSB7T2JqZWN0fSBzZXF1ZWxpemVcbiAqIEBwYXJhbSB7T2JqZWN0fSBEYXRhVHlwZXNcbiAqIEByZXR1cm5zIHtPYmplY3R9IHRoZSBtb2RlbCBmb3Igd2lzaFxuICovXG5leHBvcnQgZGVmYXVsdCAoc2VxdWVsaXplLCBEYXRhVHlwZXMpID0+IHtcbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIHJlcXVpcmUtanNkb2NcbiAgY2xhc3Mgd2lzaGxpc3RzIGV4dGVuZHMgTW9kZWwge1xuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSB2YWxpZC1qc2RvY1xuICAgIC8qKlxuICAgICAqIEhlbHBlciBtZXRob2QgZm9yIGRlZmluaW5nIGFzc29jaWF0aW9ucy5cbiAgICAgKiBUaGlzIG1ldGhvZCBpcyBub3QgYSBwYXJ0IG9mIFNlcXVlbGl6ZSBsaWZlY3ljbGUuXG4gICAgICogVGhlIGBtb2RlbHMvaW5kZXhgIGZpbGUgd2lsbCBjYWxsIHRoaXMgbWV0aG9kIGF1dG9tYXRpY2FsbHkuXG4gICAgICovXG4gICAgc3RhdGljIGFzc29jaWF0ZSgpIHtcbiAgICAgIC8vIGRlZmluZSBhc3NvY2lhdGlvbiBoZXJlXG4gICAgfVxuICB9XG4gIHdpc2hsaXN0cy5pbml0KHtcbiAgICBpZDoge1xuICAgICAgYWxsb3dOdWxsOiBmYWxzZSxcbiAgICAgIHByaW1hcnlLZXk6IHRydWUsXG4gICAgICB0eXBlOiBEYXRhVHlwZXMuVVVJRCxcbiAgICAgIGRlZmF1bHRWYWx1ZTogRGF0YVR5cGVzLlVVSURWNFxuICAgIH0sXG4gICAgdXNlcklkOiB7XG4gICAgICB0eXBlOiBEYXRhVHlwZXMuVVVJRCxcbiAgICAgIGFsbG93TnVsbDogZmFsc2UsXG4gICAgICByZWZlcmVuY2VzOiB7XG4gICAgICAgIG1vZGVsOiAndXNlcnMnLFxuICAgICAgICBrZXk6ICdpZCdcbiAgICAgIH1cbiAgICB9LFxuICAgIHByb2R1Y3RJZDoge1xuICAgICAgdHlwZTogRGF0YVR5cGVzLklOVEVHRVIsXG4gICAgICByZWZlcmVuY2VzOiB7XG4gICAgICAgIG1vZGVsOiAncHJvZHVjdHMnLFxuICAgICAgICBrZXk6ICdpZCdcbiAgICAgIH1cbiAgICB9LFxuICB9LCB7XG4gICAgc2VxdWVsaXplLFxuICAgIG1vZGVsTmFtZTogJ3dpc2hsaXN0cydcbiAgfSk7XG4gIHJldHVybiB3aXNobGlzdHM7XG59O1xuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7QUFBQSxJQUFBQSxVQUFBLEdBQUFDLE9BQUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFMQSxJQUFBQyxRQUFBLEdBTWVBLENBQUNDLFNBQVMsRUFBRUMsU0FBUyxLQUFLO0VBQ3ZDO0VBQ0EsTUFBTUMsU0FBUyxTQUFTQyxnQkFBSyxDQUFDO0lBQzVCO0lBQ0E7QUFDSjtBQUNBO0FBQ0E7QUFDQTtJQUNJLE9BQU9DLFNBQVNBLENBQUEsRUFBRztNQUNqQjtJQUFBO0VBRUo7RUFDQUYsU0FBUyxDQUFDRyxJQUFJLENBQUM7SUFDYkMsRUFBRSxFQUFFO01BQ0ZDLFNBQVMsRUFBRSxLQUFLO01BQ2hCQyxVQUFVLEVBQUUsSUFBSTtNQUNoQkMsSUFBSSxFQUFFUixTQUFTLENBQUNTLElBQUk7TUFDcEJDLFlBQVksRUFBRVYsU0FBUyxDQUFDVztJQUMxQixDQUFDO0lBQ0RDLE1BQU0sRUFBRTtNQUNOSixJQUFJLEVBQUVSLFNBQVMsQ0FBQ1MsSUFBSTtNQUNwQkgsU0FBUyxFQUFFLEtBQUs7TUFDaEJPLFVBQVUsRUFBRTtRQUNWQyxLQUFLLEVBQUUsT0FBTztRQUNkQyxHQUFHLEVBQUU7TUFDUDtJQUNGLENBQUM7SUFDREMsU0FBUyxFQUFFO01BQ1RSLElBQUksRUFBRVIsU0FBUyxDQUFDaUIsT0FBTztNQUN2QkosVUFBVSxFQUFFO1FBQ1ZDLEtBQUssRUFBRSxVQUFVO1FBQ2pCQyxHQUFHLEVBQUU7TUFDUDtJQUNGO0VBQ0YsQ0FBQyxFQUFFO0lBQ0RoQixTQUFTO0lBQ1RtQixTQUFTLEVBQUU7RUFDYixDQUFDLENBQUM7RUFDRixPQUFPakIsU0FBUztBQUNsQixDQUFDO0FBQUFrQixPQUFBLENBQUFDLE9BQUEsR0FBQXRCLFFBQUE7QUFBQXVCLE1BQUEsQ0FBQUYsT0FBQSxHQUFBQSxPQUFBLENBQUFDLE9BQUEifQ==","map":{"version":3,"names":["_sequelize","require","_default","sequelize","DataTypes","wishlists","Model","associate","init","id","allowNull","primaryKey","type","UUID","defaultValue","UUIDV4","userId","references","model","key","productId","INTEGER","modelName","exports","default","module"],"sourceRoot":"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/database/models/","sources":["wishlist.js"],"sourcesContent":["import { Model } from 'sequelize';\n\n/**\n * exporting the user model and it's features.\n * @param {Object} sequelize\n * @param {Object} DataTypes\n * @returns {Object} the model for wish\n */\nexport default (sequelize, DataTypes) => {\n  // eslint-disable-next-line require-jsdoc\n  class wishlists extends Model {\n    // eslint-disable-next-line valid-jsdoc\n    /**\n     * Helper method for defining associations.\n     * This method is not a part of Sequelize lifecycle.\n     * The `models/index` file will call this method automatically.\n     */\n    static associate() {\n      // define association here\n    }\n  }\n  wishlists.init({\n    id: {\n      allowNull: false,\n      primaryKey: true,\n      type: DataTypes.UUID,\n      defaultValue: DataTypes.UUIDV4\n    },\n    userId: {\n      type: DataTypes.UUID,\n      allowNull: false,\n      references: {\n        model: 'users',\n        key: 'id'\n      }\n    },\n    productId: {\n      type: DataTypes.INTEGER,\n      references: {\n        model: 'products',\n        key: 'id'\n      }\n    },\n  }, {\n    sequelize,\n    modelName: 'wishlists'\n  });\n  return wishlists;\n};\n"],"mappings":";;;;;;AAAA,IAAAA,UAAA,GAAAC,OAAA;AAEA;AACA;AACA;AACA;AACA;AACA;AALA,IAAAC,QAAA,GAMeA,CAACC,SAAS,EAAEC,SAAS,KAAK;EACvC;EACA,MAAMC,SAAS,SAASC,gBAAK,CAAC;IAC5B;IACA;AACJ;AACA;AACA;AACA;IACI,OAAOC,SAASA,CAAA,EAAG;MACjB;IAAA;EAEJ;EACAF,SAAS,CAACG,IAAI,CAAC;IACbC,EAAE,EAAE;MACFC,SAAS,EAAE,KAAK;MAChBC,UAAU,EAAE,IAAI;MAChBC,IAAI,EAAER,SAAS,CAACS,IAAI;MACpBC,YAAY,EAAEV,SAAS,CAACW;IAC1B,CAAC;IACDC,MAAM,EAAE;MACNJ,IAAI,EAAER,SAAS,CAACS,IAAI;MACpBH,SAAS,EAAE,KAAK;MAChBO,UAAU,EAAE;QACVC,KAAK,EAAE,OAAO;QACdC,GAAG,EAAE;MACP;IACF,CAAC;IACDC,SAAS,EAAE;MACTR,IAAI,EAAER,SAAS,CAACiB,OAAO;MACvBJ,UAAU,EAAE;QACVC,KAAK,EAAE,UAAU;QACjBC,GAAG,EAAE;MACP;IACF;EACF,CAAC,EAAE;IACDhB,SAAS;IACTmB,SAAS,EAAE;EACb,CAAC,CAAC;EACF,OAAOjB,SAAS;AAClB,CAAC;AAAAkB,OAAA,CAAAC,OAAA,GAAAtB,QAAA;AAAAuB,MAAA,CAAAF,OAAA,GAAAA,OAAA,CAAAC,OAAA"}},"mtime":1682148437930},"{\"assumptions\":{},\"sourceRoot\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"filename\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/app.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/node_modules/babel-plugin-add-module-exports/lib/index.js\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-runtime\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"regenerator\":true},\"externalDependencies\":[]},{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.21.0:development":{"value":{"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _express = _interopRequireDefault(require(\"express\"));\nvar _dotenv = _interopRequireDefault(require(\"dotenv\"));\nvar _cors = _interopRequireDefault(require(\"cors\"));\nvar _morgan = _interopRequireDefault(require(\"morgan\"));\nvar _swaggerUiExpress = _interopRequireDefault(require(\"swagger-ui-express\"));\nvar _passport = _interopRequireDefault(require(\"passport\"));\nvar _expressSession = _interopRequireDefault(require(\"express-session\"));\nvar _path = _interopRequireDefault(require(\"path\"));\nvar _index = _interopRequireDefault(require(\"./routes/index\"));\nvar _swagger = _interopRequireDefault(require(\"./configs/swagger\"));\nvar _passwordExpiration = _interopRequireDefault(require(\"./middlewares/passwordExpiration\"));\nvar _productExpAll = _interopRequireDefault(require(\"./middlewares/productExpAll\"));\nvar _route = _interopRequireDefault(require(\"./pgbackup/route\"));\nrequire(\"./pgbackup/backup\");\nvar _subscriber = require(\"./controllers/subscriber.controller\");\n/* eslint-disable no-unused-vars */\n/* eslint-disable import/no-named-as-default */\n/* eslint-disable import/no-extraneous-dependencies */\n\n_dotenv.default.config();\n// eslint-disable-next-line prefer-const\nlet options = {\n  validatorUrl: null,\n  oauth: {\n    clientId: process.env.CLIENT_ID,\n    clientSecret: process.env.CLIENT_SECRET,\n    appName: 'project-966788183307'\n  }\n};\nconst app = (0, _express.default)();\n_passwordExpiration.default.start();\n(0, _productExpAll.default)();\n_subscriber.SubscriberController.sendNewsletter();\napp.use('/chat', _express.default.static(_path.default.join(__dirname, '../public/chat')));\napp.use(_express.default.json());\napp.use((0, _morgan.default)('dev'));\napp.use((0, _expressSession.default)({\n  secret: process.env.CAT,\n  resave: false,\n  saveUninitialized: true\n}));\napp.use(_passport.default.initialize());\napp.use(_passport.default.session());\napp.use('/public', _express.default.static('public'));\napp.use((0, _cors.default)());\napp.use(_express.default.urlencoded({\n  extended: false\n}));\napp.use('/api-docs', _swaggerUiExpress.default.serve, _swaggerUiExpress.default.setup(_swagger.default, false, options));\napp.use('/database', _route.default);\napp.use(_index.default);\napp.use((req, res) => {\n  res.status(404).json({\n    message: 'Page not found'\n  });\n});\nvar _default = app;\nexports.default = _default;\nmodule.exports = exports.default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfZXhwcmVzcyIsIl9pbnRlcm9wUmVxdWlyZURlZmF1bHQiLCJyZXF1aXJlIiwiX2RvdGVudiIsIl9jb3JzIiwiX21vcmdhbiIsIl9zd2FnZ2VyVWlFeHByZXNzIiwiX3Bhc3Nwb3J0IiwiX2V4cHJlc3NTZXNzaW9uIiwiX3BhdGgiLCJfaW5kZXgiLCJfc3dhZ2dlciIsIl9wYXNzd29yZEV4cGlyYXRpb24iLCJfcHJvZHVjdEV4cEFsbCIsIl9yb3V0ZSIsIl9zdWJzY3JpYmVyIiwiZW52IiwiY29uZmlnIiwib3B0aW9ucyIsInZhbGlkYXRvclVybCIsIm9hdXRoIiwiY2xpZW50SWQiLCJwcm9jZXNzIiwiQ0xJRU5UX0lEIiwiY2xpZW50U2VjcmV0IiwiQ0xJRU5UX1NFQ1JFVCIsImFwcE5hbWUiLCJhcHAiLCJleHByZXNzIiwiY2hlY2tQYXNzd29yZEV4cGlyYXRpb25Dcm9uSm9iIiwic3RhcnQiLCJiZWZvcmVDaGVja0V4cGlyZWRQcm9kdWN0IiwiU3Vic2NyaWJlckNvbnRyb2xsZXIiLCJzZW5kTmV3c2xldHRlciIsInVzZSIsInN0YXRpYyIsInBhdGgiLCJqb2luIiwiX19kaXJuYW1lIiwianNvbiIsIm1vcmdhbiIsInNlc3Npb24iLCJzZWNyZXQiLCJDQVQiLCJyZXNhdmUiLCJzYXZlVW5pbml0aWFsaXplZCIsInBhc3Nwb3J0IiwiaW5pdGlhbGl6ZSIsImNvcnMiLCJ1cmxlbmNvZGVkIiwiZXh0ZW5kZWQiLCJzd2FnZ2VyVUkiLCJzZXJ2ZSIsInNldHVwIiwic3dhZ2dlciIsImRiUm91dGVzIiwiYWxscm91dGVzIiwicmVxIiwicmVzIiwic3RhdHVzIiwibWVzc2FnZSIsIl9kZWZhdWx0IiwiZXhwb3J0cyIsImRlZmF1bHQiLCJtb2R1bGUiXSwic291cmNlUm9vdCI6Ii9Vc2Vycy9hbmRlbGFyd2FuZGEvRGVza3RvcC9lLWNvbW0tdGVhbS1icm9ncmFtbWVycy1ibi9zcmMvIiwic291cmNlcyI6WyJhcHAuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLyogZXNsaW50LWRpc2FibGUgbm8tdW51c2VkLXZhcnMgKi9cbi8qIGVzbGludC1kaXNhYmxlIGltcG9ydC9uby1uYW1lZC1hcy1kZWZhdWx0ICovXG4vKiBlc2xpbnQtZGlzYWJsZSBpbXBvcnQvbm8tZXh0cmFuZW91cy1kZXBlbmRlbmNpZXMgKi9cbmltcG9ydCBleHByZXNzIGZyb20gJ2V4cHJlc3MnO1xuaW1wb3J0IGVudiBmcm9tICdkb3RlbnYnO1xuaW1wb3J0IGNvcnMgZnJvbSAnY29ycyc7XG5pbXBvcnQgbW9yZ2FuIGZyb20gJ21vcmdhbic7XG5pbXBvcnQgc3dhZ2dlclVJIGZyb20gJ3N3YWdnZXItdWktZXhwcmVzcyc7XG5pbXBvcnQgcGFzc3BvcnQgZnJvbSAncGFzc3BvcnQnO1xuaW1wb3J0IHNlc3Npb24gZnJvbSAnZXhwcmVzcy1zZXNzaW9uJztcbmltcG9ydCBwYXRoIGZyb20gJ3BhdGgnO1xuaW1wb3J0IGFsbHJvdXRlcyBmcm9tICcuL3JvdXRlcy9pbmRleCc7XG5pbXBvcnQgc3dhZ2dlciBmcm9tICcuL2NvbmZpZ3Mvc3dhZ2dlcic7XG5pbXBvcnQgY2hlY2tQYXNzd29yZEV4cGlyYXRpb25Dcm9uSm9iIGZyb20gJy4vbWlkZGxld2FyZXMvcGFzc3dvcmRFeHBpcmF0aW9uJztcbmltcG9ydCBiZWZvcmVDaGVja0V4cGlyZWRQcm9kdWN0IGZyb20gJy4vbWlkZGxld2FyZXMvcHJvZHVjdEV4cEFsbCc7XG5pbXBvcnQgZGJSb3V0ZXMgZnJvbSAnLi9wZ2JhY2t1cC9yb3V0ZSc7XG5pbXBvcnQgJy4vcGdiYWNrdXAvYmFja3VwJztcbmltcG9ydCB7IFN1YnNjcmliZXJDb250cm9sbGVyIH0gZnJvbSAnLi9jb250cm9sbGVycy9zdWJzY3JpYmVyLmNvbnRyb2xsZXInO1xuXG5lbnYuY29uZmlnKCk7XG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgcHJlZmVyLWNvbnN0XG5sZXQgb3B0aW9ucyA9IHtcbiAgdmFsaWRhdG9yVXJsOiBudWxsLFxuICBvYXV0aDoge1xuICAgIGNsaWVudElkOiBwcm9jZXNzLmVudi5DTElFTlRfSUQsXG4gICAgY2xpZW50U2VjcmV0OiBwcm9jZXNzLmVudi5DTElFTlRfU0VDUkVULFxuICAgIGFwcE5hbWU6ICdwcm9qZWN0LTk2Njc4ODE4MzMwNycsXG4gIH0sXG59O1xuXG5jb25zdCBhcHAgPSBleHByZXNzKCk7XG5jaGVja1Bhc3N3b3JkRXhwaXJhdGlvbkNyb25Kb2Iuc3RhcnQoKTtcbmJlZm9yZUNoZWNrRXhwaXJlZFByb2R1Y3QoKTtcblN1YnNjcmliZXJDb250cm9sbGVyLnNlbmROZXdzbGV0dGVyKCk7XG5hcHAudXNlKCcvY2hhdCcsIGV4cHJlc3Muc3RhdGljKHBhdGguam9pbihfX2Rpcm5hbWUsICcuLi9wdWJsaWMvY2hhdCcpKSk7XG5hcHAudXNlKGV4cHJlc3MuanNvbigpKTtcbmFwcC51c2UobW9yZ2FuKCdkZXYnKSk7XG5hcHAudXNlKFxuICBzZXNzaW9uKHtcbiAgICBzZWNyZXQ6IHByb2Nlc3MuZW52LkNBVCxcbiAgICByZXNhdmU6IGZhbHNlLFxuICAgIHNhdmVVbmluaXRpYWxpemVkOiB0cnVlLFxuICB9KVxuKTtcbmFwcC51c2UocGFzc3BvcnQuaW5pdGlhbGl6ZSgpKTtcbmFwcC51c2UocGFzc3BvcnQuc2Vzc2lvbigpKTtcbmFwcC51c2UoJy9wdWJsaWMnLCBleHByZXNzLnN0YXRpYygncHVibGljJykpO1xuYXBwLnVzZShjb3JzKCkpO1xuYXBwLnVzZShleHByZXNzLnVybGVuY29kZWQoeyBleHRlbmRlZDogZmFsc2UgfSkpO1xuYXBwLnVzZSgnL2FwaS1kb2NzJywgc3dhZ2dlclVJLnNlcnZlLCBzd2FnZ2VyVUkuc2V0dXAoc3dhZ2dlciwgZmFsc2UsIG9wdGlvbnMpKTtcblxuYXBwLnVzZSgnL2RhdGFiYXNlJywgZGJSb3V0ZXMpO1xuYXBwLnVzZShhbGxyb3V0ZXMpO1xuYXBwLnVzZSgocmVxLCByZXMpID0+IHtcbiAgcmVzLnN0YXR1cyg0MDQpLmpzb24oeyBtZXNzYWdlOiAnUGFnZSBub3QgZm91bmQnIH0pO1xufSk7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","map":{"version":3,"names":["_express","_interopRequireDefault","require","_dotenv","_cors","_morgan","_swaggerUiExpress","_passport","_expressSession","_path","_index","_swagger","_passwordExpiration","_productExpAll","_route","_subscriber","env","config","options","validatorUrl","oauth","clientId","process","CLIENT_ID","clientSecret","CLIENT_SECRET","appName","app","express","checkPasswordExpirationCronJob","start","beforeCheckExpiredProduct","SubscriberController","sendNewsletter","use","static","path","join","__dirname","json","morgan","session","secret","CAT","resave","saveUninitialized","passport","initialize","cors","urlencoded","extended","swaggerUI","serve","setup","swagger","dbRoutes","allroutes","req","res","status","message","_default","exports","default","module"],"sourceRoot":"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/","sources":["app.js"],"sourcesContent":["/* eslint-disable no-unused-vars */\n/* eslint-disable import/no-named-as-default */\n/* eslint-disable import/no-extraneous-dependencies */\nimport express from 'express';\nimport env from 'dotenv';\nimport cors from 'cors';\nimport morgan from 'morgan';\nimport swaggerUI from 'swagger-ui-express';\nimport passport from 'passport';\nimport session from 'express-session';\nimport path from 'path';\nimport allroutes from './routes/index';\nimport swagger from './configs/swagger';\nimport checkPasswordExpirationCronJob from './middlewares/passwordExpiration';\nimport beforeCheckExpiredProduct from './middlewares/productExpAll';\nimport dbRoutes from './pgbackup/route';\nimport './pgbackup/backup';\nimport { SubscriberController } from './controllers/subscriber.controller';\n\nenv.config();\n// eslint-disable-next-line prefer-const\nlet options = {\n  validatorUrl: null,\n  oauth: {\n    clientId: process.env.CLIENT_ID,\n    clientSecret: process.env.CLIENT_SECRET,\n    appName: 'project-966788183307',\n  },\n};\n\nconst app = express();\ncheckPasswordExpirationCronJob.start();\nbeforeCheckExpiredProduct();\nSubscriberController.sendNewsletter();\napp.use('/chat', express.static(path.join(__dirname, '../public/chat')));\napp.use(express.json());\napp.use(morgan('dev'));\napp.use(\n  session({\n    secret: process.env.CAT,\n    resave: false,\n    saveUninitialized: true,\n  })\n);\napp.use(passport.initialize());\napp.use(passport.session());\napp.use('/public', express.static('public'));\napp.use(cors());\napp.use(express.urlencoded({ extended: false }));\napp.use('/api-docs', swaggerUI.serve, swaggerUI.setup(swagger, false, options));\n\napp.use('/database', dbRoutes);\napp.use(allroutes);\napp.use((req, res) => {\n  res.status(404).json({ message: 'Page not found' });\n});\n\nexport default app;\n"],"mappings":"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"}},"mtime":1682148437919},"{\"assumptions\":{},\"sourceRoot\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/routes/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"filename\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/routes/index.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/node_modules/babel-plugin-add-module-exports/lib/index.js\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-runtime\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"regenerator\":true},\"externalDependencies\":[]},{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.21.0:development":{"value":{"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _express = _interopRequireDefault(require(\"express\"));\nvar _controllers = _interopRequireDefault(require(\"../controllers\"));\nvar _users = _interopRequireDefault(require(\"./users\"));\nvar _products = _interopRequireDefault(require(\"./products\"));\nvar _wishlist = _interopRequireDefault(require(\"./wishlist\"));\nvar _cart = _interopRequireDefault(require(\"./cart\"));\nvar _reviews = _interopRequireDefault(require(\"./reviews.routes\"));\nvar _checkout = _interopRequireDefault(require(\"./checkout\"));\nvar _chat = _interopRequireDefault(require(\"./chat\"));\nvar _notification = _interopRequireDefault(require(\"./notification\"));\nvar _payment = _interopRequireDefault(require(\"./payment\"));\nvar _order = _interopRequireDefault(require(\"./order\"));\nvar _logs = _interopRequireDefault(require(\"./logs\"));\nvar _subscribe = _interopRequireDefault(require(\"./subscribe\"));\nconst routes = (0, _express.default)();\nroutes.get('/home', _controllers.default.welcome);\nroutes.use('/users', _users.default);\nroutes.use('/products', _products.default);\nroutes.use('/wishlist', _wishlist.default);\nroutes.use('/reviews', _reviews.default);\nroutes.use('/cart', _cart.default);\nroutes.use('/checkout', _checkout.default);\nroutes.use('/chat', _chat.default);\nroutes.use('/notification', _notification.default);\nroutes.use('/payment', _payment.default);\nroutes.use('/order', _order.default);\nroutes.use('/logs', _logs.default);\nroutes.use('/subscriber', _subscribe.default);\nvar _default = routes;\nexports.default = _default;\nmodule.exports = exports.default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfZXhwcmVzcyIsIl9pbnRlcm9wUmVxdWlyZURlZmF1bHQiLCJyZXF1aXJlIiwiX2NvbnRyb2xsZXJzIiwiX3VzZXJzIiwiX3Byb2R1Y3RzIiwiX3dpc2hsaXN0IiwiX2NhcnQiLCJfcmV2aWV3cyIsIl9jaGVja291dCIsIl9jaGF0IiwiX25vdGlmaWNhdGlvbiIsIl9wYXltZW50IiwiX29yZGVyIiwiX2xvZ3MiLCJfc3Vic2NyaWJlIiwicm91dGVzIiwiZXhwcmVzcyIsImdldCIsIkhvbWVDb250cm9sbGVycyIsIndlbGNvbWUiLCJ1c2UiLCJ1c2VycyIsInByb2R1Y3RzIiwid2lzaGxpc3QiLCJyZXZpZXdzIiwiY2FydCIsImNoZWNrb3V0Um91dGVzIiwiY2hhdCIsIm5vdGlmaWNhdGlvbiIsInBheW1lbnQiLCJvcmRlclJvdXRlcyIsImxvZ3Nyb3V0ZXMiLCJzdWJyb3V0ZXMiLCJfZGVmYXVsdCIsImV4cG9ydHMiLCJkZWZhdWx0IiwibW9kdWxlIl0sInNvdXJjZVJvb3QiOiIvVXNlcnMvYW5kZWxhcndhbmRhL0Rlc2t0b3AvZS1jb21tLXRlYW0tYnJvZ3JhbW1lcnMtYm4vc3JjL3JvdXRlcy8iLCJzb3VyY2VzIjpbImluZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBleHByZXNzIGZyb20gJ2V4cHJlc3MnO1xuaW1wb3J0IEhvbWVDb250cm9sbGVycyBmcm9tICcuLi9jb250cm9sbGVycyc7XG5pbXBvcnQgdXNlcnMgZnJvbSAnLi91c2Vycyc7XG5pbXBvcnQgcHJvZHVjdHMgZnJvbSAnLi9wcm9kdWN0cyc7XG5pbXBvcnQgd2lzaGxpc3QgZnJvbSAnLi93aXNobGlzdCc7XG5pbXBvcnQgY2FydCBmcm9tICcuL2NhcnQnO1xuaW1wb3J0IHJldmlld3MgZnJvbSAnLi9yZXZpZXdzLnJvdXRlcyc7XG5pbXBvcnQgY2hlY2tvdXRSb3V0ZXMgZnJvbSAnLi9jaGVja291dCc7XG5pbXBvcnQgY2hhdCBmcm9tICcuL2NoYXQnO1xuaW1wb3J0IG5vdGlmaWNhdGlvbiBmcm9tICcuL25vdGlmaWNhdGlvbic7XG5pbXBvcnQgcGF5bWVudCBmcm9tICcuL3BheW1lbnQnO1xuaW1wb3J0IG9yZGVyUm91dGVzIGZyb20gJy4vb3JkZXInO1xuaW1wb3J0IGxvZ3Nyb3V0ZXMgZnJvbSAnLi9sb2dzJztcbmltcG9ydCBzdWJyb3V0ZXMgZnJvbSAnLi9zdWJzY3JpYmUnO1xuXG5jb25zdCByb3V0ZXMgPSBleHByZXNzKCk7XG5cbnJvdXRlcy5nZXQoJy9ob21lJywgSG9tZUNvbnRyb2xsZXJzLndlbGNvbWUpO1xucm91dGVzLnVzZSgnL3VzZXJzJywgdXNlcnMpO1xucm91dGVzLnVzZSgnL3Byb2R1Y3RzJywgcHJvZHVjdHMpO1xucm91dGVzLnVzZSgnL3dpc2hsaXN0Jywgd2lzaGxpc3QpO1xucm91dGVzLnVzZSgnL3Jldmlld3MnLCByZXZpZXdzKTtcbnJvdXRlcy51c2UoJy9jYXJ0JywgY2FydCk7XG5yb3V0ZXMudXNlKCcvY2hlY2tvdXQnLCBjaGVja291dFJvdXRlcyk7XG5yb3V0ZXMudXNlKCcvY2hhdCcsIGNoYXQpO1xucm91dGVzLnVzZSgnL25vdGlmaWNhdGlvbicsIG5vdGlmaWNhdGlvbik7XG5yb3V0ZXMudXNlKCcvcGF5bWVudCcsIHBheW1lbnQpO1xucm91dGVzLnVzZSgnL29yZGVyJywgb3JkZXJSb3V0ZXMpO1xucm91dGVzLnVzZSgnL2xvZ3MnLCBsb2dzcm91dGVzKTtcbnJvdXRlcy51c2UoJy9zdWJzY3JpYmVyJywgc3Vicm91dGVzKTtcbmV4cG9ydCBkZWZhdWx0IHJvdXRlcztcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBLElBQUFBLFFBQUEsR0FBQUMsc0JBQUEsQ0FBQUMsT0FBQTtBQUNBLElBQUFDLFlBQUEsR0FBQUYsc0JBQUEsQ0FBQUMsT0FBQTtBQUNBLElBQUFFLE1BQUEsR0FBQUgsc0JBQUEsQ0FBQUMsT0FBQTtBQUNBLElBQUFHLFNBQUEsR0FBQUosc0JBQUEsQ0FBQUMsT0FBQTtBQUNBLElBQUFJLFNBQUEsR0FBQUwsc0JBQUEsQ0FBQUMsT0FBQTtBQUNBLElBQUFLLEtBQUEsR0FBQU4sc0JBQUEsQ0FBQUMsT0FBQTtBQUNBLElBQUFNLFFBQUEsR0FBQVAsc0JBQUEsQ0FBQUMsT0FBQTtBQUNBLElBQUFPLFNBQUEsR0FBQVIsc0JBQUEsQ0FBQUMsT0FBQTtBQUNBLElBQUFRLEtBQUEsR0FBQVQsc0JBQUEsQ0FBQUMsT0FBQTtBQUNBLElBQUFTLGFBQUEsR0FBQVYsc0JBQUEsQ0FBQUMsT0FBQTtBQUNBLElBQUFVLFFBQUEsR0FBQVgsc0JBQUEsQ0FBQUMsT0FBQTtBQUNBLElBQUFXLE1BQUEsR0FBQVosc0JBQUEsQ0FBQUMsT0FBQTtBQUNBLElBQUFZLEtBQUEsR0FBQWIsc0JBQUEsQ0FBQUMsT0FBQTtBQUNBLElBQUFhLFVBQUEsR0FBQWQsc0JBQUEsQ0FBQUMsT0FBQTtBQUVBLE1BQU1jLE1BQU0sR0FBRyxJQUFBQyxnQkFBTyxHQUFFO0FBRXhCRCxNQUFNLENBQUNFLEdBQUcsQ0FBQyxPQUFPLEVBQUVDLG9CQUFlLENBQUNDLE9BQU8sQ0FBQztBQUM1Q0osTUFBTSxDQUFDSyxHQUFHLENBQUMsUUFBUSxFQUFFQyxjQUFLLENBQUM7QUFDM0JOLE1BQU0sQ0FBQ0ssR0FBRyxDQUFDLFdBQVcsRUFBRUUsaUJBQVEsQ0FBQztBQUNqQ1AsTUFBTSxDQUFDSyxHQUFHLENBQUMsV0FBVyxFQUFFRyxpQkFBUSxDQUFDO0FBQ2pDUixNQUFNLENBQUNLLEdBQUcsQ0FBQyxVQUFVLEVBQUVJLGdCQUFPLENBQUM7QUFDL0JULE1BQU0sQ0FBQ0ssR0FBRyxDQUFDLE9BQU8sRUFBRUssYUFBSSxDQUFDO0FBQ3pCVixNQUFNLENBQUNLLEdBQUcsQ0FBQyxXQUFXLEVBQUVNLGlCQUFjLENBQUM7QUFDdkNYLE1BQU0sQ0FBQ0ssR0FBRyxDQUFDLE9BQU8sRUFBRU8sYUFBSSxDQUFDO0FBQ3pCWixNQUFNLENBQUNLLEdBQUcsQ0FBQyxlQUFlLEVBQUVRLHFCQUFZLENBQUM7QUFDekNiLE1BQU0sQ0FBQ0ssR0FBRyxDQUFDLFVBQVUsRUFBRVMsZ0JBQU8sQ0FBQztBQUMvQmQsTUFBTSxDQUFDSyxHQUFHLENBQUMsUUFBUSxFQUFFVSxjQUFXLENBQUM7QUFDakNmLE1BQU0sQ0FBQ0ssR0FBRyxDQUFDLE9BQU8sRUFBRVcsYUFBVSxDQUFDO0FBQy9CaEIsTUFBTSxDQUFDSyxHQUFHLENBQUMsYUFBYSxFQUFFWSxrQkFBUyxDQUFDO0FBQUMsSUFBQUMsUUFBQSxHQUN0QmxCLE1BQU07QUFBQW1CLE9BQUEsQ0FBQUMsT0FBQSxHQUFBRixRQUFBO0FBQUFHLE1BQUEsQ0FBQUYsT0FBQSxHQUFBQSxPQUFBLENBQUFDLE9BQUEifQ==","map":{"version":3,"names":["_express","_interopRequireDefault","require","_controllers","_users","_products","_wishlist","_cart","_reviews","_checkout","_chat","_notification","_payment","_order","_logs","_subscribe","routes","express","get","HomeControllers","welcome","use","users","products","wishlist","reviews","cart","checkoutRoutes","chat","notification","payment","orderRoutes","logsroutes","subroutes","_default","exports","default","module"],"sourceRoot":"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/routes/","sources":["index.js"],"sourcesContent":["import express from 'express';\nimport HomeControllers from '../controllers';\nimport users from './users';\nimport products from './products';\nimport wishlist from './wishlist';\nimport cart from './cart';\nimport reviews from './reviews.routes';\nimport checkoutRoutes from './checkout';\nimport chat from './chat';\nimport notification from './notification';\nimport payment from './payment';\nimport orderRoutes from './order';\nimport logsroutes from './logs';\nimport subroutes from './subscribe';\n\nconst routes = express();\n\nroutes.get('/home', HomeControllers.welcome);\nroutes.use('/users', users);\nroutes.use('/products', products);\nroutes.use('/wishlist', wishlist);\nroutes.use('/reviews', reviews);\nroutes.use('/cart', cart);\nroutes.use('/checkout', checkoutRoutes);\nroutes.use('/chat', chat);\nroutes.use('/notification', notification);\nroutes.use('/payment', payment);\nroutes.use('/order', orderRoutes);\nroutes.use('/logs', logsroutes);\nroutes.use('/subscriber', subroutes);\nexport default routes;\n"],"mappings":";;;;;;;AAAA,IAAAA,QAAA,GAAAC,sBAAA,CAAAC,OAAA;AACA,IAAAC,YAAA,GAAAF,sBAAA,CAAAC,OAAA;AACA,IAAAE,MAAA,GAAAH,sBAAA,CAAAC,OAAA;AACA,IAAAG,SAAA,GAAAJ,sBAAA,CAAAC,OAAA;AACA,IAAAI,SAAA,GAAAL,sBAAA,CAAAC,OAAA;AACA,IAAAK,KAAA,GAAAN,sBAAA,CAAAC,OAAA;AACA,IAAAM,QAAA,GAAAP,sBAAA,CAAAC,OAAA;AACA,IAAAO,SAAA,GAAAR,sBAAA,CAAAC,OAAA;AACA,IAAAQ,KAAA,GAAAT,sBAAA,CAAAC,OAAA;AACA,IAAAS,aAAA,GAAAV,sBAAA,CAAAC,OAAA;AACA,IAAAU,QAAA,GAAAX,sBAAA,CAAAC,OAAA;AACA,IAAAW,MAAA,GAAAZ,sBAAA,CAAAC,OAAA;AACA,IAAAY,KAAA,GAAAb,sBAAA,CAAAC,OAAA;AACA,IAAAa,UAAA,GAAAd,sBAAA,CAAAC,OAAA;AAEA,MAAMc,MAAM,GAAG,IAAAC,gBAAO,GAAE;AAExBD,MAAM,CAACE,GAAG,CAAC,OAAO,EAAEC,oBAAe,CAACC,OAAO,CAAC;AAC5CJ,MAAM,CAACK,GAAG,CAAC,QAAQ,EAAEC,cAAK,CAAC;AAC3BN,MAAM,CAACK,GAAG,CAAC,WAAW,EAAEE,iBAAQ,CAAC;AACjCP,MAAM,CAACK,GAAG,CAAC,WAAW,EAAEG,iBAAQ,CAAC;AACjCR,MAAM,CAACK,GAAG,CAAC,UAAU,EAAEI,gBAAO,CAAC;AAC/BT,MAAM,CAACK,GAAG,CAAC,OAAO,EAAEK,aAAI,CAAC;AACzBV,MAAM,CAACK,GAAG,CAAC,WAAW,EAAEM,iBAAc,CAAC;AACvCX,MAAM,CAACK,GAAG,CAAC,OAAO,EAAEO,aAAI,CAAC;AACzBZ,MAAM,CAACK,GAAG,CAAC,eAAe,EAAEQ,qBAAY,CAAC;AACzCb,MAAM,CAACK,GAAG,CAAC,UAAU,EAAES,gBAAO,CAAC;AAC/Bd,MAAM,CAACK,GAAG,CAAC,QAAQ,EAAEU,cAAW,CAAC;AACjCf,MAAM,CAACK,GAAG,CAAC,OAAO,EAAEW,aAAU,CAAC;AAC/BhB,MAAM,CAACK,GAAG,CAAC,aAAa,EAAEY,kBAAS,CAAC;AAAC,IAAAC,QAAA,GACtBlB,MAAM;AAAAmB,OAAA,CAAAC,OAAA,GAAAF,QAAA;AAAAG,MAAA,CAAAF,OAAA,GAAAA,OAAA,CAAAC,OAAA"}},"mtime":1682148437957},"{\"assumptions\":{},\"sourceRoot\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/controllers/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"filename\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/controllers/index.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/node_modules/babel-plugin-add-module-exports/lib/index.js\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-runtime\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"regenerator\":true},\"externalDependencies\":[]},{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.21.0:development":{"value":{"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _services = _interopRequireDefault(require(\"../services\"));\n// eslint-disable-next-line require-jsdoc\nclass HomeControllers {\n  // eslint-disable-next-line require-jsdoc\n  static async welcome(req, res) {\n    const message = await _services.default.home();\n    res.status(200).json(message);\n  }\n}\nexports.default = HomeControllers;\nmodule.exports = exports.default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfc2VydmljZXMiLCJfaW50ZXJvcFJlcXVpcmVEZWZhdWx0IiwicmVxdWlyZSIsIkhvbWVDb250cm9sbGVycyIsIndlbGNvbWUiLCJyZXEiLCJyZXMiLCJtZXNzYWdlIiwiSG9tZVNlcnZpY2VzIiwiaG9tZSIsInN0YXR1cyIsImpzb24iLCJleHBvcnRzIiwiZGVmYXVsdCIsIm1vZHVsZSJdLCJzb3VyY2VSb290IjoiL1VzZXJzL2FuZGVsYXJ3YW5kYS9EZXNrdG9wL2UtY29tbS10ZWFtLWJyb2dyYW1tZXJzLWJuL3NyYy9jb250cm9sbGVycy8iLCJzb3VyY2VzIjpbImluZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBIb21lU2VydmljZXMgZnJvbSAnLi4vc2VydmljZXMnO1xuXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgcmVxdWlyZS1qc2RvY1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgSG9tZUNvbnRyb2xsZXJzIHtcbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIHJlcXVpcmUtanNkb2NcbiAgc3RhdGljIGFzeW5jIHdlbGNvbWUocmVxLCByZXMpIHtcbiAgICBjb25zdCBtZXNzYWdlID0gYXdhaXQgSG9tZVNlcnZpY2VzLmhvbWUoKTtcbiAgICByZXMuc3RhdHVzKDIwMCkuanNvbihtZXNzYWdlKTtcbiAgfVxufVxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQUEsSUFBQUEsU0FBQSxHQUFBQyxzQkFBQSxDQUFBQyxPQUFBO0FBRUE7QUFDZSxNQUFNQyxlQUFlLENBQUM7RUFDbkM7RUFDQSxhQUFhQyxPQUFPQSxDQUFDQyxHQUFHLEVBQUVDLEdBQUcsRUFBRTtJQUM3QixNQUFNQyxPQUFPLEdBQUcsTUFBTUMsaUJBQVksQ0FBQ0MsSUFBSSxFQUFFO0lBQ3pDSCxHQUFHLENBQUNJLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQ0MsSUFBSSxDQUFDSixPQUFPLENBQUM7RUFDL0I7QUFDRjtBQUFDSyxPQUFBLENBQUFDLE9BQUEsR0FBQVYsZUFBQTtBQUFBVyxNQUFBLENBQUFGLE9BQUEsR0FBQUEsT0FBQSxDQUFBQyxPQUFBIn0=","map":{"version":3,"names":["_services","_interopRequireDefault","require","HomeControllers","welcome","req","res","message","HomeServices","home","status","json","exports","default","module"],"sourceRoot":"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/controllers/","sources":["index.js"],"sourcesContent":["import HomeServices from '../services';\n\n// eslint-disable-next-line require-jsdoc\nexport default class HomeControllers {\n  // eslint-disable-next-line require-jsdoc\n  static async welcome(req, res) {\n    const message = await HomeServices.home();\n    res.status(200).json(message);\n  }\n}\n"],"mappings":";;;;;;;AAAA,IAAAA,SAAA,GAAAC,sBAAA,CAAAC,OAAA;AAEA;AACe,MAAMC,eAAe,CAAC;EACnC;EACA,aAAaC,OAAOA,CAACC,GAAG,EAAEC,GAAG,EAAE;IAC7B,MAAMC,OAAO,GAAG,MAAMC,iBAAY,CAACC,IAAI,EAAE;IACzCH,GAAG,CAACI,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAACJ,OAAO,CAAC;EAC/B;AACF;AAACK,OAAA,CAAAC,OAAA,GAAAV,eAAA;AAAAW,MAAA,CAAAF,OAAA,GAAAA,OAAA,CAAAC,OAAA"}},"mtime":1682148437921},"{\"assumptions\":{},\"sourceRoot\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/services/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"filename\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/services/index.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/node_modules/babel-plugin-add-module-exports/lib/index.js\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-runtime\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"regenerator\":true},\"externalDependencies\":[]},{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.21.0:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n/**\n *\n */\nclass HomeServices {\n  // eslint-disable-next-line require-jsdoc\n  static async home() {\n    return {\n      message: 'welcome'\n    };\n  }\n}\nexports.default = HomeServices;\nmodule.exports = exports.default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJIb21lU2VydmljZXMiLCJob21lIiwibWVzc2FnZSIsImV4cG9ydHMiLCJkZWZhdWx0IiwibW9kdWxlIl0sInNvdXJjZVJvb3QiOiIvVXNlcnMvYW5kZWxhcndhbmRhL0Rlc2t0b3AvZS1jb21tLXRlYW0tYnJvZ3JhbW1lcnMtYm4vc3JjL3NlcnZpY2VzLyIsInNvdXJjZXMiOlsiaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKlxuICovXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBIb21lU2VydmljZXMge1xuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgcmVxdWlyZS1qc2RvY1xuICBzdGF0aWMgYXN5bmMgaG9tZSgpIHtcbiAgICByZXR1cm4geyBtZXNzYWdlOiAnd2VsY29tZScgfTtcbiAgfVxufVxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDZSxNQUFNQSxZQUFZLENBQUM7RUFDaEM7RUFDQSxhQUFhQyxJQUFJQSxDQUFBLEVBQUc7SUFDbEIsT0FBTztNQUFFQyxPQUFPLEVBQUU7SUFBVSxDQUFDO0VBQy9CO0FBQ0Y7QUFBQ0MsT0FBQSxDQUFBQyxPQUFBLEdBQUFKLFlBQUE7QUFBQUssTUFBQSxDQUFBRixPQUFBLEdBQUFBLE9BQUEsQ0FBQUMsT0FBQSJ9","map":{"version":3,"names":["HomeServices","home","message","exports","default","module"],"sourceRoot":"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/services/","sources":["index.js"],"sourcesContent":["/**\n *\n */\nexport default class HomeServices {\n  // eslint-disable-next-line require-jsdoc\n  static async home() {\n    return { message: 'welcome' };\n  }\n}\n"],"mappings":";;;;;;AAAA;AACA;AACA;AACe,MAAMA,YAAY,CAAC;EAChC;EACA,aAAaC,IAAIA,CAAA,EAAG;IAClB,OAAO;MAAEC,OAAO,EAAE;IAAU,CAAC;EAC/B;AACF;AAACC,OAAA,CAAAC,OAAA,GAAAJ,YAAA;AAAAK,MAAA,CAAAF,OAAA,GAAAA,OAAA,CAAAC,OAAA"}},"mtime":1682148437961},"{\"assumptions\":{},\"sourceRoot\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/routes/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"filename\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/routes/users.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/node_modules/babel-plugin-add-module-exports/lib/index.js\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-runtime\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"regenerator\":true},\"externalDependencies\":[]},{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.21.0:development":{"value":{"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _express = _interopRequireDefault(require(\"express\"));\nvar _passport = _interopRequireDefault(require(\"passport\"));\nvar _users = _interopRequireDefault(require(\"../controllers/users.controllers\"));\nvar _checkUserExist = _interopRequireWildcard(require(\"../middlewares/checkUserExist\"));\nvar _status = _interopRequireDefault(require(\"../controllers/status.controller\"));\nvar _loginValidate = _interopRequireDefault(require(\"../middlewares/loginValidate\"));\nvar _profileValidate = _interopRequireDefault(require(\"../middlewares/profileValidate\"));\nvar _mfaValidate = _interopRequireDefault(require(\"../middlewares/mfaValidate\"));\nvar _signupValidate = _interopRequireDefault(require(\"../middlewares/signupValidate\"));\nvar _Checkrole = _interopRequireDefault(require(\"../middlewares/Checkrole\"));\nvar _verifyToken = _interopRequireDefault(require(\"../middlewares/verifyToken\"));\nvar _fields = require(\"../validations/fields.validation\");\nvar _requestValidator = _interopRequireDefault(require(\"../middlewares/requestValidator\"));\nvar _disable = _interopRequireDefault(require(\"../validations/disable.validation\"));\nvar _admin = _interopRequireDefault(require(\"../controllers/admin.controller\"));\nvar _jwt = require(\"../helpers/jwt\");\nvar _oauth = require(\"../controllers/oauth.controller\");\nvar _multer = _interopRequireDefault(require(\"../configs/multer\"));\nvar _logs = require(\"../controllers/logs.controller\");\nfunction _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== \"function\") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function (nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }\nfunction _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") { return { default: obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n/* eslint-disable import/no-duplicates */\n/* eslint-disable no-else-return */\n/* eslint-disable object-shorthand */\n/* eslint-disable comma-spacing */\n\n// eslint-disable-next-line import/no-named-as-default, import/no-named-as-default-member\n\n(0, _oauth.googlePass)();\nconst routes = _express.default.Router();\nroutes.post('/signup', _signupValidate.default, _checkUserExist.default, _users.default.signup);\nroutes.get('/verify-email/:token', _users.default.verifyEmail);\nroutes.post('/reset-password', (0, _requestValidator.default)(_fields.resetPassword), _users.default.sendResetPasswordCode);\nroutes.post('/verify-reset-password/:resetToken', _users.default.verifyResetPasswordCode);\nroutes.patch('/change-password', _verifyToken.default, _users.default.changePassword);\nroutes.patch('/create-admin/:email', _verifyToken.default, (0, _Checkrole.default)(['admin']), _users.default.CreateAdmin);\nroutes.post('/verify-mfa', _mfaValidate.default, _users.default.verifyMfaCode);\nroutes.post('/enable-mfa', _verifyToken.default, _users.default.enableMfa);\nroutes.post('/disable-mfa', _verifyToken.default, _users.default.disableMfa);\nroutes.post('/login', _loginValidate.default, _users.default.login);\nroutes.get('/profile', _verifyToken.default, _users.default.getProfile);\nroutes.patch('/profile', _verifyToken.default, _profileValidate.default, _users.default.editProfile);\nroutes.patch('/role/:email', _verifyToken.default, (0, _Checkrole.default)(['admin']), _users.default.setRole);\n\n// images\nroutes.patch('/profile/avatar', _verifyToken.default, _multer.default.single('image'), _users.default.updateAvatar);\nroutes.patch('/profile/cover-image', _verifyToken.default, _multer.default.single('image'), _users.default.updateCoverImage);\n\n// Disable account\nroutes.patch('/disable/:userId', _verifyToken.default, (0, _Checkrole.default)(['admin']), (0, _requestValidator.default)(_disable.default), _users.default.disableUser);\nroutes.get('/logout', _verifyToken.default, _users.default.logout);\n// Admin Routes\nroutes.post('/createUser', _verifyToken.default, (0, _Checkrole.default)(['admin']), _admin.default.signup);\nroutes.patch('/:id', _verifyToken.default, (0, _Checkrole.default)(['admin']), _admin.default.updateUser);\nroutes.delete('/:id', _verifyToken.default, (0, _Checkrole.default)(['admin']), _admin.default.deleteUser);\nroutes.get('/all', _verifyToken.default, (0, _Checkrole.default)(['admin']), _admin.default.getAllUsers);\nroutes.get('/logs/all', _verifyToken.default, (0, _Checkrole.default)(['admin']), _logs.getAllLogs);\n// Google routes\nroutes.get('/redirect', (req, res) => {\n  try {\n    if (req.query.key) {\n      const user = _jwt.Jwt.verifyToken(req.query.key);\n      return res.status(200).json({\n        message: 'Thanks for logging in',\n        user: user,\n        token: req.query.key\n      });\n    } else {\n      return res.status(401).json({\n        error: 'Unauthorized'\n      });\n    }\n  } catch (error) {\n    res.status(500).json({\n      message: error.message\n    });\n  }\n});\nroutes.get('/auth/google', _passport.default.authenticate('google', {\n  scope: ['email', 'profile']\n}));\nroutes.get('/stats', _verifyToken.default, (0, _Checkrole.default)(['seller', 'admin']), _status.default.getProductsStatus);\nroutes.get('/stats/graph/:range', _verifyToken.default, (0, _Checkrole.default)(['seller', 'admin']), _status.default.getProductsStatusGraph);\nroutes.get('/auth/google/redirect', _passport.default.authenticate('google', {\n  session: false,\n  failureRedirect: '/'\n}), _checkUserExist.checkUserByEmail, _users.default.googleAuthHandler);\nvar _default = routes;\nexports.default = _default;\nmodule.exports = exports.default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfZXhwcmVzcyIsIl9pbnRlcm9wUmVxdWlyZURlZmF1bHQiLCJyZXF1aXJlIiwiX3Bhc3Nwb3J0IiwiX3VzZXJzIiwiX2NoZWNrVXNlckV4aXN0IiwiX2ludGVyb3BSZXF1aXJlV2lsZGNhcmQiLCJfc3RhdHVzIiwiX2xvZ2luVmFsaWRhdGUiLCJfcHJvZmlsZVZhbGlkYXRlIiwiX21mYVZhbGlkYXRlIiwiX3NpZ251cFZhbGlkYXRlIiwiX0NoZWNrcm9sZSIsIl92ZXJpZnlUb2tlbiIsIl9maWVsZHMiLCJfcmVxdWVzdFZhbGlkYXRvciIsIl9kaXNhYmxlIiwiX2FkbWluIiwiX2p3dCIsIl9vYXV0aCIsIl9tdWx0ZXIiLCJfbG9ncyIsIl9nZXRSZXF1aXJlV2lsZGNhcmRDYWNoZSIsIm5vZGVJbnRlcm9wIiwiV2Vha01hcCIsImNhY2hlQmFiZWxJbnRlcm9wIiwiY2FjaGVOb2RlSW50ZXJvcCIsIm9iaiIsIl9fZXNNb2R1bGUiLCJkZWZhdWx0IiwiY2FjaGUiLCJoYXMiLCJnZXQiLCJuZXdPYmoiLCJoYXNQcm9wZXJ0eURlc2NyaXB0b3IiLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImdldE93blByb3BlcnR5RGVzY3JpcHRvciIsImtleSIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwiY2FsbCIsImRlc2MiLCJzZXQiLCJnb29nbGVQYXNzIiwicm91dGVzIiwiZXhwcmVzcyIsIlJvdXRlciIsInBvc3QiLCJzaWdudXBWYXRpZGF0ZSIsImNoZWNrVXNlckV4aXN0IiwiVXNlcnMiLCJzaWdudXAiLCJ2ZXJpZnlFbWFpbCIsInJlcXVlc3RWYWxpZGF0b3IiLCJyZXNldFBhc3N3b3JkIiwic2VuZFJlc2V0UGFzc3dvcmRDb2RlIiwidmVyaWZ5UmVzZXRQYXNzd29yZENvZGUiLCJwYXRjaCIsImlzQXV0aGVudGljYXRlZCIsImNoYW5nZVBhc3N3b3JkIiwiY2hlY2tSb2xlIiwiQ3JlYXRlQWRtaW4iLCJtZmFWYWxpZGF0ZSIsInZlcmlmeU1mYUNvZGUiLCJlbmFibGVNZmEiLCJkaXNhYmxlTWZhIiwibG9naW5WYWxpZGF0ZSIsImxvZ2luIiwiZ2V0UHJvZmlsZSIsInByb2ZpbGVWYXRpZGF0ZSIsImVkaXRQcm9maWxlIiwic2V0Um9sZSIsInVwbG9hZCIsInNpbmdsZSIsInVwZGF0ZUF2YXRhciIsInVwZGF0ZUNvdmVySW1hZ2UiLCJkaXNhYmxlVXNlciIsImxvZ291dCIsIkFkbWluIiwidXBkYXRlVXNlciIsImRlbGV0ZSIsImRlbGV0ZVVzZXIiLCJnZXRBbGxVc2VycyIsImdldEFsbExvZ3MiLCJyZXEiLCJyZXMiLCJxdWVyeSIsInVzZXIiLCJKd3QiLCJ2ZXJpZnlUb2tlbiIsInN0YXR1cyIsImpzb24iLCJtZXNzYWdlIiwidG9rZW4iLCJlcnJvciIsInBhc3Nwb3J0IiwiYXV0aGVudGljYXRlIiwic2NvcGUiLCJTdGF0dXMiLCJnZXRQcm9kdWN0c1N0YXR1cyIsImdldFByb2R1Y3RzU3RhdHVzR3JhcGgiLCJzZXNzaW9uIiwiZmFpbHVyZVJlZGlyZWN0IiwiY2hlY2tVc2VyQnlFbWFpbCIsImdvb2dsZUF1dGhIYW5kbGVyIiwiX2RlZmF1bHQiLCJleHBvcnRzIiwibW9kdWxlIl0sInNvdXJjZVJvb3QiOiIvVXNlcnMvYW5kZWxhcndhbmRhL0Rlc2t0b3AvZS1jb21tLXRlYW0tYnJvZ3JhbW1lcnMtYm4vc3JjL3JvdXRlcy8iLCJzb3VyY2VzIjpbInVzZXJzLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qIGVzbGludC1kaXNhYmxlIGltcG9ydC9uby1kdXBsaWNhdGVzICovXG4vKiBlc2xpbnQtZGlzYWJsZSBuby1lbHNlLXJldHVybiAqL1xuLyogZXNsaW50LWRpc2FibGUgb2JqZWN0LXNob3J0aGFuZCAqL1xuLyogZXNsaW50LWRpc2FibGUgY29tbWEtc3BhY2luZyAqL1xuaW1wb3J0IGV4cHJlc3MgZnJvbSAnZXhwcmVzcyc7XG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgaW1wb3J0L25vLW5hbWVkLWFzLWRlZmF1bHQsIGltcG9ydC9uby1uYW1lZC1hcy1kZWZhdWx0LW1lbWJlclxuaW1wb3J0IHBhc3Nwb3J0IGZyb20gJ3Bhc3Nwb3J0JztcbmltcG9ydCBVc2VycyBmcm9tICcuLi9jb250cm9sbGVycy91c2Vycy5jb250cm9sbGVycyc7XG5pbXBvcnQgY2hlY2tVc2VyRXhpc3QseyBjaGVja1VzZXJCeUVtYWlsIH0gZnJvbSAnLi4vbWlkZGxld2FyZXMvY2hlY2tVc2VyRXhpc3QnO1xuaW1wb3J0IFN0YXR1cyBmcm9tICcuLi9jb250cm9sbGVycy9zdGF0dXMuY29udHJvbGxlcic7XG5pbXBvcnQgbG9naW5WYWxpZGF0ZSBmcm9tICcuLi9taWRkbGV3YXJlcy9sb2dpblZhbGlkYXRlJztcbmltcG9ydCBwcm9maWxlVmF0aWRhdGUgZnJvbSAnLi4vbWlkZGxld2FyZXMvcHJvZmlsZVZhbGlkYXRlJztcbmltcG9ydCBtZmFWYWxpZGF0ZSBmcm9tICcuLi9taWRkbGV3YXJlcy9tZmFWYWxpZGF0ZSc7XG5pbXBvcnQgc2lnbnVwVmF0aWRhdGUgZnJvbSAnLi4vbWlkZGxld2FyZXMvc2lnbnVwVmFsaWRhdGUnO1xuaW1wb3J0IGNoZWNrUm9sZSBmcm9tICcuLi9taWRkbGV3YXJlcy9DaGVja3JvbGUnO1xuaW1wb3J0IGlzQXV0aGVudGljYXRlZCBmcm9tICcuLi9taWRkbGV3YXJlcy92ZXJpZnlUb2tlbic7XG5pbXBvcnQgeyByZXNldFBhc3N3b3JkIH0gZnJvbSAnLi4vdmFsaWRhdGlvbnMvZmllbGRzLnZhbGlkYXRpb24nO1xuaW1wb3J0IHJlcXVlc3RWYWxpZGF0b3IgZnJvbSAnLi4vbWlkZGxld2FyZXMvcmVxdWVzdFZhbGlkYXRvcic7XG5pbXBvcnQgZGlzYWJsZVVzZXIgZnJvbSAnLi4vdmFsaWRhdGlvbnMvZGlzYWJsZS52YWxpZGF0aW9uJztcbmltcG9ydCBBZG1pbiBmcm9tICcuLi9jb250cm9sbGVycy9hZG1pbi5jb250cm9sbGVyJztcbmltcG9ydCB7IEp3dCB9IGZyb20gJy4uL2hlbHBlcnMvand0JztcbmltcG9ydCB7IGdvb2dsZVBhc3MgfSBmcm9tICcuLi9jb250cm9sbGVycy9vYXV0aC5jb250cm9sbGVyJztcbmltcG9ydCB1cGxvYWQgZnJvbSAnLi4vY29uZmlncy9tdWx0ZXInO1xuaW1wb3J0IHsgZ2V0QWxsTG9ncyB9IGZyb20gJy4uL2NvbnRyb2xsZXJzL2xvZ3MuY29udHJvbGxlcic7XG5cbmdvb2dsZVBhc3MoKTtcbmNvbnN0IHJvdXRlcyA9IGV4cHJlc3MuUm91dGVyKCk7XG5cbnJvdXRlcy5wb3N0KCcvc2lnbnVwJywgc2lnbnVwVmF0aWRhdGUsIGNoZWNrVXNlckV4aXN0LCBVc2Vycy5zaWdudXApO1xucm91dGVzLmdldCgnL3ZlcmlmeS1lbWFpbC86dG9rZW4nLCBVc2Vycy52ZXJpZnlFbWFpbCk7XG5yb3V0ZXMucG9zdChcbiAgJy9yZXNldC1wYXNzd29yZCcsXG4gIHJlcXVlc3RWYWxpZGF0b3IocmVzZXRQYXNzd29yZCksXG4gIFVzZXJzLnNlbmRSZXNldFBhc3N3b3JkQ29kZVxuKTtcbnJvdXRlcy5wb3N0KFxuICAnL3ZlcmlmeS1yZXNldC1wYXNzd29yZC86cmVzZXRUb2tlbicsXG4gIFVzZXJzLnZlcmlmeVJlc2V0UGFzc3dvcmRDb2RlXG4pO1xucm91dGVzLnBhdGNoKCcvY2hhbmdlLXBhc3N3b3JkJywgaXNBdXRoZW50aWNhdGVkLCBVc2Vycy5jaGFuZ2VQYXNzd29yZCk7XG5cbnJvdXRlcy5wYXRjaChcbiAgJy9jcmVhdGUtYWRtaW4vOmVtYWlsJyxcbiAgaXNBdXRoZW50aWNhdGVkLFxuICBjaGVja1JvbGUoWydhZG1pbiddKSxcbiAgVXNlcnMuQ3JlYXRlQWRtaW5cbik7XG5yb3V0ZXMucG9zdCgnL3ZlcmlmeS1tZmEnLCBtZmFWYWxpZGF0ZSwgVXNlcnMudmVyaWZ5TWZhQ29kZSk7XG5yb3V0ZXMucG9zdCgnL2VuYWJsZS1tZmEnLCBpc0F1dGhlbnRpY2F0ZWQsIFVzZXJzLmVuYWJsZU1mYSk7XG5yb3V0ZXMucG9zdCgnL2Rpc2FibGUtbWZhJywgaXNBdXRoZW50aWNhdGVkLCBVc2Vycy5kaXNhYmxlTWZhKTtcbnJvdXRlcy5wb3N0KCcvbG9naW4nLCBsb2dpblZhbGlkYXRlLCBVc2Vycy5sb2dpbik7XG5yb3V0ZXMuZ2V0KCcvcHJvZmlsZScsIGlzQXV0aGVudGljYXRlZCwgVXNlcnMuZ2V0UHJvZmlsZSk7XG5yb3V0ZXMucGF0Y2goJy9wcm9maWxlJywgaXNBdXRoZW50aWNhdGVkLCBwcm9maWxlVmF0aWRhdGUsIFVzZXJzLmVkaXRQcm9maWxlKTtcbnJvdXRlcy5wYXRjaCgnL3JvbGUvOmVtYWlsJywgaXNBdXRoZW50aWNhdGVkLCBjaGVja1JvbGUoWydhZG1pbiddKSwgVXNlcnMuc2V0Um9sZSk7XG5cbi8vIGltYWdlc1xucm91dGVzLnBhdGNoKCcvcHJvZmlsZS9hdmF0YXInLCBpc0F1dGhlbnRpY2F0ZWQsIHVwbG9hZC5zaW5nbGUoJ2ltYWdlJyksIFVzZXJzLnVwZGF0ZUF2YXRhcik7XG5yb3V0ZXMucGF0Y2goJy9wcm9maWxlL2NvdmVyLWltYWdlJywgaXNBdXRoZW50aWNhdGVkLCB1cGxvYWQuc2luZ2xlKCdpbWFnZScpLCBVc2Vycy51cGRhdGVDb3ZlckltYWdlKTtcblxuLy8gRGlzYWJsZSBhY2NvdW50XG5yb3V0ZXMucGF0Y2goXG4gICcvZGlzYWJsZS86dXNlcklkJyxcbiAgaXNBdXRoZW50aWNhdGVkLFxuICBjaGVja1JvbGUoWydhZG1pbiddKSxcbiAgcmVxdWVzdFZhbGlkYXRvcihkaXNhYmxlVXNlciksXG4gIFVzZXJzLmRpc2FibGVVc2VyXG4pO1xucm91dGVzLmdldChcbiAgJy9sb2dvdXQnLFxuICBpc0F1dGhlbnRpY2F0ZWQsXG4gIFVzZXJzLmxvZ291dFxuKTtcbi8vIEFkbWluIFJvdXRlc1xucm91dGVzLnBvc3QoXG4gICcvY3JlYXRlVXNlcicsXG4gIGlzQXV0aGVudGljYXRlZCxcbiAgY2hlY2tSb2xlKFsnYWRtaW4nXSksXG4gIEFkbWluLnNpZ251cFxuKTtcbnJvdXRlcy5wYXRjaChcbiAgJy86aWQnLFxuICBpc0F1dGhlbnRpY2F0ZWQsXG4gIGNoZWNrUm9sZShbJ2FkbWluJ10pLFxuICBBZG1pbi51cGRhdGVVc2VyXG4pO1xucm91dGVzLmRlbGV0ZShcbiAgJy86aWQnLFxuICBpc0F1dGhlbnRpY2F0ZWQsXG4gIGNoZWNrUm9sZShbJ2FkbWluJ10pLFxuICBBZG1pbi5kZWxldGVVc2VyXG4pO1xucm91dGVzLmdldChcbiAgJy9hbGwnLFxuICBpc0F1dGhlbnRpY2F0ZWQsXG4gIGNoZWNrUm9sZShbJ2FkbWluJ10pLFxuICBBZG1pbi5nZXRBbGxVc2Vyc1xuKTtcbnJvdXRlcy5nZXQoXG4gICcvbG9ncy9hbGwnLFxuICBpc0F1dGhlbnRpY2F0ZWQsXG4gIGNoZWNrUm9sZShbJ2FkbWluJ10pLFxuICBnZXRBbGxMb2dzXG4pO1xuLy8gR29vZ2xlIHJvdXRlc1xucm91dGVzLmdldCgnL3JlZGlyZWN0JywgKHJlcSwgcmVzKSA9PiB7XG4gIHRyeSB7XG4gICAgaWYgKHJlcS5xdWVyeS5rZXkpIHtcbiAgICAgIGNvbnN0IHVzZXIgPSBKd3QudmVyaWZ5VG9rZW4ocmVxLnF1ZXJ5LmtleSk7XG4gICAgICByZXR1cm4gcmVzXG4gICAgICAgIC5zdGF0dXMoMjAwKVxuICAgICAgICAuanNvbih7IG1lc3NhZ2U6ICdUaGFua3MgZm9yIGxvZ2dpbmcgaW4nLCB1c2VyOiB1c2VyLHRva2VuOiByZXEucXVlcnkua2V5IH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDEpLmpzb24oeyBlcnJvcjogJ1VuYXV0aG9yaXplZCcgfSk7XG4gICAgfVxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgbWVzc2FnZTogZXJyb3IubWVzc2FnZSB9KTtcbiAgfVxufSk7XG5yb3V0ZXMuZ2V0KFxuICAnL2F1dGgvZ29vZ2xlJyxcbiAgcGFzc3BvcnQuYXV0aGVudGljYXRlKCdnb29nbGUnLCB7IHNjb3BlOiBbJ2VtYWlsJywgJ3Byb2ZpbGUnXSB9KVxuKTtcbnJvdXRlcy5nZXQoXG4gICcvc3RhdHMnLFxuICBpc0F1dGhlbnRpY2F0ZWQsXG4gIGNoZWNrUm9sZShbJ3NlbGxlcicsICdhZG1pbiddKSxcbiAgU3RhdHVzLmdldFByb2R1Y3RzU3RhdHVzXG4pO1xucm91dGVzLmdldChcbiAgJy9zdGF0cy9ncmFwaC86cmFuZ2UnLFxuICBpc0F1dGhlbnRpY2F0ZWQsXG4gIGNoZWNrUm9sZShbJ3NlbGxlcicsICdhZG1pbiddKSxcbiAgU3RhdHVzLmdldFByb2R1Y3RzU3RhdHVzR3JhcGhcbik7XG5cbnJvdXRlcy5nZXQoXG4gICcvYXV0aC9nb29nbGUvcmVkaXJlY3QnLFxuICBwYXNzcG9ydC5hdXRoZW50aWNhdGUoJ2dvb2dsZScsIHtcbiAgICBzZXNzaW9uOiBmYWxzZSxcbiAgICBmYWlsdXJlUmVkaXJlY3Q6ICcvJyxcbiAgfSksXG4gIGNoZWNrVXNlckJ5RW1haWwsXG4gIFVzZXJzLmdvb2dsZUF1dGhIYW5kbGVyXG4pO1xuZXhwb3J0IGRlZmF1bHQgcm91dGVzO1xuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBSUEsSUFBQUEsUUFBQSxHQUFBQyxzQkFBQSxDQUFBQyxPQUFBO0FBRUEsSUFBQUMsU0FBQSxHQUFBRixzQkFBQSxDQUFBQyxPQUFBO0FBQ0EsSUFBQUUsTUFBQSxHQUFBSCxzQkFBQSxDQUFBQyxPQUFBO0FBQ0EsSUFBQUcsZUFBQSxHQUFBQyx1QkFBQSxDQUFBSixPQUFBO0FBQ0EsSUFBQUssT0FBQSxHQUFBTixzQkFBQSxDQUFBQyxPQUFBO0FBQ0EsSUFBQU0sY0FBQSxHQUFBUCxzQkFBQSxDQUFBQyxPQUFBO0FBQ0EsSUFBQU8sZ0JBQUEsR0FBQVIsc0JBQUEsQ0FBQUMsT0FBQTtBQUNBLElBQUFRLFlBQUEsR0FBQVQsc0JBQUEsQ0FBQUMsT0FBQTtBQUNBLElBQUFTLGVBQUEsR0FBQVYsc0JBQUEsQ0FBQUMsT0FBQTtBQUNBLElBQUFVLFVBQUEsR0FBQVgsc0JBQUEsQ0FBQUMsT0FBQTtBQUNBLElBQUFXLFlBQUEsR0FBQVosc0JBQUEsQ0FBQUMsT0FBQTtBQUNBLElBQUFZLE9BQUEsR0FBQVos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","map":{"version":3,"names":["_express","_interopRequireDefault","require","_passport","_users","_checkUserExist","_interopRequireWildcard","_status","_loginValidate","_profileValidate","_mfaValidate","_signupValidate","_Checkrole","_verifyToken","_fields","_requestValidator","_disable","_admin","_jwt","_oauth","_multer","_logs","_getRequireWildcardCache","nodeInterop","WeakMap","cacheBabelInterop","cacheNodeInterop","obj","__esModule","default","cache","has","get","newObj","hasPropertyDescriptor","Object","defineProperty","getOwnPropertyDescriptor","key","prototype","hasOwnProperty","call","desc","set","googlePass","routes","express","Router","post","signupVatidate","checkUserExist","Users","signup","verifyEmail","requestValidator","resetPassword","sendResetPasswordCode","verifyResetPasswordCode","patch","isAuthenticated","changePassword","checkRole","CreateAdmin","mfaValidate","verifyMfaCode","enableMfa","disableMfa","loginValidate","login","getProfile","profileVatidate","editProfile","setRole","upload","single","updateAvatar","updateCoverImage","disableUser","logout","Admin","updateUser","delete","deleteUser","getAllUsers","getAllLogs","req","res","query","user","Jwt","verifyToken","status","json","message","token","error","passport","authenticate","scope","Status","getProductsStatus","getProductsStatusGraph","session","failureRedirect","checkUserByEmail","googleAuthHandler","_default","exports","module"],"sourceRoot":"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/routes/","sources":["users.js"],"sourcesContent":["/* eslint-disable import/no-duplicates */\n/* eslint-disable no-else-return */\n/* eslint-disable object-shorthand */\n/* eslint-disable comma-spacing */\nimport express from 'express';\n// eslint-disable-next-line import/no-named-as-default, import/no-named-as-default-member\nimport passport from 'passport';\nimport Users from '../controllers/users.controllers';\nimport checkUserExist,{ checkUserByEmail } from '../middlewares/checkUserExist';\nimport Status from '../controllers/status.controller';\nimport loginValidate from '../middlewares/loginValidate';\nimport profileVatidate from '../middlewares/profileValidate';\nimport mfaValidate from '../middlewares/mfaValidate';\nimport signupVatidate from '../middlewares/signupValidate';\nimport checkRole from '../middlewares/Checkrole';\nimport isAuthenticated from '../middlewares/verifyToken';\nimport { resetPassword } from '../validations/fields.validation';\nimport requestValidator from '../middlewares/requestValidator';\nimport disableUser from '../validations/disable.validation';\nimport Admin from '../controllers/admin.controller';\nimport { Jwt } from '../helpers/jwt';\nimport { googlePass } from '../controllers/oauth.controller';\nimport upload from '../configs/multer';\nimport { getAllLogs } from '../controllers/logs.controller';\n\ngooglePass();\nconst routes = express.Router();\n\nroutes.post('/signup', signupVatidate, checkUserExist, Users.signup);\nroutes.get('/verify-email/:token', Users.verifyEmail);\nroutes.post(\n  '/reset-password',\n  requestValidator(resetPassword),\n  Users.sendResetPasswordCode\n);\nroutes.post(\n  '/verify-reset-password/:resetToken',\n  Users.verifyResetPasswordCode\n);\nroutes.patch('/change-password', isAuthenticated, Users.changePassword);\n\nroutes.patch(\n  '/create-admin/:email',\n  isAuthenticated,\n  checkRole(['admin']),\n  Users.CreateAdmin\n);\nroutes.post('/verify-mfa', mfaValidate, Users.verifyMfaCode);\nroutes.post('/enable-mfa', isAuthenticated, Users.enableMfa);\nroutes.post('/disable-mfa', isAuthenticated, Users.disableMfa);\nroutes.post('/login', loginValidate, Users.login);\nroutes.get('/profile', isAuthenticated, Users.getProfile);\nroutes.patch('/profile', isAuthenticated, profileVatidate, Users.editProfile);\nroutes.patch('/role/:email', isAuthenticated, checkRole(['admin']), Users.setRole);\n\n// images\nroutes.patch('/profile/avatar', isAuthenticated, upload.single('image'), Users.updateAvatar);\nroutes.patch('/profile/cover-image', isAuthenticated, upload.single('image'), Users.updateCoverImage);\n\n// Disable account\nroutes.patch(\n  '/disable/:userId',\n  isAuthenticated,\n  checkRole(['admin']),\n  requestValidator(disableUser),\n  Users.disableUser\n);\nroutes.get(\n  '/logout',\n  isAuthenticated,\n  Users.logout\n);\n// Admin Routes\nroutes.post(\n  '/createUser',\n  isAuthenticated,\n  checkRole(['admin']),\n  Admin.signup\n);\nroutes.patch(\n  '/:id',\n  isAuthenticated,\n  checkRole(['admin']),\n  Admin.updateUser\n);\nroutes.delete(\n  '/:id',\n  isAuthenticated,\n  checkRole(['admin']),\n  Admin.deleteUser\n);\nroutes.get(\n  '/all',\n  isAuthenticated,\n  checkRole(['admin']),\n  Admin.getAllUsers\n);\nroutes.get(\n  '/logs/all',\n  isAuthenticated,\n  checkRole(['admin']),\n  getAllLogs\n);\n// Google routes\nroutes.get('/redirect', (req, res) => {\n  try {\n    if (req.query.key) {\n      const user = Jwt.verifyToken(req.query.key);\n      return res\n        .status(200)\n        .json({ message: 'Thanks for logging in', user: user,token: req.query.key });\n    } else {\n      return res.status(401).json({ error: 'Unauthorized' });\n    }\n  } catch (error) {\n    res.status(500).json({ message: error.message });\n  }\n});\nroutes.get(\n  '/auth/google',\n  passport.authenticate('google', { scope: ['email', 'profile'] })\n);\nroutes.get(\n  '/stats',\n  isAuthenticated,\n  checkRole(['seller', 'admin']),\n  Status.getProductsStatus\n);\nroutes.get(\n  '/stats/graph/:range',\n  isAuthenticated,\n  checkRole(['seller', 'admin']),\n  Status.getProductsStatusGraph\n);\n\nroutes.get(\n  '/auth/google/redirect',\n  passport.authenticate('google', {\n    session: false,\n    failureRedirect: '/',\n  }),\n  checkUserByEmail,\n  Users.googleAuthHandler\n);\nexport default routes;\n"],"mappings":"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"}},"mtime":1682148437959},"{\"assumptions\":{},\"sourceRoot\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/controllers/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"filename\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/controllers/users.controllers.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/node_modules/babel-plugin-add-module-exports/lib/index.js\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-runtime\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"regenerator\":true},\"externalDependencies\":[]},{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.21.0:development":{"value":{"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _bcrypt = _interopRequireDefault(require(\"bcrypt\"));\nvar _jsonwebtoken = _interopRequireDefault(require(\"jsonwebtoken\"));\nvar _dotenv = _interopRequireDefault(require(\"dotenv\"));\nvar _user = _interopRequireDefault(require(\"../services/user.services\"));\nvar _models = _interopRequireWildcard(require(\"../database/models\"));\nvar _moment = _interopRequireDefault(require(\"moment\"));\nvar _eventEmitter = _interopRequireDefault(require(\"../helpers/eventEmitter\"));\nvar _jwt = require(\"../helpers/jwt\");\nvar _emailConfig = require(\"../helpers/emailConfig\");\nvar _mailTemplate = require(\"../helpers/mailTemplate\");\nvar _mail = require(\"../helpers/mail\");\nvar _signup = require(\"../loggers/signup.logger\");\nfunction _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== \"function\") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function (nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }\nfunction _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") { return { default: obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n/* eslint-disable max-len */\n/* eslint-disable object-shorthand */\n/* eslint-disable camelcase */\n/* eslint-disable object-curly-newline */\n\n// eslint-disable-next-line import/no-unresolved, import/no-extraneous-dependencies\n\n// eslint-disable-next-line import/no-named-as-default, import/no-named-as-default-member\n\n// eslint-disable-next-line import/no-duplicates\n\n// eslint-disable-next-line import/order, import/no-extraneous-dependencies\n\n// eslint-disable-next-line import/named, import/no-duplicates\n\n/* eslint-disable require-jsdoc */\n\n// eslint-disable-next-line operator-linebreak\nconst JWT_SECRET = process.env.JWT_SECRET || 'secret';\nconst saltRounds = Number(process.env.SALTROUNDS) || 10;\n_dotenv.default.config();\n/**\n * user model class\n */\nclass Users {\n  /**\n   * registering new user.\n   * getting user information\n   * @param {Object} req valiable\n   * @param {Object} res valiable\n   * @return {Object} res\n   */\n  static async signup(req, res) {\n    try {\n      const {\n        data\n      } = await _user.default.register(req.body);\n      const signupToken = _jsonwebtoken.default.sign({\n        email: data.email\n      }, process.env.JWT_SECRET);\n      const userToken = _jwt.Jwt.generateToken({\n        data\n      }, '1h');\n      if (userToken) {\n        data.email_token = userToken;\n      }\n      await data.save();\n      const verificationEmail = (0, _mailTemplate.verifyEmailTemplate)(userToken);\n      (0, _mail.sendEmail)((0, _emailConfig.emailConfig)({\n        email: data.email,\n        subject: 'Brogrammers email verification',\n        content: verificationEmail\n      }));\n      (0, _signup.logSignup)(req);\n      (0, _signup.logEmailSent)(data.email);\n      return res.status(201).json({\n        message: 'Check your email to verify your account',\n        user: data,\n        signupToken\n      });\n    } catch (e) {\n      (0, _signup.logError)(req, e);\n      return res.status(500).json({\n        error: e.message,\n        message: 'Failed to register a new user'\n      });\n    }\n  }\n  static async verifyEmail(req, res) {\n    try {\n      const emailToken = req.params.token;\n      Users.verifyUser(emailToken, res);\n    } catch (error) {\n      (0, _signup.logError)(req, error);\n      res.status(500).json({\n        'Error:': error\n      });\n    }\n  }\n  static async verifyUser(emailToken, res) {\n    const user = await _user.default.findByEmailToken(emailToken);\n    if (!user) {\n      return res.status(404).json({\n        message: 'User not found'\n      });\n    }\n    user.email_token = null;\n    user.verified = true;\n    await user.save();\n    (0, _signup.logVerifyEmail)(user.email);\n    res.status(200).send({\n      message: 'Your account has been verified successfully!',\n      verified: true\n    });\n  }\n  static async setRole(req, res) {\n    try {\n      const {\n        role\n      } = req.body;\n      const {\n        email\n      } = req.params;\n      await _user.default.setRole(role, email);\n      const user = await _models.users.findOne({\n        where: {\n          email\n        }\n      });\n      const newNotification = {\n        message: `you have been assigned new role which is ${role}`,\n        type: 'user role updates'\n      };\n      const newN = {\n        ...newNotification\n      };\n      newN.receiverId = user.id;\n      const receiver = {\n        username: user.username,\n        email: user.email\n      };\n      const notifyEmail = (0, _mailTemplate.notificationTemplate2)(receiver.username, newN.message, newN.type);\n      (0, _mail.sendEmail)((0, _emailConfig.emailConfig)({\n        email: receiver.email,\n        subject: 'Notification !! role updates',\n        content: notifyEmail\n      }));\n      await _models.notifications.create(newN);\n      (0, _signup.logSetRole)(req, role);\n      return res.status(200).json({\n        status: 200,\n        message: 'Role assigned to the user successfully'\n      });\n    } catch (error) {\n      (0, _signup.logError)(req, error);\n      return res.status(500).json({\n        status: 500,\n        message: error.message\n      });\n    }\n  }\n\n  /**\n   * Login a user.\n   * getting user information\n   * @param {Object} req valiable\n   * @param {Object} res valiable\n   * @return {Object} res\n   */\n  static async login(req, res) {\n    try {\n      const user = await _models.default.users.findOne({\n        where: {\n          email: req.body.email\n        }\n      });\n      if (!user) {\n        return res.status(401).json({\n          message: 'Incorrect email or password'\n        });\n      }\n      const isPasswordValid = _bcrypt.default.compareSync(req.body.password, user.password);\n      if (!isPasswordValid) {\n        return res.status(401).json({\n          message: 'Incorrect email or password'\n        });\n      }\n      if (user.verified === false) {\n        return res.status(403).json({\n          message: 'Email is not verified'\n        });\n      }\n      if (user.disabledUser === true) {\n        return res.status(403).json({\n          message: 'Your account is disabled!'\n        });\n      }\n      if (user.mfa_enabled === false) {\n        const token = _jsonwebtoken.default.sign({\n          email: req.body.email,\n          id: user.id\n        }, JWT_SECRET);\n        (0, _signup.logLogin)(user.email, user);\n        return res.status(200).json({\n          email: req.body.email,\n          token\n        });\n      }\n\n      // eslint-disable-next-line camelcase\n      const mfa_code = await _user.default.startMfaProcess(req.body.email);\n      const mfaEmailContent = (0, _mailTemplate.mfaEmailTemplate)(mfa_code);\n      _user.default.sendMailWithNodemailer({\n        email: req.body.email,\n        subject: 'Brogrammers authentication code',\n        content: mfaEmailContent\n      });\n      (0, _signup.logLogin)(user.email);\n      return res.status(200).json({\n        message: 'Please check your email for authentication code'\n      });\n    } catch (error) {\n      (0, _signup.logError)(req, error);\n      res.status(500).json({\n        error: error.message,\n        message: 'Failed to login a user'\n      });\n    }\n  }\n\n  /**\n   * Login a user.\n   * getting user information\n   * @param {Object} req\n   * @param {Object} res\n   * @return {Object} res\n   */\n  static async getProfile(req, res) {\n    try {\n      const {\n        avatar,\n        cover_image,\n        email,\n        username,\n        role,\n        gender\n      } = req.user;\n      (0, _signup.viewProfile)(req, req.user);\n      res.status(200).json({\n        avatar,\n        cover_image,\n        email,\n        username,\n        role,\n        gender\n      });\n    } catch (error) {\n      (0, _signup.logError)(req, error);\n      res.status(500).json({\n        error: error.message,\n        message: 'server error'\n      });\n    }\n  }\n\n  /**\n   * Login a user.\n   * getting user information\n   * @param {Object} req\n   * @param {Object} res\n   * @return {Object} res\n   */\n  static async editProfile(req, res) {\n    try {\n      const {\n        error,\n        value\n      } = await _user.default.editProfile(req.body, req.user);\n      if (error) return res.status(400).json(error);\n      const {\n        avatar,\n        cover_image,\n        email,\n        username,\n        role,\n        gender\n      } = value;\n      const token = _jwt.Jwt.generateToken({\n        email\n      });\n      await _models.default.users.update({\n        email_token: token\n      }, {\n        where: {\n          email\n        }\n      });\n      (0, _signup.editProfiles)(req, value);\n      res.status(200).json({\n        avatar,\n        cover_image,\n        email,\n        username,\n        role,\n        gender,\n        token,\n        email_token: token\n      });\n    } catch (error) {\n      (0, _signup.logError)(req, error);\n      res.status(500).json({\n        error: error.message,\n        message: 'server error'\n      });\n    }\n  }\n  static async enableMfa(req, res) {\n    try {\n      await _models.default.users.update({\n        mfa_enabled: true\n      }, {\n        where: {\n          email: req.user.email\n        }\n      });\n      (0, _signup.enableMfaLog)(req);\n      return res.status(200).json({\n        message: 'Multi-factor authentication is enabled'\n      });\n    } catch (error) {\n      (0, _signup.logError)(req, error);\n      return res.status(500).json({\n        error: error.message,\n        message: 'Failed to enable Multi-factor authentication'\n      });\n    }\n  }\n  static async disableMfa(req, res) {\n    try {\n      await _models.default.users.update({\n        mfa_enabled: false\n      }, {\n        where: {\n          email: req.user.email\n        }\n      });\n      (0, _signup.disableMfaLog)(req);\n      return res.status(200).json({\n        message: 'Multi-factor authentication is disabled'\n      });\n    } catch (error) {\n      (0, _signup.logError)(req, error);\n      return res.status(500).json({\n        error: error.message,\n        message: 'Failed to disable Multi-factor authentication'\n      });\n    }\n  }\n  static async verifyMfaCode(req, res) {\n    try {\n      const [isValid, message] = await _user.default.isMfaValid(req.body.email, req.body.mfa_code);\n      if (isValid) {\n        const token = _jsonwebtoken.default.sign({\n          email: req.body.email\n        }, JWT_SECRET);\n        (0, _signup.verifiedMfaLog)(req, token);\n        return res.status(200).json({\n          email: req.body.email,\n          token\n        });\n      }\n      return res.status(403).json({\n        message\n      });\n    } catch (error) {\n      (0, _signup.logError)(req, error);\n      return res.status(500).json({\n        error: error.message,\n        message: 'Failed to verify authentication code'\n      });\n    }\n  }\n  static async CreateAdmin(req, res) {\n    try {\n      const newAdminemail = req.params.email;\n      const Nwuser = await _models.users.findOne({\n        where: {\n          email: newAdminemail\n        }\n      });\n      if (!Nwuser) {\n        return res.status(404).json({\n          statusCode: 404,\n          message: 'you are trying to make admin user that does not exist'\n        });\n      }\n      Nwuser.role = 'admin';\n      await Nwuser.save();\n      const newNotification = {\n        message: 'you have been assigned new role which is admin',\n        type: 'user role updates'\n      };\n      const newN = {\n        ...newNotification\n      };\n      newN.receiverId = Nwuser.id;\n      const receiver = {\n        username: Nwuser.username,\n        email: Nwuser.email\n      };\n      const notifyEmail = (0, _mailTemplate.notificationTemplate2)(receiver.username, newN.message, newN.type);\n      (0, _mail.sendEmail)((0, _emailConfig.emailConfig)({\n        email: receiver.email,\n        subject: 'Notification !! ',\n        content: notifyEmail\n      }));\n      await _models.notifications.create(newN);\n      (0, _signup.createAdminLog)(req, Nwuser);\n      res.status(200).json({\n        user: Nwuser,\n        message: `user ${Nwuser.username} sucessfully made admin`\n      });\n    } catch (error) {\n      (0, _signup.logError)(req, error);\n      res.status(500).json({\n        'Error:': error\n      });\n    }\n  }\n  static async sendResetPasswordCode(req, res) {\n    try {\n      const {\n        email,\n        newPassword\n      } = req.body;\n      const user = await _models.default.users.findOne({\n        where: {\n          email\n        }\n      });\n      if (!user) {\n        return res.status(404).json({\n          message: 'User not found'\n        });\n      }\n\n      // eslint-disable-next-line camelcase\n      const resetToken = _jsonwebtoken.default.sign({\n        email,\n        newPassword\n      }, process.env.RESET_PASSWORD_SECRET, {\n        expiresIn: '1h'\n      });\n      const resetPasswordContent = (0, _mailTemplate.passwordResetEmailTemplate)(resetToken);\n      (0, _mail.sendEmail)((0, _emailConfig.emailConfig)({\n        email,\n        subject: 'Brogrammers reset password',\n        content: resetPasswordContent\n      }));\n      (0, _signup.resetPasswordLog)(req);\n      res.status(200).json({\n        message: 'Check your email for reset link'\n      });\n    } catch (error) {\n      (0, _signup.logError)(req, error);\n      res.status(500).json({\n        message: error.message\n      });\n    }\n  }\n  static async verifyResetPasswordCode(req, res) {\n    try {\n      const {\n        resetToken\n      } = req.params;\n      if (resetToken) {\n        _jsonwebtoken.default.verify(resetToken, process.env.RESET_PASSWORD_SECRET, async (err, decodedToken) => {\n          if (err) {\n            return res.status(403).json({\n              message: 'Invalid password reset token'\n            });\n          }\n          const {\n            email,\n            newPassword\n          } = decodedToken;\n          const user = await _models.users.findOne({\n            where: {\n              email\n            }\n          });\n          if (!user) {\n            return res.status(404).json('User not found');\n          }\n          user.verified = true;\n          user.password = _bcrypt.default.hashSync(newPassword, saltRounds);\n          user.save();\n          (0, _signup.verifyPasswordLog)(req, user);\n          return res.status(200).json({\n            message: 'Password reset successful'\n          });\n        });\n      }\n    } catch (error) {\n      (0, _signup.logError)(req, error);\n      res.status(500).json({\n        message: error.message || error.toString() || 'Failed to verify password reset link'\n      });\n    }\n  }\n  static async changePassword(req, res) {\n    try {\n      const {\n        oldPassword,\n        newPassword\n      } = req.body;\n\n      // check if the old password matches the one in the database\n      const isPasswordValid = await _bcrypt.default.compare(oldPassword, req.user.password);\n      if (!isPasswordValid) {\n        return res.status(401).json({\n          message: 'Incorrect old password'\n        });\n      }\n\n      // validate the new password\n      // eslint-disable-next-line operator-linebreak\n      const passwordRegex = /^(?=.*\\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[!@#$%^&*()_+\\-=[\\]{};':\"\\\\|,.<>/?]).{8,}$/;\n      if (!passwordRegex.test(newPassword)) {\n        return res.status(400).json({\n          message: 'New password must be at least 8 characters long and contain at least one uppercase letter, one lowercase letter, one number, and one symbol.'\n        });\n      }\n\n      // hash the new password and update the database\n      const hashedPassword = await _bcrypt.default.hash(newPassword, saltRounds);\n      req.user.password = hashedPassword;\n      req.user.lastTimePasswordUpdated = (0, _moment.default)();\n      req.user.mustUpdatePassword = false;\n      await req.user.save();\n      // Emit event to notify password update\n      _eventEmitter.default.emit('passwordUpdated', req.user);\n      (0, _signup.changePasswordLog)(req, req.user);\n      res.status(200).json({\n        message: 'Password updated successfully'\n      });\n    } catch (error) {\n      (0, _signup.logError)(req, error);\n      res.status(500).json({\n        error: error.message,\n        message: 'Failed to change password'\n      });\n    }\n  }\n  // admin Disable user due to some reasons2\n\n  static async disableUser(req, res) {\n    try {\n      const user = await _models.users.findOne({\n        where: {\n          id: req.params.userId\n        }\n      });\n      if (!user) {\n        return res.status(404).json({\n          error: 'User not found'\n        });\n      }\n      if (user.disabledUser) {\n        return res.status(400).json({\n          message: 'user is already disabled'\n        });\n      }\n      user.disabledUser = true;\n      user.disabledReason = req.body.reason;\n      await user.save();\n      (0, _mail.sendEmail)((0, _emailConfig.emailConfig)({\n        email: user.email,\n        subject: 'Your account has been disabled',\n        // eslint-disable-next-line no-undef\n        content: (0, _mailTemplate.disableEmailTemplate)(user.username, user.disabledReason)\n      }));\n      res.status(200).json({\n        message: 'User account disabled successfully'\n      });\n      (0, _signup.disableAccountLog)(req, user);\n    } catch (error) {\n      (0, _signup.logError)(req, error);\n      res.status(500).json({\n        message: error.message\n      });\n    }\n  }\n\n  /**\n  * Logout a user by invalidating the JWT token.\n  * @param {Object} req valiable\n  * @param {Object} res valiable\n  * @return {Object} res\n  */\n  static async logout(req, res) {\n    try {\n      await _user.default.logout(req.headers.authorization);\n      (0, _signup.logLogout)(req);\n      res.status(200).json({\n        message: 'You logged out successfully'\n      });\n    } catch (error) {\n      (0, _signup.logError)(req, error);\n      res.status(500).json({\n        message: error.message\n      });\n    }\n  }\n  static async googleAuthHandler(req, res) {\n    const {\n      value\n    } = req.user.emails[0];\n    const {\n      familyName\n    } = req.user.name;\n    const newUser = {\n      username: familyName,\n      email: value,\n      avatar: req.user.photos[0].value,\n      verified: true,\n      password: '12345'\n    };\n    const {\n      id,\n      email\n    } = await _user.default.registerGoogle(newUser);\n    const userToken = _jwt.Jwt.generateToken({\n      id: id,\n      email: email\n    }, '1h');\n    (0, _signup.redirectGoogle)(email);\n    return res.redirect(`/users/redirect?key=${userToken}`);\n  }\n  static async updateAvatar(req, res) {\n    try {\n      const {\n        error,\n        value\n      } = await _user.default.updateAvatar(req.user, req.file);\n      if (error) return res.status(400).json(error);\n      const {\n        avatar,\n        cover_image,\n        email,\n        username,\n        role,\n        gender\n      } = value;\n      (0, _signup.updateAvatarLog)(req, value);\n      res.status(200).json({\n        avatar,\n        cover_image,\n        email,\n        username,\n        role,\n        gender\n      });\n    } catch (error) {\n      (0, _signup.logError)(req, error);\n      res.status(500).json({\n        message: error.message\n      });\n    }\n  }\n  static async updateCoverImage(req, res) {\n    try {\n      const {\n        error,\n        value\n      } = await _user.default.updateCoverImage(req.user, req.file);\n      if (error) return res.status(400).json(error);\n      const {\n        avatar,\n        cover_image,\n        email,\n        username,\n        role,\n        gender\n      } = value;\n      (0, _signup.updateImageLog)(req, value);\n      res.status(200).json({\n        avatar,\n        cover_image,\n        email,\n        username,\n        role,\n        gender\n      });\n    } catch (error) {\n      (0, _signup.logError)(req, error);\n      res.status(500).json({\n        message: error.message\n      });\n    }\n  }\n}\nexports.default = Users;\nmodule.exports = exports.default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfYmNyeXB0IiwiX2ludGVyb3BSZXF1aXJlRGVmYXVsdCIsInJlcXVpcmUiLCJfanNvbndlYnRva2VuIiwiX2RvdGVudiIsIl91c2VyIiwiX21vZGVscyIsIl9pbnRlcm9wUmVxdWlyZVdpbGRjYXJkIiwiX21vbWVudCIsIl9ldmVudEVtaXR0ZXIiLCJfand0IiwiX2VtYWlsQ29uZmlnIiwiX21haWxUZW1wbGF0ZSIsIl9tYWlsIiwiX3NpZ251cCIsIl9nZXRSZXF1aXJlV2lsZGNhcmRDYWNoZSIsIm5vZGVJbnRlcm9wIiwiV2Vha01hcCIsImNhY2hlQmFiZWxJbnRlcm9wIiwiY2FjaGVOb2RlSW50ZXJvcCIsIm9iaiIsIl9fZXNNb2R1bGUiLCJkZWZhdWx0IiwiY2FjaGUiLCJoYXMiLCJnZXQiLCJuZXdPYmoiLCJoYXNQcm9wZXJ0eURlc2NyaXB0b3IiLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImdldE93blByb3BlcnR5RGVzY3JpcHRvciIsImtleSIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwiY2FsbCIsImRlc2MiLCJzZXQiLCJKV1RfU0VDUkVUIiwicHJvY2VzcyIsImVudiIsInNhbHRSb3VuZHMiLCJOdW1iZXIiLCJTQUxUUk9VTkRTIiwiZG90ZW52IiwiY29uZmlnIiwiVXNlcnMiLCJzaWdudXAiLCJyZXEiLCJyZXMiLCJkYXRhIiwiVXNlciIsInJlZ2lzdGVyIiwiYm9keSIsInNpZ251cFRva2VuIiwiand0Iiwic2lnbiIsImVtYWlsIiwidXNlclRva2VuIiwiSnd0IiwiZ2VuZXJhdGVUb2tlbiIsImVtYWlsX3Rva2VuIiwic2F2ZSIsInZlcmlmaWNhdGlvbkVtYWlsIiwidmVyaWZ5RW1haWxUZW1wbGF0ZSIsInNlbmRFbWFpbCIsImVtYWlsQ29uZmlnIiwic3ViamVjdCIsImNvbnRlbnQiLCJsb2dTaWdudXAiLCJsb2dFbWFpbFNlbnQiLCJzdGF0dXMiLCJqc29uIiwibWVzc2FnZSIsInVzZXIiLCJlIiwibG9nRXJyb3IiLCJlcnJvciIsInZlcmlmeUVtYWlsIiwiZW1haWxUb2tlbiIsInBhcmFtcyIsInRva2VuIiwidmVyaWZ5VXNlciIsImZpbmRCeUVtYWlsVG9rZW4iLCJ2ZXJpZmllZCIsImxvZ1ZlcmlmeUVtYWlsIiwic2VuZCIsInNldFJvbGUiLCJyb2xlIiwidXNlcnMiLCJmaW5kT25lIiwid2hlcmUiLCJuZXdOb3RpZmljYXRpb24iLCJ0eXBlIiwibmV3TiIsInJlY2VpdmVySWQiLCJpZCIsInJlY2VpdmVyIiwidXNlcm5hbWUiLCJub3RpZnlFbWFpbCIsIm5vdGlmaWNhdGlvblRlbXBsYXRlMiIsIm5vdGlmaWNhdGlvbnMiLCJjcmVhdGUiLCJsb2dTZXRSb2xlIiwibG9naW4iLCJkYiIsImlzUGFzc3dvcmRWYWxpZCIsImJjcnlwdCIsImNvbXBhcmVTeW5jIiwicGFzc3dvcmQiLCJkaXNhYmxlZFVzZXIiLCJtZmFfZW5hYmxlZCIsImxvZ0xvZ2luIiwibWZhX2NvZGUiLCJzdGFydE1mYVByb2Nlc3MiLCJtZmFFbWFpbENvbnRlbnQiLCJtZmFFbWFpbFRlbXBsYXRlIiwic2VuZE1haWxXaXRoTm9kZW1haWxlciIsImdldFByb2ZpbGUiLCJhdmF0YXIiLCJjb3Zlcl9pbWFnZSIsImdlbmRlciIsInZpZXdQcm9maWxlIiwiZWRpdFByb2ZpbGUiLCJ2YWx1ZSIsInVwZGF0ZSIsImVkaXRQcm9maWxlcyIsImVuYWJsZU1mYSIsImVuYWJsZU1mYUxvZyIsImRpc2FibGVNZmEiLCJkaXNhYmxlTWZhTG9nIiwidmVyaWZ5TWZhQ29kZSIsImlzVmFsaWQiLCJpc01mYVZhbGlkIiwidmVyaWZpZWRNZmFMb2ciLCJDcmVhdGVBZG1pbiIsIm5ld0FkbWluZW1haWwiLCJOd3VzZXIiLCJzdGF0dXNDb2RlIiwiY3JlYXRlQWRtaW5Mb2ciLCJzZW5kUmVzZXRQYXNzd29yZENvZGUiLCJuZXdQYXNzd29yZCIsInJlc2V0VG9rZW4iLCJSRVNFVF9QQVNTV09SRF9TRUNSRVQiLCJleHBpcmVzSW4iLCJyZXNldFBhc3N3b3JkQ29udGVudCIsInBhc3N3b3JkUmVzZXRFbWFpbFRlbXBsYXRlIiwicmVzZXRQYXNzd29yZExvZyIsInZlcmlmeVJlc2V0UGFzc3dvcmRDb2RlIiwidmVyaWZ5IiwiZXJyIiwiZGVjb2RlZFRva2VuIiwiaGFzaFN5bmMiLCJ2ZXJpZnlQYXNzd29yZExvZyIsInRvU3RyaW5nIiwiY2hhbmdlUGFzc3dvcmQiLCJvbGRQYXNzd29yZCIsImNvbXBhcmUiLCJwYXNzd29yZFJlZ2V4IiwidGVzdCIsImhhc2hlZFBhc3N3b3JkIiwiaGFzaCIsImxhc3RUaW1lUGFzc3dvcmRVcGRhdGVkIiwibW9tZW50IiwibXVzdFVwZGF0ZVBhc3N3b3JkIiwiZXZlbnRFbWl0dGVyIiwiZW1pdCIsImNoYW5nZVBhc3N3b3JkTG9nIiwiZGlzYWJsZVVzZXIiLCJ1c2VySWQiLCJkaXNhYmxlZFJlYXNvbiIsInJlYXNvbiIsImRpc2FibGVFbWFpbFRlbXBsYXRlIiwiZGlzYWJsZUFjY291bnRMb2ciLCJsb2dvdXQiLCJoZWFkZXJzIiwiYXV0aG9yaXphdGlvbiIsImxvZ0xvZ291dCIsImdvb2dsZUF1dGhIYW5kbGVyIiwiZW1haWxzIiwiZmFtaWx5TmFtZSIsIm5hbWUiLCJuZXdVc2VyIiwicGhvdG9zIiwicmVnaXN0ZXJHb29nbGUiLCJyZWRpcmVjdEdvb2dsZSIsInJlZGlyZWN0IiwidXBkYXRlQXZhdGFyIiwiZmlsZSIsInVwZGF0ZUF2YXRhckxvZyIsInVwZGF0ZUNvdmVySW1hZ2UiLCJ1cGRhdGVJbWFnZUxvZyIsImV4cG9ydHMiLCJtb2R1bGUiXSwic291cmNlUm9vdCI6Ii9Vc2Vycy9hbmRlbGFyd2FuZGEvRGVza3RvcC9lLWNvbW0tdGVhbS1icm9ncmFtbWVycy1ibi9zcmMvY29udHJvbGxlcnMvIiwic291cmNlcyI6WyJ1c2Vycy5jb250cm9sbGVycy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKiBlc2xpbnQtZGlzYWJsZSBtYXgtbGVuICovXG4vKiBlc2xpbnQtZGlzYWJsZSBvYmplY3Qtc2hvcnRoYW5kICovXG4vKiBlc2xpbnQtZGlzYWJsZSBjYW1lbGNhc2UgKi9cbi8qIGVzbGludC1kaXNhYmxlIG9iamVjdC1jdXJseS1uZXdsaW5lICovXG5pbXBvcnQgYmNyeXB0IGZyb20gJ2JjcnlwdCc7XG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgaW1wb3J0L25vLXVucmVzb2x2ZWQsIGltcG9ydC9uby1leHRyYW5lb3VzLWRlcGVuZGVuY2llc1xuaW1wb3J0IGp3dCBmcm9tICdqc29ud2VidG9rZW4nO1xuaW1wb3J0IGRvdGVudiBmcm9tICdkb3RlbnYnO1xuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGltcG9ydC9uby1uYW1lZC1hcy1kZWZhdWx0LCBpbXBvcnQvbm8tbmFtZWQtYXMtZGVmYXVsdC1tZW1iZXJcbmltcG9ydCBVc2VyIGZyb20gJy4uL3NlcnZpY2VzL3VzZXIuc2VydmljZXMnO1xuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGltcG9ydC9uby1kdXBsaWNhdGVzXG5pbXBvcnQgZGIgZnJvbSAnLi4vZGF0YWJhc2UvbW9kZWxzJztcbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBpbXBvcnQvb3JkZXIsIGltcG9ydC9uby1leHRyYW5lb3VzLWRlcGVuZGVuY2llc1xuaW1wb3J0IG1vbWVudCBmcm9tICdtb21lbnQnO1xuaW1wb3J0IGV2ZW50RW1pdHRlciBmcm9tICcuLi9oZWxwZXJzL2V2ZW50RW1pdHRlcic7XG5cbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBpbXBvcnQvbmFtZWQsIGltcG9ydC9uby1kdXBsaWNhdGVzXG5pbXBvcnQgeyB1c2Vycywgbm90aWZpY2F0aW9ucyB9IGZyb20gJy4uL2RhdGFiYXNlL21vZGVscyc7XG4vKiBlc2xpbnQtZGlzYWJsZSByZXF1aXJlLWpzZG9jICovXG5pbXBvcnQgeyBKd3QgfSBmcm9tICcuLi9oZWxwZXJzL2p3dCc7XG5pbXBvcnQgeyBlbWFpbENvbmZpZyB9IGZyb20gJy4uL2hlbHBlcnMvZW1haWxDb25maWcnO1xuaW1wb3J0IHtcbiAgdmVyaWZ5RW1haWxUZW1wbGF0ZSxcbiAgbWZhRW1haWxUZW1wbGF0ZSxcbiAgcGFzc3dvcmRSZXNldEVtYWlsVGVtcGxhdGUsXG4gIGRpc2FibGVFbWFpbFRlbXBsYXRlLFxuICBub3RpZmljYXRpb25UZW1wbGF0ZTJcbn0gZnJvbSAnLi4vaGVscGVycy9tYWlsVGVtcGxhdGUnO1xuaW1wb3J0IHsgc2VuZEVtYWlsIH0gZnJvbSAnLi4vaGVscGVycy9tYWlsJztcblxuaW1wb3J0IHsgbG9nU2lnbnVwLCByZWRpcmVjdEdvb2dsZSwgdXBkYXRlQXZhdGFyTG9nLCBsb2dFcnJvciwgbG9nU2V0Um9sZSwgbG9nRW1haWxTZW50LCB1cGRhdGVJbWFnZUxvZywgbG9nTG9nb3V0LCBsb2dWZXJpZnlFbWFpbCwgbG9nTG9naW4sIHZpZXdQcm9maWxlLCBlZGl0UHJvZmlsZXMsIGVuYWJsZU1mYUxvZywgZGlzYWJsZU1mYUxvZywgdmVyaWZpZWRNZmFMb2csIGNyZWF0ZUFkbWluTG9nLCByZXNldFBhc3N3b3JkTG9nLCB2ZXJpZnlQYXNzd29yZExvZywgY2hhbmdlUGFzc3dvcmRMb2csIGRpc2FibGVBY2NvdW50TG9nIH0gZnJvbSAnLi4vbG9nZ2Vycy9zaWdudXAubG9nZ2VyJztcblxuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG9wZXJhdG9yLWxpbmVicmVha1xuY29uc3QgSldUX1NFQ1JFVCA9IHByb2Nlc3MuZW52LkpXVF9TRUNSRVQgfHwgJ3NlY3JldCc7XG5jb25zdCBzYWx0Um91bmRzID0gTnVtYmVyKHByb2Nlc3MuZW52LlNBTFRST1VORFMpIHx8IDEwO1xuXG5kb3RlbnYuY29uZmlnKCk7XG4vKipcbiAqIHVzZXIgbW9kZWwgY2xhc3NcbiAqL1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgVXNlcnMge1xuICAvKipcbiAgICogcmVnaXN0ZXJpbmcgbmV3IHVzZXIuXG4gICAqIGdldHRpbmcgdXNlciBpbmZvcm1hdGlvblxuICAgKiBAcGFyYW0ge09iamVjdH0gcmVxIHZhbGlhYmxlXG4gICAqIEBwYXJhbSB7T2JqZWN0fSByZXMgdmFsaWFibGVcbiAgICogQHJldHVybiB7T2JqZWN0fSByZXNcbiAgICovXG4gIHN0YXRpYyBhc3luYyBzaWdudXAocmVxLCByZXMpIHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgeyBkYXRhIH0gPSBhd2FpdCBVc2VyLnJlZ2lzdGVyKHJlcS5ib2R5KTtcbiAgICAgIGNvbnN0IHNpZ251cFRva2VuID0gand0LnNpZ24oXG4gICAgICAgIHsgZW1haWw6IGRhdGEuZW1haWwgfSxcbiAgICAgICAgcHJvY2Vzcy5lbnYuSldUX1NFQ1JFVFxuICAgICAgKTtcbiAgICAgIGNvbnN0IHVzZXJUb2tlbiA9IEp3dC5nZW5lcmF0ZVRva2VuKHsgZGF0YSB9LCAnMWgnKTtcbiAgICAgIGlmICh1c2VyVG9rZW4pIHtcbiAgICAgICAgZGF0YS5lbWFpbF90b2tlbiA9IHVzZXJUb2tlbjtcbiAgICAgIH1cbiAgICAgIGF3YWl0IGRhdGEuc2F2ZSgpO1xuICAgICAgY29uc3QgdmVyaWZpY2F0aW9uRW1haWwgPSB2ZXJpZnlFbWFpbFRlbXBsYXRlKHVzZXJUb2tlbik7XG4gICAgICBzZW5kRW1haWwoXG4gICAgICAgIGVtYWlsQ29uZmlnKHtcbiAgICAgICAgICBlbWFpbDogZGF0YS5lbWFpbCxcbiAgICAgICAgICBzdWJqZWN0OiAnQnJvZ3JhbW1lcnMgZW1haWwgdmVyaWZpY2F0aW9uJyxcbiAgICAgICAgICBjb250ZW50OiB2ZXJpZmljYXRpb25FbWFpbCxcbiAgICAgICAgfSlcbiAgICAgICk7XG4gICAgICBsb2dTaWdudXAocmVxKTtcbiAgICAgIGxvZ0VtYWlsU2VudChkYXRhLmVtYWlsKTtcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDIwMSkuanNvbih7XG4gICAgICAgIG1lc3NhZ2U6ICdDaGVjayB5b3VyIGVtYWlsIHRvIHZlcmlmeSB5b3VyIGFjY291bnQnLFxuICAgICAgICB1c2VyOiBkYXRhLFxuICAgICAgICBzaWdudXBUb2tlbixcbiAgICAgIH0pO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIGxvZ0Vycm9yKHJlcSwgZSk7XG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg1MDApLmpzb24oe1xuICAgICAgICBlcnJvcjogZS5tZXNzYWdlLFxuICAgICAgICBtZXNzYWdlOiAnRmFpbGVkIHRvIHJlZ2lzdGVyIGEgbmV3IHVzZXInLFxuICAgICAgfSk7XG4gICAgfVxuICB9XG5cbiAgc3RhdGljIGFzeW5jIHZlcmlmeUVtYWlsKHJlcSwgcmVzKSB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGVtYWlsVG9rZW4gPSByZXEucGFyYW1zLnRva2VuO1xuICAgICAgVXNlcnMudmVyaWZ5VXNlcihlbWFpbFRva2VuLCByZXMpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBsb2dFcnJvcihyZXEsIGVycm9yKTtcbiAgICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgJ0Vycm9yOic6IGVycm9yIH0pO1xuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyBhc3luYyB2ZXJpZnlVc2VyKGVtYWlsVG9rZW4sIHJlcykge1xuICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBVc2VyLmZpbmRCeUVtYWlsVG9rZW4oZW1haWxUb2tlbik7XG4gICAgaWYgKCF1c2VyKSB7XG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDQpLmpzb24oe1xuICAgICAgICBtZXNzYWdlOiAnVXNlciBub3QgZm91bmQnLFxuICAgICAgfSk7XG4gICAgfVxuICAgIHVzZXIuZW1haWxfdG9rZW4gPSBudWxsO1xuICAgIHVzZXIudmVyaWZpZWQgPSB0cnVlO1xuICAgIGF3YWl0IHVzZXIuc2F2ZSgpO1xuICAgIGxvZ1ZlcmlmeUVtYWlsKHVzZXIuZW1haWwpO1xuICAgIHJlcy5zdGF0dXMoMjAwKS5zZW5kKHtcbiAgICAgIG1lc3NhZ2U6ICdZb3VyIGFjY291bnQgaGFzIGJlZW4gdmVyaWZpZWQgc3VjY2Vzc2Z1bGx5IScsXG4gICAgICB2ZXJpZmllZDogdHJ1ZSxcbiAgICB9KTtcbiAgfVxuXG4gIHN0YXRpYyBhc3luYyBzZXRSb2xlKHJlcSwgcmVzKSB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHsgcm9sZSB9ID0gcmVxLmJvZHk7XG4gICAgICBjb25zdCB7IGVtYWlsIH0gPSByZXEucGFyYW1zO1xuICAgICAgYXdhaXQgVXNlci5zZXRSb2xlKHJvbGUsIGVtYWlsKTtcbiAgICAgIGNvbnN0IHVzZXIgPSBhd2FpdCB1c2Vycy5maW5kT25lKHsgd2hlcmU6IHsgZW1haWwgfSB9KTtcbiAgICAgIGNvbnN0IG5ld05vdGlmaWNhdGlvbiA9IHtcbiAgICAgICAgbWVzc2FnZTogYHlvdSBoYXZlIGJlZW4gYXNzaWduZWQgbmV3IHJvbGUgd2hpY2ggaXMgJHtyb2xlfWAsXG4gICAgICAgIHR5cGU6ICd1c2VyIHJvbGUgdXBkYXRlcycsXG4gICAgICB9O1xuICAgICAgY29uc3QgbmV3TiA9IHsgLi4ubmV3Tm90aWZpY2F0aW9uIH07XG4gICAgICBuZXdOLnJlY2VpdmVySWQgPSB1c2VyLmlkO1xuICAgICAgY29uc3QgcmVjZWl2ZXIgPSB7XG4gICAgICAgIHVzZXJuYW1lOiB1c2VyLnVzZXJuYW1lLFxuICAgICAgICBlbWFpbDogdXNlci5lbWFpbFxuICAgICAgfTtcbiAgICAgIGNvbnN0IG5vdGlmeUVtYWlsID0gbm90aWZpY2F0aW9uVGVtcGxhdGUyKFxuICAgICAgICByZWNlaXZlci51c2VybmFtZSxcbiAgICAgICAgbmV3Ti5tZXNzYWdlLFxuICAgICAgICBuZXdOLnR5cGVcbiAgICAgICk7XG4gICAgICBzZW5kRW1haWwoXG4gICAgICAgIGVtYWlsQ29uZmlnKHtcbiAgICAgICAgICBlbWFpbDogcmVjZWl2ZXIuZW1haWwsXG4gICAgICAgICAgc3ViamVjdDogJ05vdGlmaWNhdGlvbiAhISByb2xlIHVwZGF0ZXMnLFxuICAgICAgICAgIGNvbnRlbnQ6IG5vdGlmeUVtYWlsLFxuICAgICAgICB9KVxuICAgICAgKTtcbiAgICAgIGF3YWl0IG5vdGlmaWNhdGlvbnMuY3JlYXRlKG5ld04pO1xuICAgICAgbG9nU2V0Um9sZShyZXEsIHJvbGUpO1xuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoMjAwKS5qc29uKHtcbiAgICAgICAgc3RhdHVzOiAyMDAsXG4gICAgICAgIG1lc3NhZ2U6ICdSb2xlIGFzc2lnbmVkIHRvIHRoZSB1c2VyIHN1Y2Nlc3NmdWxseScsXG4gICAgICB9KTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgbG9nRXJyb3IocmVxLCBlcnJvcik7XG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg1MDApLmpzb24oe1xuICAgICAgICBzdGF0dXM6IDUwMCxcbiAgICAgICAgbWVzc2FnZTogZXJyb3IubWVzc2FnZSxcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBMb2dpbiBhIHVzZXIuXG4gICAqIGdldHRpbmcgdXNlciBpbmZvcm1hdGlvblxuICAgKiBAcGFyYW0ge09iamVjdH0gcmVxIHZhbGlhYmxlXG4gICAqIEBwYXJhbSB7T2JqZWN0fSByZXMgdmFsaWFibGVcbiAgICogQHJldHVybiB7T2JqZWN0fSByZXNcbiAgICovXG4gIHN0YXRpYyBhc3luYyBsb2dpbihyZXEsIHJlcykge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCB1c2VyID0gYXdhaXQgZGIudXNlcnMuZmluZE9uZSh7IHdoZXJlOiB7IGVtYWlsOiByZXEuYm9keS5lbWFpbCB9IH0pO1xuXG4gICAgICBpZiAoIXVzZXIpIHtcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAxKS5qc29uKHsgbWVzc2FnZTogJ0luY29ycmVjdCBlbWFpbCBvciBwYXNzd29yZCcgfSk7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGlzUGFzc3dvcmRWYWxpZCA9IGJjcnlwdC5jb21wYXJlU3luYyhcbiAgICAgICAgcmVxLmJvZHkucGFzc3dvcmQsXG4gICAgICAgIHVzZXIucGFzc3dvcmRcbiAgICAgICk7XG4gICAgICBpZiAoIWlzUGFzc3dvcmRWYWxpZCkge1xuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDEpLmpzb24oeyBtZXNzYWdlOiAnSW5jb3JyZWN0IGVtYWlsIG9yIHBhc3N3b3JkJyB9KTtcbiAgICAgIH1cblxuICAgICAgaWYgKHVzZXIudmVyaWZpZWQgPT09IGZhbHNlKSB7XG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMykuanNvbih7IG1lc3NhZ2U6ICdFbWFpbCBpcyBub3QgdmVyaWZpZWQnIH0pO1xuICAgICAgfVxuICAgICAgaWYgKHVzZXIuZGlzYWJsZWRVc2VyID09PSB0cnVlKSB7XG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMykuanNvbih7IG1lc3NhZ2U6ICdZb3VyIGFjY291bnQgaXMgZGlzYWJsZWQhJyB9KTtcbiAgICAgIH1cblxuICAgICAgaWYgKHVzZXIubWZhX2VuYWJsZWQgPT09IGZhbHNlKSB7XG4gICAgICAgIGNvbnN0IHRva2VuID0gand0LnNpZ24oXG4gICAgICAgICAgeyBlbWFpbDogcmVxLmJvZHkuZW1haWwsIGlkOiB1c2VyLmlkIH0sXG4gICAgICAgICAgSldUX1NFQ1JFVFxuICAgICAgICApO1xuICAgICAgICBsb2dMb2dpbih1c2VyLmVtYWlsLCB1c2VyKTtcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoMjAwKS5qc29uKHsgZW1haWw6IHJlcS5ib2R5LmVtYWlsLCB0b2tlbiB9KTtcbiAgICAgIH1cblxuICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGNhbWVsY2FzZVxuICAgICAgY29uc3QgbWZhX2NvZGUgPSBhd2FpdCBVc2VyLnN0YXJ0TWZhUHJvY2VzcyhyZXEuYm9keS5lbWFpbCk7XG4gICAgICBjb25zdCBtZmFFbWFpbENvbnRlbnQgPSBtZmFFbWFpbFRlbXBsYXRlKG1mYV9jb2RlKTtcbiAgICAgIFVzZXIuc2VuZE1haWxXaXRoTm9kZW1haWxlcih7XG4gICAgICAgIGVtYWlsOiByZXEuYm9keS5lbWFpbCxcbiAgICAgICAgc3ViamVjdDogJ0Jyb2dyYW1tZXJzIGF1dGhlbnRpY2F0aW9uIGNvZGUnLFxuICAgICAgICBjb250ZW50OiBtZmFFbWFpbENvbnRlbnQsXG4gICAgICB9KTtcbiAgICAgIGxvZ0xvZ2luKHVzZXIuZW1haWwpO1xuICAgICAgcmV0dXJuIHJlc1xuICAgICAgICAuc3RhdHVzKDIwMClcbiAgICAgICAgLmpzb24oeyBtZXNzYWdlOiAnUGxlYXNlIGNoZWNrIHlvdXIgZW1haWwgZm9yIGF1dGhlbnRpY2F0aW9uIGNvZGUnIH0pO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBsb2dFcnJvcihyZXEsIGVycm9yKTtcbiAgICAgIHJlc1xuICAgICAgICAuc3RhdHVzKDUwMClcbiAgICAgICAgLmpzb24oeyBlcnJvcjogZXJyb3IubWVzc2FnZSwgbWVzc2FnZTogJ0ZhaWxlZCB0byBsb2dpbiBhIHVzZXInIH0pO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBMb2dpbiBhIHVzZXIuXG4gICAqIGdldHRpbmcgdXNlciBpbmZvcm1hdGlvblxuICAgKiBAcGFyYW0ge09iamVjdH0gcmVxXG4gICAqIEBwYXJhbSB7T2JqZWN0fSByZXNcbiAgICogQHJldHVybiB7T2JqZWN0fSByZXNcbiAgICovXG4gIHN0YXRpYyBhc3luYyBnZXRQcm9maWxlKHJlcSwgcmVzKSB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHsgYXZhdGFyLCBjb3Zlcl9pbWFnZSwgZW1haWwsIHVzZXJuYW1lLCByb2xlLCBnZW5kZXIgfSA9IHJlcS51c2VyO1xuICAgICAgdmlld1Byb2ZpbGUocmVxLCByZXEudXNlcik7XG4gICAgICByZXMuc3RhdHVzKDIwMCkuanNvbih7XG4gICAgICAgIGF2YXRhciwgY292ZXJfaW1hZ2UsIGVtYWlsLCB1c2VybmFtZSwgcm9sZSwgZ2VuZGVyLFxuICAgICAgfSk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGxvZ0Vycm9yKHJlcSwgZXJyb3IpO1xuICAgICAgcmVzLnN0YXR1cyg1MDApLmpzb24oeyBlcnJvcjogZXJyb3IubWVzc2FnZSwgbWVzc2FnZTogJ3NlcnZlciBlcnJvcicgfSk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIExvZ2luIGEgdXNlci5cbiAgICogZ2V0dGluZyB1c2VyIGluZm9ybWF0aW9uXG4gICAqIEBwYXJhbSB7T2JqZWN0fSByZXFcbiAgICogQHBhcmFtIHtPYmplY3R9IHJlc1xuICAgKiBAcmV0dXJuIHtPYmplY3R9IHJlc1xuICAgKi9cbiAgc3RhdGljIGFzeW5jIGVkaXRQcm9maWxlKHJlcSwgcmVzKSB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHsgZXJyb3IsIHZhbHVlIH0gPSBhd2FpdCBVc2VyLmVkaXRQcm9maWxlKHJlcS5ib2R5LCByZXEudXNlcik7XG4gICAgICBpZiAoZXJyb3IpIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbihlcnJvcik7XG4gICAgICBjb25zdCB7IGF2YXRhciwgY292ZXJfaW1hZ2UsIGVtYWlsLCB1c2VybmFtZSwgcm9sZSwgZ2VuZGVyIH0gPSB2YWx1ZTtcbiAgICAgIGNvbnN0IHRva2VuID0gSnd0LmdlbmVyYXRlVG9rZW4oeyBlbWFpbCB9KTtcbiAgICAgIGF3YWl0IGRiLnVzZXJzLnVwZGF0ZSh7IGVtYWlsX3Rva2VuOiB0b2tlbiB9LCB7IHdoZXJlOiB7IGVtYWlsIH0gfSk7XG4gICAgICBlZGl0UHJvZmlsZXMocmVxLCB2YWx1ZSk7XG4gICAgICByZXMuc3RhdHVzKDIwMCkuanNvbih7XG4gICAgICAgIGF2YXRhciwgY292ZXJfaW1hZ2UsIGVtYWlsLCB1c2VybmFtZSwgcm9sZSwgZ2VuZGVyLCB0b2tlbiwgZW1haWxfdG9rZW46IHRva2VuLFxuICAgICAgfSk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGxvZ0Vycm9yKHJlcSwgZXJyb3IpO1xuICAgICAgcmVzLnN0YXR1cyg1MDApLmpzb24oeyBlcnJvcjogZXJyb3IubWVzc2FnZSwgbWVzc2FnZTogJ3NlcnZlciBlcnJvcicgfSk7XG4gICAgfVxuICB9XG5cbiAgc3RhdGljIGFzeW5jIGVuYWJsZU1mYShyZXEsIHJlcykge1xuICAgIHRyeSB7XG4gICAgICBhd2FpdCBkYi51c2Vycy51cGRhdGUoXG4gICAgICAgIHsgbWZhX2VuYWJsZWQ6IHRydWUgfSxcbiAgICAgICAgeyB3aGVyZTogeyBlbWFpbDogcmVxLnVzZXIuZW1haWwgfSB9XG4gICAgICApO1xuICAgICAgZW5hYmxlTWZhTG9nKHJlcSk7XG4gICAgICByZXR1cm4gcmVzLnN0YXR1cygyMDApLmpzb24oe1xuICAgICAgICBtZXNzYWdlOiAnTXVsdGktZmFjdG9yIGF1dGhlbnRpY2F0aW9uIGlzIGVuYWJsZWQnLFxuICAgICAgfSk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGxvZ0Vycm9yKHJlcSwgZXJyb3IpO1xuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNTAwKS5qc29uKHtcbiAgICAgICAgZXJyb3I6IGVycm9yLm1lc3NhZ2UsXG4gICAgICAgIG1lc3NhZ2U6ICdGYWlsZWQgdG8gZW5hYmxlIE11bHRpLWZhY3RvciBhdXRoZW50aWNhdGlvbicsXG4gICAgICB9KTtcbiAgICB9XG4gIH1cblxuICBzdGF0aWMgYXN5bmMgZGlzYWJsZU1mYShyZXEsIHJlcykge1xuICAgIHRyeSB7XG4gICAgICBhd2FpdCBkYi51c2Vycy51cGRhdGUoXG4gICAgICAgIHsgbWZhX2VuYWJsZWQ6IGZhbHNlIH0sXG4gICAgICAgIHsgd2hlcmU6IHsgZW1haWw6IHJlcS51c2VyLmVtYWlsIH0gfVxuICAgICAgKTtcbiAgICAgIGRpc2FibGVNZmFMb2cocmVxKTtcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDIwMCkuanNvbih7XG4gICAgICAgIG1lc3NhZ2U6ICdNdWx0aS1mYWN0b3IgYXV0aGVudGljYXRpb24gaXMgZGlzYWJsZWQnLFxuICAgICAgfSk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGxvZ0Vycm9yKHJlcSwgZXJyb3IpO1xuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNTAwKS5qc29uKHtcbiAgICAgICAgZXJyb3I6IGVycm9yLm1lc3NhZ2UsXG4gICAgICAgIG1lc3NhZ2U6ICdGYWlsZWQgdG8gZGlzYWJsZSBNdWx0aS1mYWN0b3IgYXV0aGVudGljYXRpb24nLFxuICAgICAgfSk7XG4gICAgfVxuICB9XG5cbiAgc3RhdGljIGFzeW5jIHZlcmlmeU1mYUNvZGUocmVxLCByZXMpIHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgW2lzVmFsaWQsIG1lc3NhZ2VdID0gYXdhaXQgVXNlci5pc01mYVZhbGlkKFxuICAgICAgICByZXEuYm9keS5lbWFpbCxcbiAgICAgICAgcmVxLmJvZHkubWZhX2NvZGVcbiAgICAgICk7XG5cbiAgICAgIGlmIChpc1ZhbGlkKSB7XG4gICAgICAgIGNvbnN0IHRva2VuID0gand0LnNpZ24oeyBlbWFpbDogcmVxLmJvZHkuZW1haWwgfSwgSldUX1NFQ1JFVCk7XG4gICAgICAgIHZlcmlmaWVkTWZhTG9nKHJlcSwgdG9rZW4pO1xuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cygyMDApLmpzb24oeyBlbWFpbDogcmVxLmJvZHkuZW1haWwsIHRva2VuIH0pO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDMpLmpzb24oeyBtZXNzYWdlIH0pO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBsb2dFcnJvcihyZXEsIGVycm9yKTtcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDUwMCkuanNvbih7XG4gICAgICAgIGVycm9yOiBlcnJvci5tZXNzYWdlLFxuICAgICAgICBtZXNzYWdlOiAnRmFpbGVkIHRvIHZlcmlmeSBhdXRoZW50aWNhdGlvbiBjb2RlJyxcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyBhc3luYyBDcmVhdGVBZG1pbihyZXEsIHJlcykge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBuZXdBZG1pbmVtYWlsID0gcmVxLnBhcmFtcy5lbWFpbDtcbiAgICAgIGNvbnN0IE53dXNlciA9IGF3YWl0IHVzZXJzLmZpbmRPbmUoeyB3aGVyZTogeyBlbWFpbDogbmV3QWRtaW5lbWFpbCB9IH0pO1xuICAgICAgaWYgKCFOd3VzZXIpIHtcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA0KS5qc29uKHtcbiAgICAgICAgICBzdGF0dXNDb2RlOiA0MDQsXG4gICAgICAgICAgbWVzc2FnZTogJ3lvdSBhcmUgdHJ5aW5nIHRvIG1ha2UgYWRtaW4gdXNlciB0aGF0IGRvZXMgbm90IGV4aXN0JyxcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICBOd3VzZXIucm9sZSA9ICdhZG1pbic7XG4gICAgICBhd2FpdCBOd3VzZXIuc2F2ZSgpO1xuICAgICAgY29uc3QgbmV3Tm90aWZpY2F0aW9uID0ge1xuICAgICAgICBtZXNzYWdlOiAneW91IGhhdmUgYmVlbiBhc3NpZ25lZCBuZXcgcm9sZSB3aGljaCBpcyBhZG1pbicsXG4gICAgICAgIHR5cGU6ICd1c2VyIHJvbGUgdXBkYXRlcycsXG4gICAgICB9O1xuICAgICAgY29uc3QgbmV3TiA9IHsgLi4ubmV3Tm90aWZpY2F0aW9uIH07XG4gICAgICBuZXdOLnJlY2VpdmVySWQgPSBOd3VzZXIuaWQ7XG4gICAgICBjb25zdCByZWNlaXZlciA9IHtcbiAgICAgICAgdXNlcm5hbWU6IE53dXNlci51c2VybmFtZSxcbiAgICAgICAgZW1haWw6IE53dXNlci5lbWFpbFxuICAgICAgfTtcbiAgICAgIGNvbnN0IG5vdGlmeUVtYWlsID0gbm90aWZpY2F0aW9uVGVtcGxhdGUyKFxuICAgICAgICByZWNlaXZlci51c2VybmFtZSxcbiAgICAgICAgbmV3Ti5tZXNzYWdlLFxuICAgICAgICBuZXdOLnR5cGUsXG4gICAgICApO1xuICAgICAgc2VuZEVtYWlsKFxuICAgICAgICBlbWFpbENvbmZpZyh7XG4gICAgICAgICAgZW1haWw6IHJlY2VpdmVyLmVtYWlsLFxuICAgICAgICAgIHN1YmplY3Q6ICdOb3RpZmljYXRpb24gISEgJyxcbiAgICAgICAgICBjb250ZW50OiBub3RpZnlFbWFpbCxcbiAgICAgICAgfSlcbiAgICAgICk7XG4gICAgICBhd2FpdCBub3RpZmljYXRpb25zLmNyZWF0ZShuZXdOKTtcbiAgICAgIGNyZWF0ZUFkbWluTG9nKHJlcSwgTnd1c2VyKTtcbiAgICAgIHJlcy5zdGF0dXMoMjAwKS5qc29uKHtcbiAgICAgICAgdXNlcjogTnd1c2VyLFxuICAgICAgICBtZXNzYWdlOiBgdXNlciAke053dXNlci51c2VybmFtZX0gc3VjZXNzZnVsbHkgbWFkZSBhZG1pbmAsXG4gICAgICB9KTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgbG9nRXJyb3IocmVxLCBlcnJvcik7XG4gICAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7ICdFcnJvcjonOiBlcnJvciB9KTtcbiAgICB9XG4gIH1cblxuICBzdGF0aWMgYXN5bmMgc2VuZFJlc2V0UGFzc3dvcmRDb2RlKHJlcSwgcmVzKSB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHsgZW1haWwsIG5ld1Bhc3N3b3JkIH0gPSByZXEuYm9keTtcblxuICAgICAgY29uc3QgdXNlciA9IGF3YWl0IGRiLnVzZXJzLmZpbmRPbmUoeyB3aGVyZTogeyBlbWFpbCB9IH0pO1xuICAgICAgaWYgKCF1c2VyKSB7XG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwNCkuanNvbih7IG1lc3NhZ2U6ICdVc2VyIG5vdCBmb3VuZCcgfSk7XG4gICAgICB9XG5cbiAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBjYW1lbGNhc2VcbiAgICAgIGNvbnN0IHJlc2V0VG9rZW4gPSBqd3Quc2lnbihcbiAgICAgICAgeyBlbWFpbCwgbmV3UGFzc3dvcmQgfSxcbiAgICAgICAgcHJvY2Vzcy5lbnYuUkVTRVRfUEFTU1dPUkRfU0VDUkVULFxuICAgICAgICB7IGV4cGlyZXNJbjogJzFoJyB9XG4gICAgICApO1xuICAgICAgY29uc3QgcmVzZXRQYXNzd29yZENvbnRlbnQgPSBwYXNzd29yZFJlc2V0RW1haWxUZW1wbGF0ZShyZXNldFRva2VuKTtcbiAgICAgIHNlbmRFbWFpbChcbiAgICAgICAgZW1haWxDb25maWcoe1xuICAgICAgICAgIGVtYWlsLFxuICAgICAgICAgIHN1YmplY3Q6ICdCcm9ncmFtbWVycyByZXNldCBwYXNzd29yZCcsXG4gICAgICAgICAgY29udGVudDogcmVzZXRQYXNzd29yZENvbnRlbnQsXG4gICAgICAgIH0pXG4gICAgICApO1xuICAgICAgcmVzZXRQYXNzd29yZExvZyhyZXEpO1xuICAgICAgcmVzLnN0YXR1cygyMDApLmpzb24oeyBtZXNzYWdlOiAnQ2hlY2sgeW91ciBlbWFpbCBmb3IgcmVzZXQgbGluaycgfSk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGxvZ0Vycm9yKHJlcSwgZXJyb3IpO1xuICAgICAgcmVzLnN0YXR1cyg1MDApLmpzb24oeyBtZXNzYWdlOiBlcnJvci5tZXNzYWdlIH0pO1xuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyBhc3luYyB2ZXJpZnlSZXNldFBhc3N3b3JkQ29kZShyZXEsIHJlcykge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCB7IHJlc2V0VG9rZW4gfSA9IHJlcS5wYXJhbXM7XG5cbiAgICAgIGlmIChyZXNldFRva2VuKSB7XG4gICAgICAgIGp3dC52ZXJpZnkoXG4gICAgICAgICAgcmVzZXRUb2tlbixcbiAgICAgICAgICBwcm9jZXNzLmVudi5SRVNFVF9QQVNTV09SRF9TRUNSRVQsXG4gICAgICAgICAgYXN5bmMgKGVyciwgZGVjb2RlZFRva2VuKSA9PiB7XG4gICAgICAgICAgICBpZiAoZXJyKSB7XG4gICAgICAgICAgICAgIHJldHVybiByZXNcbiAgICAgICAgICAgICAgICAuc3RhdHVzKDQwMylcbiAgICAgICAgICAgICAgICAuanNvbih7IG1lc3NhZ2U6ICdJbnZhbGlkIHBhc3N3b3JkIHJlc2V0IHRva2VuJyB9KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgY29uc3QgeyBlbWFpbCwgbmV3UGFzc3dvcmQgfSA9IGRlY29kZWRUb2tlbjtcbiAgICAgICAgICAgIGNvbnN0IHVzZXIgPSBhd2FpdCB1c2Vycy5maW5kT25lKHsgd2hlcmU6IHsgZW1haWwgfSB9KTtcbiAgICAgICAgICAgIGlmICghdXNlcikge1xuICAgICAgICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDQpLmpzb24oJ1VzZXIgbm90IGZvdW5kJyk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHVzZXIudmVyaWZpZWQgPSB0cnVlO1xuICAgICAgICAgICAgdXNlci5wYXNzd29yZCA9IGJjcnlwdC5oYXNoU3luYyhuZXdQYXNzd29yZCwgc2FsdFJvdW5kcyk7XG4gICAgICAgICAgICB1c2VyLnNhdmUoKTtcbiAgICAgICAgICAgIHZlcmlmeVBhc3N3b3JkTG9nKHJlcSwgdXNlcik7XG4gICAgICAgICAgICByZXR1cm4gcmVzXG4gICAgICAgICAgICAgIC5zdGF0dXMoMjAwKVxuICAgICAgICAgICAgICAuanNvbih7IG1lc3NhZ2U6ICdQYXNzd29yZCByZXNldCBzdWNjZXNzZnVsJyB9KTtcbiAgICAgICAgICB9XG4gICAgICAgICk7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGxvZ0Vycm9yKHJlcSwgZXJyb3IpO1xuICAgICAgcmVzLnN0YXR1cyg1MDApLmpzb24oe1xuICAgICAgICBtZXNzYWdlOlxuICAgICAgICAgIGVycm9yLm1lc3NhZ2VcbiAgICAgICAgICB8fCBlcnJvci50b1N0cmluZygpXG4gICAgICAgICAgfHwgJ0ZhaWxlZCB0byB2ZXJpZnkgcGFzc3dvcmQgcmVzZXQgbGluaycsXG4gICAgICB9KTtcbiAgICB9XG4gIH1cblxuICBzdGF0aWMgYXN5bmMgY2hhbmdlUGFzc3dvcmQocmVxLCByZXMpIHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgeyBvbGRQYXNzd29yZCwgbmV3UGFzc3dvcmQgfSA9IHJlcS5ib2R5O1xuXG4gICAgICAvLyBjaGVjayBpZiB0aGUgb2xkIHBhc3N3b3JkIG1hdGNoZXMgdGhlIG9uZSBpbiB0aGUgZGF0YWJhc2VcbiAgICAgIGNvbnN0IGlzUGFzc3dvcmRWYWxpZCA9IGF3YWl0IGJjcnlwdC5jb21wYXJlKFxuICAgICAgICBvbGRQYXNzd29yZCxcbiAgICAgICAgcmVxLnVzZXIucGFzc3dvcmRcbiAgICAgICk7XG4gICAgICBpZiAoIWlzUGFzc3dvcmRWYWxpZCkge1xuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDEpLmpzb24oeyBtZXNzYWdlOiAnSW5jb3JyZWN0IG9sZCBwYXNzd29yZCcgfSk7XG4gICAgICB9XG5cbiAgICAgIC8vIHZhbGlkYXRlIHRoZSBuZXcgcGFzc3dvcmRcbiAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBvcGVyYXRvci1saW5lYnJlYWtcbiAgICAgIGNvbnN0IHBhc3N3b3JkUmVnZXggPVxuICAgICAgICAvXig/PS4qXFxkKSg/PS4qW2Etel0pKD89LipbQS1aXSkoPz0uKlshQCMkJV4mKigpXytcXC09W1xcXXt9Oyc6XCJcXFxcfCwuPD4vP10pLns4LH0kLztcbiAgICAgIGlmICghcGFzc3dvcmRSZWdleC50ZXN0KG5ld1Bhc3N3b3JkKSkge1xuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oe1xuICAgICAgICAgIG1lc3NhZ2U6XG4gICAgICAgICAgICAnTmV3IHBhc3N3b3JkIG11c3QgYmUgYXQgbGVhc3QgOCBjaGFyYWN0ZXJzIGxvbmcgYW5kIGNvbnRhaW4gYXQgbGVhc3Qgb25lIHVwcGVyY2FzZSBsZXR0ZXIsIG9uZSBsb3dlcmNhc2UgbGV0dGVyLCBvbmUgbnVtYmVyLCBhbmQgb25lIHN5bWJvbC4nLFxuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgLy8gaGFzaCB0aGUgbmV3IHBhc3N3b3JkIGFuZCB1cGRhdGUgdGhlIGRhdGFiYXNlXG4gICAgICBjb25zdCBoYXNoZWRQYXNzd29yZCA9IGF3YWl0IGJjcnlwdC5oYXNoKG5ld1Bhc3N3b3JkLCBzYWx0Um91bmRzKTtcbiAgICAgIHJlcS51c2VyLnBhc3N3b3JkID0gaGFzaGVkUGFzc3dvcmQ7XG4gICAgICByZXEudXNlci5sYXN0VGltZVBhc3N3b3JkVXBkYXRlZCA9IG1vbWVudCgpO1xuICAgICAgcmVxLnVzZXIubXVzdFVwZGF0ZVBhc3N3b3JkID0gZmFsc2U7XG4gICAgICBhd2FpdCByZXEudXNlci5zYXZlKCk7XG4gICAgICAvLyBFbWl0IGV2ZW50IHRvIG5vdGlmeSBwYXNzd29yZCB1cGRhdGVcbiAgICAgIGV2ZW50RW1pdHRlci5lbWl0KCdwYXNzd29yZFVwZGF0ZWQnLCByZXEudXNlcik7XG4gICAgICBjaGFuZ2VQYXNzd29yZExvZyhyZXEsIHJlcS51c2VyKTtcbiAgICAgIHJlcy5zdGF0dXMoMjAwKS5qc29uKHsgbWVzc2FnZTogJ1Bhc3N3b3JkIHVwZGF0ZWQgc3VjY2Vzc2Z1bGx5JyB9KTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgbG9nRXJyb3IocmVxLCBlcnJvcik7XG4gICAgICByZXNcbiAgICAgICAgLnN0YXR1cyg1MDApXG4gICAgICAgIC5qc29uKHsgZXJyb3I6IGVycm9yLm1lc3NhZ2UsIG1lc3NhZ2U6ICdGYWlsZWQgdG8gY2hhbmdlIHBhc3N3b3JkJyB9KTtcbiAgICB9XG4gIH1cbiAgLy8gYWRtaW4gRGlzYWJsZSB1c2VyIGR1ZSB0byBzb21lIHJlYXNvbnMyXG5cbiAgc3RhdGljIGFzeW5jIGRpc2FibGVVc2VyKHJlcSwgcmVzKSB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHVzZXIgPSBhd2FpdCB1c2Vycy5maW5kT25lKHsgd2hlcmU6IHsgaWQ6IHJlcS5wYXJhbXMudXNlcklkIH0gfSk7XG5cbiAgICAgIGlmICghdXNlcikge1xuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDQpLmpzb24oeyBlcnJvcjogJ1VzZXIgbm90IGZvdW5kJyB9KTtcbiAgICAgIH1cbiAgICAgIGlmICh1c2VyLmRpc2FibGVkVXNlcikge1xuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBtZXNzYWdlOiAndXNlciBpcyBhbHJlYWR5IGRpc2FibGVkJyB9KTtcbiAgICAgIH1cbiAgICAgIHVzZXIuZGlzYWJsZWRVc2VyID0gdHJ1ZTtcbiAgICAgIHVzZXIuZGlzYWJsZWRSZWFzb24gPSByZXEuYm9keS5yZWFzb247XG5cbiAgICAgIGF3YWl0IHVzZXIuc2F2ZSgpO1xuXG4gICAgICBzZW5kRW1haWwoXG4gICAgICAgIGVtYWlsQ29uZmlnKHtcbiAgICAgICAgICBlbWFpbDogdXNlci5lbWFpbCxcbiAgICAgICAgICBzdWJqZWN0OiAnWW91ciBhY2NvdW50IGhhcyBiZWVuIGRpc2FibGVkJyxcbiAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tdW5kZWZcbiAgICAgICAgICBjb250ZW50OiBkaXNhYmxlRW1haWxUZW1wbGF0ZSh1c2VyLnVzZXJuYW1lLCB1c2VyLmRpc2FibGVkUmVhc29uKSxcbiAgICAgICAgfSlcbiAgICAgICk7XG5cbiAgICAgIHJlcy5zdGF0dXMoMjAwKS5qc29uKHsgbWVzc2FnZTogJ1VzZXIgYWNjb3VudCBkaXNhYmxlZCBzdWNjZXNzZnVsbHknIH0pO1xuICAgICAgZGlzYWJsZUFjY291bnRMb2cocmVxLCB1c2VyKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgbG9nRXJyb3IocmVxLCBlcnJvcik7XG4gICAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7IG1lc3NhZ2U6IGVycm9yLm1lc3NhZ2UgfSk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gKiBMb2dvdXQgYSB1c2VyIGJ5IGludmFsaWRhdGluZyB0aGUgSldUIHRva2VuLlxuICogQHBhcmFtIHtPYmplY3R9IHJlcSB2YWxpYWJsZVxuICogQHBhcmFtIHtPYmplY3R9IHJlcyB2YWxpYWJsZVxuICogQHJldHVybiB7T2JqZWN0fSByZXNcbiAqL1xuICBzdGF0aWMgYXN5bmMgbG9nb3V0KHJlcSwgcmVzKSB7XG4gICAgdHJ5IHtcbiAgICAgIGF3YWl0IFVzZXIubG9nb3V0KHJlcS5oZWFkZXJzLmF1dGhvcml6YXRpb24pO1xuICAgICAgbG9nTG9nb3V0KHJlcSk7XG4gICAgICByZXMuc3RhdHVzKDIwMCkuanNvbih7IG1lc3NhZ2U6ICdZb3UgbG9nZ2VkIG91dCBzdWNjZXNzZnVsbHknIH0pO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBsb2dFcnJvcihyZXEsIGVycm9yKTtcbiAgICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgbWVzc2FnZTogZXJyb3IubWVzc2FnZSB9KTtcbiAgICB9XG4gIH1cblxuICBzdGF0aWMgYXN5bmMgZ29vZ2xlQXV0aEhhbmRsZXIocmVxLCByZXMpIHtcbiAgICBjb25zdCB7IHZhbHVlIH0gPSByZXEudXNlci5lbWFpbHNbMF07XG4gICAgY29uc3QgeyBmYW1pbHlOYW1lIH0gPSByZXEudXNlci5uYW1lO1xuICAgIGNvbnN0IG5ld1VzZXIgPSB7XG4gICAgICB1c2VybmFtZTogZmFtaWx5TmFtZSxcbiAgICAgIGVtYWlsOiB2YWx1ZSxcbiAgICAgIGF2YXRhcjogcmVxLnVzZXIucGhvdG9zWzBdLnZhbHVlLFxuICAgICAgdmVyaWZpZWQ6IHRydWUsXG4gICAgICBwYXNzd29yZDogJzEyMzQ1J1xuICAgIH07XG4gICAgY29uc3QgeyBpZCwgZW1haWwgfSA9IGF3YWl0IFVzZXIucmVnaXN0ZXJHb29nbGUobmV3VXNlcik7XG4gICAgY29uc3QgdXNlclRva2VuID0gSnd0LmdlbmVyYXRlVG9rZW4oe1xuICAgICAgaWQ6IGlkLFxuICAgICAgZW1haWw6IGVtYWlsLFxuICAgIH0sICcxaCcpO1xuICAgIHJlZGlyZWN0R29vZ2xlKGVtYWlsKTtcbiAgICByZXR1cm4gcmVzLnJlZGlyZWN0KGAvdXNlcnMvcmVkaXJlY3Q/a2V5PSR7dXNlclRva2VufWApO1xuICB9XG5cbiAgc3RhdGljIGFzeW5jIHVwZGF0ZUF2YXRhcihyZXEsIHJlcykge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCB7IGVycm9yLCB2YWx1ZSB9ID0gYXdhaXQgVXNlci51cGRhdGVBdmF0YXIocmVxLnVzZXIsIHJlcS5maWxlKTtcbiAgICAgIGlmIChlcnJvcikgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKGVycm9yKTtcbiAgICAgIGNvbnN0IHsgYXZhdGFyLCBjb3Zlcl9pbWFnZSwgZW1haWwsIHVzZXJuYW1lLCByb2xlLCBnZW5kZXIgfSA9IHZhbHVlO1xuICAgICAgdXBkYXRlQXZhdGFyTG9nKHJlcSwgdmFsdWUpO1xuICAgICAgcmVzLnN0YXR1cygyMDApLmpzb24oe1xuICAgICAgICBhdmF0YXIsIGNvdmVyX2ltYWdlLCBlbWFpbCwgdXNlcm5hbWUsIHJvbGUsIGdlbmRlcixcbiAgICAgIH0pO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBsb2dFcnJvcihyZXEsIGVycm9yKTtcbiAgICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgbWVzc2FnZTogZXJyb3IubWVzc2FnZSB9KTtcbiAgICB9XG4gIH1cblxuICBzdGF0aWMgYXN5bmMgdXBkYXRlQ292ZXJJbWFnZShyZXEsIHJlcykge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCB7IGVycm9yLCB2YWx1ZSB9ID0gYXdhaXQgVXNlci51cGRhdGVDb3ZlckltYWdlKHJlcS51c2VyLCByZXEuZmlsZSk7XG4gICAgICBpZiAoZXJyb3IpIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbihlcnJvcik7XG4gICAgICBjb25zdCB7IGF2YXRhciwgY292ZXJfaW1hZ2UsIGVtYWlsLCB1c2VybmFtZSwgcm9sZSwgZ2VuZGVyIH0gPSB2YWx1ZTtcbiAgICAgIHVwZGF0ZUltYWdlTG9nKHJlcSwgdmFsdWUpO1xuICAgICAgcmVzLnN0YXR1cygyMDApLmpzb24oe1xuICAgICAgICBhdmF0YXIsIGNvdmVyX2ltYWdlLCBlbWFpbCwgdXNlcm5hbWUsIHJvbGUsIGdlbmRlcixcbiAgICAgIH0pO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBsb2dFcnJvcihyZXEsIGVycm9yKTtcbiAgICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgbWVzc2FnZTogZXJyb3IubWVzc2FnZSB9KTtcbiAgICB9XG4gIH1cbn1cbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUlBLElBQUFBLE9B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","map":{"version":3,"names":["_bcrypt","_interopRequireDefault","require","_jsonwebtoken","_dotenv","_user","_models","_interopRequireWildcard","_moment","_eventEmitter","_jwt","_emailConfig","_mailTemplate","_mail","_signup","_getRequireWildcardCache","nodeInterop","WeakMap","cacheBabelInterop","cacheNodeInterop","obj","__esModule","default","cache","has","get","newObj","hasPropertyDescriptor","Object","defineProperty","getOwnPropertyDescriptor","key","prototype","hasOwnProperty","call","desc","set","JWT_SECRET","process","env","saltRounds","Number","SALTROUNDS","dotenv","config","Users","signup","req","res","data","User","register","body","signupToken","jwt","sign","email","userToken","Jwt","generateToken","email_token","save","verificationEmail","verifyEmailTemplate","sendEmail","emailConfig","subject","content","logSignup","logEmailSent","status","json","message","user","e","logError","error","verifyEmail","emailToken","params","token","verifyUser","findByEmailToken","verified","logVerifyEmail","send","setRole","role","users","findOne","where","newNotification","type","newN","receiverId","id","receiver","username","notifyEmail","notificationTemplate2","notifications","create","logSetRole","login","db","isPasswordValid","bcrypt","compareSync","password","disabledUser","mfa_enabled","logLogin","mfa_code","startMfaProcess","mfaEmailContent","mfaEmailTemplate","sendMailWithNodemailer","getProfile","avatar","cover_image","gender","viewProfile","editProfile","value","update","editProfiles","enableMfa","enableMfaLog","disableMfa","disableMfaLog","verifyMfaCode","isValid","isMfaValid","verifiedMfaLog","CreateAdmin","newAdminemail","Nwuser","statusCode","createAdminLog","sendResetPasswordCode","newPassword","resetToken","RESET_PASSWORD_SECRET","expiresIn","resetPasswordContent","passwordResetEmailTemplate","resetPasswordLog","verifyResetPasswordCode","verify","err","decodedToken","hashSync","verifyPasswordLog","toString","changePassword","oldPassword","compare","passwordRegex","test","hashedPassword","hash","lastTimePasswordUpdated","moment","mustUpdatePassword","eventEmitter","emit","changePasswordLog","disableUser","userId","disabledReason","reason","disableEmailTemplate","disableAccountLog","logout","headers","authorization","logLogout","googleAuthHandler","emails","familyName","name","newUser","photos","registerGoogle","redirectGoogle","redirect","updateAvatar","file","updateAvatarLog","updateCoverImage","updateImageLog","exports","module"],"sourceRoot":"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/controllers/","sources":["users.controllers.js"],"sourcesContent":["/* eslint-disable max-len */\n/* eslint-disable object-shorthand */\n/* eslint-disable camelcase */\n/* eslint-disable object-curly-newline */\nimport bcrypt from 'bcrypt';\n// eslint-disable-next-line import/no-unresolved, import/no-extraneous-dependencies\nimport jwt from 'jsonwebtoken';\nimport dotenv from 'dotenv';\n// eslint-disable-next-line import/no-named-as-default, import/no-named-as-default-member\nimport User from '../services/user.services';\n// eslint-disable-next-line import/no-duplicates\nimport db from '../database/models';\n// eslint-disable-next-line import/order, import/no-extraneous-dependencies\nimport moment from 'moment';\nimport eventEmitter from '../helpers/eventEmitter';\n\n// eslint-disable-next-line import/named, import/no-duplicates\nimport { users, notifications } from '../database/models';\n/* eslint-disable require-jsdoc */\nimport { Jwt } from '../helpers/jwt';\nimport { emailConfig } from '../helpers/emailConfig';\nimport {\n  verifyEmailTemplate,\n  mfaEmailTemplate,\n  passwordResetEmailTemplate,\n  disableEmailTemplate,\n  notificationTemplate2\n} from '../helpers/mailTemplate';\nimport { sendEmail } from '../helpers/mail';\n\nimport { logSignup, redirectGoogle, updateAvatarLog, logError, logSetRole, logEmailSent, updateImageLog, logLogout, logVerifyEmail, logLogin, viewProfile, editProfiles, enableMfaLog, disableMfaLog, verifiedMfaLog, createAdminLog, resetPasswordLog, verifyPasswordLog, changePasswordLog, disableAccountLog } from '../loggers/signup.logger';\n\n// eslint-disable-next-line operator-linebreak\nconst JWT_SECRET = process.env.JWT_SECRET || 'secret';\nconst saltRounds = Number(process.env.SALTROUNDS) || 10;\n\ndotenv.config();\n/**\n * user model class\n */\nexport default class Users {\n  /**\n   * registering new user.\n   * getting user information\n   * @param {Object} req valiable\n   * @param {Object} res valiable\n   * @return {Object} res\n   */\n  static async signup(req, res) {\n    try {\n      const { data } = await User.register(req.body);\n      const signupToken = jwt.sign(\n        { email: data.email },\n        process.env.JWT_SECRET\n      );\n      const userToken = Jwt.generateToken({ data }, '1h');\n      if (userToken) {\n        data.email_token = userToken;\n      }\n      await data.save();\n      const verificationEmail = verifyEmailTemplate(userToken);\n      sendEmail(\n        emailConfig({\n          email: data.email,\n          subject: 'Brogrammers email verification',\n          content: verificationEmail,\n        })\n      );\n      logSignup(req);\n      logEmailSent(data.email);\n      return res.status(201).json({\n        message: 'Check your email to verify your account',\n        user: data,\n        signupToken,\n      });\n    } catch (e) {\n      logError(req, e);\n      return res.status(500).json({\n        error: e.message,\n        message: 'Failed to register a new user',\n      });\n    }\n  }\n\n  static async verifyEmail(req, res) {\n    try {\n      const emailToken = req.params.token;\n      Users.verifyUser(emailToken, res);\n    } catch (error) {\n      logError(req, error);\n      res.status(500).json({ 'Error:': error });\n    }\n  }\n\n  static async verifyUser(emailToken, res) {\n    const user = await User.findByEmailToken(emailToken);\n    if (!user) {\n      return res.status(404).json({\n        message: 'User not found',\n      });\n    }\n    user.email_token = null;\n    user.verified = true;\n    await user.save();\n    logVerifyEmail(user.email);\n    res.status(200).send({\n      message: 'Your account has been verified successfully!',\n      verified: true,\n    });\n  }\n\n  static async setRole(req, res) {\n    try {\n      const { role } = req.body;\n      const { email } = req.params;\n      await User.setRole(role, email);\n      const user = await users.findOne({ where: { email } });\n      const newNotification = {\n        message: `you have been assigned new role which is ${role}`,\n        type: 'user role updates',\n      };\n      const newN = { ...newNotification };\n      newN.receiverId = user.id;\n      const receiver = {\n        username: user.username,\n        email: user.email\n      };\n      const notifyEmail = notificationTemplate2(\n        receiver.username,\n        newN.message,\n        newN.type\n      );\n      sendEmail(\n        emailConfig({\n          email: receiver.email,\n          subject: 'Notification !! role updates',\n          content: notifyEmail,\n        })\n      );\n      await notifications.create(newN);\n      logSetRole(req, role);\n      return res.status(200).json({\n        status: 200,\n        message: 'Role assigned to the user successfully',\n      });\n    } catch (error) {\n      logError(req, error);\n      return res.status(500).json({\n        status: 500,\n        message: error.message,\n      });\n    }\n  }\n\n  /**\n   * Login a user.\n   * getting user information\n   * @param {Object} req valiable\n   * @param {Object} res valiable\n   * @return {Object} res\n   */\n  static async login(req, res) {\n    try {\n      const user = await db.users.findOne({ where: { email: req.body.email } });\n\n      if (!user) {\n        return res.status(401).json({ message: 'Incorrect email or password' });\n      }\n\n      const isPasswordValid = bcrypt.compareSync(\n        req.body.password,\n        user.password\n      );\n      if (!isPasswordValid) {\n        return res.status(401).json({ message: 'Incorrect email or password' });\n      }\n\n      if (user.verified === false) {\n        return res.status(403).json({ message: 'Email is not verified' });\n      }\n      if (user.disabledUser === true) {\n        return res.status(403).json({ message: 'Your account is disabled!' });\n      }\n\n      if (user.mfa_enabled === false) {\n        const token = jwt.sign(\n          { email: req.body.email, id: user.id },\n          JWT_SECRET\n        );\n        logLogin(user.email, user);\n        return res.status(200).json({ email: req.body.email, token });\n      }\n\n      // eslint-disable-next-line camelcase\n      const mfa_code = await User.startMfaProcess(req.body.email);\n      const mfaEmailContent = mfaEmailTemplate(mfa_code);\n      User.sendMailWithNodemailer({\n        email: req.body.email,\n        subject: 'Brogrammers authentication code',\n        content: mfaEmailContent,\n      });\n      logLogin(user.email);\n      return res\n        .status(200)\n        .json({ message: 'Please check your email for authentication code' });\n    } catch (error) {\n      logError(req, error);\n      res\n        .status(500)\n        .json({ error: error.message, message: 'Failed to login a user' });\n    }\n  }\n\n  /**\n   * Login a user.\n   * getting user information\n   * @param {Object} req\n   * @param {Object} res\n   * @return {Object} res\n   */\n  static async getProfile(req, res) {\n    try {\n      const { avatar, cover_image, email, username, role, gender } = req.user;\n      viewProfile(req, req.user);\n      res.status(200).json({\n        avatar, cover_image, email, username, role, gender,\n      });\n    } catch (error) {\n      logError(req, error);\n      res.status(500).json({ error: error.message, message: 'server error' });\n    }\n  }\n\n  /**\n   * Login a user.\n   * getting user information\n   * @param {Object} req\n   * @param {Object} res\n   * @return {Object} res\n   */\n  static async editProfile(req, res) {\n    try {\n      const { error, value } = await User.editProfile(req.body, req.user);\n      if (error) return res.status(400).json(error);\n      const { avatar, cover_image, email, username, role, gender } = value;\n      const token = Jwt.generateToken({ email });\n      await db.users.update({ email_token: token }, { where: { email } });\n      editProfiles(req, value);\n      res.status(200).json({\n        avatar, cover_image, email, username, role, gender, token, email_token: token,\n      });\n    } catch (error) {\n      logError(req, error);\n      res.status(500).json({ error: error.message, message: 'server error' });\n    }\n  }\n\n  static async enableMfa(req, res) {\n    try {\n      await db.users.update(\n        { mfa_enabled: true },\n        { where: { email: req.user.email } }\n      );\n      enableMfaLog(req);\n      return res.status(200).json({\n        message: 'Multi-factor authentication is enabled',\n      });\n    } catch (error) {\n      logError(req, error);\n      return res.status(500).json({\n        error: error.message,\n        message: 'Failed to enable Multi-factor authentication',\n      });\n    }\n  }\n\n  static async disableMfa(req, res) {\n    try {\n      await db.users.update(\n        { mfa_enabled: false },\n        { where: { email: req.user.email } }\n      );\n      disableMfaLog(req);\n      return res.status(200).json({\n        message: 'Multi-factor authentication is disabled',\n      });\n    } catch (error) {\n      logError(req, error);\n      return res.status(500).json({\n        error: error.message,\n        message: 'Failed to disable Multi-factor authentication',\n      });\n    }\n  }\n\n  static async verifyMfaCode(req, res) {\n    try {\n      const [isValid, message] = await User.isMfaValid(\n        req.body.email,\n        req.body.mfa_code\n      );\n\n      if (isValid) {\n        const token = jwt.sign({ email: req.body.email }, JWT_SECRET);\n        verifiedMfaLog(req, token);\n        return res.status(200).json({ email: req.body.email, token });\n      }\n\n      return res.status(403).json({ message });\n    } catch (error) {\n      logError(req, error);\n      return res.status(500).json({\n        error: error.message,\n        message: 'Failed to verify authentication code',\n      });\n    }\n  }\n\n  static async CreateAdmin(req, res) {\n    try {\n      const newAdminemail = req.params.email;\n      const Nwuser = await users.findOne({ where: { email: newAdminemail } });\n      if (!Nwuser) {\n        return res.status(404).json({\n          statusCode: 404,\n          message: 'you are trying to make admin user that does not exist',\n        });\n      }\n      Nwuser.role = 'admin';\n      await Nwuser.save();\n      const newNotification = {\n        message: 'you have been assigned new role which is admin',\n        type: 'user role updates',\n      };\n      const newN = { ...newNotification };\n      newN.receiverId = Nwuser.id;\n      const receiver = {\n        username: Nwuser.username,\n        email: Nwuser.email\n      };\n      const notifyEmail = notificationTemplate2(\n        receiver.username,\n        newN.message,\n        newN.type,\n      );\n      sendEmail(\n        emailConfig({\n          email: receiver.email,\n          subject: 'Notification !! ',\n          content: notifyEmail,\n        })\n      );\n      await notifications.create(newN);\n      createAdminLog(req, Nwuser);\n      res.status(200).json({\n        user: Nwuser,\n        message: `user ${Nwuser.username} sucessfully made admin`,\n      });\n    } catch (error) {\n      logError(req, error);\n      res.status(500).json({ 'Error:': error });\n    }\n  }\n\n  static async sendResetPasswordCode(req, res) {\n    try {\n      const { email, newPassword } = req.body;\n\n      const user = await db.users.findOne({ where: { email } });\n      if (!user) {\n        return res.status(404).json({ message: 'User not found' });\n      }\n\n      // eslint-disable-next-line camelcase\n      const resetToken = jwt.sign(\n        { email, newPassword },\n        process.env.RESET_PASSWORD_SECRET,\n        { expiresIn: '1h' }\n      );\n      const resetPasswordContent = passwordResetEmailTemplate(resetToken);\n      sendEmail(\n        emailConfig({\n          email,\n          subject: 'Brogrammers reset password',\n          content: resetPasswordContent,\n        })\n      );\n      resetPasswordLog(req);\n      res.status(200).json({ message: 'Check your email for reset link' });\n    } catch (error) {\n      logError(req, error);\n      res.status(500).json({ message: error.message });\n    }\n  }\n\n  static async verifyResetPasswordCode(req, res) {\n    try {\n      const { resetToken } = req.params;\n\n      if (resetToken) {\n        jwt.verify(\n          resetToken,\n          process.env.RESET_PASSWORD_SECRET,\n          async (err, decodedToken) => {\n            if (err) {\n              return res\n                .status(403)\n                .json({ message: 'Invalid password reset token' });\n            }\n\n            const { email, newPassword } = decodedToken;\n            const user = await users.findOne({ where: { email } });\n            if (!user) {\n              return res.status(404).json('User not found');\n            }\n\n            user.verified = true;\n            user.password = bcrypt.hashSync(newPassword, saltRounds);\n            user.save();\n            verifyPasswordLog(req, user);\n            return res\n              .status(200)\n              .json({ message: 'Password reset successful' });\n          }\n        );\n      }\n    } catch (error) {\n      logError(req, error);\n      res.status(500).json({\n        message:\n          error.message\n          || error.toString()\n          || 'Failed to verify password reset link',\n      });\n    }\n  }\n\n  static async changePassword(req, res) {\n    try {\n      const { oldPassword, newPassword } = req.body;\n\n      // check if the old password matches the one in the database\n      const isPasswordValid = await bcrypt.compare(\n        oldPassword,\n        req.user.password\n      );\n      if (!isPasswordValid) {\n        return res.status(401).json({ message: 'Incorrect old password' });\n      }\n\n      // validate the new password\n      // eslint-disable-next-line operator-linebreak\n      const passwordRegex =\n        /^(?=.*\\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[!@#$%^&*()_+\\-=[\\]{};':\"\\\\|,.<>/?]).{8,}$/;\n      if (!passwordRegex.test(newPassword)) {\n        return res.status(400).json({\n          message:\n            'New password must be at least 8 characters long and contain at least one uppercase letter, one lowercase letter, one number, and one symbol.',\n        });\n      }\n\n      // hash the new password and update the database\n      const hashedPassword = await bcrypt.hash(newPassword, saltRounds);\n      req.user.password = hashedPassword;\n      req.user.lastTimePasswordUpdated = moment();\n      req.user.mustUpdatePassword = false;\n      await req.user.save();\n      // Emit event to notify password update\n      eventEmitter.emit('passwordUpdated', req.user);\n      changePasswordLog(req, req.user);\n      res.status(200).json({ message: 'Password updated successfully' });\n    } catch (error) {\n      logError(req, error);\n      res\n        .status(500)\n        .json({ error: error.message, message: 'Failed to change password' });\n    }\n  }\n  // admin Disable user due to some reasons2\n\n  static async disableUser(req, res) {\n    try {\n      const user = await users.findOne({ where: { id: req.params.userId } });\n\n      if (!user) {\n        return res.status(404).json({ error: 'User not found' });\n      }\n      if (user.disabledUser) {\n        return res.status(400).json({ message: 'user is already disabled' });\n      }\n      user.disabledUser = true;\n      user.disabledReason = req.body.reason;\n\n      await user.save();\n\n      sendEmail(\n        emailConfig({\n          email: user.email,\n          subject: 'Your account has been disabled',\n          // eslint-disable-next-line no-undef\n          content: disableEmailTemplate(user.username, user.disabledReason),\n        })\n      );\n\n      res.status(200).json({ message: 'User account disabled successfully' });\n      disableAccountLog(req, user);\n    } catch (error) {\n      logError(req, error);\n      res.status(500).json({ message: error.message });\n    }\n  }\n\n  /**\n * Logout a user by invalidating the JWT token.\n * @param {Object} req valiable\n * @param {Object} res valiable\n * @return {Object} res\n */\n  static async logout(req, res) {\n    try {\n      await User.logout(req.headers.authorization);\n      logLogout(req);\n      res.status(200).json({ message: 'You logged out successfully' });\n    } catch (error) {\n      logError(req, error);\n      res.status(500).json({ message: error.message });\n    }\n  }\n\n  static async googleAuthHandler(req, res) {\n    const { value } = req.user.emails[0];\n    const { familyName } = req.user.name;\n    const newUser = {\n      username: familyName,\n      email: value,\n      avatar: req.user.photos[0].value,\n      verified: true,\n      password: '12345'\n    };\n    const { id, email } = await User.registerGoogle(newUser);\n    const userToken = Jwt.generateToken({\n      id: id,\n      email: email,\n    }, '1h');\n    redirectGoogle(email);\n    return res.redirect(`/users/redirect?key=${userToken}`);\n  }\n\n  static async updateAvatar(req, res) {\n    try {\n      const { error, value } = await User.updateAvatar(req.user, req.file);\n      if (error) return res.status(400).json(error);\n      const { avatar, cover_image, email, username, role, gender } = value;\n      updateAvatarLog(req, value);\n      res.status(200).json({\n        avatar, cover_image, email, username, role, gender,\n      });\n    } catch (error) {\n      logError(req, error);\n      res.status(500).json({ message: error.message });\n    }\n  }\n\n  static async updateCoverImage(req, res) {\n    try {\n      const { error, value } = await User.updateCoverImage(req.user, req.file);\n      if (error) return res.status(400).json(error);\n      const { avatar, cover_image, email, username, role, gender } = value;\n      updateImageLog(req, value);\n      res.status(200).json({\n        avatar, cover_image, email, username, role, gender,\n      });\n    } catch (error) {\n      logError(req, error);\n      res.status(500).json({ message: error.message });\n    }\n  }\n}\n"],"mappings":"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"}},"mtime":1682148437923},"{\"assumptions\":{},\"sourceRoot\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/services/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"filename\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/services/user.services.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/node_modules/babel-plugin-add-module-exports/lib/index.js\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-runtime\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"regenerator\":true},\"externalDependencies\":[]},{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.21.0:development":{"value":{"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _bcrypt = _interopRequireDefault(require(\"bcrypt\"));\nvar _nodemailer = _interopRequireDefault(require(\"nodemailer\"));\nvar _models = require(\"../database/models\");\nvar _cloud = _interopRequireDefault(require(\"../helpers/cloud.upload\"));\n/* eslint-disable object-curly-newline */\n/* eslint-disable camelcase */\n/* eslint-disable no-unused-vars */\n/* eslint-disable object-shorthand */\n/* eslint-disable require-jsdoc */\n\n// eslint-disable-next-line import/no-extraneous-dependencies, import/no-unresolved\n\n// eslint-disable-next-line import/named\n\nconst saltRounds = Number(process.env.SALTROUNDS) || 10;\n\n/**\n * class for all user services\n */\nclass User {\n  /**\n   * function to register user\n   * @param {Object} data the information for user to be created\n   * @returns {data} for the created user\n   */\n  static async register(data) {\n    data.password = await _bcrypt.default.hash(data.password, saltRounds);\n    const {\n      username,\n      email,\n      password,\n      gender,\n      email_verified\n    } = data;\n    const user = await _models.users.create({\n      username,\n      email,\n      password,\n      gender,\n      email_verified\n    });\n    return {\n      data: user\n    };\n  }\n  static async registerGoogle(data) {\n    // eslint-disable-next-line no-return-await\n    return await _models.users.create(data);\n  }\n  static async startMfaProcess(email) {\n    const user = await _models.users.findOne({\n      where: {\n        email\n      }\n    });\n    user.mfa_code = Math.floor(Math.random() * 100000 + 10000);\n    const timeout = (process.env.MFA_MINS || 3) * 60 * 1000;\n    user.mfa_timeout = new Date(Date.now() + timeout);\n    await user.save();\n    return user.mfa_code;\n  }\n  static async isMfaValid(email, mfa_code) {\n    const user = await _models.users.findOne({\n      where: {\n        email\n      }\n    });\n    if (user.mfa_code !== mfa_code) {\n      return [false, 'Invalid authentication code'];\n    }\n    if (user.mfa_timeout < new Date()) {\n      return [false, 'Authentication code expired'];\n    }\n\n    // Force mfa code to expire after usage\n    user.mfa_timeout = new Date(Date.now() - 10 * 60 * 1000);\n    await user.save();\n    return [true];\n  }\n  static async findByEmailToken(emailToken) {\n    const user = await _models.users.findOne({\n      where: {\n        email_token: emailToken\n      }\n    });\n    return user;\n  }\n  static async updateUser(fields, id) {\n    // eslint-disable-next-line no-return-await\n    return await _models.users.update({\n      ...fields\n    }, {\n      where: {\n        id: id\n      }\n    });\n  }\n  static async editProfile(data, user) {\n    const {\n      email\n    } = data;\n    if (email && email !== null && email !== user.email) {\n      const exist = await _models.users.findOne({\n        where: {\n          email\n        }\n      });\n      if (exist && exist !== null) return {\n        error: 'email exists'\n      };\n    }\n    const {\n      avatar,\n      cover_image,\n      role,\n      password,\n      id,\n      verified,\n      // unchangeble fields in here\n      ...fields // changeble fields\n    } = data;\n    await this.updateUser(data, user.id);\n    const newUsers = {\n      ...user.dataValues,\n      ...data\n    };\n    return {\n      value: newUsers\n    };\n  }\n  static async sendMailWithNodemailer({\n    email,\n    subject,\n    content\n  }) {\n    const transporter = _nodemailer.default.createTransport({\n      service: 'gmail',\n      auth: {\n        user: process.env.APP_EMAIL,\n        pass: process.env.APP_EMAIL_PASSWORD\n      }\n    });\n    const mailOptions = {\n      from: process.env.APP_EMAIL,\n      to: email,\n      subject,\n      html: content\n    };\n    transporter.sendMail(mailOptions, (err, info) => {\n      if (err) return err;\n    });\n  }\n  static async setRole(role, email) {\n    await _models.users.update({\n      role\n    }, {\n      where: {\n        email\n      }\n    });\n  }\n  static async findById(id) {\n    const user = await _models.users.findOne({\n      where: {\n        id: `${id}`\n      }\n    });\n    return user;\n  }\n  static async logout(data) {\n    const token = data.split(' ')[1];\n    await _models.Blockedtoken.create({\n      token\n    });\n  }\n  static async getAllUsers() {\n    const allUsers = await _models.users.findAll();\n    return allUsers;\n  }\n  static async registerAdmin(data) {\n    data.password = await _bcrypt.default.hash(data.password, saltRounds);\n    const {\n      username,\n      email,\n      password,\n      gender,\n      email_verified,\n      role\n    } = data;\n    const user = await _models.users.create({\n      username,\n      email,\n      password,\n      gender,\n      email_verified,\n      role\n    });\n    return {\n      data: user\n    };\n  }\n  static async updateAvatar(user, image) {\n    const result = await _cloud.default.single(image);\n    const avatar = result.url;\n    await this.updateUser({\n      avatar\n    }, user.id);\n    const newUser = {\n      ...user.dataValues,\n      avatar\n    };\n    return {\n      value: newUser\n    };\n  }\n  static async updateCoverImage(user, image) {\n    const result = await _cloud.default.single(image);\n    const cover_image = result.url;\n    await this.updateUser({\n      cover_image\n    }, user.id);\n    const newUser = {\n      ...user.dataValues,\n      cover_image\n    };\n    return {\n      value: newUser\n    };\n  }\n}\nexports.default = User;\nmodule.exports = exports.default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfYmNyeXB0IiwiX2ludGVyb3BSZXF1aXJlRGVmYXVsdCIsInJlcXVpcmUiLCJfbm9kZW1haWxlciIsIl9tb2RlbHMiLCJfY2xvdWQiLCJzYWx0Um91bmRzIiwiTnVtYmVyIiwicHJvY2VzcyIsImVudiIsIlNBTFRST1VORFMiLCJVc2VyIiwicmVnaXN0ZXIiLCJkYXRhIiwicGFzc3dvcmQiLCJiY3J5cHQiLCJoYXNoIiwidXNlcm5hbWUiLCJlbWFpbCIsImdlbmRlciIsImVtYWlsX3ZlcmlmaWVkIiwidXNlciIsInVzZXJzIiwiY3JlYXRlIiwicmVnaXN0ZXJHb29nbGUiLCJzdGFydE1mYVByb2Nlc3MiLCJmaW5kT25lIiwid2hlcmUiLCJtZmFfY29kZSIsIk1hdGgiLCJmbG9vciIsInJhbmRvbSIsInRpbWVvdXQiLCJNRkFfTUlOUyIsIm1mYV90aW1lb3V0IiwiRGF0ZSIsIm5vdyIsInNhdmUiLCJpc01mYVZhbGlkIiwiZmluZEJ5RW1haWxUb2tlbiIsImVtYWlsVG9rZW4iLCJlbWFpbF90b2tlbiIsInVwZGF0ZVVzZXIiLCJmaWVsZHMiLCJpZCIsInVwZGF0ZSIsImVkaXRQcm9maWxlIiwiZXhpc3QiLCJlcnJvciIsImF2YXRhciIsImNvdmVyX2ltYWdlIiwicm9sZSIsInZlcmlmaWVkIiwibmV3VXNlcnMiLCJkYXRhVmFsdWVzIiwidmFsdWUiLCJzZW5kTWFpbFdpdGhOb2RlbWFpbGVyIiwic3ViamVjdCIsImNvbnRlbnQiLCJ0cmFuc3BvcnRlciIsIm5vZGVtYWlsZXIiLCJjcmVhdGVUcmFuc3BvcnQiLCJzZXJ2aWNlIiwiYXV0aCIsIkFQUF9FTUFJTCIsInBhc3MiLCJBUFBfRU1BSUxfUEFTU1dPUkQiLCJtYWlsT3B0aW9ucyIsImZyb20iLCJ0byIsImh0bWwiLCJzZW5kTWFpbCIsImVyciIsImluZm8iLCJzZXRSb2xlIiwiZmluZEJ5SWQiLCJsb2dvdXQiLCJ0b2tlbiIsInNwbGl0IiwiQmxvY2tlZHRva2VuIiwiZ2V0QWxsVXNlcnMiLCJhbGxVc2VycyIsImZpbmRBbGwiLCJyZWdpc3RlckFkbWluIiwidXBkYXRlQXZhdGFyIiwiaW1hZ2UiLCJyZXN1bHQiLCJDbG91ZFVwbG9hZCIsInNpbmdsZSIsInVybCIsIm5ld1VzZXIiLCJ1cGRhdGVDb3ZlckltYWdlIiwiZXhwb3J0cyIsImRlZmF1bHQiLCJtb2R1bGUiXSwic291cmNlUm9vdCI6Ii9Vc2Vycy9hbmRlbGFyd2FuZGEvRGVza3RvcC9lLWNvbW0tdGVhbS1icm9ncmFtbWVycy1ibi9zcmMvc2VydmljZXMvIiwic291cmNlcyI6WyJ1c2VyLnNlcnZpY2VzLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qIGVzbGludC1kaXNhYmxlIG9iamVjdC1jdXJseS1uZXdsaW5lICovXG4vKiBlc2xpbnQtZGlzYWJsZSBjYW1lbGNhc2UgKi9cbi8qIGVzbGludC1kaXNhYmxlIG5vLXVudXNlZC12YXJzICovXG4vKiBlc2xpbnQtZGlzYWJsZSBvYmplY3Qtc2hvcnRoYW5kICovXG4vKiBlc2xpbnQtZGlzYWJsZSByZXF1aXJlLWpzZG9jICovXG5pbXBvcnQgYmNyeXB0IGZyb20gJ2JjcnlwdCc7XG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgaW1wb3J0L25vLWV4dHJhbmVvdXMtZGVwZW5kZW5jaWVzLCBpbXBvcnQvbm8tdW5yZXNvbHZlZFxuaW1wb3J0IG5vZGVtYWlsZXIgZnJvbSAnbm9kZW1haWxlcic7XG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgaW1wb3J0L25hbWVkXG5pbXBvcnQgeyB1c2VycywgQmxvY2tlZHRva2VuIH0gZnJvbSAnLi4vZGF0YWJhc2UvbW9kZWxzJztcbmltcG9ydCBDbG91ZFVwbG9hZCBmcm9tICcuLi9oZWxwZXJzL2Nsb3VkLnVwbG9hZCc7XG5cbmNvbnN0IHNhbHRSb3VuZHMgPSBOdW1iZXIocHJvY2Vzcy5lbnYuU0FMVFJPVU5EUykgfHwgMTA7XG5cbi8qKlxuICogY2xhc3MgZm9yIGFsbCB1c2VyIHNlcnZpY2VzXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFVzZXIge1xuICAvKipcbiAgICogZnVuY3Rpb24gdG8gcmVnaXN0ZXIgdXNlclxuICAgKiBAcGFyYW0ge09iamVjdH0gZGF0YSB0aGUgaW5mb3JtYXRpb24gZm9yIHVzZXIgdG8gYmUgY3JlYXRlZFxuICAgKiBAcmV0dXJucyB7ZGF0YX0gZm9yIHRoZSBjcmVhdGVkIHVzZXJcbiAgICovXG4gIHN0YXRpYyBhc3luYyByZWdpc3RlcihkYXRhKSB7XG4gICAgZGF0YS5wYXNzd29yZCA9IGF3YWl0IGJjcnlwdC5oYXNoKGRhdGEucGFzc3dvcmQsIHNhbHRSb3VuZHMpO1xuXG4gICAgY29uc3QgeyB1c2VybmFtZSwgZW1haWwsIHBhc3N3b3JkLCBnZW5kZXIsIGVtYWlsX3ZlcmlmaWVkIH0gPSBkYXRhO1xuICAgIGNvbnN0IHVzZXIgPSBhd2FpdCB1c2Vycy5jcmVhdGUoe1xuICAgICAgdXNlcm5hbWUsXG4gICAgICBlbWFpbCxcbiAgICAgIHBhc3N3b3JkLFxuICAgICAgZ2VuZGVyLFxuICAgICAgZW1haWxfdmVyaWZpZWQsXG4gICAgfSk7XG5cbiAgICByZXR1cm4geyBkYXRhOiB1c2VyIH07XG4gIH1cblxuICBzdGF0aWMgYXN5bmMgcmVnaXN0ZXJHb29nbGUoZGF0YSkge1xuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1yZXR1cm4tYXdhaXRcbiAgICByZXR1cm4gYXdhaXQgdXNlcnMuY3JlYXRlKGRhdGEpO1xuICB9XG5cbiAgc3RhdGljIGFzeW5jIHN0YXJ0TWZhUHJvY2VzcyhlbWFpbCkge1xuICAgIGNvbnN0IHVzZXIgPSBhd2FpdCB1c2Vycy5maW5kT25lKHsgd2hlcmU6IHsgZW1haWwgfSB9KTtcbiAgICB1c2VyLm1mYV9jb2RlID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMTAwMDAwICsgMTAwMDApO1xuICAgIGNvbnN0IHRpbWVvdXQgPSAocHJvY2Vzcy5lbnYuTUZBX01JTlMgfHwgMykgKiA2MCAqIDEwMDA7XG4gICAgdXNlci5tZmFfdGltZW91dCA9IG5ldyBEYXRlKERhdGUubm93KCkgKyB0aW1lb3V0KTtcbiAgICBhd2FpdCB1c2VyLnNhdmUoKTtcbiAgICByZXR1cm4gdXNlci5tZmFfY29kZTtcbiAgfVxuXG4gIHN0YXRpYyBhc3luYyBpc01mYVZhbGlkKGVtYWlsLCBtZmFfY29kZSkge1xuICAgIGNvbnN0IHVzZXIgPSBhd2FpdCB1c2Vycy5maW5kT25lKHsgd2hlcmU6IHsgZW1haWwgfSB9KTtcbiAgICBpZiAodXNlci5tZmFfY29kZSAhPT0gbWZhX2NvZGUpIHtcbiAgICAgIHJldHVybiBbZmFsc2UsICdJbnZhbGlkIGF1dGhlbnRpY2F0aW9uIGNvZGUnXTtcbiAgICB9XG4gICAgaWYgKHVzZXIubWZhX3RpbWVvdXQgPCBuZXcgRGF0ZSgpKSB7XG4gICAgICByZXR1cm4gW2ZhbHNlLCAnQXV0aGVudGljYXRpb24gY29kZSBleHBpcmVkJ107XG4gICAgfVxuXG4gICAgLy8gRm9yY2UgbWZhIGNvZGUgdG8gZXhwaXJlIGFmdGVyIHVzYWdlXG4gICAgdXNlci5tZmFfdGltZW91dCA9IG5ldyBEYXRlKERhdGUubm93KCkgLSAxMCAqIDYwICogMTAwMCk7XG4gICAgYXdhaXQgdXNlci5zYXZlKCk7XG4gICAgcmV0dXJuIFt0cnVlXTtcbiAgfVxuXG4gIHN0YXRpYyBhc3luYyBmaW5kQnlFbWFpbFRva2VuKGVtYWlsVG9rZW4pIHtcbiAgICBjb25zdCB1c2VyID0gYXdhaXQgdXNlcnMuZmluZE9uZSh7IHdoZXJlOiB7IGVtYWlsX3Rva2VuOiBlbWFpbFRva2VuIH0gfSk7XG4gICAgcmV0dXJuIHVzZXI7XG4gIH1cblxuICBzdGF0aWMgYXN5bmMgdXBkYXRlVXNlcihmaWVsZHMsIGlkKSB7XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXJldHVybi1hd2FpdFxuICAgIHJldHVybiBhd2FpdCB1c2Vycy51cGRhdGUoeyAuLi5maWVsZHMgfSwgeyB3aGVyZTogeyBpZDogaWQgfSB9KTtcbiAgfVxuXG4gIHN0YXRpYyBhc3luYyBlZGl0UHJvZmlsZShkYXRhLCB1c2VyKSB7XG4gICAgY29uc3QgeyBlbWFpbCB9ID0gZGF0YTtcbiAgICBpZiAoZW1haWwgJiYgZW1haWwgIT09IG51bGwgJiYgZW1haWwgIT09IHVzZXIuZW1haWwpIHtcbiAgICAgIGNvbnN0IGV4aXN0ID0gYXdhaXQgdXNlcnMuZmluZE9uZSh7IHdoZXJlOiB7IGVtYWlsIH0gfSk7XG4gICAgICBpZiAoZXhpc3QgJiYgZXhpc3QgIT09IG51bGwpIHJldHVybiB7IGVycm9yOiAnZW1haWwgZXhpc3RzJyB9O1xuICAgIH1cbiAgICBjb25zdCB7XG4gICAgICBhdmF0YXIsXG4gICAgICBjb3Zlcl9pbWFnZSxcbiAgICAgIHJvbGUsXG4gICAgICBwYXNzd29yZCxcbiAgICAgIGlkLFxuICAgICAgdmVyaWZpZWQsIC8vIHVuY2hhbmdlYmxlIGZpZWxkcyBpbiBoZXJlXG4gICAgICAuLi5maWVsZHMgLy8gY2hhbmdlYmxlIGZpZWxkc1xuICAgIH0gPSBkYXRhO1xuXG4gICAgYXdhaXQgdGhpcy51cGRhdGVVc2VyKGRhdGEsIHVzZXIuaWQpO1xuICAgIGNvbnN0IG5ld1VzZXJzID0geyAuLi51c2VyLmRhdGFWYWx1ZXMsIC4uLmRhdGEgfTtcbiAgICByZXR1cm4geyB2YWx1ZTogbmV3VXNlcnMgfTtcbiAgfVxuXG4gIHN0YXRpYyBhc3luYyBzZW5kTWFpbFdpdGhOb2RlbWFpbGVyKHsgZW1haWwsIHN1YmplY3QsIGNvbnRlbnQgfSkge1xuICAgIGNvbnN0IHRyYW5zcG9ydGVyID0gbm9kZW1haWxlci5jcmVhdGVUcmFuc3BvcnQoe1xuICAgICAgc2VydmljZTogJ2dtYWlsJyxcbiAgICAgIGF1dGg6IHtcbiAgICAgICAgdXNlcjogcHJvY2Vzcy5lbnYuQVBQX0VNQUlMLFxuICAgICAgICBwYXNzOiBwcm9jZXNzLmVudi5BUFBfRU1BSUxfUEFTU1dPUkQsXG4gICAgICB9LFxuICAgIH0pO1xuXG4gICAgY29uc3QgbWFpbE9wdGlvbnMgPSB7XG4gICAgICBmcm9tOiBwcm9jZXNzLmVudi5BUFBfRU1BSUwsXG4gICAgICB0bzogZW1haWwsXG4gICAgICBzdWJqZWN0LFxuICAgICAgaHRtbDogY29udGVudCxcbiAgICB9O1xuXG4gICAgdHJhbnNwb3J0ZXIuc2VuZE1haWwobWFpbE9wdGlvbnMsIChlcnIsIGluZm8pID0+IHtcbiAgICAgIGlmIChlcnIpIHJldHVybiBlcnI7XG4gICAgfSk7XG4gIH1cblxuICBzdGF0aWMgYXN5bmMgc2V0Um9sZShyb2xlLCBlbWFpbCkge1xuICAgIGF3YWl0IHVzZXJzLnVwZGF0ZSh7IHJvbGUgfSwgeyB3aGVyZTogeyBlbWFpbCB9IH0pO1xuICB9XG5cbiAgc3RhdGljIGFzeW5jIGZpbmRCeUlkKGlkKSB7XG4gICAgY29uc3QgdXNlciA9IGF3YWl0IHVzZXJzLmZpbmRPbmUoeyB3aGVyZTogeyBpZDogYCR7aWR9YCB9IH0pO1xuICAgIHJldHVybiB1c2VyO1xuICB9XG5cbiAgc3RhdGljIGFzeW5jIGxvZ291dChkYXRhKSB7XG4gICAgY29uc3QgdG9rZW4gPSBkYXRhLnNwbGl0KCcgJylbMV07XG4gICAgYXdhaXQgQmxvY2tlZHRva2VuLmNyZWF0ZSh7IHRva2VuIH0pO1xuICB9XG5cbiAgc3RhdGljIGFzeW5jIGdldEFsbFVzZXJzKCkge1xuICAgIGNvbnN0IGFsbFVzZXJzID0gYXdhaXQgdXNlcnMuZmluZEFsbCgpO1xuICAgIHJldHVybiBhbGxVc2VycztcbiAgfVxuXG4gIHN0YXRpYyBhc3luYyByZWdpc3RlckFkbWluKGRhdGEpIHtcbiAgICBkYXRhLnBhc3N3b3JkID0gYXdhaXQgYmNyeXB0Lmhhc2goZGF0YS5wYXNzd29yZCwgc2FsdFJvdW5kcyk7XG5cbiAgICBjb25zdCB7IHVzZXJuYW1lLCBlbWFpbCwgcGFzc3dvcmQsIGdlbmRlciwgZW1haWxfdmVyaWZpZWQsIHJvbGUgfSA9IGRhdGE7XG4gICAgY29uc3QgdXNlciA9IGF3YWl0IHVzZXJzLmNyZWF0ZSh7XG4gICAgICB1c2VybmFtZSxcbiAgICAgIGVtYWlsLFxuICAgICAgcGFzc3dvcmQsXG4gICAgICBnZW5kZXIsXG4gICAgICBlbWFpbF92ZXJpZmllZCxcbiAgICAgIHJvbGVcbiAgICB9KTtcbiAgICByZXR1cm4geyBkYXRhOiB1c2VyIH07XG4gIH1cblxuICBzdGF0aWMgYXN5bmMgdXBkYXRlQXZhdGFyKHVzZXIsIGltYWdlKSB7XG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgQ2xvdWRVcGxvYWQuc2luZ2xlKGltYWdlKTtcbiAgICBjb25zdCBhdmF0YXIgPSByZXN1bHQudXJsO1xuXG4gICAgYXdhaXQgdGhpcy51cGRhdGVVc2VyKHsgYXZhdGFyIH0sIHVzZXIuaWQpO1xuICAgIGNvbnN0IG5ld1VzZXIgPSB7IC4uLnVzZXIuZGF0YVZhbHVlcywgYXZhdGFyIH07XG5cbiAgICByZXR1cm4geyB2YWx1ZTogbmV3VXNlciB9O1xuICB9XG5cbiAgc3RhdGljIGFzeW5jIHVwZGF0ZUNvdmVySW1hZ2UodXNlciwgaW1hZ2UpIHtcbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBDbG91ZFVwbG9hZC5zaW5nbGUoaW1hZ2UpO1xuICAgIGNvbnN0IGNvdmVyX2ltYWdlID0gcmVzdWx0LnVybDtcblxuICAgIGF3YWl0IHRoaXMudXBkYXRlVXNlcih7IGNvdmVyX2ltYWdlIH0sIHVzZXIuaWQpO1xuICAgIGNvbnN0IG5ld1VzZXIgPSB7IC4uLnVzZXIuZGF0YVZhbHVlcywgY292ZXJfaW1hZ2UgfTtcblxuICAgIHJldHVybiB7IHZhbHVlOiBuZXdVc2VyIH07XG4gIH1cbn1cbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUtBLElBQUFBLE9BQUEsR0FBQUMsc0JBQUEsQ0FBQUMsT0FBQTtBQUVBLElBQUFDLFdBQUEsR0FBQUYsc0JBQUEsQ0FBQUMsT0FBQTtBQUVBLElBQUFFLE9BQUEsR0FBQUYsT0FBQTtBQUNBLElBQUFHLE1BQUEsR0FBQUosc0JBQUEsQ0FBQUMsT0FBQTtBQVZBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBSUEsTUFBTUksVUFBVSxHQUFHQyxNQUFNLENBQUNDLE9B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","map":{"version":3,"names":["_bcrypt","_interopRequireDefault","require","_nodemailer","_models","_cloud","saltRounds","Number","process","env","SALTROUNDS","User","register","data","password","bcrypt","hash","username","email","gender","email_verified","user","users","create","registerGoogle","startMfaProcess","findOne","where","mfa_code","Math","floor","random","timeout","MFA_MINS","mfa_timeout","Date","now","save","isMfaValid","findByEmailToken","emailToken","email_token","updateUser","fields","id","update","editProfile","exist","error","avatar","cover_image","role","verified","newUsers","dataValues","value","sendMailWithNodemailer","subject","content","transporter","nodemailer","createTransport","service","auth","APP_EMAIL","pass","APP_EMAIL_PASSWORD","mailOptions","from","to","html","sendMail","err","info","setRole","findById","logout","token","split","Blockedtoken","getAllUsers","allUsers","findAll","registerAdmin","updateAvatar","image","result","CloudUpload","single","url","newUser","updateCoverImage","exports","default","module"],"sourceRoot":"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/services/","sources":["user.services.js"],"sourcesContent":["/* eslint-disable object-curly-newline */\n/* eslint-disable camelcase */\n/* eslint-disable no-unused-vars */\n/* eslint-disable object-shorthand */\n/* eslint-disable require-jsdoc */\nimport bcrypt from 'bcrypt';\n// eslint-disable-next-line import/no-extraneous-dependencies, import/no-unresolved\nimport nodemailer from 'nodemailer';\n// eslint-disable-next-line import/named\nimport { users, Blockedtoken } from '../database/models';\nimport CloudUpload from '../helpers/cloud.upload';\n\nconst saltRounds = Number(process.env.SALTROUNDS) || 10;\n\n/**\n * class for all user services\n */\nexport default class User {\n  /**\n   * function to register user\n   * @param {Object} data the information for user to be created\n   * @returns {data} for the created user\n   */\n  static async register(data) {\n    data.password = await bcrypt.hash(data.password, saltRounds);\n\n    const { username, email, password, gender, email_verified } = data;\n    const user = await users.create({\n      username,\n      email,\n      password,\n      gender,\n      email_verified,\n    });\n\n    return { data: user };\n  }\n\n  static async registerGoogle(data) {\n    // eslint-disable-next-line no-return-await\n    return await users.create(data);\n  }\n\n  static async startMfaProcess(email) {\n    const user = await users.findOne({ where: { email } });\n    user.mfa_code = Math.floor(Math.random() * 100000 + 10000);\n    const timeout = (process.env.MFA_MINS || 3) * 60 * 1000;\n    user.mfa_timeout = new Date(Date.now() + timeout);\n    await user.save();\n    return user.mfa_code;\n  }\n\n  static async isMfaValid(email, mfa_code) {\n    const user = await users.findOne({ where: { email } });\n    if (user.mfa_code !== mfa_code) {\n      return [false, 'Invalid authentication code'];\n    }\n    if (user.mfa_timeout < new Date()) {\n      return [false, 'Authentication code expired'];\n    }\n\n    // Force mfa code to expire after usage\n    user.mfa_timeout = new Date(Date.now() - 10 * 60 * 1000);\n    await user.save();\n    return [true];\n  }\n\n  static async findByEmailToken(emailToken) {\n    const user = await users.findOne({ where: { email_token: emailToken } });\n    return user;\n  }\n\n  static async updateUser(fields, id) {\n    // eslint-disable-next-line no-return-await\n    return await users.update({ ...fields }, { where: { id: id } });\n  }\n\n  static async editProfile(data, user) {\n    const { email } = data;\n    if (email && email !== null && email !== user.email) {\n      const exist = await users.findOne({ where: { email } });\n      if (exist && exist !== null) return { error: 'email exists' };\n    }\n    const {\n      avatar,\n      cover_image,\n      role,\n      password,\n      id,\n      verified, // unchangeble fields in here\n      ...fields // changeble fields\n    } = data;\n\n    await this.updateUser(data, user.id);\n    const newUsers = { ...user.dataValues, ...data };\n    return { value: newUsers };\n  }\n\n  static async sendMailWithNodemailer({ email, subject, content }) {\n    const transporter = nodemailer.createTransport({\n      service: 'gmail',\n      auth: {\n        user: process.env.APP_EMAIL,\n        pass: process.env.APP_EMAIL_PASSWORD,\n      },\n    });\n\n    const mailOptions = {\n      from: process.env.APP_EMAIL,\n      to: email,\n      subject,\n      html: content,\n    };\n\n    transporter.sendMail(mailOptions, (err, info) => {\n      if (err) return err;\n    });\n  }\n\n  static async setRole(role, email) {\n    await users.update({ role }, { where: { email } });\n  }\n\n  static async findById(id) {\n    const user = await users.findOne({ where: { id: `${id}` } });\n    return user;\n  }\n\n  static async logout(data) {\n    const token = data.split(' ')[1];\n    await Blockedtoken.create({ token });\n  }\n\n  static async getAllUsers() {\n    const allUsers = await users.findAll();\n    return allUsers;\n  }\n\n  static async registerAdmin(data) {\n    data.password = await bcrypt.hash(data.password, saltRounds);\n\n    const { username, email, password, gender, email_verified, role } = data;\n    const user = await users.create({\n      username,\n      email,\n      password,\n      gender,\n      email_verified,\n      role\n    });\n    return { data: user };\n  }\n\n  static async updateAvatar(user, image) {\n    const result = await CloudUpload.single(image);\n    const avatar = result.url;\n\n    await this.updateUser({ avatar }, user.id);\n    const newUser = { ...user.dataValues, avatar };\n\n    return { value: newUser };\n  }\n\n  static async updateCoverImage(user, image) {\n    const result = await CloudUpload.single(image);\n    const cover_image = result.url;\n\n    await this.updateUser({ cover_image }, user.id);\n    const newUser = { ...user.dataValues, cover_image };\n\n    return { value: newUser };\n  }\n}\n"],"mappings":"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"}},"mtime":1682148437963},"{\"assumptions\":{},\"sourceRoot\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/helpers/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"filename\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/helpers/cloud.upload.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/node_modules/babel-plugin-add-module-exports/lib/index.js\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-runtime\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"regenerator\":true},\"externalDependencies\":[]},{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.21.0:development":{"value":{"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _cloudinary = _interopRequireDefault(require(\"../configs/cloudinary\"));\n/**\n * upload class\n */\nclass CloudUpload {\n  /**\n   * @param {Object} file\n   * @returns {result} return the urls\n   */\n  static async single(file) {\n    const result = await _cloudinary.default.uploader.upload(file.path);\n    return result;\n  }\n\n  /**\n   * @param {Object} files\n   * @param {Function} callback\n   * @returns {result} return the urls\n   */\n  static async multi(files) {\n    const results = [];\n    // eslint-disable-next-line no-restricted-syntax\n    for (const file of files) {\n      // eslint-disable-next-line no-await-in-loop\n      const newPath = await this.single(file);\n      results.push(newPath);\n    }\n    return results;\n  }\n}\nexports.default = CloudUpload;\nmodule.exports = exports.default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfY2xvdWRpbmFyeSIsIl9pbnRlcm9wUmVxdWlyZURlZmF1bHQiLCJyZXF1aXJlIiwiQ2xvdWRVcGxvYWQiLCJzaW5nbGUiLCJmaWxlIiwicmVzdWx0IiwiY2xvdWRpbmFyeSIsInVwbG9hZGVyIiwidXBsb2FkIiwicGF0aCIsIm11bHRpIiwiZmlsZXMiLCJyZXN1bHRzIiwibmV3UGF0aCIsInB1c2giLCJleHBvcnRzIiwiZGVmYXVsdCIsIm1vZHVsZSJdLCJzb3VyY2VSb290IjoiL1VzZXJzL2FuZGVsYXJ3YW5kYS9EZXNrdG9wL2UtY29tbS10ZWFtLWJyb2dyYW1tZXJzLWJuL3NyYy9oZWxwZXJzLyIsInNvdXJjZXMiOlsiY2xvdWQudXBsb2FkLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBjbG91ZGluYXJ5IGZyb20gJy4uL2NvbmZpZ3MvY2xvdWRpbmFyeSc7XG5cbi8qKlxuICogdXBsb2FkIGNsYXNzXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIENsb3VkVXBsb2FkIHtcbiAgLyoqXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBmaWxlXG4gICAqIEByZXR1cm5zIHtyZXN1bHR9IHJldHVybiB0aGUgdXJsc1xuICAgKi9cbiAgc3RhdGljIGFzeW5jIHNpbmdsZShmaWxlKSB7XG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgY2xvdWRpbmFyeS51cGxvYWRlci51cGxvYWQoZmlsZS5wYXRoKTtcbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBmaWxlc1xuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYWxsYmFja1xuICAgKiBAcmV0dXJucyB7cmVzdWx0fSByZXR1cm4gdGhlIHVybHNcbiAgICovXG4gIHN0YXRpYyBhc3luYyBtdWx0aShmaWxlcykge1xuICAgIGNvbnN0IHJlc3VsdHMgPSBbXTtcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcmVzdHJpY3RlZC1zeW50YXhcbiAgICBmb3IgKGNvbnN0IGZpbGUgb2YgZmlsZXMpIHtcbiAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1hd2FpdC1pbi1sb29wXG4gICAgICBjb25zdCBuZXdQYXRoID0gYXdhaXQgdGhpcy5zaW5nbGUoZmlsZSk7XG4gICAgICByZXN1bHRzLnB1c2gobmV3UGF0aCk7XG4gICAgfVxuICAgIHJldHVybiByZXN1bHRzO1xuICB9XG59XG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBQSxJQUFBQSxXQUFBLEdBQUFDLHNCQUFBLENBQUFDLE9BQUE7QUFFQTtBQUNBO0FBQ0E7QUFDZSxNQUFNQyxXQUFXLENBQUM7RUFDL0I7QUFDRjtBQUNBO0FBQ0E7RUFDRSxhQUFhQyxNQUFNQSxDQUFDQyxJQUFJLEVBQUU7SUFDeEIsTUFBTUMsTUFBTSxHQUFHLE1BQU1DLG1CQUFVLENBQUNDLFFBQVEsQ0FBQ0MsTUFBTSxDQUFDSixJQUFJLENBQUNLLElBQUksQ0FBQztJQUMxRCxPQUFPSixNQUFNO0VBQ2Y7O0VBRUE7QUFDRjtBQUNBO0FBQ0E7QUFDQTtFQUNFLGFBQWFLLEtBQUtBLENBQUNDLEtBQUssRUFBRTtJQUN4QixNQUFNQyxPQUFPLEdBQUcsRUFBRTtJQUNsQjtJQUNBLEtBQUssTUFBTVIsSUFBSSxJQUFJTyxLQUFLLEVBQUU7TUFDeEI7TUFDQSxNQUFNRSxPQUFPLEdBQUcsTUFBTSxJQUFJLENBQUNWLE1BQU0sQ0FBQ0MsSUFBSSxDQUFDO01BQ3ZDUSxPQUFPLENBQUNFLElBQUksQ0FBQ0QsT0FBTyxDQUFDO0lBQ3ZCO0lBQ0EsT0FBT0QsT0FBTztFQUNoQjtBQUNGO0FBQUNHLE9BQUEsQ0FBQUMsT0FBQSxHQUFBZCxXQUFBO0FBQUFlLE1BQUEsQ0FBQUYsT0FBQSxHQUFBQSxPQUFBLENBQUFDLE9BQUEifQ==","map":{"version":3,"names":["_cloudinary","_interopRequireDefault","require","CloudUpload","single","file","result","cloudinary","uploader","upload","path","multi","files","results","newPath","push","exports","default","module"],"sourceRoot":"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/helpers/","sources":["cloud.upload.js"],"sourcesContent":["import cloudinary from '../configs/cloudinary';\n\n/**\n * upload class\n */\nexport default class CloudUpload {\n  /**\n   * @param {Object} file\n   * @returns {result} return the urls\n   */\n  static async single(file) {\n    const result = await cloudinary.uploader.upload(file.path);\n    return result;\n  }\n\n  /**\n   * @param {Object} files\n   * @param {Function} callback\n   * @returns {result} return the urls\n   */\n  static async multi(files) {\n    const results = [];\n    // eslint-disable-next-line no-restricted-syntax\n    for (const file of files) {\n      // eslint-disable-next-line no-await-in-loop\n      const newPath = await this.single(file);\n      results.push(newPath);\n    }\n    return results;\n  }\n}\n"],"mappings":";;;;;;;AAAA,IAAAA,WAAA,GAAAC,sBAAA,CAAAC,OAAA;AAEA;AACA;AACA;AACe,MAAMC,WAAW,CAAC;EAC/B;AACF;AACA;AACA;EACE,aAAaC,MAAMA,CAACC,IAAI,EAAE;IACxB,MAAMC,MAAM,GAAG,MAAMC,mBAAU,CAACC,QAAQ,CAACC,MAAM,CAACJ,IAAI,CAACK,IAAI,CAAC;IAC1D,OAAOJ,MAAM;EACf;;EAEA;AACF;AACA;AACA;AACA;EACE,aAAaK,KAAKA,CAACC,KAAK,EAAE;IACxB,MAAMC,OAAO,GAAG,EAAE;IAClB;IACA,KAAK,MAAMR,IAAI,IAAIO,KAAK,EAAE;MACxB;MACA,MAAME,OAAO,GAAG,MAAM,IAAI,CAACV,MAAM,CAACC,IAAI,CAAC;MACvCQ,OAAO,CAACE,IAAI,CAACD,OAAO,CAAC;IACvB;IACA,OAAOD,OAAO;EAChB;AACF;AAACG,OAAA,CAAAC,OAAA,GAAAd,WAAA;AAAAe,MAAA,CAAAF,OAAA,GAAAA,OAAA,CAAAC,OAAA"}},"mtime":1682148437939},"{\"assumptions\":{},\"sourceRoot\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/configs/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"filename\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/configs/cloudinary.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/node_modules/babel-plugin-add-module-exports/lib/index.js\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-runtime\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"regenerator\":true},\"externalDependencies\":[]},{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.21.0:development":{"value":{"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _cloudinary = _interopRequireDefault(require(\"cloudinary\"));\n// eslint-disable-next-line import/no-extraneous-dependencies\n\n_cloudinary.default.config({\n  cloud_name: process.env.CLOUDINARY_CLOUD_NAME,\n  api_key: process.env.CLOUDINARY_API_KEY,\n  api_secret: process.env.CLOUDINARY_API_SECRET\n});\nvar _default = _cloudinary.default;\nexports.default = _default;\nmodule.exports = exports.default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfY2xvdWRpbmFyeSIsIl9pbnRlcm9wUmVxdWlyZURlZmF1bHQiLCJyZXF1aXJlIiwiY2xvdWRpbmFyeSIsImNvbmZpZyIsImNsb3VkX25hbWUiLCJwcm9jZXNzIiwiZW52IiwiQ0xPVURJTkFSWV9DTE9VRF9OQU1FIiwiYXBpX2tleSIsIkNMT1VESU5BUllfQVBJX0tFWSIsImFwaV9zZWNyZXQiLCJDTE9VRElOQVJZX0FQSV9TRUNSRVQiLCJfZGVmYXVsdCIsImV4cG9ydHMiLCJkZWZhdWx0IiwibW9kdWxlIl0sInNvdXJjZVJvb3QiOiIvVXNlcnMvYW5kZWxhcndhbmRhL0Rlc2t0b3AvZS1jb21tLXRlYW0tYnJvZ3JhbW1lcnMtYm4vc3JjL2NvbmZpZ3MvIiwic291cmNlcyI6WyJjbG91ZGluYXJ5LmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBpbXBvcnQvbm8tZXh0cmFuZW91cy1kZXBlbmRlbmNpZXNcbmltcG9ydCBjbG91ZGluYXJ5IGZyb20gJ2Nsb3VkaW5hcnknO1xuXG5jbG91ZGluYXJ5LmNvbmZpZyh7XG4gIGNsb3VkX25hbWU6IHByb2Nlc3MuZW52LkNMT1VESU5BUllfQ0xPVURfTkFNRSxcbiAgYXBpX2tleTogcHJvY2Vzcy5lbnYuQ0xPVURJTkFSWV9BUElfS0VZLFxuICBhcGlfc2VjcmV0OiBwcm9jZXNzLmVudi5DTE9VRElOQVJZX0FQSV9TRUNSRVQsXG59KTtcblxuZXhwb3J0IGRlZmF1bHQgY2xvdWRpbmFyeTtcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUNBLElBQUFBLFdBQUEsR0FBQUMsc0JBQUEsQ0FBQUMsT0FBQTtBQURBOztBQUdBQyxtQkFBVSxDQUFDQyxNQUFNLENBQUM7RUFDaEJDLFVBQVUsRUFBRUMsT0FBTyxDQUFDQyxHQUFHLENBQUNDLHFCQUFxQjtFQUM3Q0MsT0FBTyxFQUFFSCxPQUFPLENBQUNDLEdBQUcsQ0FBQ0csa0JBQWtCO0VBQ3ZDQyxVQUFVLEVBQUVMLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDSztBQUMxQixDQUFDLENBQUM7QUFBQyxJQUFBQyxRQUFBLEdBRVlWLG1CQUFVO0FBQUFXLE9BQUEsQ0FBQUMsT0FBQSxHQUFBRixRQUFBO0FBQUFHLE1BQUEsQ0FBQUYsT0FBQSxHQUFBQSxPQUFBLENBQUFDLE9BQUEifQ==","map":{"version":3,"names":["_cloudinary","_interopRequireDefault","require","cloudinary","config","cloud_name","process","env","CLOUDINARY_CLOUD_NAME","api_key","CLOUDINARY_API_KEY","api_secret","CLOUDINARY_API_SECRET","_default","exports","default","module"],"sourceRoot":"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/configs/","sources":["cloudinary.js"],"sourcesContent":["// eslint-disable-next-line import/no-extraneous-dependencies\nimport cloudinary from 'cloudinary';\n\ncloudinary.config({\n  cloud_name: process.env.CLOUDINARY_CLOUD_NAME,\n  api_key: process.env.CLOUDINARY_API_KEY,\n  api_secret: process.env.CLOUDINARY_API_SECRET,\n});\n\nexport default cloudinary;\n"],"mappings":";;;;;;;AACA,IAAAA,WAAA,GAAAC,sBAAA,CAAAC,OAAA;AADA;;AAGAC,mBAAU,CAACC,MAAM,CAAC;EAChBC,UAAU,EAAEC,OAAO,CAACC,GAAG,CAACC,qBAAqB;EAC7CC,OAAO,EAAEH,OAAO,CAACC,GAAG,CAACG,kBAAkB;EACvCC,UAAU,EAAEL,OAAO,CAACC,GAAG,CAACK;AAC1B,CAAC,CAAC;AAAC,IAAAC,QAAA,GAEYV,mBAAU;AAAAW,OAAA,CAAAC,OAAA,GAAAF,QAAA;AAAAG,MAAA,CAAAF,OAAA,GAAAA,OAAA,CAAAC,OAAA"}},"mtime":1682148437920},"{\"assumptions\":{},\"sourceRoot\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/helpers/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"filename\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/helpers/eventEmitter.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/node_modules/babel-plugin-add-module-exports/lib/index.js\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-runtime\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"regenerator\":true},\"externalDependencies\":[]},{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.21.0:development":{"value":{"code":"\"use strict\";\n\nconst EventEmitter = require('events');\nconst eventEmitter = new EventEmitter();\n\n// Registering a listener for the 'passwordUpdated' event\n// eslint-disable-next-line no-unused-vars\neventEmitter.on('passwordUpdated', userId => {});\nmodule.exports = eventEmitter;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJFdmVudEVtaXR0ZXIiLCJyZXF1aXJlIiwiZXZlbnRFbWl0dGVyIiwib24iLCJ1c2VySWQiLCJtb2R1bGUiLCJleHBvcnRzIl0sInNvdXJjZVJvb3QiOiIvVXNlcnMvYW5kZWxhcndhbmRhL0Rlc2t0b3AvZS1jb21tLXRlYW0tYnJvZ3JhbW1lcnMtYm4vc3JjL2hlbHBlcnMvIiwic291cmNlcyI6WyJldmVudEVtaXR0ZXIuanMiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgRXZlbnRFbWl0dGVyID0gcmVxdWlyZSgnZXZlbnRzJyk7XG5cbmNvbnN0IGV2ZW50RW1pdHRlciA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcblxuLy8gUmVnaXN0ZXJpbmcgYSBsaXN0ZW5lciBmb3IgdGhlICdwYXNzd29yZFVwZGF0ZWQnIGV2ZW50XG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tdW51c2VkLXZhcnNcbmV2ZW50RW1pdHRlci5vbigncGFzc3dvcmRVcGRhdGVkJywgKHVzZXJJZCkgPT4ge1xufSk7XG5cbm1vZHVsZS5leHBvcnRzID0gZXZlbnRFbWl0dGVyO1xuIl0sIm1hcHBpbmdzIjoiOztBQUFBLE1BQU1BLFlBQVksR0FBR0MsT0FBTyxDQUFDLFFBQVEsQ0FBQztBQUV0QyxNQUFNQyxZQUFZLEdBQUcsSUFBSUYsWUFBWSxFQUFFOztBQUV2QztBQUNBO0FBQ0FFLFlBQVksQ0FBQ0MsRUFBRSxDQUFDLGlCQUFpQixFQUFHQyxNQUFNLElBQUssQ0FDL0MsQ0FBQyxDQUFDO0FBRUZDLE1BQU0sQ0FBQ0MsT0FBTyxHQUFHSixZQUFZIn0=","map":{"version":3,"names":["EventEmitter","require","eventEmitter","on","userId","module","exports"],"sourceRoot":"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/helpers/","sources":["eventEmitter.js"],"sourcesContent":["const EventEmitter = require('events');\n\nconst eventEmitter = new EventEmitter();\n\n// Registering a listener for the 'passwordUpdated' event\n// eslint-disable-next-line no-unused-vars\neventEmitter.on('passwordUpdated', (userId) => {\n});\n\nmodule.exports = eventEmitter;\n"],"mappings":";;AAAA,MAAMA,YAAY,GAAGC,OAAO,CAAC,QAAQ,CAAC;AAEtC,MAAMC,YAAY,GAAG,IAAIF,YAAY,EAAE;;AAEvC;AACA;AACAE,YAAY,CAACC,EAAE,CAAC,iBAAiB,EAAGC,MAAM,IAAK,CAC/C,CAAC,CAAC;AAEFC,MAAM,CAACC,OAAO,GAAGJ,YAAY"}},"mtime":1682148437940},"{\"assumptions\":{},\"sourceRoot\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/helpers/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"filename\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/helpers/jwt.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/node_modules/babel-plugin-add-module-exports/lib/index.js\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-runtime\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"regenerator\":true},\"externalDependencies\":[]},{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.21.0:development":{"value":{"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Jwt = void 0;\nvar _jsonwebtoken = _interopRequireDefault(require(\"jsonwebtoken\"));\nvar _dotenv = _interopRequireDefault(require(\"dotenv\"));\n/* eslint-disable require-jsdoc */\n/* eslint-disable import/prefer-default-export */\n// eslint-disable-next-line import/no-extraneous-dependencies\n\n_dotenv.default.config();\nclass Jwt {\n  static generateToken(data, exp = '1y') {\n    return _jsonwebtoken.default.sign(data, process.env.JWT_SECRET, {\n      expiresIn: exp\n    });\n  }\n  static verifyToken(token) {\n    return _jsonwebtoken.default.verify(token, process.env.JWT_SECRET, (err, decoded) => {\n      if (err) {\n        return {\n          error: err\n        };\n      }\n      return {\n        value: decoded\n      };\n    });\n  }\n}\nexports.Jwt = Jwt;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfanNvbndlYnRva2VuIiwiX2ludGVyb3BSZXF1aXJlRGVmYXVsdCIsInJlcXVpcmUiLCJfZG90ZW52IiwiZG90ZW52IiwiY29uZmlnIiwiSnd0IiwiZ2VuZXJhdGVUb2tlbiIsImRhdGEiLCJleHAiLCJKV1QiLCJzaWduIiwicHJvY2VzcyIsImVudiIsIkpXVF9TRUNSRVQiLCJleHBpcmVzSW4iLCJ2ZXJpZnlUb2tlbiIsInRva2VuIiwidmVyaWZ5IiwiZXJyIiwiZGVjb2RlZCIsImVycm9yIiwidmFsdWUiLCJleHBvcnRzIl0sInNvdXJjZVJvb3QiOiIvVXNlcnMvYW5kZWxhcndhbmRhL0Rlc2t0b3AvZS1jb21tLXRlYW0tYnJvZ3JhbW1lcnMtYm4vc3JjL2hlbHBlcnMvIiwic291cmNlcyI6WyJqd3QuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLyogZXNsaW50LWRpc2FibGUgcmVxdWlyZS1qc2RvYyAqL1xuLyogZXNsaW50LWRpc2FibGUgaW1wb3J0L3ByZWZlci1kZWZhdWx0LWV4cG9ydCAqL1xuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGltcG9ydC9uby1leHRyYW5lb3VzLWRlcGVuZGVuY2llc1xuaW1wb3J0IEpXVCBmcm9tICdqc29ud2VidG9rZW4nO1xuaW1wb3J0IGRvdGVudiBmcm9tICdkb3RlbnYnO1xuXG5kb3RlbnYuY29uZmlnKCk7XG5cbmV4cG9ydCBjbGFzcyBKd3Qge1xuICBzdGF0aWMgZ2VuZXJhdGVUb2tlbihkYXRhLCBleHAgPSAnMXknKSB7XG4gICAgcmV0dXJuIEpXVC5zaWduKGRhdGEsIHByb2Nlc3MuZW52LkpXVF9TRUNSRVQsIHsgZXhwaXJlc0luOiBleHAgfSk7XG4gIH1cblxuICBzdGF0aWMgdmVyaWZ5VG9rZW4odG9rZW4pIHtcbiAgICByZXR1cm4gSldULnZlcmlmeSh0b2tlbiwgcHJvY2Vzcy5lbnYuSldUX1NFQ1JFVCwgKGVyciwgZGVjb2RlZCkgPT4ge1xuICAgICAgaWYgKGVycikge1xuICAgICAgICByZXR1cm4geyBlcnJvcjogZXJyIH07XG4gICAgICB9XG4gICAgICByZXR1cm4geyB2YWx1ZTogZGVjb2RlZCB9O1xuICAgIH0pO1xuICB9XG59XG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFHQSxJQUFBQSxhQUFBLEdBQUFDLHNCQUFBLENBQUFDLE9BQUE7QUFDQSxJQUFBQyxPQUFBLEdBQUFGLHNCQUFBLENBQUFDLE9BQUE7QUFKQTtBQUNBO0FBQ0E7O0FBSUFFLGVBQU0sQ0FBQ0MsTUFBTSxFQUFFO0FBRVIsTUFBTUMsR0FBRyxDQUFDO0VBQ2YsT0FBT0MsYUFBYUEsQ0FBQ0MsSUFBSSxFQUFFQyxHQUFHLEdBQUcsSUFBSSxFQUFFO0lBQ3JDLE9BQU9DLHFCQUFHLENBQUNDLElBQUksQ0FBQ0gsSUFBSSxFQUFFSSxPQUFPLENBQUNDLEdBQUcsQ0FBQ0MsVUFBVSxFQUFFO01BQUVDLFNBQVMsRUFBRU47SUFBSSxDQUFDLENBQUM7RUFDbkU7RUFFQSxPQUFPTyxXQUFXQSxDQUFDQyxLQUFLLEVBQUU7SUFDeEIsT0FBT1AscUJBQUcsQ0FBQ1EsTUFBTSxDQUFDRCxLQUFLLEVBQUVMLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDQyxVQUFVLEVBQUUsQ0FBQ0ssR0FBRyxFQUFFQyxPQUFPLEtBQUs7TUFDakUsSUFBSUQsR0FBRyxFQUFFO1FBQ1AsT0FBTztVQUFFRSxLQUFLLEVBQUVGO1FBQUksQ0FBQztNQUN2QjtNQUNBLE9BQU87UUFBRUcsS0FBSyxFQUFFRjtNQUFRLENBQUM7SUFDM0IsQ0FBQyxDQUFDO0VBQ0o7QUFDRjtBQUFDRyxPQUFBLENBQUFqQixHQUFBLEdBQUFBLEdBQUEifQ==","map":{"version":3,"names":["_jsonwebtoken","_interopRequireDefault","require","_dotenv","dotenv","config","Jwt","generateToken","data","exp","JWT","sign","process","env","JWT_SECRET","expiresIn","verifyToken","token","verify","err","decoded","error","value","exports"],"sourceRoot":"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/helpers/","sources":["jwt.js"],"sourcesContent":["/* eslint-disable require-jsdoc */\n/* eslint-disable import/prefer-default-export */\n// eslint-disable-next-line import/no-extraneous-dependencies\nimport JWT from 'jsonwebtoken';\nimport dotenv from 'dotenv';\n\ndotenv.config();\n\nexport class Jwt {\n  static generateToken(data, exp = '1y') {\n    return JWT.sign(data, process.env.JWT_SECRET, { expiresIn: exp });\n  }\n\n  static verifyToken(token) {\n    return JWT.verify(token, process.env.JWT_SECRET, (err, decoded) => {\n      if (err) {\n        return { error: err };\n      }\n      return { value: decoded };\n    });\n  }\n}\n"],"mappings":";;;;;;;AAGA,IAAAA,aAAA,GAAAC,sBAAA,CAAAC,OAAA;AACA,IAAAC,OAAA,GAAAF,sBAAA,CAAAC,OAAA;AAJA;AACA;AACA;;AAIAE,eAAM,CAACC,MAAM,EAAE;AAER,MAAMC,GAAG,CAAC;EACf,OAAOC,aAAaA,CAACC,IAAI,EAAEC,GAAG,GAAG,IAAI,EAAE;IACrC,OAAOC,qBAAG,CAACC,IAAI,CAACH,IAAI,EAAEI,OAAO,CAACC,GAAG,CAACC,UAAU,EAAE;MAAEC,SAAS,EAAEN;IAAI,CAAC,CAAC;EACnE;EAEA,OAAOO,WAAWA,CAACC,KAAK,EAAE;IACxB,OAAOP,qBAAG,CAACQ,MAAM,CAACD,KAAK,EAAEL,OAAO,CAACC,GAAG,CAACC,UAAU,EAAE,CAACK,GAAG,EAAEC,OAAO,KAAK;MACjE,IAAID,GAAG,EAAE;QACP,OAAO;UAAEE,KAAK,EAAEF;QAAI,CAAC;MACvB;MACA,OAAO;QAAEG,KAAK,EAAEF;MAAQ,CAAC;IAC3B,CAAC,CAAC;EACJ;AACF;AAACG,OAAA,CAAAjB,GAAA,GAAAA,GAAA"}},"mtime":1682148437940},"{\"assumptions\":{},\"sourceRoot\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/helpers/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"filename\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/helpers/emailConfig.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/node_modules/babel-plugin-add-module-exports/lib/index.js\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-runtime\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"regenerator\":true},\"externalDependencies\":[]},{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.21.0:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.emailConfig = emailConfig;\n/* eslint-disable require-jsdoc */\n// eslint-disable-next-line import/prefer-default-export\nfunction emailConfig({\n  email,\n  subject,\n  content\n} = {}) {\n  return {\n    from: process.env.APP_EMAIL,\n    to: `${email}`,\n    subject: `${subject}`,\n    html: `${content}`\n  };\n}\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJlbWFpbENvbmZpZyIsImVtYWlsIiwic3ViamVjdCIsImNvbnRlbnQiLCJmcm9tIiwicHJvY2VzcyIsImVudiIsIkFQUF9FTUFJTCIsInRvIiwiaHRtbCJdLCJzb3VyY2VSb290IjoiL1VzZXJzL2FuZGVsYXJ3YW5kYS9EZXNrdG9wL2UtY29tbS10ZWFtLWJyb2dyYW1tZXJzLWJuL3NyYy9oZWxwZXJzLyIsInNvdXJjZXMiOlsiZW1haWxDb25maWcuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLyogZXNsaW50LWRpc2FibGUgcmVxdWlyZS1qc2RvYyAqL1xuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGltcG9ydC9wcmVmZXItZGVmYXVsdC1leHBvcnRcbmV4cG9ydCBmdW5jdGlvbiBlbWFpbENvbmZpZyh7IGVtYWlsLCBzdWJqZWN0LCBjb250ZW50IH0gPSB7fSkge1xuICByZXR1cm4ge1xuICAgIGZyb206IHByb2Nlc3MuZW52LkFQUF9FTUFJTCxcbiAgICB0bzogYCR7ZW1haWx9YCxcbiAgICBzdWJqZWN0OiBgJHtzdWJqZWN0fWAsXG4gICAgaHRtbDogYCR7Y29udGVudH1gLFxuICB9O1xufVxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7QUFBQTtBQUNBO0FBQ08sU0FBU0EsV0FBV0EsQ0FBQztFQUFFQyxLQUFLO0VBQUVDLE9BQU87RUFBRUM7QUFBUSxDQUFDLEdBQUcsQ0FBQyxDQUFDLEVBQUU7RUFDNUQsT0FBTztJQUNMQyxJQUFJLEVBQUVDLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDQyxTQUFTO0lBQzNCQyxFQUFFLEVBQUcsR0FBRVAsS0FBTSxFQUFDO0lBQ2RDLE9BQU8sRUFBRyxHQUFFQSxPQUFRLEVBQUM7SUFDckJPLElBQUksRUFBRyxHQUFFTixPQUFRO0VBQ25CLENBQUM7QUFDSCJ9","map":{"version":3,"names":["emailConfig","email","subject","content","from","process","env","APP_EMAIL","to","html"],"sourceRoot":"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/helpers/","sources":["emailConfig.js"],"sourcesContent":["/* eslint-disable require-jsdoc */\n// eslint-disable-next-line import/prefer-default-export\nexport function emailConfig({ email, subject, content } = {}) {\n  return {\n    from: process.env.APP_EMAIL,\n    to: `${email}`,\n    subject: `${subject}`,\n    html: `${content}`,\n  };\n}\n"],"mappings":";;;;;;AAAA;AACA;AACO,SAASA,WAAWA,CAAC;EAAEC,KAAK;EAAEC,OAAO;EAAEC;AAAQ,CAAC,GAAG,CAAC,CAAC,EAAE;EAC5D,OAAO;IACLC,IAAI,EAAEC,OAAO,CAACC,GAAG,CAACC,SAAS;IAC3BC,EAAE,EAAG,GAAEP,KAAM,EAAC;IACdC,OAAO,EAAG,GAAEA,OAAQ,EAAC;IACrBO,IAAI,EAAG,GAAEN,OAAQ;EACnB,CAAC;AACH"}},"mtime":1682148437940},"{\"assumptions\":{},\"sourceRoot\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/helpers/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"filename\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/helpers/mailTemplate.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/node_modules/babel-plugin-add-module-exports/lib/index.js\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-runtime\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"regenerator\":true},\"externalDependencies\":[]},{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.21.0:development":{"value":{"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.verifyEmailTemplate = exports.verifyEmailSubscriberTemplate = exports.thankYouSubscriberTemplate = exports.paymentEmail = exports.paymentComplete = exports.passwordResetEmailTemplate = exports.notificationTemplate2 = exports.notificationTemplate = exports.newsletterTemplate = exports.mfaEmailTemplate = exports.expireProductWarning = exports.expireProduct = exports.disableEmailTemplate = exports.changePasswordTemplate = void 0;\nvar _moment = _interopRequireDefault(require(\"moment\"));\n/* eslint-disable camelcase */\n/* eslint-disable arrow-body-style */\n/* eslint-disable arrow-spacing */\n\n// eslint-disable-next-line import/prefer-default-export\nconst verifyEmailTemplate = userToken => {\n  return `\n    <div style=\"background-color: #f2f2f2; padding: 20px;\">\n      <h1 style=\"color: #004d99; text-align: center;\">Welcome to Brogrammers e-commerce!</h1>\n      <p style=\"color: #000; font-size: 16px;\">Please click below to activate your account:</p>\n      <a href=\"${process.env.VERIFY_URL}/${userToken}\" style=\"display: block; text-align: center; padding: 10px 20px; background-color: #004d99; color: #fff; text-decoration: none; border-radius: 5px; margin-top: 20px;\">Verify Your Email</a>\n      <p style=\"color: #000; font-size: 14px;\">Thank you for choosing Brogrammers e-commerce.</p>\n    </div>\n    `;\n};\nexports.verifyEmailTemplate = verifyEmailTemplate;\nconst verifyEmailSubscriberTemplate = userToken => {\n  return `\n  <div style=\"background-color: #f2f2f2; padding: 20px;\">\n    <h1 style=\"color: #004d99; text-align: center;\">Thank you for subscribing to Brogrammers e-commerce newsletter!</h1>\n    <p style=\"color: #000; font-size: 16px;\">Please click below to confirm your subscription:</p>\n   <a href=\"${process.env.SUBSCRIBER_URL}/${userToken}\" style=\"display: block; text-align: center; padding: 10px 20px; background-color: #004d99; color: #fff; text-decoration: none; border-radius: 5px; margin-top: 20px;\">Confirm Subscription</a>\n   <p style=\"color: #000; font-size: 14px;\">You will now receive our latest updates and promotions.</p>\n  </div>\n    `;\n};\nexports.verifyEmailSubscriberTemplate = verifyEmailSubscriberTemplate;\nconst thankYouSubscriberTemplate = (username, subscriberId) => {\n  return `\n    <div style=\"background-color: #f2f2f2; padding: 20px;\">\n      <h1 style=\"color: #004d99; text-align: center;\">Thank you ${username} for subscribing to Brogrammers e-commerce newsletter!</h1>\n      <p style=\"color: #000; font-size: 16px;\">You will now receive our latest updates and promotions.</p>\n      <p style=\"color: #000; font-size: 14px;\">If you would like to unsubscribe from our newsletter, please click <a href=\"${process.env.UNSUBSCRIBE_URL}/${subscriberId}\" style=\"color: #004d99; text-decoration: underline;\">here</a>.</p>\n    </div>\n  `;\n};\nexports.thankYouSubscriberTemplate = thankYouSubscriberTemplate;\nconst changePasswordTemplate = (user, passwordExpirationTime) => {\n  return `\n    <div style=\"background-color: #f2f2f2; padding: 20px;\">\n      <h1 style=\"color: #004d99; text-align: center;\">Welcome to Brogrammers e-commerce dear!</h1>\n      <p style=\"color: #000; font-size: 16px;\">Dear ${user.username},\\n\\nYour password will expire in less than ${passwordExpirationTime} minutes.. Please use the following link to change your password:</p>\n      <a href=\"${process.env.FRONTEND_URL}/users/change-password\" style=\"display: block; text-align: center; padding: 10px 20px; background-color: #004d99; color: #fff; text-decoration: none; border-radius: 5px; margin-top: 20px;\">Change Password</a>\n</div>`;\n};\nexports.changePasswordTemplate = changePasswordTemplate;\nconst passwordResetEmailTemplate = resetToken => {\n  return `\n    <div style=\"background-color: #f2f2f2; padding: 20px;\">\n      <h1 style=\"color: #004d99; text-align: center;\">Brogrammers e-commerce!</h1>\n      <p style=\"color: #000; font-size: 16px;\">Please click below to reset you password</p>\n      <form action=\"${process.env.PASSWORD_RESET_URL}/${resetToken}\" method=\"POST\">\n      <button href=\"\" style=\"display: block; text-align: center; padding: 10px 20px; background-color: #004d99; color: #fff; text-decoration: none; border-radius: 5px; margin-top: 20px;\">Reset Your Password</button>\n      <p style=\"color: #000; font-size: 14px;\">Thank you for choosing Brogrammers e-commerce.</p>\n    </div>\n    `;\n};\nexports.passwordResetEmailTemplate = passwordResetEmailTemplate;\nconst mfaEmailTemplate = mfa_code => {\n  return `\n  <div style=\"background-color: #f2f2f2; padding: 20px;\">\n      <h1 style=\"color: #004d99; text-align: center;\">Please use the following code to login.</h1>\n      <p style=\"color: #000; font-size: 16px;\">CODE: ${mfa_code}</p>\n      \n      <p style=\"color: #000; font-size: 14px;\">Thank you for choosing Brogrammers e-commerce.</p>\n    </div>\n  `;\n};\nexports.mfaEmailTemplate = mfaEmailTemplate;\nconst disableEmailTemplate = (username, disabledReason) => {\n  return `\n  <div style=\"background-color: #f2f2f2; padding: 20px;\">\n      <h1 style=\"color: #004d99; text-align: center;\">Dear ${username},<br/></h1>\n      <p style=\"color: #000; font-size: 16px;\">Your account has been disabled due to the following reason(s):<br/><br/>\n      ${disabledReason}<br/><br/>Please contact the support team if you have any questions.<br/><br/><br/>Best regards, <br/><br/>The support team,</p>\n\n      <p style=\"color: #000; font-size: 14px;\">Thank you for choosing Brogrammers e-commerce.</p>\n    </div>\n  `;\n};\nexports.disableEmailTemplate = disableEmailTemplate;\nconst expireProduct = (user, product) => {\n  return `\n  <div style=\"width:100%; font-family: sans-serif, system-ui;\">\n    <h1 style=\"text-align:center;background-color: #222;color: #fff;padding: 1.5rem;\">\n      ⚠️ Important: ${product.name} has Expired\n    </h1>\n    <div style=\"padding: 0 1rem;\">\n    <p>Dear ${user.username},</p>\n      <p>\n        I hope this email finds you well. We are writing to notify you that one of the products you \n        have listed on our market is had expired. We take the quality and safety of our products \n        very seriously, and it is important to us that our customers receive products that are fresh and effective.\n      </p>\n      <p>\n        Please take necessary actions to ensure that the product is either removed from the market \n        or the expiry date is updated. We understand that mistakes can happen, and we appreciate \n        your cooperation in resolving this issue.\n      </p>\n      <div style=\"display: flex; align-items: center;\">\n        <img src=\"${product.images[0]}\" style=\"width: 30%\"/>\n        <div style=\"padding-left: 1rem;\">\n          <p>name: <b>${product.name}</b></p>\n          <p>price: <b>US$${product.price}</b></p>\n          <p>quantity: <b>${product.quantity}</b></p>\n          <p>expires: <b>${product.exp_date}</b></p>\n        </div>\n      </div>\n      <p>\n        If you need any assistance in this matter or have any questions, please do not hesitate to \n        contact us. We look forward to continuing to work with you and providing our customers with \n        high-quality products.\n      </p>\n      <p>Best regards,</p>\n    </div>\n  </div>\n  `;\n};\nexports.expireProduct = expireProduct;\nconst expireProductWarning = (user, product) => {\n  return `\n    <div style=\"width:100%; font-family: sans-serif, system-ui;\">\n      <h1 style=\"text-align:center;background-color: #222;color: #fff;padding: 1.5rem;\">\n        ⚠️ Reminder: Expiry Date of ${product.name} is Approaching\n      </h1>\n      <div style=\"padding: 0 1rem;\">\n      <p>Dear ${user.username},</p>\n        <p>\n          I hope this email finds you well. We are writing to notify you that one of the products you \n          have listed on our market is about to expire. We take the quality and safety of our products \n          very seriously, and it is important to us that our customers receive products that are fresh and effective.\n        </p>\n        <p>\n          Please take necessary actions to ensure that the product is either removed from the market \n          or the expiry date is updated. We understand that mistakes can happen, and we appreciate \n          your cooperation in resolving this issue.\n        </p>\n        <div style=\"display: flex; align-items: center;\">\n          <img src=\"${product.images[0]}\" style=\"width: 30%\"/>\n          <div style=\"padding-left: 1rem;\">\n            <p>name: <b>${product.name}</b></p>\n            <p>price: <b>US$${product.price}</b></p>\n            <p>quantity: <b>${product.quantity}</b></p>\n            <p>expires: <b>${(0, _moment.default)(product.exp_date).fromNow()}</b></p>\n          </div>\n        </div>\n        <p>\n          If you need any assistance in this matter or have any questions, please do not hesitate to \n          contact us. We look forward to continuing to work with you and providing our customers with \n          high-quality products.\n        </p>\n        <p>Best regards,</p>\n      </div>\n    </div>\n  `;\n};\nexports.expireProductWarning = expireProductWarning;\nconst paymentComplete = (user, products) => {\n  return `\n    <div style=\"width:100%; font-family: sans-serif, system-ui;\">\n      <h1 style=\"text-align:center;background-color: #222;color: #fff;padding: 1.5rem;\">\n      ${user.username}, Thank you for purchasing our products!\n      </h1>\n      <div style=\"padding: 0 1rem;\">\n      <p>Dear ${user.username},</p>\n        <p>\n          I wanted to take a moment to thank you for choosing our product. We hope you're enjoying it \n          and finding it useful. Your support means a lot to us as a small business, and we're so \n          grateful for your purchase.\n        </p>\n        ${products.map(product => `\n          <div style=\"display: flex; align-items: center;\">\n            <img src=\"${product.images[0]}\" style=\"max-width: 30%;height: 7rem;object-fit: cover;\"/>\n            <div style=\"padding-left: 1rem;\">\n              <p>name: <b>${product.name}</b></p>\n              <p>price: <b>US$${product.price}</b></p>\n              <p>quantity: <b>${product.orderitem.quantity}</b></p>\n            </div>\n          </div>\n        `)}\n        <p>\n          If you have any questions or feedback, please don't hesitate to reach out. We're always \n          looking for ways to improve our products and make them even more valuable for our customers.\n        </p>\n        <p>Best regards,</p>\n      </div>\n    </div>\n  `;\n};\nexports.paymentComplete = paymentComplete;\nconst paymentEmail = (user, products, url) => {\n  return `\n    <div style=\"width:100%; font-family: sans-serif, system-ui;\">\n      <h1 style=\"text-align:center;background-color: #222;color: #fff;padding: 1.5rem;\">\n      ${user.username}, Thanks for your interest in our products!\n      </h1>\n      <div style=\"padding: 0 1rem;\">\n      <p>Dear ${user.username},</p>\n        <p>\n          Thank you for reaching out to us about our products. We're excited to hear that you're \n          interested in purchasing one, and we're happy to provide you with any information you \n          need to help you make a decision.\n        </p>\n        <p>\n          <a href=\"${url}\">\n            <button style=\"color:#222;background-color:#fa0; padding: 1.5rem 3rem;border: none;border-radius: 5px;\">Pay here</button>\n          </a>\n        </p>\n        ${products.map(product => `\n          <div style=\"display: flex; align-items: center;\">\n            <img src=\"${product.images[0]}\" style=\"max-width: 30%;height: 7rem;object-fit: cover;\"/>\n            <div style=\"padding-left: 1rem;\">\n              <p>name: <b>${product.name}</b></p>\n              <p>price: <b>US$${product.price}</b></p>\n              <p>quantity: <b>${product.orderitem.quantity}</b></p>\n            </div>\n          </div>\n        `)}\n        <p>\n          If you have any questions about our product or would like more information, please feel free \n          to ask. We're happy to provide you with additional details or specifications to help you make \n          an informed decision.\n        </p>\n        <p>\n          <a href=\"${url}\">\n            <button style=\"color:#222;background-color:#fa0; padding: 1.5rem 3rem;border: none;border-radius: 5px;\">Pay here</button>\n          </a>\n        </p>\n        <p>\n          Thank you again for considering our product. We look forward to hearing back from you soon!\n        </p>\n        <p>Best regards,</p>\n      </div>\n    </div>\n  `;\n};\nexports.paymentEmail = paymentEmail;\nconst notificationTemplate = (username, message, type, url) => {\n  return `  <div style=\"width:100%;hight:50%; background-color:#f2f2f2; font-family: sans-serif, system-ui;color:black;\">\n  <div style=\"width:100%; font-family: sans-serif, system-ui;\">\n    <h1 style=\"text-align:center;background-color: #f2f2f2;color: ;padding: 1.5rem;\">\n      ${type}\n    </h1>\n    <div style=\"padding: 0 1rem;\">\n    <h3>Dear ${username},</h3>\n      <p>\n        I hope this email finds you well, email if for follow up about your showed interest in before, as we promissed to notify you whenever there is a a message that may seem interesting to you according to your recorded interests \n        <p> I wanted to notify you that <b> ${message}</b></p>   \n      </p>\n      <div style=\"text-align:center;\">\n       <a href=${url} style=\"display: block; text-align: center; padding: 10px 20px; background-color: #004d99; color: #fff; text-decoration: none; border-radius: 5px; margin-top: 20px;\">Check this out </a> </button>,\n    </div>\n    <p>Best regards, from <b>Brogrammers </b></p>\n    </div>\n  </div><div>`;\n};\nexports.notificationTemplate = notificationTemplate;\nconst notificationTemplate2 = (username, message, type) => {\n  return ` <div style=\"width:100%;hight:50%; background-color:#f2f2f2; font-family: sans-serif, system-ui;\">\n  <div style=\"width:100%; font-family: sans-serif, system-ui;\">\n    <h1 style=\"text-align:center;background-color: #f2f2f2;color: ;padding: 1.5rem;\">\n      ${type}\n    </h1>\n    <div style=\"padding: 0 1rem;\">\n    <h3>Dear ${username},</h3>\n      <p>\n        I hope this email finds you well, email if for follow up about your showed interest in before, as we promissed to notify you whenever there is a a message that may seem interesting to you according to your recorded interests \n        <p> I wanted to notify you that <b> ${message}</b></p>   \n      </p>\n      <div style=\"text-align:center;\">\n       <a href=\"/users/login\" style=\"display: block; text-align: center; padding: 10px 20px; background-color: #004d99; color: #fff; text-decoration: none; border-radius: 5px; margin-top: 20px;\">Login to check </a> </button>,\n    </div>\n    <p>Best regards, from <b>Brogrammers </b></p>\n    </div>\n  </div><div>`;\n};\nexports.notificationTemplate2 = notificationTemplate2;\nconst newsletterTemplate = (username, newsletter, subscriberId, header, content) => {\n  return `\n  <div style=\"max-width: 600px; margin: 0 auto; background-color: #fff; padding: 20px; box-shadow: 0px 0px 20px rgba(0,0,0,0.1);\">\n    <h1 style=\"color: #004d99; font-size: 28px; margin-top: 20px;\">${header}</h1>\n    <div style=\"color: #000; font-size: 16px; line-height: 1.5; margin-top: 20px;\">Hello ${username},<br><br>${content}</div>\n    <h2 style=\"color: #004d99; font-size: 24px; margin-top: 20px;\">${newsletter.name}</h2>\n    <img src=\"${newsletter.images[0]}\" alt=\"${newsletter.name}\" style=\"max-width: 100%; height: auto; margin-top: 20px;\">\n    <div style=\"color: #000; font-size: 16px; line-height: 1.5; margin-top: 20px;\">${newsletter.description}</div>\n    <div style=\"color: #000; font-size: 16px; line-height: 1.5; margin-top: 20px;\">Price: ${newsletter.price}</div>\n    <a href=\"${newsletter.images[0]}\" target=\"_blank\" style=\"display: inline-block; padding: 10px 20px; background-color: #004d99; color: #fff; text-decoration: none; border-radius: 5px; margin-top: 20px;\">View newsletter</a>\n    <div style=\"color: #000; font-size: 16px; line-height: 1.5; margin-top: 20px;\">Thank you ${username} for being a loyal subscriber to our newsletter! Stay tuned for more updates.</div>\n    <div style=\"color: #000; font-size: 14px; margin-top: 20px;\">If you would like to unsubscribe from our newsletter, please click <a href=\"${process.env.UNSUBSCRIBE_URL}/${subscriberId}\" style=\"color: #004d99; text-decoration: underline;\">here</a>.</div>\n </div>`;\n};\nexports.newsletterTemplate = newsletterTemplate;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfbW9tZW50IiwiX2ludGVyb3BSZXF1aXJlRGVmYXVsdCIsInJlcXVpcmUiLCJ2ZXJpZnlFbWFpbFRlbXBsYXRlIiwidXNlclRva2VuIiwicHJvY2VzcyIsImVudiIsIlZFUklGWV9VUkwiLCJleHBvcnRzIiwidmVyaWZ5RW1haWxTdWJzY3JpYmVyVGVtcGxhdGUiLCJTVUJTQ1JJQkVSX1VSTCIsInRoYW5rWW91U3Vic2NyaWJlclRlbXBsYXRlIiwidXNlcm5hbWUiLCJzdWJzY3JpYmVySWQiLCJVTlNVQlNDUklCRV9VUkwiLCJjaGFuZ2VQYXNzd29yZFRlbXBsYXRlIiwidXNlciIsInBhc3N3b3JkRXhwaXJhdGlvblRpbWUiLCJGUk9OVEVORF9VUkwiLCJwYXNzd29yZFJlc2V0RW1haWxUZW1wbGF0ZSIsInJlc2V0VG9rZW4iLCJQQVNTV09SRF9SRVNFVF9VUkwiLCJtZmFFbWFpbFRlbXBsYXRlIiwibWZhX2NvZGUiLCJkaXNhYmxlRW1haWxUZW1wbGF0ZSIsImRpc2FibGVkUmVhc29uIiwiZXhwaXJlUHJvZHVjdCIsInByb2R1Y3QiLCJuYW1lIiwiaW1hZ2VzIiwicHJpY2UiLCJxdWFudGl0eSIsImV4cF9kYXRlIiwiZXhwaXJlUHJvZHVjdFdhcm5pbmciLCJtb21lbnQiLCJmcm9tTm93IiwicGF5bWVudENvbXBsZXRlIiwicHJvZHVjdHMiLCJtYXAiLCJvcmRlcml0ZW0iLCJwYXltZW50RW1haWwiLCJ1cmwiLCJub3RpZmljYXRpb25UZW1wbGF0ZSIsIm1lc3NhZ2UiLCJ0eXBlIiwibm90aWZpY2F0aW9uVGVtcGxhdGUyIiwibmV3c2xldHRlclRlbXBsYXRlIiwibmV3c2xldHRlciIsImhlYWRlciIsImNvbnRlbnQiLCJkZXNjcmlwdGlvbiJdLCJzb3VyY2VSb290IjoiL1VzZXJzL2FuZGVsYXJ3YW5kYS9EZXNrdG9wL2UtY29tbS10ZWFtLWJyb2dyYW1tZXJzLWJuL3NyYy9oZWxwZXJzLyIsInNvdXJjZXMiOlsibWFpbFRlbXBsYXRlLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qIGVzbGludC1kaXNhYmxlIGNhbWVsY2FzZSAqL1xuLyogZXNsaW50LWRpc2FibGUgYXJyb3ctYm9keS1zdHlsZSAqL1xuLyogZXNsaW50LWRpc2FibGUgYXJyb3ctc3BhY2luZyAqL1xuaW1wb3J0IG1vbWVudCBmcm9tICdtb21lbnQnO1xuXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgaW1wb3J0L3ByZWZlci1kZWZhdWx0LWV4cG9ydFxuZXhwb3J0IGNvbnN0IHZlcmlmeUVtYWlsVGVtcGxhdGUgPSAodXNlclRva2VuKSA9PiB7XG4gIHJldHVybiBgXG4gICAgPGRpdiBzdHlsZT1cImJhY2tncm91bmQtY29sb3I6ICNmMmYyZjI7IHBhZGRpbmc6IDIwcHg7XCI+XG4gICAgICA8aDEgc3R5bGU9XCJjb2xvcjogIzAwNGQ5OTsgdGV4dC1hbGlnbjogY2VudGVyO1wiPldlbGNvbWUgdG8gQnJvZ3JhbW1lcnMgZS1jb21tZXJjZSE8L2gxPlxuICAgICAgPHAgc3R5bGU9XCJjb2xvcjogIzAwMDsgZm9udC1zaXplOiAxNnB4O1wiPlBsZWFzZSBjbGljayBiZWxvdyB0byBhY3RpdmF0ZSB5b3VyIGFjY291bnQ6PC9wPlxuICAgICAgPGEgaHJlZj1cIiR7cHJvY2Vzcy5lbnYuVkVSSUZZX1VSTH0vJHt1c2VyVG9rZW59XCIgc3R5bGU9XCJkaXNwbGF5OiBibG9jazsgdGV4dC1hbGlnbjogY2VudGVyOyBwYWRkaW5nOiAxMHB4IDIwcHg7IGJhY2tncm91bmQtY29sb3I6ICMwMDRkOTk7IGNvbG9yOiAjZmZmOyB0ZXh0LWRlY29yYXRpb246IG5vbmU7IGJvcmRlci1yYWRpdXM6IDVweDsgbWFyZ2luLXRvcDogMjBweDtcIj5WZXJpZnkgWW91ciBFbWFpbDwvYT5cbiAgICAgIDxwIHN0eWxlPVwiY29sb3I6ICMwMDA7IGZvbnQtc2l6ZTogMTRweDtcIj5UaGFuayB5b3UgZm9yIGNob29zaW5nIEJyb2dyYW1tZXJzIGUtY29tbWVyY2UuPC9wPlxuICAgIDwvZGl2PlxuICAgIGA7XG59O1xuZXhwb3J0IGNvbnN0IHZlcmlmeUVtYWlsU3Vic2NyaWJlclRlbXBsYXRlID0gKHVzZXJUb2tlbikgPT4ge1xuICByZXR1cm4gYFxuICA8ZGl2IHN0eWxlPVwiYmFja2dyb3VuZC1jb2xvcjogI2YyZjJmMjsgcGFkZGluZzogMjBweDtcIj5cbiAgICA8aDEgc3R5bGU9XCJjb2xvcjogIzAwNGQ5OTsgdGV4dC1hbGlnbjogY2VudGVyO1wiPlRoYW5rIHlvdSBmb3Igc3Vic2NyaWJpbmcgdG8gQnJvZ3JhbW1lcnMgZS1jb21tZXJjZSBuZXdzbGV0dGVyITwvaDE+XG4gICAgPHAgc3R5bGU9XCJjb2xvcjogIzAwMDsgZm9udC1zaXplOiAxNnB4O1wiPlBsZWFzZSBjbGljayBiZWxvdyB0byBjb25maXJtIHlvdXIgc3Vic2NyaXB0aW9uOjwvcD5cbiAgIDxhIGhyZWY9XCIke3Byb2Nlc3MuZW52LlNVQlNDUklCRVJfVVJMfS8ke3VzZXJUb2tlbn1cIiBzdHlsZT1cImRpc3BsYXk6IGJsb2NrOyB0ZXh0LWFsaWduOiBjZW50ZXI7IHBhZGRpbmc6IDEwcHggMjBweDsgYmFja2dyb3VuZC1jb2xvcjogIzAwNGQ5OTsgY29sb3I6ICNmZmY7IHRleHQtZGVjb3JhdGlvbjogbm9uZTsgYm9yZGVyLXJhZGl1czogNXB4OyBtYXJnaW4tdG9wOiAyMHB4O1wiPkNvbmZpcm0gU3Vic2NyaXB0aW9uPC9hPlxuICAgPHAgc3R5bGU9XCJjb2xvcjogIzAwMDsgZm9udC1zaXplOiAxNHB4O1wiPllvdSB3aWxsIG5vdyByZWNlaXZlIG91ciBsYXRlc3QgdXBkYXRlcyBhbmQgcHJvbW90aW9ucy48L3A+XG4gIDwvZGl2PlxuICAgIGA7XG59O1xuZXhwb3J0IGNvbnN0IHRoYW5rWW91U3Vic2NyaWJlclRlbXBsYXRlID0gKHVzZXJuYW1lLCBzdWJzY3JpYmVySWQpID0+IHtcbiAgcmV0dXJuIGBcbiAgICA8ZGl2IHN0eWxlPVwiYmFja2dyb3VuZC1jb2xvcjogI2YyZjJmMjsgcGFkZGluZzogMjBweDtcIj5cbiAgICAgIDxoMSBzdHlsZT1cImNvbG9yOiAjMDA0ZDk5OyB0ZXh0LWFsaWduOiBjZW50ZXI7XCI+VGhhbmsgeW91ICR7dXNlcm5hbWV9IGZvciBzdWJzY3JpYmluZyB0byBCcm9ncmFtbWVycyBlLWNvbW1lcmNlIG5ld3NsZXR0ZXIhPC9oMT5cbiAgICAgIDxwIHN0eWxlPVwiY29sb3I6ICMwMDA7IGZvbnQtc2l6ZTogMTZweDtcIj5Zb3Ugd2lsbCBub3cgcmVjZWl2ZSBvdXIgbGF0ZXN0IHVwZGF0ZXMgYW5kIHByb21vdGlvbnMuPC9wPlxuICAgICAgPHAgc3R5bGU9XCJjb2xvcjogIzAwMDsgZm9udC1zaXplOiAxNHB4O1wiPklmIHlvdSB3b3VsZCBsaWtlIHRvIHVuc3Vic2NyaWJlIGZyb20gb3VyIG5ld3NsZXR0ZXIsIHBsZWFzZSBjbGljayA8YSBocmVmPVwiJHtwcm9jZXNzLmVudi5VTlNVQlNDUklCRV9VUkx9LyR7c3Vic2NyaWJlcklkfVwiIHN0eWxlPVwiY29sb3I6ICMwMDRkOTk7IHRleHQtZGVjb3JhdGlvbjogdW5kZXJsaW5lO1wiPmhlcmU8L2E+LjwvcD5cbiAgICA8L2Rpdj5cbiAgYDtcbn07XG5leHBvcnQgY29uc3QgY2hhbmdlUGFzc3dvcmRUZW1wbGF0ZSA9ICh1c2VyLCBwYXNzd29yZEV4cGlyYXRpb25UaW1lKSA9PiB7XG4gIHJldHVybiBgXG4gICAgPGRpdiBzdHlsZT1cImJhY2tncm91bmQtY29sb3I6ICNmMmYyZjI7IHBhZGRpbmc6IDIwcHg7XCI+XG4gICAgICA8aDEgc3R5bGU9XCJjb2xvcjogIzAwNGQ5OTsgdGV4dC1hbGlnbjogY2VudGVyO1wiPldlbGNvbWUgdG8gQnJvZ3JhbW1lcnMgZS1jb21tZXJjZSBkZWFyITwvaDE+XG4gICAgICA8cCBzdHlsZT1cImNvbG9yOiAjMDAwOyBmb250LXNpemU6IDE2cHg7XCI+RGVhciAke3VzZXIudXNlcm5hbWV9LFxcblxcbllvdXIgcGFzc3dvcmQgd2lsbCBleHBpcmUgaW4gbGVzcyB0aGFuICR7cGFzc3dvcmRFeHBpcmF0aW9uVGltZX0gbWludXRlcy4uIFBsZWFzZSB1c2UgdGhlIGZvbGxvd2luZyBsaW5rIHRvIGNoYW5nZSB5b3VyIHBhc3N3b3JkOjwvcD5cbiAgICAgIDxhIGhyZWY9XCIke3Byb2Nlc3MuZW52LkZST05URU5EX1VSTH0vdXNlcnMvY2hhbmdlLXBhc3N3b3JkXCIgc3R5bGU9XCJkaXNwbGF5OiBibG9jazsgdGV4dC1hbGlnbjogY2VudGVyOyBwYWRkaW5nOiAxMHB4IDIwcHg7IGJhY2tncm91bmQtY29sb3I6ICMwMDRkOTk7IGNvbG9yOiAjZmZmOyB0ZXh0LWRlY29yYXRpb246IG5vbmU7IGJvcmRlci1yYWRpdXM6IDVweDsgbWFyZ2luLXRvcDogMjBweDtcIj5DaGFuZ2UgUGFzc3dvcmQ8L2E+XG48L2Rpdj5gO1xufTtcblxuZXhwb3J0IGNvbnN0IHBhc3N3b3JkUmVzZXRFbWFpbFRlbXBsYXRlID0gKHJlc2V0VG9rZW4pID0+IHtcbiAgcmV0dXJuIGBcbiAgICA8ZGl2IHN0eWxlPVwiYmFja2dyb3VuZC1jb2xvcjogI2YyZjJmMjsgcGFkZGluZzogMjBweDtcIj5cbiAgICAgIDxoMSBzdHlsZT1cImNvbG9yOiAjMDA0ZDk5OyB0ZXh0LWFsaWduOiBjZW50ZXI7XCI+QnJvZ3JhbW1lcnMgZS1jb21tZXJjZSE8L2gxPlxuICAgICAgPHAgc3R5bGU9XCJjb2xvcjogIzAwMDsgZm9udC1zaXplOiAxNnB4O1wiPlBsZWFzZSBjbGljayBiZWxvdyB0byByZXNldCB5b3UgcGFzc3dvcmQ8L3A+XG4gICAgICA8Zm9ybSBhY3Rpb249XCIke3Byb2Nlc3MuZW52LlBBU1NXT1JEX1JFU0VUX1VSTH0vJHtyZXNldFRva2VufVwiIG1ldGhvZD1cIlBPU1RcIj5cbiAgICAgIDxidXR0b24gaHJlZj1cIlwiIHN0eWxlPVwiZGlzcGxheTogYmxvY2s7IHRleHQtYWxpZ246IGNlbnRlcjsgcGFkZGluZzogMTBweCAyMHB4OyBiYWNrZ3JvdW5kLWNvbG9yOiAjMDA0ZDk5OyBjb2xvcjogI2ZmZjsgdGV4dC1kZWNvcmF0aW9uOiBub25lOyBib3JkZXItcmFkaXVzOiA1cHg7IG1hcmdpbi10b3A6IDIwcHg7XCI+UmVzZXQgWW91ciBQYXNzd29yZDwvYnV0dG9uPlxuICAgICAgPHAgc3R5bGU9XCJjb2xvcjogIzAwMDsgZm9udC1zaXplOiAxNHB4O1wiPlRoYW5rIHlvdSBmb3IgY2hvb3NpbmcgQnJvZ3JhbW1lcnMgZS1jb21tZXJjZS48L3A+XG4gICAgPC9kaXY+XG4gICAgYDtcbn07XG5leHBvcnQgY29uc3QgbWZhRW1haWxUZW1wbGF0ZSA9IChtZmFfY29kZSkgPT4ge1xuICByZXR1cm4gYFxuICA8ZGl2IHN0eWxlPVwiYmFja2dyb3VuZC1jb2xvcjogI2YyZjJmMjsgcGFkZGluZzogMjBweDtcIj5cbiAgICAgIDxoMSBzdHlsZT1cImNvbG9yOiAjMDA0ZDk5OyB0ZXh0LWFsaWduOiBjZW50ZXI7XCI+UGxlYXNlIHVzZSB0aGUgZm9sbG93aW5nIGNvZGUgdG8gbG9naW4uPC9oMT5cbiAgICAgIDxwIHN0eWxlPVwiY29sb3I6ICMwMDA7IGZvbnQtc2l6ZTogMTZweDtcIj5DT0RFOiAke21mYV9jb2RlfTwvcD5cbiAgICAgIFxuICAgICAgPHAgc3R5bGU9XCJjb2xvcjogIzAwMDsgZm9udC1zaXplOiAxNHB4O1wiPlRoYW5rIHlvdSBmb3IgY2hvb3NpbmcgQnJvZ3JhbW1lcnMgZS1jb21tZXJjZS48L3A+XG4gICAgPC9kaXY+XG4gIGA7XG59O1xuZXhwb3J0IGNvbnN0IGRpc2FibGVFbWFpbFRlbXBsYXRlID0gKHVzZXJuYW1lLCBkaXNhYmxlZFJlYXNvbikgPT4ge1xuICByZXR1cm4gYFxuICA8ZGl2IHN0eWxlPVwiYmFja2dyb3VuZC1jb2xvcjogI2YyZjJmMjsgcGFkZGluZzogMjBweDtcIj5cbiAgICAgIDxoMSBzdHlsZT1cImNvbG9yOiAjMDA0ZDk5OyB0ZXh0LWFsaWduOiBjZW50ZXI7XCI+RGVhciAke3VzZXJuYW1lfSw8YnIvPjwvaDE+XG4gICAgICA8cCBzdHlsZT1cImNvbG9yOiAjMDAwOyBmb250LXNpemU6IDE2cHg7XCI+WW91ciBhY2NvdW50IGhhcyBiZWVuIGRpc2FibGVkIGR1ZSB0byB0aGUgZm9sbG93aW5nIHJlYXNvbihzKTo8YnIvPjxici8+XG4gICAgICAke2Rpc2FibGVkUmVhc29ufTxici8+PGJyLz5QbGVhc2UgY29udGFjdCB0aGUgc3VwcG9ydCB0ZWFtIGlmIHlvdSBoYXZlIGFueSBxdWVzdGlvbnMuPGJyLz48YnIvPjxici8+QmVzdCByZWdhcmRzLCA8YnIvPjxici8+VGhlIHN1cHBvcnQgdGVhbSw8L3A+XG5cbiAgICAgIDxwIHN0eWxlPVwiY29sb3I6ICMwMDA7IGZvbnQtc2l6ZTogMTRweDtcIj5UaGFuayB5b3UgZm9yIGNob29zaW5nIEJyb2dyYW1tZXJzIGUtY29tbWVyY2UuPC9wPlxuICAgIDwvZGl2PlxuICBgO1xufTtcblxuZXhwb3J0IGNvbnN0IGV4cGlyZVByb2R1Y3QgPSAodXNlciwgcHJvZHVjdCkgPT4ge1xuICByZXR1cm4gKGBcbiAgPGRpdiBzdHlsZT1cIndpZHRoOjEwMCU7IGZvbnQtZmFtaWx5OiBzYW5zLXNlcmlmLCBzeXN0ZW0tdWk7XCI+XG4gICAgPGgxIHN0eWxlPVwidGV4dC1hbGlnbjpjZW50ZXI7YmFja2dyb3VuZC1jb2xvcjogIzIyMjtjb2xvcjogI2ZmZjtwYWRkaW5nOiAxLjVyZW07XCI+XG4gICAgICDimqDvuI8gSW1wb3J0YW50OiAke3Byb2R1Y3QubmFtZX0gaGFzIEV4cGlyZWRcbiAgICA8L2gxPlxuICAgIDxkaXYgc3R5bGU9XCJwYWRkaW5nOiAwIDFyZW07XCI+XG4gICAgPHA+RGVhciAke3VzZXIudXNlcm5hbWV9LDwvcD5cbiAgICAgIDxwPlxuICAgICAgICBJIGhvcGUgdGhpcyBlbWFpbCBmaW5kcyB5b3Ugd2VsbC4gV2UgYXJlIHdyaXRpbmcgdG8gbm90aWZ5IHlvdSB0aGF0IG9uZSBvZiB0aGUgcHJvZHVjdHMgeW91IFxuICAgICAgICBoYXZlIGxpc3RlZCBvbiBvdXIgbWFya2V0IGlzIGhhZCBleHBpcmVkLiBXZSB0YWtlIHRoZSBxdWFsaXR5IGFuZCBzYWZldHkgb2Ygb3VyIHByb2R1Y3RzIFxuICAgICAgICB2ZXJ5IHNlcmlvdXNseSwgYW5kIGl0IGlzIGltcG9ydGFudCB0byB1cyB0aGF0IG91ciBjdXN0b21lcnMgcmVjZWl2ZSBwcm9kdWN0cyB0aGF0IGFyZSBmcmVzaCBhbmQgZWZmZWN0aXZlLlxuICAgICAgPC9wPlxuICAgICAgPHA+XG4gICAgICAgIFBsZWFzZSB0YWtlIG5lY2Vzc2FyeSBhY3Rpb25zIHRvIGVuc3VyZSB0aGF0IHRoZSBwcm9kdWN0IGlzIGVpdGhlciByZW1vdmVkIGZyb20gdGhlIG1hcmtldCBcbiAgICAgICAgb3IgdGhlIGV4cGlyeSBkYXRlIGlzIHVwZGF0ZWQuIFdlIHVuZGVyc3RhbmQgdGhhdCBtaXN0YWtlcyBjYW4gaGFwcGVuLCBhbmQgd2UgYXBwcmVjaWF0ZSBcbiAgICAgICAgeW91ciBjb29wZXJhdGlvbiBpbiByZXNvbHZpbmcgdGhpcyBpc3N1ZS5cbiAgICAgIDwvcD5cbiAgICAgIDxkaXYgc3R5bGU9XCJkaXNwbGF5OiBmbGV4OyBhbGlnbi1pdGVtczogY2VudGVyO1wiPlxuICAgICAgICA8aW1nIHNyYz1cIiR7cHJvZHVjdC5pbWFnZXNbMF19XCIgc3R5bGU9XCJ3aWR0aDogMzAlXCIvPlxuICAgICAgICA8ZGl2IHN0eWxlPVwicGFkZGluZy1sZWZ0OiAxcmVtO1wiPlxuICAgICAgICAgIDxwPm5hbWU6IDxiPiR7cHJvZHVjdC5uYW1lfTwvYj48L3A+XG4gICAgICAgICAgPHA+cHJpY2U6IDxiPlVTJCR7cHJvZHVjdC5wcmljZX08L2I+PC9wPlxuICAgICAgICAgIDxwPnF1YW50aXR5OiA8Yj4ke3Byb2R1Y3QucXVhbnRpdHl9PC9iPjwvcD5cbiAgICAgICAgICA8cD5leHBpcmVzOiA8Yj4ke3Byb2R1Y3QuZXhwX2RhdGV9PC9iPjwvcD5cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L2Rpdj5cbiAgICAgIDxwPlxuICAgICAgICBJZiB5b3UgbmVlZCBhbnkgYXNzaXN0YW5jZSBpbiB0aGlzIG1hdHRlciBvciBoYXZlIGFueSBxdWVzdGlvbnMsIHBsZWFzZSBkbyBub3QgaGVzaXRhdGUgdG8gXG4gICAgICAgIGNvbnRhY3QgdXMuIFdlIGxvb2sgZm9yd2FyZCB0byBjb250aW51aW5nIHRvIHdvcmsgd2l0aCB5b3UgYW5kIHByb3ZpZGluZyBvdXIgY3VzdG9tZXJzIHdpdGggXG4gICAgICAgIGhpZ2gtcXVhbGl0eSBwcm9kdWN0cy5cbiAgICAgIDwvcD5cbiAgICAgIDxwPkJlc3QgcmVnYXJkcyw8L3A+XG4gICAgPC9kaXY+XG4gIDwvZGl2PlxuICBgKTtcbn07XG5cbmV4cG9ydCBjb25zdCBleHBpcmVQcm9kdWN0V2FybmluZyA9ICh1c2VyLCBwcm9kdWN0KSA9PiB7XG4gIHJldHVybiAoYFxuICAgIDxkaXYgc3R5bGU9XCJ3aWR0aDoxMDAlOyBmb250LWZhbWlseTogc2Fucy1zZXJpZiwgc3lzdGVtLXVpO1wiPlxuICAgICAgPGgxIHN0eWxlPVwidGV4dC1hbGlnbjpjZW50ZXI7YmFja2dyb3VuZC1jb2xvcjogIzIyMjtjb2xvcjogI2ZmZjtwYWRkaW5nOiAxLjVyZW07XCI+XG4gICAgICAgIOKaoO+4jyBSZW1pbmRlcjogRXhwaXJ5IERhdGUgb2YgJHtwcm9kdWN0Lm5hbWV9IGlzIEFwcHJvYWNoaW5nXG4gICAgICA8L2gxPlxuICAgICAgPGRpdiBzdHlsZT1cInBhZGRpbmc6IDAgMXJlbTtcIj5cbiAgICAgIDxwPkRlYXIgJHt1c2VyLnVzZXJuYW1lfSw8L3A+XG4gICAgICAgIDxwPlxuICAgICAgICAgIEkgaG9wZSB0aGlzIGVtYWlsIGZpbmRzIHlvdSB3ZWxsLiBXZSBhcmUgd3JpdGluZyB0byBub3RpZnkgeW91IHRoYXQgb25lIG9mIHRoZSBwcm9kdWN0cyB5b3UgXG4gICAgICAgICAgaGF2ZSBsaXN0ZWQgb24gb3VyIG1hcmtldCBpcyBhYm91dCB0byBleHBpcmUuIFdlIHRha2UgdGhlIHF1YWxpdHkgYW5kIHNhZmV0eSBvZiBvdXIgcHJvZHVjdHMgXG4gICAgICAgICAgdmVyeSBzZXJpb3VzbHksIGFuZCBpdCBpcyBpbXBvcnRhbnQgdG8gdXMgdGhhdCBvdXIgY3VzdG9tZXJzIHJlY2VpdmUgcHJvZHVjdHMgdGhhdCBhcmUgZnJlc2ggYW5kIGVmZmVjdGl2ZS5cbiAgICAgICAgPC9wPlxuICAgICAgICA8cD5cbiAgICAgICAgICBQbGVhc2UgdGFrZSBuZWNlc3NhcnkgYWN0aW9ucyB0byBlbnN1cmUgdGhhdCB0aGUgcHJvZHVjdCBpcyBlaXRoZXIgcmVtb3ZlZCBmcm9tIHRoZSBtYXJrZXQgXG4gICAgICAgICAgb3IgdGhlIGV4cGlyeSBkYXRlIGlzIHVwZGF0ZWQuIFdlIHVuZGVyc3RhbmQgdGhhdCBtaXN0YWtlcyBjYW4gaGFwcGVuLCBhbmQgd2UgYXBwcmVjaWF0ZSBcbiAgICAgICAgICB5b3VyIGNvb3BlcmF0aW9uIGluIHJlc29sdmluZyB0aGlzIGlzc3VlLlxuICAgICAgICA8L3A+XG4gICAgICAgIDxkaXYgc3R5bGU9XCJkaXNwbGF5OiBmbGV4OyBhbGlnbi1pdGVtczogY2VudGVyO1wiPlxuICAgICAgICAgIDxpbWcgc3JjPVwiJHtwcm9kdWN0LmltYWdlc1swXX1cIiBzdHlsZT1cIndpZHRoOiAzMCVcIi8+XG4gICAgICAgICAgPGRpdiBzdHlsZT1cInBhZGRpbmctbGVmdDogMXJlbTtcIj5cbiAgICAgICAgICAgIDxwPm5hbWU6IDxiPiR7cHJvZHVjdC5uYW1lfTwvYj48L3A+XG4gICAgICAgICAgICA8cD5wcmljZTogPGI+VVMkJHtwcm9kdWN0LnByaWNlfTwvYj48L3A+XG4gICAgICAgICAgICA8cD5xdWFudGl0eTogPGI+JHtwcm9kdWN0LnF1YW50aXR5fTwvYj48L3A+XG4gICAgICAgICAgICA8cD5leHBpcmVzOiA8Yj4ke21vbWVudChwcm9kdWN0LmV4cF9kYXRlKS5mcm9tTm93KCl9PC9iPjwvcD5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIDxwPlxuICAgICAgICAgIElmIHlvdSBuZWVkIGFueSBhc3Npc3RhbmNlIGluIHRoaXMgbWF0dGVyIG9yIGhhdmUgYW55IHF1ZXN0aW9ucywgcGxlYXNlIGRvIG5vdCBoZXNpdGF0ZSB0byBcbiAgICAgICAgICBjb250YWN0IHVzLiBXZSBsb29rIGZvcndhcmQgdG8gY29udGludWluZyB0byB3b3JrIHdpdGggeW91IGFuZCBwcm92aWRpbmcgb3VyIGN1c3RvbWVycyB3aXRoIFxuICAgICAgICAgIGhpZ2gtcXVhbGl0eSBwcm9kdWN0cy5cbiAgICAgICAgPC9wPlxuICAgICAgICA8cD5CZXN0IHJlZ2FyZHMsPC9wPlxuICAgICAgPC9kaXY+XG4gICAgPC9kaXY+XG4gIGApO1xufTtcblxuZXhwb3J0IGNvbnN0IHBheW1lbnRDb21wbGV0ZSA9ICh1c2VyLCBwcm9kdWN0cykgPT4ge1xuICByZXR1cm4gKGBcbiAgICA8ZGl2IHN0eWxlPVwid2lkdGg6MTAwJTsgZm9udC1mYW1pbHk6IHNhbnMtc2VyaWYsIHN5c3RlbS11aTtcIj5cbiAgICAgIDxoMSBzdHlsZT1cInRleHQtYWxpZ246Y2VudGVyO2JhY2tncm91bmQtY29sb3I6ICMyMjI7Y29sb3I6ICNmZmY7cGFkZGluZzogMS41cmVtO1wiPlxuICAgICAgJHt1c2VyLnVzZXJuYW1lfSwgVGhhbmsgeW91IGZvciBwdXJjaGFzaW5nIG91ciBwcm9kdWN0cyFcbiAgICAgIDwvaDE+XG4gICAgICA8ZGl2IHN0eWxlPVwicGFkZGluZzogMCAxcmVtO1wiPlxuICAgICAgPHA+RGVhciAke3VzZXIudXNlcm5hbWV9LDwvcD5cbiAgICAgICAgPHA+XG4gICAgICAgICAgSSB3YW50ZWQgdG8gdGFrZSBhIG1vbWVudCB0byB0aGFuayB5b3UgZm9yIGNob29zaW5nIG91ciBwcm9kdWN0LiBXZSBob3BlIHlvdSdyZSBlbmpveWluZyBpdCBcbiAgICAgICAgICBhbmQgZmluZGluZyBpdCB1c2VmdWwuIFlvdXIgc3VwcG9ydCBtZWFucyBhIGxvdCB0byB1cyBhcyBhIHNtYWxsIGJ1c2luZXNzLCBhbmQgd2UncmUgc28gXG4gICAgICAgICAgZ3JhdGVmdWwgZm9yIHlvdXIgcHVyY2hhc2UuXG4gICAgICAgIDwvcD5cbiAgICAgICAgJHtwcm9kdWN0cy5tYXAoKHByb2R1Y3QpID0+IChgXG4gICAgICAgICAgPGRpdiBzdHlsZT1cImRpc3BsYXk6IGZsZXg7IGFsaWduLWl0ZW1zOiBjZW50ZXI7XCI+XG4gICAgICAgICAgICA8aW1nIHNyYz1cIiR7cHJvZHVjdC5pbWFnZXNbMF19XCIgc3R5bGU9XCJtYXgtd2lkdGg6IDMwJTtoZWlnaHQ6IDdyZW07b2JqZWN0LWZpdDogY292ZXI7XCIvPlxuICAgICAgICAgICAgPGRpdiBzdHlsZT1cInBhZGRpbmctbGVmdDogMXJlbTtcIj5cbiAgICAgICAgICAgICAgPHA+bmFtZTogPGI+JHtwcm9kdWN0Lm5hbWV9PC9iPjwvcD5cbiAgICAgICAgICAgICAgPHA+cHJpY2U6IDxiPlVTJCR7cHJvZHVjdC5wcmljZX08L2I+PC9wPlxuICAgICAgICAgICAgICA8cD5xdWFudGl0eTogPGI+JHtwcm9kdWN0Lm9yZGVyaXRlbS5xdWFudGl0eX08L2I+PC9wPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIGApKX1cbiAgICAgICAgPHA+XG4gICAgICAgICAgSWYgeW91IGhhdmUgYW55IHF1ZXN0aW9ucyBvciBmZWVkYmFjaywgcGxlYXNlIGRvbid0IGhlc2l0YXRlIHRvIHJlYWNoIG91dC4gV2UncmUgYWx3YXlzIFxuICAgICAgICAgIGxvb2tpbmcgZm9yIHdheXMgdG8gaW1wcm92ZSBvdXIgcHJvZHVjdHMgYW5kIG1ha2UgdGhlbSBldmVuIG1vcmUgdmFsdWFibGUgZm9yIG91ciBjdXN0b21lcnMuXG4gICAgICAgIDwvcD5cbiAgICAgICAgPHA+QmVzdCByZWdhcmRzLDwvcD5cbiAgICAgIDwvZGl2PlxuICAgIDwvZGl2PlxuICBgKTtcbn07XG5cbmV4cG9ydCBjb25zdCBwYXltZW50RW1haWwgPSAodXNlciwgcHJvZHVjdHMsIHVybCkgPT4ge1xuICByZXR1cm4gKGBcbiAgICA8ZGl2IHN0eWxlPVwid2lkdGg6MTAwJTsgZm9udC1mYW1pbHk6IHNhbnMtc2VyaWYsIHN5c3RlbS11aTtcIj5cbiAgICAgIDxoMSBzdHlsZT1cInRleHQtYWxpZ246Y2VudGVyO2JhY2tncm91bmQtY29sb3I6ICMyMjI7Y29sb3I6ICNmZmY7cGFkZGluZzogMS41cmVtO1wiPlxuICAgICAgJHt1c2VyLnVzZXJuYW1lfSwgVGhhbmtzIGZvciB5b3VyIGludGVyZXN0IGluIG91ciBwcm9kdWN0cyFcbiAgICAgIDwvaDE+XG4gICAgICA8ZGl2IHN0eWxlPVwicGFkZGluZzogMCAxcmVtO1wiPlxuICAgICAgPHA+RGVhciAke3VzZXIudXNlcm5hbWV9LDwvcD5cbiAgICAgICAgPHA+XG4gICAgICAgICAgVGhhbmsgeW91IGZvciByZWFjaGluZyBvdXQgdG8gdXMgYWJvdXQgb3VyIHByb2R1Y3RzLiBXZSdyZSBleGNpdGVkIHRvIGhlYXIgdGhhdCB5b3UncmUgXG4gICAgICAgICAgaW50ZXJlc3RlZCBpbiBwdXJjaGFzaW5nIG9uZSwgYW5kIHdlJ3JlIGhhcHB5IHRvIHByb3ZpZGUgeW91IHdpdGggYW55IGluZm9ybWF0aW9uIHlvdSBcbiAgICAgICAgICBuZWVkIHRvIGhlbHAgeW91IG1ha2UgYSBkZWNpc2lvbi5cbiAgICAgICAgPC9wPlxuICAgICAgICA8cD5cbiAgICAgICAgICA8YSBocmVmPVwiJHt1cmx9XCI+XG4gICAgICAgICAgICA8YnV0dG9uIHN0eWxlPVwiY29sb3I6IzIyMjtiYWNrZ3JvdW5kLWNvbG9yOiNmYTA7IHBhZGRpbmc6IDEuNXJlbSAzcmVtO2JvcmRlcjogbm9uZTtib3JkZXItcmFkaXVzOiA1cHg7XCI+UGF5IGhlcmU8L2J1dHRvbj5cbiAgICAgICAgICA8L2E+XG4gICAgICAgIDwvcD5cbiAgICAgICAgJHtwcm9kdWN0cy5tYXAoKHByb2R1Y3QpID0+IChgXG4gICAgICAgICAgPGRpdiBzdHlsZT1cImRpc3BsYXk6IGZsZXg7IGFsaWduLWl0ZW1zOiBjZW50ZXI7XCI+XG4gICAgICAgICAgICA8aW1nIHNyYz1cIiR7cHJvZHVjdC5pbWFnZXNbMF19XCIgc3R5bGU9XCJtYXgtd2lkdGg6IDMwJTtoZWlnaHQ6IDdyZW07b2JqZWN0LWZpdDogY292ZXI7XCIvPlxuICAgICAgICAgICAgPGRpdiBzdHlsZT1cInBhZGRpbmctbGVmdDogMXJlbTtcIj5cbiAgICAgICAgICAgICAgPHA+bmFtZTogPGI+JHtwcm9kdWN0Lm5hbWV9PC9iPjwvcD5cbiAgICAgICAgICAgICAgPHA+cHJpY2U6IDxiPlVTJCR7cHJvZHVjdC5wcmljZX08L2I+PC9wPlxuICAgICAgICAgICAgICA8cD5xdWFudGl0eTogPGI+JHtwcm9kdWN0Lm9yZGVyaXRlbS5xdWFudGl0eX08L2I+PC9wPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIGApKX1cbiAgICAgICAgPHA+XG4gICAgICAgICAgSWYgeW91IGhhdmUgYW55IHF1ZXN0aW9ucyBhYm91dCBvdXIgcHJvZHVjdCBvciB3b3VsZCBsaWtlIG1vcmUgaW5mb3JtYXRpb24sIHBsZWFzZSBmZWVsIGZyZWUgXG4gICAgICAgICAgdG8gYXNrLiBXZSdyZSBoYXBweSB0byBwcm92aWRlIHlvdSB3aXRoIGFkZGl0aW9uYWwgZGV0YWlscyBvciBzcGVjaWZpY2F0aW9ucyB0byBoZWxwIHlvdSBtYWtlIFxuICAgICAgICAgIGFuIGluZm9ybWVkIGRlY2lzaW9uLlxuICAgICAgICA8L3A+XG4gICAgICAgIDxwPlxuICAgICAgICAgIDxhIGhyZWY9XCIke3VybH1cIj5cbiAgICAgICAgICAgIDxidXR0b24gc3R5bGU9XCJjb2xvcjojMjIyO2JhY2tncm91bmQtY29sb3I6I2ZhMDsgcGFkZGluZzogMS41cmVtIDNyZW07Ym9yZGVyOiBub25lO2JvcmRlci1yYWRpdXM6IDVweDtcIj5QYXkgaGVyZTwvYnV0dG9uPlxuICAgICAgICAgIDwvYT5cbiAgICAgICAgPC9wPlxuICAgICAgICA8cD5cbiAgICAgICAgICBUaGFuayB5b3UgYWdhaW4gZm9yIGNvbnNpZGVyaW5nIG91ciBwcm9kdWN0LiBXZSBsb29rIGZvcndhcmQgdG8gaGVhcmluZyBiYWNrIGZyb20geW91IHNvb24hXG4gICAgICAgIDwvcD5cbiAgICAgICAgPHA+QmVzdCByZWdhcmRzLDwvcD5cbiAgICAgIDwvZGl2PlxuICAgIDwvZGl2PlxuICBgKTtcbn07XG5leHBvcnQgY29uc3Qgbm90aWZpY2F0aW9uVGVtcGxhdGUgPSAodXNlcm5hbWUsIG1lc3NhZ2UsIHR5cGUsIHVybCk9PntcbiAgcmV0dXJuIGAgIDxkaXYgc3R5bGU9XCJ3aWR0aDoxMDAlO2hpZ2h0OjUwJTsgYmFja2dyb3VuZC1jb2xvcjojZjJmMmYyOyBmb250LWZhbWlseTogc2Fucy1zZXJpZiwgc3lzdGVtLXVpO2NvbG9yOmJsYWNrO1wiPlxuICA8ZGl2IHN0eWxlPVwid2lkdGg6MTAwJTsgZm9udC1mYW1pbHk6IHNhbnMtc2VyaWYsIHN5c3RlbS11aTtcIj5cbiAgICA8aDEgc3R5bGU9XCJ0ZXh0LWFsaWduOmNlbnRlcjtiYWNrZ3JvdW5kLWNvbG9yOiAjZjJmMmYyO2NvbG9yOiA7cGFkZGluZzogMS41cmVtO1wiPlxuICAgICAgJHt0eXBlfVxuICAgIDwvaDE+XG4gICAgPGRpdiBzdHlsZT1cInBhZGRpbmc6IDAgMXJlbTtcIj5cbiAgICA8aDM+RGVhciAke3VzZXJuYW1lfSw8L2gzPlxuICAgICAgPHA+XG4gICAgICAgIEkgaG9wZSB0aGlzIGVtYWlsIGZpbmRzIHlvdSB3ZWxsLCBlbWFpbCBpZiBmb3IgZm9sbG93IHVwIGFib3V0IHlvdXIgc2hvd2VkIGludGVyZXN0IGluIGJlZm9yZSwgYXMgd2UgcHJvbWlzc2VkIHRvIG5vdGlmeSB5b3Ugd2hlbmV2ZXIgdGhlcmUgaXMgYSBhIG1lc3NhZ2UgdGhhdCBtYXkgc2VlbSBpbnRlcmVzdGluZyB0byB5b3UgYWNjb3JkaW5nIHRvIHlvdXIgcmVjb3JkZWQgaW50ZXJlc3RzIFxuICAgICAgICA8cD4gSSB3YW50ZWQgdG8gbm90aWZ5IHlvdSB0aGF0IDxiPiAke21lc3NhZ2V9PC9iPjwvcD4gICBcbiAgICAgIDwvcD5cbiAgICAgIDxkaXYgc3R5bGU9XCJ0ZXh0LWFsaWduOmNlbnRlcjtcIj5cbiAgICAgICA8YSBocmVmPSR7dXJsfSBzdHlsZT1cImRpc3BsYXk6IGJsb2NrOyB0ZXh0LWFsaWduOiBjZW50ZXI7IHBhZGRpbmc6IDEwcHggMjBweDsgYmFja2dyb3VuZC1jb2xvcjogIzAwNGQ5OTsgY29sb3I6ICNmZmY7IHRleHQtZGVjb3JhdGlvbjogbm9uZTsgYm9yZGVyLXJhZGl1czogNXB4OyBtYXJnaW4tdG9wOiAyMHB4O1wiPkNoZWNrIHRoaXMgb3V0IDwvYT4gPC9idXR0b24+LFxuICAgIDwvZGl2PlxuICAgIDxwPkJlc3QgcmVnYXJkcywgZnJvbSA8Yj5Ccm9ncmFtbWVycyA8L2I+PC9wPlxuICAgIDwvZGl2PlxuICA8L2Rpdj48ZGl2PmA7XG59O1xuXG5leHBvcnQgY29uc3Qgbm90aWZpY2F0aW9uVGVtcGxhdGUyID0gKHVzZXJuYW1lLCBtZXNzYWdlLCB0eXBlKT0+e1xuICByZXR1cm4gYCA8ZGl2IHN0eWxlPVwid2lkdGg6MTAwJTtoaWdodDo1MCU7IGJhY2tncm91bmQtY29sb3I6I2YyZjJmMjsgZm9udC1mYW1pbHk6IHNhbnMtc2VyaWYsIHN5c3RlbS11aTtcIj5cbiAgPGRpdiBzdHlsZT1cIndpZHRoOjEwMCU7IGZvbnQtZmFtaWx5OiBzYW5zLXNlcmlmLCBzeXN0ZW0tdWk7XCI+XG4gICAgPGgxIHN0eWxlPVwidGV4dC1hbGlnbjpjZW50ZXI7YmFja2dyb3VuZC1jb2xvcjogI2YyZjJmMjtjb2xvcjogO3BhZGRpbmc6IDEuNXJlbTtcIj5cbiAgICAgICR7dHlwZX1cbiAgICA8L2gxPlxuICAgIDxkaXYgc3R5bGU9XCJwYWRkaW5nOiAwIDFyZW07XCI+XG4gICAgPGgzPkRlYXIgJHt1c2VybmFtZX0sPC9oMz5cbiAgICAgIDxwPlxuICAgICAgICBJIGhvcGUgdGhpcyBlbWFpbCBmaW5kcyB5b3Ugd2VsbCwgZW1haWwgaWYgZm9yIGZvbGxvdyB1cCBhYm91dCB5b3VyIHNob3dlZCBpbnRlcmVzdCBpbiBiZWZvcmUsIGFzIHdlIHByb21pc3NlZCB0byBub3RpZnkgeW91IHdoZW5ldmVyIHRoZXJlIGlzIGEgYSBtZXNzYWdlIHRoYXQgbWF5IHNlZW0gaW50ZXJlc3RpbmcgdG8geW91IGFjY29yZGluZyB0byB5b3VyIHJlY29yZGVkIGludGVyZXN0cyBcbiAgICAgICAgPHA+IEkgd2FudGVkIHRvIG5vdGlmeSB5b3UgdGhhdCA8Yj4gJHttZXNzYWdlfTwvYj48L3A+ICAgXG4gICAgICA8L3A+XG4gICAgICA8ZGl2IHN0eWxlPVwidGV4dC1hbGlnbjpjZW50ZXI7XCI+XG4gICAgICAgPGEgaHJlZj1cIi91c2Vycy9sb2dpblwiIHN0eWxlPVwiZGlzcGxheTogYmxvY2s7IHRleHQtYWxpZ246IGNlbnRlcjsgcGFkZGluZzogMTBweCAyMHB4OyBiYWNrZ3JvdW5kLWNvbG9yOiAjMDA0ZDk5OyBjb2xvcjogI2ZmZjsgdGV4dC1kZWNvcmF0aW9uOiBub25lOyBib3JkZXItcmFkaXVzOiA1cHg7IG1hcmdpbi10b3A6IDIwcHg7XCI+TG9naW4gdG8gY2hlY2sgPC9hPiA8L2J1dHRvbj4sXG4gICAgPC9kaXY+XG4gICAgPHA+QmVzdCByZWdhcmRzLCBmcm9tIDxiPkJyb2dyYW1tZXJzIDwvYj48L3A+XG4gICAgPC9kaXY+XG4gIDwvZGl2PjxkaXY+YDtcbn07XG5leHBvcnQgY29uc3QgbmV3c2xldHRlclRlbXBsYXRlID0gKHVzZXJuYW1lLCBuZXdzbGV0dGVyLCBzdWJzY3JpYmVySWQsIGhlYWRlciwgY29udGVudCkgPT4ge1xuICByZXR1cm4gYFxuICA8ZGl2IHN0eWxlPVwibWF4LXdpZHRoOiA2MDBweDsgbWFyZ2luOiAwIGF1dG87IGJhY2tncm91bmQtY29sb3I6ICNmZmY7IHBhZGRpbmc6IDIwcHg7IGJveC1zaGFkb3c6IDBweCAwcHggMjBweCByZ2JhKDAsMCwwLDAuMSk7XCI+XG4gICAgPGgxIHN0eWxlPVwiY29sb3I6ICMwMDRkOTk7IGZvbnQtc2l6ZTogMjhweDsgbWFyZ2luLXRvcDogMjBweDtcIj4ke2hlYWRlcn08L2gxPlxuICAgIDxkaXYgc3R5bGU9XCJjb2xvcjogIzAwMDsgZm9udC1zaXplOiAxNnB4OyBsaW5lLWhlaWdodDogMS41OyBtYXJnaW4tdG9wOiAyMHB4O1wiPkhlbGxvICR7dXNlcm5hbWV9LDxicj48YnI+JHtjb250ZW50fTwvZGl2PlxuICAgIDxoMiBzdHlsZT1cImNvbG9yOiAjMDA0ZDk5OyBmb250LXNpemU6IDI0cHg7IG1hcmdpbi10b3A6IDIwcHg7XCI+JHtuZXdzbGV0dGVyLm5hbWV9PC9oMj5cbiAgICA8aW1nIHNyYz1cIiR7bmV3c2xldHRlci5pbWFnZXNbMF19XCIgYWx0PVwiJHtuZXdzbGV0dGVyLm5hbWV9XCIgc3R5bGU9XCJtYXgtd2lkdGg6IDEwMCU7IGhlaWdodDogYXV0bzsgbWFyZ2luLXRvcDogMjBweDtcIj5cbiAgICA8ZGl2IHN0eWxlPVwiY29sb3I6ICMwMDA7IGZvbnQtc2l6ZTogMTZweDsgbGluZS1oZWlnaHQ6IDEuNTsgbWFyZ2luLXRvcDogMjBweDtcIj4ke25ld3NsZXR0ZXIuZGVzY3JpcHRpb259PC9kaXY+XG4gICAgPGRpdiBzdHlsZT1cImNvbG9yOiAjMDAwOyBmb250LXNpemU6IDE2cHg7IGxpbmUtaGVpZ2h0OiAxLjU7IG1hcmdpbi10b3A6IDIwcHg7XCI+UHJpY2U6ICR7bmV3c2xldHRlci5wcmljZX08L2Rpdj5cbiAgICA8YSBocmVmPVwiJHtuZXdzbGV0dGVyLmltYWdlc1swXX1cIiB0YXJnZXQ9XCJfYmxhbmtcIiBzdHlsZT1cImRpc3BsYXk6IGlubGluZS1ibG9jazsgcGFkZGluZzogMTBweCAyMHB4OyBiYWNrZ3JvdW5kLWNvbG9yOiAjMDA0ZDk5OyBjb2xvcjogI2ZmZjsgdGV4dC1kZWNvcmF0aW9uOiBub25lOyBib3JkZXItcmFkaXVzOiA1cHg7IG1hcmdpbi10b3A6IDIwcHg7XCI+VmlldyBuZXdzbGV0dGVyPC9hPlxuICAgIDxkaXYgc3R5bGU9XCJjb2xvcjogIzAwMDsgZm9udC1zaXplOiAxNnB4OyBsaW5lLWhlaWdodDogMS41OyBtYXJnaW4tdG9wOiAyMHB4O1wiPlRoYW5rIHlvdSAke3VzZXJuYW1lfSBmb3IgYmVpbmcgYSBsb3lhbCBzdWJzY3JpYmVyIHRvIG91ciBuZXdzbGV0dGVyISBTdGF5IHR1bmVkIGZvciBtb3JlIHVwZGF0ZXMuPC9kaXY+XG4gICAgPGRpdiBzdHlsZT1cImNvbG9yOiAjMDAwOyBmb250LXNpemU6IDE0cHg7IG1hcmdpbi10b3A6IDIwcHg7XCI+SWYgeW91IHdvdWxkIGxpa2UgdG8gdW5zdWJzY3JpYmUgZnJvbSBvdXIgbmV3c2xldHRlciwgcGxlYXNlIGNsaWNrIDxhIGhyZWY9XCIke3Byb2Nlc3MuZW52LlVOU1VCU0NSSUJFX1VSTH0vJHtzdWJzY3JpYmVySWR9XCIgc3R5bGU9XCJjb2xvcjogIzAwNGQ5OTsgdGV4dC1kZWNvcmF0aW9uOiB1bmRlcmxpbmU7XCI+aGVyZTwvYT4uPC9kaXY+XG4gPC9kaXY+YDtcbn07XG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFHQSxJQUFBQSxPQUFBLEdBQUFDLHNCQUFBLENBQUFDLE9BQUE7QUFIQTtBQUNBO0FBQ0E7O0FBR0E7QUFDTyxNQUFNQyxtQkFBbUIsR0FBSUMsU0FBUyxJQUFLO0VBQ2hELE9BQVE7QUFDVjtBQUNBO0FBQ0E7QUFDQSxpQkFBaUJDLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDQyxVQUFXLElBQUdILFNBQVU7QUFDckQ7QUFDQTtBQUNBLEtBQUs7QUFDTCxDQUFDO0FBQUNJLE9BQUEsQ0FBQUwsbUJBQUEsR0FBQUEsbUJBQUE7QUFDSyxNQUFNTSw2QkFBNkIsR0FBSUwsU0FBUyxJQUFLO0VBQzFELE9BQVE7QUFDVjtBQUNBO0FBQ0E7QUFDQSxjQUFjQyxPQUFPLENBQUNDLEdBQUcsQ0FBQ0ksY0FBZSxJQUFHTixTQUFVO0FBQ3REO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsQ0FBQztBQUFDSSxPQUFBLENBQUFDLDZCQUFBLEdBQUFBLDZCQUFBO0FBQ0ssTUFBTUUsMEJBQTBCLEdBQUdBLENBQUNDLFFBQVEsRUFBRUMsWUFBWSxLQUFL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","map":{"version":3,"names":["_moment","_interopRequireDefault","require","verifyEmailTemplate","userToken","process","env","VERIFY_URL","exports","verifyEmailSubscriberTemplate","SUBSCRIBER_URL","thankYouSubscriberTemplate","username","subscriberId","UNSUBSCRIBE_URL","changePasswordTemplate","user","passwordExpirationTime","FRONTEND_URL","passwordResetEmailTemplate","resetToken","PASSWORD_RESET_URL","mfaEmailTemplate","mfa_code","disableEmailTemplate","disabledReason","expireProduct","product","name","images","price","quantity","exp_date","expireProductWarning","moment","fromNow","paymentComplete","products","map","orderitem","paymentEmail","url","notificationTemplate","message","type","notificationTemplate2","newsletterTemplate","newsletter","header","content","description"],"sourceRoot":"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/helpers/","sources":["mailTemplate.js"],"sourcesContent":["/* eslint-disable camelcase */\n/* eslint-disable arrow-body-style */\n/* eslint-disable arrow-spacing */\nimport moment from 'moment';\n\n// eslint-disable-next-line import/prefer-default-export\nexport const verifyEmailTemplate = (userToken) => {\n  return `\n    <div style=\"background-color: #f2f2f2; padding: 20px;\">\n      <h1 style=\"color: #004d99; text-align: center;\">Welcome to Brogrammers e-commerce!</h1>\n      <p style=\"color: #000; font-size: 16px;\">Please click below to activate your account:</p>\n      <a href=\"${process.env.VERIFY_URL}/${userToken}\" style=\"display: block; text-align: center; padding: 10px 20px; background-color: #004d99; color: #fff; text-decoration: none; border-radius: 5px; margin-top: 20px;\">Verify Your Email</a>\n      <p style=\"color: #000; font-size: 14px;\">Thank you for choosing Brogrammers e-commerce.</p>\n    </div>\n    `;\n};\nexport const verifyEmailSubscriberTemplate = (userToken) => {\n  return `\n  <div style=\"background-color: #f2f2f2; padding: 20px;\">\n    <h1 style=\"color: #004d99; text-align: center;\">Thank you for subscribing to Brogrammers e-commerce newsletter!</h1>\n    <p style=\"color: #000; font-size: 16px;\">Please click below to confirm your subscription:</p>\n   <a href=\"${process.env.SUBSCRIBER_URL}/${userToken}\" style=\"display: block; text-align: center; padding: 10px 20px; background-color: #004d99; color: #fff; text-decoration: none; border-radius: 5px; margin-top: 20px;\">Confirm Subscription</a>\n   <p style=\"color: #000; font-size: 14px;\">You will now receive our latest updates and promotions.</p>\n  </div>\n    `;\n};\nexport const thankYouSubscriberTemplate = (username, subscriberId) => {\n  return `\n    <div style=\"background-color: #f2f2f2; padding: 20px;\">\n      <h1 style=\"color: #004d99; text-align: center;\">Thank you ${username} for subscribing to Brogrammers e-commerce newsletter!</h1>\n      <p style=\"color: #000; font-size: 16px;\">You will now receive our latest updates and promotions.</p>\n      <p style=\"color: #000; font-size: 14px;\">If you would like to unsubscribe from our newsletter, please click <a href=\"${process.env.UNSUBSCRIBE_URL}/${subscriberId}\" style=\"color: #004d99; text-decoration: underline;\">here</a>.</p>\n    </div>\n  `;\n};\nexport const changePasswordTemplate = (user, passwordExpirationTime) => {\n  return `\n    <div style=\"background-color: #f2f2f2; padding: 20px;\">\n      <h1 style=\"color: #004d99; text-align: center;\">Welcome to Brogrammers e-commerce dear!</h1>\n      <p style=\"color: #000; font-size: 16px;\">Dear ${user.username},\\n\\nYour password will expire in less than ${passwordExpirationTime} minutes.. Please use the following link to change your password:</p>\n      <a href=\"${process.env.FRONTEND_URL}/users/change-password\" style=\"display: block; text-align: center; padding: 10px 20px; background-color: #004d99; color: #fff; text-decoration: none; border-radius: 5px; margin-top: 20px;\">Change Password</a>\n</div>`;\n};\n\nexport const passwordResetEmailTemplate = (resetToken) => {\n  return `\n    <div style=\"background-color: #f2f2f2; padding: 20px;\">\n      <h1 style=\"color: #004d99; text-align: center;\">Brogrammers e-commerce!</h1>\n      <p style=\"color: #000; font-size: 16px;\">Please click below to reset you password</p>\n      <form action=\"${process.env.PASSWORD_RESET_URL}/${resetToken}\" method=\"POST\">\n      <button href=\"\" style=\"display: block; text-align: center; padding: 10px 20px; background-color: #004d99; color: #fff; text-decoration: none; border-radius: 5px; margin-top: 20px;\">Reset Your Password</button>\n      <p style=\"color: #000; font-size: 14px;\">Thank you for choosing Brogrammers e-commerce.</p>\n    </div>\n    `;\n};\nexport const mfaEmailTemplate = (mfa_code) => {\n  return `\n  <div style=\"background-color: #f2f2f2; padding: 20px;\">\n      <h1 style=\"color: #004d99; text-align: center;\">Please use the following code to login.</h1>\n      <p style=\"color: #000; font-size: 16px;\">CODE: ${mfa_code}</p>\n      \n      <p style=\"color: #000; font-size: 14px;\">Thank you for choosing Brogrammers e-commerce.</p>\n    </div>\n  `;\n};\nexport const disableEmailTemplate = (username, disabledReason) => {\n  return `\n  <div style=\"background-color: #f2f2f2; padding: 20px;\">\n      <h1 style=\"color: #004d99; text-align: center;\">Dear ${username},<br/></h1>\n      <p style=\"color: #000; font-size: 16px;\">Your account has been disabled due to the following reason(s):<br/><br/>\n      ${disabledReason}<br/><br/>Please contact the support team if you have any questions.<br/><br/><br/>Best regards, <br/><br/>The support team,</p>\n\n      <p style=\"color: #000; font-size: 14px;\">Thank you for choosing Brogrammers e-commerce.</p>\n    </div>\n  `;\n};\n\nexport const expireProduct = (user, product) => {\n  return (`\n  <div style=\"width:100%; font-family: sans-serif, system-ui;\">\n    <h1 style=\"text-align:center;background-color: #222;color: #fff;padding: 1.5rem;\">\n      ⚠️ Important: ${product.name} has Expired\n    </h1>\n    <div style=\"padding: 0 1rem;\">\n    <p>Dear ${user.username},</p>\n      <p>\n        I hope this email finds you well. We are writing to notify you that one of the products you \n        have listed on our market is had expired. We take the quality and safety of our products \n        very seriously, and it is important to us that our customers receive products that are fresh and effective.\n      </p>\n      <p>\n        Please take necessary actions to ensure that the product is either removed from the market \n        or the expiry date is updated. We understand that mistakes can happen, and we appreciate \n        your cooperation in resolving this issue.\n      </p>\n      <div style=\"display: flex; align-items: center;\">\n        <img src=\"${product.images[0]}\" style=\"width: 30%\"/>\n        <div style=\"padding-left: 1rem;\">\n          <p>name: <b>${product.name}</b></p>\n          <p>price: <b>US$${product.price}</b></p>\n          <p>quantity: <b>${product.quantity}</b></p>\n          <p>expires: <b>${product.exp_date}</b></p>\n        </div>\n      </div>\n      <p>\n        If you need any assistance in this matter or have any questions, please do not hesitate to \n        contact us. We look forward to continuing to work with you and providing our customers with \n        high-quality products.\n      </p>\n      <p>Best regards,</p>\n    </div>\n  </div>\n  `);\n};\n\nexport const expireProductWarning = (user, product) => {\n  return (`\n    <div style=\"width:100%; font-family: sans-serif, system-ui;\">\n      <h1 style=\"text-align:center;background-color: #222;color: #fff;padding: 1.5rem;\">\n        ⚠️ Reminder: Expiry Date of ${product.name} is Approaching\n      </h1>\n      <div style=\"padding: 0 1rem;\">\n      <p>Dear ${user.username},</p>\n        <p>\n          I hope this email finds you well. We are writing to notify you that one of the products you \n          have listed on our market is about to expire. We take the quality and safety of our products \n          very seriously, and it is important to us that our customers receive products that are fresh and effective.\n        </p>\n        <p>\n          Please take necessary actions to ensure that the product is either removed from the market \n          or the expiry date is updated. We understand that mistakes can happen, and we appreciate \n          your cooperation in resolving this issue.\n        </p>\n        <div style=\"display: flex; align-items: center;\">\n          <img src=\"${product.images[0]}\" style=\"width: 30%\"/>\n          <div style=\"padding-left: 1rem;\">\n            <p>name: <b>${product.name}</b></p>\n            <p>price: <b>US$${product.price}</b></p>\n            <p>quantity: <b>${product.quantity}</b></p>\n            <p>expires: <b>${moment(product.exp_date).fromNow()}</b></p>\n          </div>\n        </div>\n        <p>\n          If you need any assistance in this matter or have any questions, please do not hesitate to \n          contact us. We look forward to continuing to work with you and providing our customers with \n          high-quality products.\n        </p>\n        <p>Best regards,</p>\n      </div>\n    </div>\n  `);\n};\n\nexport const paymentComplete = (user, products) => {\n  return (`\n    <div style=\"width:100%; font-family: sans-serif, system-ui;\">\n      <h1 style=\"text-align:center;background-color: #222;color: #fff;padding: 1.5rem;\">\n      ${user.username}, Thank you for purchasing our products!\n      </h1>\n      <div style=\"padding: 0 1rem;\">\n      <p>Dear ${user.username},</p>\n        <p>\n          I wanted to take a moment to thank you for choosing our product. We hope you're enjoying it \n          and finding it useful. Your support means a lot to us as a small business, and we're so \n          grateful for your purchase.\n        </p>\n        ${products.map((product) => (`\n          <div style=\"display: flex; align-items: center;\">\n            <img src=\"${product.images[0]}\" style=\"max-width: 30%;height: 7rem;object-fit: cover;\"/>\n            <div style=\"padding-left: 1rem;\">\n              <p>name: <b>${product.name}</b></p>\n              <p>price: <b>US$${product.price}</b></p>\n              <p>quantity: <b>${product.orderitem.quantity}</b></p>\n            </div>\n          </div>\n        `))}\n        <p>\n          If you have any questions or feedback, please don't hesitate to reach out. We're always \n          looking for ways to improve our products and make them even more valuable for our customers.\n        </p>\n        <p>Best regards,</p>\n      </div>\n    </div>\n  `);\n};\n\nexport const paymentEmail = (user, products, url) => {\n  return (`\n    <div style=\"width:100%; font-family: sans-serif, system-ui;\">\n      <h1 style=\"text-align:center;background-color: #222;color: #fff;padding: 1.5rem;\">\n      ${user.username}, Thanks for your interest in our products!\n      </h1>\n      <div style=\"padding: 0 1rem;\">\n      <p>Dear ${user.username},</p>\n        <p>\n          Thank you for reaching out to us about our products. We're excited to hear that you're \n          interested in purchasing one, and we're happy to provide you with any information you \n          need to help you make a decision.\n        </p>\n        <p>\n          <a href=\"${url}\">\n            <button style=\"color:#222;background-color:#fa0; padding: 1.5rem 3rem;border: none;border-radius: 5px;\">Pay here</button>\n          </a>\n        </p>\n        ${products.map((product) => (`\n          <div style=\"display: flex; align-items: center;\">\n            <img src=\"${product.images[0]}\" style=\"max-width: 30%;height: 7rem;object-fit: cover;\"/>\n            <div style=\"padding-left: 1rem;\">\n              <p>name: <b>${product.name}</b></p>\n              <p>price: <b>US$${product.price}</b></p>\n              <p>quantity: <b>${product.orderitem.quantity}</b></p>\n            </div>\n          </div>\n        `))}\n        <p>\n          If you have any questions about our product or would like more information, please feel free \n          to ask. We're happy to provide you with additional details or specifications to help you make \n          an informed decision.\n        </p>\n        <p>\n          <a href=\"${url}\">\n            <button style=\"color:#222;background-color:#fa0; padding: 1.5rem 3rem;border: none;border-radius: 5px;\">Pay here</button>\n          </a>\n        </p>\n        <p>\n          Thank you again for considering our product. We look forward to hearing back from you soon!\n        </p>\n        <p>Best regards,</p>\n      </div>\n    </div>\n  `);\n};\nexport const notificationTemplate = (username, message, type, url)=>{\n  return `  <div style=\"width:100%;hight:50%; background-color:#f2f2f2; font-family: sans-serif, system-ui;color:black;\">\n  <div style=\"width:100%; font-family: sans-serif, system-ui;\">\n    <h1 style=\"text-align:center;background-color: #f2f2f2;color: ;padding: 1.5rem;\">\n      ${type}\n    </h1>\n    <div style=\"padding: 0 1rem;\">\n    <h3>Dear ${username},</h3>\n      <p>\n        I hope this email finds you well, email if for follow up about your showed interest in before, as we promissed to notify you whenever there is a a message that may seem interesting to you according to your recorded interests \n        <p> I wanted to notify you that <b> ${message}</b></p>   \n      </p>\n      <div style=\"text-align:center;\">\n       <a href=${url} style=\"display: block; text-align: center; padding: 10px 20px; background-color: #004d99; color: #fff; text-decoration: none; border-radius: 5px; margin-top: 20px;\">Check this out </a> </button>,\n    </div>\n    <p>Best regards, from <b>Brogrammers </b></p>\n    </div>\n  </div><div>`;\n};\n\nexport const notificationTemplate2 = (username, message, type)=>{\n  return ` <div style=\"width:100%;hight:50%; background-color:#f2f2f2; font-family: sans-serif, system-ui;\">\n  <div style=\"width:100%; font-family: sans-serif, system-ui;\">\n    <h1 style=\"text-align:center;background-color: #f2f2f2;color: ;padding: 1.5rem;\">\n      ${type}\n    </h1>\n    <div style=\"padding: 0 1rem;\">\n    <h3>Dear ${username},</h3>\n      <p>\n        I hope this email finds you well, email if for follow up about your showed interest in before, as we promissed to notify you whenever there is a a message that may seem interesting to you according to your recorded interests \n        <p> I wanted to notify you that <b> ${message}</b></p>   \n      </p>\n      <div style=\"text-align:center;\">\n       <a href=\"/users/login\" style=\"display: block; text-align: center; padding: 10px 20px; background-color: #004d99; color: #fff; text-decoration: none; border-radius: 5px; margin-top: 20px;\">Login to check </a> </button>,\n    </div>\n    <p>Best regards, from <b>Brogrammers </b></p>\n    </div>\n  </div><div>`;\n};\nexport const newsletterTemplate = (username, newsletter, subscriberId, header, content) => {\n  return `\n  <div style=\"max-width: 600px; margin: 0 auto; background-color: #fff; padding: 20px; box-shadow: 0px 0px 20px rgba(0,0,0,0.1);\">\n    <h1 style=\"color: #004d99; font-size: 28px; margin-top: 20px;\">${header}</h1>\n    <div style=\"color: #000; font-size: 16px; line-height: 1.5; margin-top: 20px;\">Hello ${username},<br><br>${content}</div>\n    <h2 style=\"color: #004d99; font-size: 24px; margin-top: 20px;\">${newsletter.name}</h2>\n    <img src=\"${newsletter.images[0]}\" alt=\"${newsletter.name}\" style=\"max-width: 100%; height: auto; margin-top: 20px;\">\n    <div style=\"color: #000; font-size: 16px; line-height: 1.5; margin-top: 20px;\">${newsletter.description}</div>\n    <div style=\"color: #000; font-size: 16px; line-height: 1.5; margin-top: 20px;\">Price: ${newsletter.price}</div>\n    <a href=\"${newsletter.images[0]}\" target=\"_blank\" style=\"display: inline-block; padding: 10px 20px; background-color: #004d99; color: #fff; text-decoration: none; border-radius: 5px; margin-top: 20px;\">View newsletter</a>\n    <div style=\"color: #000; font-size: 16px; line-height: 1.5; margin-top: 20px;\">Thank you ${username} for being a loyal subscriber to our newsletter! Stay tuned for more updates.</div>\n    <div style=\"color: #000; font-size: 14px; margin-top: 20px;\">If you would like to unsubscribe from our newsletter, please click <a href=\"${process.env.UNSUBSCRIBE_URL}/${subscriberId}\" style=\"color: #004d99; text-decoration: underline;\">here</a>.</div>\n </div>`;\n};\n"],"mappings":"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"}},"mtime":1682148437941},"{\"assumptions\":{},\"sourceRoot\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/helpers/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"filename\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/helpers/mail.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/node_modules/babel-plugin-add-module-exports/lib/index.js\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-runtime\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"regenerator\":true},\"externalDependencies\":[]},{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.21.0:development":{"value":{"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.sendEmail = void 0;\nvar _user = _interopRequireDefault(require(\"../services/user.services\"));\n/* eslint-disable import/prefer-default-export */\n/* eslint-disable require-jsdoc */\n// eslint-disable-next-line import/no-extraneous-dependencies, import/no-named-as-default-member\n\nconst sendEmail = mailConfigurations => {\n  const msg = {\n    to: mailConfigurations.to,\n    from: mailConfigurations.from,\n    subject: mailConfigurations.subject,\n    html: mailConfigurations.html\n  };\n  if (process.env.NODE_ENV !== 'test') {\n    _user.default.sendMailWithNodemailer({\n      email: msg.to,\n      subject: msg.subject,\n      content: msg.html\n    });\n  }\n  return true;\n};\nexports.sendEmail = sendEmail;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfdXNlciIsIl9pbnRlcm9wUmVxdWlyZURlZmF1bHQiLCJyZXF1aXJlIiwic2VuZEVtYWlsIiwibWFpbENvbmZpZ3VyYXRpb25zIiwibXNnIiwidG8iLCJmcm9tIiwic3ViamVjdCIsImh0bWwiLCJwcm9jZXNzIiwiZW52IiwiTk9ERV9FTlYiLCJVc2VyIiwic2VuZE1haWxXaXRoTm9kZW1haWxlciIsImVtYWlsIiwiY29udGVudCIsImV4cG9ydHMiXSwic291cmNlUm9vdCI6Ii9Vc2Vycy9hbmRlbGFyd2FuZGEvRGVza3RvcC9lLWNvbW0tdGVhbS1icm9ncmFtbWVycy1ibi9zcmMvaGVscGVycy8iLCJzb3VyY2VzIjpbIm1haWwuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLyogZXNsaW50LWRpc2FibGUgaW1wb3J0L3ByZWZlci1kZWZhdWx0LWV4cG9ydCAqL1xuLyogZXNsaW50LWRpc2FibGUgcmVxdWlyZS1qc2RvYyAqL1xuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGltcG9ydC9uby1leHRyYW5lb3VzLWRlcGVuZGVuY2llcywgaW1wb3J0L25vLW5hbWVkLWFzLWRlZmF1bHQtbWVtYmVyXG5pbXBvcnQgVXNlciBmcm9tICcuLi9zZXJ2aWNlcy91c2VyLnNlcnZpY2VzJztcblxuZXhwb3J0IGNvbnN0IHNlbmRFbWFpbCA9IChtYWlsQ29uZmlndXJhdGlvbnMpID0+IHtcbiAgY29uc3QgbXNnID0ge1xuICAgIHRvOiBtYWlsQ29uZmlndXJhdGlvbnMudG8sXG4gICAgZnJvbTogbWFpbENvbmZpZ3VyYXRpb25zLmZyb20sXG4gICAgc3ViamVjdDogbWFpbENvbmZpZ3VyYXRpb25zLnN1YmplY3QsXG4gICAgaHRtbDogbWFpbENvbmZpZ3VyYXRpb25zLmh0bWwsXG4gIH07XG4gIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Rlc3QnKSB7XG4gICAgVXNlci5zZW5kTWFpbFdpdGhOb2RlbWFpbGVyKHtcbiAgICAgIGVtYWlsOiBtc2cudG8sXG4gICAgICBzdWJqZWN0OiBtc2cuc3ViamVjdCxcbiAgICAgIGNvbnRlbnQ6IG1zZy5odG1sLFxuICAgIH0pO1xuICB9XG4gIHJldHVybiB0cnVlO1xufTtcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUdBLElBQUFBLEtBQUEsR0FBQUMsc0JBQUEsQ0FBQUMsT0FBQTtBQUhBO0FBQ0E7QUFDQTs7QUFHTyxNQUFNQyxTQUFTLEdBQUlDLGtCQUFrQixJQUFLO0VBQy9DLE1BQU1DLEdBQUcsR0FBRztJQUNWQyxFQUFFLEVBQUVGLGtCQUFrQixDQUFDRSxFQUFFO0lBQ3pCQyxJQUFJLEVBQUVILGtCQUFrQixDQUFDRyxJQUFJO0lBQzdCQyxPQUFPLEVBQUVKLGtCQUFrQixDQUFDSSxPQUFPO0lBQ25DQyxJQUFJLEVBQUVMLGtCQUFrQixDQUFDSztFQUMzQixDQUFDO0VBQ0QsSUFBSUMsT0FBTyxDQUFDQyxHQUFHLENBQUNDLFFBQVEsS0FBSyxNQUFNLEVBQUU7SUFDbkNDLGFBQUksQ0FBQ0Msc0JBQXNCLENBQUM7TUFDMUJDLEtBQUssRUFBRVYsR0FBRyxDQUFDQyxFQUFFO01BQ2JFLE9BQU8sRUFBRUgsR0FBRyxDQUFDRyxPQUFPO01BQ3BCUSxPQUFPLEVBQUVYLEdBQUcsQ0FBQ0k7SUFDZixDQUFDLENBQUM7RUFDSjtFQUNBLE9BQU8sSUFBSTtBQUNiLENBQUM7QUFBQ1EsT0FBQSxDQUFBZCxTQUFBLEdBQUFBLFNBQUEifQ==","map":{"version":3,"names":["_user","_interopRequireDefault","require","sendEmail","mailConfigurations","msg","to","from","subject","html","process","env","NODE_ENV","User","sendMailWithNodemailer","email","content","exports"],"sourceRoot":"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/helpers/","sources":["mail.js"],"sourcesContent":["/* eslint-disable import/prefer-default-export */\n/* eslint-disable require-jsdoc */\n// eslint-disable-next-line import/no-extraneous-dependencies, import/no-named-as-default-member\nimport User from '../services/user.services';\n\nexport const sendEmail = (mailConfigurations) => {\n  const msg = {\n    to: mailConfigurations.to,\n    from: mailConfigurations.from,\n    subject: mailConfigurations.subject,\n    html: mailConfigurations.html,\n  };\n  if (process.env.NODE_ENV !== 'test') {\n    User.sendMailWithNodemailer({\n      email: msg.to,\n      subject: msg.subject,\n      content: msg.html,\n    });\n  }\n  return true;\n};\n"],"mappings":";;;;;;;AAGA,IAAAA,KAAA,GAAAC,sBAAA,CAAAC,OAAA;AAHA;AACA;AACA;;AAGO,MAAMC,SAAS,GAAIC,kBAAkB,IAAK;EAC/C,MAAMC,GAAG,GAAG;IACVC,EAAE,EAAEF,kBAAkB,CAACE,EAAE;IACzBC,IAAI,EAAEH,kBAAkB,CAACG,IAAI;IAC7BC,OAAO,EAAEJ,kBAAkB,CAACI,OAAO;IACnCC,IAAI,EAAEL,kBAAkB,CAACK;EAC3B,CAAC;EACD,IAAIC,OAAO,CAACC,GAAG,CAACC,QAAQ,KAAK,MAAM,EAAE;IACnCC,aAAI,CAACC,sBAAsB,CAAC;MAC1BC,KAAK,EAAEV,GAAG,CAACC,EAAE;MACbE,OAAO,EAAEH,GAAG,CAACG,OAAO;MACpBQ,OAAO,EAAEX,GAAG,CAACI;IACf,CAAC,CAAC;EACJ;EACA,OAAO,IAAI;AACb,CAAC;AAACQ,OAAA,CAAAd,SAAA,GAAAA,SAAA"}},"mtime":1682148437940},"{\"assumptions\":{},\"sourceRoot\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/loggers/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"filename\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/loggers/signup.logger.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/node_modules/babel-plugin-add-module-exports/lib/index.js\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-runtime\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"regenerator\":true},\"externalDependencies\":[]},{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.21.0:development":{"value":{"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.viewProfile = exports.verifyPasswordLog = exports.verifiedMfaLog = exports.updateImageLog = exports.updateAvatarLog = exports.resetPasswordLog = exports.redirectGoogleError = exports.redirectGoogle = exports.logVerifyEmail = exports.logSignupError = exports.logSignup = exports.logSetRole = exports.logLogoutError = exports.logLogout = exports.logLoginError = exports.logLogin = exports.logError = exports.logEmailSent = exports.enableMfaLog = exports.editProfiles = exports.disableMfaLog = exports.disableAccountLog = exports.createAdminLog = exports.changePasswordLog = exports.PasswordLog = void 0;\nvar _logger = _interopRequireDefault(require(\"../configs/logger\"));\nvar _models = require(\"../database/models\");\n/* eslint-disable import/named */\n\nconst logSignup = async req => {\n  const {\n    ...data\n  } = req.body;\n  _logger.default.info(`New user signed up: ${data.email}`);\n};\nexports.logSignup = logSignup;\nconst logSignupError = async (req, error) => {\n  const {\n    ...data\n  } = req.body;\n  const logData = {\n    level: 'error',\n    message: `Failed to sign up new user: ${error.message}`,\n    userId: data.id,\n    metadata: {\n      signupRequest: data\n    }\n  };\n  await _models.Log.create(logData);\n  _logger.default.error(`Failed to sign up new user: ${error.message}`);\n};\nexports.logSignupError = logSignupError;\nconst logLogin = async (email, user) => {\n  const logData = {\n    level: 'info',\n    message: `User ${email} logged in`,\n    userId: user.id,\n    metadata: {\n      loginRequest: email\n    }\n  };\n  await _models.Log.create(logData);\n  _logger.default.info(`User ${email} logged in`);\n};\nexports.logLogin = logLogin;\nconst logLoginError = async (req, error) => {\n  _logger.default.error(`user ${req.body.email} Failed to login :${error.message}`);\n};\nexports.logLoginError = logLoginError;\nconst logEmailSent = async email => {\n  _logger.default.info(`Verification email sent to: ${email}`);\n};\nexports.logEmailSent = logEmailSent;\nconst logVerifyEmail = async email => {\n  _logger.default.info(`User ${email} verified email`);\n};\nexports.logVerifyEmail = logVerifyEmail;\nconst logLogout = async req => {\n  const logData = {\n    level: 'info',\n    message: `User ${req.user.email} logged out`,\n    userId: req.user.id,\n    metadata: {\n      logoutRequest: {}\n    }\n  };\n  await _models.Log.create(logData);\n  _logger.default.info(`User ${req.user.email} logged out`);\n};\nexports.logLogout = logLogout;\nconst logLogoutError = async (req, error) => {\n  const logData = {\n    level: 'info',\n    message: error.message,\n    userId: req.user.id,\n    metadata: {\n      logoutRequest: {}\n    }\n  };\n  await _models.Log.create(logData);\n  _logger.default.info(`User ${req.user.email} failed to logged out:${error.message}`);\n};\nexports.logLogoutError = logLogoutError;\nconst logSetRole = async (req, role) => {\n  const logData = {\n    level: 'info',\n    message: `User ${req.user.email} set a new role ${role} to ${req.params.email}`,\n    userId: req.user.id,\n    metadata: {\n      Request: role\n    }\n  };\n  await _models.Log.create(logData);\n  _logger.default.info(`User ${req.user.email} set a new role ${role} to ${req.params.email}`);\n};\nexports.logSetRole = logSetRole;\nconst logError = async (req, error) => {\n  const logData = {\n    level: 'info',\n    message: error.message,\n    userId: req.user.id,\n    metadata: {\n      error: error.message\n    }\n  };\n  await _models.Log.create(logData);\n  _logger.default.info(`User ${req.user.email} encountered an issue :${error.message}`);\n};\nexports.logError = logError;\nconst viewProfile = async (req, profile) => {\n  const logData = {\n    level: 'info',\n    message: `User ${req.user.email} viewed his  profile`,\n    userId: req.user.id,\n    metadata: {\n      profile\n    }\n  };\n  await _models.Log.create(logData);\n  _logger.default.info(`User ${req.user.email} viewed his  profile`);\n};\nexports.viewProfile = viewProfile;\nconst editProfiles = async (req, profile) => {\n  const logData = {\n    level: 'info',\n    message: `User ${req.user.email} edited his  profile`,\n    userId: req.user.id,\n    metadata: {\n      profile\n    }\n  };\n  await _models.Log.create(logData);\n  _logger.default.info(`User ${req.user.email} edited his  profile`);\n};\nexports.editProfiles = editProfiles;\nconst enableMfaLog = async req => {\n  const logData = {\n    level: 'info',\n    message: `User ${req.user.email} enabled mfa`,\n    userId: req.user.id,\n    metadata: {\n      data: req.body\n    }\n  };\n  await _models.Log.create(logData);\n  _logger.default.info(`User ${req.user.email} enabled mfa`);\n};\nexports.enableMfaLog = enableMfaLog;\nconst disableMfaLog = async req => {\n  const logData = {\n    level: 'info',\n    message: `User ${req.user.email} disabled mfa`,\n    userId: req.user.id,\n    metadata: {\n      data: req.body\n    }\n  };\n  await _models.Log.create(logData);\n  _logger.default.info(`User ${req.user.email} disabled mfa`);\n};\nexports.disableMfaLog = disableMfaLog;\nconst verifiedMfaLog = async (req, token) => {\n  const logData = {\n    level: 'info',\n    message: `User ${req.user.email} verified mfa code`,\n    userId: req.user.id,\n    metadata: {\n      data: token\n    }\n  };\n  await _models.Log.create(logData);\n  _logger.default.info(`User ${req.user.email} verified mfa code`);\n};\nexports.verifiedMfaLog = verifiedMfaLog;\nconst createAdminLog = async (req, user) => {\n  const logData = {\n    level: 'info',\n    message: `User ${req.user.email} created an admin ${user.email}`,\n    userId: req.user.id,\n    metadata: {\n      data: user\n    }\n  };\n  await _models.Log.create(logData);\n  _logger.default.info(`User ${req.user.email}created an admin ${user.email}`);\n};\nexports.createAdminLog = createAdminLog;\nconst PasswordLog = async (req, user) => {\n  const logData = {\n    level: 'info',\n    message: `User ${req.user.email} received password reset link`,\n    userId: req.user.id,\n    metadata: {\n      data: user\n    }\n  };\n  await _models.Log.create(logData);\n  _logger.default.info(`User ${req.user.email} received password reset link`);\n};\nexports.PasswordLog = PasswordLog;\nconst verifyPasswordLog = async (req, user) => {\n  const logData = {\n    level: 'info',\n    message: `User ${req.user.email} Password reset successful`,\n    userId: req.user.id,\n    metadata: {\n      data: user\n    }\n  };\n  await _models.Log.create(logData);\n  _logger.default.info(`User ${req.user.email} Password reset successful`);\n};\nexports.verifyPasswordLog = verifyPasswordLog;\nconst changePasswordLog = async (req, user) => {\n  const logData = {\n    level: 'info',\n    message: `User ${req.user.email} changed password successful`,\n    userId: req.user.id,\n    metadata: {\n      data: user\n    }\n  };\n  await _models.Log.create(logData);\n  _logger.default.info(`User ${req.user.email} changed password successful`);\n};\nexports.changePasswordLog = changePasswordLog;\nconst disableAccountLog = async (req, user) => {\n  const logData = {\n    level: 'info',\n    message: `User ${req.user.email} disabled account ${req.params.userId} successful`,\n    userId: req.user.id,\n    metadata: {\n      data: user\n    }\n  };\n  await _models.Log.create(logData);\n  _logger.default.info(`User ${req.user.email} disabled account ${req.params.userId} successful`);\n};\nexports.disableAccountLog = disableAccountLog;\nconst redirectGoogle = async email => {\n  _logger.default.info(`User ${email} redirected to Google`);\n};\nexports.redirectGoogle = redirectGoogle;\nconst redirectGoogleError = async error => {\n  _logger.default.error(`User not redirected to Google due to ${error} `);\n};\nexports.redirectGoogleError = redirectGoogleError;\nconst resetPasswordLog = async req => {\n  _logger.default.error(`User ${req.body.email} resetted password `);\n};\nexports.resetPasswordLog = resetPasswordLog;\nconst updateAvatarLog = async (req, user) => {\n  const logData = {\n    level: 'info',\n    message: `User ${req.user.email} updated his account avatar successful`,\n    userId: req.user.id,\n    metadata: {\n      data: user\n    }\n  };\n  await _models.Log.create(logData);\n};\nexports.updateAvatarLog = updateAvatarLog;\nconst updateImageLog = async (req, user) => {\n  const logData = {\n    level: 'info',\n    message: `User ${req.user.email} updated his account cover image successfully`,\n    userId: req.user.id,\n    metadata: {\n      data: user\n    }\n  };\n  await _models.Log.create(logData);\n};\nexports.updateImageLog = updateImageLog;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfbG9nZ2VyIiwiX2ludGVyb3BSZXF1aXJlRGVmYXVsdCIsInJlcXVpcmUiLCJfbW9kZWxzIiwibG9nU2lnbnVwIiwicmVxIiwiZGF0YSIsImJvZHkiLCJsb2dnZXIiLCJpbmZvIiwiZW1haWwiLCJleHBvcnRzIiwibG9nU2lnbnVwRXJyb3IiLCJlcnJvciIsImxvZ0RhdGEiLCJsZXZlbCIsIm1lc3NhZ2UiLCJ1c2VySWQiLCJpZCIsIm1ldGFkYXRhIiwic2lnbnVwUmVxdWVzdCIsIkxvZyIsImNyZWF0ZSIsImxvZ0xvZ2luIiwidXNlciIsImxvZ2luUmVxdWVzdCIsImxvZ0xvZ2luRXJyb3IiLCJsb2dFbWFpbFNlbnQiLCJsb2dWZXJpZnlFbWFpbCIsImxvZ0xvZ291dCIsImxvZ291dFJlcXVlc3QiLCJsb2dMb2dvdXRFcnJvciIsImxvZ1NldFJvbGUiLCJyb2xlIiwicGFyYW1zIiwiUmVxdWVzdCIsImxvZ0Vycm9yIiwidmlld1Byb2ZpbGUiLCJwcm9maWxlIiwiZWRpdFByb2ZpbGVzIiwiZW5hYmxlTWZhTG9nIiwiZGlzYWJsZU1mYUxvZyIsInZlcmlmaWVkTWZhTG9nIiwidG9rZW4iLCJjcmVhdGVBZG1pbkxvZyIsIlBhc3N3b3JkTG9nIiwidmVyaWZ5UGFzc3dvcmRMb2ciLCJjaGFuZ2VQYXNzd29yZExvZyIsImRpc2FibGVBY2NvdW50TG9nIiwicmVkaXJlY3RHb29nbGUiLCJyZWRpcmVjdEdvb2dsZUVycm9yIiwicmVzZXRQYXNzd29yZExvZyIsInVwZGF0ZUF2YXRhckxvZyIsInVwZGF0ZUltYWdlTG9nIl0sInNvdXJjZVJvb3QiOiIvVXNlcnMvYW5kZWxhcndhbmRhL0Rlc2t0b3AvZS1jb21tLXRlYW0tYnJvZ3JhbW1lcnMtYm4vc3JjL2xvZ2dlcnMvIiwic291cmNlcyI6WyJzaWdudXAubG9nZ2VyLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qIGVzbGludC1kaXNhYmxlIGltcG9ydC9uYW1lZCAqL1xuXG5pbXBvcnQgbG9nZ2VyIGZyb20gJy4uL2NvbmZpZ3MvbG9nZ2VyJztcbmltcG9ydCB7IExvZyB9IGZyb20gJy4uL2RhdGFiYXNlL21vZGVscyc7XG5cbmV4cG9ydCBjb25zdCBsb2dTaWdudXAgPSBhc3luYyAocmVxKSA9PiB7XG4gIGNvbnN0IHsgLi4uZGF0YSB9ID0gcmVxLmJvZHk7XG4gIGxvZ2dlci5pbmZvKGBOZXcgdXNlciBzaWduZWQgdXA6ICR7ZGF0YS5lbWFpbH1gKTtcbn07XG5cbmV4cG9ydCBjb25zdCBsb2dTaWdudXBFcnJvciA9IGFzeW5jIChyZXEsIGVycm9yKSA9PiB7XG4gIGNvbnN0IHsgLi4uZGF0YSB9ID0gcmVxLmJvZHk7XG4gIGNvbnN0IGxvZ0RhdGEgPSB7XG4gICAgbGV2ZWw6ICdlcnJvcicsXG4gICAgbWVzc2FnZTogYEZhaWxlZCB0byBzaWduIHVwIG5ldyB1c2VyOiAke2Vycm9yLm1lc3NhZ2V9YCxcbiAgICB1c2VySWQ6IGRhdGEuaWQsXG4gICAgbWV0YWRhdGE6IHsgc2lnbnVwUmVxdWVzdDogZGF0YSB9LFxuICB9O1xuICBhd2FpdCBMb2cuY3JlYXRlKGxvZ0RhdGEpO1xuICBsb2dnZXIuZXJyb3IoYEZhaWxlZCB0byBzaWduIHVwIG5ldyB1c2VyOiAke2Vycm9yLm1lc3NhZ2V9YCk7XG59O1xuXG5leHBvcnQgY29uc3QgbG9nTG9naW4gPSBhc3luYyAoZW1haWwsIHVzZXIpID0+IHtcbiAgY29uc3QgbG9nRGF0YSA9IHtcbiAgICBsZXZlbDogJ2luZm8nLFxuICAgIG1lc3NhZ2U6IGBVc2VyICR7ZW1haWx9IGxvZ2dlZCBpbmAsXG4gICAgdXNlcklkOiB1c2VyLmlkLFxuICAgIG1ldGFkYXRhOiB7IGxvZ2luUmVxdWVzdDogZW1haWwgfSxcbiAgfTtcbiAgYXdhaXQgTG9nLmNyZWF0ZShsb2dEYXRhKTtcbiAgbG9nZ2VyLmluZm8oYFVzZXIgJHtlbWFpbH0gbG9nZ2VkIGluYCk7XG59O1xuXG5leHBvcnQgY29uc3QgbG9nTG9naW5FcnJvciA9IGFzeW5jIChyZXEsIGVycm9yKSA9PiB7XG4gIGxvZ2dlci5lcnJvcihgdXNlciAke3JlcS5ib2R5LmVtYWlsfSBGYWlsZWQgdG8gbG9naW4gOiR7ZXJyb3IubWVzc2FnZX1gKTtcbn07XG5cbmV4cG9ydCBjb25zdCBsb2dFbWFpbFNlbnQgPSBhc3luYyAoZW1haWwpID0+IHtcbiAgbG9nZ2VyLmluZm8oYFZlcmlmaWNhdGlvbiBlbWFpbCBzZW50IHRvOiAke2VtYWlsfWApO1xufTtcbmV4cG9ydCBjb25zdCBsb2dWZXJpZnlFbWFpbCA9IGFzeW5jIChlbWFpbCkgPT4ge1xuICBsb2dnZXIuaW5mbyhgVXNlciAke2VtYWlsfSB2ZXJpZmllZCBlbWFpbGApO1xufTtcbmV4cG9ydCBjb25zdCBsb2dMb2dvdXQgPSBhc3luYyAocmVxKSA9PiB7XG4gIGNvbnN0IGxvZ0RhdGEgPSB7XG4gICAgbGV2ZWw6ICdpbmZvJyxcbiAgICBtZXNzYWdlOiBgVXNlciAke3JlcS51c2VyLmVtYWlsfSBsb2dnZWQgb3V0YCxcbiAgICB1c2VySWQ6IHJlcS51c2VyLmlkLFxuICAgIG1ldGFkYXRhOiB7IGxvZ291dFJlcXVlc3Q6IHt9IH0sXG4gIH07XG4gIGF3YWl0IExvZy5jcmVhdGUobG9nRGF0YSk7XG4gIGxvZ2dlci5pbmZvKGBVc2VyICR7cmVxLnVzZXIuZW1haWx9IGxvZ2dlZCBvdXRgKTtcbn07XG5leHBvcnQgY29uc3QgbG9nTG9nb3V0RXJyb3IgPSBhc3luYyAocmVxLCBlcnJvcikgPT4ge1xuICBjb25zdCBsb2dEYXRhID0ge1xuICAgIGxldmVsOiAnaW5mbycsXG4gICAgbWVzc2FnZTogZXJyb3IubWVzc2FnZSxcbiAgICB1c2VySWQ6IHJlcS51c2VyLmlkLFxuICAgIG1ldGFkYXRhOiB7IGxvZ291dFJlcXVlc3Q6IHt9IH0sXG4gIH07XG4gIGF3YWl0IExvZy5jcmVhdGUobG9nRGF0YSk7XG4gIGxvZ2dlci5pbmZvKGBVc2VyICR7cmVxLnVzZXIuZW1haWx9IGZhaWxlZCB0byBsb2dnZWQgb3V0OiR7ZXJyb3IubWVzc2FnZX1gKTtcbn07XG5leHBvcnQgY29uc3QgbG9nU2V0Um9sZSA9IGFzeW5jIChyZXEsIHJvbGUpID0+IHtcbiAgY29uc3QgbG9nRGF0YSA9IHtcbiAgICBsZXZlbDogJ2luZm8nLFxuICAgIG1lc3NhZ2U6IGBVc2VyICR7cmVxLnVzZXIuZW1haWx9IHNldCBhIG5ldyByb2xlICR7cm9sZX0gdG8gJHtyZXEucGFyYW1zLmVtYWlsfWAsXG4gICAgdXNlcklkOiByZXEudXNlci5pZCxcbiAgICBtZXRhZGF0YTogeyBSZXF1ZXN0OiByb2xlIH0sXG4gIH07XG4gIGF3YWl0IExvZy5jcmVhdGUobG9nRGF0YSk7XG4gIGxvZ2dlci5pbmZvKGBVc2VyICR7cmVxLnVzZXIuZW1haWx9IHNldCBhIG5ldyByb2xlICR7cm9sZX0gdG8gJHtyZXEucGFyYW1zLmVtYWlsfWApO1xufTtcbmV4cG9ydCBjb25zdCBsb2dFcnJvciA9IGFzeW5jIChyZXEsIGVycm9yKSA9PiB7XG4gIGNvbnN0IGxvZ0RhdGEgPSB7XG4gICAgbGV2ZWw6ICdpbmZvJyxcbiAgICBtZXNzYWdlOiBlcnJvci5tZXNzYWdlLFxuICAgIHVzZXJJZDogcmVxLnVzZXIuaWQsXG4gICAgbWV0YWRhdGE6IHsgZXJyb3I6IGVycm9yLm1lc3NhZ2UgfSxcbiAgfTtcbiAgYXdhaXQgTG9nLmNyZWF0ZShsb2dEYXRhKTtcbiAgbG9nZ2VyLmluZm8oYFVzZXIgJHtyZXEudXNlci5lbWFpbH0gZW5jb3VudGVyZWQgYW4gaXNzdWUgOiR7ZXJyb3IubWVzc2FnZX1gKTtcbn07XG5leHBvcnQgY29uc3Qgdmlld1Byb2ZpbGUgPSBhc3luYyAocmVxLCBwcm9maWxlKSA9PiB7XG4gIGNvbnN0IGxvZ0RhdGEgPSB7XG4gICAgbGV2ZWw6ICdpbmZvJyxcbiAgICBtZXNzYWdlOiBgVXNlciAke3JlcS51c2VyLmVtYWlsfSB2aWV3ZWQgaGlzICBwcm9maWxlYCxcbiAgICB1c2VySWQ6IHJlcS51c2VyLmlkLFxuICAgIG1ldGFkYXRhOiB7IHByb2ZpbGUgfSxcbiAgfTtcbiAgYXdhaXQgTG9nLmNyZWF0ZShsb2dEYXRhKTtcbiAgbG9nZ2VyLmluZm8oYFVzZXIgJHtyZXEudXNlci5lbWFpbH0gdmlld2VkIGhpcyAgcHJvZmlsZWApO1xufTtcbmV4cG9ydCBjb25zdCBlZGl0UHJvZmlsZXMgPSBhc3luYyAocmVxLCBwcm9maWxlKSA9PiB7XG4gIGNvbnN0IGxvZ0RhdGEgPSB7XG4gICAgbGV2ZWw6ICdpbmZvJyxcbiAgICBtZXNzYWdlOiBgVXNlciAke3JlcS51c2VyLmVtYWlsfSBlZGl0ZWQgaGlzICBwcm9maWxlYCxcbiAgICB1c2VySWQ6IHJlcS51c2VyLmlkLFxuICAgIG1ldGFkYXRhOiB7IHByb2ZpbGUgfSxcbiAgfTtcbiAgYXdhaXQgTG9nLmNyZWF0ZShsb2dEYXRhKTtcbiAgbG9nZ2VyLmluZm8oYFVzZXIgJHtyZXEudXNlci5lbWFpbH0gZWRpdGVkIGhpcyAgcHJvZmlsZWApO1xufTtcbmV4cG9ydCBjb25zdCBlbmFibGVNZmFMb2cgPSBhc3luYyAocmVxKSA9PiB7XG4gIGNvbnN0IGxvZ0RhdGEgPSB7XG4gICAgbGV2ZWw6ICdpbmZvJyxcbiAgICBtZXNzYWdlOiBgVXNlciAke3JlcS51c2VyLmVtYWlsfSBlbmFibGVkIG1mYWAsXG4gICAgdXNlcklkOiByZXEudXNlci5pZCxcbiAgICBtZXRhZGF0YTogeyBkYXRhOiByZXEuYm9keSB9LFxuICB9O1xuICBhd2FpdCBMb2cuY3JlYXRlKGxvZ0RhdGEpO1xuICBsb2dnZXIuaW5mbyhgVXNlciAke3JlcS51c2VyLmVtYWlsfSBlbmFibGVkIG1mYWApO1xufTtcbmV4cG9ydCBjb25zdCBkaXNhYmxlTWZhTG9nID0gYXN5bmMgKHJlcSkgPT4ge1xuICBjb25zdCBsb2dEYXRhID0ge1xuICAgIGxldmVsOiAnaW5mbycsXG4gICAgbWVzc2FnZTogYFVzZXIgJHtyZXEudXNlci5lbWFpbH0gZGlzYWJsZWQgbWZhYCxcbiAgICB1c2VySWQ6IHJlcS51c2VyLmlkLFxuICAgIG1ldGFkYXRhOiB7IGRhdGE6IHJlcS5ib2R5IH0sXG4gIH07XG4gIGF3YWl0IExvZy5jcmVhdGUobG9nRGF0YSk7XG4gIGxvZ2dlci5pbmZvKGBVc2VyICR7cmVxLnVzZXIuZW1haWx9IGRpc2FibGVkIG1mYWApO1xufTtcbmV4cG9ydCBjb25zdCB2ZXJpZmllZE1mYUxvZyA9IGFzeW5jIChyZXEsIHRva2VuKSA9PiB7XG4gIGNvbnN0IGxvZ0RhdGEgPSB7XG4gICAgbGV2ZWw6ICdpbmZvJyxcbiAgICBtZXNzYWdlOiBgVXNlciAke3JlcS51c2VyLmVtYWlsfSB2ZXJpZmllZCBtZmEgY29kZWAsXG4gICAgdXNlcklkOiByZXEudXNlci5pZCxcbiAgICBtZXRhZGF0YTogeyBkYXRhOiB0b2tlbiB9LFxuICB9O1xuICBhd2FpdCBMb2cuY3JlYXRlKGxvZ0RhdGEpO1xuICBsb2dnZXIuaW5mbyhgVXNlciAke3JlcS51c2VyLmVtYWlsfSB2ZXJpZmllZCBtZmEgY29kZWApO1xufTtcbmV4cG9ydCBjb25zdCBjcmVhdGVBZG1pbkxvZyA9IGFzeW5jIChyZXEsIHVzZXIpID0+IHtcbiAgY29uc3QgbG9nRGF0YSA9IHtcbiAgICBsZXZlbDogJ2luZm8nLFxuICAgIG1lc3NhZ2U6IGBVc2VyICR7cmVxLnVzZXIuZW1haWx9IGNyZWF0ZWQgYW4gYWRtaW4gJHt1c2VyLmVtYWlsfWAsXG4gICAgdXNlcklkOiByZXEudXNlci5pZCxcbiAgICBtZXRhZGF0YTogeyBkYXRhOiB1c2VyIH0sXG4gIH07XG4gIGF3YWl0IExvZy5jcmVhdGUobG9nRGF0YSk7XG4gIGxvZ2dlci5pbmZvKGBVc2VyICR7cmVxLnVzZXIuZW1haWx9Y3JlYXRlZCBhbiBhZG1pbiAke3VzZXIuZW1haWx9YCk7XG59O1xuZXhwb3J0IGNvbnN0IFBhc3N3b3JkTG9nID0gYXN5bmMgKHJlcSwgdXNlcikgPT4ge1xuICBjb25zdCBsb2dEYXRhID0ge1xuICAgIGxldmVsOiAnaW5mbycsXG4gICAgbWVzc2FnZTogYFVzZXIgJHtyZXEudXNlci5lbWFpbH0gcmVjZWl2ZWQgcGFzc3dvcmQgcmVzZXQgbGlua2AsXG4gICAgdXNlcklkOiByZXEudXNlci5pZCxcbiAgICBtZXRhZGF0YTogeyBkYXRhOiB1c2VyIH0sXG4gIH07XG4gIGF3YWl0IExvZy5jcmVhdGUobG9nRGF0YSk7XG4gIGxvZ2dlci5pbmZvKGBVc2VyICR7cmVxLnVzZXIuZW1haWx9IHJlY2VpdmVkIHBhc3N3b3JkIHJlc2V0IGxpbmtgKTtcbn07XG5leHBvcnQgY29uc3QgdmVyaWZ5UGFzc3dvcmRMb2cgPSBhc3luYyAocmVxLCB1c2VyKSA9PiB7XG4gIGNvbnN0IGxvZ0RhdGEgPSB7XG4gICAgbGV2ZWw6ICdpbmZvJyxcbiAgICBtZXNzYWdlOiBgVXNlciAke3JlcS51c2VyLmVtYWlsfSBQYXNzd29yZCByZXNldCBzdWNjZXNzZnVsYCxcbiAgICB1c2VySWQ6IHJlcS51c2VyLmlkLFxuICAgIG1ldGFkYXRhOiB7IGRhdGE6IHVzZXIgfSxcbiAgfTtcbiAgYXdhaXQgTG9nLmNyZWF0ZShsb2dEYXRhKTtcbiAgbG9nZ2VyLmluZm8oYFVzZXIgJHtyZXEudXNlci5lbWFpbH0gUGFzc3dvcmQgcmVzZXQgc3VjY2Vzc2Z1bGApO1xufTtcbmV4cG9ydCBjb25zdCBjaGFuZ2VQYXNzd29yZExvZyA9IGFzeW5jIChyZXEsIHVzZXIpID0+IHtcbiAgY29uc3QgbG9nRGF0YSA9IHtcbiAgICBsZXZlbDogJ2luZm8nLFxuICAgIG1lc3NhZ2U6IGBVc2VyICR7cmVxLnVzZXIuZW1haWx9IGNoYW5nZWQgcGFzc3dvcmQgc3VjY2Vzc2Z1bGAsXG4gICAgdXNlcklkOiByZXEudXNlci5pZCxcbiAgICBtZXRhZGF0YTogeyBkYXRhOiB1c2VyIH0sXG4gIH07XG4gIGF3YWl0IExvZy5jcmVhdGUobG9nRGF0YSk7XG4gIGxvZ2dlci5pbmZvKGBVc2VyICR7cmVxLnVzZXIuZW1haWx9IGNoYW5nZWQgcGFzc3dvcmQgc3VjY2Vzc2Z1bGApO1xufTtcbmV4cG9ydCBjb25zdCBkaXNhYmxlQWNjb3VudExvZyA9IGFzeW5jIChyZXEsIHVzZXIpID0+IHtcbiAgY29uc3QgbG9nRGF0YSA9IHtcbiAgICBsZXZlbDogJ2luZm8nLFxuICAgIG1lc3NhZ2U6IGBVc2VyICR7cmVxLnVzZXIuZW1haWx9IGRpc2FibGVkIGFjY291bnQgJHtyZXEucGFyYW1zLnVzZXJJZH0gc3VjY2Vzc2Z1bGAsXG4gICAgdXNlcklkOiByZXEudXNlci5pZCxcbiAgICBtZXRhZGF0YTogeyBkYXRhOiB1c2VyIH0sXG4gIH07XG4gIGF3YWl0IExvZy5jcmVhdGUobG9nRGF0YSk7XG4gIGxvZ2dlci5pbmZvKGBVc2VyICR7cmVxLnVzZXIuZW1haWx9IGRpc2FibGVkIGFjY291bnQgJHtyZXEucGFyYW1zLnVzZXJJZH0gc3VjY2Vzc2Z1bGApO1xufTtcbmV4cG9ydCBjb25zdCByZWRpcmVjdEdvb2dsZSA9IGFzeW5jIChlbWFpbCkgPT4ge1xuICBsb2dnZXIuaW5mbyhgVXNlciAke2VtYWlsfSByZWRpcmVjdGVkIHRvIEdvb2dsZWApO1xufTtcbmV4cG9ydCBjb25zdCByZWRpcmVjdEdvb2dsZUVycm9yID0gYXN5bmMgKGVycm9yKSA9PiB7XG4gIGxvZ2dlci5lcnJvcihgVXNlciBub3QgcmVkaXJlY3RlZCB0byBHb29nbGUgZHVlIHRvICR7ZXJyb3J9IGApO1xufTtcbmV4cG9ydCBjb25zdCByZXNldFBhc3N3b3JkTG9nID0gYXN5bmMgKHJlcSkgPT4ge1xuICBsb2dnZXIuZXJyb3IoYFVzZXIgJHtyZXEuYm9keS5lbWFpbH0gcmVzZXR0ZWQgcGFzc3dvcmQgYCk7XG59O1xuZXhwb3J0IGNvbnN0IHVwZGF0ZUF2YXRhckxvZyA9IGFzeW5jIChyZXEsIHVzZXIpID0+IHtcbiAgY29uc3QgbG9nRGF0YSA9IHtcbiAgICBsZXZlbDogJ2luZm8nLFxuICAgIG1lc3NhZ2U6IGBVc2VyICR7cmVxLnVzZXIuZW1haWx9IHVwZGF0ZWQgaGlzIGFjY291bnQgYXZhdGFyIHN1Y2Nlc3NmdWxgLFxuICAgIHVzZXJJZDogcmVxLnVzZXIuaWQsXG4gICAgbWV0YWRhdGE6IHsgZGF0YTogdXNlciB9LFxuICB9O1xuICBhd2FpdCBMb2cuY3JlYXRlKGxvZ0RhdGEpO1xufTtcbmV4cG9ydCBjb25zdCB1cGRhdGVJbWFnZUxvZyA9IGFzeW5jIChyZXEsIHVzZXIpID0+IHtcbiAgY29uc3QgbG9nRGF0YSA9IHtcbiAgICBsZXZlbDogJ2luZm8nLFxuICAgIG1lc3NhZ2U6IGBVc2VyICR7cmVxLnVzZXIuZW1haWx9IHVwZGF0ZWQgaGlzIGFjY291bnQgY292ZXIgaW1hZ2Ugc3VjY2Vzc2Z1bGx5YCxcbiAgICB1c2VySWQ6IHJlcS51c2VyLmlkLFxuICAgIG1ldGFkYXRhOiB7IGRhdGE6IHVzZXIgfSxcbiAgfTtcbiAgYXdhaXQgTG9nLmNyZWF0ZShsb2dEYXRhKTtcbn07XG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFFQSxJQUFBQSxPQUFBLEdBQUFDLHNCQUFBLENBQUFDLE9BQUE7QUFDQSxJQUFBQyxPQUFBLEdBQUFELE9BQUE7QUFIQTs7QUFLTyxNQUFNRSxTQUFTLEdBQUcsTUFBT0MsR0FBRyxJQUFLO0VBQ3RDLE1BQU07SUFBRSxHQUFHQztFQUFLLENBQUMsR0FBR0QsR0FBRyxDQUFDRSxJQUFJO0VBQzVCQyxlQUFNLENBQUNDLElBQUksQ0FBRSx1QkFBc0JILElBQUksQ0FBQ0ksS0FBTSxFQUFDLENBQUM7QUFDbEQsQ0FBQztBQUFDQyxPQUFBLENBQUFQLFNBQUEsR0FBQUEsU0FBQTtBQUVLLE1BQU1RLGNBQWMsR0FBRyxNQUFBQSxDQUFPUCxHQUFHLEVBQUVRLEtBQUssS0FBSztFQUNsRCxNQUFNO0lBQUUsR0FBR1A7RUFBSyxDQUFDLEdBQUdELEdBQUcsQ0FBQ0UsSUFBSTtFQUM1QixNQUFNTyxPQUFPLEdBQUc7SUFDZEMsS0FBSyxFQUFFLE9BQU87SUFDZEMsT0FBTyxFQUFHLCtCQUE4QkgsS0FBSyxDQUFDRyxPQUFRLEVBQUM7SUFDdkRDLE1BQU0sRUFBRVgsSUFBSSxDQUFDWSxFQUFFO0lBQ2ZDLFFBQVEsRUFBRTtNQUFFQyxhQUFhLEVBQUVkO0lBQUs7RUFDbEMsQ0FBQztFQUNELE1BQU1lLFdBQUcsQ0FBQ0MsTUFBTSxDQUFDUixPQUFPLENBQUM7RUFD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","map":{"version":3,"names":["_logger","_interopRequireDefault","require","_models","logSignup","req","data","body","logger","info","email","exports","logSignupError","error","logData","level","message","userId","id","metadata","signupRequest","Log","create","logLogin","user","loginRequest","logLoginError","logEmailSent","logVerifyEmail","logLogout","logoutRequest","logLogoutError","logSetRole","role","params","Request","logError","viewProfile","profile","editProfiles","enableMfaLog","disableMfaLog","verifiedMfaLog","token","createAdminLog","PasswordLog","verifyPasswordLog","changePasswordLog","disableAccountLog","redirectGoogle","redirectGoogleError","resetPasswordLog","updateAvatarLog","updateImageLog"],"sourceRoot":"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/loggers/","sources":["signup.logger.js"],"sourcesContent":["/* eslint-disable import/named */\n\nimport logger from '../configs/logger';\nimport { Log } from '../database/models';\n\nexport const logSignup = async (req) => {\n  const { ...data } = req.body;\n  logger.info(`New user signed up: ${data.email}`);\n};\n\nexport const logSignupError = async (req, error) => {\n  const { ...data } = req.body;\n  const logData = {\n    level: 'error',\n    message: `Failed to sign up new user: ${error.message}`,\n    userId: data.id,\n    metadata: { signupRequest: data },\n  };\n  await Log.create(logData);\n  logger.error(`Failed to sign up new user: ${error.message}`);\n};\n\nexport const logLogin = async (email, user) => {\n  const logData = {\n    level: 'info',\n    message: `User ${email} logged in`,\n    userId: user.id,\n    metadata: { loginRequest: email },\n  };\n  await Log.create(logData);\n  logger.info(`User ${email} logged in`);\n};\n\nexport const logLoginError = async (req, error) => {\n  logger.error(`user ${req.body.email} Failed to login :${error.message}`);\n};\n\nexport const logEmailSent = async (email) => {\n  logger.info(`Verification email sent to: ${email}`);\n};\nexport const logVerifyEmail = async (email) => {\n  logger.info(`User ${email} verified email`);\n};\nexport const logLogout = async (req) => {\n  const logData = {\n    level: 'info',\n    message: `User ${req.user.email} logged out`,\n    userId: req.user.id,\n    metadata: { logoutRequest: {} },\n  };\n  await Log.create(logData);\n  logger.info(`User ${req.user.email} logged out`);\n};\nexport const logLogoutError = async (req, error) => {\n  const logData = {\n    level: 'info',\n    message: error.message,\n    userId: req.user.id,\n    metadata: { logoutRequest: {} },\n  };\n  await Log.create(logData);\n  logger.info(`User ${req.user.email} failed to logged out:${error.message}`);\n};\nexport const logSetRole = async (req, role) => {\n  const logData = {\n    level: 'info',\n    message: `User ${req.user.email} set a new role ${role} to ${req.params.email}`,\n    userId: req.user.id,\n    metadata: { Request: role },\n  };\n  await Log.create(logData);\n  logger.info(`User ${req.user.email} set a new role ${role} to ${req.params.email}`);\n};\nexport const logError = async (req, error) => {\n  const logData = {\n    level: 'info',\n    message: error.message,\n    userId: req.user.id,\n    metadata: { error: error.message },\n  };\n  await Log.create(logData);\n  logger.info(`User ${req.user.email} encountered an issue :${error.message}`);\n};\nexport const viewProfile = async (req, profile) => {\n  const logData = {\n    level: 'info',\n    message: `User ${req.user.email} viewed his  profile`,\n    userId: req.user.id,\n    metadata: { profile },\n  };\n  await Log.create(logData);\n  logger.info(`User ${req.user.email} viewed his  profile`);\n};\nexport const editProfiles = async (req, profile) => {\n  const logData = {\n    level: 'info',\n    message: `User ${req.user.email} edited his  profile`,\n    userId: req.user.id,\n    metadata: { profile },\n  };\n  await Log.create(logData);\n  logger.info(`User ${req.user.email} edited his  profile`);\n};\nexport const enableMfaLog = async (req) => {\n  const logData = {\n    level: 'info',\n    message: `User ${req.user.email} enabled mfa`,\n    userId: req.user.id,\n    metadata: { data: req.body },\n  };\n  await Log.create(logData);\n  logger.info(`User ${req.user.email} enabled mfa`);\n};\nexport const disableMfaLog = async (req) => {\n  const logData = {\n    level: 'info',\n    message: `User ${req.user.email} disabled mfa`,\n    userId: req.user.id,\n    metadata: { data: req.body },\n  };\n  await Log.create(logData);\n  logger.info(`User ${req.user.email} disabled mfa`);\n};\nexport const verifiedMfaLog = async (req, token) => {\n  const logData = {\n    level: 'info',\n    message: `User ${req.user.email} verified mfa code`,\n    userId: req.user.id,\n    metadata: { data: token },\n  };\n  await Log.create(logData);\n  logger.info(`User ${req.user.email} verified mfa code`);\n};\nexport const createAdminLog = async (req, user) => {\n  const logData = {\n    level: 'info',\n    message: `User ${req.user.email} created an admin ${user.email}`,\n    userId: req.user.id,\n    metadata: { data: user },\n  };\n  await Log.create(logData);\n  logger.info(`User ${req.user.email}created an admin ${user.email}`);\n};\nexport const PasswordLog = async (req, user) => {\n  const logData = {\n    level: 'info',\n    message: `User ${req.user.email} received password reset link`,\n    userId: req.user.id,\n    metadata: { data: user },\n  };\n  await Log.create(logData);\n  logger.info(`User ${req.user.email} received password reset link`);\n};\nexport const verifyPasswordLog = async (req, user) => {\n  const logData = {\n    level: 'info',\n    message: `User ${req.user.email} Password reset successful`,\n    userId: req.user.id,\n    metadata: { data: user },\n  };\n  await Log.create(logData);\n  logger.info(`User ${req.user.email} Password reset successful`);\n};\nexport const changePasswordLog = async (req, user) => {\n  const logData = {\n    level: 'info',\n    message: `User ${req.user.email} changed password successful`,\n    userId: req.user.id,\n    metadata: { data: user },\n  };\n  await Log.create(logData);\n  logger.info(`User ${req.user.email} changed password successful`);\n};\nexport const disableAccountLog = async (req, user) => {\n  const logData = {\n    level: 'info',\n    message: `User ${req.user.email} disabled account ${req.params.userId} successful`,\n    userId: req.user.id,\n    metadata: { data: user },\n  };\n  await Log.create(logData);\n  logger.info(`User ${req.user.email} disabled account ${req.params.userId} successful`);\n};\nexport const redirectGoogle = async (email) => {\n  logger.info(`User ${email} redirected to Google`);\n};\nexport const redirectGoogleError = async (error) => {\n  logger.error(`User not redirected to Google due to ${error} `);\n};\nexport const resetPasswordLog = async (req) => {\n  logger.error(`User ${req.body.email} resetted password `);\n};\nexport const updateAvatarLog = async (req, user) => {\n  const logData = {\n    level: 'info',\n    message: `User ${req.user.email} updated his account avatar successful`,\n    userId: req.user.id,\n    metadata: { data: user },\n  };\n  await Log.create(logData);\n};\nexport const updateImageLog = async (req, user) => {\n  const logData = {\n    level: 'info',\n    message: `User ${req.user.email} updated his account cover image successfully`,\n    userId: req.user.id,\n    metadata: { data: user },\n  };\n  await Log.create(logData);\n};\n"],"mappings":"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"}},"mtime":1682148437943},"{\"assumptions\":{},\"sourceRoot\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/configs/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"filename\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/configs/logger.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/node_modules/babel-plugin-add-module-exports/lib/index.js\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-runtime\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"regenerator\":true},\"externalDependencies\":[]},{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.21.0:development":{"value":{"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _winston = require(\"winston\");\nvar _colors = _interopRequireDefault(require(\"colors\"));\n/* eslint-disable no-unused-vars */\n\nconst logger = (0, _winston.createLogger)({\n  level: 'info',\n  format: _winston.format.combine(_winston.format.timestamp(), _winston.format.colorize(), _winston.format.printf(info => `[${info.timestamp}] ${info.level}: ${info.message}`)),\n  transports: [new _winston.transports.Console({\n    format: _winston.format.combine(_winston.format.colorize(), _winston.format.printf(info => `[${info.timestamp}] ${info.level}: ${info.message}`))\n  })]\n});\nvar _default = logger;\nexports.default = _default;\nmodule.exports = exports.default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfd2luc3RvbiIsInJlcXVpcmUiLCJfY29sb3JzIiwiX2ludGVyb3BSZXF1aXJlRGVmYXVsdCIsImxvZ2dlciIsImNyZWF0ZUxvZ2dlciIsImxldmVsIiwiZm9ybWF0IiwiY29tYmluZSIsInRpbWVzdGFtcCIsImNvbG9yaXplIiwicHJpbnRmIiwiaW5mbyIsIm1lc3NhZ2UiLCJ0cmFuc3BvcnRzIiwiQ29uc29sZSIsIl9kZWZhdWx0IiwiZXhwb3J0cyIsImRlZmF1bHQiLCJtb2R1bGUiXSwic291cmNlUm9vdCI6Ii9Vc2Vycy9hbmRlbGFyd2FuZGEvRGVza3RvcC9lLWNvbW0tdGVhbS1icm9ncmFtbWVycy1ibi9zcmMvY29uZmlncy8iLCJzb3VyY2VzIjpbImxvZ2dlci5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKiBlc2xpbnQtZGlzYWJsZSBuby11bnVzZWQtdmFycyAqL1xuaW1wb3J0IHsgY3JlYXRlTG9nZ2VyLCBmb3JtYXQsIHRyYW5zcG9ydHMgfSBmcm9tICd3aW5zdG9uJztcbmltcG9ydCBjb2xvcnMgZnJvbSAnY29sb3JzJztcblxuY29uc3QgbG9nZ2VyID0gY3JlYXRlTG9nZ2VyKHtcbiAgbGV2ZWw6ICdpbmZvJyxcbiAgZm9ybWF0OiBmb3JtYXQuY29tYmluZShcbiAgICBmb3JtYXQudGltZXN0YW1wKCksXG4gICAgZm9ybWF0LmNvbG9yaXplKCksXG4gICAgZm9ybWF0LnByaW50ZigoaW5mbykgPT4gYFske2luZm8udGltZXN0YW1wfV0gJHtpbmZvLmxldmVsfTogJHtpbmZvLm1lc3NhZ2V9YClcbiAgKSxcbiAgdHJhbnNwb3J0czogW1xuICAgIG5ldyB0cmFuc3BvcnRzLkNvbnNvbGUoe1xuICAgICAgZm9ybWF0OiBmb3JtYXQuY29tYmluZShcbiAgICAgICAgZm9ybWF0LmNvbG9yaXplKCksXG4gICAgICAgIGZvcm1hdC5wcmludGYoKGluZm8pID0+IGBbJHtpbmZvLnRpbWVzdGFtcH1dICR7aW5mby5sZXZlbH06ICR7aW5mby5tZXNzYWdlfWApXG4gICAgICApXG4gICAgfSlcbiAgXVxufSk7XG5cbmV4cG9ydCBkZWZhdWx0IGxvZ2dlcjtcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUNBLElBQUFBLFFBQUEsR0FBQUMsT0FBQTtBQUNBLElBQUFDLE9BQUEsR0FBQUMsc0JBQUEsQ0FBQUYsT0FBQTtBQUZBOztBQUlBLE1BQU1HLE1BQU0sR0FBRyxJQUFBQyxxQkFBWSxFQUFDO0VBQzFCQyxLQUFLLEVBQUUsTUFBTTtFQUNiQyxNQUFNLEVBQUVBLGVBQU0sQ0FBQ0MsT0FBTyxDQUNwQkQsZUFBTSxDQUFDRSxTQUFTLEVBQUUsRUFDbEJGLGVBQU0sQ0FBQ0csUUFBUSxFQUFFLEVBQ2pCSCxlQUFNLENBQUNJLE1BQU0sQ0FBRUMsSUFBSSxJQUFNLElBQUdBLElBQUksQ0FBQ0gsU0FBVSxLQUFJRyxJQUFJLENBQUNOLEtBQU0sS0FBSU0sSUFBSSxDQUFDQyxPQUFRLEVBQUMsQ0FBQyxDQUM5RTtFQUNEQyxVQUFVLEVBQUUsQ0FDVixJQUFJQSxtQkFBVSxDQUFDQyxPQUFPLENBQUM7SUFDckJSLE1BQU0sRUFBRUEsZUFBTSxDQUFDQyxPQUFPLENBQ3BCRCxlQUFNLENBQUNHLFFBQVEsRUFBRSxFQUNqQkgsZUFBTSxDQUFDSSxNQUFNLENBQUVDLElBQUksSUFBTSxJQUFHQSxJQUFJLENBQUNILFNBQVUsS0FBSUcsSUFBSSxDQUFDTixLQUFNLEtBQUlNLElBQUksQ0FBQ0MsT0FBUSxFQUFDLENBQUM7RUFFakYsQ0FBQyxDQUFDO0FBRU4sQ0FBQyxDQUFDO0FBQUMsSUFBQUcsUUFBQSxHQUVZWixNQUFNO0FBQUFhLE9BQUEsQ0FBQUMsT0FBQSxHQUFBRixRQUFBO0FBQUFHLE1BQUEsQ0FBQUYsT0FBQSxHQUFBQSxPQUFBLENBQUFDLE9BQUEifQ==","map":{"version":3,"names":["_winston","require","_colors","_interopRequireDefault","logger","createLogger","level","format","combine","timestamp","colorize","printf","info","message","transports","Console","_default","exports","default","module"],"sourceRoot":"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/configs/","sources":["logger.js"],"sourcesContent":["/* eslint-disable no-unused-vars */\nimport { createLogger, format, transports } from 'winston';\nimport colors from 'colors';\n\nconst logger = createLogger({\n  level: 'info',\n  format: format.combine(\n    format.timestamp(),\n    format.colorize(),\n    format.printf((info) => `[${info.timestamp}] ${info.level}: ${info.message}`)\n  ),\n  transports: [\n    new transports.Console({\n      format: format.combine(\n        format.colorize(),\n        format.printf((info) => `[${info.timestamp}] ${info.level}: ${info.message}`)\n      )\n    })\n  ]\n});\n\nexport default logger;\n"],"mappings":";;;;;;;AACA,IAAAA,QAAA,GAAAC,OAAA;AACA,IAAAC,OAAA,GAAAC,sBAAA,CAAAF,OAAA;AAFA;;AAIA,MAAMG,MAAM,GAAG,IAAAC,qBAAY,EAAC;EAC1BC,KAAK,EAAE,MAAM;EACbC,MAAM,EAAEA,eAAM,CAACC,OAAO,CACpBD,eAAM,CAACE,SAAS,EAAE,EAClBF,eAAM,CAACG,QAAQ,EAAE,EACjBH,eAAM,CAACI,MAAM,CAAEC,IAAI,IAAM,IAAGA,IAAI,CAACH,SAAU,KAAIG,IAAI,CAACN,KAAM,KAAIM,IAAI,CAACC,OAAQ,EAAC,CAAC,CAC9E;EACDC,UAAU,EAAE,CACV,IAAIA,mBAAU,CAACC,OAAO,CAAC;IACrBR,MAAM,EAAEA,eAAM,CAACC,OAAO,CACpBD,eAAM,CAACG,QAAQ,EAAE,EACjBH,eAAM,CAACI,MAAM,CAAEC,IAAI,IAAM,IAAGA,IAAI,CAACH,SAAU,KAAIG,IAAI,CAACN,KAAM,KAAIM,IAAI,CAACC,OAAQ,EAAC,CAAC;EAEjF,CAAC,CAAC;AAEN,CAAC,CAAC;AAAC,IAAAG,QAAA,GAEYZ,MAAM;AAAAa,OAAA,CAAAC,OAAA,GAAAF,QAAA;AAAAG,MAAA,CAAAF,OAAA,GAAAA,OAAA,CAAAC,OAAA"}},"mtime":1682148437920},"{\"assumptions\":{},\"sourceRoot\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/middlewares/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"filename\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/middlewares/checkUserExist.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/node_modules/babel-plugin-add-module-exports/lib/index.js\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-runtime\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"regenerator\":true},\"externalDependencies\":[]},{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.21.0:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = exports.checkUserByEmail = exports.checkSubscriberExist = void 0;\nvar _models = require(\"../database/models\");\nvar _jwt = require(\"../helpers/jwt\");\n/* eslint-disable object-shorthand */\n// eslint-disable-next-line import/named\n\nconst checkUserExist = async (req, res, next) => {\n  try {\n    const user = await _models.users.findOne({\n      where: {\n        email: req.body.email || 'undefined'\n      }\n    });\n    if (user && user !== null) return res.status(400).json({\n      message: 'email exists'\n    });\n    next();\n  } catch (e) {\n    return res.status(500).json(e);\n  }\n};\nconst checkSubscriberExist = async (req, res, next) => {\n  try {\n    const user = await _models.Subscriber.findOne({\n      where: {\n        email: req.body.email || 'undefined'\n      }\n    });\n    if (user && user !== null) return res.status(400).json({\n      message: 'email exists'\n    });\n    next();\n  } catch (e) {\n    return res.status(500).json(e);\n  }\n};\nexports.checkSubscriberExist = checkSubscriberExist;\nconst checkUserByEmail = async (req, res, next) => {\n  const user = await _models.users.findOne({\n    where: {\n      email: req.user.emails[0].value\n    }\n  });\n  if (user) {\n    const {\n      id,\n      email,\n      role\n    } = user;\n    const token = _jwt.Jwt.generateToken({\n      id: id,\n      email: email,\n      role: role\n    });\n    return res.redirect(`/users/redirect?key=${token}`);\n  }\n  next();\n};\nexports.checkUserByEmail = checkUserByEmail;\nvar _default = checkUserExist;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfbW9kZWxzIiwicmVxdWlyZSIsIl9qd3QiLCJjaGVja1VzZXJFeGlzdCIsInJlcSIsInJlcyIsIm5leHQiLCJ1c2VyIiwidXNlcnMiLCJmaW5kT25lIiwid2hlcmUiLCJlbWFpbCIsImJvZHkiLCJzdGF0dXMiLCJqc29uIiwibWVzc2FnZSIsImUiLCJjaGVja1N1YnNjcmliZXJFeGlzdCIsIlN1YnNjcmliZXIiLCJleHBvcnRzIiwiY2hlY2tVc2VyQnlFbWFpbCIsImVtYWlscyIsInZhbHVlIiwiaWQiLCJyb2xlIiwidG9rZW4iLCJKd3QiLCJnZW5lcmF0ZVRva2VuIiwicmVkaXJlY3QiLCJfZGVmYXVsdCIsImRlZmF1bHQiXSwic291cmNlUm9vdCI6Ii9Vc2Vycy9hbmRlbGFyd2FuZGEvRGVza3RvcC9lLWNvbW0tdGVhbS1icm9ncmFtbWVycy1ibi9zcmMvbWlkZGxld2FyZXMvIiwic291cmNlcyI6WyJjaGVja1VzZXJFeGlzdC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKiBlc2xpbnQtZGlzYWJsZSBvYmplY3Qtc2hvcnRoYW5kICovXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgaW1wb3J0L25hbWVkXG5pbXBvcnQgeyB1c2VycywgU3Vic2NyaWJlciB9IGZyb20gJy4uL2RhdGFiYXNlL21vZGVscyc7XG5pbXBvcnQgeyBKd3QgfSBmcm9tICcuLi9oZWxwZXJzL2p3dCc7XG5cbmNvbnN0IGNoZWNrVXNlckV4aXN0ID0gYXN5bmMgKHJlcSwgcmVzLCBuZXh0KSA9PiB7XG4gIHRyeSB7XG4gICAgY29uc3QgdXNlciA9IGF3YWl0IHVzZXJzLmZpbmRPbmUoeyB3aGVyZTogeyBlbWFpbDogcmVxLmJvZHkuZW1haWwgfHwgJ3VuZGVmaW5lZCcgfSB9KTtcbiAgICBpZiAodXNlciAmJiB1c2VyICE9PSBudWxsKSByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBtZXNzYWdlOiAnZW1haWwgZXhpc3RzJyB9KTtcblxuICAgIG5leHQoKTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIHJldHVybiByZXMuc3RhdHVzKDUwMCkuanNvbihlKTtcbiAgfVxufTtcblxuZXhwb3J0IGNvbnN0IGNoZWNrU3Vic2NyaWJlckV4aXN0ID0gYXN5bmMgKHJlcSwgcmVzLCBuZXh0KSA9PiB7XG4gIHRyeSB7XG4gICAgY29uc3QgdXNlciA9IGF3YWl0IFN1YnNjcmliZXIuZmluZE9uZSh7IHdoZXJlOiB7IGVtYWlsOiByZXEuYm9keS5lbWFpbCB8fCAndW5kZWZpbmVkJyB9IH0pO1xuICAgIGlmICh1c2VyICYmIHVzZXIgIT09IG51bGwpIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IG1lc3NhZ2U6ICdlbWFpbCBleGlzdHMnIH0pO1xuICAgIG5leHQoKTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIHJldHVybiByZXMuc3RhdHVzKDUwMCkuanNvbihlKTtcbiAgfVxufTtcbmV4cG9ydCBjb25zdCBjaGVja1VzZXJCeUVtYWlsID0gYXN5bmMgKHJlcSwgcmVzLCBuZXh0KSA9PiB7XG4gIGNvbnN0IHVzZXIgPSBhd2FpdCB1c2Vycy5maW5kT25lKHtcbiAgICB3aGVyZTogeyBlbWFpbDogcmVxLnVzZXIuZW1haWxzWzBdLnZhbHVlIH0sXG4gIH0pO1xuICBpZiAodXNlcikge1xuICAgIGNvbnN0IHsgaWQsIGVtYWlsLCByb2xlIH0gPSB1c2VyO1xuICAgIGNvbnN0IHRva2VuID0gSnd0LmdlbmVyYXRlVG9rZW4oe1xuICAgICAgaWQ6IGlkLFxuICAgICAgZW1haWw6IGVtYWlsLFxuICAgICAgcm9sZTogcm9sZSxcbiAgICB9KTtcbiAgICByZXR1cm4gcmVzLnJlZGlyZWN0KGAvdXNlcnMvcmVkaXJlY3Q/a2V5PSR7dG9rZW59YCk7XG4gIH1cbiAgbmV4dCgpO1xufTtcblxuZXhwb3J0IGRlZmF1bHQgY2hlY2tVc2VyRXhpc3Q7XG4iXSwibWFwcGluZ3MiOiI7Ozs7OztBQUVBLElBQUFBLE9BQUEsR0FBQUMsT0FBQTtBQUNBLElBQUFDLElBQUEsR0FBQUQsT0FBQTtBQUhB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","map":{"version":3,"names":["_models","require","_jwt","checkUserExist","req","res","next","user","users","findOne","where","email","body","status","json","message","e","checkSubscriberExist","Subscriber","exports","checkUserByEmail","emails","value","id","role","token","Jwt","generateToken","redirect","_default","default"],"sourceRoot":"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/middlewares/","sources":["checkUserExist.js"],"sourcesContent":["/* eslint-disable object-shorthand */\n// eslint-disable-next-line import/named\nimport { users, Subscriber } from '../database/models';\nimport { Jwt } from '../helpers/jwt';\n\nconst checkUserExist = async (req, res, next) => {\n  try {\n    const user = await users.findOne({ where: { email: req.body.email || 'undefined' } });\n    if (user && user !== null) return res.status(400).json({ message: 'email exists' });\n\n    next();\n  } catch (e) {\n    return res.status(500).json(e);\n  }\n};\n\nexport const checkSubscriberExist = async (req, res, next) => {\n  try {\n    const user = await Subscriber.findOne({ where: { email: req.body.email || 'undefined' } });\n    if (user && user !== null) return res.status(400).json({ message: 'email exists' });\n    next();\n  } catch (e) {\n    return res.status(500).json(e);\n  }\n};\nexport const checkUserByEmail = async (req, res, next) => {\n  const user = await users.findOne({\n    where: { email: req.user.emails[0].value },\n  });\n  if (user) {\n    const { id, email, role } = user;\n    const token = Jwt.generateToken({\n      id: id,\n      email: email,\n      role: role,\n    });\n    return res.redirect(`/users/redirect?key=${token}`);\n  }\n  next();\n};\n\nexport default checkUserExist;\n"],"mappings":";;;;;;AAEA,IAAAA,OAAA,GAAAC,OAAA;AACA,IAAAC,IAAA,GAAAD,OAAA;AAHA;AACA;;AAIA,MAAME,cAAc,GAAG,MAAAA,CAAOC,GAAG,EAAEC,GAAG,EAAEC,IAAI,KAAK;EAC/C,IAAI;IACF,MAAMC,IAAI,GAAG,MAAMC,aAAK,CAACC,OAAO,CAAC;MAAEC,KAAK,EAAE;QAAEC,KAAK,EAAEP,GAAG,CAACQ,IAAI,CAACD,KAAK,IAAI;MAAY;IAAE,CAAC,CAAC;IACrF,IAAIJ,IAAI,IAAIA,IAAI,KAAK,IAAI,EAAE,OAAOF,GAAG,CAACQ,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;MAAEC,OAAO,EAAE;IAAe,CAAC,CAAC;IAEnFT,IAAI,EAAE;EACR,CAAC,CAAC,OAAOU,CAAC,EAAE;IACV,OAAOX,GAAG,CAACQ,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAACE,CAAC,CAAC;EAChC;AACF,CAAC;AAEM,MAAMC,oBAAoB,GAAG,MAAAA,CAAOb,GAAG,EAAEC,GAAG,EAAEC,IAAI,KAAK;EAC5D,IAAI;IACF,MAAMC,IAAI,GAAG,MAAMW,kBAAU,CAACT,OAAO,CAAC;MAAEC,KAAK,EAAE;QAAEC,KAAK,EAAEP,GAAG,CAACQ,IAAI,CAACD,KAAK,IAAI;MAAY;IAAE,CAAC,CAAC;IAC1F,IAAIJ,IAAI,IAAIA,IAAI,KAAK,IAAI,EAAE,OAAOF,GAAG,CAACQ,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;MAAEC,OAAO,EAAE;IAAe,CAAC,CAAC;IACnFT,IAAI,EAAE;EACR,CAAC,CAAC,OAAOU,CAAC,EAAE;IACV,OAAOX,GAAG,CAACQ,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAACE,CAAC,CAAC;EAChC;AACF,CAAC;AAACG,OAAA,CAAAF,oBAAA,GAAAA,oBAAA;AACK,MAAMG,gBAAgB,GAAG,MAAAA,CAAOhB,GAAG,EAAEC,GAAG,EAAEC,IAAI,KAAK;EACxD,MAAMC,IAAI,GAAG,MAAMC,aAAK,CAACC,OAAO,CAAC;IAC/BC,KAAK,EAAE;MAAEC,KAAK,EAAEP,GAAG,CAACG,IAAI,CAACc,MAAM,CAAC,CAAC,CAAC,CAACC;IAAM;EAC3C,CAAC,CAAC;EACF,IAAIf,IAAI,EAAE;IACR,MAAM;MAAEgB,EAAE;MAAEZ,KAAK;MAAEa;IAAK,CAAC,GAAGjB,IAAI;IAChC,MAAMkB,KAAK,GAAGC,QAAG,CAACC,aAAa,CAAC;MAC9BJ,EAAE,EAAEA,EAAE;MACNZ,KAAK,EAAEA,KAAK;MACZa,IAAI,EAAEA;IACR,CAAC,CAAC;IACF,OAAOnB,GAAG,CAACuB,QAAQ,CAAE,uBAAsBH,KAAM,EAAC,CAAC;EACrD;EACAnB,IAAI,EAAE;AACR,CAAC;AAACa,OAAA,CAAAC,gBAAA,GAAAA,gBAAA;AAAA,IAAAS,QAAA,GAEa1B,cAAc;AAAAgB,OAAA,CAAAW,OAAA,GAAAD,QAAA"}},"mtime":1682148437944},"{\"assumptions\":{},\"sourceRoot\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/helpers/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"filename\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/helpers/getRandom.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/node_modules/babel-plugin-add-module-exports/lib/index.js\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-runtime\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"regenerator\":true},\"externalDependencies\":[]},{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.21.0:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = GenerateOrdersNo;\n/* eslint-disable no-bitwise */\n/* eslint-disable require-jsdoc */\n\nconst random = n => parseInt(Math.random() * 10 ** n, 10);\nfunction GenerateOrdersNo() {\n  const dt = new Date();\n  const seed = dt.getYear() + dt.getDay() + dt.getMonth() + dt.getHours() + dt.getMinutes() + dt.getSeconds();\n  const holdrand = seed * 214013 + 2531011 >> 16 & 0x7fff;\n  const holdrand2 = holdrand * 214013 + 2531011 >> 16 & 0x7fff;\n  return [holdrand, random(1), holdrand2, random(2)].join('');\n}\nmodule.exports = exports.default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJyYW5kb20iLCJuIiwicGFyc2VJbnQiLCJNYXRoIiwiR2VuZXJhdGVPcmRlcnNObyIsImR0IiwiRGF0ZSIsInNlZWQiLCJnZXRZZWFyIiwiZ2V0RGF5IiwiZ2V0TW9udGgiLCJnZXRIb3VycyIsImdldE1pbnV0ZXMiLCJnZXRTZWNvbmRzIiwiaG9sZHJhbmQiLCJob2xkcmFuZDIiLCJqb2luIiwibW9kdWxlIiwiZXhwb3J0cyIsImRlZmF1bHQiXSwic291cmNlUm9vdCI6Ii9Vc2Vycy9hbmRlbGFyd2FuZGEvRGVza3RvcC9lLWNvbW0tdGVhbS1icm9ncmFtbWVycy1ibi9zcmMvaGVscGVycy8iLCJzb3VyY2VzIjpbImdldFJhbmRvbS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKiBlc2xpbnQtZGlzYWJsZSBuby1iaXR3aXNlICovXG4vKiBlc2xpbnQtZGlzYWJsZSByZXF1aXJlLWpzZG9jICovXG5cbmNvbnN0IHJhbmRvbSA9IChuKSA9PiBwYXJzZUludChNYXRoLnJhbmRvbSgpICogKDEwICoqIG4pLCAxMCk7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIEdlbmVyYXRlT3JkZXJzTm8oKSB7XG4gIGNvbnN0IGR0ID0gbmV3IERhdGUoKTtcbiAgY29uc3Qgc2VlZCA9IGR0LmdldFllYXIoKSArIGR0LmdldERheSgpXG4gICAgKyBkdC5nZXRNb250aCgpICsgZHQuZ2V0SG91cnMoKSArIGR0LmdldE1pbnV0ZXMoKSArIGR0LmdldFNlY29uZHMoKTtcbiAgY29uc3QgaG9sZHJhbmQgPSAoKHNlZWQgKiAyMTQwMTMgKyAyNTMxMDExKSA+PiAxNikgJiAweDdmZmY7XG4gIGNvbnN0IGhvbGRyYW5kMiA9ICgoaG9sZHJhbmQgKiAyMTQwMTMgKyAyNTMxMDExKSA+PiAxNikgJiAweDdmZmY7XG4gIHJldHVybiBbaG9sZHJhbmQsIHJhbmRvbSgxKSwgaG9sZHJhbmQyLCByYW5kb20oMildLmpvaW4oJycpO1xufVxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7QUFBQTtBQUNBOztBQUVBLE1BQU1BLE1BQU0sR0FBSUMsQ0FBQyxJQUFLQyxRQUFRLENBQUNDLElBQUksQ0FBQ0gsTUFBTSxFQUFFLEdBQUksRUFBRSxJQUFJQyxDQUFFLEVBQUUsRUFBRSxDQUFDO0FBRTlDLFNBQVNHLGdCQUFnQkEsQ0FBQSxFQUFHO0VBQ3pDLE1BQU1DLEVBQUUsR0FBRyxJQUFJQyxJQUFJLEVBQUU7RUFDckIsTUFBTUMsSUFBSSxHQUFHRixFQUFFLENBQUNHLE9BQU8sRUFBRSxHQUFHSCxFQUFFLENBQUNJLE1BQU0sRUFBRSxHQUNuQ0osRUFBRSxDQUFDSyxRQUFRLEVBQUUsR0FBR0wsRUFBRSxDQUFDTSxRQUFRLEVBQUUsR0FBR04sRUFBRSxDQUFDTyxVQUFVLEVBQUUsR0FBR1AsRUFBRSxDQUFDUSxVQUFVLEVBQUU7RUFDckUsTUFBTUMsUUFBUSxHQUFLUCxJQUFJLEdBQUcsTUFBTSxHQUFHLE9BQU8sSUFBSyxFQUFFLEdBQUksTUFBTTtFQUMzRCxNQUFNUSxTQUFTLEdBQUtELFFBQVEsR0FBRyxNQUFNLEdBQUcsT0FBTyxJQUFLLEVBQUUsR0FBSSxNQUFNO0VBQ2hFLE9BQU8sQ0FBQ0EsUUFBUSxFQUFFZCxNQUFNLENBQUMsQ0FBQyxDQUFDLEVBQUVlLFNBQVMsRUFBRWYsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUNnQixJQUFJLENBQUMsRUFBRSxDQUFDO0FBQzdEO0FBQUNDLE1BQUEsQ0FBQUMsT0FBQSxHQUFBQSxPQUFBLENBQUFDLE9BQUEifQ==","map":{"version":3,"names":["random","n","parseInt","Math","GenerateOrdersNo","dt","Date","seed","getYear","getDay","getMonth","getHours","getMinutes","getSeconds","holdrand","holdrand2","join","module","exports","default"],"sourceRoot":"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/helpers/","sources":["getRandom.js"],"sourcesContent":["/* eslint-disable no-bitwise */\n/* eslint-disable require-jsdoc */\n\nconst random = (n) => parseInt(Math.random() * (10 ** n), 10);\n\nexport default function GenerateOrdersNo() {\n  const dt = new Date();\n  const seed = dt.getYear() + dt.getDay()\n    + dt.getMonth() + dt.getHours() + dt.getMinutes() + dt.getSeconds();\n  const holdrand = ((seed * 214013 + 2531011) >> 16) & 0x7fff;\n  const holdrand2 = ((holdrand * 214013 + 2531011) >> 16) & 0x7fff;\n  return [holdrand, random(1), holdrand2, random(2)].join('');\n}\n"],"mappings":";;;;;;AAAA;AACA;;AAEA,MAAMA,MAAM,GAAIC,CAAC,IAAKC,QAAQ,CAACC,IAAI,CAACH,MAAM,EAAE,GAAI,EAAE,IAAIC,CAAE,EAAE,EAAE,CAAC;AAE9C,SAASG,gBAAgBA,CAAA,EAAG;EACzC,MAAMC,EAAE,GAAG,IAAIC,IAAI,EAAE;EACrB,MAAMC,IAAI,GAAGF,EAAE,CAACG,OAAO,EAAE,GAAGH,EAAE,CAACI,MAAM,EAAE,GACnCJ,EAAE,CAACK,QAAQ,EAAE,GAAGL,EAAE,CAACM,QAAQ,EAAE,GAAGN,EAAE,CAACO,UAAU,EAAE,GAAGP,EAAE,CAACQ,UAAU,EAAE;EACrE,MAAMC,QAAQ,GAAKP,IAAI,GAAG,MAAM,GAAG,OAAO,IAAK,EAAE,GAAI,MAAM;EAC3D,MAAMQ,SAAS,GAAKD,QAAQ,GAAG,MAAM,GAAG,OAAO,IAAK,EAAE,GAAI,MAAM;EAChE,OAAO,CAACA,QAAQ,EAAEd,MAAM,CAAC,CAAC,CAAC,EAAEe,SAAS,EAAEf,MAAM,CAAC,CAAC,CAAC,CAAC,CAACgB,IAAI,CAAC,EAAE,CAAC;AAC7D;AAACC,MAAA,CAAAC,OAAA,GAAAA,OAAA,CAAAC,OAAA"}},"mtime":1685643189454},"{\"assumptions\":{},\"sourceRoot\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/middlewares/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"filename\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/middlewares/checkoutValidate.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/node_modules/babel-plugin-add-module-exports/lib/index.js\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-runtime\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"regenerator\":true},\"externalDependencies\":[]},{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.21.0:development":{"value":{"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = checkoutVatidate;\nvar _checkout = _interopRequireDefault(require(\"../validations/checkout.validation\"));\n/**\n * validation function\n * @param {Object} req\n * @param {Object} res\n * @param {Object} next next to other function\n * @returns {Object} response if error\n */\nasync function checkoutVatidate(req, res, next) {\n  const {\n    body\n  } = req;\n  const {\n    error\n  } = await (0, _checkout.default)(body);\n  if (error) {\n    return res.status(400).json({\n      message: error.message\n    });\n  }\n  next();\n}\nmodule.exports = exports.default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfY2hlY2tvdXQiLCJfaW50ZXJvcFJlcXVpcmVEZWZhdWx0IiwicmVxdWlyZSIsImNoZWNrb3V0VmF0aWRhdGUiLCJyZXEiLCJyZXMiLCJuZXh0IiwiYm9keSIsImVycm9yIiwidmFsaWRhdGlvbiIsInN0YXR1cyIsImpzb24iLCJtZXNzYWdlIiwibW9kdWxlIiwiZXhwb3J0cyIsImRlZmF1bHQiXSwic291cmNlUm9vdCI6Ii9Vc2Vycy9hbmRlbGFyd2FuZGEvRGVza3RvcC9lLWNvbW0tdGVhbS1icm9ncmFtbWVycy1ibi9zcmMvbWlkZGxld2FyZXMvIiwic291cmNlcyI6WyJjaGVja291dFZhbGlkYXRlLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB2YWxpZGF0aW9uIGZyb20gJy4uL3ZhbGlkYXRpb25zL2NoZWNrb3V0LnZhbGlkYXRpb24nO1xuXG4vKipcbiAqIHZhbGlkYXRpb24gZnVuY3Rpb25cbiAqIEBwYXJhbSB7T2JqZWN0fSByZXFcbiAqIEBwYXJhbSB7T2JqZWN0fSByZXNcbiAqIEBwYXJhbSB7T2JqZWN0fSBuZXh0IG5leHQgdG8gb3RoZXIgZnVuY3Rpb25cbiAqIEByZXR1cm5zIHtPYmplY3R9IHJlc3BvbnNlIGlmIGVycm9yXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGFzeW5jIGZ1bmN0aW9uIGNoZWNrb3V0VmF0aWRhdGUocmVxLCByZXMsIG5leHQpIHtcbiAgY29uc3QgeyBib2R5IH0gPSByZXE7XG4gIGNvbnN0IHsgZXJyb3IgfSA9IGF3YWl0IHZhbGlkYXRpb24oYm9keSk7XG4gIGlmIChlcnJvcikge1xuICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IG1lc3NhZ2U6IGVycm9yLm1lc3NhZ2UgfSk7XG4gIH1cbiAgbmV4dCgpO1xufVxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQUEsSUFBQUEsU0FBQSxHQUFBQyxzQkFBQSxDQUFBQyxPQUFBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDZSxlQUFlQyxnQkFBZ0JBLENBQUNDLEdBQUcsRUFBRUMsR0FBRyxFQUFFQyxJQUFJLEVBQUU7RUFDN0QsTUFBTTtJQUFFQztFQUFLLENBQUMsR0FBR0gsR0FBRztFQUNwQixNQUFNO0lBQUVJO0VBQU0sQ0FBQyxHQUFHLE1BQU0sSUFBQUMsaUJBQVUsRUFBQ0YsSUFBSSxDQUFDO0VBQ3hDLElBQUlDLEtBQUssRUFBRTtJQUNULE9BQU9ILEdBQUcsQ0FBQ0ssTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDQyxJQUFJLENBQUM7TUFBRUMsT0FBTyxFQUFFSixLQUFLLENBQUNJO0lBQVEsQ0FBQyxDQUFDO0VBQ3pEO0VBQ0FOLElBQUksRUFBRTtBQUNSO0FBQUNPLE1BQUEsQ0FBQUMsT0FBQSxHQUFBQSxPQUFBLENBQUFDLE9BQUEifQ==","map":{"version":3,"names":["_checkout","_interopRequireDefault","require","checkoutVatidate","req","res","next","body","error","validation","status","json","message","module","exports","default"],"sourceRoot":"/Users/andelarwanda/Desktop/e-comm-team-brogrammers-bn/src/middlewares/","sources":["checkoutValidate.js"],"sourcesContent":["import validation from '../validations/checkout.validation';\n\n/**\n * validation function\n * @param {Object} req\n * @param {Object} res\n * @param {Object} next next to other function\n * @returns {Object} response if error\n */\nexport default async function checkoutVatidate(req, res, next) {\n  const { body } = req;\n  const { error } = await validation(body);\n  if (error) {\n    return res.status(400).json({ message: error.message });\n  }\n  next();\n}\n"],"mappings":";;;;;;;AAAA,IAAAA,SAAA,GAAAC,sBAAA,CAAAC,OAAA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACe,eAAeC,gBAAgBA,CAACC,GAAG,EAAEC,GAAG,EAAEC,IAAI,EAAE;EAC7D,MAAM;IAAEC;EAAK,CAAC,GAAGH,GAAG;EACpB,MAAM;IAAEI;EAAM,CAAC,GAAG,MAAM,IAAAC,iBAAU,EAACF,IAAI,CAAC;EACxC,IAAIC,KAAK,EAAE;IACT,OAAOH,GAAG,CAACK,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;MAAEC,OAAO,EAAEJ,KAAK,CAACI;IAAQ,CAAC,CAAC;EACzD;EACAN,IAAI,EAAE;AACR;AAACO,MAAA,CAAAC,OAAA,GAAAA,OAAA,CAAAC,OAAA"}},"mtime":1685643189460}}